var h4=Object.defineProperty;var aT=t=>{throw TypeError(t)};var d4=(t,e,n)=>e in t?h4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>d4(t,typeof e!="symbol"?e+"":e,n),Qy=(t,e,n)=>e.has(t)||aT("Cannot "+n);var se=(t,e,n)=>(Qy(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>e.has(t)?aT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(Qy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(Qy(t,e,"access private method"),n);var Sd=(t,e,n,r)=>({set _(s){Qe(t,e,s,n)},get _(){return se(t,e,r)}});function p4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var lT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function k3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Gy={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function g4(){if(cT)return Gu;cT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:i}}return Gu.Fragment=e,Gu.jsx=n,Gu.jsxs=n,Gu}var uT;function m4(){return uT||(uT=1,Gy.exports=g4()),Gy.exports}var y=m4(),Jy={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function y4(){if(fT)return wt;fT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function C(D,ne,ye){this.props=D,this.context=ne,this.refs=A,this.updater=ye||w}C.prototype.isReactComponent={},C.prototype.setState=function(D,ne){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ne,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=C.prototype;function N(D,ne,ye){this.props=D,this.context=ne,this.refs=A,this.updater=ye||w}var k=N.prototype=new M;k.constructor=N,R(k,C.prototype),k.isPureReactComponent=!0;var F=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function X(D,ne,ye,U,we,ce){return ye=ce.ref,{$$typeof:t,type:D,key:ne,ref:ye!==void 0?ye:null,props:ce}}function Y(D,ne){return X(D.type,ne,void 0,void 0,void 0,D.props)}function G(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function K(D){var ne={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ye){return ne[ye]})}var Q=/\/+/g;function ie(D,ne){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):ne.toString(36)}function xe(){}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(xe,xe):(D.status="pending",D.then(function(ne){D.status==="pending"&&(D.status="fulfilled",D.value=ne)},function(ne){D.status==="pending"&&(D.status="rejected",D.reason=ne)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Re(D,ne,ye,U,we){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var ke=!1;if(D===null)ke=!0;else switch(ce){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(D.$$typeof){case t:case e:ke=!0;break;case d:return ke=D._init,Re(ke(D._payload),ne,ye,U,we)}}if(ke)return we=we(D),ke=U===""?"."+ie(D,0):U,F(we)?(ye="",ke!=null&&(ye=ke.replace(Q,"$&/")+"/"),Re(we,ne,ye,"",function(Ge){return Ge})):we!=null&&(G(we)&&(we=Y(we,ye+(we.key==null||D&&D.key===we.key?"":(""+we.key).replace(Q,"$&/")+"/")+ke)),ne.push(we)),1;ke=0;var Ce=U===""?".":U+":";if(F(D))for(var De=0;De<D.length;De++)U=D[De],ce=Ce+ie(U,De),ke+=Re(U,ne,ye,ce,we);else if(De=b(D),typeof De=="function")for(D=De.call(D),De=0;!(U=D.next()).done;)U=U.value,ce=Ce+ie(U,De++),ke+=Re(U,ne,ye,ce,we);else if(ce==="object"){if(typeof D.then=="function")return Re(oe(D),ne,ye,U,we);throw ne=String(D),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ke}function re(D,ne,ye){if(D==null)return D;var U=[],we=0;return Re(D,U,"","",function(ce){return ne.call(ye,ce,we++)}),U}function Ee(D){if(D._status===-1){var ne=D._result;ne=ne(),ne.then(function(ye){(D._status===0||D._status===-1)&&(D._status=1,D._result=ye)},function(ye){(D._status===0||D._status===-1)&&(D._status=2,D._result=ye)}),D._status===-1&&(D._status=0,D._result=ne)}if(D._status===1)return D._result.default;throw D._result}var ue=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ve(){}return wt.Children={map:re,forEach:function(D,ne,ye){re(D,function(){ne.apply(this,arguments)},ye)},count:function(D){var ne=0;return re(D,function(){ne++}),ne},toArray:function(D){return re(D,function(ne){return ne})||[]},only:function(D){if(!G(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},wt.Component=C,wt.Fragment=n,wt.Profiler=s,wt.PureComponent=N,wt.StrictMode=r,wt.Suspense=u,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,wt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},wt.cache=function(D){return function(){return D.apply(null,arguments)}},wt.cloneElement=function(D,ne,ye){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var U=R({},D.props),we=D.key,ce=void 0;if(ne!=null)for(ke in ne.ref!==void 0&&(ce=void 0),ne.key!==void 0&&(we=""+ne.key),ne)!P.call(ne,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ne.ref===void 0||(U[ke]=ne[ke]);var ke=arguments.length-2;if(ke===1)U.children=ye;else if(1<ke){for(var Ce=Array(ke),De=0;De<ke;De++)Ce[De]=arguments[De+2];U.children=Ce}return X(D.type,we,void 0,void 0,ce,U)},wt.createContext=function(D){return D={$$typeof:a,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},wt.createElement=function(D,ne,ye){var U,we={},ce=null;if(ne!=null)for(U in ne.key!==void 0&&(ce=""+ne.key),ne)P.call(ne,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(we[U]=ne[U]);var ke=arguments.length-2;if(ke===1)we.children=ye;else if(1<ke){for(var Ce=Array(ke),De=0;De<ke;De++)Ce[De]=arguments[De+2];we.children=Ce}if(D&&D.defaultProps)for(U in ke=D.defaultProps,ke)we[U]===void 0&&(we[U]=ke[U]);return X(D,ce,void 0,void 0,null,we)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(D){return{$$typeof:l,render:D}},wt.isValidElement=G,wt.lazy=function(D){return{$$typeof:d,_payload:{_status:-1,_result:D},_init:Ee}},wt.memo=function(D,ne){return{$$typeof:h,type:D,compare:ne===void 0?null:ne}},wt.startTransition=function(D){var ne=B.T,ye={};B.T=ye;try{var U=D(),we=B.S;we!==null&&we(ye,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(Ve,ue)}catch(ce){ue(ce)}finally{B.T=ne}},wt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},wt.use=function(D){return B.H.use(D)},wt.useActionState=function(D,ne,ye){return B.H.useActionState(D,ne,ye)},wt.useCallback=function(D,ne){return B.H.useCallback(D,ne)},wt.useContext=function(D){return B.H.useContext(D)},wt.useDebugValue=function(){},wt.useDeferredValue=function(D,ne){return B.H.useDeferredValue(D,ne)},wt.useEffect=function(D,ne,ye){var U=B.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(D,ne)},wt.useId=function(){return B.H.useId()},wt.useImperativeHandle=function(D,ne,ye){return B.H.useImperativeHandle(D,ne,ye)},wt.useInsertionEffect=function(D,ne){return B.H.useInsertionEffect(D,ne)},wt.useLayoutEffect=function(D,ne){return B.H.useLayoutEffect(D,ne)},wt.useMemo=function(D,ne){return B.H.useMemo(D,ne)},wt.useOptimistic=function(D,ne){return B.H.useOptimistic(D,ne)},wt.useReducer=function(D,ne,ye){return B.H.useReducer(D,ne,ye)},wt.useRef=function(D){return B.H.useRef(D)},wt.useState=function(D){return B.H.useState(D)},wt.useSyncExternalStore=function(D,ne,ye){return B.H.useSyncExternalStore(D,ne,ye)},wt.useTransition=function(){return B.H.useTransition()},wt.version="19.1.0",wt}var hT;function sv(){return hT||(hT=1,Jy.exports=y4()),Jy.exports}var I=sv();const Ao=Hc(I),iv=p4({__proto__:null,default:Ao},[I]);var eb={exports:{}},Ju={},tb={exports:{}},nb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function b4(){return dT||(dT=1,function(t){function e(re,Ee){var ue=re.length;re.push(Ee);e:for(;0<ue;){var Ve=ue-1>>>1,D=re[Ve];if(0<s(D,Ee))re[Ve]=Ee,re[ue]=D,ue=Ve;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var Ee=re[0],ue=re.pop();if(ue!==Ee){re[0]=ue;e:for(var Ve=0,D=re.length,ne=D>>>1;Ve<ne;){var ye=2*(Ve+1)-1,U=re[ye],we=ye+1,ce=re[we];if(0>s(U,ue))we<D&&0>s(ce,U)?(re[Ve]=ce,re[we]=ue,Ve=we):(re[Ve]=U,re[ye]=ue,Ve=ye);else if(we<D&&0>s(ce,ue))re[Ve]=ce,re[we]=ue,Ve=we;else break e}}return Ee}function s(re,Ee){var ue=re.sortIndex-Ee.sortIndex;return ue!==0?ue:re.id-Ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,b=3,w=!1,R=!1,A=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function F(re){for(var Ee=n(h);Ee!==null;){if(Ee.callback===null)r(h);else if(Ee.startTime<=re)r(h),Ee.sortIndex=Ee.expirationTime,e(u,Ee);else break;Ee=n(h)}}function B(re){if(A=!1,F(re),!R)if(n(u)!==null)R=!0,P||(P=!0,ie());else{var Ee=n(h);Ee!==null&&Re(B,Ee.startTime-re)}}var P=!1,X=-1,Y=5,G=-1;function K(){return C?!0:!(t.unstable_now()-G<Y)}function Q(){if(C=!1,P){var re=t.unstable_now();G=re;var Ee=!0;try{e:{R=!1,A&&(A=!1,N(X),X=-1),w=!0;var ue=b;try{t:{for(F(re),g=n(u);g!==null&&!(g.expirationTime>re&&K());){var Ve=g.callback;if(typeof Ve=="function"){g.callback=null,b=g.priorityLevel;var D=Ve(g.expirationTime<=re);if(re=t.unstable_now(),typeof D=="function"){g.callback=D,F(re),Ee=!0;break t}g===n(u)&&r(u),F(re)}else r(u);g=n(u)}if(g!==null)Ee=!0;else{var ne=n(h);ne!==null&&Re(B,ne.startTime-re),Ee=!1}}break e}finally{g=null,b=ue,w=!1}Ee=void 0}}finally{Ee?ie():P=!1}}}var ie;if(typeof k=="function")ie=function(){k(Q)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,oe=xe.port2;xe.port1.onmessage=Q,ie=function(){oe.postMessage(null)}}else ie=function(){M(Q,0)};function Re(re,Ee){X=M(function(){re(t.unstable_now())},Ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(re){switch(b){case 1:case 2:case 3:var Ee=3;break;default:Ee=b}var ue=b;b=Ee;try{return re()}finally{b=ue}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(re,Ee){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ue=b;b=re;try{return Ee()}finally{b=ue}},t.unstable_scheduleCallback=function(re,Ee,ue){var Ve=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ve+ue:Ve):ue=Ve,re){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ue+D,re={id:d++,callback:Ee,priorityLevel:re,startTime:ue,expirationTime:D,sortIndex:-1},ue>Ve?(re.sortIndex=ue,e(h,re),n(u)===null&&re===n(h)&&(A?(N(X),X=-1):A=!0,Re(B,ue-Ve))):(re.sortIndex=D,e(u,re),R||w||(R=!0,P||(P=!0,ie()))),re},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(re){var Ee=b;return function(){var ue=b;b=Ee;try{return re.apply(this,arguments)}finally{b=ue}}}}(nb)),nb}var pT;function _4(){return pT||(pT=1,tb.exports=b4()),tb.exports}var rb={exports:{}},_r={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function x4(){if(gT)return _r;gT=1;var t=sv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(u,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:h,implementation:d}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_r.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,d)},_r.flushSync=function(u){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=h,r.p=d,r.d.f()}},_r.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},_r.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},_r.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:w}):d==="script"&&r.d.X(u,{crossOrigin:g,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_r.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},_r.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin);r.d.L(u,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_r.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=l(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},_r.requestFormReset=function(u){r.d.r(u)},_r.unstable_batchedUpdates=function(u,h){return u(h)},_r.useFormState=function(u,h,d){return a.H.useFormState(u,h,d)},_r.useFormStatus=function(){return a.H.useHostTransitionStatus()},_r.version="19.1.0",_r}var mT;function N3(){if(mT)return rb.exports;mT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rb.exports=x4(),rb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function v4(){if(yT)return Ju;yT=1;var t=_4(),e=sv(),n=N3();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(i(o)!==o)throw Error(r(188))}function u(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(r(188));return c!==o?null:o}for(var f=o,p=c;;){var _=f.return;if(_===null)break;var T=_.alternate;if(T===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===f)return l(_),o;if(T===p)return l(_),c;T=T.sibling}throw Error(r(188))}if(f.return!==p.return)f=_,p=T;else{for(var O=!1,V=_.child;V;){if(V===f){O=!0,f=_,p=T;break}if(V===p){O=!0,p=_,f=T;break}V=V.sibling}if(!O){for(V=T.child;V;){if(V===f){O=!0,f=T,p=_;break}if(V===p){O=!0,p=T,f=_;break}V=V.sibling}if(!O)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ie(o){return o===null||typeof o!="object"?null:(o=Q&&o[Q]||o["@@iterator"],typeof o=="function"?o:null)}var xe=Symbol.for("react.client.reference");function oe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===xe?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case R:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case P:return"SuspenseList";case G:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case k:return(o.displayName||"Context")+".Provider";case N:return(o._context.displayName||"Context")+".Consumer";case F:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case X:return c=o.displayName||null,c!==null?c:oe(o.type)||"Memo";case Y:c=o._payload,o=o._init;try{return oe(o(c))}catch{}}return null}var Re=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ve=[],D=-1;function ne(o){return{current:o}}function ye(o){0>D||(o.current=Ve[D],Ve[D]=null,D--)}function U(o,c){D++,Ve[D]=o.current,o.current=c}var we=ne(null),ce=ne(null),ke=ne(null),Ce=ne(null);function De(o,c){switch(U(ke,c),U(ce,o),U(we,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?DS(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=DS(c),o=FS(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ye(we),U(we,o)}function Ge(){ye(we),ye(ce),ye(ke)}function Ke(o){o.memoizedState!==null&&U(Ce,o);var c=we.current,f=FS(c,o.type);c!==f&&(U(ce,o),U(we,f))}function nt(o){ce.current===o&&(ye(we),ye(ce)),Ce.current===o&&(ye(Ce),Xu._currentValue=ue)}var st=Object.prototype.hasOwnProperty,ct=t.unstable_scheduleCallback,Xt=t.unstable_cancelCallback,In=t.unstable_shouldYield,ar=t.unstable_requestPaint,xn=t.unstable_now,Tn=t.unstable_getCurrentPriorityLevel,fn=t.unstable_ImmediatePriority,xi=t.unstable_UserBlockingPriority,lr=t.unstable_NormalPriority,mr=t.unstable_LowPriority,Ks=t.unstable_IdlePriority,Zs=t.log,nu=t.unstable_setDisableYieldValue,Me=null,Le=null;function ut(o){if(typeof Zs=="function"&&nu(o),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Me,o)}catch{}}var dt=Math.clz32?Math.clz32:ks,$t=Math.log,Rr=Math.LN2;function ks(o){return o>>>=0,o===0?32:31-($t(o)/Rr|0)|0}var yr=256,Xr=4194304;function Cr(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Bn(o,c,f){var p=o.pendingLanes;if(p===0)return 0;var _=0,T=o.suspendedLanes,O=o.pingedLanes;o=o.warmLanes;var V=p&134217727;return V!==0?(p=V&~T,p!==0?_=Cr(p):(O&=V,O!==0?_=Cr(O):f||(f=V&~o,f!==0&&(_=Cr(f))))):(V=p&~T,V!==0?_=Cr(V):O!==0?_=Cr(O):f||(f=p&~o,f!==0&&(_=Cr(f)))),_===0?0:c!==0&&c!==_&&(c&T)===0&&(T=_&-_,f=c&-c,T>=f||T===32&&(f&4194048)!==0)?c:_}function jr(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Yr(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ra(){var o=yr;return yr<<=1,(yr&4194048)===0&&(yr=256),o}function ru(){var o=Xr;return Xr<<=1,(Xr&62914560)===0&&(Xr=4194304),o}function ll(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Ns(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function cO(o,c,f,p,_,T){var O=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var V=o.entanglements,J=o.expirationTimes,ve=o.hiddenUpdates;for(f=O&~f;0<f;){var Oe=31-dt(f),Fe=1<<Oe;V[Oe]=0,J[Oe]=-1;var Se=ve[Oe];if(Se!==null)for(ve[Oe]=null,Oe=0;Oe<Se.length;Oe++){var Ae=Se[Oe];Ae!==null&&(Ae.lane&=-536870913)}f&=~Fe}p!==0&&sa(o,p,0),T!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=T&~(O&~c))}function sa(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-dt(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|f&4194090}function Yn(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var p=31-dt(f),_=1<<p;_&c|o[p]&c&&(o[p]|=c),f&=~_}}function Yi(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function j(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function S(){var o=Ee.p;return o!==0?o:(o=window.event,o===void 0?32:tT(o.type))}function x(o,c){var f=Ee.p;try{return Ee.p=o,c()}finally{Ee.p=f}}var m=Math.random().toString(36).slice(2),v="__reactFiber$"+m,E="__reactProps$"+m,L="__reactContainer$"+m,$="__reactEvents$"+m,H="__reactListeners$"+m,q="__reactHandles$"+m,pe="__reactResources$"+m,ee="__reactMarker$"+m;function Ne(o){delete o[v],delete o[E],delete o[$],delete o[H],delete o[q]}function ze(o){var c=o[v];if(c)return c;for(var f=o.parentNode;f;){if(c=f[L]||f[v]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=LS(o);o!==null;){if(f=o[v])return f;o=LS(o)}return c}o=f,f=o.parentNode}return null}function Te(o){if(o=o[v]||o[L]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Ie(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Xe(o){var c=o[pe];return c||(c=o[pe]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function te(o){o[ee]=!0}var $e=new Set,Ze={};function ot(o,c){ft(o,c),ft(o+"Capture",c)}function ft(o,c){for(Ze[o]=c,o=0;o<c.length;o++)$e.add(c[o])}var mn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rt={},at={};function Gt(o){return st.call(at,o)?!0:st.call(rt,o)?!1:mn.test(o)?at[o]=!0:(rt[o]=!0,!1)}function le(o,c,f){if(Gt(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function Be(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function qe(o,c,f,p){if(p===null)o.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+p)}}var Ue,hn;function Ot(o){if(Ue===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ue=c&&c[1]||"",hn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+o+hn}var Jt=!1;function sn(o,c){if(!o||Jt)return"";Jt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ae){var Se=Ae}Reflect.construct(o,[],Fe)}else{try{Fe.call()}catch(Ae){Se=Ae}o.call(Fe.prototype)}}else{try{throw Error()}catch(Ae){Se=Ae}(Fe=o())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ae){if(Ae&&Se&&typeof Ae.stack=="string")return[Ae.stack,Se.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=p.DetermineComponentFrameRoot(),O=T[0],V=T[1];if(O&&V){var J=O.split(`
`),ve=V.split(`
`);for(_=p=0;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;for(;_<ve.length&&!ve[_].includes("DetermineComponentFrameRoot");)_++;if(p===J.length||_===ve.length)for(p=J.length-1,_=ve.length-1;1<=p&&0<=_&&J[p]!==ve[_];)_--;for(;1<=p&&0<=_;p--,_--)if(J[p]!==ve[_]){if(p!==1||_!==1)do if(p--,_--,0>_||J[p]!==ve[_]){var Oe=`
`+J[p].replace(" at new "," at ");return o.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",o.displayName)),Oe}while(1<=p&&0<=_);break}}}finally{Jt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Ot(f):""}function Kn(o){switch(o.tag){case 26:case 27:case 5:return Ot(o.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return sn(o.type,!1);case 11:return sn(o.type.render,!1);case 1:return sn(o.type,!0);case 31:return Ot("Activity");default:return""}}function Br(o){try{var c="";do c+=Kn(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Lt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Kr(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ms(o){var c=Kr(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),p=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,T=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return _.call(this)},set:function(O){p=""+O,T.call(this,O)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function vt(o){o._valueTracker||(o._valueTracker=Ms(o))}function Un(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),p="";return o&&(p=Kr(o)?o.checked?"true":"false":o.value),o=p,o!==f?(c.setValue(o),!0):!1}function nr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var kr=/[\n"\\]/g;function zt(o){return o.replace(kr,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function su(o,c,f,p,_,T,O,V){o.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.type=O:o.removeAttribute("type"),c!=null?O==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Lt(c)):o.value!==""+Lt(c)&&(o.value=""+Lt(c)):O!=="submit"&&O!=="reset"||o.removeAttribute("value"),c!=null?iu(o,O,Lt(c)):f!=null?iu(o,O,Lt(f)):p!=null&&o.removeAttribute("value"),_==null&&T!=null&&(o.defaultChecked=!!T),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.name=""+Lt(V):o.removeAttribute("name")}function dh(o,c,f,p,_,T,O,V){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),c!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||c!=null))return;f=f!=null?""+Lt(f):"",c=c!=null?""+Lt(c):f,V||c===o.value||(o.value=c),o.defaultValue=c}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=V?o.checked:!!p,o.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(o.name=O)}function iu(o,c,f){c==="number"&&nr(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Ki(o,c,f,p){if(o=o.options,c){c={};for(var _=0;_<f.length;_++)c["$"+f[_]]=!0;for(f=0;f<o.length;f++)_=c.hasOwnProperty("$"+o[f].value),o[f].selected!==_&&(o[f].selected=_),_&&p&&(o[f].defaultSelected=!0)}else{for(f=""+Lt(f),c=null,_=0;_<o.length;_++){if(o[_].value===f){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}c!==null||o[_].disabled||(c=o[_])}c!==null&&(c.selected=!0)}}function ph(o,c,f){if(c!=null&&(c=""+Lt(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Lt(f):""}function gh(o,c,f,p){if(c==null){if(p!=null){if(f!=null)throw Error(r(92));if(Re(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),c=f}f=Lt(c),o.defaultValue=f,p=o.textContent,p===f&&p!==""&&p!==null&&(o.value=p)}function Zi(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var Kg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mh(o,c,f){var p=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,f):typeof f!="number"||f===0||Kg.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function F0(o,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var _ in c)p=c[_],c.hasOwnProperty(_)&&f[_]!==p&&mh(o,_,p)}else for(var T in c)c.hasOwnProperty(T)&&mh(o,T,c[T])}function Zg(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yh(o){return fO.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Qg=null;function Gg(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var cl=null,ul=null;function j0(o){var c=Te(o);if(c&&(o=c.stateNode)){var f=o[E]||null;e:switch(o=c.stateNode,c.type){case"input":if(su(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+zt(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var p=f[c];if(p!==o&&p.form===o.form){var _=p[E]||null;if(!_)throw Error(r(90));su(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(c=0;c<f.length;c++)p=f[c],p.form===o.form&&Un(p)}break e;case"textarea":ph(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Ki(o,!!f.multiple,c,!1)}}}var Jg=!1;function B0(o,c,f){if(Jg)return o(c,f);Jg=!0;try{var p=o(c);return p}finally{if(Jg=!1,(cl!==null||ul!==null)&&(nd(),cl&&(c=cl,o=ul,ul=cl=null,j0(c),o)))for(c=0;c<o.length;c++)j0(o[c])}}function ou(o,c){var f=o.stateNode;if(f===null)return null;var p=f[E]||null;if(p===null)return null;f=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),em=!1;if(vi)try{var au={};Object.defineProperty(au,"passive",{get:function(){em=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{em=!1}var Qi=null,tm=null,bh=null;function U0(){if(bh)return bh;var o,c=tm,f=c.length,p,_="value"in Qi?Qi.value:Qi.textContent,T=_.length;for(o=0;o<f&&c[o]===_[o];o++);var O=f-o;for(p=1;p<=O&&c[f-p]===_[T-p];p++);return bh=_.slice(o,1<p?1-p:void 0)}function _h(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function xh(){return!0}function L0(){return!1}function Ur(o){function c(f,p,_,T,O){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var V in o)o.hasOwnProperty(V)&&(f=o[V],this[V]=f?f(T):T[V]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?xh:L0,this.isPropagationStopped=L0,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=xh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=xh)},persist:function(){},isPersistent:xh}),c}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=Ur(ia),lu=d({},ia,{view:0,detail:0}),hO=Ur(lu),nm,rm,cu,wh=d({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==cu&&(cu&&o.type==="mousemove"?(nm=o.screenX-cu.screenX,rm=o.screenY-cu.screenY):rm=nm=0,cu=o),nm)},movementY:function(o){return"movementY"in o?o.movementY:rm}}),z0=Ur(wh),dO=d({},wh,{dataTransfer:0}),pO=Ur(dO),gO=d({},lu,{relatedTarget:0}),sm=Ur(gO),mO=d({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),yO=Ur(mO),bO=d({},ia,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_O=Ur(bO),xO=d({},ia,{data:0}),V0=Ur(xO),vO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TO(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=SO[o])?!!c[o]:!1}function im(){return TO}var EO=d({},lu,{key:function(o){if(o.key){var c=vO[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=_h(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?wO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(o){return o.type==="keypress"?_h(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_h(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),AO=Ur(EO),RO=d({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=Ur(RO),CO=d({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),kO=Ur(CO),NO=d({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),MO=Ur(NO),IO=d({},wh,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),OO=Ur(IO),PO=d({},ia,{newState:0,oldState:0}),DO=Ur(PO),FO=[9,13,27,32],om=vi&&"CompositionEvent"in window,uu=null;vi&&"documentMode"in document&&(uu=document.documentMode);var jO=vi&&"TextEvent"in window&&!uu,H0=vi&&(!om||uu&&8<uu&&11>=uu),W0=" ",q0=!1;function X0(o,c){switch(o){case"keyup":return FO.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var fl=!1;function BO(o,c){switch(o){case"compositionend":return Y0(c);case"keypress":return c.which!==32?null:(q0=!0,W0);case"textInput":return o=c.data,o===W0&&q0?null:o;default:return null}}function UO(o,c){if(fl)return o==="compositionend"||!om&&X0(o,c)?(o=U0(),bh=tm=Qi=null,fl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return H0&&c.locale!=="ko"?null:c.data;default:return null}}var LO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!LO[o.type]:c==="textarea"}function Z0(o,c,f,p){cl?ul?ul.push(p):ul=[p]:cl=p,c=ld(c,"onChange"),0<c.length&&(f=new vh("onChange","change",null,f,p),o.push({event:f,listeners:c}))}var fu=null,hu=null;function zO(o){NS(o,0)}function Sh(o){var c=Ie(o);if(Un(c))return o}function Q0(o,c){if(o==="change")return c}var G0=!1;if(vi){var am;if(vi){var lm="oninput"in document;if(!lm){var J0=document.createElement("div");J0.setAttribute("oninput","return;"),lm=typeof J0.oninput=="function"}am=lm}else am=!1;G0=am&&(!document.documentMode||9<document.documentMode)}function ew(){fu&&(fu.detachEvent("onpropertychange",tw),hu=fu=null)}function tw(o){if(o.propertyName==="value"&&Sh(hu)){var c=[];Z0(c,hu,o,Gg(o)),B0(zO,c)}}function VO(o,c,f){o==="focusin"?(ew(),fu=c,hu=f,fu.attachEvent("onpropertychange",tw)):o==="focusout"&&ew()}function $O(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Sh(hu)}function HO(o,c){if(o==="click")return Sh(c)}function WO(o,c){if(o==="input"||o==="change")return Sh(c)}function qO(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Zr=typeof Object.is=="function"?Object.is:qO;function du(o,c){if(Zr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),p=Object.keys(c);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!st.call(c,_)||!Zr(o[_],c[_]))return!1}return!0}function nw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function rw(o,c){var f=nw(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=c&&p>=c)return{node:f,offset:c-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=nw(f)}}function sw(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?sw(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function iw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=nr(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=nr(o.document)}return c}function cm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var XO=vi&&"documentMode"in document&&11>=document.documentMode,hl=null,um=null,pu=null,fm=!1;function ow(o,c,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;fm||hl==null||hl!==nr(p)||(p=hl,"selectionStart"in p&&cm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),pu&&du(pu,p)||(pu=p,p=ld(um,"onSelect"),0<p.length&&(c=new vh("onSelect","select",null,c,f),o.push({event:c,listeners:p}),c.target=hl)))}function oa(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var dl={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},hm={},aw={};vi&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function aa(o){if(hm[o])return hm[o];if(!dl[o])return o;var c=dl[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in aw)return hm[o]=c[f];return o}var lw=aa("animationend"),cw=aa("animationiteration"),uw=aa("animationstart"),YO=aa("transitionrun"),KO=aa("transitionstart"),ZO=aa("transitioncancel"),fw=aa("transitionend"),hw=new Map,dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dm.push("scrollEnd");function Is(o,c){hw.set(o,c),ot(c,[o])}var dw=new WeakMap;function hs(o,c){if(typeof o=="object"&&o!==null){var f=dw.get(o);return f!==void 0?f:(c={value:o,source:c,stack:Br(c)},dw.set(o,c),c)}return{value:o,source:c,stack:Br(c)}}var ds=[],pl=0,pm=0;function Th(){for(var o=pl,c=pm=pl=0;c<o;){var f=ds[c];ds[c++]=null;var p=ds[c];ds[c++]=null;var _=ds[c];ds[c++]=null;var T=ds[c];if(ds[c++]=null,p!==null&&_!==null){var O=p.pending;O===null?_.next=_:(_.next=O.next,O.next=_),p.pending=_}T!==0&&pw(f,_,T)}}function Eh(o,c,f,p){ds[pl++]=o,ds[pl++]=c,ds[pl++]=f,ds[pl++]=p,pm|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function gm(o,c,f,p){return Eh(o,c,f,p),Ah(o)}function gl(o,c){return Eh(o,null,null,c),Ah(o)}function pw(o,c,f){o.lanes|=f;var p=o.alternate;p!==null&&(p.lanes|=f);for(var _=!1,T=o.return;T!==null;)T.childLanes|=f,p=T.alternate,p!==null&&(p.childLanes|=f),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(_=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,_&&c!==null&&(_=31-dt(f),o=T.hiddenUpdates,p=o[_],p===null?o[_]=[c]:p.push(c),c.lane=f|536870912),T):null}function Ah(o){if(50<Uu)throw Uu=0,vy=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var ml={};function QO(o,c,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(o,c,f,p){return new QO(o,c,f,p)}function mm(o){return o=o.prototype,!(!o||!o.isReactComponent)}function wi(o,c){var f=o.alternate;return f===null?(f=Qr(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function gw(o,c){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Rh(o,c,f,p,_,T){var O=0;if(p=o,typeof o=="function")mm(o)&&(O=1);else if(typeof o=="string")O=JP(o,f,we.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case G:return o=Qr(31,f,c,_),o.elementType=G,o.lanes=T,o;case R:return la(f.children,_,T,c);case A:O=8,_|=24;break;case C:return o=Qr(12,f,c,_|2),o.elementType=C,o.lanes=T,o;case B:return o=Qr(13,f,c,_),o.elementType=B,o.lanes=T,o;case P:return o=Qr(19,f,c,_),o.elementType=P,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:case k:O=10;break e;case N:O=9;break e;case F:O=11;break e;case X:O=14;break e;case Y:O=16,p=null;break e}O=29,f=Error(r(130,o===null?"null":typeof o,"")),p=null}return c=Qr(O,f,c,_),c.elementType=o,c.type=p,c.lanes=T,c}function la(o,c,f,p){return o=Qr(7,o,p,c),o.lanes=f,o}function ym(o,c,f){return o=Qr(6,o,null,c),o.lanes=f,o}function bm(o,c,f){return c=Qr(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var yl=[],bl=0,Ch=null,kh=0,ps=[],gs=0,ca=null,Si=1,Ti="";function ua(o,c){yl[bl++]=kh,yl[bl++]=Ch,Ch=o,kh=c}function mw(o,c,f){ps[gs++]=Si,ps[gs++]=Ti,ps[gs++]=ca,ca=o;var p=Si;o=Ti;var _=32-dt(p)-1;p&=~(1<<_),f+=1;var T=32-dt(c)+_;if(30<T){var O=_-_%5;T=(p&(1<<O)-1).toString(32),p>>=O,_-=O,Si=1<<32-dt(c)+_|f<<_|p,Ti=T+o}else Si=1<<T|f<<_|p,Ti=o}function _m(o){o.return!==null&&(ua(o,1),mw(o,1,0))}function xm(o){for(;o===Ch;)Ch=yl[--bl],yl[bl]=null,kh=yl[--bl],yl[bl]=null;for(;o===ca;)ca=ps[--gs],ps[gs]=null,Ti=ps[--gs],ps[gs]=null,Si=ps[--gs],ps[gs]=null}var Nr=null,An=null,Ht=!1,fa=null,Qs=!1,vm=Error(r(519));function ha(o){var c=Error(r(418,""));throw yu(hs(c,o)),vm}function yw(o){var c=o.stateNode,f=o.type,p=o.memoizedProps;switch(c[v]=o,c[E]=p,f){case"dialog":Mt("cancel",c),Mt("close",c);break;case"iframe":case"object":case"embed":Mt("load",c);break;case"video":case"audio":for(f=0;f<zu.length;f++)Mt(zu[f],c);break;case"source":Mt("error",c);break;case"img":case"image":case"link":Mt("error",c),Mt("load",c);break;case"details":Mt("toggle",c);break;case"input":Mt("invalid",c),dh(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),vt(c);break;case"select":Mt("invalid",c);break;case"textarea":Mt("invalid",c),gh(c,p.value,p.defaultValue,p.children),vt(c)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||p.suppressHydrationWarning===!0||PS(c.textContent,f)?(p.popover!=null&&(Mt("beforetoggle",c),Mt("toggle",c)),p.onScroll!=null&&Mt("scroll",c),p.onScrollEnd!=null&&Mt("scrollend",c),p.onClick!=null&&(c.onclick=cd),c=!0):c=!1,c||ha(o)}function bw(o){for(Nr=o.return;Nr;)switch(Nr.tag){case 5:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Nr=Nr.return}}function gu(o){if(o!==Nr)return!1;if(!Ht)return bw(o),Ht=!0,!1;var c=o.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||jy(o.type,o.memoizedProps)),f=!f),f&&An&&ha(o),bw(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){An=Ps(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}An=null}}else c===27?(c=An,po(o.type)?(o=zy,zy=null,An=o):An=c):An=Nr?Ps(o.stateNode.nextSibling):null;return!0}function mu(){An=Nr=null,Ht=!1}function _w(){var o=fa;return o!==null&&(Vr===null?Vr=o:Vr.push.apply(Vr,o),fa=null),o}function yu(o){fa===null?fa=[o]:fa.push(o)}var wm=ne(null),da=null,Ei=null;function Gi(o,c,f){U(wm,c._currentValue),c._currentValue=f}function Ai(o){o._currentValue=wm.current,ye(wm)}function Sm(o,c,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===f)break;o=o.return}}function Tm(o,c,f,p){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var T=_.dependencies;if(T!==null){var O=_.child;T=T.firstContext;e:for(;T!==null;){var V=T;T=_;for(var J=0;J<c.length;J++)if(V.context===c[J]){T.lanes|=f,V=T.alternate,V!==null&&(V.lanes|=f),Sm(T.return,f,o),p||(O=null);break e}T=V.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(r(341));O.lanes|=f,T=O.alternate,T!==null&&(T.lanes|=f),Sm(O,f,o),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===o){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function bu(o,c,f,p){o=null;for(var _=c,T=!1;_!==null;){if(!T){if((_.flags&524288)!==0)T=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var V=_.type;Zr(_.pendingProps.value,O.value)||(o!==null?o.push(V):o=[V])}}else if(_===Ce.current){if(O=_.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(Xu):o=[Xu])}_=_.return}o!==null&&Tm(c,o,f,p),c.flags|=262144}function Nh(o){for(o=o.firstContext;o!==null;){if(!Zr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function pa(o){da=o,Ei=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function br(o){return xw(da,o)}function Mh(o,c){return da===null&&pa(o),xw(o,c)}function xw(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ei===null){if(o===null)throw Error(r(308));Ei=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Ei=Ei.next=c;return f}var GO=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},JO=t.unstable_scheduleCallback,eP=t.unstable_NormalPriority,Zn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Em(){return{controller:new GO,data:new Map,refCount:0}}function _u(o){o.refCount--,o.refCount===0&&JO(eP,function(){o.controller.abort()})}var xu=null,Am=0,_l=0,xl=null;function tP(o,c){if(xu===null){var f=xu=[];Am=0,_l=Cy(),xl={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Am++,c.then(vw,vw),c}function vw(){if(--Am===0&&xu!==null){xl!==null&&(xl.status="fulfilled");var o=xu;xu=null,_l=0,xl=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function nP(o,c){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var _=0;_<f.length;_++)(0,f[_])(c)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var ww=re.S;re.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&tP(o,c),ww!==null&&ww(o,c)};var ga=ne(null);function Rm(){var o=ga.current;return o!==null?o:yn.pooledCache}function Ih(o,c){c===null?U(ga,ga.current):U(ga,c.pool)}function Sw(){var o=Rm();return o===null?null:{parent:Zn._currentValue,pool:o}}var vu=Error(r(460)),Tw=Error(r(474)),Oh=Error(r(542)),Cm={then:function(){}};function Ew(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ph(){}function Aw(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(Ph,Ph),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Cw(o),o;default:if(typeof c.status=="string")c.then(Ph,Ph);else{if(o=yn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var _=c;_.status="fulfilled",_.value=p}},function(p){if(c.status==="pending"){var _=c;_.status="rejected",_.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Cw(o),o}throw wu=c,vu}}var wu=null;function Rw(){if(wu===null)throw Error(r(459));var o=wu;return wu=null,o}function Cw(o){if(o===vu||o===Oh)throw Error(r(483))}var Ji=!1;function km(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function eo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function to(o,c,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(en&2)!==0){var _=p.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),p.pending=c,c=Ah(o),pw(o,null,f),c}return Eh(o,p,c,f),Ah(o)}function Su(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,Yn(o,f)}}function Mm(o,c){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?_=T=O:T=T.next=O,f=f.next}while(f!==null);T===null?_=T=c:T=T.next=c}else _=T=c;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:p.shared,callbacks:p.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var Im=!1;function Tu(){if(Im){var o=xl;if(o!==null)throw o}}function Eu(o,c,f,p){Im=!1;var _=o.updateQueue;Ji=!1;var T=_.firstBaseUpdate,O=_.lastBaseUpdate,V=_.shared.pending;if(V!==null){_.shared.pending=null;var J=V,ve=J.next;J.next=null,O===null?T=ve:O.next=ve,O=J;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,V=Oe.lastBaseUpdate,V!==O&&(V===null?Oe.firstBaseUpdate=ve:V.next=ve,Oe.lastBaseUpdate=J))}if(T!==null){var Fe=_.baseState;O=0,Oe=ve=J=null,V=T;do{var Se=V.lane&-536870913,Ae=Se!==V.lane;if(Ae?(Ft&Se)===Se:(p&Se)===Se){Se!==0&&Se===_l&&(Im=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var bt=o,pt=V;Se=c;var ln=f;switch(pt.tag){case 1:if(bt=pt.payload,typeof bt=="function"){Fe=bt.call(ln,Fe,Se);break e}Fe=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=pt.payload,Se=typeof bt=="function"?bt.call(ln,Fe,Se):bt,Se==null)break e;Fe=d({},Fe,Se);break e;case 2:Ji=!0}}Se=V.callback,Se!==null&&(o.flags|=64,Ae&&(o.flags|=8192),Ae=_.callbacks,Ae===null?_.callbacks=[Se]:Ae.push(Se))}else Ae={lane:Se,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Oe===null?(ve=Oe=Ae,J=Fe):Oe=Oe.next=Ae,O|=Se;if(V=V.next,V===null){if(V=_.shared.pending,V===null)break;Ae=V,V=Ae.next,Ae.next=null,_.lastBaseUpdate=Ae,_.shared.pending=null}}while(!0);Oe===null&&(J=Fe),_.baseState=J,_.firstBaseUpdate=ve,_.lastBaseUpdate=Oe,T===null&&(_.shared.lanes=0),co|=O,o.lanes=O,o.memoizedState=Fe}}function kw(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function Nw(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)kw(f[o],c)}var vl=ne(null),Dh=ne(0);function Mw(o,c){o=Oi,U(Dh,o),U(vl,c),Oi=o|c.baseLanes}function Om(){U(Dh,Oi),U(vl,vl.current)}function Pm(){Oi=Dh.current,ye(vl),ye(Dh)}var no=0,Et=null,on=null,Ln=null,Fh=!1,wl=!1,ma=!1,jh=0,Au=0,Sl=null,rP=0;function On(){throw Error(r(321))}function Dm(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Zr(o[f],c[f]))return!1;return!0}function Fm(o,c,f,p,_,T){return no=T,Et=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,re.H=o===null||o.memoizedState===null?p1:g1,ma=!1,T=f(p,_),ma=!1,wl&&(T=Ow(c,f,p,_)),Iw(o),T}function Iw(o){re.H=$h;var c=on!==null&&on.next!==null;if(no=0,Ln=on=Et=null,Fh=!1,Au=0,Sl=null,c)throw Error(r(300));o===null||rr||(o=o.dependencies,o!==null&&Nh(o)&&(rr=!0))}function Ow(o,c,f,p){Et=o;var _=0;do{if(wl&&(Sl=null),Au=0,wl=!1,25<=_)throw Error(r(301));if(_+=1,Ln=on=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}re.H=uP,T=c(f,p)}while(wl);return T}function sP(){var o=re.H,c=o.useState()[0];return c=typeof c.then=="function"?Ru(c):c,o=o.useState()[0],(on!==null?on.memoizedState:null)!==o&&(Et.flags|=1024),c}function jm(){var o=jh!==0;return jh=0,o}function Bm(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function Um(o){if(Fh){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Fh=!1}no=0,Ln=on=Et=null,wl=!1,Au=jh=0,Sl=null}function Lr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Et.memoizedState=Ln=o:Ln=Ln.next=o,Ln}function zn(){if(on===null){var o=Et.alternate;o=o!==null?o.memoizedState:null}else o=on.next;var c=Ln===null?Et.memoizedState:Ln.next;if(c!==null)Ln=c,on=o;else{if(o===null)throw Et.alternate===null?Error(r(467)):Error(r(310));on=o,o={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},Ln===null?Et.memoizedState=Ln=o:Ln=Ln.next=o}return Ln}function Lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(o){var c=Au;return Au+=1,Sl===null&&(Sl=[]),o=Aw(Sl,o,c),c=Et,(Ln===null?c.memoizedState:Ln.next)===null&&(c=c.alternate,re.H=c===null||c.memoizedState===null?p1:g1),o}function Bh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ru(o);if(o.$$typeof===k)return br(o)}throw Error(r(438,String(o)))}function zm(o){var c=null,f=Et.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var p=Et.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(_){return _.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Lm(),Et.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),p=0;p<o;p++)f[p]=K;return c.index++,f}function Ri(o,c){return typeof c=="function"?c(o):c}function Uh(o){var c=zn();return Vm(c,on,o)}function Vm(o,c,f){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var _=o.baseQueue,T=p.pending;if(T!==null){if(_!==null){var O=_.next;_.next=T.next,T.next=O}c.baseQueue=_=T,p.pending=null}if(T=o.baseState,_===null)o.memoizedState=T;else{c=_.next;var V=O=null,J=null,ve=c,Oe=!1;do{var Fe=ve.lane&-536870913;if(Fe!==ve.lane?(Ft&Fe)===Fe:(no&Fe)===Fe){var Se=ve.revertLane;if(Se===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Fe===_l&&(Oe=!0);else if((no&Se)===Se){ve=ve.next,Se===_l&&(Oe=!0);continue}else Fe={lane:0,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},J===null?(V=J=Fe,O=T):J=J.next=Fe,Et.lanes|=Se,co|=Se;Fe=ve.action,ma&&f(T,Fe),T=ve.hasEagerState?ve.eagerState:f(T,Fe)}else Se={lane:Fe,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},J===null?(V=J=Se,O=T):J=J.next=Se,Et.lanes|=Fe,co|=Fe;ve=ve.next}while(ve!==null&&ve!==c);if(J===null?O=T:J.next=V,!Zr(T,o.memoizedState)&&(rr=!0,Oe&&(f=xl,f!==null)))throw f;o.memoizedState=T,o.baseState=O,o.baseQueue=J,p.lastRenderedState=T}return _===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function $m(o){var c=zn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var p=f.dispatch,_=f.pending,T=c.memoizedState;if(_!==null){f.pending=null;var O=_=_.next;do T=o(T,O.action),O=O.next;while(O!==_);Zr(T,c.memoizedState)||(rr=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),f.lastRenderedState=T}return[T,p]}function Pw(o,c,f){var p=Et,_=zn(),T=Ht;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=c();var O=!Zr((on||_).memoizedState,f);O&&(_.memoizedState=f,rr=!0),_=_.queue;var V=jw.bind(null,p,_,o);if(Cu(2048,8,V,[o]),_.getSnapshot!==c||O||Ln!==null&&Ln.memoizedState.tag&1){if(p.flags|=2048,Tl(9,Lh(),Fw.bind(null,p,_,f,c),null),yn===null)throw Error(r(349));T||(no&124)!==0||Dw(p,c,f)}return f}function Dw(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=Et.updateQueue,c===null?(c=Lm(),Et.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function Fw(o,c,f,p){c.value=f,c.getSnapshot=p,Bw(c)&&Uw(o)}function jw(o,c,f){return f(function(){Bw(c)&&Uw(o)})}function Bw(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Zr(o,f)}catch{return!0}}function Uw(o){var c=gl(o,2);c!==null&&ns(c,o,2)}function Hm(o){var c=Lr();if(typeof o=="function"){var f=o;if(o=f(),ma){ut(!0);try{f()}finally{ut(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:o},c}function Lw(o,c,f,p){return o.baseState=f,Vm(o,on,typeof p=="function"?p:Ri)}function iP(o,c,f,p,_){if(Vh(o))throw Error(r(485));if(o=c.action,o!==null){var T={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){T.listeners.push(O)}};re.T!==null?f(!0):T.isTransition=!1,p(T),f=c.pending,f===null?(T.next=c.pending=T,zw(c,T)):(T.next=f.next,c.pending=f.next=T)}}function zw(o,c){var f=c.action,p=c.payload,_=o.state;if(c.isTransition){var T=re.T,O={};re.T=O;try{var V=f(_,p),J=re.S;J!==null&&J(O,V),Vw(o,c,V)}catch(ve){Wm(o,c,ve)}finally{re.T=T}}else try{T=f(_,p),Vw(o,c,T)}catch(ve){Wm(o,c,ve)}}function Vw(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){$w(o,c,p)},function(p){return Wm(o,c,p)}):$w(o,c,f)}function $w(o,c,f){c.status="fulfilled",c.value=f,Hw(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,zw(o,f)))}function Wm(o,c,f){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=f,Hw(c),c=c.next;while(c!==p)}o.action=null}function Hw(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function Ww(o,c){return c}function qw(o,c){if(Ht){var f=yn.formState;if(f!==null){e:{var p=Et;if(Ht){if(An){t:{for(var _=An,T=Qs;_.nodeType!==8;){if(!T){_=null;break t}if(_=Ps(_.nextSibling),_===null){_=null;break t}}T=_.data,_=T==="F!"||T==="F"?_:null}if(_){An=Ps(_.nextSibling),p=_.data==="F!";break e}}ha(p)}p=!1}p&&(c=f[0])}}return f=Lr(),f.memoizedState=f.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ww,lastRenderedState:c},f.queue=p,f=f1.bind(null,Et,p),p.dispatch=f,p=Hm(!1),T=Zm.bind(null,Et,!1,p.queue),p=Lr(),_={state:c,dispatch:null,action:o,pending:null},p.queue=_,f=iP.bind(null,Et,_,T,f),_.dispatch=f,p.memoizedState=o,[c,f,!1]}function Xw(o){var c=zn();return Yw(c,on,o)}function Yw(o,c,f){if(c=Vm(o,c,Ww)[0],o=Uh(Ri)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Ru(c)}catch(O){throw O===vu?Oh:O}else p=c;c=zn();var _=c.queue,T=_.dispatch;return f!==c.memoizedState&&(Et.flags|=2048,Tl(9,Lh(),oP.bind(null,_,f),null)),[p,T,o]}function oP(o,c){o.action=c}function Kw(o){var c=zn(),f=on;if(f!==null)return Yw(c,f,o);zn(),c=c.memoizedState,f=zn();var p=f.queue.dispatch;return f.memoizedState=o,[c,p,!1]}function Tl(o,c,f,p){return o={tag:o,create:f,deps:p,inst:c,next:null},c=Et.updateQueue,c===null&&(c=Lm(),Et.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,c.lastEffect=o),o}function Lh(){return{destroy:void 0,resource:void 0}}function Zw(){return zn().memoizedState}function zh(o,c,f,p){var _=Lr();p=p===void 0?null:p,Et.flags|=o,_.memoizedState=Tl(1|c,Lh(),f,p)}function Cu(o,c,f,p){var _=zn();p=p===void 0?null:p;var T=_.memoizedState.inst;on!==null&&p!==null&&Dm(p,on.memoizedState.deps)?_.memoizedState=Tl(c,T,f,p):(Et.flags|=o,_.memoizedState=Tl(1|c,T,f,p))}function Qw(o,c){zh(8390656,8,o,c)}function Gw(o,c){Cu(2048,8,o,c)}function Jw(o,c){return Cu(4,2,o,c)}function e1(o,c){return Cu(4,4,o,c)}function t1(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function n1(o,c,f){f=f!=null?f.concat([o]):null,Cu(4,4,t1.bind(null,c,o),f)}function qm(){}function r1(o,c){var f=zn();c=c===void 0?null:c;var p=f.memoizedState;return c!==null&&Dm(c,p[1])?p[0]:(f.memoizedState=[o,c],o)}function s1(o,c){var f=zn();c=c===void 0?null:c;var p=f.memoizedState;if(c!==null&&Dm(c,p[1]))return p[0];if(p=o(),ma){ut(!0);try{o()}finally{ut(!1)}}return f.memoizedState=[p,c],p}function Xm(o,c,f){return f===void 0||(no&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=aS(),Et.lanes|=o,co|=o,f)}function i1(o,c,f,p){return Zr(f,c)?f:vl.current!==null?(o=Xm(o,f,p),Zr(o,c)||(rr=!0),o):(no&42)===0?(rr=!0,o.memoizedState=f):(o=aS(),Et.lanes|=o,co|=o,c)}function o1(o,c,f,p,_){var T=Ee.p;Ee.p=T!==0&&8>T?T:8;var O=re.T,V={};re.T=V,Zm(o,!1,c,f);try{var J=_(),ve=re.S;if(ve!==null&&ve(V,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Oe=nP(J,p);ku(o,c,Oe,ts(o))}else ku(o,c,p,ts(o))}catch(Fe){ku(o,c,{then:function(){},status:"rejected",reason:Fe},ts())}finally{Ee.p=T,re.T=O}}function aP(){}function Ym(o,c,f,p){if(o.tag!==5)throw Error(r(476));var _=a1(o).queue;o1(o,_,c,ue,f===null?aP:function(){return l1(o),f(p)})}function a1(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:ue},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function l1(o){var c=a1(o).next.queue;ku(o,c,{},ts())}function Km(){return br(Xu)}function c1(){return zn().memoizedState}function u1(){return zn().memoizedState}function lP(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=ts();o=eo(f);var p=to(c,o,f);p!==null&&(ns(p,c,f),Su(p,c,f)),c={cache:Em()},o.payload=c;return}c=c.return}}function cP(o,c,f){var p=ts();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Vh(o)?h1(c,f):(f=gm(o,c,f,p),f!==null&&(ns(f,o,p),d1(f,c,p)))}function f1(o,c,f){var p=ts();ku(o,c,f,p)}function ku(o,c,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Vh(o))h1(c,_);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var O=c.lastRenderedState,V=T(O,f);if(_.hasEagerState=!0,_.eagerState=V,Zr(V,O))return Eh(o,c,_,0),yn===null&&Th(),!1}catch{}finally{}if(f=gm(o,c,_,p),f!==null)return ns(f,o,p),d1(f,c,p),!0}return!1}function Zm(o,c,f,p){if(p={lane:2,revertLane:Cy(),action:p,hasEagerState:!1,eagerState:null,next:null},Vh(o)){if(c)throw Error(r(479))}else c=gm(o,f,p,2),c!==null&&ns(c,o,2)}function Vh(o){var c=o.alternate;return o===Et||c!==null&&c===Et}function h1(o,c){wl=Fh=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function d1(o,c,f){if((f&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,Yn(o,f)}}var $h={readContext:br,use:Bh,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On},p1={readContext:br,use:Bh,useCallback:function(o,c){return Lr().memoizedState=[o,c===void 0?null:c],o},useContext:br,useEffect:Qw,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,zh(4194308,4,t1.bind(null,c,o),f)},useLayoutEffect:function(o,c){return zh(4194308,4,o,c)},useInsertionEffect:function(o,c){zh(4,2,o,c)},useMemo:function(o,c){var f=Lr();c=c===void 0?null:c;var p=o();if(ma){ut(!0);try{o()}finally{ut(!1)}}return f.memoizedState=[p,c],p},useReducer:function(o,c,f){var p=Lr();if(f!==void 0){var _=f(c);if(ma){ut(!0);try{f(c)}finally{ut(!1)}}}else _=c;return p.memoizedState=p.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},p.queue=o,o=o.dispatch=cP.bind(null,Et,o),[p.memoizedState,o]},useRef:function(o){var c=Lr();return o={current:o},c.memoizedState=o},useState:function(o){o=Hm(o);var c=o.queue,f=f1.bind(null,Et,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:qm,useDeferredValue:function(o,c){var f=Lr();return Xm(f,o,c)},useTransition:function(){var o=Hm(!1);return o=o1.bind(null,Et,o.queue,!0,!1),Lr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var p=Et,_=Lr();if(Ht){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),yn===null)throw Error(r(349));(Ft&124)!==0||Dw(p,c,f)}_.memoizedState=f;var T={value:f,getSnapshot:c};return _.queue=T,Qw(jw.bind(null,p,T,o),[o]),p.flags|=2048,Tl(9,Lh(),Fw.bind(null,p,T,f,c),null),f},useId:function(){var o=Lr(),c=yn.identifierPrefix;if(Ht){var f=Ti,p=Si;f=(p&~(1<<32-dt(p)-1)).toString(32)+f,c=""+c+"R"+f,f=jh++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=rP++,c=""+c+"r"+f.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:Km,useFormState:qw,useActionState:qw,useOptimistic:function(o){var c=Lr();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Zm.bind(null,Et,!0,f),f.dispatch=c,[o,c]},useMemoCache:zm,useCacheRefresh:function(){return Lr().memoizedState=lP.bind(null,Et)}},g1={readContext:br,use:Bh,useCallback:r1,useContext:br,useEffect:Gw,useImperativeHandle:n1,useInsertionEffect:Jw,useLayoutEffect:e1,useMemo:s1,useReducer:Uh,useRef:Zw,useState:function(){return Uh(Ri)},useDebugValue:qm,useDeferredValue:function(o,c){var f=zn();return i1(f,on.memoizedState,o,c)},useTransition:function(){var o=Uh(Ri)[0],c=zn().memoizedState;return[typeof o=="boolean"?o:Ru(o),c]},useSyncExternalStore:Pw,useId:c1,useHostTransitionStatus:Km,useFormState:Xw,useActionState:Xw,useOptimistic:function(o,c){var f=zn();return Lw(f,on,o,c)},useMemoCache:zm,useCacheRefresh:u1},uP={readContext:br,use:Bh,useCallback:r1,useContext:br,useEffect:Gw,useImperativeHandle:n1,useInsertionEffect:Jw,useLayoutEffect:e1,useMemo:s1,useReducer:$m,useRef:Zw,useState:function(){return $m(Ri)},useDebugValue:qm,useDeferredValue:function(o,c){var f=zn();return on===null?Xm(f,o,c):i1(f,on.memoizedState,o,c)},useTransition:function(){var o=$m(Ri)[0],c=zn().memoizedState;return[typeof o=="boolean"?o:Ru(o),c]},useSyncExternalStore:Pw,useId:c1,useHostTransitionStatus:Km,useFormState:Kw,useActionState:Kw,useOptimistic:function(o,c){var f=zn();return on!==null?Lw(f,on,o,c):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:zm,useCacheRefresh:u1},El=null,Nu=0;function Hh(o){var c=Nu;return Nu+=1,El===null&&(El=[]),Aw(El,o,c)}function Mu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Wh(o,c){throw c.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function m1(o){var c=o._init;return c(o._payload)}function y1(o){function c(ge,ae){if(o){var _e=ge.deletions;_e===null?(ge.deletions=[ae],ge.flags|=16):_e.push(ae)}}function f(ge,ae){if(!o)return null;for(;ae!==null;)c(ge,ae),ae=ae.sibling;return null}function p(ge){for(var ae=new Map;ge!==null;)ge.key!==null?ae.set(ge.key,ge):ae.set(ge.index,ge),ge=ge.sibling;return ae}function _(ge,ae){return ge=wi(ge,ae),ge.index=0,ge.sibling=null,ge}function T(ge,ae,_e){return ge.index=_e,o?(_e=ge.alternate,_e!==null?(_e=_e.index,_e<ae?(ge.flags|=67108866,ae):_e):(ge.flags|=67108866,ae)):(ge.flags|=1048576,ae)}function O(ge){return o&&ge.alternate===null&&(ge.flags|=67108866),ge}function V(ge,ae,_e,Pe){return ae===null||ae.tag!==6?(ae=ym(_e,ge.mode,Pe),ae.return=ge,ae):(ae=_(ae,_e),ae.return=ge,ae)}function J(ge,ae,_e,Pe){var Je=_e.type;return Je===R?Oe(ge,ae,_e.props.children,Pe,_e.key):ae!==null&&(ae.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Y&&m1(Je)===ae.type)?(ae=_(ae,_e.props),Mu(ae,_e),ae.return=ge,ae):(ae=Rh(_e.type,_e.key,_e.props,null,ge.mode,Pe),Mu(ae,_e),ae.return=ge,ae)}function ve(ge,ae,_e,Pe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==_e.containerInfo||ae.stateNode.implementation!==_e.implementation?(ae=bm(_e,ge.mode,Pe),ae.return=ge,ae):(ae=_(ae,_e.children||[]),ae.return=ge,ae)}function Oe(ge,ae,_e,Pe,Je){return ae===null||ae.tag!==7?(ae=la(_e,ge.mode,Pe,Je),ae.return=ge,ae):(ae=_(ae,_e),ae.return=ge,ae)}function Fe(ge,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=ym(""+ae,ge.mode,_e),ae.return=ge,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return _e=Rh(ae.type,ae.key,ae.props,null,ge.mode,_e),Mu(_e,ae),_e.return=ge,_e;case w:return ae=bm(ae,ge.mode,_e),ae.return=ge,ae;case Y:var Pe=ae._init;return ae=Pe(ae._payload),Fe(ge,ae,_e)}if(Re(ae)||ie(ae))return ae=la(ae,ge.mode,_e,null),ae.return=ge,ae;if(typeof ae.then=="function")return Fe(ge,Hh(ae),_e);if(ae.$$typeof===k)return Fe(ge,Mh(ge,ae),_e);Wh(ge,ae)}return null}function Se(ge,ae,_e,Pe){var Je=ae!==null?ae.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Je!==null?null:V(ge,ae,""+_e,Pe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:return _e.key===Je?J(ge,ae,_e,Pe):null;case w:return _e.key===Je?ve(ge,ae,_e,Pe):null;case Y:return Je=_e._init,_e=Je(_e._payload),Se(ge,ae,_e,Pe)}if(Re(_e)||ie(_e))return Je!==null?null:Oe(ge,ae,_e,Pe,null);if(typeof _e.then=="function")return Se(ge,ae,Hh(_e),Pe);if(_e.$$typeof===k)return Se(ge,ae,Mh(ge,_e),Pe);Wh(ge,_e)}return null}function Ae(ge,ae,_e,Pe,Je){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return ge=ge.get(_e)||null,V(ae,ge,""+Pe,Je);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case b:return ge=ge.get(Pe.key===null?_e:Pe.key)||null,J(ae,ge,Pe,Je);case w:return ge=ge.get(Pe.key===null?_e:Pe.key)||null,ve(ae,ge,Pe,Je);case Y:var kt=Pe._init;return Pe=kt(Pe._payload),Ae(ge,ae,_e,Pe,Je)}if(Re(Pe)||ie(Pe))return ge=ge.get(_e)||null,Oe(ae,ge,Pe,Je,null);if(typeof Pe.then=="function")return Ae(ge,ae,_e,Hh(Pe),Je);if(Pe.$$typeof===k)return Ae(ge,ae,_e,Mh(ae,Pe),Je);Wh(ae,Pe)}return null}function bt(ge,ae,_e,Pe){for(var Je=null,kt=null,it=ae,gt=ae=0,ir=null;it!==null&&gt<_e.length;gt++){it.index>gt?(ir=it,it=null):ir=it.sibling;var Vt=Se(ge,it,_e[gt],Pe);if(Vt===null){it===null&&(it=ir);break}o&&it&&Vt.alternate===null&&c(ge,it),ae=T(Vt,ae,gt),kt===null?Je=Vt:kt.sibling=Vt,kt=Vt,it=ir}if(gt===_e.length)return f(ge,it),Ht&&ua(ge,gt),Je;if(it===null){for(;gt<_e.length;gt++)it=Fe(ge,_e[gt],Pe),it!==null&&(ae=T(it,ae,gt),kt===null?Je=it:kt.sibling=it,kt=it);return Ht&&ua(ge,gt),Je}for(it=p(it);gt<_e.length;gt++)ir=Ae(it,ge,gt,_e[gt],Pe),ir!==null&&(o&&ir.alternate!==null&&it.delete(ir.key===null?gt:ir.key),ae=T(ir,ae,gt),kt===null?Je=ir:kt.sibling=ir,kt=ir);return o&&it.forEach(function(_o){return c(ge,_o)}),Ht&&ua(ge,gt),Je}function pt(ge,ae,_e,Pe){if(_e==null)throw Error(r(151));for(var Je=null,kt=null,it=ae,gt=ae=0,ir=null,Vt=_e.next();it!==null&&!Vt.done;gt++,Vt=_e.next()){it.index>gt?(ir=it,it=null):ir=it.sibling;var _o=Se(ge,it,Vt.value,Pe);if(_o===null){it===null&&(it=ir);break}o&&it&&_o.alternate===null&&c(ge,it),ae=T(_o,ae,gt),kt===null?Je=_o:kt.sibling=_o,kt=_o,it=ir}if(Vt.done)return f(ge,it),Ht&&ua(ge,gt),Je;if(it===null){for(;!Vt.done;gt++,Vt=_e.next())Vt=Fe(ge,Vt.value,Pe),Vt!==null&&(ae=T(Vt,ae,gt),kt===null?Je=Vt:kt.sibling=Vt,kt=Vt);return Ht&&ua(ge,gt),Je}for(it=p(it);!Vt.done;gt++,Vt=_e.next())Vt=Ae(it,ge,gt,Vt.value,Pe),Vt!==null&&(o&&Vt.alternate!==null&&it.delete(Vt.key===null?gt:Vt.key),ae=T(Vt,ae,gt),kt===null?Je=Vt:kt.sibling=Vt,kt=Vt);return o&&it.forEach(function(f4){return c(ge,f4)}),Ht&&ua(ge,gt),Je}function ln(ge,ae,_e,Pe){if(typeof _e=="object"&&_e!==null&&_e.type===R&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:e:{for(var Je=_e.key;ae!==null;){if(ae.key===Je){if(Je=_e.type,Je===R){if(ae.tag===7){f(ge,ae.sibling),Pe=_(ae,_e.props.children),Pe.return=ge,ge=Pe;break e}}else if(ae.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Y&&m1(Je)===ae.type){f(ge,ae.sibling),Pe=_(ae,_e.props),Mu(Pe,_e),Pe.return=ge,ge=Pe;break e}f(ge,ae);break}else c(ge,ae);ae=ae.sibling}_e.type===R?(Pe=la(_e.props.children,ge.mode,Pe,_e.key),Pe.return=ge,ge=Pe):(Pe=Rh(_e.type,_e.key,_e.props,null,ge.mode,Pe),Mu(Pe,_e),Pe.return=ge,ge=Pe)}return O(ge);case w:e:{for(Je=_e.key;ae!==null;){if(ae.key===Je)if(ae.tag===4&&ae.stateNode.containerInfo===_e.containerInfo&&ae.stateNode.implementation===_e.implementation){f(ge,ae.sibling),Pe=_(ae,_e.children||[]),Pe.return=ge,ge=Pe;break e}else{f(ge,ae);break}else c(ge,ae);ae=ae.sibling}Pe=bm(_e,ge.mode,Pe),Pe.return=ge,ge=Pe}return O(ge);case Y:return Je=_e._init,_e=Je(_e._payload),ln(ge,ae,_e,Pe)}if(Re(_e))return bt(ge,ae,_e,Pe);if(ie(_e)){if(Je=ie(_e),typeof Je!="function")throw Error(r(150));return _e=Je.call(_e),pt(ge,ae,_e,Pe)}if(typeof _e.then=="function")return ln(ge,ae,Hh(_e),Pe);if(_e.$$typeof===k)return ln(ge,ae,Mh(ge,_e),Pe);Wh(ge,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,ae!==null&&ae.tag===6?(f(ge,ae.sibling),Pe=_(ae,_e),Pe.return=ge,ge=Pe):(f(ge,ae),Pe=ym(_e,ge.mode,Pe),Pe.return=ge,ge=Pe),O(ge)):f(ge,ae)}return function(ge,ae,_e,Pe){try{Nu=0;var Je=ln(ge,ae,_e,Pe);return El=null,Je}catch(it){if(it===vu||it===Oh)throw it;var kt=Qr(29,it,null,ge.mode);return kt.lanes=Pe,kt.return=ge,kt}finally{}}}var Al=y1(!0),b1=y1(!1),ms=ne(null),Gs=null;function ro(o){var c=o.alternate;U(Qn,Qn.current&1),U(ms,o),Gs===null&&(c===null||vl.current!==null||c.memoizedState!==null)&&(Gs=o)}function _1(o){if(o.tag===22){if(U(Qn,Qn.current),U(ms,o),Gs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Gs=o)}}else so()}function so(){U(Qn,Qn.current),U(ms,ms.current)}function Ci(o){ye(ms),Gs===o&&(Gs=null),ye(Qn)}var Qn=ne(0);function qh(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Ly(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Qm(o,c,f,p){c=o.memoizedState,f=f(p,c),f=f==null?c:d({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Gm={enqueueSetState:function(o,c,f){o=o._reactInternals;var p=ts(),_=eo(p);_.payload=c,f!=null&&(_.callback=f),c=to(o,_,p),c!==null&&(ns(c,o,p),Su(c,o,p))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var p=ts(),_=eo(p);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=to(o,_,p),c!==null&&(ns(c,o,p),Su(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=ts(),p=eo(f);p.tag=2,c!=null&&(p.callback=c),c=to(o,p,f),c!==null&&(ns(c,o,f),Su(c,o,f))}};function x1(o,c,f,p,_,T,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,T,O):c.prototype&&c.prototype.isPureReactComponent?!du(f,p)||!du(_,T):!0}function v1(o,c,f,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,p),c.state!==o&&Gm.enqueueReplaceState(c,c.state,null)}function ya(o,c){var f=c;if("ref"in c){f={};for(var p in c)p!=="ref"&&(f[p]=c[p])}if(o=o.defaultProps){f===c&&(f=d({},f));for(var _ in o)f[_]===void 0&&(f[_]=o[_])}return f}var Xh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function w1(o){Xh(o)}function S1(o){console.error(o)}function T1(o){Xh(o)}function Yh(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function E1(o,c,f){try{var p=o.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Jm(o,c,f){return f=eo(f),f.tag=3,f.payload={element:null},f.callback=function(){Yh(o,c)},f}function A1(o){return o=eo(o),o.tag=3,o}function R1(o,c,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var T=p.value;o.payload=function(){return _(T)},o.callback=function(){E1(c,f,p)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(o.callback=function(){E1(c,f,p),typeof _!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var V=p.stack;this.componentDidCatch(p.value,{componentStack:V!==null?V:""})})}function fP(o,c,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=f.alternate,c!==null&&bu(c,f,_,!0),f=ms.current,f!==null){switch(f.tag){case 13:return Gs===null?Sy():f.alternate===null&&Rn===0&&(Rn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===Cm?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([p]):c.add(p),Ey(o,p,_)),!1;case 22:return f.flags|=65536,p===Cm?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([p]):f.add(p)),Ey(o,p,_)),!1}throw Error(r(435,f.tag))}return Ey(o,p,_),Sy(),!1}if(Ht)return c=ms.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=_,p!==vm&&(o=Error(r(422),{cause:p}),yu(hs(o,f)))):(p!==vm&&(c=Error(r(423),{cause:p}),yu(hs(c,f))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,p=hs(p,f),_=Jm(o.stateNode,p,_),Mm(o,_),Rn!==4&&(Rn=2)),!1;var T=Error(r(520),{cause:p});if(T=hs(T,f),Bu===null?Bu=[T]:Bu.push(T),Rn!==4&&(Rn=2),c===null)return!0;p=hs(p,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=_&-_,f.lanes|=o,o=Jm(f.stateNode,p,o),Mm(f,o),!1;case 1:if(c=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(uo===null||!uo.has(T))))return f.flags|=65536,_&=-_,f.lanes|=_,_=A1(_),R1(_,o,f,p),Mm(f,_),!1}f=f.return}while(f!==null);return!1}var C1=Error(r(461)),rr=!1;function cr(o,c,f,p){c.child=o===null?b1(c,null,f,p):Al(c,o.child,f,p)}function k1(o,c,f,p,_){f=f.render;var T=c.ref;if("ref"in p){var O={};for(var V in p)V!=="ref"&&(O[V]=p[V])}else O=p;return pa(c),p=Fm(o,c,f,O,T,_),V=jm(),o!==null&&!rr?(Bm(o,c,_),ki(o,c,_)):(Ht&&V&&_m(c),c.flags|=1,cr(o,c,p,_),c.child)}function N1(o,c,f,p,_){if(o===null){var T=f.type;return typeof T=="function"&&!mm(T)&&T.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=T,M1(o,c,T,p,_)):(o=Rh(f.type,null,p,c,c.mode,_),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,!ay(o,_)){var O=T.memoizedProps;if(f=f.compare,f=f!==null?f:du,f(O,p)&&o.ref===c.ref)return ki(o,c,_)}return c.flags|=1,o=wi(T,p),o.ref=c.ref,o.return=c,c.child=o}function M1(o,c,f,p,_){if(o!==null){var T=o.memoizedProps;if(du(T,p)&&o.ref===c.ref)if(rr=!1,c.pendingProps=p=T,ay(o,_))(o.flags&131072)!==0&&(rr=!0);else return c.lanes=o.lanes,ki(o,c,_)}return ey(o,c,f,p,_)}function I1(o,c,f){var p=c.pendingProps,_=p.children,T=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=T!==null?T.baseLanes|f:f,o!==null){for(_=c.child=o.child,T=0;_!==null;)T=T|_.lanes|_.childLanes,_=_.sibling;c.childLanes=T&~p}else c.childLanes=0,c.child=null;return O1(o,c,p,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ih(c,T!==null?T.cachePool:null),T!==null?Mw(c,T):Om(),_1(c);else return c.lanes=c.childLanes=536870912,O1(o,c,T!==null?T.baseLanes|f:f,f)}else T!==null?(Ih(c,T.cachePool),Mw(c,T),so(),c.memoizedState=null):(o!==null&&Ih(c,null),Om(),so());return cr(o,c,_,f),c.child}function O1(o,c,f,p){var _=Rm();return _=_===null?null:{parent:Zn._currentValue,pool:_},c.memoizedState={baseLanes:f,cachePool:_},o!==null&&Ih(c,null),Om(),_1(c),o!==null&&bu(o,c,p,!0),null}function Kh(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(c.flags|=4194816)}}function ey(o,c,f,p,_){return pa(c),f=Fm(o,c,f,p,void 0,_),p=jm(),o!==null&&!rr?(Bm(o,c,_),ki(o,c,_)):(Ht&&p&&_m(c),c.flags|=1,cr(o,c,f,_),c.child)}function P1(o,c,f,p,_,T){return pa(c),c.updateQueue=null,f=Ow(c,p,f,_),Iw(o),p=jm(),o!==null&&!rr?(Bm(o,c,T),ki(o,c,T)):(Ht&&p&&_m(c),c.flags|=1,cr(o,c,f,T),c.child)}function D1(o,c,f,p,_){if(pa(c),c.stateNode===null){var T=ml,O=f.contextType;typeof O=="object"&&O!==null&&(T=br(O)),T=new f(p,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Gm,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=p,T.state=c.memoizedState,T.refs={},km(c),O=f.contextType,T.context=typeof O=="object"&&O!==null?br(O):ml,T.state=c.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(Qm(c,f,O,p),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(O=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),O!==T.state&&Gm.enqueueReplaceState(T,T.state,null),Eu(c,p,T,_),Tu(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){T=c.stateNode;var V=c.memoizedProps,J=ya(f,V);T.props=J;var ve=T.context,Oe=f.contextType;O=ml,typeof Oe=="object"&&Oe!==null&&(O=br(Oe));var Fe=f.getDerivedStateFromProps;Oe=typeof Fe=="function"||typeof T.getSnapshotBeforeUpdate=="function",V=c.pendingProps!==V,Oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(V||ve!==O)&&v1(c,T,p,O),Ji=!1;var Se=c.memoizedState;T.state=Se,Eu(c,p,T,_),Tu(),ve=c.memoizedState,V||Se!==ve||Ji?(typeof Fe=="function"&&(Qm(c,f,Fe,p),ve=c.memoizedState),(J=Ji||x1(c,f,J,p,Se,ve,O))?(Oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=ve),T.props=p,T.state=ve,T.context=O,p=J):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{T=c.stateNode,Nm(o,c),O=c.memoizedProps,Oe=ya(f,O),T.props=Oe,Fe=c.pendingProps,Se=T.context,ve=f.contextType,J=ml,typeof ve=="object"&&ve!==null&&(J=br(ve)),V=f.getDerivedStateFromProps,(ve=typeof V=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==Fe||Se!==J)&&v1(c,T,p,J),Ji=!1,Se=c.memoizedState,T.state=Se,Eu(c,p,T,_),Tu();var Ae=c.memoizedState;O!==Fe||Se!==Ae||Ji||o!==null&&o.dependencies!==null&&Nh(o.dependencies)?(typeof V=="function"&&(Qm(c,f,V,p),Ae=c.memoizedState),(Oe=Ji||x1(c,f,Oe,p,Se,Ae,J)||o!==null&&o.dependencies!==null&&Nh(o.dependencies))?(ve||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,Ae,J),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,Ae,J)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||O===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=Ae),T.props=p,T.state=Ae,T.context=J,p=Oe):(typeof T.componentDidUpdate!="function"||O===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),p=!1)}return T=p,Kh(o,c),p=(c.flags&128)!==0,T||p?(T=c.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,o!==null&&p?(c.child=Al(c,o.child,null,_),c.child=Al(c,null,f,_)):cr(o,c,f,_),c.memoizedState=T.state,o=c.child):o=ki(o,c,_),o}function F1(o,c,f,p){return mu(),c.flags|=256,cr(o,c,f,p),c.child}var ty={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ny(o){return{baseLanes:o,cachePool:Sw()}}function ry(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=ys),o}function j1(o,c,f){var p=c.pendingProps,_=!1,T=(c.flags&128)!==0,O;if((O=T)||(O=o!==null&&o.memoizedState===null?!1:(Qn.current&2)!==0),O&&(_=!0,c.flags&=-129),O=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ht){if(_?ro(c):so(),Ht){var V=An,J;if(J=V){e:{for(J=V,V=Qs;J.nodeType!==8;){if(!V){V=null;break e}if(J=Ps(J.nextSibling),J===null){V=null;break e}}V=J}V!==null?(c.memoizedState={dehydrated:V,treeContext:ca!==null?{id:Si,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},J=Qr(18,null,null,0),J.stateNode=V,J.return=c,c.child=J,Nr=c,An=null,J=!0):J=!1}J||ha(c)}if(V=c.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Ly(V)?c.lanes=32:c.lanes=536870912,null;Ci(c)}return V=p.children,p=p.fallback,_?(so(),_=c.mode,V=Zh({mode:"hidden",children:V},_),p=la(p,_,f,null),V.return=c,p.return=c,V.sibling=p,c.child=V,_=c.child,_.memoizedState=ny(f),_.childLanes=ry(o,O,f),c.memoizedState=ty,p):(ro(c),sy(c,V))}if(J=o.memoizedState,J!==null&&(V=J.dehydrated,V!==null)){if(T)c.flags&256?(ro(c),c.flags&=-257,c=iy(o,c,f)):c.memoizedState!==null?(so(),c.child=o.child,c.flags|=128,c=null):(so(),_=p.fallback,V=c.mode,p=Zh({mode:"visible",children:p.children},V),_=la(_,V,f,null),_.flags|=2,p.return=c,_.return=c,p.sibling=_,c.child=p,Al(c,o.child,null,f),p=c.child,p.memoizedState=ny(f),p.childLanes=ry(o,O,f),c.memoizedState=ty,c=_);else if(ro(c),Ly(V)){if(O=V.nextSibling&&V.nextSibling.dataset,O)var ve=O.dgst;O=ve,p=Error(r(419)),p.stack="",p.digest=O,yu({value:p,source:null,stack:null}),c=iy(o,c,f)}else if(rr||bu(o,c,f,!1),O=(f&o.childLanes)!==0,rr||O){if(O=yn,O!==null&&(p=f&-f,p=(p&42)!==0?1:Yi(p),p=(p&(O.suspendedLanes|f))!==0?0:p,p!==0&&p!==J.retryLane))throw J.retryLane=p,gl(o,p),ns(O,o,p),C1;V.data==="$?"||Sy(),c=iy(o,c,f)}else V.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=J.treeContext,An=Ps(V.nextSibling),Nr=c,Ht=!0,fa=null,Qs=!1,o!==null&&(ps[gs++]=Si,ps[gs++]=Ti,ps[gs++]=ca,Si=o.id,Ti=o.overflow,ca=c),c=sy(c,p.children),c.flags|=4096);return c}return _?(so(),_=p.fallback,V=c.mode,J=o.child,ve=J.sibling,p=wi(J,{mode:"hidden",children:p.children}),p.subtreeFlags=J.subtreeFlags&65011712,ve!==null?_=wi(ve,_):(_=la(_,V,f,null),_.flags|=2),_.return=c,p.return=c,p.sibling=_,c.child=p,p=_,_=c.child,V=o.child.memoizedState,V===null?V=ny(f):(J=V.cachePool,J!==null?(ve=Zn._currentValue,J=J.parent!==ve?{parent:ve,pool:ve}:J):J=Sw(),V={baseLanes:V.baseLanes|f,cachePool:J}),_.memoizedState=V,_.childLanes=ry(o,O,f),c.memoizedState=ty,p):(ro(c),f=o.child,o=f.sibling,f=wi(f,{mode:"visible",children:p.children}),f.return=c,f.sibling=null,o!==null&&(O=c.deletions,O===null?(c.deletions=[o],c.flags|=16):O.push(o)),c.child=f,c.memoizedState=null,f)}function sy(o,c){return c=Zh({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Zh(o,c){return o=Qr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function iy(o,c,f){return Al(c,o.child,null,f),o=sy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function B1(o,c,f){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),Sm(o.return,c,f)}function oy(o,c,f,p,_){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=f,T.tailMode=_)}function U1(o,c,f){var p=c.pendingProps,_=p.revealOrder,T=p.tail;if(cr(o,c,p.children,f),p=Qn.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&B1(o,f,c);else if(o.tag===19)B1(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(U(Qn,p),_){case"forwards":for(f=c.child,_=null;f!==null;)o=f.alternate,o!==null&&qh(o)===null&&(_=f),f=f.sibling;f=_,f===null?(_=c.child,c.child=null):(_=f.sibling,f.sibling=null),oy(c,!1,_,f,T);break;case"backwards":for(f=null,_=c.child,c.child=null;_!==null;){if(o=_.alternate,o!==null&&qh(o)===null){c.child=_;break}o=_.sibling,_.sibling=f,f=_,_=o}oy(c,!0,f,null,T);break;case"together":oy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ki(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),co|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(bu(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,f=wi(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=wi(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function ay(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Nh(o)))}function hP(o,c,f){switch(c.tag){case 3:De(c,c.stateNode.containerInfo),Gi(c,Zn,o.memoizedState.cache),mu();break;case 27:case 5:Ke(c);break;case 4:De(c,c.stateNode.containerInfo);break;case 10:Gi(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(ro(c),c.flags|=128,null):(f&c.child.childLanes)!==0?j1(o,c,f):(ro(c),o=ki(o,c,f),o!==null?o.sibling:null);ro(c);break;case 19:var _=(o.flags&128)!==0;if(p=(f&c.childLanes)!==0,p||(bu(o,c,f,!1),p=(f&c.childLanes)!==0),_){if(p)return U1(o,c,f);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),U(Qn,Qn.current),p)break;return null;case 22:case 23:return c.lanes=0,I1(o,c,f);case 24:Gi(c,Zn,o.memoizedState.cache)}return ki(o,c,f)}function L1(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)rr=!0;else{if(!ay(o,f)&&(c.flags&128)===0)return rr=!1,hP(o,c,f);rr=(o.flags&131072)!==0}else rr=!1,Ht&&(c.flags&1048576)!==0&&mw(c,kh,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var p=c.elementType,_=p._init;if(p=_(p._payload),c.type=p,typeof p=="function")mm(p)?(o=ya(p,o),c.tag=1,c=D1(null,c,p,o,f)):(c.tag=0,c=ey(null,c,p,o,f));else{if(p!=null){if(_=p.$$typeof,_===F){c.tag=11,c=k1(null,c,p,o,f);break e}else if(_===X){c.tag=14,c=N1(null,c,p,o,f);break e}}throw c=oe(p)||p,Error(r(306,c,""))}}return c;case 0:return ey(o,c,c.type,c.pendingProps,f);case 1:return p=c.type,_=ya(p,c.pendingProps),D1(o,c,p,_,f);case 3:e:{if(De(c,c.stateNode.containerInfo),o===null)throw Error(r(387));p=c.pendingProps;var T=c.memoizedState;_=T.element,Nm(o,c),Eu(c,p,null,f);var O=c.memoizedState;if(p=O.cache,Gi(c,Zn,p),p!==T.cache&&Tm(c,[Zn],f,!0),Tu(),p=O.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:O.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=F1(o,c,p,f);break e}else if(p!==_){_=hs(Error(r(424)),c),yu(_),c=F1(o,c,p,f);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(An=Ps(o.firstChild),Nr=c,Ht=!0,fa=null,Qs=!0,f=b1(c,null,p,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(mu(),p===_){c=ki(o,c,f);break e}cr(o,c,p,f)}c=c.child}return c;case 26:return Kh(o,c),o===null?(f=HS(c.type,null,c.pendingProps,null))?c.memoizedState=f:Ht||(f=c.type,o=c.pendingProps,p=ud(ke.current).createElement(f),p[v]=c,p[E]=o,fr(p,f,o),te(p),c.stateNode=p):c.memoizedState=HS(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Ke(c),o===null&&Ht&&(p=c.stateNode=zS(c.type,c.pendingProps,ke.current),Nr=c,Qs=!0,_=An,po(c.type)?(zy=_,An=Ps(p.firstChild)):An=_),cr(o,c,c.pendingProps.children,f),Kh(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ht&&((_=p=An)&&(p=LP(p,c.type,c.pendingProps,Qs),p!==null?(c.stateNode=p,Nr=c,An=Ps(p.firstChild),Qs=!1,_=!0):_=!1),_||ha(c)),Ke(c),_=c.type,T=c.pendingProps,O=o!==null?o.memoizedProps:null,p=T.children,jy(_,T)?p=null:O!==null&&jy(_,O)&&(c.flags|=32),c.memoizedState!==null&&(_=Fm(o,c,sP,null,null,f),Xu._currentValue=_),Kh(o,c),cr(o,c,p,f),c.child;case 6:return o===null&&Ht&&((o=f=An)&&(f=zP(f,c.pendingProps,Qs),f!==null?(c.stateNode=f,Nr=c,An=null,o=!0):o=!1),o||ha(c)),null;case 13:return j1(o,c,f);case 4:return De(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=Al(c,null,p,f):cr(o,c,p,f),c.child;case 11:return k1(o,c,c.type,c.pendingProps,f);case 7:return cr(o,c,c.pendingProps,f),c.child;case 8:return cr(o,c,c.pendingProps.children,f),c.child;case 12:return cr(o,c,c.pendingProps.children,f),c.child;case 10:return p=c.pendingProps,Gi(c,c.type,p.value),cr(o,c,p.children,f),c.child;case 9:return _=c.type._context,p=c.pendingProps.children,pa(c),_=br(_),p=p(_),c.flags|=1,cr(o,c,p,f),c.child;case 14:return N1(o,c,c.type,c.pendingProps,f);case 15:return M1(o,c,c.type,c.pendingProps,f);case 19:return U1(o,c,f);case 31:return p=c.pendingProps,f=c.mode,p={mode:p.mode,children:p.children},o===null?(f=Zh(p,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=wi(o.child,p),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return I1(o,c,f);case 24:return pa(c),p=br(Zn),o===null?(_=Rm(),_===null&&(_=yn,T=Em(),_.pooledCache=T,T.refCount++,T!==null&&(_.pooledCacheLanes|=f),_=T),c.memoizedState={parent:p,cache:_},km(c),Gi(c,Zn,_)):((o.lanes&f)!==0&&(Nm(o,c),Eu(c,null,null,f),Tu()),_=o.memoizedState,T=c.memoizedState,_.parent!==p?(_={parent:p,cache:p},c.memoizedState=_,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=_),Gi(c,Zn,p)):(p=T.cache,Gi(c,Zn,p),p!==_.cache&&Tm(c,[Zn],f,!0))),cr(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ni(o){o.flags|=4}function z1(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!KS(c)){if(c=ms.current,c!==null&&((Ft&4194048)===Ft?Gs!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||c!==Gs))throw wu=Cm,Tw;o.flags|=8192}}function Qh(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ru():536870912,o.lanes|=c,Nl|=c)}function Iu(o,c){if(!Ht)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function En(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(c)for(var _=o.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=f,c}function dP(o,c,f){var p=c.pendingProps;switch(xm(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(c),null;case 1:return En(c),null;case 3:return f=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Ai(Zn),Ge(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(gu(c)?Ni(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,_w())),En(c),null;case 26:return f=c.memoizedState,o===null?(Ni(c),f!==null?(En(c),z1(c,f)):(En(c),c.flags&=-16777217)):f?f!==o.memoizedState?(Ni(c),En(c),z1(c,f)):(En(c),c.flags&=-16777217):(o.memoizedProps!==p&&Ni(c),En(c),c.flags&=-16777217),null;case 27:nt(c),f=ke.current;var _=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ni(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return En(c),null}o=we.current,gu(c)?yw(c):(o=zS(_,p,f),c.stateNode=o,Ni(c))}return En(c),null;case 5:if(nt(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ni(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return En(c),null}if(o=we.current,gu(c))yw(c);else{switch(_=ud(ke.current),o){case 1:o=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}o[v]=c,o[E]=p;e:for(_=c.child;_!==null;){if(_.tag===5||_.tag===6)o.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===c)break e;for(;_.sibling===null;){if(_.return===null||_.return===c)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}c.stateNode=o;e:switch(fr(o,f,p),f){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ni(c)}}return En(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&Ni(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(o=ke.current,gu(c)){if(o=c.stateNode,f=c.memoizedProps,p=null,_=Nr,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}o[v]=c,o=!!(o.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||PS(o.nodeValue,f)),o||ha(c)}else o=ud(o).createTextNode(p),o[v]=c,c.stateNode=o}return En(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=gu(c),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[v]=c}else mu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;En(c),_=!1}else _=_w(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return c.flags&256?(Ci(c),c):(Ci(c),null)}if(Ci(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=p!==null,o=o!==null&&o.memoizedState!==null,f){p=c.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var T=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),T!==_&&(p.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),Qh(c,c.updateQueue),En(c),null;case 4:return Ge(),o===null&&Iy(c.stateNode.containerInfo),En(c),null;case 10:return Ai(c.type),En(c),null;case 19:if(ye(Qn),_=c.memoizedState,_===null)return En(c),null;if(p=(c.flags&128)!==0,T=_.rendering,T===null)if(p)Iu(_,!1);else{if(Rn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(T=qh(o),T!==null){for(c.flags|=128,Iu(_,!1),o=T.updateQueue,c.updateQueue=o,Qh(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)gw(f,o),f=f.sibling;return U(Qn,Qn.current&1|2),c.child}o=o.sibling}_.tail!==null&&xn()>ed&&(c.flags|=128,p=!0,Iu(_,!1),c.lanes=4194304)}else{if(!p)if(o=qh(T),o!==null){if(c.flags|=128,p=!0,o=o.updateQueue,c.updateQueue=o,Qh(c,o),Iu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ht)return En(c),null}else 2*xn()-_.renderingStartTime>ed&&f!==536870912&&(c.flags|=128,p=!0,Iu(_,!1),c.lanes=4194304);_.isBackwards?(T.sibling=c.child,c.child=T):(o=_.last,o!==null?o.sibling=T:c.child=T,_.last=T)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=xn(),c.sibling=null,o=Qn.current,U(Qn,p?o&1|2:o&1),c):(En(c),null);case 22:case 23:return Ci(c),Pm(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(f&536870912)!==0&&(c.flags&128)===0&&(En(c),c.subtreeFlags&6&&(c.flags|=8192)):En(c),f=c.updateQueue,f!==null&&Qh(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048),o!==null&&ye(ga),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ai(Zn),En(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function pP(o,c){switch(xm(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ai(Zn),Ge(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return nt(c),null;case 13:if(Ci(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));mu()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ye(Qn),null;case 4:return Ge(),null;case 10:return Ai(c.type),null;case 22:case 23:return Ci(c),Pm(),o!==null&&ye(ga),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Ai(Zn),null;case 25:return null;default:return null}}function V1(o,c){switch(xm(c),c.tag){case 3:Ai(Zn),Ge();break;case 26:case 27:case 5:nt(c);break;case 4:Ge();break;case 13:Ci(c);break;case 19:ye(Qn);break;case 10:Ai(c.type);break;case 22:case 23:Ci(c),Pm(),o!==null&&ye(ga);break;case 24:Ai(Zn)}}function Ou(o,c){try{var f=c.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&o)===o){p=void 0;var T=f.create,O=f.inst;p=T(),O.destroy=p}f=f.next}while(f!==_)}}catch(V){dn(c,c.return,V)}}function io(o,c,f){try{var p=c.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var T=_.next;p=T;do{if((p.tag&o)===o){var O=p.inst,V=O.destroy;if(V!==void 0){O.destroy=void 0,_=c;var J=f,ve=V;try{ve()}catch(Oe){dn(_,J,Oe)}}}p=p.next}while(p!==T)}}catch(Oe){dn(c,c.return,Oe)}}function $1(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{Nw(c,f)}catch(p){dn(o,o.return,p)}}}function H1(o,c,f){f.props=ya(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(p){dn(o,c,p)}}function Pu(o,c){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof f=="function"?o.refCleanup=f(p):f.current=p}}catch(_){dn(o,c,_)}}function Js(o,c){var f=o.ref,p=o.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){dn(o,c,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){dn(o,c,_)}else f.current=null}function W1(o){var c=o.type,f=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){dn(o,o.return,_)}}function ly(o,c,f){try{var p=o.stateNode;DP(p,o.type,f,c),p[E]=c}catch(_){dn(o,o.return,_)}}function q1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&po(o.type)||o.tag===4}function cy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||q1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&po(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function uy(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(o),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=cd));else if(p!==4&&(p===27&&po(o.type)&&(f=o.stateNode,c=null),o=o.child,o!==null))for(uy(o,c,f),o=o.sibling;o!==null;)uy(o,c,f),o=o.sibling}function Gh(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(p!==4&&(p===27&&po(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(Gh(o,c,f),o=o.sibling;o!==null;)Gh(o,c,f),o=o.sibling}function X1(o){var c=o.stateNode,f=o.memoizedProps;try{for(var p=o.type,_=c.attributes;_.length;)c.removeAttributeNode(_[0]);fr(c,p,f),c[v]=o,c[E]=f}catch(T){dn(o,o.return,T)}}var Mi=!1,Pn=!1,fy=!1,Y1=typeof WeakSet=="function"?WeakSet:Set,sr=null;function gP(o,c){if(o=o.containerInfo,Dy=md,o=iw(o),cm(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var O=0,V=-1,J=-1,ve=0,Oe=0,Fe=o,Se=null;t:for(;;){for(var Ae;Fe!==f||_!==0&&Fe.nodeType!==3||(V=O+_),Fe!==T||p!==0&&Fe.nodeType!==3||(J=O+p),Fe.nodeType===3&&(O+=Fe.nodeValue.length),(Ae=Fe.firstChild)!==null;)Se=Fe,Fe=Ae;for(;;){if(Fe===o)break t;if(Se===f&&++ve===_&&(V=O),Se===T&&++Oe===p&&(J=O),(Ae=Fe.nextSibling)!==null)break;Fe=Se,Se=Fe.parentNode}Fe=Ae}f=V===-1||J===-1?null:{start:V,end:J}}else f=null}f=f||{start:0,end:0}}else f=null;for(Fy={focusedElem:o,selectionRange:f},md=!1,sr=c;sr!==null;)if(c=sr,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,sr=o;else for(;sr!==null;){switch(c=sr,T=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,f=c,_=T.memoizedProps,T=T.memoizedState,p=f.stateNode;try{var bt=ya(f.type,_,f.elementType===f.type);o=p.getSnapshotBeforeUpdate(bt,T),p.__reactInternalSnapshotBeforeUpdate=o}catch(pt){dn(f,f.return,pt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)Uy(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Uy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,sr=o;break}sr=c.return}}function K1(o,c,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:oo(o,f),p&4&&Ou(5,f);break;case 1:if(oo(o,f),p&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(O){dn(f,f.return,O)}else{var _=ya(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(_,c,o.__reactInternalSnapshotBeforeUpdate)}catch(O){dn(f,f.return,O)}}p&64&&$1(f),p&512&&Pu(f,f.return);break;case 3:if(oo(o,f),p&64&&(o=f.updateQueue,o!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{Nw(o,c)}catch(O){dn(f,f.return,O)}}break;case 27:c===null&&p&4&&X1(f);case 26:case 5:oo(o,f),c===null&&p&4&&W1(f),p&512&&Pu(f,f.return);break;case 12:oo(o,f);break;case 13:oo(o,f),p&4&&G1(o,f),p&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=TP.bind(null,f),VP(o,f))));break;case 22:if(p=f.memoizedState!==null||Mi,!p){c=c!==null&&c.memoizedState!==null||Pn,_=Mi;var T=Pn;Mi=p,(Pn=c)&&!T?ao(o,f,(f.subtreeFlags&8772)!==0):oo(o,f),Mi=_,Pn=T}break;case 30:break;default:oo(o,f)}}function Z1(o){var c=o.alternate;c!==null&&(o.alternate=null,Z1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Ne(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var vn=null,zr=!1;function Ii(o,c,f){for(f=f.child;f!==null;)Q1(o,c,f),f=f.sibling}function Q1(o,c,f){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Me,f)}catch{}switch(f.tag){case 26:Pn||Js(f,c),Ii(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Pn||Js(f,c);var p=vn,_=zr;po(f.type)&&(vn=f.stateNode,zr=!1),Ii(o,c,f),$u(f.stateNode),vn=p,zr=_;break;case 5:Pn||Js(f,c);case 6:if(p=vn,_=zr,vn=null,Ii(o,c,f),vn=p,zr=_,vn!==null)if(zr)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(f.stateNode)}catch(T){dn(f,c,T)}else try{vn.removeChild(f.stateNode)}catch(T){dn(f,c,T)}break;case 18:vn!==null&&(zr?(o=vn,US(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Qu(o)):US(vn,f.stateNode));break;case 4:p=vn,_=zr,vn=f.stateNode.containerInfo,zr=!0,Ii(o,c,f),vn=p,zr=_;break;case 0:case 11:case 14:case 15:Pn||io(2,f,c),Pn||io(4,f,c),Ii(o,c,f);break;case 1:Pn||(Js(f,c),p=f.stateNode,typeof p.componentWillUnmount=="function"&&H1(f,c,p)),Ii(o,c,f);break;case 21:Ii(o,c,f);break;case 22:Pn=(p=Pn)||f.memoizedState!==null,Ii(o,c,f),Pn=p;break;default:Ii(o,c,f)}}function G1(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Qu(o)}catch(f){dn(c,c.return,f)}}function mP(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new Y1),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new Y1),c;default:throw Error(r(435,o.tag))}}function hy(o,c){var f=mP(o);c.forEach(function(p){var _=EP.bind(null,o,p);f.has(p)||(f.add(p),p.then(_,_))})}function Gr(o,c){var f=c.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],T=o,O=c,V=O;e:for(;V!==null;){switch(V.tag){case 27:if(po(V.type)){vn=V.stateNode,zr=!1;break e}break;case 5:vn=V.stateNode,zr=!1;break e;case 3:case 4:vn=V.stateNode.containerInfo,zr=!0;break e}V=V.return}if(vn===null)throw Error(r(160));Q1(T,O,_),vn=null,zr=!1,T=_.alternate,T!==null&&(T.return=null),_.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)J1(c,o),c=c.sibling}var Os=null;function J1(o,c){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Gr(c,o),Jr(o),p&4&&(io(3,o,o.return),Ou(3,o),io(5,o,o.return));break;case 1:Gr(c,o),Jr(o),p&512&&(Pn||f===null||Js(f,f.return)),p&64&&Mi&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Os;if(Gr(c,o),Jr(o),p&512&&(Pn||f===null||Js(f,f.return)),p&4){var T=f!==null?f.memoizedState:null;if(p=o.memoizedState,f===null)if(p===null)if(o.stateNode===null){e:{p=o.type,f=o.memoizedProps,_=_.ownerDocument||_;t:switch(p){case"title":T=_.getElementsByTagName("title")[0],(!T||T[ee]||T[v]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=_.createElement(p),_.head.insertBefore(T,_.querySelector("head > title"))),fr(T,p,f),T[v]=o,te(T),p=T;break e;case"link":var O=XS("link","href",_).get(p+(f.href||""));if(O){for(var V=0;V<O.length;V++)if(T=O[V],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(V,1);break t}}T=_.createElement(p),fr(T,p,f),_.head.appendChild(T);break;case"meta":if(O=XS("meta","content",_).get(p+(f.content||""))){for(V=0;V<O.length;V++)if(T=O[V],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(V,1);break t}}T=_.createElement(p),fr(T,p,f),_.head.appendChild(T);break;default:throw Error(r(468,p))}T[v]=o,te(T),p=T}o.stateNode=p}else YS(_,o.type,o.stateNode);else o.stateNode=qS(_,p,o.memoizedProps);else T!==p?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,p===null?YS(_,o.type,o.stateNode):qS(_,p,o.memoizedProps)):p===null&&o.stateNode!==null&&ly(o,o.memoizedProps,f.memoizedProps)}break;case 27:Gr(c,o),Jr(o),p&512&&(Pn||f===null||Js(f,f.return)),f!==null&&p&4&&ly(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Gr(c,o),Jr(o),p&512&&(Pn||f===null||Js(f,f.return)),o.flags&32){_=o.stateNode;try{Zi(_,"")}catch(Ae){dn(o,o.return,Ae)}}p&4&&o.stateNode!=null&&(_=o.memoizedProps,ly(o,_,f!==null?f.memoizedProps:_)),p&1024&&(fy=!0);break;case 6:if(Gr(c,o),Jr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,f=o.stateNode;try{f.nodeValue=p}catch(Ae){dn(o,o.return,Ae)}}break;case 3:if(dd=null,_=Os,Os=fd(c.containerInfo),Gr(c,o),Os=_,Jr(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Qu(c.containerInfo)}catch(Ae){dn(o,o.return,Ae)}fy&&(fy=!1,eS(o));break;case 4:p=Os,Os=fd(o.stateNode.containerInfo),Gr(c,o),Jr(o),Os=p;break;case 12:Gr(c,o),Jr(o);break;case 13:Gr(c,o),Jr(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(by=xn()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,hy(o,p)));break;case 22:_=o.memoizedState!==null;var J=f!==null&&f.memoizedState!==null,ve=Mi,Oe=Pn;if(Mi=ve||_,Pn=Oe||J,Gr(c,o),Pn=Oe,Mi=ve,Jr(o),p&8192)e:for(c=o.stateNode,c._visibility=_?c._visibility&-2:c._visibility|1,_&&(f===null||J||Mi||Pn||ba(o)),f=null,c=o;;){if(c.tag===5||c.tag===26){if(f===null){J=f=c;try{if(T=J.stateNode,_)O=T.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{V=J.stateNode;var Fe=J.memoizedProps.style,Se=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;V.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Ae){dn(J,J.return,Ae)}}}else if(c.tag===6){if(f===null){J=c;try{J.stateNode.nodeValue=_?"":J.memoizedProps}catch(Ae){dn(J,J.return,Ae)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,hy(o,f))));break;case 19:Gr(c,o),Jr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,hy(o,p)));break;case 30:break;case 21:break;default:Gr(c,o),Jr(o)}}function Jr(o){var c=o.flags;if(c&2){try{for(var f,p=o.return;p!==null;){if(q1(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,T=cy(o);Gh(o,T,_);break;case 5:var O=f.stateNode;f.flags&32&&(Zi(O,""),f.flags&=-33);var V=cy(o);Gh(o,V,O);break;case 3:case 4:var J=f.stateNode.containerInfo,ve=cy(o);uy(o,ve,J);break;default:throw Error(r(161))}}catch(Oe){dn(o,o.return,Oe)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function eS(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;eS(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function oo(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)K1(o,c.alternate,c),c=c.sibling}function ba(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:io(4,c,c.return),ba(c);break;case 1:Js(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&H1(c,c.return,f),ba(c);break;case 27:$u(c.stateNode);case 26:case 5:Js(c,c.return),ba(c);break;case 22:c.memoizedState===null&&ba(c);break;case 30:ba(c);break;default:ba(c)}o=o.sibling}}function ao(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,_=o,T=c,O=T.flags;switch(T.tag){case 0:case 11:case 15:ao(_,T,f),Ou(4,T);break;case 1:if(ao(_,T,f),p=T,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ve){dn(p,p.return,ve)}if(p=T,_=p.updateQueue,_!==null){var V=p.stateNode;try{var J=_.shared.hiddenCallbacks;if(J!==null)for(_.shared.hiddenCallbacks=null,_=0;_<J.length;_++)kw(J[_],V)}catch(ve){dn(p,p.return,ve)}}f&&O&64&&$1(T),Pu(T,T.return);break;case 27:X1(T);case 26:case 5:ao(_,T,f),f&&p===null&&O&4&&W1(T),Pu(T,T.return);break;case 12:ao(_,T,f);break;case 13:ao(_,T,f),f&&O&4&&G1(_,T);break;case 22:T.memoizedState===null&&ao(_,T,f),Pu(T,T.return);break;case 30:break;default:ao(_,T,f)}c=c.sibling}}function dy(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&_u(f))}function py(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&_u(o))}function ei(o,c,f,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)tS(o,c,f,p),c=c.sibling}function tS(o,c,f,p){var _=c.flags;switch(c.tag){case 0:case 11:case 15:ei(o,c,f,p),_&2048&&Ou(9,c);break;case 1:ei(o,c,f,p);break;case 3:ei(o,c,f,p),_&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&_u(o)));break;case 12:if(_&2048){ei(o,c,f,p),o=c.stateNode;try{var T=c.memoizedProps,O=T.id,V=T.onPostCommit;typeof V=="function"&&V(O,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(J){dn(c,c.return,J)}}else ei(o,c,f,p);break;case 13:ei(o,c,f,p);break;case 23:break;case 22:T=c.stateNode,O=c.alternate,c.memoizedState!==null?T._visibility&2?ei(o,c,f,p):Du(o,c):T._visibility&2?ei(o,c,f,p):(T._visibility|=2,Rl(o,c,f,p,(c.subtreeFlags&10256)!==0)),_&2048&&dy(O,c);break;case 24:ei(o,c,f,p),_&2048&&py(c.alternate,c);break;default:ei(o,c,f,p)}}function Rl(o,c,f,p,_){for(_=_&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var T=o,O=c,V=f,J=p,ve=O.flags;switch(O.tag){case 0:case 11:case 15:Rl(T,O,V,J,_),Ou(8,O);break;case 23:break;case 22:var Oe=O.stateNode;O.memoizedState!==null?Oe._visibility&2?Rl(T,O,V,J,_):Du(T,O):(Oe._visibility|=2,Rl(T,O,V,J,_)),_&&ve&2048&&dy(O.alternate,O);break;case 24:Rl(T,O,V,J,_),_&&ve&2048&&py(O.alternate,O);break;default:Rl(T,O,V,J,_)}c=c.sibling}}function Du(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,p=c,_=p.flags;switch(p.tag){case 22:Du(f,p),_&2048&&dy(p.alternate,p);break;case 24:Du(f,p),_&2048&&py(p.alternate,p);break;default:Du(f,p)}c=c.sibling}}var Fu=8192;function Cl(o){if(o.subtreeFlags&Fu)for(o=o.child;o!==null;)nS(o),o=o.sibling}function nS(o){switch(o.tag){case 26:Cl(o),o.flags&Fu&&o.memoizedState!==null&&t4(Os,o.memoizedState,o.memoizedProps);break;case 5:Cl(o);break;case 3:case 4:var c=Os;Os=fd(o.stateNode.containerInfo),Cl(o),Os=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Fu,Fu=16777216,Cl(o),Fu=c):Cl(o));break;default:Cl(o)}}function rS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function ju(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];sr=p,iS(p,o)}rS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sS(o),o=o.sibling}function sS(o){switch(o.tag){case 0:case 11:case 15:ju(o),o.flags&2048&&io(9,o,o.return);break;case 3:ju(o);break;case 12:ju(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Jh(o)):ju(o);break;default:ju(o)}}function Jh(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];sr=p,iS(p,o)}rS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:io(8,c,c.return),Jh(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Jh(c));break;default:Jh(c)}o=o.sibling}}function iS(o,c){for(;sr!==null;){var f=sr;switch(f.tag){case 0:case 11:case 15:io(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:_u(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,sr=p;else e:for(f=o;sr!==null;){p=sr;var _=p.sibling,T=p.return;if(Z1(p),p===f){sr=null;break e}if(_!==null){_.return=T,sr=_;break e}sr=T}}}var yP={getCacheForType:function(o){var c=br(Zn),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},bP=typeof WeakMap=="function"?WeakMap:Map,en=0,yn=null,Nt=null,Ft=0,tn=0,es=null,lo=!1,kl=!1,gy=!1,Oi=0,Rn=0,co=0,_a=0,my=0,ys=0,Nl=0,Bu=null,Vr=null,yy=!1,by=0,ed=1/0,td=null,uo=null,ur=0,fo=null,Ml=null,Il=0,_y=0,xy=null,oS=null,Uu=0,vy=null;function ts(){if((en&2)!==0&&Ft!==0)return Ft&-Ft;if(re.T!==null){var o=_l;return o!==0?o:Cy()}return S()}function aS(){ys===0&&(ys=(Ft&536870912)===0||Ht?ra():536870912);var o=ms.current;return o!==null&&(o.flags|=32),ys}function ns(o,c,f){(o===yn&&(tn===2||tn===9)||o.cancelPendingCommit!==null)&&(Ol(o,0),ho(o,Ft,ys,!1)),Ns(o,f),((en&2)===0||o!==yn)&&(o===yn&&((en&2)===0&&(_a|=f),Rn===4&&ho(o,Ft,ys,!1)),ti(o))}function lS(o,c,f){if((en&6)!==0)throw Error(r(327));var p=!f&&(c&124)===0&&(c&o.expiredLanes)===0||jr(o,c),_=p?vP(o,c):Ty(o,c,!0),T=p;do{if(_===0){kl&&!p&&ho(o,c,0,!1);break}else{if(f=o.current.alternate,T&&!_P(f)){_=Ty(o,c,!1),T=!1;continue}if(_===2){if(T=c,o.errorRecoveryDisabledLanes&T)var O=0;else O=o.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){c=O;e:{var V=o;_=Bu;var J=V.current.memoizedState.isDehydrated;if(J&&(Ol(V,O).flags|=256),O=Ty(V,O,!1),O!==2){if(gy&&!J){V.errorRecoveryDisabledLanes|=T,_a|=T,_=4;break e}T=Vr,Vr=_,T!==null&&(Vr===null?Vr=T:Vr.push.apply(Vr,T))}_=O}if(T=!1,_!==2)continue}}if(_===1){Ol(o,0),ho(o,c,0,!0);break}e:{switch(p=o,T=_,T){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:ho(p,c,ys,!lo);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(_=by+300-xn(),10<_)){if(ho(p,c,ys,!lo),Bn(p,0,!0)!==0)break e;p.timeoutHandle=jS(cS.bind(null,p,f,Vr,td,yy,c,ys,_a,Nl,lo,T,2,-0,0),_);break e}cS(p,f,Vr,td,yy,c,ys,_a,Nl,lo,T,0,-0,0)}}break}while(!0);ti(o)}function cS(o,c,f,p,_,T,O,V,J,ve,Oe,Fe,Se,Ae){if(o.timeoutHandle=-1,Fe=c.subtreeFlags,(Fe&8192||(Fe&16785408)===16785408)&&(qu={stylesheets:null,count:0,unsuspend:e4},nS(c),Fe=n4(),Fe!==null)){o.cancelPendingCommit=Fe(mS.bind(null,o,c,T,f,p,_,O,V,J,Oe,1,Se,Ae)),ho(o,T,O,!ve);return}mS(o,c,T,f,p,_,O,V,J)}function _P(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],T=_.getSnapshot;_=_.value;try{if(!Zr(T(),_))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ho(o,c,f,p){c&=~my,c&=~_a,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var _=c;0<_;){var T=31-dt(_),O=1<<T;p[T]=-1,_&=~O}f!==0&&sa(o,f,c)}function nd(){return(en&6)===0?(Lu(0),!1):!0}function wy(){if(Nt!==null){if(tn===0)var o=Nt.return;else o=Nt,Ei=da=null,Um(o),El=null,Nu=0,o=Nt;for(;o!==null;)V1(o.alternate,o),o=o.return;Nt=null}}function Ol(o,c){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,jP(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),wy(),yn=o,Nt=f=wi(o.current,null),Ft=c,tn=0,es=null,lo=!1,kl=jr(o,c),gy=!1,Nl=ys=my=_a=co=Rn=0,Vr=Bu=null,yy=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var _=31-dt(p),T=1<<_;c|=o[_],p&=~T}return Oi=c,Th(),f}function uS(o,c){Et=null,re.H=$h,c===vu||c===Oh?(c=Rw(),tn=3):c===Tw?(c=Rw(),tn=4):tn=c===C1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,es=c,Nt===null&&(Rn=1,Yh(o,hs(c,o.current)))}function fS(){var o=re.H;return re.H=$h,o===null?$h:o}function hS(){var o=re.A;return re.A=yP,o}function Sy(){Rn=4,lo||(Ft&4194048)!==Ft&&ms.current!==null||(kl=!0),(co&134217727)===0&&(_a&134217727)===0||yn===null||ho(yn,Ft,ys,!1)}function Ty(o,c,f){var p=en;en|=2;var _=fS(),T=hS();(yn!==o||Ft!==c)&&(td=null,Ol(o,c)),c=!1;var O=Rn;e:do try{if(tn!==0&&Nt!==null){var V=Nt,J=es;switch(tn){case 8:wy(),O=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(c=!0);var ve=tn;if(tn=0,es=null,Pl(o,V,J,ve),f&&kl){O=0;break e}break;default:ve=tn,tn=0,es=null,Pl(o,V,J,ve)}}xP(),O=Rn;break}catch(Oe){uS(o,Oe)}while(!0);return c&&o.shellSuspendCounter++,Ei=da=null,en=p,re.H=_,re.A=T,Nt===null&&(yn=null,Ft=0,Th()),O}function xP(){for(;Nt!==null;)dS(Nt)}function vP(o,c){var f=en;en|=2;var p=fS(),_=hS();yn!==o||Ft!==c?(td=null,ed=xn()+500,Ol(o,c)):kl=jr(o,c);e:do try{if(tn!==0&&Nt!==null){c=Nt;var T=es;t:switch(tn){case 1:tn=0,es=null,Pl(o,c,T,1);break;case 2:case 9:if(Ew(T)){tn=0,es=null,pS(c);break}c=function(){tn!==2&&tn!==9||yn!==o||(tn=7),ti(o)},T.then(c,c);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:Ew(T)?(tn=0,es=null,pS(c)):(tn=0,es=null,Pl(o,c,T,7));break;case 5:var O=null;switch(Nt.tag){case 26:O=Nt.memoizedState;case 5:case 27:var V=Nt;if(!O||KS(O)){tn=0,es=null;var J=V.sibling;if(J!==null)Nt=J;else{var ve=V.return;ve!==null?(Nt=ve,rd(ve)):Nt=null}break t}}tn=0,es=null,Pl(o,c,T,5);break;case 6:tn=0,es=null,Pl(o,c,T,6);break;case 8:wy(),Rn=6;break e;default:throw Error(r(462))}}wP();break}catch(Oe){uS(o,Oe)}while(!0);return Ei=da=null,re.H=p,re.A=_,en=f,Nt!==null?0:(yn=null,Ft=0,Th(),Rn)}function wP(){for(;Nt!==null&&!In();)dS(Nt)}function dS(o){var c=L1(o.alternate,o,Oi);o.memoizedProps=o.pendingProps,c===null?rd(o):Nt=c}function pS(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=P1(f,c,c.pendingProps,c.type,void 0,Ft);break;case 11:c=P1(f,c,c.pendingProps,c.type.render,c.ref,Ft);break;case 5:Um(c);default:V1(f,c),c=Nt=gw(c,Oi),c=L1(f,c,Oi)}o.memoizedProps=o.pendingProps,c===null?rd(o):Nt=c}function Pl(o,c,f,p){Ei=da=null,Um(c),El=null,Nu=0;var _=c.return;try{if(fP(o,_,c,f,Ft)){Rn=1,Yh(o,hs(f,o.current)),Nt=null;return}}catch(T){if(_!==null)throw Nt=_,T;Rn=1,Yh(o,hs(f,o.current)),Nt=null;return}c.flags&32768?(Ht||p===1?o=!0:kl||(Ft&536870912)!==0?o=!1:(lo=o=!0,(p===2||p===9||p===3||p===6)&&(p=ms.current,p!==null&&p.tag===13&&(p.flags|=16384))),gS(c,o)):rd(c)}function rd(o){var c=o;do{if((c.flags&32768)!==0){gS(c,lo);return}o=c.return;var f=dP(c.alternate,c,Oi);if(f!==null){Nt=f;return}if(c=c.sibling,c!==null){Nt=c;return}Nt=c=o}while(c!==null);Rn===0&&(Rn=5)}function gS(o,c){do{var f=pP(o.alternate,o);if(f!==null){f.flags&=32767,Nt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){Nt=o;return}Nt=o=f}while(o!==null);Rn=6,Nt=null}function mS(o,c,f,p,_,T,O,V,J){o.cancelPendingCommit=null;do sd();while(ur!==0);if((en&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(T=c.lanes|c.childLanes,T|=pm,cO(o,f,T,O,V,J),o===yn&&(Nt=yn=null,Ft=0),Ml=c,fo=o,Il=f,_y=T,xy=_,oS=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,AP(lr,function(){return vS(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=re.T,re.T=null,_=Ee.p,Ee.p=2,O=en,en|=4;try{gP(o,c,f)}finally{en=O,Ee.p=_,re.T=p}}ur=1,yS(),bS(),_S()}}function yS(){if(ur===1){ur=0;var o=fo,c=Ml,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=re.T,re.T=null;var p=Ee.p;Ee.p=2;var _=en;en|=4;try{J1(c,o);var T=Fy,O=iw(o.containerInfo),V=T.focusedElem,J=T.selectionRange;if(O!==V&&V&&V.ownerDocument&&sw(V.ownerDocument.documentElement,V)){if(J!==null&&cm(V)){var ve=J.start,Oe=J.end;if(Oe===void 0&&(Oe=ve),"selectionStart"in V)V.selectionStart=ve,V.selectionEnd=Math.min(Oe,V.value.length);else{var Fe=V.ownerDocument||document,Se=Fe&&Fe.defaultView||window;if(Se.getSelection){var Ae=Se.getSelection(),bt=V.textContent.length,pt=Math.min(J.start,bt),ln=J.end===void 0?pt:Math.min(J.end,bt);!Ae.extend&&pt>ln&&(O=ln,ln=pt,pt=O);var ge=rw(V,pt),ae=rw(V,ln);if(ge&&ae&&(Ae.rangeCount!==1||Ae.anchorNode!==ge.node||Ae.anchorOffset!==ge.offset||Ae.focusNode!==ae.node||Ae.focusOffset!==ae.offset)){var _e=Fe.createRange();_e.setStart(ge.node,ge.offset),Ae.removeAllRanges(),pt>ln?(Ae.addRange(_e),Ae.extend(ae.node,ae.offset)):(_e.setEnd(ae.node,ae.offset),Ae.addRange(_e))}}}}for(Fe=[],Ae=V;Ae=Ae.parentNode;)Ae.nodeType===1&&Fe.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Fe.length;V++){var Pe=Fe[V];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}md=!!Dy,Fy=Dy=null}finally{en=_,Ee.p=p,re.T=f}}o.current=c,ur=2}}function bS(){if(ur===2){ur=0;var o=fo,c=Ml,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=re.T,re.T=null;var p=Ee.p;Ee.p=2;var _=en;en|=4;try{K1(o,c.alternate,c)}finally{en=_,Ee.p=p,re.T=f}}ur=3}}function _S(){if(ur===4||ur===3){ur=0,ar();var o=fo,c=Ml,f=Il,p=oS;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ur=5:(ur=0,Ml=fo=null,xS(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(uo=null),j(f),c=c.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Me,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=re.T,_=Ee.p,Ee.p=2,re.T=null;try{for(var T=o.onRecoverableError,O=0;O<p.length;O++){var V=p[O];T(V.value,{componentStack:V.stack})}}finally{re.T=c,Ee.p=_}}(Il&3)!==0&&sd(),ti(o),_=o.pendingLanes,(f&4194090)!==0&&(_&42)!==0?o===vy?Uu++:(Uu=0,vy=o):Uu=0,Lu(0)}}function xS(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,_u(c)))}function sd(o){return yS(),bS(),_S(),vS()}function vS(){if(ur!==5)return!1;var o=fo,c=_y;_y=0;var f=j(Il),p=re.T,_=Ee.p;try{Ee.p=32>f?32:f,re.T=null,f=xy,xy=null;var T=fo,O=Il;if(ur=0,Ml=fo=null,Il=0,(en&6)!==0)throw Error(r(331));var V=en;if(en|=4,sS(T.current),tS(T,T.current,O,f),en=V,Lu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Me,T)}catch{}return!0}finally{Ee.p=_,re.T=p,xS(o,c)}}function wS(o,c,f){c=hs(f,c),c=Jm(o.stateNode,c,2),o=to(o,c,2),o!==null&&(Ns(o,2),ti(o))}function dn(o,c,f){if(o.tag===3)wS(o,o,f);else for(;c!==null;){if(c.tag===3){wS(c,o,f);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(uo===null||!uo.has(p))){o=hs(f,o),f=A1(2),p=to(c,f,2),p!==null&&(R1(f,p,c,o),Ns(p,2),ti(p));break}}c=c.return}}function Ey(o,c,f){var p=o.pingCache;if(p===null){p=o.pingCache=new bP;var _=new Set;p.set(c,_)}else _=p.get(c),_===void 0&&(_=new Set,p.set(c,_));_.has(f)||(gy=!0,_.add(f),o=SP.bind(null,o,c,f),c.then(o,o))}function SP(o,c,f){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,yn===o&&(Ft&f)===f&&(Rn===4||Rn===3&&(Ft&62914560)===Ft&&300>xn()-by?(en&2)===0&&Ol(o,0):my|=f,Nl===Ft&&(Nl=0)),ti(o)}function SS(o,c){c===0&&(c=ru()),o=gl(o,c),o!==null&&(Ns(o,c),ti(o))}function TP(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),SS(o,f)}function EP(o,c){var f=0;switch(o.tag){case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(c),SS(o,f)}function AP(o,c){return ct(o,c)}var id=null,Dl=null,Ay=!1,od=!1,Ry=!1,xa=0;function ti(o){o!==Dl&&o.next===null&&(Dl===null?id=Dl=o:Dl=Dl.next=o),od=!0,Ay||(Ay=!0,CP())}function Lu(o,c){if(!Ry&&od){Ry=!0;do for(var f=!1,p=id;p!==null;){if(o!==0){var _=p.pendingLanes;if(_===0)var T=0;else{var O=p.suspendedLanes,V=p.pingedLanes;T=(1<<31-dt(42|o)+1)-1,T&=_&~(O&~V),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,RS(p,T))}else T=Ft,T=Bn(p,p===yn?T:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(T&3)===0||jr(p,T)||(f=!0,RS(p,T));p=p.next}while(f);Ry=!1}}function RP(){TS()}function TS(){od=Ay=!1;var o=0;xa!==0&&(FP()&&(o=xa),xa=0);for(var c=xn(),f=null,p=id;p!==null;){var _=p.next,T=ES(p,c);T===0?(p.next=null,f===null?id=_:f.next=_,_===null&&(Dl=f)):(f=p,(o!==0||(T&3)!==0)&&(od=!0)),p=_}Lu(o)}function ES(o,c){for(var f=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var O=31-dt(T),V=1<<O,J=_[O];J===-1?((V&f)===0||(V&p)!==0)&&(_[O]=Yr(V,c)):J<=c&&(o.expiredLanes|=V),T&=~V}if(c=yn,f=Ft,f=Bn(o,o===c?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,f===0||o===c&&(tn===2||tn===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Xt(p),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||jr(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(p!==null&&Xt(p),j(f)){case 2:case 8:f=xi;break;case 32:f=lr;break;case 268435456:f=Ks;break;default:f=lr}return p=AS.bind(null,o),f=ct(f,p),o.callbackPriority=c,o.callbackNode=f,c}return p!==null&&p!==null&&Xt(p),o.callbackPriority=2,o.callbackNode=null,2}function AS(o,c){if(ur!==0&&ur!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(sd()&&o.callbackNode!==f)return null;var p=Ft;return p=Bn(o,o===yn?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(lS(o,p,c),ES(o,xn()),o.callbackNode!=null&&o.callbackNode===f?AS.bind(null,o):null)}function RS(o,c){if(sd())return null;lS(o,c,!0)}function CP(){BP(function(){(en&6)!==0?ct(fn,RP):TS()})}function Cy(){return xa===0&&(xa=ra()),xa}function CS(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:yh(""+o)}function kS(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function kP(o,c,f,p,_){if(c==="submit"&&f&&f.stateNode===_){var T=CS((_[E]||null).action),O=p.submitter;O&&(c=(c=O[E]||null)?CS(c.formAction):O.getAttribute("formAction"),c!==null&&(T=c,O=null));var V=new vh("action","action",null,p,_);o.push({event:V,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(xa!==0){var J=O?kS(_,O):new FormData(_);Ym(f,{pending:!0,data:J,method:_.method,action:T},null,J)}}else typeof T=="function"&&(V.preventDefault(),J=O?kS(_,O):new FormData(_),Ym(f,{pending:!0,data:J,method:_.method,action:T},T,J))},currentTarget:_}]})}}for(var ky=0;ky<dm.length;ky++){var Ny=dm[ky],NP=Ny.toLowerCase(),MP=Ny[0].toUpperCase()+Ny.slice(1);Is(NP,"on"+MP)}Is(lw,"onAnimationEnd"),Is(cw,"onAnimationIteration"),Is(uw,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(YO,"onTransitionRun"),Is(KO,"onTransitionStart"),Is(ZO,"onTransitionCancel"),Is(fw,"onTransitionEnd"),ft("onMouseEnter",["mouseout","mouseover"]),ft("onMouseLeave",["mouseout","mouseover"]),ft("onPointerEnter",["pointerout","pointerover"]),ft("onPointerLeave",["pointerout","pointerover"]),ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zu));function NS(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],_=p.event;p=p.listeners;e:{var T=void 0;if(c)for(var O=p.length-1;0<=O;O--){var V=p[O],J=V.instance,ve=V.currentTarget;if(V=V.listener,J!==T&&_.isPropagationStopped())break e;T=V,_.currentTarget=ve;try{T(_)}catch(Oe){Xh(Oe)}_.currentTarget=null,T=J}else for(O=0;O<p.length;O++){if(V=p[O],J=V.instance,ve=V.currentTarget,V=V.listener,J!==T&&_.isPropagationStopped())break e;T=V,_.currentTarget=ve;try{T(_)}catch(Oe){Xh(Oe)}_.currentTarget=null,T=J}}}}function Mt(o,c){var f=c[$];f===void 0&&(f=c[$]=new Set);var p=o+"__bubble";f.has(p)||(MS(c,o,2,!1),f.add(p))}function My(o,c,f){var p=0;c&&(p|=4),MS(f,o,p,c)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Iy(o){if(!o[ad]){o[ad]=!0,$e.forEach(function(f){f!=="selectionchange"&&(IP.has(f)||My(f,!1,o),My(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[ad]||(c[ad]=!0,My("selectionchange",!1,c))}}function MS(o,c,f,p){switch(tT(c)){case 2:var _=i4;break;case 8:_=o4;break;default:_=qy}f=_.bind(null,c,f,o),_=void 0,!em||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(c,f,{capture:!0,passive:_}):o.addEventListener(c,f,!0):_!==void 0?o.addEventListener(c,f,{passive:_}):o.addEventListener(c,f,!1)}function Oy(o,c,f,p,_){var T=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var V=p.stateNode.containerInfo;if(V===_)break;if(O===4)for(O=p.return;O!==null;){var J=O.tag;if((J===3||J===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;V!==null;){if(O=ze(V),O===null)return;if(J=O.tag,J===5||J===6||J===26||J===27){p=T=O;continue e}V=V.parentNode}}p=p.return}B0(function(){var ve=T,Oe=Gg(f),Fe=[];e:{var Se=hw.get(o);if(Se!==void 0){var Ae=vh,bt=o;switch(o){case"keypress":if(_h(f)===0)break e;case"keydown":case"keyup":Ae=AO;break;case"focusin":bt="focus",Ae=sm;break;case"focusout":bt="blur",Ae=sm;break;case"beforeblur":case"afterblur":Ae=sm;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=pO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=kO;break;case lw:case cw:case uw:Ae=yO;break;case fw:Ae=MO;break;case"scroll":case"scrollend":Ae=hO;break;case"wheel":Ae=OO;break;case"copy":case"cut":case"paste":Ae=_O;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=$0;break;case"toggle":case"beforetoggle":Ae=DO}var pt=(c&4)!==0,ln=!pt&&(o==="scroll"||o==="scrollend"),ge=pt?Se!==null?Se+"Capture":null:Se;pt=[];for(var ae=ve,_e;ae!==null;){var Pe=ae;if(_e=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||_e===null||ge===null||(Pe=ou(ae,ge),Pe!=null&&pt.push(Vu(ae,Pe,_e))),ln)break;ae=ae.return}0<pt.length&&(Se=new Ae(Se,bt,null,f,Oe),Fe.push({event:Se,listeners:pt}))}}if((c&7)===0){e:{if(Se=o==="mouseover"||o==="pointerover",Ae=o==="mouseout"||o==="pointerout",Se&&f!==Qg&&(bt=f.relatedTarget||f.fromElement)&&(ze(bt)||bt[L]))break e;if((Ae||Se)&&(Se=Oe.window===Oe?Oe:(Se=Oe.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ae?(bt=f.relatedTarget||f.toElement,Ae=ve,bt=bt?ze(bt):null,bt!==null&&(ln=i(bt),pt=bt.tag,bt!==ln||pt!==5&&pt!==27&&pt!==6)&&(bt=null)):(Ae=null,bt=ve),Ae!==bt)){if(pt=z0,Pe="onMouseLeave",ge="onMouseEnter",ae="mouse",(o==="pointerout"||o==="pointerover")&&(pt=$0,Pe="onPointerLeave",ge="onPointerEnter",ae="pointer"),ln=Ae==null?Se:Ie(Ae),_e=bt==null?Se:Ie(bt),Se=new pt(Pe,ae+"leave",Ae,f,Oe),Se.target=ln,Se.relatedTarget=_e,Pe=null,ze(Oe)===ve&&(pt=new pt(ge,ae+"enter",bt,f,Oe),pt.target=_e,pt.relatedTarget=ln,Pe=pt),ln=Pe,Ae&&bt)t:{for(pt=Ae,ge=bt,ae=0,_e=pt;_e;_e=Fl(_e))ae++;for(_e=0,Pe=ge;Pe;Pe=Fl(Pe))_e++;for(;0<ae-_e;)pt=Fl(pt),ae--;for(;0<_e-ae;)ge=Fl(ge),_e--;for(;ae--;){if(pt===ge||ge!==null&&pt===ge.alternate)break t;pt=Fl(pt),ge=Fl(ge)}pt=null}else pt=null;Ae!==null&&IS(Fe,Se,Ae,pt,!1),bt!==null&&ln!==null&&IS(Fe,ln,bt,pt,!0)}}e:{if(Se=ve?Ie(ve):window,Ae=Se.nodeName&&Se.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&Se.type==="file")var Je=Q0;else if(K0(Se))if(G0)Je=WO;else{Je=$O;var kt=VO}else Ae=Se.nodeName,!Ae||Ae.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?ve&&Zg(ve.elementType)&&(Je=Q0):Je=HO;if(Je&&(Je=Je(o,ve))){Z0(Fe,Je,f,Oe);break e}kt&&kt(o,Se,ve),o==="focusout"&&ve&&Se.type==="number"&&ve.memoizedProps.value!=null&&iu(Se,"number",Se.value)}switch(kt=ve?Ie(ve):window,o){case"focusin":(K0(kt)||kt.contentEditable==="true")&&(hl=kt,um=ve,pu=null);break;case"focusout":pu=um=hl=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,ow(Fe,f,Oe);break;case"selectionchange":if(XO)break;case"keydown":case"keyup":ow(Fe,f,Oe)}var it;if(om)e:{switch(o){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else fl?X0(o,f)&&(gt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(gt="onCompositionStart");gt&&(H0&&f.locale!=="ko"&&(fl||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&fl&&(it=U0()):(Qi=Oe,tm="value"in Qi?Qi.value:Qi.textContent,fl=!0)),kt=ld(ve,gt),0<kt.length&&(gt=new V0(gt,o,null,f,Oe),Fe.push({event:gt,listeners:kt}),it?gt.data=it:(it=Y0(f),it!==null&&(gt.data=it)))),(it=jO?BO(o,f):UO(o,f))&&(gt=ld(ve,"onBeforeInput"),0<gt.length&&(kt=new V0("onBeforeInput","beforeinput",null,f,Oe),Fe.push({event:kt,listeners:gt}),kt.data=it)),kP(Fe,o,ve,f,Oe)}NS(Fe,c)})}function Vu(o,c,f){return{instance:o,listener:c,currentTarget:f}}function ld(o,c){for(var f=c+"Capture",p=[];o!==null;){var _=o,T=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||T===null||(_=ou(o,f),_!=null&&p.unshift(Vu(o,_,T)),_=ou(o,c),_!=null&&p.push(Vu(o,_,T))),o.tag===3)return p;o=o.return}return[]}function Fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function IS(o,c,f,p,_){for(var T=c._reactName,O=[];f!==null&&f!==p;){var V=f,J=V.alternate,ve=V.stateNode;if(V=V.tag,J!==null&&J===p)break;V!==5&&V!==26&&V!==27||ve===null||(J=ve,_?(ve=ou(f,T),ve!=null&&O.unshift(Vu(f,ve,J))):_||(ve=ou(f,T),ve!=null&&O.push(Vu(f,ve,J)))),f=f.return}O.length!==0&&o.push({event:c,listeners:O})}var OP=/\r\n?/g,PP=/\u0000|\uFFFD/g;function OS(o){return(typeof o=="string"?o:""+o).replace(OP,`
`).replace(PP,"")}function PS(o,c){return c=OS(c),OS(o)===c}function cd(){}function an(o,c,f,p,_,T){switch(f){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||Zi(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&Zi(o,""+p);break;case"className":Be(o,"class",p);break;case"tabIndex":Be(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Be(o,f,p);break;case"style":F0(o,p,T);break;case"data":if(c!=="object"){Be(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=yh(""+p),o.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(c!=="input"&&an(o,c,"name",_.name,_,null),an(o,c,"formEncType",_.formEncType,_,null),an(o,c,"formMethod",_.formMethod,_,null),an(o,c,"formTarget",_.formTarget,_,null)):(an(o,c,"encType",_.encType,_,null),an(o,c,"method",_.method,_,null),an(o,c,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=yh(""+p),o.setAttribute(f,p);break;case"onClick":p!=null&&(o.onclick=cd);break;case"onScroll":p!=null&&Mt("scroll",o);break;case"onScrollEnd":p!=null&&Mt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}f=yh(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""+p):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":p===!0?o.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,p):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(f,p):o.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(f):o.setAttribute(f,p);break;case"popover":Mt("beforetoggle",o),Mt("toggle",o),le(o,"popover",p);break;case"xlinkActuate":qe(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":qe(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":qe(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":qe(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":qe(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":qe(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":qe(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":qe(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":qe(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":le(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=uO.get(f)||f,le(o,f,p))}}function Py(o,c,f,p,_,T){switch(f){case"style":F0(o,p,T);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof p=="string"?Zi(o,p):(typeof p=="number"||typeof p=="bigint")&&Zi(o,""+p);break;case"onScroll":p!=null&&Mt("scroll",o);break;case"onScrollEnd":p!=null&&Mt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),c=f.slice(2,_?f.length-7:void 0),T=o[E]||null,T=T!=null?T[f]:null,typeof T=="function"&&o.removeEventListener(c,T,_),typeof p=="function")){typeof T!="function"&&T!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,p,_);break e}f in o?o[f]=p:p===!0?o.setAttribute(f,""):le(o,f,p)}}}function fr(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",o),Mt("load",o);var p=!1,_=!1,T;for(T in f)if(f.hasOwnProperty(T)){var O=f[T];if(O!=null)switch(T){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:an(o,c,T,O,f,null)}}_&&an(o,c,"srcSet",f.srcSet,f,null),p&&an(o,c,"src",f.src,f,null);return;case"input":Mt("invalid",o);var V=T=O=_=null,J=null,ve=null;for(p in f)if(f.hasOwnProperty(p)){var Oe=f[p];if(Oe!=null)switch(p){case"name":_=Oe;break;case"type":O=Oe;break;case"checked":J=Oe;break;case"defaultChecked":ve=Oe;break;case"value":T=Oe;break;case"defaultValue":V=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,c));break;default:an(o,c,p,Oe,f,null)}}dh(o,T,V,J,ve,O,_,!1),vt(o);return;case"select":Mt("invalid",o),p=O=T=null;for(_ in f)if(f.hasOwnProperty(_)&&(V=f[_],V!=null))switch(_){case"value":T=V;break;case"defaultValue":O=V;break;case"multiple":p=V;default:an(o,c,_,V,f,null)}c=T,f=O,o.multiple=!!p,c!=null?Ki(o,!!p,c,!1):f!=null&&Ki(o,!!p,f,!0);return;case"textarea":Mt("invalid",o),T=_=p=null;for(O in f)if(f.hasOwnProperty(O)&&(V=f[O],V!=null))switch(O){case"value":p=V;break;case"defaultValue":_=V;break;case"children":T=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:an(o,c,O,V,f,null)}gh(o,p,_,T),vt(o);return;case"option":for(J in f)if(f.hasOwnProperty(J)&&(p=f[J],p!=null))switch(J){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:an(o,c,J,p,f,null)}return;case"dialog":Mt("beforetoggle",o),Mt("toggle",o),Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":Mt("load",o);break;case"video":case"audio":for(p=0;p<zu.length;p++)Mt(zu[p],o);break;case"image":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"embed":case"source":case"link":Mt("error",o),Mt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in f)if(f.hasOwnProperty(ve)&&(p=f[ve],p!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:an(o,c,ve,p,f,null)}return;default:if(Zg(c)){for(Oe in f)f.hasOwnProperty(Oe)&&(p=f[Oe],p!==void 0&&Py(o,c,Oe,p,f,void 0));return}}for(V in f)f.hasOwnProperty(V)&&(p=f[V],p!=null&&an(o,c,V,p,f,null))}function DP(o,c,f,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,T=null,O=null,V=null,J=null,ve=null,Oe=null;for(Ae in f){var Fe=f[Ae];if(f.hasOwnProperty(Ae)&&Fe!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":J=Fe;default:p.hasOwnProperty(Ae)||an(o,c,Ae,null,p,Fe)}}for(var Se in p){var Ae=p[Se];if(Fe=f[Se],p.hasOwnProperty(Se)&&(Ae!=null||Fe!=null))switch(Se){case"type":T=Ae;break;case"name":_=Ae;break;case"checked":ve=Ae;break;case"defaultChecked":Oe=Ae;break;case"value":O=Ae;break;case"defaultValue":V=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,c));break;default:Ae!==Fe&&an(o,c,Se,Ae,p,Fe)}}su(o,O,V,J,ve,Oe,T,_);return;case"select":Ae=O=V=Se=null;for(T in f)if(J=f[T],f.hasOwnProperty(T)&&J!=null)switch(T){case"value":break;case"multiple":Ae=J;default:p.hasOwnProperty(T)||an(o,c,T,null,p,J)}for(_ in p)if(T=p[_],J=f[_],p.hasOwnProperty(_)&&(T!=null||J!=null))switch(_){case"value":Se=T;break;case"defaultValue":V=T;break;case"multiple":O=T;default:T!==J&&an(o,c,_,T,p,J)}c=V,f=O,p=Ae,Se!=null?Ki(o,!!f,Se,!1):!!p!=!!f&&(c!=null?Ki(o,!!f,c,!0):Ki(o,!!f,f?[]:"",!1));return;case"textarea":Ae=Se=null;for(V in f)if(_=f[V],f.hasOwnProperty(V)&&_!=null&&!p.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:an(o,c,V,null,p,_)}for(O in p)if(_=p[O],T=f[O],p.hasOwnProperty(O)&&(_!=null||T!=null))switch(O){case"value":Se=_;break;case"defaultValue":Ae=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==T&&an(o,c,O,_,p,T)}ph(o,Se,Ae);return;case"option":for(var bt in f)if(Se=f[bt],f.hasOwnProperty(bt)&&Se!=null&&!p.hasOwnProperty(bt))switch(bt){case"selected":o.selected=!1;break;default:an(o,c,bt,null,p,Se)}for(J in p)if(Se=p[J],Ae=f[J],p.hasOwnProperty(J)&&Se!==Ae&&(Se!=null||Ae!=null))switch(J){case"selected":o.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:an(o,c,J,Se,p,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in f)Se=f[pt],f.hasOwnProperty(pt)&&Se!=null&&!p.hasOwnProperty(pt)&&an(o,c,pt,null,p,Se);for(ve in p)if(Se=p[ve],Ae=f[ve],p.hasOwnProperty(ve)&&Se!==Ae&&(Se!=null||Ae!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,c));break;default:an(o,c,ve,Se,p,Ae)}return;default:if(Zg(c)){for(var ln in f)Se=f[ln],f.hasOwnProperty(ln)&&Se!==void 0&&!p.hasOwnProperty(ln)&&Py(o,c,ln,void 0,p,Se);for(Oe in p)Se=p[Oe],Ae=f[Oe],!p.hasOwnProperty(Oe)||Se===Ae||Se===void 0&&Ae===void 0||Py(o,c,Oe,Se,p,Ae);return}}for(var ge in f)Se=f[ge],f.hasOwnProperty(ge)&&Se!=null&&!p.hasOwnProperty(ge)&&an(o,c,ge,null,p,Se);for(Fe in p)Se=p[Fe],Ae=f[Fe],!p.hasOwnProperty(Fe)||Se===Ae||Se==null&&Ae==null||an(o,c,Fe,Se,p,Ae)}var Dy=null,Fy=null;function ud(o){return o.nodeType===9?o:o.ownerDocument}function DS(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FS(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function jy(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var By=null;function FP(){var o=window.event;return o&&o.type==="popstate"?o===By?!1:(By=o,!0):(By=null,!1)}var jS=typeof setTimeout=="function"?setTimeout:void 0,jP=typeof clearTimeout=="function"?clearTimeout:void 0,BS=typeof Promise=="function"?Promise:void 0,BP=typeof queueMicrotask=="function"?queueMicrotask:typeof BS<"u"?function(o){return BS.resolve(null).then(o).catch(UP)}:jS;function UP(o){setTimeout(function(){throw o})}function po(o){return o==="head"}function US(o,c){var f=c,p=0,_=0;do{var T=f.nextSibling;if(o.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<p&&8>p){f=p;var O=o.ownerDocument;if(f&1&&$u(O.documentElement),f&2&&$u(O.body),f&4)for(f=O.head,$u(f),O=f.firstChild;O;){var V=O.nextSibling,J=O.nodeName;O[ee]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&O.rel.toLowerCase()==="stylesheet"||f.removeChild(O),O=V}}if(_===0){o.removeChild(T),Qu(c);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=T}while(f);Qu(c)}function Uy(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Uy(f),Ne(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function LP(o,c,f,p){for(;o.nodeType===1;){var _=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[ee])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var T=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Ps(o.nextSibling),o===null)break}return null}function zP(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Ps(o.nextSibling),o===null))return null;return o}function Ly(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function VP(o,c){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")c();else{var p=function(){c(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Ps(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var zy=null;function LS(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function zS(o,c,f){switch(c=ud(f),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function $u(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Ne(o)}var bs=new Map,VS=new Set;function fd(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Pi=Ee.d;Ee.d={f:$P,r:HP,D:WP,C:qP,L:XP,m:YP,X:ZP,S:KP,M:QP};function $P(){var o=Pi.f(),c=nd();return o||c}function HP(o){var c=Te(o);c!==null&&c.tag===5&&c.type==="form"?l1(c):Pi.r(o)}var jl=typeof document>"u"?null:document;function $S(o,c,f){var p=jl;if(p&&typeof c=="string"&&c){var _=zt(c);_='link[rel="'+o+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),VS.has(_)||(VS.add(_),o={rel:o,crossOrigin:f,href:c},p.querySelector(_)===null&&(c=p.createElement("link"),fr(c,"link",o),te(c),p.head.appendChild(c)))}}function WP(o){Pi.D(o),$S("dns-prefetch",o,null)}function qP(o,c){Pi.C(o,c),$S("preconnect",o,c)}function XP(o,c,f){Pi.L(o,c,f);var p=jl;if(p&&o&&c){var _='link[rel="preload"][as="'+zt(c)+'"]';c==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+zt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+zt(f.imageSizes)+'"]')):_+='[href="'+zt(o)+'"]';var T=_;switch(c){case"style":T=Bl(o);break;case"script":T=Ul(o)}bs.has(T)||(o=d({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),bs.set(T,o),p.querySelector(_)!==null||c==="style"&&p.querySelector(Hu(T))||c==="script"&&p.querySelector(Wu(T))||(c=p.createElement("link"),fr(c,"link",o),te(c),p.head.appendChild(c)))}}function YP(o,c){Pi.m(o,c);var f=jl;if(f&&o){var p=c&&typeof c.as=="string"?c.as:"script",_='link[rel="modulepreload"][as="'+zt(p)+'"][href="'+zt(o)+'"]',T=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ul(o)}if(!bs.has(T)&&(o=d({rel:"modulepreload",href:o},c),bs.set(T,o),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Wu(T)))return}p=f.createElement("link"),fr(p,"link",o),te(p),f.head.appendChild(p)}}}function KP(o,c,f){Pi.S(o,c,f);var p=jl;if(p&&o){var _=Xe(p).hoistableStyles,T=Bl(o);c=c||"default";var O=_.get(T);if(!O){var V={loading:0,preload:null};if(O=p.querySelector(Hu(T)))V.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":c},f),(f=bs.get(T))&&Vy(o,f);var J=O=p.createElement("link");te(J),fr(J,"link",o),J._p=new Promise(function(ve,Oe){J.onload=ve,J.onerror=Oe}),J.addEventListener("load",function(){V.loading|=1}),J.addEventListener("error",function(){V.loading|=2}),V.loading|=4,hd(O,c,p)}O={type:"stylesheet",instance:O,count:1,state:V},_.set(T,O)}}}function ZP(o,c){Pi.X(o,c);var f=jl;if(f&&o){var p=Xe(f).hoistableScripts,_=Ul(o),T=p.get(_);T||(T=f.querySelector(Wu(_)),T||(o=d({src:o,async:!0},c),(c=bs.get(_))&&$y(o,c),T=f.createElement("script"),te(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(_,T))}}function QP(o,c){Pi.M(o,c);var f=jl;if(f&&o){var p=Xe(f).hoistableScripts,_=Ul(o),T=p.get(_);T||(T=f.querySelector(Wu(_)),T||(o=d({src:o,async:!0,type:"module"},c),(c=bs.get(_))&&$y(o,c),T=f.createElement("script"),te(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(_,T))}}function HS(o,c,f,p){var _=(_=ke.current)?fd(_):null;if(!_)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Bl(f.href),f=Xe(_).hoistableStyles,p=f.get(c),p||(p={type:"style",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Bl(f.href);var T=Xe(_).hoistableStyles,O=T.get(o);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,O),(T=_.querySelector(Hu(o)))&&!T._p&&(O.instance=T,O.state.loading=5),bs.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},bs.set(o,f),T||GP(_,o,f,O.state))),c&&p===null)throw Error(r(528,""));return O}if(c&&p!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Ul(f),f=Xe(_).hoistableScripts,p=f.get(c),p||(p={type:"script",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Bl(o){return'href="'+zt(o)+'"'}function Hu(o){return'link[rel="stylesheet"]['+o+"]"}function WS(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function GP(o,c,f,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),fr(c,"link",f),te(c),o.head.appendChild(c))}function Ul(o){return'[src="'+zt(o)+'"]'}function Wu(o){return"script[async]"+o}function qS(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+zt(f.href)+'"]');if(p)return c.instance=p,te(p),p;var _=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),te(p),fr(p,"style",_),hd(p,f.precedence,o),c.instance=p;case"stylesheet":_=Bl(f.href);var T=o.querySelector(Hu(_));if(T)return c.state.loading|=4,c.instance=T,te(T),T;p=WS(f),(_=bs.get(_))&&Vy(p,_),T=(o.ownerDocument||o).createElement("link"),te(T);var O=T;return O._p=new Promise(function(V,J){O.onload=V,O.onerror=J}),fr(T,"link",p),c.state.loading|=4,hd(T,f.precedence,o),c.instance=T;case"script":return T=Ul(f.src),(_=o.querySelector(Wu(T)))?(c.instance=_,te(_),_):(p=f,(_=bs.get(T))&&(p=d({},f),$y(p,_)),o=o.ownerDocument||o,_=o.createElement("script"),te(_),fr(_,"link",p),o.head.appendChild(_),c.instance=_);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,hd(p,f.precedence,o));return c.instance}function hd(o,c,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,T=_,O=0;O<p.length;O++){var V=p[O];if(V.dataset.precedence===c)T=V;else if(T!==_)break}T?T.parentNode.insertBefore(o,T.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function Vy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function $y(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var dd=null;function XS(o,c,f){if(dd===null){var p=new Map,_=dd=new Map;_.set(f,p)}else _=dd,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(o))return p;for(p.set(o,null),f=f.getElementsByTagName(o),_=0;_<f.length;_++){var T=f[_];if(!(T[ee]||T[v]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var O=T.getAttribute(c)||"";O=o+O;var V=p.get(O);V?V.push(T):p.set(O,[T])}}return p}function YS(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function JP(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function KS(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var qu=null;function e4(){}function t4(o,c,f){if(qu===null)throw Error(r(475));var p=qu;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=Bl(f.href),T=o.querySelector(Hu(_));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=pd.bind(p),o.then(p,p)),c.state.loading|=4,c.instance=T,te(T);return}T=o.ownerDocument||o,f=WS(f),(_=bs.get(_))&&Vy(f,_),T=T.createElement("link"),te(T);var O=T;O._p=new Promise(function(V,J){O.onload=V,O.onerror=J}),fr(T,"link",f),c.instance=T}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=pd.bind(p),o.addEventListener("load",c),o.addEventListener("error",c))}}function n4(){if(qu===null)throw Error(r(475));var o=qu;return o.stylesheets&&o.count===0&&Hy(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&Hy(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function pd(){if(this.count--,this.count===0){if(this.stylesheets)Hy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var gd=null;function Hy(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,gd=new Map,c.forEach(r4,o),gd=null,pd.call(o))}function r4(o,c){if(!(c.state.loading&4)){var f=gd.get(o);if(f)var p=f.get(null);else{f=new Map,gd.set(o,f);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<_.length;T++){var O=_[T];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),p=O)}p&&f.set(null,p)}_=c.instance,O=_.getAttribute("data-precedence"),T=f.get(O)||p,T===p&&f.set(null,_),f.set(O,_),this.count++,p=pd.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),T?T.parentNode.insertBefore(_,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),c.state.loading|=4}}var Xu={$$typeof:k,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function s4(o,c,f,p,_,T,O,V){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ll(0),this.hiddenUpdates=ll(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=T,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function ZS(o,c,f,p,_,T,O,V,J,ve,Oe,Fe){return o=new s4(o,c,f,O,V,J,ve,Fe),c=1,T===!0&&(c|=24),T=Qr(3,null,null,c),o.current=T,T.stateNode=o,c=Em(),c.refCount++,o.pooledCache=c,c.refCount++,T.memoizedState={element:p,isDehydrated:f,cache:c},km(T),o}function QS(o){return o?(o=ml,o):ml}function GS(o,c,f,p,_,T){_=QS(_),p.context===null?p.context=_:p.pendingContext=_,p=eo(c),p.payload={element:f},T=T===void 0?null:T,T!==null&&(p.callback=T),f=to(o,p,c),f!==null&&(ns(f,o,c),Su(f,o,c))}function JS(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Wy(o,c){JS(o,c),(o=o.alternate)&&JS(o,c)}function eT(o){if(o.tag===13){var c=gl(o,67108864);c!==null&&ns(c,o,67108864),Wy(o,67108864)}}var md=!0;function i4(o,c,f,p){var _=re.T;re.T=null;var T=Ee.p;try{Ee.p=2,qy(o,c,f,p)}finally{Ee.p=T,re.T=_}}function o4(o,c,f,p){var _=re.T;re.T=null;var T=Ee.p;try{Ee.p=8,qy(o,c,f,p)}finally{Ee.p=T,re.T=_}}function qy(o,c,f,p){if(md){var _=Xy(p);if(_===null)Oy(o,c,p,yd,f),nT(o,p);else if(l4(_,o,c,f,p))p.stopPropagation();else if(nT(o,p),c&4&&-1<a4.indexOf(o)){for(;_!==null;){var T=Te(_);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var O=Cr(T.pendingLanes);if(O!==0){var V=T;for(V.pendingLanes|=2,V.entangledLanes|=2;O;){var J=1<<31-dt(O);V.entanglements[1]|=J,O&=~J}ti(T),(en&6)===0&&(ed=xn()+500,Lu(0))}}break;case 13:V=gl(T,2),V!==null&&ns(V,T,2),nd(),Wy(T,2)}if(T=Xy(p),T===null&&Oy(o,c,p,yd,f),T===_)break;_=T}_!==null&&p.stopPropagation()}else Oy(o,c,p,null,f)}}function Xy(o){return o=Gg(o),Yy(o)}var yd=null;function Yy(o){if(yd=null,o=ze(o),o!==null){var c=i(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=a(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return yd=o,null}function tT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tn()){case fn:return 2;case xi:return 8;case lr:case mr:return 32;case Ks:return 268435456;default:return 32}default:return 32}}var Ky=!1,go=null,mo=null,yo=null,Yu=new Map,Ku=new Map,bo=[],a4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nT(o,c){switch(o){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":Yu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(c.pointerId)}}function Zu(o,c,f,p,_,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:f,eventSystemFlags:p,nativeEvent:T,targetContainers:[_]},c!==null&&(c=Te(c),c!==null&&eT(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),o)}function l4(o,c,f,p,_){switch(c){case"focusin":return go=Zu(go,o,c,f,p,_),!0;case"dragenter":return mo=Zu(mo,o,c,f,p,_),!0;case"mouseover":return yo=Zu(yo,o,c,f,p,_),!0;case"pointerover":var T=_.pointerId;return Yu.set(T,Zu(Yu.get(T)||null,o,c,f,p,_)),!0;case"gotpointercapture":return T=_.pointerId,Ku.set(T,Zu(Ku.get(T)||null,o,c,f,p,_)),!0}return!1}function rT(o){var c=ze(o.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=a(f),c!==null){o.blockedOn=c,x(o.priority,function(){if(f.tag===13){var p=ts();p=Yi(p);var _=gl(f,p);_!==null&&ns(_,f,p),Wy(f,p)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bd(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=Xy(o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);Qg=p,f.target.dispatchEvent(p),Qg=null}else return c=Te(f),c!==null&&eT(c),o.blockedOn=f,!1;c.shift()}return!0}function sT(o,c,f){bd(o)&&f.delete(c)}function c4(){Ky=!1,go!==null&&bd(go)&&(go=null),mo!==null&&bd(mo)&&(mo=null),yo!==null&&bd(yo)&&(yo=null),Yu.forEach(sT),Ku.forEach(sT)}function _d(o,c){o.blockedOn===c&&(o.blockedOn=null,Ky||(Ky=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,c4)))}var xd=null;function iT(o){xd!==o&&(xd=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xd===o&&(xd=null);for(var c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],_=o[c+2];if(typeof p!="function"){if(Yy(p||f)===null)continue;break}var T=Te(f);T!==null&&(o.splice(c,3),c-=3,Ym(T,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function Qu(o){function c(J){return _d(J,o)}go!==null&&_d(go,o),mo!==null&&_d(mo,o),yo!==null&&_d(yo,o),Yu.forEach(c),Ku.forEach(c);for(var f=0;f<bo.length;f++){var p=bo[f];p.blockedOn===o&&(p.blockedOn=null)}for(;0<bo.length&&(f=bo[0],f.blockedOn===null);)rT(f),f.blockedOn===null&&bo.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],T=f[p+1],O=_[E]||null;if(typeof T=="function")O||iT(f);else if(O){var V=null;if(T&&T.hasAttribute("formAction")){if(_=T,O=T[E]||null)V=O.formAction;else if(Yy(_)!==null)continue}else V=O.action;typeof V=="function"?f[p+1]=V:(f.splice(p,3),p-=3),iT(f)}}}function Zy(o){this._internalRoot=o}vd.prototype.render=Zy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,p=ts();GS(f,p,o,c,null,null)},vd.prototype.unmount=Zy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;GS(o.current,2,null,o,null,null),nd(),c[L]=null}};function vd(o){this._internalRoot=o}vd.prototype.unstable_scheduleHydration=function(o){if(o){var c=S();o={blockedOn:null,target:o,priority:c};for(var f=0;f<bo.length&&c!==0&&c<bo[f].priority;f++);bo.splice(f,0,o),f===0&&rT(o)}};var oT=e.version;if(oT!=="19.1.0")throw Error(r(527,oT,"19.1.0"));Ee.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var u4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Me=wd.inject(u4),Le=wd}catch{}}return Ju.createRoot=function(o,c){if(!s(o))throw Error(r(299));var f=!1,p="",_=w1,T=S1,O=T1,V=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(V=c.unstable_transitionCallbacks)),c=ZS(o,1,!1,null,null,f,p,_,T,O,V,null),o[L]=c.current,Iy(o),new Zy(c)},Ju.hydrateRoot=function(o,c,f){if(!s(o))throw Error(r(299));var p=!1,_="",T=w1,O=S1,V=T1,J=null,ve=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(J=f.unstable_transitionCallbacks),f.formState!==void 0&&(ve=f.formState)),c=ZS(o,1,!0,c,f??null,p,_,T,O,V,J,ve),c.context=QS(null),f=c.current,p=ts(),p=Yi(p),_=eo(p),_.callback=null,to(f,_,p),f=p,c.current.lanes=f,Ns(c,f),ti(c),o[L]=c.current,Iy(o),new vd(c)},Ju.version="19.1.0",Ju}var bT;function w4(){if(bT)return eb.exports;bT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eb.exports=v4(),eb.exports}var S4=w4(),Wc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wa=typeof window>"u"||"Deno"in globalThis;function Pr(){}function T4(t,e){return typeof t=="function"?t(e):t}function v_(t){return typeof t=="number"&&t>=0&&t!==1/0}function M3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Yo(t,e){return typeof t=="function"?t(e):t}function Vs(t,e){return typeof t=="function"?t(e):t}function _T(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==ov(a,e.options))return!1}else if(!Of(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function xT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(qa(e.options.mutationKey)!==qa(i))return!1}else if(!Of(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function ov(t,e){return((e==null?void 0:e.queryKeyHashFn)||qa)(t)}function qa(t){return JSON.stringify(t,(e,n)=>w_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Of(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Of(t[n],e[n])):!1}function I3(t,e){if(t===e)return t;const n=vT(t)&&vT(e);if(n||w_(t)&&w_(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{},u=new Set(r);let h=0;for(let d=0;d<a;d++){const g=n?d:i[d];(!n&&u.has(g)||n)&&t[g]===void 0&&e[g]===void 0?(l[g]=void 0,h++):(l[g]=I3(t[g],e[g]),l[g]===t[g]&&t[g]!==void 0&&h++)}return s===a&&h===s?t:l}return e}function yp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function vT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function w_(t){if(!wT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wT(t){return Object.prototype.toString.call(t)==="[object Object]"}function E4(t){return new Promise(e=>{setTimeout(e,t)})}function S_(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?I3(t,e):e}function A4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function R4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var av=Symbol();function O3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===av?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function P3(t,e){return typeof t=="function"?t(...e):!!t}var Ia,Po,bc,b3,C4=(b3=class extends Wc{constructor(){super();lt(this,Ia);lt(this,Po);lt(this,bc);Qe(this,bc,e=>{if(!Wa&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){se(this,Po)||this.setEventListener(se(this,bc))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Po))==null||e.call(this),Qe(this,Po,void 0))}setEventListener(e){var n;Qe(this,bc,e),(n=se(this,Po))==null||n.call(this),Qe(this,Po,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){se(this,Ia)!==e&&(Qe(this,Ia,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof se(this,Ia)=="boolean"?se(this,Ia):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ia=new WeakMap,Po=new WeakMap,bc=new WeakMap,b3),lv=new C4,_c,Do,xc,_3,k4=(_3=class extends Wc{constructor(){super();lt(this,_c,!0);lt(this,Do);lt(this,xc);Qe(this,xc,e=>{if(!Wa&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){se(this,Do)||this.setEventListener(se(this,xc))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Do))==null||e.call(this),Qe(this,Do,void 0))}setEventListener(e){var n;Qe(this,xc,e),(n=se(this,Do))==null||n.call(this),Qe(this,Do,e(this.setOnline.bind(this)))}setOnline(e){se(this,_c)!==e&&(Qe(this,_c,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return se(this,_c)}},_c=new WeakMap,Do=new WeakMap,xc=new WeakMap,_3),bp=new k4;function T_(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function N4(t){return Math.min(1e3*2**t,3e4)}function D3(t){return(t??"online")==="online"?bp.isOnline():!0}var F3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sb(t){return t instanceof F3}function j3(t){let e=!1,n=0,r=!1,s;const i=T_(),a=A=>{var C;r||(b(new F3(A)),(C=t.abort)==null||C.call(t))},l=()=>{e=!0},u=()=>{e=!1},h=()=>lv.isFocused()&&(t.networkMode==="always"||bp.isOnline())&&t.canRun(),d=()=>D3(t.networkMode)&&t.canRun(),g=A=>{var C;r||(r=!0,(C=t.onSuccess)==null||C.call(t,A),s==null||s(),i.resolve(A))},b=A=>{var C;r||(r=!0,(C=t.onError)==null||C.call(t,A),s==null||s(),i.reject(A))},w=()=>new Promise(A=>{var C;s=M=>{(r||h())&&A(M)},(C=t.onPause)==null||C.call(t)}).then(()=>{var A;s=void 0,r||(A=t.onContinue)==null||A.call(t)}),R=()=>{if(r)return;let A;const C=n===0?t.initialPromise:void 0;try{A=C??t.fn()}catch(M){A=Promise.reject(M)}Promise.resolve(A).then(g).catch(M=>{var P;if(r)return;const N=t.retry??(Wa?0:3),k=t.retryDelay??N4,F=typeof k=="function"?k(n,M):k,B=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,M);if(e||!B){b(M);return}n++,(P=t.onFail)==null||P.call(t,n,M),E4(F).then(()=>h()?void 0:w()).then(()=>{e?b(M):R()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:u,canStart:d,start:()=>(d()?R():w().then(R),i)}}var M4=t=>setTimeout(t,0);function I4(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=M4;const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var tr=I4(),Oa,x3,B3=(x3=class{constructor(){lt(this,Oa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v_(this.gcTime)&&Qe(this,Oa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wa?1/0:5*60*1e3))}clearGcTimeout(){se(this,Oa)&&(clearTimeout(se(this,Oa)),Qe(this,Oa,void 0))}},Oa=new WeakMap,x3),vc,wc,_s,Pa,wr,Zf,Da,Us,Fi,v3,O4=(v3=class extends B3{constructor(e){super();lt(this,Us);lt(this,vc);lt(this,wc);lt(this,_s);lt(this,Pa);lt(this,wr);lt(this,Zf);lt(this,Da);Qe(this,Da,!1),Qe(this,Zf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Qe(this,Pa,e.client),Qe(this,_s,se(this,Pa).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Qe(this,vc,P4(this.options)),this.state=e.state??se(this,vc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=se(this,wr))==null?void 0:e.promise}setOptions(e){this.options={...se(this,Zf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&se(this,_s).remove(this)}setData(e,n){const r=S_(this.state.data,e,this.options);return xt(this,Us,Fi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){xt(this,Us,Fi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=se(this,wr))==null?void 0:r.promise;return(s=se(this,wr))==null||s.cancel(e),n?n.then(Pr).catch(Pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(se(this,vc))}isActive(){return this.observers.some(e=>Vs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===av||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Yo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!M3(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=se(this,wr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=se(this,wr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),se(this,_s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(se(this,wr)&&(se(this,Da)?se(this,wr).cancel({revert:!0}):se(this,wr).cancelRetry()),this.scheduleGc()),se(this,_s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xt(this,Us,Fi).call(this,{type:"invalidate"})}fetch(e,n){var h,d,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(se(this,wr))return se(this,wr).continueRetry(),se(this,wr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(w=>w.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Qe(this,Da,!0),r.signal)})},i=()=>{const b=O3(this.options,n),R=(()=>{const A={client:se(this,Pa),queryKey:this.queryKey,meta:this.meta};return s(A),A})();return Qe(this,Da,!1),this.options.persister?this.options.persister(b,R,this):b(R)},l=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:se(this,Pa),state:this.state,fetchFn:i};return s(b),b})();(h=this.options.behavior)==null||h.onFetch(l,this),Qe(this,wc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&xt(this,Us,Fi).call(this,{type:"fetch",meta:(g=l.fetchOptions)==null?void 0:g.meta});const u=b=>{var w,R,A,C;sb(b)&&b.silent||xt(this,Us,Fi).call(this,{type:"error",error:b}),sb(b)||((R=(w=se(this,_s).config).onError)==null||R.call(w,b,this),(C=(A=se(this,_s).config).onSettled)==null||C.call(A,this.state.data,b,this)),this.scheduleGc()};return Qe(this,wr,j3({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:b=>{var w,R,A,C;if(b===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(M){u(M);return}(R=(w=se(this,_s).config).onSuccess)==null||R.call(w,b,this),(C=(A=se(this,_s).config).onSettled)==null||C.call(A,b,this.state.error,this),this.scheduleGc()},onError:u,onFail:(b,w)=>{xt(this,Us,Fi).call(this,{type:"failed",failureCount:b,error:w})},onPause:()=>{xt(this,Us,Fi).call(this,{type:"pause"})},onContinue:()=>{xt(this,Us,Fi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),se(this,wr).start()}},vc=new WeakMap,wc=new WeakMap,_s=new WeakMap,Pa=new WeakMap,wr=new WeakMap,Zf=new WeakMap,Da=new WeakMap,Us=new WeakSet,Fi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...U3(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return sb(s)&&s.revert&&se(this,wc)?{...se(this,wc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),tr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),se(this,_s).notify({query:this,type:"updated",action:e})})},v3);function U3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:D3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function P4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var oi,w3,D4=(w3=class extends Wc{constructor(e={}){super();lt(this,oi);this.config=e,Qe(this,oi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??ov(s,n);let a=this.get(i);return a||(a=new O4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){se(this,oi).has(e.queryHash)||(se(this,oi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=se(this,oi).get(e.queryHash);n&&(e.destroy(),n===e&&se(this,oi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return se(this,oi).get(e)}getAll(){return[...se(this,oi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>_T(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>_T(e,r)):n}notify(e){tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){tr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},oi=new WeakMap,w3),ai,Ir,Fa,li,Ro,S3,F4=(S3=class extends B3{constructor(e){super();lt(this,li);lt(this,ai);lt(this,Ir);lt(this,Fa);this.mutationId=e.mutationId,Qe(this,Ir,e.mutationCache),Qe(this,ai,[]),this.state=e.state||L3(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){se(this,ai).includes(e)||(se(this,ai).push(e),this.clearGcTimeout(),se(this,Ir).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Qe(this,ai,se(this,ai).filter(n=>n!==e)),this.scheduleGc(),se(this,Ir).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){se(this,ai).length||(this.state.status==="pending"?this.scheduleGc():se(this,Ir).remove(this))}continue(){var e;return((e=se(this,Fa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,u,h,d,g,b,w,R,A,C,M,N,k,F,B,P,X,Y;const n=()=>{xt(this,li,Ro).call(this,{type:"continue"})};Qe(this,Fa,j3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(G,K)=>{xt(this,li,Ro).call(this,{type:"failed",failureCount:G,error:K})},onPause:()=>{xt(this,li,Ro).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>se(this,Ir).canRun(this)}));const r=this.state.status==="pending",s=!se(this,Fa).canStart();try{if(r)n();else{xt(this,li,Ro).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=se(this,Ir).config).onMutate)==null?void 0:a.call(i,e,this));const K=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e));K!==this.state.context&&xt(this,li,Ro).call(this,{type:"pending",context:K,variables:e,isPaused:s})}const G=await se(this,Fa).start();return await((d=(h=se(this,Ir).config).onSuccess)==null?void 0:d.call(h,G,e,this.state.context,this)),await((b=(g=this.options).onSuccess)==null?void 0:b.call(g,G,e,this.state.context)),await((R=(w=se(this,Ir).config).onSettled)==null?void 0:R.call(w,G,null,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,G,null,e,this.state.context)),xt(this,li,Ro).call(this,{type:"success",data:G}),G}catch(G){try{throw await((N=(M=se(this,Ir).config).onError)==null?void 0:N.call(M,G,e,this.state.context,this)),await((F=(k=this.options).onError)==null?void 0:F.call(k,G,e,this.state.context)),await((P=(B=se(this,Ir).config).onSettled)==null?void 0:P.call(B,void 0,G,this.state.variables,this.state.context,this)),await((Y=(X=this.options).onSettled)==null?void 0:Y.call(X,void 0,G,e,this.state.context)),G}finally{xt(this,li,Ro).call(this,{type:"error",error:G})}}finally{se(this,Ir).runNext(this)}}},ai=new WeakMap,Ir=new WeakMap,Fa=new WeakMap,li=new WeakSet,Ro=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tr.batch(()=>{se(this,ai).forEach(r=>{r.onMutationUpdate(e)}),se(this,Ir).notify({mutation:this,type:"updated",action:e})})},S3);function L3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ui,Ls,Qf,T3,j4=(T3=class extends Wc{constructor(e={}){super();lt(this,Ui);lt(this,Ls);lt(this,Qf);this.config=e,Qe(this,Ui,new Set),Qe(this,Ls,new Map),Qe(this,Qf,0)}build(e,n,r){const s=new F4({mutationCache:this,mutationId:++Sd(this,Qf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){se(this,Ui).add(e);const n=Td(e);if(typeof n=="string"){const r=se(this,Ls).get(n);r?r.push(e):se(this,Ls).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(se(this,Ui).delete(e)){const n=Td(e);if(typeof n=="string"){const r=se(this,Ls).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&se(this,Ls).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Td(e);if(typeof n=="string"){const r=se(this,Ls).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Td(e);if(typeof n=="string"){const s=(r=se(this,Ls).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tr.batch(()=>{se(this,Ui).forEach(e=>{this.notify({type:"removed",mutation:e})}),se(this,Ui).clear(),se(this,Ls).clear()})}getAll(){return Array.from(se(this,Ui))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>xT(n,r))}findAll(e={}){return this.getAll().filter(n=>xT(e,n))}notify(e){tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return tr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Pr))))}},Ui=new WeakMap,Ls=new WeakMap,Qf=new WeakMap,T3);function Td(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ST(t){return{onFetch:(e,n)=>{var d,g,b,w,R;const r=e.options,s=(b=(g=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:g.fetchMore)==null?void 0:b.direction,i=((w=e.state.data)==null?void 0:w.pages)||[],a=((R=e.state.data)==null?void 0:R.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let A=!1;const C=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?A=!0:e.signal.addEventListener("abort",()=>{A=!0}),e.signal)})},M=O3(e.options,e.fetchOptions),N=async(k,F,B)=>{if(A)return Promise.reject();if(F==null&&k.pages.length)return Promise.resolve(k);const X=(()=>{const Q={client:e.client,queryKey:e.queryKey,pageParam:F,direction:B?"backward":"forward",meta:e.options.meta};return C(Q),Q})(),Y=await M(X),{maxPages:G}=e.options,K=B?R4:A4;return{pages:K(k.pages,Y,G),pageParams:K(k.pageParams,F,G)}};if(s&&i.length){const k=s==="backward",F=k?B4:TT,B={pages:i,pageParams:a},P=F(r,B);l=await N(B,P,k)}else{const k=t??i.length;do{const F=u===0?a[0]??r.initialPageParam:TT(r,l);if(u>0&&F==null)break;l=await N(l,F),u++}while(u<k)}return l};e.options.persister?e.fetchFn=()=>{var A,C;return(C=(A=e.options).persister)==null?void 0:C.call(A,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function TT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function B4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var kn,Fo,jo,Sc,Tc,Bo,Ec,Ac,E3,z3=(E3=class{constructor(t={}){lt(this,kn);lt(this,Fo);lt(this,jo);lt(this,Sc);lt(this,Tc);lt(this,Bo);lt(this,Ec);lt(this,Ac);Qe(this,kn,t.queryCache||new D4),Qe(this,Fo,t.mutationCache||new j4),Qe(this,jo,t.defaultOptions||{}),Qe(this,Sc,new Map),Qe(this,Tc,new Map),Qe(this,Bo,0)}mount(){Sd(this,Bo)._++,se(this,Bo)===1&&(Qe(this,Ec,lv.subscribe(async t=>{t&&(await this.resumePausedMutations(),se(this,kn).onFocus())})),Qe(this,Ac,bp.subscribe(async t=>{t&&(await this.resumePausedMutations(),se(this,kn).onOnline())})))}unmount(){var t,e;Sd(this,Bo)._--,se(this,Bo)===0&&((t=se(this,Ec))==null||t.call(this),Qe(this,Ec,void 0),(e=se(this,Ac))==null||e.call(this),Qe(this,Ac,void 0))}isFetching(t){return se(this,kn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return se(this,Fo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=se(this,kn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=se(this,kn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Yo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return se(this,kn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=se(this,kn).get(r.queryHash),i=s==null?void 0:s.state.data,a=T4(e,i);if(a!==void 0)return se(this,kn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return tr.batch(()=>se(this,kn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=se(this,kn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=se(this,kn);tr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=se(this,kn);return tr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=tr.batch(()=>se(this,kn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Pr).catch(Pr)}invalidateQueries(t,e={}){return tr.batch(()=>(se(this,kn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=tr.batch(()=>se(this,kn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=se(this,kn).build(this,e);return n.isStaleByTime(Yo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pr).catch(Pr)}fetchInfiniteQuery(t){return t.behavior=ST(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pr).catch(Pr)}ensureInfiniteQueryData(t){return t.behavior=ST(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bp.isOnline()?se(this,Fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return se(this,kn)}getMutationCache(){return se(this,Fo)}getDefaultOptions(){return se(this,jo)}setDefaultOptions(t){Qe(this,jo,t)}setQueryDefaults(t,e){se(this,Sc).set(qa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...se(this,Sc).values()],n={};return e.forEach(r=>{Of(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){se(this,Tc).set(qa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...se(this,Tc).values()],n={};return e.forEach(r=>{Of(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...se(this,jo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ov(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===av&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...se(this,jo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){se(this,kn).clear(),se(this,Fo).clear()}},kn=new WeakMap,Fo=new WeakMap,jo=new WeakMap,Sc=new WeakMap,Tc=new WeakMap,Bo=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,E3),Hr,Dt,Gf,Or,ja,Rc,Uo,Lo,Jf,Cc,kc,Ba,Ua,zo,Nc,Zt,uf,E_,A_,R_,C_,k_,N_,M_,V3,A3,U4=(A3=class extends Wc{constructor(e,n){super();lt(this,Zt);lt(this,Hr);lt(this,Dt);lt(this,Gf);lt(this,Or);lt(this,ja);lt(this,Rc);lt(this,Uo);lt(this,Lo);lt(this,Jf);lt(this,Cc);lt(this,kc);lt(this,Ba);lt(this,Ua);lt(this,zo);lt(this,Nc,new Set);this.options=n,Qe(this,Hr,e),Qe(this,Lo,null),Qe(this,Uo,T_()),this.options.experimental_prefetchInRender||se(this,Uo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(se(this,Dt).addObserver(this),ET(se(this,Dt),this.options)?xt(this,Zt,uf).call(this):this.updateResult(),xt(this,Zt,C_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return I_(se(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return I_(se(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xt(this,Zt,k_).call(this),xt(this,Zt,N_).call(this),se(this,Dt).removeObserver(this)}setOptions(e){const n=this.options,r=se(this,Dt);if(this.options=se(this,Hr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vs(this.options.enabled,se(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xt(this,Zt,M_).call(this),se(this,Dt).setOptions(this.options),n._defaulted&&!yp(this.options,n)&&se(this,Hr).getQueryCache().notify({type:"observerOptionsUpdated",query:se(this,Dt),observer:this});const s=this.hasListeners();s&&AT(se(this,Dt),r,this.options,n)&&xt(this,Zt,uf).call(this),this.updateResult(),s&&(se(this,Dt)!==r||Vs(this.options.enabled,se(this,Dt))!==Vs(n.enabled,se(this,Dt))||Yo(this.options.staleTime,se(this,Dt))!==Yo(n.staleTime,se(this,Dt)))&&xt(this,Zt,E_).call(this);const i=xt(this,Zt,A_).call(this);s&&(se(this,Dt)!==r||Vs(this.options.enabled,se(this,Dt))!==Vs(n.enabled,se(this,Dt))||i!==se(this,zo))&&xt(this,Zt,R_).call(this,i)}getOptimisticResult(e){const n=se(this,Hr).getQueryCache().build(se(this,Hr),e),r=this.createResult(n,e);return z4(this,r)&&(Qe(this,Or,r),Qe(this,Rc,this.options),Qe(this,ja,se(this,Dt).state)),r}getCurrentResult(){return se(this,Or)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){se(this,Nc).add(e)}getCurrentQuery(){return se(this,Dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=se(this,Hr).defaultQueryOptions(e),r=se(this,Hr).getQueryCache().build(se(this,Hr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return xt(this,Zt,uf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),se(this,Or)))}createResult(e,n){var G;const r=se(this,Dt),s=this.options,i=se(this,Or),a=se(this,ja),l=se(this,Rc),h=e!==r?e.state:se(this,Gf),{state:d}=e;let g={...d},b=!1,w;if(n._optimisticResults){const K=this.hasListeners(),Q=!K&&ET(e,n),ie=K&&AT(e,r,n,s);(Q||ie)&&(g={...g,...U3(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:R,errorUpdatedAt:A,status:C}=g;w=g.data;let M=!1;if(n.placeholderData!==void 0&&w===void 0&&C==="pending"){let K;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(K=i.data,M=!0):K=typeof n.placeholderData=="function"?n.placeholderData((G=se(this,kc))==null?void 0:G.state.data,se(this,kc)):n.placeholderData,K!==void 0&&(C="success",w=S_(i==null?void 0:i.data,K,n),b=!0)}if(n.select&&w!==void 0&&!M)if(i&&w===(a==null?void 0:a.data)&&n.select===se(this,Jf))w=se(this,Cc);else try{Qe(this,Jf,n.select),w=n.select(w),w=S_(i==null?void 0:i.data,w,n),Qe(this,Cc,w),Qe(this,Lo,null)}catch(K){Qe(this,Lo,K)}se(this,Lo)&&(R=se(this,Lo),w=se(this,Cc),A=Date.now(),C="error");const N=g.fetchStatus==="fetching",k=C==="pending",F=C==="error",B=k&&N,P=w!==void 0,Y={status:C,fetchStatus:g.fetchStatus,isPending:k,isSuccess:C==="success",isError:F,isInitialLoading:B,isLoading:B,data:w,dataUpdatedAt:g.dataUpdatedAt,error:R,errorUpdatedAt:A,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:N,isRefetching:N&&!k,isLoadingError:F&&!P,isPaused:g.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:F&&P,isStale:cv(e,n),refetch:this.refetch,promise:se(this,Uo)};if(this.options.experimental_prefetchInRender){const K=xe=>{Y.status==="error"?xe.reject(Y.error):Y.data!==void 0&&xe.resolve(Y.data)},Q=()=>{const xe=Qe(this,Uo,Y.promise=T_());K(xe)},ie=se(this,Uo);switch(ie.status){case"pending":e.queryHash===r.queryHash&&K(ie);break;case"fulfilled":(Y.status==="error"||Y.data!==ie.value)&&Q();break;case"rejected":(Y.status!=="error"||Y.error!==ie.reason)&&Q();break}}return Y}updateResult(){const e=se(this,Or),n=this.createResult(se(this,Dt),this.options);if(Qe(this,ja,se(this,Dt).state),Qe(this,Rc,this.options),se(this,ja).data!==void 0&&Qe(this,kc,se(this,Dt)),yp(n,e))return;Qe(this,Or,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!se(this,Nc).size)return!0;const a=new Set(i??se(this,Nc));return this.options.throwOnError&&a.add("error"),Object.keys(se(this,Or)).some(l=>{const u=l;return se(this,Or)[u]!==e[u]&&a.has(u)})};xt(this,Zt,V3).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xt(this,Zt,C_).call(this)}},Hr=new WeakMap,Dt=new WeakMap,Gf=new WeakMap,Or=new WeakMap,ja=new WeakMap,Rc=new WeakMap,Uo=new WeakMap,Lo=new WeakMap,Jf=new WeakMap,Cc=new WeakMap,kc=new WeakMap,Ba=new WeakMap,Ua=new WeakMap,zo=new WeakMap,Nc=new WeakMap,Zt=new WeakSet,uf=function(e){xt(this,Zt,M_).call(this);let n=se(this,Dt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Pr)),n},E_=function(){xt(this,Zt,k_).call(this);const e=Yo(this.options.staleTime,se(this,Dt));if(Wa||se(this,Or).isStale||!v_(e))return;const r=M3(se(this,Or).dataUpdatedAt,e)+1;Qe(this,Ba,setTimeout(()=>{se(this,Or).isStale||this.updateResult()},r))},A_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(se(this,Dt)):this.options.refetchInterval)??!1},R_=function(e){xt(this,Zt,N_).call(this),Qe(this,zo,e),!(Wa||Vs(this.options.enabled,se(this,Dt))===!1||!v_(se(this,zo))||se(this,zo)===0)&&Qe(this,Ua,setInterval(()=>{(this.options.refetchIntervalInBackground||lv.isFocused())&&xt(this,Zt,uf).call(this)},se(this,zo)))},C_=function(){xt(this,Zt,E_).call(this),xt(this,Zt,R_).call(this,xt(this,Zt,A_).call(this))},k_=function(){se(this,Ba)&&(clearTimeout(se(this,Ba)),Qe(this,Ba,void 0))},N_=function(){se(this,Ua)&&(clearInterval(se(this,Ua)),Qe(this,Ua,void 0))},M_=function(){const e=se(this,Hr).getQueryCache().build(se(this,Hr),this.options);if(e===se(this,Dt))return;const n=se(this,Dt);Qe(this,Dt,e),Qe(this,Gf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},V3=function(e){tr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(se(this,Or))}),se(this,Hr).getQueryCache().notify({query:se(this,Dt),type:"observerResultsUpdated"})})},A3);function L4(t,e){return Vs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ET(t,e){return L4(t,e)||t.state.data!==void 0&&I_(t,e,e.refetchOnMount)}function I_(t,e,n){if(Vs(e.enabled,t)!==!1&&Yo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&cv(t,e)}return!1}function AT(t,e,n,r){return(t!==e||Vs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&cv(t,n)}function cv(t,e){return Vs(e.enabled,t)!==!1&&t.isStaleByTime(Yo(e.staleTime,t))}function z4(t,e){return!yp(t.getCurrentResult(),e)}var Vo,$o,Wr,Li,$i,np,O_,R3,V4=(R3=class extends Wc{constructor(n,r){super();lt(this,$i);lt(this,Vo);lt(this,$o);lt(this,Wr);lt(this,Li);Qe(this,Vo,n),this.setOptions(r),this.bindMethods(),xt(this,$i,np).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=se(this,Vo).defaultMutationOptions(n),yp(this.options,r)||se(this,Vo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:se(this,Wr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&qa(r.mutationKey)!==qa(this.options.mutationKey)?this.reset():((s=se(this,Wr))==null?void 0:s.state.status)==="pending"&&se(this,Wr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=se(this,Wr))==null||n.removeObserver(this)}onMutationUpdate(n){xt(this,$i,np).call(this),xt(this,$i,O_).call(this,n)}getCurrentResult(){return se(this,$o)}reset(){var n;(n=se(this,Wr))==null||n.removeObserver(this),Qe(this,Wr,void 0),xt(this,$i,np).call(this),xt(this,$i,O_).call(this)}mutate(n,r){var s;return Qe(this,Li,r),(s=se(this,Wr))==null||s.removeObserver(this),Qe(this,Wr,se(this,Vo).getMutationCache().build(se(this,Vo),this.options)),se(this,Wr).addObserver(this),se(this,Wr).execute(n)}},Vo=new WeakMap,$o=new WeakMap,Wr=new WeakMap,Li=new WeakMap,$i=new WeakSet,np=function(){var r;const n=((r=se(this,Wr))==null?void 0:r.state)??L3();Qe(this,$o,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},O_=function(n){tr.batch(()=>{var r,s,i,a,l,u,h,d;if(se(this,Li)&&this.hasListeners()){const g=se(this,$o).variables,b=se(this,$o).context;(n==null?void 0:n.type)==="success"?((s=(r=se(this,Li)).onSuccess)==null||s.call(r,n.data,g,b),(a=(i=se(this,Li)).onSettled)==null||a.call(i,n.data,null,g,b)):(n==null?void 0:n.type)==="error"&&((u=(l=se(this,Li)).onError)==null||u.call(l,n.error,g,b),(d=(h=se(this,Li)).onSettled)==null||d.call(h,void 0,n.error,g,b))}this.listeners.forEach(g=>{g(se(this,$o))})})},R3),$3=I.createContext(void 0),qc=t=>{const e=I.useContext($3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},H3=({client:t,children:e})=>(I.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx($3.Provider,{value:t,children:e})),W3=I.createContext(!1),$4=()=>I.useContext(W3);W3.Provider;function H4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var W4=I.createContext(H4()),q4=()=>I.useContext(W4),X4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Y4=t=>{I.useEffect(()=>{t.clearReset()},[t])},K4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||P3(n,[t.error,r])),Z4=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Q4=(t,e)=>t.isLoading&&t.isFetching&&!e,G4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,RT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function J4(t,e,n){var g,b,w,R,A;const r=$4(),s=q4(),i=qc(),a=i.defaultQueryOptions(t);(b=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||b.call(g,a),a._optimisticResults=r?"isRestoring":"optimistic",Z4(a),X4(a,s),Y4(s);const l=!i.getQueryCache().get(a.queryHash),[u]=I.useState(()=>new e(i,a)),h=u.getOptimisticResult(a),d=!r&&t.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(C=>{const M=d?u.subscribe(tr.batchCalls(C)):Pr;return u.updateResult(),M},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),I.useEffect(()=>{u.setOptions(a)},[a,u]),G4(a,h))throw RT(a,u,s);if(K4({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((R=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||R.call(w,a,h),a.experimental_prefetchInRender&&!Wa&&Q4(h,r)){const C=l?RT(a,u,s):(A=i.getQueryCache().get(a.queryHash))==null?void 0:A.promise;C==null||C.catch(Pr).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?h:u.trackResult(h)}function Es(t,e){return J4(t,U4)}function _p(t,e){const n=qc(),[r]=I.useState(()=>new V4(n,t));I.useEffect(()=>{r.setOptions(t)},[r,t]);const s=I.useSyncExternalStore(I.useCallback(a=>r.subscribe(tr.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=I.useCallback((a,l)=>{r.mutate(a,l).catch(Pr)},[r]);if(s.error&&P3(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var Xc=N3();const eD=Hc(Xc);function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function q3(...t){return e=>{let n=!1;const r=t.map(s=>{const i=CT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():CT(t[s],null)}}}}function jn(...t){return I.useCallback(q3(...t),t)}function tl(t,e=[]){let n=[];function r(i,a){const l=I.createContext(a),u=n.length;n=[...n,a];const h=g=>{var M;const{scope:b,children:w,...R}=g,A=((M=b==null?void 0:b[t])==null?void 0:M[u])||l,C=I.useMemo(()=>R,Object.values(R));return y.jsx(A.Provider,{value:C,children:w})};h.displayName=i+"Provider";function d(g,b){var A;const w=((A=b==null?void 0:b[t])==null?void 0:A[u])||l,R=I.useContext(w);if(R)return R;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,d]}const s=()=>{const i=n.map(a=>I.createContext(a));return function(l){const u=(l==null?void 0:l[t])||i;return I.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,tD(s,...e)]}function tD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:u,scopeName:h})=>{const g=u(i)[`__scope${h}`];return{...l,...g}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Pf(t){const e=nD(t),n=I.forwardRef((r,s)=>{const{children:i,...a}=r,l=I.Children.toArray(i),u=l.find(sD);if(u){const h=u.props.children,d=l.map(g=>g===u?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:g);return y.jsx(e,{...a,ref:s,children:I.isValidElement(h)?I.cloneElement(h,void 0,d):null})}return y.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var X3=Pf("Slot");function nD(t){const e=I.forwardRef((n,r)=>{const{children:s,...i}=n;if(I.isValidElement(s)){const a=oD(s),l=iD(i,s.props);return s.type!==I.Fragment&&(l.ref=r?q3(r,a):a),I.cloneElement(s,l)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rD=Symbol("radix.slottable");function sD(t){return I.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rD}function iD(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function oD(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function uv(t){const e=t+"CollectionProvider",[n,r]=tl(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:C,children:M}=A,N=Ao.useRef(null),k=Ao.useRef(new Map).current;return y.jsx(s,{scope:C,itemMap:k,collectionRef:N,children:M})};a.displayName=e;const l=t+"CollectionSlot",u=Pf(l),h=Ao.forwardRef((A,C)=>{const{scope:M,children:N}=A,k=i(l,M),F=jn(C,k.collectionRef);return y.jsx(u,{ref:F,children:N})});h.displayName=l;const d=t+"CollectionItemSlot",g="data-radix-collection-item",b=Pf(d),w=Ao.forwardRef((A,C)=>{const{scope:M,children:N,...k}=A,F=Ao.useRef(null),B=jn(C,F),P=i(d,M);return Ao.useEffect(()=>(P.itemMap.set(F,{ref:F,...k}),()=>void P.itemMap.delete(F))),y.jsx(b,{[g]:"",ref:B,children:N})});w.displayName=d;function R(A){const C=i(t+"CollectionConsumer",A);return Ao.useCallback(()=>{const N=C.collectionRef.current;if(!N)return[];const k=Array.from(N.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((P,X)=>k.indexOf(P.ref.current)-k.indexOf(X.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:w},R,r]}var aD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pt=aD.reduce((t,e)=>{const n=Pf(`Primitive.${e}`),r=I.forwardRef((s,i)=>{const{asChild:a,...l}=s,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Y3(t,e){t&&Xc.flushSync(()=>t.dispatchEvent(e))}function As(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t}),I.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function lD(t,e=globalThis==null?void 0:globalThis.document){const n=As(t);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var cD="DismissableLayer",P_="dismissableLayer.update",uD="dismissableLayer.pointerDownOutside",fD="dismissableLayer.focusOutside",kT,K3=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fv=I.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...u}=t,h=I.useContext(K3),[d,g]=I.useState(null),b=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=I.useState({}),R=jn(e,X=>g(X)),A=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),M=A.indexOf(C),N=d?A.indexOf(d):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,F=N>=M,B=dD(X=>{const Y=X.target,G=[...h.branches].some(K=>K.contains(Y));!F||G||(s==null||s(X),a==null||a(X),X.defaultPrevented||l==null||l())},b),P=pD(X=>{const Y=X.target;[...h.branches].some(K=>K.contains(Y))||(i==null||i(X),a==null||a(X),X.defaultPrevented||l==null||l())},b);return lD(X=>{N===h.layers.size-1&&(r==null||r(X),!X.defaultPrevented&&l&&(X.preventDefault(),l()))},b),I.useEffect(()=>{if(d)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(kT=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),NT(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=kT)}},[d,b,n,h]),I.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),NT())},[d,h]),I.useEffect(()=>{const X=()=>w({});return document.addEventListener(P_,X),()=>document.removeEventListener(P_,X)},[]),y.jsx(Pt.div,{...u,ref:R,style:{pointerEvents:k?F?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,B.onPointerDownCapture)})});fv.displayName=cD;var hD="DismissableLayerBranch",Z3=I.forwardRef((t,e)=>{const n=I.useContext(K3),r=I.useRef(null),s=jn(e,r);return I.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Pt.div,{...t,ref:s})});Z3.displayName=hD;function dD(t,e=globalThis==null?void 0:globalThis.document){const n=As(t),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let u=function(){Q3(uD,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function pD(t,e=globalThis==null?void 0:globalThis.document){const n=As(t),r=I.useRef(!1);return I.useEffect(()=>{const s=i=>{i.target&&!r.current&&Q3(fD,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NT(){const t=new CustomEvent(P_);document.dispatchEvent(t)}function Q3(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Y3(s,i):s.dispatchEvent(i)}var gD=fv,mD=Z3,gr=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},yD="Portal",hv=I.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=I.useState(!1);gr(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?eD.createPortal(y.jsx(Pt.div,{...r,ref:e}),a):null});hv.displayName=yD;function bD(t,e){return I.useReducer((n,r)=>e[n][r]??n,t)}var dv=t=>{const{present:e,children:n}=t,r=_D(e),s=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),i=jn(r.ref,xD(s));return typeof n=="function"||r.isPresent?I.cloneElement(s,{ref:i}):null};dv.displayName="Presence";function _D(t){const[e,n]=I.useState(),r=I.useRef(null),s=I.useRef(t),i=I.useRef("none"),a=t?"mounted":"unmounted",[l,u]=bD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const h=Ed(r.current);i.current=l==="mounted"?h:"none"},[l]),gr(()=>{const h=r.current,d=s.current;if(d!==t){const b=i.current,w=Ed(h);t?u("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(d&&b!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),gr(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,g=w=>{const A=Ed(r.current).includes(w.animationName);if(w.target===e&&A&&(u("ANIMATION_END"),!s.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},b=w=>{w.target===e&&(i.current=Ed(r.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:I.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Ed(t){return(t==null?void 0:t.animationName)||"none"}function xD(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var vD=iv[" useInsertionEffect ".trim().toString()]||gr;function Df({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=wD({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const d=I.useRef(t!==void 0);I.useEffect(()=>{const g=d.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const h=I.useCallback(d=>{var g;if(l){const b=SD(d)?d(t):d;b!==t&&((g=a.current)==null||g.call(a,b))}else i(d)},[l,t,i,a]);return[u,h]}function wD({defaultProp:t,onChange:e}){const[n,r]=I.useState(t),s=I.useRef(n),i=I.useRef(e);return vD(()=>{i.current=e},[e]),I.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function SD(t){return typeof t=="function"}var G3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),TD="VisuallyHidden",pv=I.forwardRef((t,e)=>y.jsx(Pt.span,{...t,ref:e,style:{...G3,...t.style}}));pv.displayName=TD;var gv="ToastProvider",[mv,ED,AD]=uv("Toast"),[J3,fre]=tl("Toast",[AD]),[RD,wg]=J3(gv),eR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,u]=I.useState(null),[h,d]=I.useState(0),g=I.useRef(!1),b=I.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${gv}\`. Expected non-empty \`string\`.`),y.jsx(mv.Provider,{scope:e,children:y.jsx(RD,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:u,onToastAdd:I.useCallback(()=>d(w=>w+1),[]),onToastRemove:I.useCallback(()=>d(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:b,children:a})})};eR.displayName=gv;var tR="ToastViewport",CD=["F8"],D_="toast.viewportPause",F_="toast.viewportResume",nR=I.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=CD,label:s="Notifications ({hotkey})",...i}=t,a=wg(tR,n),l=ED(n),u=I.useRef(null),h=I.useRef(null),d=I.useRef(null),g=I.useRef(null),b=jn(e,g,a.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=a.toastCount>0;I.useEffect(()=>{const C=M=>{var k;r.length!==0&&r.every(F=>M[F]||M.code===F)&&((k=g.current)==null||k.focus())};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),I.useEffect(()=>{const C=u.current,M=g.current;if(R&&C&&M){const N=()=>{if(!a.isClosePausedRef.current){const P=new CustomEvent(D_);M.dispatchEvent(P),a.isClosePausedRef.current=!0}},k=()=>{if(a.isClosePausedRef.current){const P=new CustomEvent(F_);M.dispatchEvent(P),a.isClosePausedRef.current=!1}},F=P=>{!C.contains(P.relatedTarget)&&k()},B=()=>{C.contains(document.activeElement)||k()};return C.addEventListener("focusin",N),C.addEventListener("focusout",F),C.addEventListener("pointermove",N),C.addEventListener("pointerleave",B),window.addEventListener("blur",N),window.addEventListener("focus",k),()=>{C.removeEventListener("focusin",N),C.removeEventListener("focusout",F),C.removeEventListener("pointermove",N),C.removeEventListener("pointerleave",B),window.removeEventListener("blur",N),window.removeEventListener("focus",k)}}},[R,a.isClosePausedRef]);const A=I.useCallback(({tabbingDirection:C})=>{const N=l().map(k=>{const F=k.ref.current,B=[F,...zD(F)];return C==="forwards"?B:B.reverse()});return(C==="forwards"?N.reverse():N).flat()},[l]);return I.useEffect(()=>{const C=g.current;if(C){const M=N=>{var B,P,X;const k=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!k){const Y=document.activeElement,G=N.shiftKey;if(N.target===C&&G){(B=h.current)==null||B.focus();return}const ie=A({tabbingDirection:G?"backwards":"forwards"}),xe=ie.findIndex(oe=>oe===Y);ib(ie.slice(xe+1))?N.preventDefault():G?(P=h.current)==null||P.focus():(X=d.current)==null||X.focus()}};return C.addEventListener("keydown",M),()=>C.removeEventListener("keydown",M)}},[l,A]),y.jsxs(mD,{ref:u,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&y.jsx(j_,{ref:h,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"forwards"});ib(C)}}),y.jsx(mv.Slot,{scope:n,children:y.jsx(Pt.ol,{tabIndex:-1,...i,ref:b})}),R&&y.jsx(j_,{ref:d,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"backwards"});ib(C)}})]})});nR.displayName=tR;var rR="ToastFocusProxy",j_=I.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=wg(rR,n);return y.jsx(pv,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var h;const l=a.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&r()}})});j_.displayName=rR;var eh="Toast",kD="toast.swipeStart",ND="toast.swipeMove",MD="toast.swipeCancel",ID="toast.swipeEnd",sR=I.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l,u]=Df({prop:r,defaultProp:s??!0,onChange:i,caller:eh});return y.jsx(dv,{present:n||l,children:y.jsx(DD,{open:l,...a,ref:e,onClose:()=>u(!1),onPause:As(t.onPause),onResume:As(t.onResume),onSwipeStart:Ct(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),u(!1)})})})});sR.displayName=eh;var[OD,PD]=J3(eh,{onClose(){}}),DD=I.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:u,onResume:h,onSwipeStart:d,onSwipeMove:g,onSwipeCancel:b,onSwipeEnd:w,...R}=t,A=wg(eh,n),[C,M]=I.useState(null),N=jn(e,oe=>M(oe)),k=I.useRef(null),F=I.useRef(null),B=s||A.duration,P=I.useRef(0),X=I.useRef(B),Y=I.useRef(0),{onToastAdd:G,onToastRemove:K}=A,Q=As(()=>{var Re;(C==null?void 0:C.contains(document.activeElement))&&((Re=A.viewport)==null||Re.focus()),a()}),ie=I.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(Y.current),P.current=new Date().getTime(),Y.current=window.setTimeout(Q,oe))},[Q]);I.useEffect(()=>{const oe=A.viewport;if(oe){const Re=()=>{ie(X.current),h==null||h()},re=()=>{const Ee=new Date().getTime()-P.current;X.current=X.current-Ee,window.clearTimeout(Y.current),u==null||u()};return oe.addEventListener(D_,re),oe.addEventListener(F_,Re),()=>{oe.removeEventListener(D_,re),oe.removeEventListener(F_,Re)}}},[A.viewport,B,u,h,ie]),I.useEffect(()=>{i&&!A.isClosePausedRef.current&&ie(B)},[i,B,A.isClosePausedRef,ie]),I.useEffect(()=>(G(),()=>K()),[G,K]);const xe=I.useMemo(()=>C?fR(C):null,[C]);return A.viewport?y.jsxs(y.Fragment,{children:[xe&&y.jsx(FD,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:xe}),y.jsx(OD,{scope:n,onClose:Q,children:Xc.createPortal(y.jsx(mv.ItemSlot,{scope:n,children:y.jsx(gD,{asChild:!0,onEscapeKeyDown:Ct(l,()=>{A.isFocusedToastEscapeKeyDownRef.current||Q(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(Pt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":A.swipeDirection,...R,ref:N,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,oe=>{oe.key==="Escape"&&(l==null||l(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,Q()))}),onPointerDown:Ct(t.onPointerDown,oe=>{oe.button===0&&(k.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:Ct(t.onPointerMove,oe=>{if(!k.current)return;const Re=oe.clientX-k.current.x,re=oe.clientY-k.current.y,Ee=!!F.current,ue=["left","right"].includes(A.swipeDirection),Ve=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,D=ue?Ve(0,Re):0,ne=ue?0:Ve(0,re),ye=oe.pointerType==="touch"?10:2,U={x:D,y:ne},we={originalEvent:oe,delta:U};Ee?(F.current=U,Ad(ND,g,we,{discrete:!1})):MT(U,A.swipeDirection,ye)?(F.current=U,Ad(kD,d,we,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(Re)>ye||Math.abs(re)>ye)&&(k.current=null)}),onPointerUp:Ct(t.onPointerUp,oe=>{const Re=F.current,re=oe.target;if(re.hasPointerCapture(oe.pointerId)&&re.releasePointerCapture(oe.pointerId),F.current=null,k.current=null,Re){const Ee=oe.currentTarget,ue={originalEvent:oe,delta:Re};MT(Re,A.swipeDirection,A.swipeThreshold)?Ad(ID,w,ue,{discrete:!0}):Ad(MD,b,ue,{discrete:!0}),Ee.addEventListener("click",Ve=>Ve.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),FD=t=>{const{__scopeToast:e,children:n,...r}=t,s=wg(eh,e),[i,a]=I.useState(!1),[l,u]=I.useState(!1);return UD(()=>a(!0)),I.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:y.jsx(hv,{asChild:!0,children:y.jsx(pv,{...r,children:i&&y.jsxs(y.Fragment,{children:[s.label," ",n]})})})},jD="ToastTitle",iR=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Pt.div,{...r,ref:e})});iR.displayName=jD;var BD="ToastDescription",oR=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Pt.div,{...r,ref:e})});oR.displayName=BD;var aR="ToastAction",lR=I.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?y.jsx(uR,{altText:n,asChild:!0,children:y.jsx(yv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${aR}\`. Expected non-empty \`string\`.`),null)});lR.displayName=aR;var cR="ToastClose",yv=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=PD(cR,n);return y.jsx(uR,{asChild:!0,children:y.jsx(Pt.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});yv.displayName=cR;var uR=I.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return y.jsx(Pt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function fR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),LD(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...fR(r))}}),e}function Ad(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Y3(s,i):s.dispatchEvent(i)}var MT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function UD(t=()=>{}){const e=As(t);gr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function LD(t){return t.nodeType===t.ELEMENT_NODE}function zD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ib(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var VD=eR,hR=nR,dR=sR,pR=iR,gR=oR,mR=lR,yR=yv;function bR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=bR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _R(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=bR(t))&&(r&&(r+=" "),r+=e);return r}const IT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,OT=_R,Sg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return OT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const d=n==null?void 0:n[h],g=i==null?void 0:i[h];if(d===null)return null;const b=IT(d)||IT(g);return s[h][b]}),l=n&&Object.entries(n).reduce((h,d)=>{let[g,b]=d;return b===void 0||(h[g]=b),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,d)=>{let{class:g,className:b,...w}=d;return Object.entries(w).every(R=>{let[A,C]=R;return Array.isArray(C)?C.includes({...i,...l}[A]):{...i,...l}[A]===C})?[...h,g,b]:h},[]);return OT(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),PT=t=>{const e=HD(t);return e.charAt(0).toUpperCase()+e.slice(1)},xR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),WD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},u)=>I.createElement("svg",{ref:u,...qD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xR("lucide",s),...!i&&!WD(l)&&{"aria-hidden":"true"},...l},[...a.map(([h,d])=>I.createElement(h,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=I.forwardRef(({className:r,...s},i)=>I.createElement(XD,{ref:i,iconNode:e,className:xR(`lucide-${$D(PT(t))}`,`lucide-${t}`,r),...s}));return n.displayName=PT(t),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vR=yt("activity",YD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ZD=yt("box",KD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],B_=yt("boxes",QD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],U_=yt("chart-column",GD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eF=yt("check",JD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tg=yt("chevron-down",tF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wR=yt("chevron-right",nF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sF=yt("chevron-up",rF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oF=yt("circle-alert",iF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Na=yt("circle-check-big",aF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cF=yt("circle-help",lF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],L_=yt("clock",uF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],bv=yt("code",fF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ff=yt("copy",hF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],SR=yt("database-zap",dF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_v=yt("database",pF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],DT=yt("download",gF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Eg=yt("external-link",mF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TR=yt("eye",yF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jf=yt("file-text",bF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Ll=yt("file",_F);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],ER=yt("fingerprint",xF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],wF=yt("folder-open",vF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],TF=yt("folder",SF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],AR=yt("funnel",EF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],RF=yt("globe",AF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mc=yt("info",CF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],NF=yt("layers",kF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],IF=yt("moon",MF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],FT=yt("network",OF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Rd=yt("package",PF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],FF=yt("panel-left",DF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}]],BF=yt("parentheses",jF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],RR=yt("play",UF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],di=yt("refresh-cw",LF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],VF=yt("rotate-ccw",zF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xp=yt("save",$F);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],WF=yt("search",HF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],XF=yt("server",qF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],CR=yt("settings",YF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],z_=yt("sparkles",KF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 0 1 1h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-3a1 1 0 0 0-1-1z",key:"17jnth"}]],QF=yt("squares-unite",ZF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],JF=yt("sun",GF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],tj=yt("terminal",ej);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],jT=yt("test-tube",nj);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],kR=yt("tree-pine",rj);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ho=yt("triangle-alert",sj);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zs=yt("x",ij);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ag=yt("zap",oj),xv="-",aj=t=>{const e=cj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(xv);return l[0]===""&&l.length!==1&&l.shift(),NR(l,e)||lj(a)},getConflictingClassGroupIds:(a,l)=>{const u=n[a]||[];return l&&r[a]?[...u,...r[a]]:u}}},NR=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?NR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(xv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},BT=/^\[(.+)\]$/,lj=t=>{if(BT.test(t)){const e=BT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},cj=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)V_(n[s],r,s,e);return r},V_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:UT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(uj(s)){V_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{V_(a,UT(e,i),n,r)})})},UT=(t,e)=>{let n=t;return e.split(xv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uj=t=>t.isThemeGetter,fj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},$_="!",H_=":",hj=H_.length,dj=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let a=0,l=0,u=0,h;for(let R=0;R<s.length;R++){let A=s[R];if(a===0&&l===0){if(A===H_){i.push(s.slice(u,R)),u=R+hj;continue}if(A==="/"){h=R;continue}}A==="["?a++:A==="]"?a--:A==="("?l++:A===")"&&l--}const d=i.length===0?s:s.substring(u),g=pj(d),b=g!==d,w=h&&h>u?h-u:void 0;return{modifiers:i,hasImportantModifier:b,baseClassName:g,maybePostfixModifierPosition:w}};if(e){const s=e+H_,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},pj=t=>t.endsWith($_)?t.substring(0,t.length-1):t.startsWith($_)?t.substring(1):t,gj=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},mj=t=>({cache:fj(t.cacheSize),parseClassName:dj(t),sortModifiers:gj(t),...aj(t)}),yj=/\s+/,bj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],l=t.trim().split(yj);let u="";for(let h=l.length-1;h>=0;h-=1){const d=l[h],{isExternal:g,modifiers:b,hasImportantModifier:w,baseClassName:R,maybePostfixModifierPosition:A}=n(d);if(g){u=d+(u.length>0?" "+u:u);continue}let C=!!A,M=r(C?R.substring(0,A):R);if(!M){if(!C){u=d+(u.length>0?" "+u:u);continue}if(M=r(R),!M){u=d+(u.length>0?" "+u:u);continue}C=!1}const N=i(b).join(":"),k=w?N+$_:N,F=k+M;if(a.includes(F))continue;a.push(F);const B=s(M,C);for(let P=0;P<B.length;++P){const X=B[P];a.push(k+X)}u=d+(u.length>0?" "+u:u)}return u};function _j(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=MR(e))&&(r&&(r+=" "),r+=n);return r}const MR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=MR(t[r]))&&(n&&(n+=" "),n+=e);return n};function xj(t,...e){let n,r,s,i=a;function a(u){const h=e.reduce((d,g)=>g(d),t());return n=mj(h),r=n.cache.get,s=n.cache.set,i=l,l(u)}function l(u){const h=r(u);if(h)return h;const d=bj(u,n);return s(u,d),d}return function(){return i(_j.apply(null,arguments))}}const Gn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,OR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,vj=/^\d+\/\d+$/,wj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Tj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ej=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Aj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zl=t=>vj.test(t),Rt=t=>!!t&&!Number.isNaN(Number(t)),xo=t=>!!t&&Number.isInteger(Number(t)),ob=t=>t.endsWith("%")&&Rt(t.slice(0,-1)),Di=t=>wj.test(t),Rj=()=>!0,Cj=t=>Sj.test(t)&&!Tj.test(t),PR=()=>!1,kj=t=>Ej.test(t),Nj=t=>Aj.test(t),Mj=t=>!et(t)&&!tt(t),Ij=t=>Yc(t,jR,PR),et=t=>IR.test(t),va=t=>Yc(t,BR,Cj),ab=t=>Yc(t,jj,Rt),LT=t=>Yc(t,DR,PR),Oj=t=>Yc(t,FR,Nj),Cd=t=>Yc(t,UR,kj),tt=t=>OR.test(t),ef=t=>Kc(t,BR),Pj=t=>Kc(t,Bj),zT=t=>Kc(t,DR),Dj=t=>Kc(t,jR),Fj=t=>Kc(t,FR),kd=t=>Kc(t,UR,!0),Yc=(t,e,n)=>{const r=IR.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Kc=(t,e,n=!1)=>{const r=OR.exec(t);return r?r[1]?e(r[1]):n:!1},DR=t=>t==="position"||t==="percentage",FR=t=>t==="image"||t==="url",jR=t=>t==="length"||t==="size"||t==="bg-size",BR=t=>t==="length",jj=t=>t==="number",Bj=t=>t==="family-name",UR=t=>t==="shadow",Uj=()=>{const t=Gn("color"),e=Gn("font"),n=Gn("text"),r=Gn("font-weight"),s=Gn("tracking"),i=Gn("leading"),a=Gn("breakpoint"),l=Gn("container"),u=Gn("spacing"),h=Gn("radius"),d=Gn("shadow"),g=Gn("inset-shadow"),b=Gn("text-shadow"),w=Gn("drop-shadow"),R=Gn("blur"),A=Gn("perspective"),C=Gn("aspect"),M=Gn("ease"),N=Gn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...F(),tt,et],P=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto","contain","none"],Y=()=>[tt,et,u],G=()=>[zl,"full","auto",...Y()],K=()=>[xo,"none","subgrid",tt,et],Q=()=>["auto",{span:["full",xo,tt,et]},xo,tt,et],ie=()=>[xo,"auto",tt,et],xe=()=>["auto","min","max","fr",tt,et],oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Re=()=>["start","end","center","stretch","center-safe","end-safe"],re=()=>["auto",...Y()],Ee=()=>[zl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Y()],ue=()=>[t,tt,et],Ve=()=>[...F(),zT,LT,{position:[tt,et]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ne=()=>["auto","cover","contain",Dj,Ij,{size:[tt,et]}],ye=()=>[ob,ef,va],U=()=>["","none","full",h,tt,et],we=()=>["",Rt,ef,va],ce=()=>["solid","dashed","dotted","double"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[Rt,ob,zT,LT],De=()=>["","none",R,tt,et],Ge=()=>["none",Rt,tt,et],Ke=()=>["none",Rt,tt,et],nt=()=>[Rt,tt,et],st=()=>[zl,"full",...Y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Di],breakpoint:[Di],color:[Rj],container:[Di],"drop-shadow":[Di],ease:["in","out","in-out"],font:[Mj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Di],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Di],shadow:[Di],spacing:["px",Rt],text:[Di],"text-shadow":[Di],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zl,et,tt,C]}],container:["container"],columns:[{columns:[Rt,et,tt,l]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[xo,"auto",tt,et]}],basis:[{basis:[zl,"full","auto",l,...Y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rt,zl,"auto","initial","none",et]}],grow:[{grow:["",Rt,tt,et]}],shrink:[{shrink:["",Rt,tt,et]}],order:[{order:[xo,"first","last","none",tt,et]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":xe()}],"auto-rows":[{"auto-rows":xe()}],gap:[{gap:Y()}],"gap-x":[{"gap-x":Y()}],"gap-y":[{"gap-y":Y()}],"justify-content":[{justify:[...oe(),"normal"]}],"justify-items":[{"justify-items":[...Re(),"normal"]}],"justify-self":[{"justify-self":["auto",...Re()]}],"align-content":[{content:["normal",...oe()]}],"align-items":[{items:[...Re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Re(),{baseline:["","last"]}]}],"place-content":[{"place-content":oe()}],"place-items":[{"place-items":[...Re(),"baseline"]}],"place-self":[{"place-self":["auto",...Re()]}],p:[{p:Y()}],px:[{px:Y()}],py:[{py:Y()}],ps:[{ps:Y()}],pe:[{pe:Y()}],pt:[{pt:Y()}],pr:[{pr:Y()}],pb:[{pb:Y()}],pl:[{pl:Y()}],m:[{m:re()}],mx:[{mx:re()}],my:[{my:re()}],ms:[{ms:re()}],me:[{me:re()}],mt:[{mt:re()}],mr:[{mr:re()}],mb:[{mb:re()}],ml:[{ml:re()}],"space-x":[{"space-x":Y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Y()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[l,"screen",...Ee()]}],"min-w":[{"min-w":[l,"screen","none",...Ee()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...Ee()]}],h:[{h:["screen","lh",...Ee()]}],"min-h":[{"min-h":["screen","lh","none",...Ee()]}],"max-h":[{"max-h":["screen","lh",...Ee()]}],"font-size":[{text:["base",n,ef,va]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tt,ab]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ob,et]}],"font-family":[{font:[Pj,et,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,tt,et]}],"line-clamp":[{"line-clamp":[Rt,"none",tt,ab]}],leading:[{leading:[i,...Y()]}],"list-image":[{"list-image":["none",tt,et]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tt,et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ue()}],"text-color":[{text:ue()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rt,"from-font","auto",tt,va]}],"text-decoration-color":[{decoration:ue()}],"underline-offset":[{"underline-offset":[Rt,"auto",tt,et]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt,et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt,et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ve()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:ne()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xo,tt,et],radial:["",tt,et],conic:[xo,tt,et]},Fj,Oj]}],"bg-color":[{bg:ue()}],"gradient-from-pos":[{from:ye()}],"gradient-via-pos":[{via:ye()}],"gradient-to-pos":[{to:ye()}],"gradient-from":[{from:ue()}],"gradient-via":[{via:ue()}],"gradient-to":[{to:ue()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:ue()}],"border-color-x":[{"border-x":ue()}],"border-color-y":[{"border-y":ue()}],"border-color-s":[{"border-s":ue()}],"border-color-e":[{"border-e":ue()}],"border-color-t":[{"border-t":ue()}],"border-color-r":[{"border-r":ue()}],"border-color-b":[{"border-b":ue()}],"border-color-l":[{"border-l":ue()}],"divide-color":[{divide:ue()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rt,tt,et]}],"outline-w":[{outline:["",Rt,ef,va]}],"outline-color":[{outline:ue()}],shadow:[{shadow:["","none",d,kd,Cd]}],"shadow-color":[{shadow:ue()}],"inset-shadow":[{"inset-shadow":["none",g,kd,Cd]}],"inset-shadow-color":[{"inset-shadow":ue()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ue()}],"ring-offset-w":[{"ring-offset":[Rt,va]}],"ring-offset-color":[{"ring-offset":ue()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":ue()}],"text-shadow":[{"text-shadow":["none",b,kd,Cd]}],"text-shadow-color":[{"text-shadow":ue()}],opacity:[{opacity:[Rt,tt,et]}],"mix-blend":[{"mix-blend":[...ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":ue()}],"mask-image-linear-to-color":[{"mask-linear-to":ue()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":ue()}],"mask-image-t-to-color":[{"mask-t-to":ue()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":ue()}],"mask-image-r-to-color":[{"mask-r-to":ue()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":ue()}],"mask-image-b-to-color":[{"mask-b-to":ue()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":ue()}],"mask-image-l-to-color":[{"mask-l-to":ue()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":ue()}],"mask-image-x-to-color":[{"mask-x-to":ue()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":ue()}],"mask-image-y-to-color":[{"mask-y-to":ue()}],"mask-image-radial":[{"mask-radial":[tt,et]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":ue()}],"mask-image-radial-to-color":[{"mask-radial-to":ue()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[Rt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":ue()}],"mask-image-conic-to-color":[{"mask-conic-to":ue()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ve()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:ne()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tt,et]}],filter:[{filter:["","none",tt,et]}],blur:[{blur:De()}],brightness:[{brightness:[Rt,tt,et]}],contrast:[{contrast:[Rt,tt,et]}],"drop-shadow":[{"drop-shadow":["","none",w,kd,Cd]}],"drop-shadow-color":[{"drop-shadow":ue()}],grayscale:[{grayscale:["",Rt,tt,et]}],"hue-rotate":[{"hue-rotate":[Rt,tt,et]}],invert:[{invert:["",Rt,tt,et]}],saturate:[{saturate:[Rt,tt,et]}],sepia:[{sepia:["",Rt,tt,et]}],"backdrop-filter":[{"backdrop-filter":["","none",tt,et]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[Rt,tt,et]}],"backdrop-contrast":[{"backdrop-contrast":[Rt,tt,et]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rt,tt,et]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rt,tt,et]}],"backdrop-invert":[{"backdrop-invert":["",Rt,tt,et]}],"backdrop-opacity":[{"backdrop-opacity":[Rt,tt,et]}],"backdrop-saturate":[{"backdrop-saturate":[Rt,tt,et]}],"backdrop-sepia":[{"backdrop-sepia":["",Rt,tt,et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Y()}],"border-spacing-x":[{"border-spacing-x":Y()}],"border-spacing-y":[{"border-spacing-y":Y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tt,et]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rt,"initial",tt,et]}],ease:[{ease:["linear","initial",M,tt,et]}],delay:[{delay:[Rt,tt,et]}],animate:[{animate:["none",N,tt,et]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,tt,et]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:Ke()}],"scale-x":[{"scale-x":Ke()}],"scale-y":[{"scale-y":Ke()}],"scale-z":[{"scale-z":Ke()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[tt,et,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:st()}],"translate-x":[{"translate-x":st()}],"translate-y":[{"translate-y":st()}],"translate-z":[{"translate-z":st()}],"translate-none":["translate-none"],accent:[{accent:ue()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ue()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt,et]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt,et]}],fill:[{fill:["none",...ue()]}],"stroke-w":[{stroke:[Rt,ef,va,ab]}],stroke:[{stroke:["none",...ue()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Lj=xj(Uj);function Qt(...t){return Lj(_R(t))}const zj=Sg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-card text-card-foreground",success:"border-[color:var(--color-success)] bg-card text-card-foreground",warning:"border-[color:var(--color-warning)] bg-card text-card-foreground",info:"border-[color:var(--color-info)] bg-card text-card-foreground"}},defaultVariants:{variant:"default"}}),Vj=VD,LR=I.forwardRef(({className:t,...e},n)=>y.jsx(hR,{ref:n,className:Qt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] gap-2",t),...e}));LR.displayName=hR.displayName;const zR=I.forwardRef(({className:t,variant:e,...n},r)=>y.jsx(dR,{ref:r,className:Qt(zj({variant:e}),t),...n}));zR.displayName=dR.displayName;const $j=I.forwardRef(({className:t,...e},n)=>y.jsx(mR,{ref:n,className:Qt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-thin ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));$j.displayName=mR.displayName;const VR=I.forwardRef(({className:t,...e},n)=>y.jsx(yR,{ref:n,className:Qt("absolute right-2 top-2 rounded-md p-1 text-foreground/30 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-80 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:y.jsx(zs,{className:"h-4 w-4"})}));VR.displayName=yR.displayName;const $R=I.forwardRef(({className:t,...e},n)=>y.jsx(pR,{ref:n,className:Qt("text-xs font-thin",t),...e}));$R.displayName=pR.displayName;const HR=I.forwardRef(({className:t,...e},n)=>y.jsx(gR,{ref:n,className:Qt("text-xs opacity-70",t),...e}));HR.displayName=gR.displayName;const WR=I.forwardRef(({className:t,variant:e="default",...n},r)=>{const s={default:Mc,destructive:oF,success:Na,warning:Ho,info:Mc}[e],i={default:"text-muted-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"}[e];return y.jsx("div",{ref:r,className:Qt("flex-shrink-0",t),...n,children:y.jsx(s,{className:Qt("h-4 w-4",i)})})});WR.displayName="ToastIcon";const VT=(t,e)=>{const n={default:"text-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"},r={success:["added","created","saved","completed","success","done"],destructive:["error","failed","deleted","removed","warning"],warning:["warning","caution","alert"],info:["info","note","updated","changed"]};let s=t;return s=s.replace(/([^\s]+\.[a-zA-Z0-9]+)/g,"<strong>$1</strong>"),s=s.replace(/([^\s]*\/[^\s]+)/g,"<strong>$1</strong>"),Object.entries(r).forEach(([i,a])=>{a.forEach(l=>{const u=new RegExp(`\\b(${l})\\b`,"gi"),h=n[i];s=s.replace(u,`<span class="${h} font-medium">$1</span>`)})}),{__html:s}},Hj=3,Wj=5e3;let lb=0;function qj(){return lb=(lb+1)%Number.MAX_SAFE_INTEGER,lb.toString()}const cb=new Map,$T=t=>{if(cb.has(t))return;const e=setTimeout(()=>{cb.delete(t),xf({type:"REMOVE_TOAST",toastId:t})},Wj);cb.set(t,e)},Xj=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Hj)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?$T(n):t.toasts.forEach(r=>{$T(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},rp=[];let sp={toasts:[]};function xf(t){sp=Xj(sp,t),rp.forEach(e=>{e(sp)})}function ff({...t}){const e=qj(),n=s=>xf({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>xf({type:"DISMISS_TOAST",toastId:e});return xf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Yj(){const[t,e]=I.useState(sp);return I.useEffect(()=>(rp.push(e),()=>{const n=rp.indexOf(e);n>-1&&rp.splice(n,1)}),[t]),{...t,toast:ff,dismiss:n=>xf({type:"DISMISS_TOAST",toastId:n})}}function Kj(){const{toasts:t}=Yj();return y.jsxs(Vj,{children:[t.map(function({id:e,title:n,description:r,action:s,variant:i,...a}){return y.jsxs(zR,{variant:i,...a,children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(WR,{variant:i}),y.jsxs("div",{className:"grid gap-1 flex-1",children:[n&&y.jsx($R,{dangerouslySetInnerHTML:VT(String(n))}),r&&y.jsx(HR,{dangerouslySetInnerHTML:VT(String(r))})]})]}),s,y.jsx(VR,{})]},e)}),y.jsx(LR,{})]})}var Zj=(t,e,n,r,s,i,a,l)=>{let u=document.documentElement,h=["light","dark"];function d(w){(Array.isArray(t)?t:[t]).forEach(R=>{let A=R==="class",C=A&&i?s.map(M=>i[M]||M):s;A?(u.classList.remove(...C),u.classList.add(i&&i[w]?i[w]:w)):u.setAttribute(R,w)}),g(w)}function g(w){l&&h.includes(w)&&(u.style.colorScheme=w)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let w=localStorage.getItem(e)||n,R=a&&w==="system"?b():w;d(R)}catch{}},HT=["light","dark"],qR="(prefers-color-scheme: dark)",Qj=typeof window>"u",vv=I.createContext(void 0),Gj={setTheme:t=>{},themes:[]},Jj=()=>{var t;return(t=I.useContext(vv))!=null?t:Gj},e6=t=>I.useContext(vv)?I.createElement(I.Fragment,null,t.children):I.createElement(n6,{...t}),t6=["light","dark"],n6=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=t6,defaultTheme:a=n?"system":"light",attribute:l="data-theme",value:u,children:h,nonce:d,scriptProps:g})=>{let[b,w]=I.useState(()=>s6(s,a)),[R,A]=I.useState(()=>b==="system"?ub():b),C=u?Object.values(u):i,M=I.useCallback(B=>{let P=B;if(!P)return;B==="system"&&n&&(P=ub());let X=u?u[P]:P,Y=e?i6(d):null,G=document.documentElement,K=Q=>{Q==="class"?(G.classList.remove(...C),X&&G.classList.add(X)):Q.startsWith("data-")&&(X?G.setAttribute(Q,X):G.removeAttribute(Q))};if(Array.isArray(l)?l.forEach(K):K(l),r){let Q=HT.includes(a)?a:null,ie=HT.includes(P)?P:Q;G.style.colorScheme=ie}Y==null||Y()},[d]),N=I.useCallback(B=>{let P=typeof B=="function"?B(b):B;w(P);try{localStorage.setItem(s,P)}catch{}},[b]),k=I.useCallback(B=>{let P=ub(B);A(P),b==="system"&&n&&!t&&M("system")},[b,t]);I.useEffect(()=>{let B=window.matchMedia(qR);return B.addListener(k),k(B),()=>B.removeListener(k)},[k]),I.useEffect(()=>{let B=P=>{P.key===s&&(P.newValue?w(P.newValue):N(a))};return window.addEventListener("storage",B),()=>window.removeEventListener("storage",B)},[N]),I.useEffect(()=>{M(t??b)},[t,b]);let F=I.useMemo(()=>({theme:b,setTheme:N,forcedTheme:t,resolvedTheme:b==="system"?R:b,themes:n?[...i,"system"]:i,systemTheme:n?R:void 0}),[b,N,t,R,n,i]);return I.createElement(vv.Provider,{value:F},I.createElement(r6,{forcedTheme:t,storageKey:s,attribute:l,enableSystem:n,enableColorScheme:r,defaultTheme:a,value:u,themes:i,nonce:d,scriptProps:g}),h)},r6=I.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,themes:l,nonce:u,scriptProps:h})=>{let d=JSON.stringify([n,e,i,t,l,a,r,s]).slice(1,-1);return I.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Zj.toString()})(${d})`}})}),s6=(t,e)=>{if(Qj)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},i6=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},ub=t=>(t||(t=window.matchMedia(qR)),t.matches?"dark":"light");function o6({children:t,...e}){return y.jsx(e6,{...e,children:t})}const a6=Sg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-thin transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Tt({className:t,variant:e,size:n,asChild:r=!1,...s}){const i=r?X3:"button";return y.jsx(i,{"data-slot":"button",className:Qt(a6({variant:e,size:n,className:t})),...s})}const l6=Sg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-thin w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function nn({className:t,variant:e,asChild:n=!1,...r}){const s=n?X3:"span";return y.jsx(s,{"data-slot":"badge",className:Qt(l6({variant:e}),t),...r})}var c6=iv[" useId ".trim().toString()]||(()=>{}),u6=0;function th(t){const[e,n]=I.useState(c6());return gr(()=>{n(r=>r??String(u6++))},[t]),e?`radix-${e}`:""}var f6=I.createContext(void 0);function wv(t){const e=I.useContext(f6);return t||e||"ltr"}var fb="rovingFocusGroup.onEntryFocus",h6={bubbles:!1,cancelable:!0},nh="RovingFocusGroup",[W_,XR,d6]=uv(nh),[p6,YR]=tl(nh,[d6]),[g6,m6]=p6(nh),KR=I.forwardRef((t,e)=>y.jsx(W_.Provider,{scope:t.__scopeRovingFocusGroup,children:y.jsx(W_.Slot,{scope:t.__scopeRovingFocusGroup,children:y.jsx(y6,{...t,ref:e})})}));KR.displayName=nh;var y6=I.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...g}=t,b=I.useRef(null),w=jn(e,b),R=wv(i),[A,C]=Df({prop:a,defaultProp:l??null,onChange:u,caller:nh}),[M,N]=I.useState(!1),k=As(h),F=XR(n),B=I.useRef(!1),[P,X]=I.useState(0);return I.useEffect(()=>{const Y=b.current;if(Y)return Y.addEventListener(fb,k),()=>Y.removeEventListener(fb,k)},[k]),y.jsx(g6,{scope:n,orientation:r,dir:R,loop:s,currentTabStopId:A,onItemFocus:I.useCallback(Y=>C(Y),[C]),onItemShiftTab:I.useCallback(()=>N(!0),[]),onFocusableItemAdd:I.useCallback(()=>X(Y=>Y+1),[]),onFocusableItemRemove:I.useCallback(()=>X(Y=>Y-1),[]),children:y.jsx(Pt.div,{tabIndex:M||P===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...t.style},onMouseDown:Ct(t.onMouseDown,()=>{B.current=!0}),onFocus:Ct(t.onFocus,Y=>{const G=!B.current;if(Y.target===Y.currentTarget&&G&&!M){const K=new CustomEvent(fb,h6);if(Y.currentTarget.dispatchEvent(K),!K.defaultPrevented){const Q=F().filter(re=>re.focusable),ie=Q.find(re=>re.active),xe=Q.find(re=>re.id===A),Re=[ie,xe,...Q].filter(Boolean).map(re=>re.ref.current);GR(Re,d)}}B.current=!1}),onBlur:Ct(t.onBlur,()=>N(!1))})})}),ZR="RovingFocusGroupItem",QR=I.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,u=th(),h=i||u,d=m6(ZR,n),g=d.currentTabStopId===h,b=XR(n),{onFocusableItemAdd:w,onFocusableItemRemove:R,currentTabStopId:A}=d;return I.useEffect(()=>{if(r)return w(),()=>R()},[r,w,R]),y.jsx(W_.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:y.jsx(Pt.span,{tabIndex:g?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Ct(t.onMouseDown,C=>{r?d.onItemFocus(h):C.preventDefault()}),onFocus:Ct(t.onFocus,()=>d.onItemFocus(h)),onKeyDown:Ct(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){d.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const M=x6(C,d.orientation,d.dir);if(M!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let k=b().filter(F=>F.focusable).map(F=>F.ref.current);if(M==="last")k.reverse();else if(M==="prev"||M==="next"){M==="prev"&&k.reverse();const F=k.indexOf(C.currentTarget);k=d.loop?v6(k,F+1):k.slice(F+1)}setTimeout(()=>GR(k))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:A!=null}):a})})});QR.displayName=ZR;var b6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _6(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function x6(t,e,n){const r=_6(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return b6[r]}function GR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function v6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var w6=KR,S6=QR,Rg="Tabs",[T6,hre]=tl(Rg,[YR]),JR=YR(),[E6,Sv]=T6(Rg),eC=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:u="automatic",...h}=t,d=wv(l),[g,b]=Df({prop:r,onChange:s,defaultProp:i??"",caller:Rg});return y.jsx(E6,{scope:n,baseId:th(),value:g,onValueChange:b,orientation:a,dir:d,activationMode:u,children:y.jsx(Pt.div,{dir:d,"data-orientation":a,...h,ref:e})})});eC.displayName=Rg;var tC="TabsList",nC=I.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Sv(tC,n),a=JR(n);return y.jsx(w6,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Pt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});nC.displayName=tC;var rC="TabsTrigger",sC=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Sv(rC,n),l=JR(n),u=aC(a.baseId,r),h=lC(a.baseId,r),d=r===a.value;return y.jsx(S6,{asChild:!0,...l,focusable:!s,active:d,children:y.jsx(Pt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:e,onMouseDown:Ct(t.onMouseDown,g=>{!s&&g.button===0&&g.ctrlKey===!1?a.onValueChange(r):g.preventDefault()}),onKeyDown:Ct(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(r)}),onFocus:Ct(t.onFocus,()=>{const g=a.activationMode!=="manual";!d&&!s&&g&&a.onValueChange(r)})})})});sC.displayName=rC;var iC="TabsContent",oC=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Sv(iC,n),u=aC(l.baseId,r),h=lC(l.baseId,r),d=r===l.value,g=I.useRef(d);return I.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),y.jsx(dv,{present:s||d,children:({present:b})=>y.jsx(Pt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!b,id:h,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:b&&i})})});oC.displayName=iC;function aC(t,e){return`${t}-trigger-${e}`}function lC(t,e){return`${t}-content-${e}`}var A6=eC,R6=nC,C6=sC,k6=oC;function nl({className:t,...e}){return y.jsx(A6,{"data-slot":"tabs",className:Qt("flex flex-col gap-2",t),...e})}function rl({className:t,...e}){return y.jsx(R6,{"data-slot":"tabs-list",className:Qt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function Dn({className:t,...e}){return y.jsx(C6,{"data-slot":"tabs-trigger",className:Qt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-thin whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Wn({className:t,...e}){return y.jsx(k6,{"data-slot":"tabs-content",className:Qt("flex-1 outline-none",t),...e})}const rn={success:(t,e)=>ff({variant:"success",title:t,description:e}),error:(t,e)=>ff({variant:"destructive",title:t,description:e}),info:(t,e)=>ff({variant:"info",title:t,description:e}),warning:(t,e,n)=>ff({variant:"warning",title:t,description:e,duration:n==null?void 0:n.duration})},N6=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]},M6=()=>{const{data:t={}}=Es({queryKey:["fileSizes"],queryFn:async()=>{const e=await fetch("http://localhost:3333/api/files");if(!e.ok)throw new Error("Failed to fetch files");const n=await e.json(),r={};return n.forEach(s=>{r[s.path]=s.size||0}),r},refetchInterval:3e4});return t};function Ut({className:t,...e}){return y.jsx("div",{"data-slot":"card",className:Qt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function Fn({className:t,...e}){return y.jsx("div",{"data-slot":"card-header",className:Qt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Xn({className:t,...e}){return y.jsx("div",{"data-slot":"card-title",className:Qt("leading-none font-thin",t),...e})}function Kt({className:t,...e}){return y.jsx("div",{"data-slot":"card-content",className:Qt("px-6",t),...e})}const I6=({bundle:t,isSelected:e,onSelect:n})=>{const r=t.name.startsWith("smart:"),s=r?t.name.replace("smart:",""):t.name;return y.jsxs(Ut,{className:`cursor-pointer transition-all border-vesper bg-vesper-card hover:border-vesper-accent ${e?"ring-1 ring-primary border-primary":""}`,onClick:()=>n(t.name),children:[y.jsx(Fn,{className:"pb-2",children:y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[r?y.jsx(Ag,{className:"w-3 h-3 text-vesper-accent"}):y.jsx(ZD,{className:"w-3 h-3 text-muted-foreground"}),y.jsx("h3",{className:"text-sm font-thin truncate color-vesper-fg",children:s})]}),y.jsx(nn,{variant:"outline",className:"text-[10px] font-thin uppercase tracking-tighter border-vesper color-vesper-muted px-1 h-4",children:r?"Smart":"Manual"})]}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.changed?"bg-vesper-warning animate-pulse":"bg-vesper-success"}`}),y.jsx("span",{className:"text-[10px] font-thin uppercase tracking-widest color-vesper-muted",children:t.changed?"Syncing":"In Context"})]})]})}),y.jsx(Kt,{className:"pt-0",children:y.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[y.jsxs("div",{className:"flex items-center justify-between text-[11px] font-thin color-vesper-muted",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(ER,{className:"w-3 h-3"}),y.jsxs("span",{children:[t.fileCount," units"]})]}),y.jsx("span",{children:N6(t.size)})]}),t.generated&&y.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-thin color-vesper-muted mt-2 opacity-50",children:[y.jsx(L_,{className:"w-2.5 h-2.5"}),y.jsxs("span",{children:["Synced ",new Date(t.generated).toLocaleTimeString()]})]})]})})]})};function WT(t,[e,n]){return Math.min(n,Math.max(e,t))}var hb=0;function O6(){I.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??qT()),document.body.insertAdjacentElement("beforeend",t[1]??qT()),hb++,()=>{hb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hb--}},[])}function qT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var db="focusScope.autoFocusOnMount",pb="focusScope.autoFocusOnUnmount",XT={bubbles:!1,cancelable:!0},P6="FocusScope",cC=I.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,u]=I.useState(null),h=As(s),d=As(i),g=I.useRef(null),b=jn(e,A=>u(A)),w=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let A=function(k){if(w.paused||!l)return;const F=k.target;l.contains(F)?g.current=F:Co(g.current,{select:!0})},C=function(k){if(w.paused||!l)return;const F=k.relatedTarget;F!==null&&(l.contains(F)||Co(g.current,{select:!0}))},M=function(k){if(document.activeElement===document.body)for(const B of k)B.removedNodes.length>0&&Co(l)};document.addEventListener("focusin",A),document.addEventListener("focusout",C);const N=new MutationObserver(M);return l&&N.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",C),N.disconnect()}}},[r,l,w.paused]),I.useEffect(()=>{if(l){KT.add(w);const A=document.activeElement;if(!l.contains(A)){const M=new CustomEvent(db,XT);l.addEventListener(db,h),l.dispatchEvent(M),M.defaultPrevented||(D6(L6(uC(l)),{select:!0}),document.activeElement===A&&Co(l))}return()=>{l.removeEventListener(db,h),setTimeout(()=>{const M=new CustomEvent(pb,XT);l.addEventListener(pb,d),l.dispatchEvent(M),M.defaultPrevented||Co(A??document.body,{select:!0}),l.removeEventListener(pb,d),KT.remove(w)},0)}}},[l,h,d,w]);const R=I.useCallback(A=>{if(!n&&!r||w.paused)return;const C=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,M=document.activeElement;if(C&&M){const N=A.currentTarget,[k,F]=F6(N);k&&F?!A.shiftKey&&M===F?(A.preventDefault(),n&&Co(k,{select:!0})):A.shiftKey&&M===k&&(A.preventDefault(),n&&Co(F,{select:!0})):M===N&&A.preventDefault()}},[n,r,w.paused]);return y.jsx(Pt.div,{tabIndex:-1,...a,ref:b,onKeyDown:R})});cC.displayName=P6;function D6(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Co(r,{select:e}),document.activeElement!==n)return}function F6(t){const e=uC(t),n=YT(e,t),r=YT(e.reverse(),t);return[n,r]}function uC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function YT(t,e){for(const n of t)if(!j6(n,{upTo:e}))return n}function j6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function B6(t){return t instanceof HTMLInputElement&&"select"in t}function Co(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&B6(t)&&e&&t.select()}}var KT=U6();function U6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ZT(t,e),t.unshift(e)},remove(e){var n;t=ZT(t,e),(n=t[0])==null||n.resume()}}}function ZT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function L6(t){return t.filter(e=>e.tagName!=="A")}const z6=["top","right","bottom","left"],Qo=Math.min,as=Math.max,vp=Math.round,Nd=Math.floor,pi=t=>({x:t,y:t}),V6={left:"right",right:"left",bottom:"top",top:"bottom"},$6={start:"end",end:"start"};function q_(t,e,n){return as(t,Qo(e,n))}function Hi(t,e){return typeof t=="function"?t(e):t}function Wi(t){return t.split("-")[0]}function Zc(t){return t.split("-")[1]}function Tv(t){return t==="x"?"y":"x"}function Ev(t){return t==="y"?"height":"width"}function fi(t){return["top","bottom"].includes(Wi(t))?"y":"x"}function Av(t){return Tv(fi(t))}function H6(t,e,n){n===void 0&&(n=!1);const r=Zc(t),s=Av(t),i=Ev(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=wp(a)),[a,wp(a)]}function W6(t){const e=wp(t);return[X_(t),e,X_(e)]}function X_(t){return t.replace(/start|end/g,e=>$6[e])}function q6(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function X6(t,e,n,r){const s=Zc(t);let i=q6(Wi(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(X_)))),i}function wp(t){return t.replace(/left|right|bottom|top/g,e=>V6[e])}function Y6(t){return{top:0,right:0,bottom:0,left:0,...t}}function fC(t){return typeof t!="number"?Y6(t):{top:t,right:t,bottom:t,left:t}}function Sp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function QT(t,e,n){let{reference:r,floating:s}=t;const i=fi(e),a=Av(e),l=Ev(a),u=Wi(e),h=i==="y",d=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,b=r[l]/2-s[l]/2;let w;switch(u){case"top":w={x:d,y:r.y-s.height};break;case"bottom":w={x:d,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(Zc(e)){case"start":w[a]-=b*(n&&h?-1:1);break;case"end":w[a]+=b*(n&&h?-1:1);break}return w}const K6=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:g}=QT(h,r,u),b=r,w={},R=0;for(let A=0;A<l.length;A++){const{name:C,fn:M}=l[A],{x:N,y:k,data:F,reset:B}=await M({x:d,y:g,initialPlacement:r,placement:b,strategy:s,middlewareData:w,rects:h,platform:a,elements:{reference:t,floating:e}});d=N??d,g=k??g,w={...w,[C]:{...w[C],...F}},B&&R<=50&&(R++,typeof B=="object"&&(B.placement&&(b=B.placement),B.rects&&(h=B.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):B.rects),{x:d,y:g}=QT(h,b,u)),A=-1)}return{x:d,y:g,placement:b,strategy:s,middlewareData:w}};async function Bf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:b=!1,padding:w=0}=Hi(e,t),R=fC(w),C=l[b?g==="floating"?"reference":"floating":g],M=Sp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(C)))==null||n?C:C.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:d,strategy:u})),N=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),F=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},B=Sp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:k,strategy:u}):N);return{top:(M.top-B.top+R.top)/F.y,bottom:(B.bottom-M.bottom+R.bottom)/F.y,left:(M.left-B.left+R.left)/F.x,right:(B.right-M.right+R.right)/F.x}}const Z6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:u}=e,{element:h,padding:d=0}=Hi(t,e)||{};if(h==null)return{};const g=fC(d),b={x:n,y:r},w=Av(s),R=Ev(w),A=await a.getDimensions(h),C=w==="y",M=C?"top":"left",N=C?"bottom":"right",k=C?"clientHeight":"clientWidth",F=i.reference[R]+i.reference[w]-b[w]-i.floating[R],B=b[w]-i.reference[w],P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let X=P?P[k]:0;(!X||!await(a.isElement==null?void 0:a.isElement(P)))&&(X=l.floating[k]||i.floating[R]);const Y=F/2-B/2,G=X/2-A[R]/2-1,K=Qo(g[M],G),Q=Qo(g[N],G),ie=K,xe=X-A[R]-Q,oe=X/2-A[R]/2+Y,Re=q_(ie,oe,xe),re=!u.arrow&&Zc(s)!=null&&oe!==Re&&i.reference[R]/2-(oe<ie?K:Q)-A[R]/2<0,Ee=re?oe<ie?oe-ie:oe-xe:0;return{[w]:b[w]+Ee,data:{[w]:Re,centerOffset:oe-Re-Ee,...re&&{alignmentOffset:Ee}},reset:re}}}),Q6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:u,elements:h}=e,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:A=!0,...C}=Hi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const M=Wi(s),N=fi(l),k=Wi(l)===l,F=await(u.isRTL==null?void 0:u.isRTL(h.floating)),B=b||(k||!A?[wp(l)]:W6(l)),P=R!=="none";!b&&P&&B.push(...X6(l,A,R,F));const X=[l,...B],Y=await Bf(e,C),G=[];let K=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&G.push(Y[M]),g){const oe=H6(s,a,F);G.push(Y[oe[0]],Y[oe[1]])}if(K=[...K,{placement:s,overflows:G}],!G.every(oe=>oe<=0)){var Q,ie;const oe=(((Q=i.flip)==null?void 0:Q.index)||0)+1,Re=X[oe];if(Re&&(!(g==="alignment"?N!==fi(Re):!1)||K.every(ue=>ue.overflows[0]>0&&fi(ue.placement)===N)))return{data:{index:oe,overflows:K},reset:{placement:Re}};let re=(ie=K.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,ue)=>Ee.overflows[1]-ue.overflows[1])[0])==null?void 0:ie.placement;if(!re)switch(w){case"bestFit":{var xe;const Ee=(xe=K.filter(ue=>{if(P){const Ve=fi(ue.placement);return Ve===N||Ve==="y"}return!0}).map(ue=>[ue.placement,ue.overflows.filter(Ve=>Ve>0).reduce((Ve,D)=>Ve+D,0)]).sort((ue,Ve)=>ue[1]-Ve[1])[0])==null?void 0:xe[0];Ee&&(re=Ee);break}case"initialPlacement":re=l;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function GT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function JT(t){return z6.some(e=>t[e]>=0)}const G6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Hi(t,e);switch(r){case"referenceHidden":{const i=await Bf(e,{...s,elementContext:"reference"}),a=GT(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:JT(a)}}}case"escaped":{const i=await Bf(e,{...s,altBoundary:!0}),a=GT(i,n.floating);return{data:{escapedOffsets:a,escaped:JT(a)}}}default:return{}}}}};async function J6(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Wi(n),l=Zc(n),u=fi(n)==="y",h=["left","top"].includes(a)?-1:1,d=i&&u?-1:1,g=Hi(e,t);let{mainAxis:b,crossAxis:w,alignmentAxis:R}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof R=="number"&&(w=l==="end"?R*-1:R),u?{x:w*d,y:b*h}:{x:b*h,y:w*d}}const eB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,u=await J6(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:a}}}}},tB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:C=>{let{x:M,y:N}=C;return{x:M,y:N}}},...u}=Hi(t,e),h={x:n,y:r},d=await Bf(e,u),g=fi(Wi(s)),b=Tv(g);let w=h[b],R=h[g];if(i){const C=b==="y"?"top":"left",M=b==="y"?"bottom":"right",N=w+d[C],k=w-d[M];w=q_(N,w,k)}if(a){const C=g==="y"?"top":"left",M=g==="y"?"bottom":"right",N=R+d[C],k=R-d[M];R=q_(N,R,k)}const A=l.fn({...e,[b]:w,[g]:R});return{...A,data:{x:A.x-n,y:A.y-r,enabled:{[b]:i,[g]:a}}}}}},nB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=Hi(t,e),d={x:n,y:r},g=fi(s),b=Tv(g);let w=d[b],R=d[g];const A=Hi(l,e),C=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(u){const k=b==="y"?"height":"width",F=i.reference[b]-i.floating[k]+C.mainAxis,B=i.reference[b]+i.reference[k]-C.mainAxis;w<F?w=F:w>B&&(w=B)}if(h){var M,N;const k=b==="y"?"width":"height",F=["top","left"].includes(Wi(s)),B=i.reference[g]-i.floating[k]+(F&&((M=a.offset)==null?void 0:M[g])||0)+(F?0:C.crossAxis),P=i.reference[g]+i.reference[k]+(F?0:((N=a.offset)==null?void 0:N[g])||0)-(F?C.crossAxis:0);R<B?R=B:R>P&&(R=P)}return{[b]:w,[g]:R}}}},rB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:u=()=>{},...h}=Hi(t,e),d=await Bf(e,h),g=Wi(s),b=Zc(s),w=fi(s)==="y",{width:R,height:A}=i.floating;let C,M;g==="top"||g==="bottom"?(C=g,M=b===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(M=g,C=b==="end"?"top":"bottom");const N=A-d.top-d.bottom,k=R-d.left-d.right,F=Qo(A-d[C],N),B=Qo(R-d[M],k),P=!e.middlewareData.shift;let X=F,Y=B;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(Y=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(X=N),P&&!b){const K=as(d.left,0),Q=as(d.right,0),ie=as(d.top,0),xe=as(d.bottom,0);w?Y=R-2*(K!==0||Q!==0?K+Q:as(d.left,d.right)):X=A-2*(ie!==0||xe!==0?ie+xe:as(d.top,d.bottom))}await u({...e,availableWidth:Y,availableHeight:X});const G=await a.getDimensions(l.floating);return R!==G.width||A!==G.height?{reset:{rects:!0}}:{}}}};function Cg(){return typeof window<"u"}function Qc(t){return hC(t)?(t.nodeName||"").toLowerCase():"#document"}function us(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bi(t){var e;return(e=(hC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hC(t){return Cg()?t instanceof Node||t instanceof us(t).Node:!1}function qs(t){return Cg()?t instanceof Element||t instanceof us(t).Element:!1}function gi(t){return Cg()?t instanceof HTMLElement||t instanceof us(t).HTMLElement:!1}function e2(t){return!Cg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof us(t).ShadowRoot}function rh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function sB(t){return["table","td","th"].includes(Qc(t))}function kg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Rv(t){const e=Cv(),n=qs(t)?Xs(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function iB(t){let e=Go(t);for(;gi(e)&&!Ic(e);){if(Rv(e))return e;if(kg(e))return null;e=Go(e)}return null}function Cv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ic(t){return["html","body","#document"].includes(Qc(t))}function Xs(t){return us(t).getComputedStyle(t)}function Ng(t){return qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Go(t){if(Qc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||e2(t)&&t.host||bi(t);return e2(e)?e.host:e}function dC(t){const e=Go(t);return Ic(e)?t.ownerDocument?t.ownerDocument.body:t.body:gi(e)&&rh(e)?e:dC(e)}function Uf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=dC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=us(s);if(i){const l=Y_(a);return e.concat(a,a.visualViewport||[],rh(s)?s:[],l&&n?Uf(l):[])}return e.concat(s,Uf(s,[],n))}function Y_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pC(t){const e=Xs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gi(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=vp(n)!==i||vp(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function kv(t){return qs(t)?t:t.contextElement}function hc(t){const e=kv(t);if(!gi(e))return pi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=pC(e);let a=(i?vp(n.width):n.width)/r,l=(i?vp(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const oB=pi(0);function gC(t){const e=us(t);return!Cv()||!e.visualViewport?oB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==us(t)?!1:e}function Xa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=kv(t);let a=pi(1);e&&(r?qs(r)&&(a=hc(r)):a=hc(t));const l=aB(i,n,r)?gC(i):pi(0);let u=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,d=s.width/a.x,g=s.height/a.y;if(i){const b=us(i),w=r&&qs(r)?us(r):r;let R=b,A=Y_(R);for(;A&&r&&w!==R;){const C=hc(A),M=A.getBoundingClientRect(),N=Xs(A),k=M.left+(A.clientLeft+parseFloat(N.paddingLeft))*C.x,F=M.top+(A.clientTop+parseFloat(N.paddingTop))*C.y;u*=C.x,h*=C.y,d*=C.x,g*=C.y,u+=k,h+=F,R=us(A),A=Y_(R)}}return Sp({width:d,height:g,x:u,y:h})}function Nv(t,e){const n=Ng(t).scrollLeft;return e?e.left+n:Xa(bi(t)).left+n}function mC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Nv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function lB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=bi(r),l=e?kg(e.floating):!1;if(r===a||l&&i)return n;let u={scrollLeft:0,scrollTop:0},h=pi(1);const d=pi(0),g=gi(r);if((g||!g&&!i)&&((Qc(r)!=="body"||rh(a))&&(u=Ng(r)),gi(r))){const w=Xa(r);h=hc(r),d.x=w.x+r.clientLeft,d.y=w.y+r.clientTop}const b=a&&!g&&!i?mC(a,u,!0):pi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+d.x+b.x,y:n.y*h.y-u.scrollTop*h.y+d.y+b.y}}function cB(t){return Array.from(t.getClientRects())}function uB(t){const e=bi(t),n=Ng(t),r=t.ownerDocument.body,s=as(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=as(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Nv(t);const l=-n.scrollTop;return Xs(r).direction==="rtl"&&(a+=as(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function fB(t,e){const n=us(t),r=bi(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,u=0;if(s){i=s.width,a=s.height;const h=Cv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:i,height:a,x:l,y:u}}function hB(t,e){const n=Xa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=gi(t)?hc(t):pi(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,u=s*i.x,h=r*i.y;return{width:a,height:l,x:u,y:h}}function t2(t,e,n){let r;if(e==="viewport")r=fB(t,n);else if(e==="document")r=uB(bi(t));else if(qs(e))r=hB(e,n);else{const s=gC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Sp(r)}function yC(t,e){const n=Go(t);return n===e||!qs(n)||Ic(n)?!1:Xs(n).position==="fixed"||yC(n,e)}function dB(t,e){const n=e.get(t);if(n)return n;let r=Uf(t,[],!1).filter(l=>qs(l)&&Qc(l)!=="body"),s=null;const i=Xs(t).position==="fixed";let a=i?Go(t):t;for(;qs(a)&&!Ic(a);){const l=Xs(a),u=Rv(a);!u&&l.position==="fixed"&&(s=null),(i?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||rh(a)&&!u&&yC(t,a))?r=r.filter(d=>d!==a):s=l,a=Go(a)}return e.set(t,r),r}function pB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?kg(e)?[]:dB(e,this._c):[].concat(n),r],l=a[0],u=a.reduce((h,d)=>{const g=t2(e,d,s);return h.top=as(g.top,h.top),h.right=Qo(g.right,h.right),h.bottom=Qo(g.bottom,h.bottom),h.left=as(g.left,h.left),h},t2(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function gB(t){const{width:e,height:n}=pC(t);return{width:e,height:n}}function mB(t,e,n){const r=gi(e),s=bi(e),i=n==="fixed",a=Xa(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const u=pi(0);function h(){u.x=Nv(s)}if(r||!r&&!i)if((Qc(e)!=="body"||rh(s))&&(l=Ng(e)),r){const w=Xa(e,!0,i,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else s&&h();i&&!r&&s&&h();const d=s&&!r&&!i?mC(s,l):pi(0),g=a.left+l.scrollLeft-u.x-d.x,b=a.top+l.scrollTop-u.y-d.y;return{x:g,y:b,width:a.width,height:a.height}}function gb(t){return Xs(t).position==="static"}function n2(t,e){if(!gi(t)||Xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return bi(t)===n&&(n=n.ownerDocument.body),n}function bC(t,e){const n=us(t);if(kg(t))return n;if(!gi(t)){let s=Go(t);for(;s&&!Ic(s);){if(qs(s)&&!gb(s))return s;s=Go(s)}return n}let r=n2(t,e);for(;r&&sB(r)&&gb(r);)r=n2(r,e);return r&&Ic(r)&&gb(r)&&!Rv(r)?n:r||iB(t)||n}const yB=async function(t){const e=this.getOffsetParent||bC,n=this.getDimensions,r=await n(t.floating);return{reference:mB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bB(t){return Xs(t).direction==="rtl"}const _B={convertOffsetParentRelativeRectToViewportRelativeRect:lB,getDocumentElement:bi,getClippingRect:pB,getOffsetParent:bC,getElementRects:yB,getClientRects:cB,getDimensions:gB,getScale:hc,isElement:qs,isRTL:bB};function _C(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function xB(t,e){let n=null,r;const s=bi(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),i();const h=t.getBoundingClientRect(),{left:d,top:g,width:b,height:w}=h;if(l||e(),!b||!w)return;const R=Nd(g),A=Nd(s.clientWidth-(d+b)),C=Nd(s.clientHeight-(g+w)),M=Nd(d),k={rootMargin:-R+"px "+-A+"px "+-C+"px "+-M+"px",threshold:as(0,Qo(1,u))||1};let F=!0;function B(P){const X=P[0].intersectionRatio;if(X!==u){if(!F)return a();X?a(!1,X):r=setTimeout(()=>{a(!1,1e-7)},1e3)}X===1&&!_C(h,t.getBoundingClientRect())&&a(),F=!1}try{n=new IntersectionObserver(B,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(B,k)}n.observe(t)}return a(!0),i}function vB(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=kv(t),d=s||i?[...h?Uf(h):[],...Uf(e)]:[];d.forEach(M=>{s&&M.addEventListener("scroll",n,{passive:!0}),i&&M.addEventListener("resize",n)});const g=h&&l?xB(h,n):null;let b=-1,w=null;a&&(w=new ResizeObserver(M=>{let[N]=M;N&&N.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var k;(k=w)==null||k.observe(e)})),n()}),h&&!u&&w.observe(h),w.observe(e));let R,A=u?Xa(t):null;u&&C();function C(){const M=Xa(t);A&&!_C(A,M)&&n(),A=M,R=requestAnimationFrame(C)}return n(),()=>{var M;d.forEach(N=>{s&&N.removeEventListener("scroll",n),i&&N.removeEventListener("resize",n)}),g==null||g(),(M=w)==null||M.disconnect(),w=null,u&&cancelAnimationFrame(R)}}const wB=eB,SB=tB,TB=Q6,EB=rB,AB=G6,r2=Z6,RB=nB,CB=(t,e,n)=>{const r=new Map,s={platform:_B,...n},i={...s.platform,_c:r};return K6(t,e,{...s,platform:i})};var kB=typeof document<"u",NB=function(){},ip=kB?I.useLayoutEffect:NB;function Tp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Tp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function xC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function s2(t,e){const n=xC(t);return Math.round(e*n)/n}function mb(t){const e=I.useRef(t);return ip(()=>{e.current=t}),e}function MB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:u,open:h}=t,[d,g]=I.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,w]=I.useState(r);Tp(b,r)||w(r);const[R,A]=I.useState(null),[C,M]=I.useState(null),N=I.useCallback(ue=>{ue!==P.current&&(P.current=ue,A(ue))},[]),k=I.useCallback(ue=>{ue!==X.current&&(X.current=ue,M(ue))},[]),F=i||R,B=a||C,P=I.useRef(null),X=I.useRef(null),Y=I.useRef(d),G=u!=null,K=mb(u),Q=mb(s),ie=mb(h),xe=I.useCallback(()=>{if(!P.current||!X.current)return;const ue={placement:e,strategy:n,middleware:b};Q.current&&(ue.platform=Q.current),CB(P.current,X.current,ue).then(Ve=>{const D={...Ve,isPositioned:ie.current!==!1};oe.current&&!Tp(Y.current,D)&&(Y.current=D,Xc.flushSync(()=>{g(D)}))})},[b,e,n,Q,ie]);ip(()=>{h===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,g(ue=>({...ue,isPositioned:!1})))},[h]);const oe=I.useRef(!1);ip(()=>(oe.current=!0,()=>{oe.current=!1}),[]),ip(()=>{if(F&&(P.current=F),B&&(X.current=B),F&&B){if(K.current)return K.current(F,B,xe);xe()}},[F,B,xe,K,G]);const Re=I.useMemo(()=>({reference:P,floating:X,setReference:N,setFloating:k}),[N,k]),re=I.useMemo(()=>({reference:F,floating:B}),[F,B]),Ee=I.useMemo(()=>{const ue={position:n,left:0,top:0};if(!re.floating)return ue;const Ve=s2(re.floating,d.x),D=s2(re.floating,d.y);return l?{...ue,transform:"translate("+Ve+"px, "+D+"px)",...xC(re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Ve,top:D}},[n,l,re.floating,d.x,d.y]);return I.useMemo(()=>({...d,update:xe,refs:Re,elements:re,floatingStyles:Ee}),[d,xe,Re,re,Ee])}const IB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?r2({element:r.current,padding:s}).fn(n):{}:r?r2({element:r,padding:s}).fn(n):{}}}},OB=(t,e)=>({...wB(t),options:[t,e]}),PB=(t,e)=>({...SB(t),options:[t,e]}),DB=(t,e)=>({...RB(t),options:[t,e]}),FB=(t,e)=>({...TB(t),options:[t,e]}),jB=(t,e)=>({...EB(t),options:[t,e]}),BB=(t,e)=>({...AB(t),options:[t,e]}),UB=(t,e)=>({...IB(t),options:[t,e]});var LB="Arrow",vC=I.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return y.jsx(Pt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});vC.displayName=LB;var zB=vC;function VB(t){const[e,n]=I.useState(void 0);return gr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,l=h.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Mv="Popper",[wC,SC]=tl(Mv),[$B,TC]=wC(Mv),EC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=I.useState(null);return y.jsx($B,{scope:e,anchor:r,onAnchorChange:s,children:n})};EC.displayName=Mv;var AC="PopperAnchor",RC=I.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=TC(AC,n),a=I.useRef(null),l=jn(e,a);return I.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:y.jsx(Pt.div,{...s,ref:l})});RC.displayName=AC;var Iv="PopperContent",[HB,WB]=wC(Iv),CC=I.forwardRef((t,e)=>{var Ce,De,Ge,Ke,nt,st;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:d=0,sticky:g="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:R,...A}=t,C=TC(Iv,n),[M,N]=I.useState(null),k=jn(e,ct=>N(ct)),[F,B]=I.useState(null),P=VB(F),X=(P==null?void 0:P.width)??0,Y=(P==null?void 0:P.height)??0,G=r+(i!=="center"?"-"+i:""),K=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Q=Array.isArray(h)?h:[h],ie=Q.length>0,xe={padding:K,boundary:Q.filter(XB),altBoundary:ie},{refs:oe,floatingStyles:Re,placement:re,isPositioned:Ee,middlewareData:ue}=MB({strategy:"fixed",placement:G,whileElementsMounted:(...ct)=>vB(...ct,{animationFrame:w==="always"}),elements:{reference:C.anchor},middleware:[OB({mainAxis:s+Y,alignmentAxis:a}),u&&PB({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?DB():void 0,...xe}),u&&FB({...xe}),jB({...xe,apply:({elements:ct,rects:Xt,availableWidth:In,availableHeight:ar})=>{const{width:xn,height:Tn}=Xt.reference,fn=ct.floating.style;fn.setProperty("--radix-popper-available-width",`${In}px`),fn.setProperty("--radix-popper-available-height",`${ar}px`),fn.setProperty("--radix-popper-anchor-width",`${xn}px`),fn.setProperty("--radix-popper-anchor-height",`${Tn}px`)}}),F&&UB({element:F,padding:l}),YB({arrowWidth:X,arrowHeight:Y}),b&&BB({strategy:"referenceHidden",...xe})]}),[Ve,D]=MC(re),ne=As(R);gr(()=>{Ee&&(ne==null||ne())},[Ee,ne]);const ye=(Ce=ue.arrow)==null?void 0:Ce.x,U=(De=ue.arrow)==null?void 0:De.y,we=((Ge=ue.arrow)==null?void 0:Ge.centerOffset)!==0,[ce,ke]=I.useState();return gr(()=>{M&&ke(window.getComputedStyle(M).zIndex)},[M]),y.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...Re,transform:Ee?Re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Ke=ue.transformOrigin)==null?void 0:Ke.x,(nt=ue.transformOrigin)==null?void 0:nt.y].join(" "),...((st=ue.hide)==null?void 0:st.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(HB,{scope:n,placedSide:Ve,onArrowChange:B,arrowX:ye,arrowY:U,shouldHideArrow:we,children:y.jsx(Pt.div,{"data-side":Ve,"data-align":D,...A,ref:k,style:{...A.style,animation:Ee?void 0:"none"}})})})});CC.displayName=Iv;var kC="PopperArrow",qB={top:"bottom",right:"left",bottom:"top",left:"right"},NC=I.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=WB(kC,r),a=qB[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(zB,{...s,ref:n,style:{...s.style,display:"block"}})})});NC.displayName=kC;function XB(t){return t!==null}var YB=t=>({name:"transformOrigin",options:t,fn(e){var C,M,N;const{placement:n,rects:r,middlewareData:s}=e,a=((C=s.arrow)==null?void 0:C.centerOffset)!==0,l=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[h,d]=MC(n),g={start:"0%",center:"50%",end:"100%"}[d],b=(((M=s.arrow)==null?void 0:M.x)??0)+l/2,w=(((N=s.arrow)==null?void 0:N.y)??0)+u/2;let R="",A="";return h==="bottom"?(R=a?g:`${b}px`,A=`${-u}px`):h==="top"?(R=a?g:`${b}px`,A=`${r.floating.height+u}px`):h==="right"?(R=`${-u}px`,A=a?g:`${w}px`):h==="left"&&(R=`${r.floating.width+u}px`,A=a?g:`${w}px`),{data:{x:R,y:A}}}});function MC(t){const[e,n="center"]=t.split("-");return[e,n]}var KB=EC,ZB=RC,QB=CC,GB=NC;function JB(t){const e=I.useRef({value:t,previous:t});return I.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var eU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Vl=new WeakMap,Md=new WeakMap,Id={},yb=0,IC=function(t){return t&&(t.host||IC(t.parentNode))},tU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},nU=function(t,e,n,r){var s=tU(e,Array.isArray(t)?t:[t]);Id[n]||(Id[n]=new WeakMap);var i=Id[n],a=[],l=new Set,u=new Set(s),h=function(g){!g||l.has(g)||(l.add(g),h(g.parentNode))};s.forEach(h);var d=function(g){!g||u.has(g)||Array.prototype.forEach.call(g.children,function(b){if(l.has(b))d(b);else try{var w=b.getAttribute(r),R=w!==null&&w!=="false",A=(Vl.get(b)||0)+1,C=(i.get(b)||0)+1;Vl.set(b,A),i.set(b,C),a.push(b),A===1&&R&&Md.set(b,!0),C===1&&b.setAttribute(n,"true"),R||b.setAttribute(r,"true")}catch(M){console.error("aria-hidden: cannot operate on ",b,M)}})};return d(e),l.clear(),yb++,function(){a.forEach(function(g){var b=Vl.get(g)-1,w=i.get(g)-1;Vl.set(g,b),i.set(g,w),b||(Md.has(g)||g.removeAttribute(r),Md.delete(g)),w||g.removeAttribute(n)}),yb--,yb||(Vl=new WeakMap,Vl=new WeakMap,Md=new WeakMap,Id={})}},rU=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=eU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),nU(r,s,n,"aria-hidden")):function(){return null}},ci=function(){return ci=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ci.apply(this,arguments)};function OC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var op="right-scroll-bar-position",ap="width-before-scroll-bar",iU="with-scroll-bars-hidden",oU="--removed-body-scroll-bar-size";function bb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function aU(t,e){var n=I.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var lU=typeof window<"u"?I.useLayoutEffect:I.useEffect,i2=new WeakMap;function cU(t,e){var n=aU(null,function(r){return t.forEach(function(s){return bb(s,r)})});return lU(function(){var r=i2.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||bb(l,null)}),i.forEach(function(l){s.has(l)||bb(l,a)})}i2.set(n,t)},[t]),n}function uU(t){return t}function fU(t,e){e===void 0&&(e=uU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var u=function(){var d=a;a=[],d.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(d){a.push(d),h()},filter:function(d){return a=a.filter(d),n}}}};return s}function hU(t){t===void 0&&(t={});var e=fU(null);return e.options=ci({async:!0,ssr:!1},t),e}var PC=function(t){var e=t.sideCar,n=OC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,ci({},n))};PC.isSideCarExport=!0;function dU(t,e){return t.useMedium(e),PC}var DC=hU(),_b=function(){},Mg=I.forwardRef(function(t,e){var n=I.useRef(null),r=I.useState({onScrollCapture:_b,onWheelCapture:_b,onTouchMoveCapture:_b}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,u=t.className,h=t.removeScrollBar,d=t.enabled,g=t.shards,b=t.sideCar,w=t.noRelative,R=t.noIsolation,A=t.inert,C=t.allowPinchZoom,M=t.as,N=M===void 0?"div":M,k=t.gapMode,F=OC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=b,P=cU([n,e]),X=ci(ci({},F),s);return I.createElement(I.Fragment,null,d&&I.createElement(B,{sideCar:DC,removeScrollBar:h,shards:g,noRelative:w,noIsolation:R,inert:A,setCallbacks:i,allowPinchZoom:!!C,lockRef:n,gapMode:k}),a?I.cloneElement(I.Children.only(l),ci(ci({},X),{ref:P})):I.createElement(N,ci({},X,{className:u,ref:P}),l))});Mg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mg.classNames={fullWidth:ap,zeroRight:op};var pU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=pU();return e&&t.setAttribute("nonce",e),t}function mU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var bU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=gU())&&(mU(e,n),yU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_U=function(){var t=bU();return function(e,n){I.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},FC=function(){var t=_U(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},xU={left:0,top:0,right:0,gap:0},xb=function(t){return parseInt(t||"",10)||0},vU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[xb(n),xb(r),xb(s)]},wU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return xU;var e=vU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},SU=FC(),dc="data-scroll-locked",TU=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(iU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(dc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(op,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ap,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(op," .").concat(op,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ap," .").concat(ap,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dc,`] {
    `).concat(oU,": ").concat(l,`px;
  }
`)},o2=function(){var t=parseInt(document.body.getAttribute(dc)||"0",10);return isFinite(t)?t:0},EU=function(){I.useEffect(function(){return document.body.setAttribute(dc,(o2()+1).toString()),function(){var t=o2()-1;t<=0?document.body.removeAttribute(dc):document.body.setAttribute(dc,t.toString())}},[])},AU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;EU();var i=I.useMemo(function(){return wU(s)},[s]);return I.createElement(SU,{styles:TU(i,!e,s,n?"":"!important")})},K_=!1;if(typeof window<"u")try{var Od=Object.defineProperty({},"passive",{get:function(){return K_=!0,!0}});window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{K_=!1}var $l=K_?{passive:!1}:!1,RU=function(t){return t.tagName==="TEXTAREA"},jC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!RU(t)&&n[e]==="visible")},CU=function(t){return jC(t,"overflowY")},kU=function(t){return jC(t,"overflowX")},a2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=BC(t,r);if(s){var i=UC(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},MU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},BC=function(t,e){return t==="v"?CU(e):kU(e)},UC=function(t,e){return t==="v"?NU(e):MU(e)},IU=function(t,e){return t==="h"&&e==="rtl"?-1:1},OU=function(t,e,n,r,s){var i=IU(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,u=e.contains(l),h=!1,d=a>0,g=0,b=0;do{if(!l)break;var w=UC(t,l),R=w[0],A=w[1],C=w[2],M=A-C-i*R;(R||M)&&BC(t,l)&&(g+=M,b+=R);var N=l.parentNode;l=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(d&&Math.abs(g)<1||!d&&Math.abs(b)<1)&&(h=!0),h},Pd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},l2=function(t){return[t.deltaX,t.deltaY]},c2=function(t){return t&&"current"in t?t.current:t},PU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},DU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},FU=0,Hl=[];function jU(t){var e=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),s=I.useState(FU++)[0],i=I.useState(FC)[0],a=I.useRef(t);I.useEffect(function(){a.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var A=sU([t.lockRef.current],(t.shards||[]).map(c2),!0).filter(Boolean);return A.forEach(function(C){return C.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),A.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=I.useCallback(function(A,C){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var M=Pd(A),N=n.current,k="deltaX"in A?A.deltaX:N[0]-M[0],F="deltaY"in A?A.deltaY:N[1]-M[1],B,P=A.target,X=Math.abs(k)>Math.abs(F)?"h":"v";if("touches"in A&&X==="h"&&P.type==="range")return!1;var Y=a2(X,P);if(!Y)return!0;if(Y?B=X:(B=X==="v"?"h":"v",Y=a2(X,P)),!Y)return!1;if(!r.current&&"changedTouches"in A&&(k||F)&&(r.current=B),!B)return!0;var G=r.current||B;return OU(G,C,A,G==="h"?k:F)},[]),u=I.useCallback(function(A){var C=A;if(!(!Hl.length||Hl[Hl.length-1]!==i)){var M="deltaY"in C?l2(C):Pd(C),N=e.current.filter(function(B){return B.name===C.type&&(B.target===C.target||C.target===B.shadowParent)&&PU(B.delta,M)})[0];if(N&&N.should){C.cancelable&&C.preventDefault();return}if(!N){var k=(a.current.shards||[]).map(c2).filter(Boolean).filter(function(B){return B.contains(C.target)}),F=k.length>0?l(C,k[0]):!a.current.noIsolation;F&&C.cancelable&&C.preventDefault()}}},[]),h=I.useCallback(function(A,C,M,N){var k={name:A,delta:C,target:M,should:N,shadowParent:BU(M)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(F){return F!==k})},1)},[]),d=I.useCallback(function(A){n.current=Pd(A),r.current=void 0},[]),g=I.useCallback(function(A){h(A.type,l2(A),A.target,l(A,t.lockRef.current))},[]),b=I.useCallback(function(A){h(A.type,Pd(A),A.target,l(A,t.lockRef.current))},[]);I.useEffect(function(){return Hl.push(i),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:b}),document.addEventListener("wheel",u,$l),document.addEventListener("touchmove",u,$l),document.addEventListener("touchstart",d,$l),function(){Hl=Hl.filter(function(A){return A!==i}),document.removeEventListener("wheel",u,$l),document.removeEventListener("touchmove",u,$l),document.removeEventListener("touchstart",d,$l)}},[]);var w=t.removeScrollBar,R=t.inert;return I.createElement(I.Fragment,null,R?I.createElement(i,{styles:DU(s)}):null,w?I.createElement(AU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function BU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const UU=dU(DC,jU);var LC=I.forwardRef(function(t,e){return I.createElement(Mg,ci({},t,{ref:e,sideCar:UU}))});LC.classNames=Mg.classNames;var LU=[" ","Enter","ArrowUp","ArrowDown"],zU=[" ","Enter"],Ya="Select",[Ig,Og,VU]=uv(Ya),[Gc,dre]=tl(Ya,[VU,SC]),Pg=SC(),[$U,ea]=Gc(Ya),[HU,WU]=Gc(Ya),zC=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:u,dir:h,name:d,autoComplete:g,disabled:b,required:w,form:R}=t,A=Pg(e),[C,M]=I.useState(null),[N,k]=I.useState(null),[F,B]=I.useState(!1),P=wv(h),[X,Y]=Df({prop:r,defaultProp:s??!1,onChange:i,caller:Ya}),[G,K]=Df({prop:a,defaultProp:l,onChange:u,caller:Ya}),Q=I.useRef(null),ie=C?R||!!C.closest("form"):!0,[xe,oe]=I.useState(new Set),Re=Array.from(xe).map(re=>re.props.value).join(";");return y.jsx(KB,{...A,children:y.jsxs($U,{required:w,scope:e,trigger:C,onTriggerChange:M,valueNode:N,onValueNodeChange:k,valueNodeHasChildren:F,onValueNodeHasChildrenChange:B,contentId:th(),value:G,onValueChange:K,open:X,onOpenChange:Y,dir:P,triggerPointerDownPosRef:Q,disabled:b,children:[y.jsx(Ig.Provider,{scope:e,children:y.jsx(HU,{scope:t.__scopeSelect,onNativeOptionAdd:I.useCallback(re=>{oe(Ee=>new Set(Ee).add(re))},[]),onNativeOptionRemove:I.useCallback(re=>{oe(Ee=>{const ue=new Set(Ee);return ue.delete(re),ue})},[]),children:n})}),ie?y.jsxs(ck,{"aria-hidden":!0,required:w,tabIndex:-1,name:d,autoComplete:g,value:G,onChange:re=>K(re.target.value),disabled:b,form:R,children:[G===void 0?y.jsx("option",{value:""}):null,Array.from(xe)]},Re):null]})})};zC.displayName=Ya;var VC="SelectTrigger",$C=I.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Pg(n),a=ea(VC,n),l=a.disabled||r,u=jn(e,a.onTriggerChange),h=Og(n),d=I.useRef("touch"),[g,b,w]=fk(A=>{const C=h().filter(k=>!k.disabled),M=C.find(k=>k.value===a.value),N=hk(C,A,M);N!==void 0&&a.onValueChange(N.value)}),R=A=>{l||(a.onOpenChange(!0),w()),A&&(a.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return y.jsx(ZB,{asChild:!0,...i,children:y.jsx(Pt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":uk(a.value)?"":void 0,...s,ref:u,onClick:Ct(s.onClick,A=>{A.currentTarget.focus(),d.current!=="mouse"&&R(A)}),onPointerDown:Ct(s.onPointerDown,A=>{d.current=A.pointerType;const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(R(A),A.preventDefault())}),onKeyDown:Ct(s.onKeyDown,A=>{const C=g.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&b(A.key),!(C&&A.key===" ")&&LU.includes(A.key)&&(R(),A.preventDefault())})})})});$C.displayName=VC;var HC="SelectValue",WC=I.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,u=ea(HC,n),{onValueNodeHasChildrenChange:h}=u,d=i!==void 0,g=jn(e,u.onValueNodeChange);return gr(()=>{h(d)},[h,d]),y.jsx(Pt.span,{...l,ref:g,style:{pointerEvents:"none"},children:uk(u.value)?y.jsx(y.Fragment,{children:a}):i})});WC.displayName=HC;var qU="SelectIcon",qC=I.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return y.jsx(Pt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});qC.displayName=qU;var XU="SelectPortal",XC=t=>y.jsx(hv,{asChild:!0,...t});XC.displayName=XU;var Ka="SelectContent",YC=I.forwardRef((t,e)=>{const n=ea(Ka,t.__scopeSelect),[r,s]=I.useState();if(gr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Xc.createPortal(y.jsx(KC,{scope:t.__scopeSelect,children:y.jsx(Ig.Slot,{scope:t.__scopeSelect,children:y.jsx("div",{children:t.children})})}),i):null}return y.jsx(ZC,{...t,ref:e})});YC.displayName=Ka;var js=10,[KC,ta]=Gc(Ka),YU="SelectContentImpl",KU=Pf("SelectContent.RemoveScroll"),ZC=I.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:w,sticky:R,hideWhenDetached:A,avoidCollisions:C,...M}=t,N=ea(Ka,n),[k,F]=I.useState(null),[B,P]=I.useState(null),X=jn(e,Ce=>F(Ce)),[Y,G]=I.useState(null),[K,Q]=I.useState(null),ie=Og(n),[xe,oe]=I.useState(!1),Re=I.useRef(!1);I.useEffect(()=>{if(k)return rU(k)},[k]),O6();const re=I.useCallback(Ce=>{const[De,...Ge]=ie().map(st=>st.ref.current),[Ke]=Ge.slice(-1),nt=document.activeElement;for(const st of Ce)if(st===nt||(st==null||st.scrollIntoView({block:"nearest"}),st===De&&B&&(B.scrollTop=0),st===Ke&&B&&(B.scrollTop=B.scrollHeight),st==null||st.focus(),document.activeElement!==nt))return},[ie,B]),Ee=I.useCallback(()=>re([Y,k]),[re,Y,k]);I.useEffect(()=>{xe&&Ee()},[xe,Ee]);const{onOpenChange:ue,triggerPointerDownPosRef:Ve}=N;I.useEffect(()=>{if(k){let Ce={x:0,y:0};const De=Ke=>{var nt,st;Ce={x:Math.abs(Math.round(Ke.pageX)-(((nt=Ve.current)==null?void 0:nt.x)??0)),y:Math.abs(Math.round(Ke.pageY)-(((st=Ve.current)==null?void 0:st.y)??0))}},Ge=Ke=>{Ce.x<=10&&Ce.y<=10?Ke.preventDefault():k.contains(Ke.target)||ue(!1),document.removeEventListener("pointermove",De),Ve.current=null};return Ve.current!==null&&(document.addEventListener("pointermove",De),document.addEventListener("pointerup",Ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",De),document.removeEventListener("pointerup",Ge,{capture:!0})}}},[k,ue,Ve]),I.useEffect(()=>{const Ce=()=>ue(!1);return window.addEventListener("blur",Ce),window.addEventListener("resize",Ce),()=>{window.removeEventListener("blur",Ce),window.removeEventListener("resize",Ce)}},[ue]);const[D,ne]=fk(Ce=>{const De=ie().filter(nt=>!nt.disabled),Ge=De.find(nt=>nt.ref.current===document.activeElement),Ke=hk(De,Ce,Ge);Ke&&setTimeout(()=>Ke.ref.current.focus())}),ye=I.useCallback((Ce,De,Ge)=>{const Ke=!Re.current&&!Ge;(N.value!==void 0&&N.value===De||Ke)&&(G(Ce),Ke&&(Re.current=!0))},[N.value]),U=I.useCallback(()=>k==null?void 0:k.focus(),[k]),we=I.useCallback((Ce,De,Ge)=>{const Ke=!Re.current&&!Ge;(N.value!==void 0&&N.value===De||Ke)&&Q(Ce)},[N.value]),ce=r==="popper"?Z_:QC,ke=ce===Z_?{side:l,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:w,sticky:R,hideWhenDetached:A,avoidCollisions:C}:{};return y.jsx(KC,{scope:n,content:k,viewport:B,onViewportChange:P,itemRefCallback:ye,selectedItem:Y,onItemLeave:U,itemTextRefCallback:we,focusSelectedItem:Ee,selectedItemText:K,position:r,isPositioned:xe,searchRef:D,children:y.jsx(LC,{as:KU,allowPinchZoom:!0,children:y.jsx(cC,{asChild:!0,trapped:N.open,onMountAutoFocus:Ce=>{Ce.preventDefault()},onUnmountAutoFocus:Ct(s,Ce=>{var De;(De=N.trigger)==null||De.focus({preventScroll:!0}),Ce.preventDefault()}),children:y.jsx(fv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Ce=>Ce.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:y.jsx(ce,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:Ce=>Ce.preventDefault(),...M,...ke,onPlaced:()=>oe(!0),ref:X,style:{display:"flex",flexDirection:"column",outline:"none",...M.style},onKeyDown:Ct(M.onKeyDown,Ce=>{const De=Ce.ctrlKey||Ce.altKey||Ce.metaKey;if(Ce.key==="Tab"&&Ce.preventDefault(),!De&&Ce.key.length===1&&ne(Ce.key),["ArrowUp","ArrowDown","Home","End"].includes(Ce.key)){let Ke=ie().filter(nt=>!nt.disabled).map(nt=>nt.ref.current);if(["ArrowUp","End"].includes(Ce.key)&&(Ke=Ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ce.key)){const nt=Ce.target,st=Ke.indexOf(nt);Ke=Ke.slice(st+1)}setTimeout(()=>re(Ke)),Ce.preventDefault()}})})})})})})});ZC.displayName=YU;var ZU="SelectItemAlignedPosition",QC=I.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ea(Ka,n),a=ta(Ka,n),[l,u]=I.useState(null),[h,d]=I.useState(null),g=jn(e,X=>d(X)),b=Og(n),w=I.useRef(!1),R=I.useRef(!0),{viewport:A,selectedItem:C,selectedItemText:M,focusSelectedItem:N}=a,k=I.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&A&&C&&M){const X=i.trigger.getBoundingClientRect(),Y=h.getBoundingClientRect(),G=i.valueNode.getBoundingClientRect(),K=M.getBoundingClientRect();if(i.dir!=="rtl"){const nt=K.left-Y.left,st=G.left-nt,ct=X.left-st,Xt=X.width+ct,In=Math.max(Xt,Y.width),ar=window.innerWidth-js,xn=WT(st,[js,Math.max(js,ar-In)]);l.style.minWidth=Xt+"px",l.style.left=xn+"px"}else{const nt=Y.right-K.right,st=window.innerWidth-G.right-nt,ct=window.innerWidth-X.right-st,Xt=X.width+ct,In=Math.max(Xt,Y.width),ar=window.innerWidth-js,xn=WT(st,[js,Math.max(js,ar-In)]);l.style.minWidth=Xt+"px",l.style.right=xn+"px"}const Q=b(),ie=window.innerHeight-js*2,xe=A.scrollHeight,oe=window.getComputedStyle(h),Re=parseInt(oe.borderTopWidth,10),re=parseInt(oe.paddingTop,10),Ee=parseInt(oe.borderBottomWidth,10),ue=parseInt(oe.paddingBottom,10),Ve=Re+re+xe+ue+Ee,D=Math.min(C.offsetHeight*5,Ve),ne=window.getComputedStyle(A),ye=parseInt(ne.paddingTop,10),U=parseInt(ne.paddingBottom,10),we=X.top+X.height/2-js,ce=ie-we,ke=C.offsetHeight/2,Ce=C.offsetTop+ke,De=Re+re+Ce,Ge=Ve-De;if(De<=we){const nt=Q.length>0&&C===Q[Q.length-1].ref.current;l.style.bottom="0px";const st=h.clientHeight-A.offsetTop-A.offsetHeight,ct=Math.max(ce,ke+(nt?U:0)+st+Ee),Xt=De+ct;l.style.height=Xt+"px"}else{const nt=Q.length>0&&C===Q[0].ref.current;l.style.top="0px";const ct=Math.max(we,Re+A.offsetTop+(nt?ye:0)+ke)+Ge;l.style.height=ct+"px",A.scrollTop=De-we+A.offsetTop}l.style.margin=`${js}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=ie+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[b,i.trigger,i.valueNode,l,h,A,C,M,i.dir,r]);gr(()=>k(),[k]);const[F,B]=I.useState();gr(()=>{h&&B(window.getComputedStyle(h).zIndex)},[h]);const P=I.useCallback(X=>{X&&R.current===!0&&(k(),N==null||N(),R.current=!1)},[k,N]);return y.jsx(GU,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:w,onScrollButtonChange:P,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:y.jsx(Pt.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});QC.displayName=ZU;var QU="SelectPopperPosition",Z_=I.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=js,...i}=t,a=Pg(n);return y.jsx(QB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Z_.displayName=QU;var[GU,Ov]=Gc(Ka,{}),Q_="SelectViewport",GC=I.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ta(Q_,n),a=Ov(Q_,n),l=jn(e,i.onViewportChange),u=I.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(Ig.Slot,{scope:n,children:y.jsx(Pt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ct(s.onScroll,h=>{const d=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:b}=a;if(b!=null&&b.current&&g){const w=Math.abs(u.current-d.scrollTop);if(w>0){const R=window.innerHeight-js*2,A=parseFloat(g.style.minHeight),C=parseFloat(g.style.height),M=Math.max(A,C);if(M<R){const N=M+w,k=Math.min(R,N),F=N-k;g.style.height=k+"px",g.style.bottom==="0px"&&(d.scrollTop=F>0?F:0,g.style.justifyContent="flex-end")}}}u.current=d.scrollTop})})})]})});GC.displayName=Q_;var JC="SelectGroup",[JU,eL]=Gc(JC),tL=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=th();return y.jsx(JU,{scope:n,id:s,children:y.jsx(Pt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});tL.displayName=JC;var ek="SelectLabel",tk=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=eL(ek,n);return y.jsx(Pt.div,{id:s.id,...r,ref:e})});tk.displayName=ek;var Ep="SelectItem",[nL,nk]=Gc(Ep),rk=I.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=ea(Ep,n),u=ta(Ep,n),h=l.value===r,[d,g]=I.useState(i??""),[b,w]=I.useState(!1),R=jn(e,N=>{var k;return(k=u.itemRefCallback)==null?void 0:k.call(u,N,r,s)}),A=th(),C=I.useRef("touch"),M=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(nL,{scope:n,value:r,disabled:s,textId:A,isSelected:h,onItemTextChange:I.useCallback(N=>{g(k=>k||((N==null?void 0:N.textContent)??"").trim())},[]),children:y.jsx(Ig.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:y.jsx(Pt.div,{role:"option","aria-labelledby":A,"data-highlighted":b?"":void 0,"aria-selected":h&&b,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:R,onFocus:Ct(a.onFocus,()=>w(!0)),onBlur:Ct(a.onBlur,()=>w(!1)),onClick:Ct(a.onClick,()=>{C.current!=="mouse"&&M()}),onPointerUp:Ct(a.onPointerUp,()=>{C.current==="mouse"&&M()}),onPointerDown:Ct(a.onPointerDown,N=>{C.current=N.pointerType}),onPointerMove:Ct(a.onPointerMove,N=>{var k;C.current=N.pointerType,s?(k=u.onItemLeave)==null||k.call(u):C.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ct(a.onPointerLeave,N=>{var k;N.currentTarget===document.activeElement&&((k=u.onItemLeave)==null||k.call(u))}),onKeyDown:Ct(a.onKeyDown,N=>{var F;((F=u.searchRef)==null?void 0:F.current)!==""&&N.key===" "||(zU.includes(N.key)&&M(),N.key===" "&&N.preventDefault())})})})})});rk.displayName=Ep;var hf="SelectItemText",sk=I.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=ea(hf,n),l=ta(hf,n),u=nk(hf,n),h=WU(hf,n),[d,g]=I.useState(null),b=jn(e,M=>g(M),u.onItemTextChange,M=>{var N;return(N=l.itemTextRefCallback)==null?void 0:N.call(l,M,u.value,u.disabled)}),w=d==null?void 0:d.textContent,R=I.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:A,onNativeOptionRemove:C}=h;return gr(()=>(A(R),()=>C(R)),[A,C,R]),y.jsxs(y.Fragment,{children:[y.jsx(Pt.span,{id:u.textId,...i,ref:b}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Xc.createPortal(i.children,a.valueNode):null]})});sk.displayName=hf;var ik="SelectItemIndicator",ok=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return nk(ik,n).isSelected?y.jsx(Pt.span,{"aria-hidden":!0,...r,ref:e}):null});ok.displayName=ik;var G_="SelectScrollUpButton",rL=I.forwardRef((t,e)=>{const n=ta(G_,t.__scopeSelect),r=Ov(G_,t.__scopeSelect),[s,i]=I.useState(!1),a=jn(e,r.onScrollButtonChange);return gr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollTop>0;i(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?y.jsx(ak,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});rL.displayName=G_;var J_="SelectScrollDownButton",sL=I.forwardRef((t,e)=>{const n=ta(J_,t.__scopeSelect),r=Ov(J_,t.__scopeSelect),[s,i]=I.useState(!1),a=jn(e,r.onScrollButtonChange);return gr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollHeight-u.clientHeight,d=Math.ceil(u.scrollTop)<h;i(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?y.jsx(ak,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});sL.displayName=J_;var ak=I.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ta("SelectScrollButton",n),a=I.useRef(null),l=Og(n),u=I.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return I.useEffect(()=>()=>u(),[u]),gr(()=>{var d;const h=l().find(g=>g.ref.current===document.activeElement);(d=h==null?void 0:h.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),y.jsx(Pt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ct(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Ct(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Ct(s.onPointerLeave,()=>{u()})})}),iL="SelectSeparator",lk=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return y.jsx(Pt.div,{"aria-hidden":!0,...r,ref:e})});lk.displayName=iL;var ex="SelectArrow",oL=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Pg(n),i=ea(ex,n),a=ta(ex,n);return i.open&&a.position==="popper"?y.jsx(GB,{...s,...r,ref:e}):null});oL.displayName=ex;var aL="SelectBubbleInput",ck=I.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=I.useRef(null),i=jn(r,s),a=JB(e);return I.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&d){const g=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(g)}},[a,e]),y.jsx(Pt.select,{...n,style:{...G3,...n.style},ref:i,defaultValue:e})});ck.displayName=aL;function uk(t){return t===""||t===void 0}function fk(t){const e=As(t),n=I.useRef(""),r=I.useRef(0),s=I.useCallback(a=>{const l=n.current+a;e(l),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),i=I.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function hk(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=lL(t,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const u=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function lL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cL=zC,dk=$C,uL=WC,fL=qC,hL=XC,pk=YC,dL=GC,gk=tk,mk=rk,pL=sk,gL=ok,yk=lk;const Ra=cL,Ca=uL,Io=I.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(dk,{ref:r,className:Qt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,y.jsx(fL,{asChild:!0,children:y.jsx(Tg,{className:"h-4 w-4 opacity-50"})})]}));Io.displayName=dk.displayName;const Oo=I.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>y.jsx(hL,{children:y.jsx(pk,{ref:s,className:Qt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:y.jsx(dL,{className:Qt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Oo.displayName=pk.displayName;const mL=I.forwardRef(({className:t,...e},n)=>y.jsx(gk,{ref:n,className:Qt("py-1.5 pl-8 pr-2 text-sm font-thin",t),...e}));mL.displayName=gk.displayName;const pr=I.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(mk,{ref:r,className:Qt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(gL,{children:y.jsx(eF,{className:"h-4 w-4"})})}),y.jsx(pL,{children:e})]}));pr.displayName=mk.displayName;const yL=I.forwardRef(({className:t,...e},n)=>y.jsx(yk,{ref:n,className:Qt("-mx-1 my-1 h-px bg-muted",t),...e}));yL.displayName=yk.displayName;const Pv=I.createContext(null);Pv.displayName="PanelGroupContext";const cs={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandleId:"data-panel-resize-handle-id"},Dv=10,pc=I.useLayoutEffect,u2=iv.useId,bL=typeof u2=="function"?u2:()=>null;let _L=0;function bk(t=null){const e=bL(),n=I.useRef(t||e||null);return n.current===null&&(n.current=""+_L++),t??n.current}function _k({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:a,maxSize:l,minSize:u,onCollapse:h,onExpand:d,onResize:g,order:b,style:w,tagName:R="div",...A}){const C=I.useContext(Pv);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:M,expandPanel:N,getPanelSize:k,getPanelStyle:F,groupId:B,isPanelCollapsed:P,reevaluatePanelConstraints:X,registerPanel:Y,resizePanel:G,unregisterPanel:K}=C,Q=bk(a),ie=I.useRef({callbacks:{onCollapse:h,onExpand:d,onResize:g},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:l,minSize:u},id:Q,idIsFromProps:a!==void 0,order:b});I.useRef({didLogMissingDefaultSizeWarning:!1}),pc(()=>{const{callbacks:oe,constraints:Re}=ie.current,re={...Re};ie.current.id=Q,ie.current.idIsFromProps=a!==void 0,ie.current.order=b,oe.onCollapse=h,oe.onExpand=d,oe.onResize=g,Re.collapsedSize=n,Re.collapsible=r,Re.defaultSize=s,Re.maxSize=l,Re.minSize=u,(re.collapsedSize!==Re.collapsedSize||re.collapsible!==Re.collapsible||re.maxSize!==Re.maxSize||re.minSize!==Re.minSize)&&X(ie.current,re)}),pc(()=>{const oe=ie.current;return Y(oe),()=>{K(oe)}},[b,Q,Y,K]),I.useImperativeHandle(i,()=>({collapse:()=>{M(ie.current)},expand:oe=>{N(ie.current,oe)},getId(){return Q},getSize(){return k(ie.current)},isCollapsed(){return P(ie.current)},isExpanded(){return!P(ie.current)},resize:oe=>{G(ie.current,oe)}}),[M,N,k,P,Q,G]);const xe=F(ie.current,s);return I.createElement(R,{...A,children:t,className:e,id:Q,style:{...xe,...w},[cs.groupId]:B,[cs.panel]:"",[cs.panelCollapsible]:r||void 0,[cs.panelId]:Q,[cs.panelSize]:parseFloat(""+xe.flexGrow).toFixed(1)})}const xL=I.forwardRef((t,e)=>I.createElement(_k,{...t,forwardedRef:e}));_k.displayName="Panel";xL.displayName="forwardRef(Panel)";function xk(t){return t.type==="keydown"}function vk(t){return t.type.startsWith("pointer")}function wk(t){return t.type.startsWith("mouse")}function vL(t){if(vk(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(wk(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function wL(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}const SL=1,TL=2,EL=4,AL=8;wL();let RL=new Map;function vb(t,e){RL.set(t,e)}function CL(){const[t,e]=I.useState(0);return I.useCallback(()=>e(n=>n+1),[])}function Bt(t,e){if(!t)throw console.error(e),Error(e)}function Za(t,e,n=Dv){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function zi(t,e,n=Dv){return Za(t,e,n)===0}function is(t,e,n){return Za(t,e,n)===0}function kL(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],i=e[r];if(!is(s,i,n))return!1}return!0}function ic({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Bt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:i,maxSize:a=100,minSize:l=0}=r;if(Za(n,l)<0)if(i){const u=(s+l)/2;Za(n,u)<0?n=s:n=l}else n=l;return n=Math.min(a,n),n=parseFloat(n.toFixed(Dv)),n}function df({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(is(t,0))return e;const a=[...e],[l,u]=r;Bt(l!=null,"Invalid first pivot index"),Bt(u!=null,"Invalid second pivot index");let h=0;if(i==="keyboard"){{const g=t<0?u:l,b=n[g];Bt(b,`Panel constraints not found for index ${g}`);const{collapsedSize:w=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Bt(C!=null,`Previous layout not found for panel index ${g}`),is(C,w)){const M=A-C;Za(M,Math.abs(t))>0&&(t=t<0?0-M:M)}}}{const g=t<0?l:u,b=n[g];Bt(b,`No panel constraints found for index ${g}`);const{collapsedSize:w=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Bt(C!=null,`Previous layout not found for panel index ${g}`),is(C,A)){const M=C-w;Za(M,Math.abs(t))>0&&(t=t<0?0-M:M)}}}}{const g=t<0?1:-1;let b=t<0?u:l,w=0;for(;;){const A=e[b];Bt(A!=null,`Previous layout not found for panel index ${b}`);const M=ic({panelConstraints:n,panelIndex:b,size:100})-A;if(w+=M,b+=g,b<0||b>=n.length)break}const R=Math.min(Math.abs(t),Math.abs(w));t=t<0?0-R:R}{let b=t<0?l:u;for(;b>=0&&b<n.length;){const w=Math.abs(t)-Math.abs(h),R=e[b];Bt(R!=null,`Previous layout not found for panel index ${b}`);const A=R-w,C=ic({panelConstraints:n,panelIndex:b,size:A});if(!is(R,C)&&(h+=R-C,a[b]=C,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(kL(s,a))return s;{const g=t<0?u:l,b=e[g];Bt(b!=null,`Previous layout not found for panel index ${g}`);const w=b+h,R=ic({panelConstraints:n,panelIndex:g,size:w});if(a[g]=R,!is(R,w)){let A=w-R,M=t<0?u:l;for(;M>=0&&M<n.length;){const N=a[M];Bt(N!=null,`Previous layout not found for panel index ${M}`);const k=N+A,F=ic({panelConstraints:n,panelIndex:M,size:k});if(is(N,F)||(A-=F-N,a[M]=F),is(A,0))break;t>0?M--:M++}}}const d=a.reduce((g,b)=>b+g,0);return is(d,100)?a:s}function NL({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,i=0,a=0;const l=n[0];Bt(l!=null,"No pivot index found"),e.forEach((g,b)=>{const{constraints:w}=g,{maxSize:R=100,minSize:A=0}=w;b===l?(r=A,s=R):(i+=A,a+=R)});const u=Math.min(s,100-i),h=Math.max(r,100-a),d=t[l];return{valueMax:u,valueMin:h,valueNow:d}}function Ap(t,e=document){return Array.from(e.querySelectorAll(`[${cs.resizeHandleId}][data-panel-group-id="${t}"]`))}function ML(t,e,n=document){const s=Ap(t,n).findIndex(i=>i.getAttribute(cs.resizeHandleId)===e);return s??null}function Sk(t,e,n){const r=ML(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function IL(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function Tk(t,e=document){if(IL(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Fv(t,e=document){const n=e.querySelector(`[${cs.resizeHandleId}="${t}"]`);return n||null}function OL(t,e,n,r=document){var s,i,a,l;const u=Fv(e,r),h=Ap(t,r),d=u?h.indexOf(u):-1,g=(s=(i=n[d])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,b=(a=(l=n[d+1])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null;return[g,b]}function PL({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:a}){I.useRef({didWarnAboutMissingResizeHandle:!1}),pc(()=>{if(!i)return;const l=Ap(n,i);for(let u=0;u<s.length-1;u++){const{valueMax:h,valueMin:d,valueNow:g}=NL({layout:r,panelsArray:s,pivotIndices:[u,u+1]}),b=l[u];if(b!=null){const w=s[u];Bt(w,`No panel data found for index "${u}"`),b.setAttribute("aria-controls",w.id),b.setAttribute("aria-valuemax",""+Math.round(h)),b.setAttribute("aria-valuemin",""+Math.round(d)),b.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{l.forEach((u,h)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,s,i]),I.useEffect(()=>{if(!i)return;const l=e.current;Bt(l,"Eager values not found");const{panelDataArray:u}=l,h=Tk(n,i);Bt(h!=null,`No group found for id "${n}"`);const d=Ap(n,i);Bt(d,`No resize handles found for group id "${n}"`);const g=d.map(b=>{const w=b.getAttribute(cs.resizeHandleId);Bt(w,"Resize handle element has no handle id attribute");const[R,A]=OL(n,w,u,i);if(R==null||A==null)return()=>{};const C=M=>{if(!M.defaultPrevented)switch(M.key){case"Enter":{M.preventDefault();const N=u.findIndex(k=>k.id===R);if(N>=0){const k=u[N];Bt(k,`No panel data found for index ${N}`);const F=r[N],{collapsedSize:B=0,collapsible:P,minSize:X=0}=k.constraints;if(F!=null&&P){const Y=df({delta:is(F,B)?X-B:B-F,initialLayout:r,panelConstraints:u.map(G=>G.constraints),pivotIndices:Sk(n,w,i),prevLayout:r,trigger:"keyboard"});r!==Y&&a(Y)}}break}}};return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}});return()=>{g.forEach(b=>b())}},[i,t,e,n,r,s,a])}function f2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ek(t,e){const n=t==="horizontal",{x:r,y:s}=vL(e);return n?r:s}function DL(t,e,n,r,s){const i=n==="horizontal",a=Fv(e,s);Bt(a,`No resize handle element found for id "${e}"`);const l=a.getAttribute(cs.groupId);Bt(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const h=Ek(n,t),d=Tk(l,s);Bt(d,`No group element found for id "${l}"`);const g=d.getBoundingClientRect(),b=i?g.width:g.height;return(h-u)/b*100}function FL(t,e,n,r,s,i){if(xk(t)){const a=n==="horizontal";let l=0;t.shiftKey?l=100:s!=null?l=s:l=10;let u=0;switch(t.key){case"ArrowDown":u=a?0:l;break;case"ArrowLeft":u=a?-l:0;break;case"ArrowRight":u=a?l:0;break;case"ArrowUp":u=a?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:DL(t,e,n,r,i)}function jL({panelDataArray:t}){const e=Array(t.length),n=t.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<t.length;i++){const a=n[i];Bt(a,`Panel constraints not found for index ${i}`);const{defaultSize:l}=a;l!=null&&(r++,e[i]=l,s-=l)}for(let i=0;i<t.length;i++){const a=n[i];Bt(a,`Panel constraints not found for index ${i}`);const{defaultSize:l}=a;if(l!=null)continue;const u=t.length-r,h=s/u;r++,e[i]=h,s-=h}return e}function Wl(t,e,n){e.forEach((r,s)=>{const i=t[s];Bt(i,`Panel data not found for index ${s}`);const{callbacks:a,constraints:l,id:u}=i,{collapsedSize:h=0,collapsible:d}=l,g=n[u];if(g==null||r!==g){n[u]=r;const{onCollapse:b,onExpand:w,onResize:R}=a;R&&R(r,g),d&&(b||w)&&(w&&(g==null||zi(g,h))&&!zi(r,h)&&w(),b&&(g==null||!zi(g,h))&&zi(r,h)&&b())}})}function Dd(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function BL({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:i=3}){const a=n[s];let l;return a==null?l=t!=null?t.toPrecision(i):"1":r.length===1?l="1":l=a.toPrecision(i),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function UL(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function h2(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function Ak(t){return`react-resizable-panels:${t}`}function Rk(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=e;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Ck(t,e){try{const n=Ak(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function LL(t,e,n){var r,s;const i=(r=Ck(t,n))!==null&&r!==void 0?r:{},a=Rk(e);return(s=i[a])!==null&&s!==void 0?s:null}function zL(t,e,n,r,s){var i;const a=Ak(t),l=Rk(e),u=(i=Ck(t,s))!==null&&i!==void 0?i:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(a,JSON.stringify(u))}catch(h){console.error(h)}}function d2({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((i,a)=>i+a,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!is(r,100)&&n.length>0)for(let i=0;i<e.length;i++){const a=n[i];Bt(a!=null,`No layout data found for index ${i}`);const l=100/r*a;n[i]=l}let s=0;for(let i=0;i<e.length;i++){const a=n[i];Bt(a!=null,`No layout data found for index ${i}`);const l=ic({panelConstraints:e,panelIndex:i,size:a});a!=l&&(s+=a-l,n[i]=l)}if(!is(s,0))for(let i=0;i<e.length;i++){const a=n[i];Bt(a!=null,`No layout data found for index ${i}`);const l=a+s,u=ic({panelConstraints:e,panelIndex:i,size:l});if(a!==u&&(s-=u-a,n[i]=u,is(s,0)))break}return n}const VL=100,pf={getItem:t=>(h2(pf),pf.getItem(t)),setItem:(t,e)=>{h2(pf),pf.setItem(t,e)}},p2={};function kk({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:a=null,keyboardResizeBy:l=null,storage:u=pf,style:h,tagName:d="div",...g}){const b=bk(i),w=I.useRef(null),[R,A]=I.useState(null),[C,M]=I.useState([]),N=CL(),k=I.useRef({}),F=I.useRef(new Map),B=I.useRef(0),P=I.useRef({autoSaveId:t,direction:r,dragState:R,id:b,keyboardResizeBy:l,onLayout:a,storage:u}),X=I.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1});I.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),I.useImperativeHandle(s,()=>({getId:()=>P.current.id,getLayout:()=>{const{layout:U}=X.current;return U},setLayout:U=>{const{onLayout:we}=P.current,{layout:ce,panelDataArray:ke}=X.current,Ce=d2({layout:U,panelConstraints:ke.map(De=>De.constraints)});f2(ce,Ce)||(M(Ce),X.current.layout=Ce,we&&we(Ce),Wl(ke,Ce,k.current))}}),[]),pc(()=>{P.current.autoSaveId=t,P.current.direction=r,P.current.dragState=R,P.current.id=b,P.current.onLayout=a,P.current.storage=u}),PL({committedValuesRef:P,eagerValuesRef:X,groupId:b,layout:C,panelDataArray:X.current.panelDataArray,setLayout:M,panelGroupElement:w.current}),I.useEffect(()=>{const{panelDataArray:U}=X.current;if(t){if(C.length===0||C.length!==U.length)return;let we=p2[t];we==null&&(we=UL(zL,VL),p2[t]=we);const ce=[...U],ke=new Map(F.current);we(t,ce,ke,C,u)}},[t,C,u]),I.useEffect(()=>{});const Y=I.useCallback(U=>{const{onLayout:we}=P.current,{layout:ce,panelDataArray:ke}=X.current;if(U.constraints.collapsible){const Ce=ke.map(nt=>nt.constraints),{collapsedSize:De=0,panelSize:Ge,pivotIndices:Ke}=wa(ke,U,ce);if(Bt(Ge!=null,`Panel size not found for panel "${U.id}"`),!zi(Ge,De)){F.current.set(U.id,Ge);const st=nc(ke,U)===ke.length-1?Ge-De:De-Ge,ct=df({delta:st,initialLayout:ce,panelConstraints:Ce,pivotIndices:Ke,prevLayout:ce,trigger:"imperative-api"});Dd(ce,ct)||(M(ct),X.current.layout=ct,we&&we(ct),Wl(ke,ct,k.current))}}},[]),G=I.useCallback((U,we)=>{const{onLayout:ce}=P.current,{layout:ke,panelDataArray:Ce}=X.current;if(U.constraints.collapsible){const De=Ce.map(Xt=>Xt.constraints),{collapsedSize:Ge=0,panelSize:Ke=0,minSize:nt=0,pivotIndices:st}=wa(Ce,U,ke),ct=we??nt;if(zi(Ke,Ge)){const Xt=F.current.get(U.id),In=Xt!=null&&Xt>=ct?Xt:ct,xn=nc(Ce,U)===Ce.length-1?Ke-In:In-Ke,Tn=df({delta:xn,initialLayout:ke,panelConstraints:De,pivotIndices:st,prevLayout:ke,trigger:"imperative-api"});Dd(ke,Tn)||(M(Tn),X.current.layout=Tn,ce&&ce(Tn),Wl(Ce,Tn,k.current))}}},[]),K=I.useCallback(U=>{const{layout:we,panelDataArray:ce}=X.current,{panelSize:ke}=wa(ce,U,we);return Bt(ke!=null,`Panel size not found for panel "${U.id}"`),ke},[]),Q=I.useCallback((U,we)=>{const{panelDataArray:ce}=X.current,ke=nc(ce,U);return BL({defaultSize:we,dragState:R,layout:C,panelData:ce,panelIndex:ke})},[R,C]),ie=I.useCallback(U=>{const{layout:we,panelDataArray:ce}=X.current,{collapsedSize:ke=0,collapsible:Ce,panelSize:De}=wa(ce,U,we);return Bt(De!=null,`Panel size not found for panel "${U.id}"`),Ce===!0&&zi(De,ke)},[]),xe=I.useCallback(U=>{const{layout:we,panelDataArray:ce}=X.current,{collapsedSize:ke=0,collapsible:Ce,panelSize:De}=wa(ce,U,we);return Bt(De!=null,`Panel size not found for panel "${U.id}"`),!Ce||Za(De,ke)>0},[]),oe=I.useCallback(U=>{const{panelDataArray:we}=X.current;we.push(U),we.sort((ce,ke)=>{const Ce=ce.order,De=ke.order;return Ce==null&&De==null?0:Ce==null?-1:De==null?1:Ce-De}),X.current.panelDataArrayChanged=!0,N()},[N]);pc(()=>{if(X.current.panelDataArrayChanged){X.current.panelDataArrayChanged=!1;const{autoSaveId:U,onLayout:we,storage:ce}=P.current,{layout:ke,panelDataArray:Ce}=X.current;let De=null;if(U){const Ke=LL(U,Ce,ce);Ke&&(F.current=new Map(Object.entries(Ke.expandToSizes)),De=Ke.layout)}De==null&&(De=jL({panelDataArray:Ce}));const Ge=d2({layout:De,panelConstraints:Ce.map(Ke=>Ke.constraints)});f2(ke,Ge)||(M(Ge),X.current.layout=Ge,we&&we(Ge),Wl(Ce,Ge,k.current))}}),pc(()=>{const U=X.current;return()=>{U.layout=[]}},[]);const Re=I.useCallback(U=>{let we=!1;const ce=w.current;return ce&&window.getComputedStyle(ce,null).getPropertyValue("direction")==="rtl"&&(we=!0),function(Ce){Ce.preventDefault();const De=w.current;if(!De)return()=>null;const{direction:Ge,dragState:Ke,id:nt,keyboardResizeBy:st,onLayout:ct}=P.current,{layout:Xt,panelDataArray:In}=X.current,{initialLayout:ar}=Ke??{},xn=Sk(nt,U,De);let Tn=FL(Ce,U,Ge,Ke,st,De);const fn=Ge==="horizontal";fn&&we&&(Tn=-Tn);const xi=In.map(Ks=>Ks.constraints),lr=df({delta:Tn,initialLayout:ar??Xt,panelConstraints:xi,pivotIndices:xn,prevLayout:Xt,trigger:xk(Ce)?"keyboard":"mouse-or-touch"}),mr=!Dd(Xt,lr);(vk(Ce)||wk(Ce))&&B.current!=Tn&&(B.current=Tn,!mr&&Tn!==0?fn?vb(U,Tn<0?SL:TL):vb(U,Tn<0?EL:AL):vb(U,0)),mr&&(M(lr),X.current.layout=lr,ct&&ct(lr),Wl(In,lr,k.current))}},[]),re=I.useCallback((U,we)=>{const{onLayout:ce}=P.current,{layout:ke,panelDataArray:Ce}=X.current,De=Ce.map(Xt=>Xt.constraints),{panelSize:Ge,pivotIndices:Ke}=wa(Ce,U,ke);Bt(Ge!=null,`Panel size not found for panel "${U.id}"`);const st=nc(Ce,U)===Ce.length-1?Ge-we:we-Ge,ct=df({delta:st,initialLayout:ke,panelConstraints:De,pivotIndices:Ke,prevLayout:ke,trigger:"imperative-api"});Dd(ke,ct)||(M(ct),X.current.layout=ct,ce&&ce(ct),Wl(Ce,ct,k.current))},[]),Ee=I.useCallback((U,we)=>{const{layout:ce,panelDataArray:ke}=X.current,{collapsedSize:Ce=0,collapsible:De}=we,{collapsedSize:Ge=0,collapsible:Ke,maxSize:nt=100,minSize:st=0}=U.constraints,{panelSize:ct}=wa(ke,U,ce);ct!=null&&(De&&Ke&&zi(ct,Ce)?zi(Ce,Ge)||re(U,Ge):ct<st?re(U,st):ct>nt&&re(U,nt))},[re]),ue=I.useCallback((U,we)=>{const{direction:ce}=P.current,{layout:ke}=X.current;if(!w.current)return;const Ce=Fv(U,w.current);Bt(Ce,`Drag handle element not found for id "${U}"`);const De=Ek(ce,we);A({dragHandleId:U,dragHandleRect:Ce.getBoundingClientRect(),initialCursorPosition:De,initialLayout:ke})},[]),Ve=I.useCallback(()=>{A(null)},[]),D=I.useCallback(U=>{const{panelDataArray:we}=X.current,ce=nc(we,U);ce>=0&&(we.splice(ce,1),delete k.current[U.id],X.current.panelDataArrayChanged=!0,N())},[N]),ne=I.useMemo(()=>({collapsePanel:Y,direction:r,dragState:R,expandPanel:G,getPanelSize:K,getPanelStyle:Q,groupId:b,isPanelCollapsed:ie,isPanelExpanded:xe,reevaluatePanelConstraints:Ee,registerPanel:oe,registerResizeHandle:Re,resizePanel:re,startDragging:ue,stopDragging:Ve,unregisterPanel:D,panelGroupElement:w.current}),[Y,R,r,G,K,Q,b,ie,xe,Ee,oe,Re,re,ue,Ve,D]),ye={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return I.createElement(Pv.Provider,{value:ne},I.createElement(d,{...g,children:e,className:n,id:i,ref:w,style:{...ye,...h},[cs.group]:"",[cs.groupDirection]:r,[cs.groupId]:b}))}const $L=I.forwardRef((t,e)=>I.createElement(kk,{...t,forwardedRef:e}));kk.displayName="PanelGroup";$L.displayName="forwardRef(PanelGroup)";function nc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function wa(t,e,n){const r=nc(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],a=n[r];return{...e.constraints,panelSize:a,pivotIndices:i}}const HL=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},g2=t=>{const e={name:"",path:"",type:"directory",children:[]},n=new Set,r=new Map;t.forEach(i=>{i.files.forEach(a=>{n.add(a),r.has(a)||r.set(a,[]),r.get(a).push(i.name)})}),n.forEach(i=>{const a=i.split("/");let l=e;a.forEach((u,h)=>{const d=h===a.length-1,g=a.slice(0,h+1).join("/");l.children||(l.children=[]);let b=l.children.find(w=>w.name===u);b||(b={name:u,path:g,type:d?"file":"directory",children:d?void 0:[],bundles:d?r.get(i):void 0},l.children.push(b)),d||(l=b)})});const s=i=>{i.children&&(i.children.sort((a,l)=>a.type!==l.type?a.type==="directory"?-1:1:a.name.localeCompare(l.name)),i.children.forEach(s))};return s(e),e},WL=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]};function Nk({node:t,level:e,expandedDirs:n,onToggleDir:r}){const s=n.has(t.path),i=e*16;if(t.type==="directory")return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded cursor-pointer",style:{paddingLeft:`${i+8}px`},onClick:()=>r(t.path),children:[s?y.jsx(Tg,{className:"w-4 h-4 text-muted-foreground"}):y.jsx(wR,{className:"w-4 h-4 text-muted-foreground"}),s?y.jsx(wF,{className:"w-4 h-4 text-[color:var(--color-info)]"}):y.jsx(TF,{className:"w-4 h-4 text-[color:var(--color-info)]"}),y.jsx("span",{className:"text-xs font-thin",children:t.name}),t.children&&y.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[t.children.length," items"]})]}),s&&t.children&&y.jsx("div",{children:t.children.map(l=>y.jsx(Nk,{node:l,level:e+1,expandedDirs:n,onToggleDir:r},l.path))})]});const a=l=>{var d;const u=(d=l.split(".").pop())==null?void 0:d.toLowerCase(),h="w-4 h-4";switch(u){case"js":case"ts":case"jsx":case"tsx":return y.jsx(Ll,{className:`${h} text-[color:var(--color-warning)]`});case"json":return y.jsx(Ll,{className:`${h} text-[color:var(--color-success)]`});case"md":return y.jsx(Ll,{className:`${h} text-[color:var(--color-info)]/80`});case"css":case"scss":return y.jsx(Ll,{className:`${h} text-[color:var(--color-type-styles)]`});case"html":return y.jsx(Ll,{className:`${h} text-[color:var(--color-type-configuration)]`});default:return y.jsx(Ll,{className:`${h} text-muted-foreground`})}};return y.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded",style:{paddingLeft:`${i+24}px`},children:[a(t.name),y.jsx("span",{className:"text-xs font-mono",children:t.name}),t.bundles&&t.bundles.length>0&&y.jsx("div",{className:"flex gap-1 ml-2",children:t.bundles.map(l=>y.jsx(nn,{variant:"outline",className:"text-xs px-1 py-0 h-4",children:l},l))}),t.size&&y.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:WL(t.size)})]})}function qL(){const[t,e]=I.useState(new Set([""])),{data:n,isLoading:r}=Es({queryKey:["bundles"],queryFn:HL,refetchInterval:5e3}),s=h=>{const d=new Set(t);d.has(h)?d.delete(h):d.add(h),e(d)},i=()=>{if(!n)return;const h=g2(n),d=new Set,g=b=>{var w;b.type==="directory"&&(d.add(b.path),(w=b.children)==null||w.forEach(g))};g(h),e(d)},a=()=>{e(new Set([""]))};if(r)return y.jsx("div",{children:"Loading file tree..."});if(!n)return y.jsx("div",{children:"No bundles found"});const l=g2(n),u=n.reduce((h,d)=>h+d.files.length,0);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex gap-1",children:[y.jsx(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:i,children:"Expand All"}),y.jsx(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:a,children:"Collapse All"})]}),y.jsxs("div",{className:"text-xs text-muted-foreground font-thin",children:[u," files tracked"]})]}),y.jsx(Ut,{className:"p-4",children:y.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:l.children&&l.children.length>0?l.children.map(h=>y.jsx(Nk,{node:h,level:0,expandedDirs:t,onToggleDir:s},h.path)):y.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No files found"})})}),y.jsxs(Ut,{className:"p-4",children:[y.jsx("h3",{className:"text-xs font-thin mb-2",children:"Bundle Legend"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(h=>y.jsxs(nn,{variant:"outline",children:[h.name," (",h.files.length,")"]},h.name))})]})]})}const XL=()=>y.jsxs(Ut,{children:[y.jsxs(Fn,{children:[y.jsxs(Xn,{className:"flex items-center gap-2",children:[y.jsx(kR,{className:"w-4 h-4"}),"Project Files"]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse and explore all files in your project with bundle information."})]}),y.jsx(Kt,{children:y.jsx(qL,{})})]});function Mk({className:t,type:e,...n}){return y.jsx("input",{type:e,"data-slot":"input",className:Qt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-thin disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}const YL=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},KL=async()=>{const t=await fetch("http://localhost:3333/api/files");if(!t.ok)throw new Error("Failed to fetch files");return(await t.json()).map(n=>n.path)};function ZL(){const t=qc(),[e,n]=I.useState(null),[r,s]=I.useState(new Set),[i,a]=I.useState(new Set),[l,u]=I.useState(null),[h,d]=I.useState(new Map),[g,b]=I.useState(!1);M6();const{data:w=[],isLoading:R,isFetching:A,dataUpdatedAt:C}=Es({queryKey:["bundles"],queryFn:YL,refetchInterval:5e3,refetchOnWindowFocus:!0}),{data:M=[],isFetching:N,dataUpdatedAt:k}=Es({queryKey:["allFiles"],queryFn:KL,refetchInterval:3e4,refetchOnWindowFocus:!0});I.useEffect(()=>{const P=Math.max(C,k);P>0&&u(new Date(P))},[C,k]),I.useEffect(()=>{const P=new WebSocket("ws://localhost:3333");return P.onopen=()=>{console.log("Bundle updates WebSocket connected")},P.onmessage=X=>{try{const Y=JSON.parse(X.data);switch(console.log("WebSocket message received:",Y),Y.type){case"bundle-sync-started":d(G=>new Map(G).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)})),rn.info(`Syncing ${Y.bundleName}`);break;case"bundle-sync-completed":d(G=>new Map(G).set(Y.bundleName,{changed:!1,lastSync:new Date(Y.timestamp)})),rn.success(`Synced ${Y.bundleName}`),t.invalidateQueries({queryKey:["bundles"]});break;case"bundle-sync-failed":d(G=>new Map(G).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)})),rn.error(`Sync failed for ${Y.bundleName}`,Y.error);break;case"bundle-file-changed":d(G=>new Map(G).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)}));break}}catch(Y){console.error("Error parsing bundle update:",Y)}},P.onclose=()=>{console.log("Bundle updates WebSocket disconnected")},P.onerror=X=>{console.error("Bundle updates WebSocket error:",X)},()=>{P.close()}},[t]);const F=I.useCallback(P=>{n(e===P?null:P)},[e]),B=I.useMemo(()=>w.map(P=>{const X=h.get(P.name);return{...P,changed:(X==null?void 0:X.changed)??P.changed,lastSync:X==null?void 0:X.lastSync}}),[w,h]);return R?y.jsx("div",{children:"Loading bundles..."}):w?y.jsxs("div",{className:"h-full flex flex-col relative",children:[y.jsxs(nl,{defaultValue:"bundles",className:"w-full flex-1 flex flex-col min-h-0",children:[y.jsxs(rl,{className:"grid w-full grid-cols-3 bg-background",children:[y.jsxs(Dn,{value:"bundles",className:"flex items-center gap-2",children:[y.jsx(B_,{className:"w-4 h-4 text-muted-foreground/75"}),"Bundles"]}),y.jsxs(Dn,{value:"files",className:"flex items-center gap-2",children:[y.jsx(kR,{className:"w-4 h-4 text-muted-foreground/75"}),"Project Files"]}),y.jsxs(Dn,{value:"analysis",className:"flex items-center gap-2",children:[y.jsx(U_,{className:"w-4 h-4 text-muted-foreground/75"}),"File Analysis"]})]}),y.jsx(Wn,{value:"bundles",className:"flex-1 overflow-y-auto",children:y.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:B&&Array.isArray(B)?B.map(P=>y.jsx(I6,{bundle:P,isSelected:e===P.name,onSelect:F,lastRefresh:l||void 0},P.name)):y.jsx("div",{children:"No bundles available"})})}),y.jsx(Wn,{value:"files",className:"space-y-4",children:y.jsx(XL,{})}),y.jsx(Wn,{value:"analysis",className:"space-y-4",children:y.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[y.jsx(U_,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),y.jsx("p",{className:"text-sm font-thin uppercase tracking-widest",children:"Semantic Analysis Active"}),y.jsx("p",{className:"text-xs mt-2 opacity-50",children:"Viewing automated context mapping..."})]})})]}),e&&(()=>{var X;const P=w.find(Y=>Y.name===e);return P?y.jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-10 z-50 bg-background flex flex-col",children:[y.jsxs("div",{className:"sticky top-0 bg-background border-b p-4 flex justify-between items-center flex-shrink-0",children:[y.jsxs("h3",{className:"font-thin text-sm flex items-center gap-2",children:[y.jsx(B_,{className:"w-4 h-4 text-muted-foreground"}),e," Details"]}),y.jsx(Tt,{variant:"ghost",size:"sm",onClick:()=>n(null),children:y.jsx(zs,{className:"w-4 h-4"})})]}),y.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-6",children:y.jsxs("div",{className:"space-y-4",children:[y.jsx("h4",{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted",children:"Included Files"}),y.jsx("ul",{className:"list-none pl-0 space-y-1",children:(X=P.files)==null?void 0:X.map(Y=>y.jsx("li",{className:"text-xs font-thin mono py-1 border-b border-vesper/50",children:Y},Y))})]})})]}):null})()]}):y.jsx("div",{children:"No bundles found"})}function Rp({className:t,...e}){return y.jsx("textarea",{"data-slot":"textarea",className:Qt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const QL=Sg("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Lf({className:t,variant:e,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Qt(QL({variant:e}),t),...n})}function zf({className:t,...e}){return y.jsx("div",{"data-slot":"alert-description",className:Qt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const GL=async()=>{const t=await fetch("http://localhost:3333/api/cursor-rules");if(!t.ok)throw new Error("Failed to fetch cursor rules");return t.text()},JL=async t=>{if(!(await fetch("http://localhost:3333/api/cursor-rules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save cursor rules")},e8=async()=>{const t=await fetch("http://localhost:3333/api/claude-md");if(!t.ok)throw new Error("Failed to fetch CLAUDE.md");return t.text()},t8=async t=>{if(!(await fetch("http://localhost:3333/api/claude-md",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save CLAUDE.md")};function n8(){const t=qc(),[e,n]=I.useState(""),[r,s]=I.useState(""),[i,a]=I.useState("cursor"),{data:l,isLoading:u}=Es({queryKey:["cursor-rules"],queryFn:GL}),h=_p({mutationFn:JL,onSuccess:()=>{t.invalidateQueries({queryKey:["cursor-rules"]}),rn.success(".cursorrules saved successfully!")},onError:M=>{rn.error(`Failed to save .cursorrules: ${M.message}`)}}),{data:d,isLoading:g}=Es({queryKey:["claude-md"],queryFn:e8}),b=_p({mutationFn:t8,onSuccess:()=>{t.invalidateQueries({queryKey:["claude-md"]}),rn.success("CLAUDE.md saved successfully!")},onError:M=>{rn.error(`Failed to save CLAUDE.md: ${M.message}`)}});I.useEffect(()=>{l&&!e&&n(l)},[l]),I.useEffect(()=>{d&&!r&&s(d)},[d]);const w=()=>{h.mutate(e)},R=()=>{b.mutate(r)},A=(M,N)=>{navigator.clipboard.writeText(M),rn.success(`${N} copied to clipboard!`)},C=(M,N)=>{const k=new Blob([M],{type:"text/plain"}),F=URL.createObjectURL(k),B=document.createElement("a");B.href=F,B.download=N,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(F),rn.success(`${N} downloaded!`)};return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(z_,{className:"w-4 h-4"}),"AI Rules & Context"]})}),y.jsxs(Kt,{children:[y.jsxs(Lf,{className:"mb-4",children:[y.jsx(Mc,{className:"w-4 h-4"}),y.jsxs(zf,{children:["Configure AI context files for better assistance. ",y.jsx("strong",{children:".cursorrules"})," works with Cursor, while ",y.jsx("strong",{children:"CLAUDE.md"})," provides project context for Claude."]})]}),y.jsxs(nl,{value:i,onValueChange:M=>a(M),className:"space-y-4",children:[y.jsxs(rl,{className:"grid w-full grid-cols-2",children:[y.jsxs(Dn,{value:"cursor",className:"flex items-center gap-2",children:[y.jsx(jf,{className:"w-4 h-4"}),".cursorrules"]}),y.jsxs(Dn,{value:"claude",className:"flex items-center gap-2",children:[y.jsx(z_,{className:"w-4 h-4"}),"CLAUDE.md"]})]}),y.jsxs(Wn,{value:"cursor",className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-thin",children:"Cursor AI Assistant Rules"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure how Cursor's AI understands your project"})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(e,".cursorrules"),children:[y.jsx(Ff,{className:"w-3 h-3 mr-1"}),"Copy"]}),y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(e,".cursorrules"),children:[y.jsx(DT,{className:"w-3 h-3 mr-1"}),"Download"]}),y.jsxs(Tt,{onClick:w,disabled:h.isPending,size:"sm",className:"h-7 text-xs",children:[y.jsx(xp,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),u?y.jsxs("div",{className:"flex items-center justify-center p-8",children:[y.jsx(di,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):y.jsx(Rp,{value:e,onChange:M=>n(M.target.value),placeholder:"Enter your Cursor AI rules here...",className:"min-h-[300px] font-mono text-sm"})]}),y.jsxs(Wn,{value:"claude",className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-thin",children:"Claude Project Context"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Markdown file explaining your project structure and guidelines"})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(r,"CLAUDE.md"),children:[y.jsx(Ff,{className:"w-3 h-3 mr-1"}),"Copy"]}),y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(r,"CLAUDE.md"),children:[y.jsx(DT,{className:"w-3 h-3 mr-1"}),"Download"]}),y.jsxs(Tt,{onClick:R,disabled:b.isPending,size:"sm",className:"h-7 text-xs",children:[y.jsx(xp,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),g?y.jsxs("div",{className:"flex items-center justify-center p-8",children:[y.jsx(di,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):y.jsx(Rp,{value:r,onChange:M=>s(M.target.value),placeholder:"Enter your Claude project context here...",className:"min-h-[300px] font-mono text-sm"}),y.jsxs(Lf,{children:[y.jsx(Mc,{className:"w-4 h-4"}),y.jsx(zf,{children:"This file helps Claude understand your project. Include project structure, coding conventions, key concepts, and any important context."})]})]})]})]})]})}const m2=[{path:"/api/status",method:"GET",description:"Server status and health"},{path:"/api/bundles",method:"GET",description:"List all bundles"},{path:"/api/config",method:"GET",description:"Get bundle configuration"},{path:"/api/files",method:"GET",description:"Get file tree"},{path:"/api/semantic-chunks",method:"GET",description:"Get semantic analysis"},{path:"/api/vector-db/status",method:"GET",description:"Vector database status"},{path:"/api/cursor-rules",method:"GET",description:"Cursor rules configuration"},{path:"/api/claude-md",method:"GET",description:"Claude.md file content"},{path:"/api/activities",method:"GET",description:"Available activities"},{path:"/api/mcp-status",method:"GET",description:"MCP server status"}],ql=[{name:"list_bundles",description:"List all available file bundles",group:"Bundle Management"},{name:"get_bundle",description:"Get the content of a specific bundle",group:"Bundle Management"},{name:"generate_bundle",description:"Regenerate a specific bundle",group:"Bundle Management"},{name:"create_bundle",description:"Create a new bundle with specified patterns",group:"Bundle Management"},{name:"update_bundle",description:"Update an existing bundle's patterns",group:"Bundle Management"},{name:"delete_bundle",description:"Delete an existing bundle",group:"Bundle Management"},{name:"get_file_tree",description:"Get the project file tree",group:"Project Exploration"},{name:"get_project_status",description:"Get current project status and bundle information",group:"Project Exploration"},{name:"update_cntxignore",description:"Update the .cntxignore file with new ignore patterns",group:"Project Exploration"},{name:"get_semantic_chunks",description:"Get function-level semantic chunks from the codebase",group:"Semantic Analysis"},{name:"get_semantic_chunks_filtered",description:"Get semantic chunks filtered by purpose, type, complexity, or bundle",group:"Semantic Analysis"},{name:"analyze_bundle_suggestions",description:"Analyze codebase and suggest optimal bundle organization",group:"Semantic Analysis"},{name:"agent_discover",description:"Agent Discovery Mode: Get comprehensive codebase overview",group:"Agent Modes"},{name:"agent_query",description:"Agent Query Mode: Answer specific questions about the codebase",group:"Agent Modes"},{name:"agent_investigate",description:"Agent Investigation Mode: Investigate existing implementations for a feature",group:"Agent Modes"},{name:"agent_discuss",description:"Agent Passive Mode: Engage in discussion about codebase architecture",group:"Agent Modes"},{name:"agent_organize",description:"Agent Project Organizer Mode: Setup and maintenance of project organization",group:"Agent Modes"},{name:"read_file",description:"Read contents of a specific file with bundle context and metadata",group:"File Operations"},{name:"write_file",description:"Write content to a file with validation and safety checks",group:"File Operations"},{name:"manage_activities",description:"CRUD operations for project activities",group:"Activities Management"}],r8=async()=>{const t=await fetch("http://localhost:3333/api/status");if(!t.ok)throw new Error("Failed to fetch server status");return t.json()},s8=async t=>{const e=Date.now();try{const n=await fetch(`http://localhost:3333${t.path}`),r=Date.now()-e;return n.ok?{...t,status:"success",responseTime:r}:{...t,status:"error",responseTime:r,error:`HTTP ${n.status}`}}catch(n){const r=Date.now()-e;return{...t,status:"error",responseTime:r,error:n instanceof Error?n.message:"Unknown error"}}},i8=async t=>{try{const e=await fetch("http://localhost:3333/api/mcp-status");return e.ok?(await e.json()).enabled?{...t,status:"available"}:{...t,status:"error",error:"MCP server not enabled"}:{...t,status:"error",error:"MCP status unavailable"}}catch(e){return{...t,status:"error",error:e instanceof Error?e.message:"Unknown error"}}};function o8(){var B,P,X,Y,G,K;const[t,e]=I.useState([]),[n,r]=I.useState([]),[s,i]=I.useState(!1),[a,l]=I.useState("All"),{data:u,isLoading:h,error:d,refetch:g}=Es({queryKey:["server-status"],queryFn:r8,refetchInterval:5e3}),b=async()=>{i(!0);try{const Q=await Promise.all(m2.map(ie=>s8(ie)));e(Q)}catch(Q){console.error("Failed to run endpoint tests:",Q)}finally{i(!1)}},w=async()=>{i(!0);try{const Q=await Promise.all(ql.map(ie=>i8(ie)));r(Q)}catch(Q){console.error("Failed to run MCP tests:",Q)}finally{i(!1)}},R=Q=>{if(Q<60)return`${Math.floor(Q)}s`;if(Q<3600)return`${Math.floor(Q/60)}m ${Math.floor(Q%60)}s`;const ie=Math.floor(Q/3600),xe=Math.floor(Q%3600/60);return`${ie}h ${xe}m`},A=Q=>{const ie=Q/1024/1024;return`${Math.round(ie)}MB`},C=()=>["All",...new Set(ql.map(ie=>ie.group))],M=()=>a==="All"?ql:ql.filter(Q=>Q.group===a),N=()=>M().reduce((xe,oe)=>(xe[oe.group]||(xe[oe.group]=[]),xe[oe.group].push(oe),xe),{}),k=(Q,ie)=>{var xe,oe,Re,re,Ee;if(typeof Q=="string")return Q.length>100?Q.substring(0,100)+"...":Q;if(Array.isArray(Q))return`Array with ${Q.length} items`;if(typeof Q=="object"&&Q!==null){const ue=Object.keys(Q);if(ie.includes("/api/status"))return`Uptime: ${Math.floor(Q.uptime||0)}s, Memory: ${Math.round((((xe=Q.memory)==null?void 0:xe.heapUsed)||0)/1024/1024)}MB, Files: ${Q.totalFiles||0}`;if(ie.includes("/api/bundles"))return`${Q.length||ue.length} bundles found`;if(ie.includes("/api/semantic-chunks"))return`${((oe=Q.chunks)==null?void 0:oe.length)||0} chunks, ${((Re=Q.summary)==null?void 0:Re.totalFunctions)||0} functions`;if(ie.includes("/api/vector-db/status"))return`${((re=Q.stats)==null?void 0:re.totalChunks)||0} chunks indexed with ${((Ee=Q.stats)==null?void 0:Ee.modelName)||"unknown model"}`;if(ie.includes("/api/activities"))return`${Q.length||ue.length} activities found`;const Ve=ue.slice(0,3).map(D=>{const ne=Q[D];return typeof ne=="object"?`${D}: ${Array.isArray(ne)?`[${ne.length}]`:"{object}"}`:`${D}: ${String(ne).substring(0,20)}`}).join(", ");return ue.length>3?`${Ve}... (+${ue.length-3} more)`:Ve}return String(Q).substring(0,100)},F=async Q=>{const ie=Date.now();try{const xe=await fetch(`http://localhost:3333${Q.path}`),oe=Date.now()-ie;if(xe.ok){const Re=await xe.json(),re=k(Re,Q.path);rn.success(`${Q.path} (${oe}ms)`,re)}else rn.error(`${Q.path} failed`,`HTTP ${xe.status} (${oe}ms)`)}catch(xe){const oe=Date.now()-ie;rn.error(`${Q.path} error`,`${xe instanceof Error?xe.message:"Unknown error"} (${oe}ms)`)}};return h?y.jsx(Ut,{children:y.jsx(Kt,{className:"pt-6",children:y.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[y.jsx(di,{className:"w-4 h-4 animate-spin"}),"Checking system status..."]})})}):d?y.jsx(Ut,{children:y.jsx(Kt,{className:"p-4",children:y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx(Ho,{className:"h-6 w-6 mx-auto text-red-500"}),y.jsx("p",{className:"text-sm font-medium",children:"Failed to connect to server"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running on localhost:3333"}),y.jsxs(Tt,{variant:"outline",size:"sm",onClick:()=>g(),children:[y.jsx(di,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2",children:[y.jsx(XF,{className:"w-5 h-5"}),"Server Status",y.jsx(Na,{className:"w-4 h-4 text-green-600"})]})}),y.jsxs(Kt,{children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-muted-foreground",children:"Uptime"}),y.jsx("div",{className:"font-medium",children:R((u==null?void 0:u.uptime)||0)})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-muted-foreground",children:"Memory"}),y.jsx("div",{className:"font-medium",children:A(((B=u==null?void 0:u.memory)==null?void 0:B.heapUsed)||0)})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-muted-foreground",children:"Total Files"}),y.jsx("div",{className:"font-medium",children:(u==null?void 0:u.totalFiles)||0})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-muted-foreground",children:"Bundles"}),y.jsx("div",{className:"font-medium",children:((P=u==null?void 0:u.bundles)==null?void 0:P.length)||0})]})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[y.jsx(nn,{variant:u!=null&&u.scanning?"destructive":"secondary",children:u!=null&&u.scanning?"Scanning":"Idle"}),y.jsxs(nn,{variant:(X=u==null?void 0:u.mcp)!=null&&X.enabled?"default":"secondary",children:["MCP: ",(Y=u==null?void 0:u.mcp)!=null&&Y.enabled?"Enabled":"Disabled"]})]})]})]}),y.jsxs(nl,{defaultValue:"endpoints",className:"w-full",children:[y.jsxs(rl,{className:"grid w-full grid-cols-3",children:[y.jsxs(Dn,{value:"endpoints",className:"flex items-center gap-2",children:[y.jsx(_v,{className:"w-4 h-4"}),"API Endpoints"]}),y.jsxs(Dn,{value:"mcp",className:"flex items-center gap-2",children:[y.jsx(Ag,{className:"w-4 h-4"}),"MCP Tools"]}),y.jsxs(Dn,{value:"bundle-sync",className:"flex items-center gap-2",children:[y.jsx(Mc,{className:"w-4 h-4"}),"Bundle Sync"]})]}),y.jsx(Wn,{value:"endpoints",className:"space-y-4",children:y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(Xn,{className:"text-lg",children:"API Endpoints"}),y.jsxs(Tt,{onClick:b,disabled:s,size:"sm",variant:"outline",children:[y.jsx(jT,{className:"w-4 h-4 mr-2"}),s?"Testing...":"Test All"]})]})}),y.jsx(Kt,{children:y.jsx("div",{className:"space-y-2",children:m2.map(Q=>{const ie=t.find(xe=>xe.path===Q.path);return y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(nn,{variant:"outline",className:"text-xs",children:Q.method}),y.jsx("code",{className:"text-sm",children:Q.path})]}),y.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Q.description})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Tt,{variant:"ghost",size:"sm",onClick:()=>F(Q),className:"h-7 w-7 p-0",title:`Test ${Q.path}`,children:y.jsx(RR,{className:"w-3 h-3"})}),ie&&y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:"text-xs text-muted-foreground",children:[ie.responseTime,"ms"]}),ie.status==="success"?y.jsx(Na,{className:"w-4 h-4 text-green-600"}):ie.status==="error"?y.jsx("div",{title:ie.error,children:y.jsx(Ho,{className:"w-4 h-4 text-red-600"})}):y.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})]})]})]},Q.path)})})})]})}),y.jsx(Wn,{value:"mcp",className:"space-y-4",children:y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(Xn,{className:"text-lg",children:"MCP Tools"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs(Ra,{value:a,onValueChange:l,children:[y.jsx(Io,{className:"w-48",children:y.jsx(Ca,{placeholder:"Filter by group"})}),y.jsx(Oo,{children:C().map(Q=>y.jsxs(pr,{value:Q,children:[Q," ",Q==="All"?`(${ql.length})`:`(${ql.filter(ie=>ie.group===Q).length})`]},Q))})]}),y.jsxs(Tt,{onClick:w,disabled:s||!((G=u==null?void 0:u.mcp)!=null&&G.enabled),size:"sm",variant:"outline",children:[y.jsx(jT,{className:"w-4 h-4 mr-2"}),s?"Testing...":"Test All"]})]})]})}),y.jsxs(Kt,{children:[!((K=u==null?void 0:u.mcp)!=null&&K.enabled)&&y.jsxs(Lf,{className:"mb-4",children:[y.jsx(Mc,{className:"w-4 h-4"}),y.jsx(zf,{children:"MCP server is not enabled. MCP tools will not be available."})]}),y.jsx("div",{className:"space-y-4",children:a==="All"?Object.entries(N()).map(([Q,ie])=>y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[y.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:Q}),y.jsxs(nn,{variant:"outline",className:"text-xs",children:[ie.length," tools"]})]}),y.jsx("div",{className:"space-y-2",children:ie.map(xe=>{const oe=n.find(Re=>Re.name===xe.name);return y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-sm",children:xe.name}),y.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:xe.description})]}),y.jsx("div",{className:"flex items-center gap-2",children:oe?oe.status==="available"?y.jsx(Na,{className:"w-4 h-4 text-green-600"}):y.jsx("div",{title:oe.error,children:y.jsx(Ho,{className:"w-4 h-4 text-red-600"})}):y.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},xe.name)})})]},Q)):y.jsx("div",{className:"space-y-2",children:M().map(Q=>{const ie=n.find(xe=>xe.name===Q.name);return y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-sm",children:Q.name}),y.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Q.description})]}),y.jsx("div",{className:"flex items-center gap-2",children:ie?ie.status==="available"?y.jsx(Na,{className:"w-4 h-4 text-green-600"}):y.jsx("div",{title:ie.error,children:y.jsx(Ho,{className:"w-4 h-4 text-red-600"})}):y.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},Q.name)})})})]})]})})]})]})}var wb={exports:{}},y2;function a8(){return y2||(y2=1,function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function N(k){return k instanceof u?new u(k.type,N(k.content),k.alias):Array.isArray(k)?k.map(N):k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(N){return Object.prototype.toString.call(N).slice(8,-1)},objId:function(N){return N.__id||Object.defineProperty(N,"__id",{value:++i}),N.__id},clone:function N(k,F){F=F||{};var B,P;switch(l.util.type(k)){case"Object":if(P=l.util.objId(k),F[P])return F[P];B={},F[P]=B;for(var X in k)k.hasOwnProperty(X)&&(B[X]=N(k[X],F));return B;case"Array":return P=l.util.objId(k),F[P]?F[P]:(B=[],F[P]=B,k.forEach(function(Y,G){B[G]=N(Y,F)}),B);default:return k}},getLanguage:function(N){for(;N;){var k=s.exec(N.className);if(k)return k[1].toLowerCase();N=N.parentElement}return"none"},setLanguage:function(N,k){N.className=N.className.replace(RegExp(s,"gi"),""),N.classList.add("language-"+k)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(B){var N=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(B.stack)||[])[1];if(N){var k=document.getElementsByTagName("script");for(var F in k)if(k[F].src==N)return k[F]}return null}},isActive:function(N,k,F){for(var B="no-"+k;N;){var P=N.classList;if(P.contains(k))return!0;if(P.contains(B))return!1;N=N.parentElement}return!!F}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(N,k){var F=l.util.clone(l.languages[N]);for(var B in k)F[B]=k[B];return F},insertBefore:function(N,k,F,B){B=B||l.languages;var P=B[N],X={};for(var Y in P)if(P.hasOwnProperty(Y)){if(Y==k)for(var G in F)F.hasOwnProperty(G)&&(X[G]=F[G]);F.hasOwnProperty(Y)||(X[Y]=P[Y])}var K=B[N];return B[N]=X,l.languages.DFS(l.languages,function(Q,ie){ie===K&&Q!=N&&(this[Q]=X)}),X},DFS:function N(k,F,B,P){P=P||{};var X=l.util.objId;for(var Y in k)if(k.hasOwnProperty(Y)){F.call(k,Y,k[Y],B||Y);var G=k[Y],K=l.util.type(G);K==="Object"&&!P[X(G)]?(P[X(G)]=!0,N(G,F,null,P)):K==="Array"&&!P[X(G)]&&(P[X(G)]=!0,N(G,F,Y,P))}}},plugins:{},highlightAll:function(N,k){l.highlightAllUnder(document,N,k)},highlightAllUnder:function(N,k,F){var B={callback:F,container:N,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",B),B.elements=Array.prototype.slice.apply(B.container.querySelectorAll(B.selector)),l.hooks.run("before-all-elements-highlight",B);for(var P=0,X;X=B.elements[P++];)l.highlightElement(X,k===!0,B.callback)},highlightElement:function(N,k,F){var B=l.util.getLanguage(N),P=l.languages[B];l.util.setLanguage(N,B);var X=N.parentElement;X&&X.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(X,B);var Y=N.textContent,G={element:N,language:B,grammar:P,code:Y};function K(ie){G.highlightedCode=ie,l.hooks.run("before-insert",G),G.element.innerHTML=G.highlightedCode,l.hooks.run("after-highlight",G),l.hooks.run("complete",G),F&&F.call(G.element)}if(l.hooks.run("before-sanity-check",G),X=G.element.parentElement,X&&X.nodeName.toLowerCase()==="pre"&&!X.hasAttribute("tabindex")&&X.setAttribute("tabindex","0"),!G.code){l.hooks.run("complete",G),F&&F.call(G.element);return}if(l.hooks.run("before-highlight",G),!G.grammar){K(l.util.encode(G.code));return}if(k&&r.Worker){var Q=new Worker(l.filename);Q.onmessage=function(ie){K(ie.data)},Q.postMessage(JSON.stringify({language:G.language,code:G.code,immediateClose:!0}))}else K(l.highlight(G.code,G.grammar,G.language))},highlight:function(N,k,F){var B={code:N,grammar:k,language:F};if(l.hooks.run("before-tokenize",B),!B.grammar)throw new Error('The language "'+B.language+'" has no grammar.');return B.tokens=l.tokenize(B.code,B.grammar),l.hooks.run("after-tokenize",B),u.stringify(l.util.encode(B.tokens),B.language)},tokenize:function(N,k){var F=k.rest;if(F){for(var B in F)k[B]=F[B];delete k.rest}var P=new g;return b(P,P.head,N),d(N,P,k,P.head,0),R(P)},hooks:{all:{},add:function(N,k){var F=l.hooks.all;F[N]=F[N]||[],F[N].push(k)},run:function(N,k){var F=l.hooks.all[N];if(!(!F||!F.length))for(var B=0,P;P=F[B++];)P(k)}},Token:u};r.Prism=l;function u(N,k,F,B){this.type=N,this.content=k,this.alias=F,this.length=(B||"").length|0}u.stringify=function N(k,F){if(typeof k=="string")return k;if(Array.isArray(k)){var B="";return k.forEach(function(K){B+=N(K,F)}),B}var P={type:k.type,content:N(k.content,F),tag:"span",classes:["token",k.type],attributes:{},language:F},X=k.alias;X&&(Array.isArray(X)?Array.prototype.push.apply(P.classes,X):P.classes.push(X)),l.hooks.run("wrap",P);var Y="";for(var G in P.attributes)Y+=" "+G+'="'+(P.attributes[G]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+Y+">"+P.content+"</"+P.tag+">"};function h(N,k,F,B){N.lastIndex=k;var P=N.exec(F);if(P&&B&&P[1]){var X=P[1].length;P.index+=X,P[0]=P[0].slice(X)}return P}function d(N,k,F,B,P,X){for(var Y in F)if(!(!F.hasOwnProperty(Y)||!F[Y])){var G=F[Y];G=Array.isArray(G)?G:[G];for(var K=0;K<G.length;++K){if(X&&X.cause==Y+","+K)return;var Q=G[K],ie=Q.inside,xe=!!Q.lookbehind,oe=!!Q.greedy,Re=Q.alias;if(oe&&!Q.pattern.global){var re=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,re+"g")}for(var Ee=Q.pattern||Q,ue=B.next,Ve=P;ue!==k.tail&&!(X&&Ve>=X.reach);Ve+=ue.value.length,ue=ue.next){var D=ue.value;if(k.length>N.length)return;if(!(D instanceof u)){var ne=1,ye;if(oe){if(ye=h(Ee,Ve,N,xe),!ye||ye.index>=N.length)break;var ke=ye.index,U=ye.index+ye[0].length,we=Ve;for(we+=ue.value.length;ke>=we;)ue=ue.next,we+=ue.value.length;if(we-=ue.value.length,Ve=we,ue.value instanceof u)continue;for(var ce=ue;ce!==k.tail&&(we<U||typeof ce.value=="string");ce=ce.next)ne++,we+=ce.value.length;ne--,D=N.slice(Ve,we),ye.index-=Ve}else if(ye=h(Ee,0,D,xe),!ye)continue;var ke=ye.index,Ce=ye[0],De=D.slice(0,ke),Ge=D.slice(ke+Ce.length),Ke=Ve+D.length;X&&Ke>X.reach&&(X.reach=Ke);var nt=ue.prev;De&&(nt=b(k,nt,De),Ve+=De.length),w(k,nt,ne);var st=new u(Y,ie?l.tokenize(Ce,ie):Ce,Re,Ce);if(ue=b(k,nt,st),Ge&&b(k,ue,Ge),ne>1){var ct={cause:Y+","+K,reach:Ke};d(N,k,F,ue.prev,Ve,ct),X&&ct.reach>X.reach&&(X.reach=ct.reach)}}}}}}function g(){var N={value:null,prev:null,next:null},k={value:null,prev:N,next:null};N.next=k,this.head=N,this.tail=k,this.length=0}function b(N,k,F){var B=k.next,P={value:F,prev:k,next:B};return k.next=P,B.prev=P,N.length++,P}function w(N,k,F){for(var B=k.next,P=0;P<F&&B!==N.tail;P++)B=B.next;k.next=B,B.prev=k,N.length-=P}function R(N){for(var k=[],F=N.head.next;F!==N.tail;)k.push(F.value),F=F.next;return k}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(N){var k=JSON.parse(N.data),F=k.language,B=k.code,P=k.immediateClose;r.postMessage(l.highlight(B,l.languages[F],F)),P&&r.close()},!1)),l;var A=l.util.currentScript();A&&(l.filename=A.src,A.hasAttribute("data-manual")&&(l.manual=!0));function C(){l.manual||l.highlightAll()}if(!l.manual){var M=document.readyState;M==="loading"||M==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return l}(e);t.exports&&(t.exports=n),typeof lT<"u"&&(lT.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(A,C){return" Error "+A+" while fetching file: "+C},i=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",u="loading",h="loaded",d="failed",g="pre[data-src]:not(["+l+'="'+h+'"]):not(['+l+'="'+u+'"])';function b(A,C,M){var N=new XMLHttpRequest;N.open("GET",A,!0),N.onreadystatechange=function(){N.readyState==4&&(N.status<400&&N.responseText?C(N.responseText):N.status>=400?M(s(N.status,N.statusText)):M(i))},N.send(null)}function w(A){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(A||"");if(C){var M=Number(C[1]),N=C[2],k=C[3];return N?k?[M,Number(k)]:[M,void 0]:[M,M]}}n.hooks.add("before-highlightall",function(A){A.selector+=", "+g}),n.hooks.add("before-sanity-check",function(A){var C=A.element;if(C.matches(g)){A.code="",C.setAttribute(l,u);var M=C.appendChild(document.createElement("CODE"));M.textContent=r;var N=C.getAttribute("data-src"),k=A.language;if(k==="none"){var F=(/\.(\w+)$/.exec(N)||[,"none"])[1];k=a[F]||F}n.util.setLanguage(M,k),n.util.setLanguage(C,k);var B=n.plugins.autoloader;B&&B.loadLanguages(k),b(N,function(P){C.setAttribute(l,h);var X=w(C.getAttribute("data-range"));if(X){var Y=P.split(/\r\n?|\n/g),G=X[0],K=X[1]==null?Y.length:X[1];G<0&&(G+=Y.length),G=Math.max(0,Math.min(G-1,Y.length)),K<0&&(K+=Y.length),K=Math.max(0,Math.min(K,Y.length)),P=Y.slice(G,K).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(G+1))}M.textContent=P,n.highlightElement(M)},function(P){C.setAttribute(l,d),M.textContent=P})}}),n.plugins.fileHighlight={highlight:function(C){for(var M=(C||document).querySelectorAll(g),N=0,k;k=M[N++];)n.highlightElement(k)}};var R=!1;n.fileHighlight=function(){R||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),R=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(wb)),wb.exports}var l8=a8();const Sb=Hc(l8);Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var b2={},_2;function c8(){return _2||(_2=1,function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(Prism)),b2}c8();(function(t){var e=t.util.clone(t.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,s=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function i(u,h){return u=u.replace(/<S>/g,function(){return n}).replace(/<BRACES>/g,function(){return r}).replace(/<SPREAD>/g,function(){return s}),RegExp(u,h)}s=i(s).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=i(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=e.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:i(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:i(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var a=function(u){return u?typeof u=="string"?u:typeof u.content=="string"?u.content:u.content.map(a).join(""):""},l=function(u){for(var h=[],d=0;d<u.length;d++){var g=u[d],b=!1;if(typeof g!="string"&&(g.type==="tag"&&g.content[0]&&g.content[0].type==="tag"?g.content[0].content[0].content==="</"?h.length>0&&h[h.length-1].tagName===a(g.content[0].content[1])&&h.pop():g.content[g.content.length-1].content==="/>"||h.push({tagName:a(g.content[0].content[1]),openedBraces:0}):h.length>0&&g.type==="punctuation"&&g.content==="{"?h[h.length-1].openedBraces++:h.length>0&&h[h.length-1].openedBraces>0&&g.type==="punctuation"&&g.content==="}"?h[h.length-1].openedBraces--:b=!0),(b||typeof g=="string")&&h.length>0&&h[h.length-1].openedBraces===0){var w=a(g);d<u.length-1&&(typeof u[d+1]=="string"||u[d+1].type==="plain-text")&&(w+=a(u[d+1]),u.splice(d+1,1)),d>0&&(typeof u[d-1]=="string"||u[d-1].type==="plain-text")&&(w=a(u[d-1])+w,u.splice(d-1,1),d--),u[d]=new t.Token("plain-text",w,null,w)}g.content&&typeof g.content!="string"&&l(g.content)}};t.hooks.add("after-tokenize",function(u){u.language!=="jsx"&&u.language!=="tsx"||l(u.tokens)})})(Prism);(function(t){var e=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",e),delete t.languages.tsx.parameter,delete t.languages.tsx["literal-property"];var n=t.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);var x2={},v2;function u8(){return v2||(v2=1,Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),Prism.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),Prism.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),Prism.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),Prism.languages.scss.atrule.inside.rest=Prism.languages.scss),x2}u8();(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+i+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+i+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(g){d!==g&&(t.languages.markdown[d].inside.content.inside[g]=t.languages.markdown[g])})}),t.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function g(b){if(!(!b||typeof b=="string"))for(var w=0,R=b.length;w<R;w++){var A=b[w];if(A.type!=="code"){g(A.content);continue}var C=A.content[1],M=A.content[3];if(C&&M&&C.type==="code-language"&&M.type==="code-block"&&typeof C.content=="string"){var N=C.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");N=(/[a-z][\w-]*/i.exec(N)||[""])[0].toLowerCase();var k="language-"+N;M.alias?typeof M.alias=="string"?M.alias=[M.alias,k]:M.alias.push(k):M.alias=[k]}}}g(d.tokens)}),t.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var g="",b=0,w=d.classes.length;b<w;b++){var R=d.classes[b],A=/language-(.+)/.exec(R);if(A){g=A[1];break}}var C=t.languages[g];if(C)d.content=t.highlight(h(d.content),C,g);else if(g&&g!=="none"&&t.plugins.autoloader){var M="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=M,t.plugins.autoloader.loadLanguages(g,function(){var N=document.getElementById(M);N&&(N.innerHTML=t.highlight(N.textContent,t.languages[g],g))})}}});var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function h(d){var g=d.replace(a,"");return g=g.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(b,w){if(w=w.toLowerCase(),w[0]==="#"){var R;return w[1]==="x"?R=parseInt(w.slice(2),16):R=Number(w.slice(1)),u(R)}else{var A=l[w];return A||b}}),g}t.languages.md=t.languages.markdown})(Prism);(function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var s=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,a=0;a<s.length;a++)i[s[a]]=t.languages.bash[s[a]];t.languages.sh=t.languages.bash,t.languages.shell=t.languages.bash})(Prism);(function(t){var e=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+e.source+")?|"+e.source+"(?:[ 	]+"+n.source+")?)",s=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(l,u){u=(u||"").replace(/m/g,"")+"m";var h=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return l});return RegExp(h,u)}t.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+s+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(i),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:e,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},t.languages.yml=t.languages.yaml})(Prism);const f8=async()=>{const t=await fetch("http://localhost:3333/api/semantic-chunks");if(!t.ok)throw new Error("Failed to fetch semantic analysis");return t.json()};function h8({chunk:t,isOpen:e,onClose:n}){const[r,s]=I.useState("");I.useEffect(()=>{if(e&&(t!=null&&t.code)){const l=(h=>{var g;switch((g=h.split(".").pop())==null?void 0:g.toLowerCase()){case"js":return"javascript";case"jsx":return"jsx";case"ts":return"typescript";case"tsx":return"tsx";case"json":return"json";case"css":return"css";case"scss":return"scss";case"md":return"markdown";case"sh":case"bash":return"bash";case"yml":case"yaml":return"yaml";default:return"javascript"}})(t.filePath),u=Sb.highlight(t.code,Sb.languages[l]||Sb.languages.javascript,l);s(u)}},[e,t]);const i=async()=>{if(t)try{const a=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t.filePath})});if(!a.ok){const l=await a.json();throw new Error(l.error||"Failed to open file")}rn.success(`Opening ${t.filePath} in editor...`)}catch(a){console.error("Failed to open in editor:",a),rn.error(`Could not open file: ${a instanceof Error?a.message:"Unknown error"}`)}};return!e||!t?null:y.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-background border rounded-lg shadow-lg w-full max-w-3xl max-h-[80vh] flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-base",children:t.name}),y.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filePath,t.startLine?`:${t.startLine}`:""]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(Tt,{variant:"outline",size:"sm",onClick:i,title:"Open in external editor",children:[y.jsx(Eg,{className:"w-3 h-3 mr-1"}),"Open"]}),y.jsxs(Tt,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.code||""),rn.success("Code copied to clipboard!")},children:[y.jsx(Ff,{className:"w-3 h-3 mr-1"}),"Copy"]}),y.jsx(Tt,{variant:"outline",size:"sm",onClick:n,children:y.jsx(zs,{className:"w-3 h-3"})})]})]}),y.jsx("div",{className:"flex-1 overflow-auto p-3",children:t.code?y.jsx("div",{className:"bg-muted/30 rounded p-3",children:y.jsx("pre",{className:"text-xs font-mono overflow-x-auto",children:y.jsx("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:r}})})}):y.jsx("div",{className:"text-center text-muted-foreground py-6",children:"No code available for this chunk"})})]})})}function d8(){var Ee,ue,Ve,D;const[t,e]=I.useState(!1),[n,r]=I.useState(null),[s,i]=I.useState(!1),[a,l]=I.useState(""),[u,h]=I.useState("all"),[d,g]=I.useState("all"),[b,w]=I.useState("all"),[R,A]=I.useState("all"),[C,M]=I.useState("all"),[N,k]=I.useState("all"),{data:F,isLoading:B,error:P,refetch:X}=Es({queryKey:["semantic-analysis"],queryFn:f8,staleTime:3e4,refetchInterval:6e4}),{data:Y}=Es({queryKey:["bundle-states"],queryFn:async()=>{const ne=await fetch("/api/bundles");if(!ne.ok)throw new Error("Failed to fetch bundles");return ne.json()},staleTime:3e4}),G=I.useMemo(()=>F!=null&&F.chunks?F.chunks.filter(ye=>{var U,we,ce;if(a){const ke=a.toLowerCase();if(!(ye.name.toLowerCase().includes(ke)||ye.purpose.toLowerCase().includes(ke)||ye.filePath.toLowerCase().includes(ke)||((U=ye.code)==null?void 0:U.toLowerCase().includes(ke))))return!1}return!(u!=="all"&&ye.semanticType!==u||d!=="all"&&((we=ye.complexity)==null?void 0:we.level)!==d||b!=="all"&&!ye.purpose.toLowerCase().includes(b.toLowerCase())||R==="async"&&!ye.isAsync||R==="sync"&&ye.isAsync||C==="exported"&&!ye.isExported||C==="internal"&&ye.isExported||N!=="all"&&!((ce=ye.bundles)!=null&&ce.includes(N)))}):[],[F==null?void 0:F.chunks,a,u,d,b,R,C,N]),K=I.useMemo(()=>{if(!(F!=null&&F.chunks))return{types:[],purposes:[],complexities:[],bundles:[]};const ne=[...new Set(F.chunks.map(ce=>ce.semanticType).filter(Boolean))].sort(),ye=[...new Set(F.chunks.map(ce=>ce.purpose))].sort(),U=[...new Set(F.chunks.map(ce=>{var ke;return(ke=ce.complexity)==null?void 0:ke.level}).filter(Boolean))].sort(),we=Y?Y.map(ce=>ce.name).sort():[];return console.log("Bundle states data:",Y),console.log("Extracted bundles:",we),{types:ne,purposes:ye,complexities:U,bundles:we}},[F==null?void 0:F.chunks,Y]),Q=()=>{l(""),h("all"),g("all"),w("all"),A("all"),M("all"),k("all")},ie=a||u!=="all"||d!=="all"||b!=="all"||R!=="all"||C!=="all"||N!=="all",xe=ne=>{r(ne),i(!0)},oe=async(ne,ye)=>{try{const U={filePath:ne};ye&&(U.line=ye);const we=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!we.ok){const ce=await we.json();throw new Error(ce.error||"Failed to open file")}rn.success(`Opening ${ne} in editor...`)}catch(U){console.error("Failed to open in editor:",U),rn.error(`Could not open file: ${U instanceof Error?U.message:"Unknown error"}`)}},Re=ne=>{var ye,U;return ne.subtype==="react_component"||(ye=ne.tags)!=null&&ye.includes("react_component")?y.jsx(bv,{className:"w-4 h-4"}):(U=ne.purpose)!=null&&U.includes("React hook")?y.jsx(Ag,{className:"w-4 h-4"}):ne.subtype==="arrow_function"?y.jsx(jf,{className:"w-4 h-4"}):ne.subtype==="method"?y.jsx(Rd,{className:"w-4 h-4"}):y.jsx(jf,{className:"w-4 h-4"})},re=ne=>{switch(ne){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}};return B?y.jsx(Ut,{children:y.jsx(Kt,{className:"pt-6",children:y.jsxs("div",{className:"flex items-center justify-center py-8",children:[y.jsx(di,{className:"w-6 h-6 animate-spin mr-2"}),y.jsx("span",{className:"text-sm",children:"Analyzing code semantics..."})]})})}):P?y.jsx(Ut,{children:y.jsx(Kt,{className:"pt-6",children:y.jsxs(Lf,{children:[y.jsx(Ho,{className:"w-4 h-4"}),y.jsxs(zf,{children:["Failed to load semantic analysis. Make sure the server supports semantic chunking.",y.jsx(Tt,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>X(),children:"Retry"})]})]})})}):F?y.jsxs("div",{className:"space-y-6",children:[y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center justify-between text-sm font-thin",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(AR,{className:"w-4 h-4"}),"Filters"]}),y.jsxs("div",{className:"flex items-center gap-2",children:[ie&&y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:Q,children:[y.jsx(zs,{className:"w-3 h-3 mr-1"}),"Clear All"]}),y.jsx(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs md:hidden",onClick:()=>e(!t),children:t?y.jsx(sF,{className:"w-3 h-3"}):y.jsx(Tg,{className:"w-3 h-3"})})]})]})}),y.jsxs(Kt,{className:`${t?"block":"hidden"} md:block`,children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[y.jsx("div",{className:"md:col-span-2 lg:col-span-2 xl:col-span-2",children:y.jsxs("div",{className:"relative",children:[y.jsx(WF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),y.jsx(Mk,{placeholder:"Search functions...",value:a,onChange:ne=>l(ne.target.value),className:"pl-10 h-8 text-xs"})]})}),y.jsx("div",{children:y.jsxs(Ra,{value:u,onValueChange:h,children:[y.jsx(Io,{className:"h-8 text-xs",children:y.jsx(Ca,{placeholder:"Type"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"all",children:"All Types"}),K.types.map(ne=>y.jsx(pr,{value:ne,children:ne},ne))]})]})}),y.jsx("div",{children:y.jsxs(Ra,{value:d,onValueChange:g,children:[y.jsx(Io,{className:"h-8 text-xs",children:y.jsx(Ca,{placeholder:"Complexity"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"all",children:"All Complexity"}),K.complexities.map(ne=>y.jsx(pr,{value:ne,children:ne},ne))]})]})}),y.jsx("div",{children:y.jsxs(Ra,{value:b,onValueChange:w,children:[y.jsx(Io,{className:"h-8 text-xs",children:y.jsx(Ca,{placeholder:"Purpose"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"all",children:"All Purposes"}),K.purposes.map(ne=>y.jsx(pr,{value:ne,children:ne},ne))]})]})}),y.jsx("div",{children:y.jsxs(Ra,{value:R,onValueChange:A,children:[y.jsx(Io,{className:"h-8 text-xs",children:y.jsx(Ca,{placeholder:"Async"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"all",children:"All Functions"}),y.jsx(pr,{value:"async",children:"Async Only"}),y.jsx(pr,{value:"sync",children:"Sync Only"})]})]})}),y.jsx("div",{children:y.jsxs(Ra,{value:N,onValueChange:k,children:[y.jsx(Io,{className:"h-8 text-xs",children:y.jsx(Ca,{placeholder:"Bundle"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"all",children:"All Bundles"}),K.bundles.map(ne=>y.jsx(pr,{value:ne,children:ne},ne))]})]})})]}),ie&&y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t",children:[a&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:['Search: "',a,'"',y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),l("")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]}),u!=="all"&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Type: ",u,y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),h("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]}),d!=="all"&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Complexity: ",d,y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),g("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]}),b!=="all"&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Purpose: ",b,y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),w("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]}),R!=="all"&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[R==="async"?"Async Only":"Sync Only",y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),A("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]}),N!=="all"&&y.jsxs(nn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Bundle: ",N,y.jsx("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),k("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:y.jsx(zs,{className:"w-3 h-3"})})]})]})]})]}),y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center justify-between text-sm font-thin",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(U_,{className:"w-4 h-4"}),"Project Analysis"]}),y.jsxs(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>X(),disabled:B,children:[y.jsx(di,{className:"w-3 h-3 mr-1"}),"Refresh"]})]})}),y.jsx(Kt,{children:y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-thin",children:((Ee=F.summary)==null?void 0:Ee.totalFiles)||0}),y.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Files Analyzed"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-thin",children:((ue=F.summary)==null?void 0:ue.totalFunctions)||0}),y.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Functions Extracted"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-thin",children:[G.length,ie&&y.jsxs("span",{className:"text-sm text-muted-foreground",children:[" / ",((Ve=F.summary)==null?void 0:Ve.totalChunks)||0]})]}),y.jsxs("div",{className:"text-xs text-muted-foreground font-thin",children:[ie?"Filtered":"Total"," Chunks"]})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-thin",children:Math.round(((D=F.summary)==null?void 0:D.averageChunkSize)||0)}),y.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Avg Chunk Size"})]})]})})]}),G.length===0?y.jsx(Ut,{children:y.jsx(Kt,{className:"pt-6",children:y.jsxs("div",{className:"text-center py-8",children:[y.jsx(Rd,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),y.jsx("h3",{className:"text-lg font-thin mb-2",children:"No chunks match your filters"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your search criteria or clearing the filters."}),ie&&y.jsx(Tt,{variant:"outline",onClick:Q,children:"Clear All Filters"})]})})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map((ne,ye)=>{var U,we,ce,ke,Ce,De,Ge,Ke,nt,st;return y.jsxs(Ut,{className:"relative",children:[y.jsx(Fn,{children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[y.jsx("div",{className:"mt-1 flex-shrink-0",children:Re(ne)}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx(Xn,{className:"text-sm font-thin tracking-wide truncate",children:ne.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[y.jsx(nn,{variant:"outline",className:"text-xs h-4",children:ne.subtype||ne.type}),y.jsxs(nn,{variant:"outline",className:"text-xs h-4",children:[ne.size," chars"]}),y.jsxs(nn,{variant:"outline",className:`text-xs h-4 ${re(((U=ne.complexity)==null?void 0:U.level)||"unknown")}`,children:[((we=ne.complexity)==null?void 0:we.level)||"unknown"," complexity"]}),ne.isAsync&&y.jsx(nn,{variant:"outline",className:"text-xs h-4 bg-blue-50",children:"async"}),ne.isExported&&y.jsx(nn,{variant:"outline",className:"text-xs h-4 bg-green-50",children:"exported"})]})]})]}),y.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[y.jsx(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>oe(ne.filePath,ne.startLine),title:"Open in external editor",children:y.jsx(Eg,{className:"w-3 h-3"})}),y.jsx(Tt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>xe(ne),title:"View code preview",children:y.jsx(TR,{className:"w-3 h-3"})})]})]})}),y.jsx(Kt,{children:y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"text-xs text-muted-foreground font-thin mb-2 line-clamp-2",children:[y.jsx(BF,{className:"w-3 h-3 inline mr-1"}),ne.purpose]}),y.jsxs("div",{className:"flex flex-wrap gap-1",children:[(ne.tags||[]).slice(0,4).map(ct=>y.jsx(nn,{variant:"secondary",className:"text-xs h-4",children:ct},ct)),(ne.tags||[]).length>4&&y.jsxs(nn,{variant:"secondary",className:"text-xs h-4",children:["+",(ne.tags||[]).length-4," more"]})]})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-thin mb-1",children:"Location:"}),y.jsxs("div",{className:"text-xs text-muted-foreground font-thin font-mono truncate",children:[ne.filePath,ne.startLine?`:${ne.startLine}`:""]})]}),(((ce=ne.bundles)==null?void 0:ce.length)||0)>0&&y.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50 rounded text-xs",children:[y.jsx(Rd,{className:"w-3 h-3 mt-0.5 text-blue-600 flex-shrink-0"}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("div",{className:"font-thin text-blue-800",children:"Bundles:"}),y.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(ke=ne.bundles)==null?void 0:ke.slice(0,2).map(ct=>y.jsx(nn,{variant:"outline",className:"text-xs h-4 bg-blue-100 text-blue-700 border-blue-200",children:ct},ct)),(((Ce=ne.bundles)==null?void 0:Ce.length)||0)>2&&y.jsxs(nn,{variant:"outline",className:"text-xs h-4 bg-blue-100 text-blue-700 border-blue-200",children:["+",(((De=ne.bundles)==null?void 0:De.length)||0)-2," more"]})]})]})]}),(((Ge=ne.includes)==null?void 0:Ge.imports.length)||0)>0&&y.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/50 rounded text-xs",children:[y.jsx(Rd,{className:"w-3 h-3 mt-0.5 text-blue-500 flex-shrink-0"}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("div",{className:"font-thin",children:"Imports:"}),y.jsx("div",{className:"font-thin truncate",children:(Ke=ne.includes)==null?void 0:Ke.imports.slice(0,2).join(", ")}),(((nt=ne.includes)==null?void 0:nt.imports.length)||0)>2&&y.jsxs("div",{className:"text-muted-foreground",children:["+",(((st=ne.includes)==null?void 0:st.imports.length)||0)-2," more"]})]})]})]})})]},`${ne.filePath}-${ne.name}-${ye}`)})}),y.jsx(h8,{chunk:n,isOpen:s,onClose:()=>{i(!1),r(null)}})]}):null}function w2(){const{theme:t,setTheme:e}=Jj();return y.jsxs(Tt,{variant:"ghost",size:"sm",onClick:()=>e(t==="light"?"dark":"light"),className:"h-8 w-8 p-0",children:[y.jsx(JF,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),y.jsx(IF,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),y.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function Cp(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const jv=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),S2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);S2&&parseFloat(S2[1]);const Fd=globalThis,Xl=globalThis.process||{},p8=globalThis.navigator||{};function Ik(t){var r,s;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((s=process.versions)!=null&&s.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function sl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||Ik()}function g8(t){return sl()?Ik()?"Electron":(p8.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const Ok="4.1.0";function m8(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class y8{constructor(e,n,r="sessionStorage"){this.storage=m8(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function b8(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function _8(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var kp;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(kp||(kp={}));const x8=10;function T2(t){return typeof t!="string"?t:(t=t.toUpperCase(),kp[t]||kp.WHITE)}function v8(t,e,n){return!sl&&typeof t=="string"&&(e&&(t=`\x1B[${T2(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${T2(n)+x8}m${t}\x1B[49m`)),t}function w8(t,e=["constructor"]){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),s=t;for(const i of r){const a=s[i];typeof a=="function"&&(e.find(l=>i===l)||(s[i]=a.bind(t)))}}function Bv(t,e){if(!t)throw new Error("Assertion failed")}function Yl(){var e,n,r;let t;if(sl()&&Fd.performance)t=(n=(e=Fd==null?void 0:Fd.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in Xl){const s=(r=Xl==null?void 0:Xl.hrtime)==null?void 0:r.call(Xl);t=s[0]*1e3+s[1]/1e6}else t=Date.now();return t}const Kl={debug:sl()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},S8={enabled:!0,level:0};function Zl(){}const E2={},A2={once:!0};class sh{constructor({id:e}={id:""}){this.VERSION=Ok,this._startTs=Yl(),this._deltaTs=Yl(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new y8(`__probe-${this.id}__`,S8),this.timeStamp(`${this.id} started`),w8(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Yl()-this._startTs).toPrecision(10))}getDelta(){return Number((Yl()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Kl.warn,arguments,A2)}error(e){return this._getLogFunction(0,e,Kl.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,Kl.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Kl.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Kl.debug||Kl.info,arguments,A2)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Zl,r&&[r],{tag:E8(n)}):Zl}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Zl)}group(e,n,r={collapsed:!1}){const s=R2({logLevel:e,message:n,opts:r}),{collapsed:i}=r;return s.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Zl)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Pk(e)}_getLogFunction(e,n,r,s,i){if(this._shouldLog(e)){i=R2({logLevel:e,message:n,args:s,opts:i}),r=r||i.method,Bv(r),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=Yl();const a=i.tag||i.message;if(i.once&&a)if(!E2[a])E2[a]=Yl();else return Zl;return n=T8(this.id,i.message,i),r.bind(console,n,...i.args)}return Zl}}sh.VERSION=Ok;function Pk(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Bv(Number.isFinite(e)&&e>=0),e}function R2(t){const{logLevel:e,message:n}=t;t.logLevel=Pk(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const s=typeof t.message;return Bv(s==="string"||s==="object"),Object.assign(t,{args:r},t.opts)}function T8(t,e,n){if(typeof e=="string"){const r=n.time?_8(b8(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=v8(e,n.color,n.background)}return e}function E8(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Tb="4.3.3",A8=Tb[0]>="0"&&Tb[0]<="9"?`v${Tb}`:"";function R8(){const t=new sh({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=A8,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const C8=R8();function k8(t,e){return Dk(t||{},e)}function Dk(t,e,n=0){if(n>3)return e;const r={...t};for(const[s,i]of Object.entries(e))i&&typeof i=="object"&&!Array.isArray(i)?r[s]=Dk(r[s]||{},e[s],n+1):r[s]=e[s];return r}const N8="latest";function M8(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const I8=M8();function Jo(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const La=typeof process!="object"||String(process)!=="[object process]"||process.browser,O8=typeof window<"u"&&typeof window.orientation<"u",C2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);C2&&parseFloat(C2[1]);class P8{constructor(e,n){z(this,"name");z(this,"workerThread");z(this,"isRunning",!0);z(this,"result");z(this,"_resolve",()=>{});z(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Jo(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Jo(this.isRunning),this.isRunning=!1,this._reject(e)}}class Eb{terminate(){}}const Ab=new Map;function D8(t){Jo(t.source&&!t.url||!t.source&&t.url);let e=Ab.get(t.source||t.url);return e||(t.url&&(e=F8(t.url),Ab.set(t.url,e)),t.source&&(e=Fk(t.source),Ab.set(t.source,e))),Jo(e),e}function F8(t){if(!t.startsWith("http"))return t;const e=j8(t);return Fk(e)}function Fk(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function j8(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function jk(t,e=!0,n){const r=n||new Set;if(t){if(k2(t))r.add(t);else if(k2(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const s in t)jk(t[s],e,r)}}return n===void 0?Array.from(r):[]}function k2(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Rb=()=>{};class tx{constructor(e){z(this,"name");z(this,"source");z(this,"url");z(this,"terminated",!1);z(this,"worker");z(this,"onMessage");z(this,"onError");z(this,"_loadableURL","");const{name:n,source:r,url:s}=e;Jo(r||s),this.name=n,this.source=r,this.url=s,this.onMessage=Rb,this.onError=i=>console.log(i),this.worker=La?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&La||typeof Eb<"u"&&!La}destroy(){this.onMessage=Rb,this.onError=Rb,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||jk(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=D8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new Eb(r,{eval:!1})}else if(this.source)e=new Eb(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class B8{constructor(e){z(this,"name","unnamed");z(this,"source");z(this,"url");z(this,"maxConcurrency",1);z(this,"maxMobileConcurrency",1);z(this,"onDebug",()=>{});z(this,"reuseWorkers",!0);z(this,"props",{});z(this,"jobQueue",[]);z(this,"idleQueue",[]);z(this,"count",0);z(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return tx.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(s,i,a)=>s.done(a),r=(s,i)=>s.error(i)){const s=new Promise(i=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:i}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new P8(n.name,e);e.onMessage=s=>n.onMessage(r,s.type,s.payload),e.onError=s=>n.onError(r,s),n.onStart(r);try{await r.result}catch(s){console.error(`Worker exception: ${s}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!La||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new tx({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return O8?this.maxMobileConcurrency:this.maxConcurrency}}const U8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},No=class No{constructor(e){z(this,"props");z(this,"workerPools",new Map);this.props={...U8},this.setProps(e),this.workerPools=new Map}static isSupported(){return tx.isSupported()}static getWorkerFarm(e={}){return No._workerFarm=No._workerFarm||new No({}),No._workerFarm.setProps(e),No._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:s}=e;let i=this.workerPools.get(n);return i||(i=new B8({name:n,source:r,url:s}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};z(No,"_workerFarm");let Np=No;function L8(t,e={}){const n=e[t.id]||{},r=La?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let s=n.workerUrl;if(!s&&t.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(La?s=`modules/${t.module}/dist/${r}`:s=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!s){let i=t.version;i==="latest"&&(i=N8);const a=i?`@${i}`:"";s=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${r}`}return Jo(s),s}function z8(t,e=I8){Jo(t,"no worker provided");const n=t.version;return!(!e||!n)}function V8(t,e){return!Np.isSupported()||!La&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function $8(t,e,n,r,s){const i=t.id,a=L8(t,n),u=Np.getWorkerFarm(n).getWorkerPool({name:i,url:a});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const h=await u.startJob("process-on-worker",H8.bind(null,s));return h.postMessage("process",{input:e,options:n,context:r}),await(await h.result).result}async function H8(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:s,input:i,options:a}=r;try{const l=await t(i,a);e.postMessage("done",{id:s,result:l})}catch(l){const u=l instanceof Error?l.message:"unknown error";e.postMessage("error",{id:s,error:u})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function W8(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),s=new Uint8Array(e);for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}function q8(...t){return X8(t)}function X8(t){const e=t.map(i=>i instanceof ArrayBuffer?new Uint8Array(i):i),n=e.reduce((i,a)=>i+a.byteLength,0),r=new Uint8Array(n);let s=0;for(const i of e)r.set(i,s),s+=i.byteLength;return r.buffer}async function Y8(t){const e=[];for await(const n of t)e.push(n);return q8(...e)}function N2(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class M2{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=N2(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(N2()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Dg{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let s=this.stats[n];return s||(e instanceof M2?s=e:s=new M2(n,r),this.stats[n]=s),s}}let K8="";const I2={};function Z8(t){for(const e in I2)if(t.startsWith(e)){const n=I2[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${K8}${t}`),t}function Q8(t){return t&&typeof t=="object"&&t.isBuffer}function Bk(t){if(Q8(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Uk(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function G8(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const J8=t=>typeof t=="boolean",vf=t=>typeof t=="function",ih=t=>t!==null&&typeof t=="object",O2=t=>ih(t)&&t.constructor==={}.constructor,ez=t=>!!t&&typeof t[Symbol.iterator]=="function",tz=t=>t&&typeof t[Symbol.asyncIterator]=="function",il=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ol=t=>typeof Blob<"u"&&t instanceof Blob,nz=t=>t&&typeof t=="object"&&t.isBuffer,rz=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||ih(t)&&vf(t.tee)&&vf(t.cancel)&&vf(t.getReader),sz=t=>ih(t)&&vf(t.read)&&vf(t.pipe)&&J8(t.readable),Lk=t=>rz(t)||sz(t);class iz extends Error{constructor(n,r){super(n);z(this,"reason");z(this,"url");z(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const oz=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,az=/^([-\w.]+\/[-\w.+]+)/;function P2(t,e){return t.toLowerCase()===e.toLowerCase()}function lz(t){const e=az.exec(t);return e?e[1]:t}function D2(t){const e=oz.exec(t);return e?e[1]:""}const zk=/\?.*/;function cz(t){const e=t.match(zk);return e&&e[0]}function Uv(t){return t.replace(zk,"")}function uz(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Fg(t){return il(t)?t.url:ol(t)?t.name||"":typeof t=="string"?t:""}function Lv(t){if(il(t)){const e=t,n=e.headers.get("content-type")||"",r=Uv(e.url);return lz(n)||D2(r)}return ol(t)?t.type||"":typeof t=="string"?D2(t):""}function fz(t){return il(t)?t.headers["content-length"]||-1:ol(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function Vk(t){if(il(t))return t;const e={},n=fz(t);n>=0&&(e["content-length"]=String(n));const r=Fg(t),s=Lv(t);s&&(e["content-type"]=s);const i=await pz(t);i&&(e["x-first-bytes"]=i),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:r}),a}async function hz(t){if(!t.ok)throw await dz(t)}async function dz(t){const e=uz(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:t.statusText,url:t.url,response:t};try{const s=t.headers.get("Content-Type");r.reason=!t.bodyUsed&&(s!=null&&s.includes("application/json"))?await t.json():await t.text()}catch{}return new iz(n,r)}async function pz(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=i=>{var a;return r((a=i==null?void 0:i.target)==null?void 0:a.result)},s.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${gz(n)}`}return null}function gz(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function mz(t){return!yz(t)&&!bz(t)}function yz(t){return t.startsWith("http:")||t.startsWith("https:")}function bz(t){return t.startsWith("data:")}async function F2(t,e){var n,r;if(typeof t=="string"){const s=Z8(t);return mz(s)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(s,e):await fetch(s,e)}return await Vk(t)}const j2=new sh({id:"loaders.gl"});class _z{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class xz{constructor(){z(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const $k={fetch:null,mimeType:void 0,nothrow:!1,log:new xz,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:jv,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},vz={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Hk(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function Wk(){const t=Hk();return t.globalOptions=t.globalOptions||{...$k},t.globalOptions}function wz(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],Sz(t,n),Ez(e,t,r)}function Sz(t,e){B2(t,null,$k,vz,e);for(const n of e){const r=t&&t[n.id]||{},s=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};B2(r,n.id,s,i,e)}}function B2(t,e,n,r,s){const i=e||"Top level",a=e?`${e}.`:"";for(const l in t){const u=!e&&ih(t[l]),h=l==="baseUri"&&!e,d=l==="workerUrl"&&e;if(!(l in n)&&!h&&!d){if(l in r)j2.warn(`${i} loader option '${a}${l}' no longer supported, use '${r[l]}'`)();else if(!u){const g=Tz(l,s);j2.warn(`${i} loader option '${a}${l}' not recognized. ${g}`)()}}}}function Tz(t,e){const n=t.toLowerCase();let r="";for(const s of e)for(const i in s.options){if(t===i)return`Did you mean '${s.id}.${i}'?`;const a=i.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(r=r||`Did you mean '${s.id}.${i}'?`)}return r}function Ez(t,e,n){const s={...t.options||{}};return Az(s,n),s.log===null&&(s.log=new _z),U2(s,Wk()),U2(s,e),s}function U2(t,e){for(const n in e)if(n in e){const r=e[n];O2(r)&&O2(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function Az(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function zv(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function Vv(t){Cp(t,"null loader"),Cp(zv(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const qk=()=>{const t=Hk();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Rz(t){const e=qk();t=Array.isArray(t)?t:[t];for(const n of t){const r=Vv(n);e.find(s=>r===s)||e.unshift(r)}}function Cz(){return qk()}const kz=/\.([^.]+)$/;async function Nz(t,e=[],n,r){if(!Xk(t))return null;let s=L2(t,e,{...n,nothrow:!0},r);if(s)return s;if(ol(t)&&(t=await t.slice(0,10).arrayBuffer(),s=L2(t,e,n,r)),!s&&!(n!=null&&n.nothrow))throw new Error(Yk(t));return s}function L2(t,e=[],n,r){if(!Xk(t))return null;if(e&&!Array.isArray(e))return Vv(e);let s=[];e&&(s=s.concat(e)),n!=null&&n.ignoreRegisteredLoaders||s.push(...Cz()),Iz(s);const i=Mz(t,s,n,r);if(!i&&!(n!=null&&n.nothrow))throw new Error(Yk(t));return i}function Mz(t,e,n,r){const s=Fg(t),i=Lv(t),a=Uv(s)||(r==null?void 0:r.url);let l=null,u="";return n!=null&&n.mimeType&&(l=Cb(e,n==null?void 0:n.mimeType),u=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),l=l||Oz(e,a),u=u||(l?`matched url ${a}`:""),l=l||Cb(e,i),u=u||(l?`matched MIME type ${i}`:""),l=l||Dz(e,t),u=u||(l?`matched initial data ${Kk(t)}`:""),n!=null&&n.fallbackMimeType&&(l=l||Cb(e,n==null?void 0:n.fallbackMimeType),u=u||(l?`matched fallback MIME type ${i}`:"")),u&&C8.log(1,`selectLoader selected ${l==null?void 0:l.name}: ${u}.`),l}function Xk(t){return!(t instanceof Response&&t.status===204)}function Yk(t){const e=Fg(t),n=Lv(t);let r="No valid loader found (";r+=e?`${Uk(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const s=t?Kk(t):"";return r+=s?` first bytes: "${s}"`:"first bytes: not available",r+=")",r}function Iz(t){for(const e of t)Vv(e)}function Oz(t,e){const n=e&&kz.exec(e),r=n&&n[1];return r?Pz(t,r):null}function Pz(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Cb(t,e){var n;for(const r of t)if((n=r.mimeTypes)!=null&&n.some(s=>P2(e,s))||P2(e,`application/x.${r.id}`))return r;return null}function Dz(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(Fz(e,n))return n}else if(ArrayBuffer.isView(e)){if(z2(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&z2(e,0,n))return n;return null}function Fz(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function z2(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>jz(t,e,n,s))}function jz(t,e,n,r){if(r instanceof ArrayBuffer)return W8(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const s=nx(t,e,r.length);return r===s;default:return!1}}function Kk(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?nx(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?nx(t,0,e):""}function nx(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let s="";for(let i=0;i<n;i++)s+=String.fromCharCode(r.getUint8(e+i));return s}const Bz=256*1024;function*Uz(t,e){const n=(e==null?void 0:e.chunkSize)||Bz;let r=0;const s=new TextEncoder;for(;r<t.length;){const i=Math.min(t.length-r,n),a=t.slice(r,r+i);r+=i,yield s.encode(a)}}const Lz=256*1024;function*zz(t,e={}){const{chunkSize:n=Lz}=e;let r=0;for(;r<t.byteLength;){const s=Math.min(t.byteLength-r,n),i=new ArrayBuffer(s),a=new Uint8Array(t,r,s);new Uint8Array(i).set(a),r+=s,yield i}}const Vz=1024*1024;async function*$z(t,e){const n=(e==null?void 0:e.chunkSize)||Vz;let r=0;for(;r<t.size;){const s=r+n,i=await t.slice(r,s).arrayBuffer();r=s,yield i}}function V2(t,e){return jv?Hz(t,e):Wz(t)}async function*Hz(t,e){const n=t.getReader();let r;try{for(;;){const s=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:i,value:a}=await s;if(i)return;yield Bk(a)}}catch{n.releaseLock()}}async function*Wz(t,e){for await(const n of t)yield Bk(n)}function qz(t,e){if(typeof t=="string")return Uz(t,e);if(t instanceof ArrayBuffer)return zz(t,e);if(ol(t))return $z(t,e);if(Lk(t))return V2(t,e);if(il(t))return V2(t.body,e);throw new Error("makeIterator")}const Zk="Cannot convert supplied data type";function Xz(t,e,n){if(e.text&&typeof t=="string")return t;if(nz(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return(t.byteOffset!==0||s!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(Zk)}async function Yz(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return Xz(t,e);if(ol(t)&&(t=await Vk(t)),il(t)){const s=t;return await hz(s),e.binary?await s.arrayBuffer():await s.text()}if(Lk(t)&&(t=qz(t,n)),ez(t)||tz(t))return Y8(t);throw new Error(Zk)}function Qk(t,e){const n=Wk(),r=t||n;return typeof r.fetch=="function"?r.fetch:ih(r.fetch)?s=>F2(s,r.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:F2}function Kz(t,e,n){if(n)return n;const r={fetch:Qk(e,t),...t};if(r.url){const s=Uv(r.url);r.baseUrl=s,r.queryString=cz(r.url),r.filename=Uk(s),r.baseUrl=G8(s)}return Array.isArray(r.loaders)||(r.loaders=null),r}function Zz(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function Mp(t,e,n,r){e&&!Array.isArray(e)&&!zv(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const s=Fg(t),a=Zz(e,r),l=await Nz(t,a,n);return l?(n=wz(n,l,a,s),r=Kz({url:s,_parse:Mp,loaders:a},n,r||null),await Qz(l,t,n,r)):null}async function Qz(t,e,n,r){if(z8(t),n=k8(t.options,n),il(e)){const i=e,{ok:a,redirected:l,status:u,statusText:h,type:d,url:g}=i,b=Object.fromEntries(i.headers.entries());r.response={headers:b,ok:a,redirected:l,status:u,statusText:h,type:d,url:g}}e=await Yz(e,t,n);const s=t;if(s.parseTextSync&&typeof e=="string")return s.parseTextSync(e,n,r);if(V8(t,n))return await $8(t,e,n,r,Mp);if(s.parseText&&typeof e=="string")return await s.parseText(e,n,r);if(s.parse)return await s.parse(e,n,r);throw Jo(!s.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function rx(t,e,n,r){let s,i;!Array.isArray(e)&&!zv(e)?(s=[],i=e):(s=e,i=n);const a=Qk(i);let l=t;return typeof t=="string"&&(l=await a(t)),ol(t)&&(l=await a(t)),Array.isArray(s)?await Mp(l,s,i):await Mp(l,s,i)}const Gz="4.3.3";var C3;const Jz=(C3=globalThis.loaders)==null?void 0:C3.parseImageNode,sx=typeof Image<"u",ix=typeof ImageBitmap<"u",e5=!!Jz,ox=jv?!0:e5;function t5(t){switch(t){case"auto":return ix||sx||ox;case"imagebitmap":return ix;case"image":return sx;case"data":return ox;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function n5(){if(ix)return"imagebitmap";if(sx)return"image";if(ox)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function r5(t){const e=i5(t);if(!e)throw new Error("Not an image");return e}function s5(t){switch(r5(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function i5(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const o5=/^data:image\/svg\+xml/,a5=/\.svg((\?|#).*)?$/;function $v(t){return t&&(o5.test(t)||a5.test(t))}function l5(t,e){if($v(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return Gk(t,e)}function Gk(t,e){if($v(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Jk(t,e,n){const r=l5(t,n),s=self.URL||self.webkitURL,i=typeof r!="string"&&s.createObjectURL(r);try{return await c5(i||r,e)}finally{i&&s.revokeObjectURL(i)}}async function c5(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,s)=>{try{n.onload=()=>r(n),n.onerror=i=>{const a=i instanceof Error?i.message:"error";s(new Error(a))}}catch(i){s(i)}})}const u5={};let $2=!0;async function f5(t,e,n){let r;$v(n)?r=await Jk(t,e,n):r=Gk(t,n);const s=e&&e.imagebitmap;return await h5(r,s)}async function h5(t,e=null){if((d5(e)||!$2)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),$2=!1}return await createImageBitmap(t)}function d5(t){for(const e in t||u5)return!1;return!0}function p5(t){return!b5(t,"ftyp",4)||(t[8]&96)===0?null:g5(t)}function g5(t){switch(m5(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function m5(t,e,n){return String.fromCharCode(...t.slice(e,n))}function y5(t){return[...t].map(e=>e.charCodeAt(0))}function b5(t,e,n=0){const r=y5(e);for(let s=0;s<r.length;++s)if(r[s]!==t[s+n])return!1;return!0}const ui=!1,wf=!0;function eN(t){const e=oh(t);return x5(e)||S5(e)||v5(e)||w5(e)||_5(e)}function _5(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=p5(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function x5(t){const e=oh(t);return e.byteLength>=24&&e.getUint32(0,ui)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ui),height:e.getUint32(20,ui)}:null}function v5(t){const e=oh(t);return e.byteLength>=10&&e.getUint32(0,ui)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,wf),height:e.getUint16(8,wf)}:null}function w5(t){const e=oh(t);return e.byteLength>=14&&e.getUint16(0,ui)===16973&&e.getUint32(2,wf)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,wf),height:e.getUint32(22,wf)}:null}function S5(t){const e=oh(t);if(!(e.byteLength>=3&&e.getUint16(0,ui)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=T5();let i=2;for(;i+9<e.byteLength;){const a=e.getUint16(i,ui);if(s.has(a))return{mimeType:"image/jpeg",height:e.getUint16(i+5,ui),width:e.getUint16(i+7,ui)};if(!r.has(a))return null;i+=2,i+=e.getUint16(i,ui)}return null}function T5(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function oh(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function E5(t,e){var s;const{mimeType:n}=eN(t)||{},r=(s=globalThis.loaders)==null?void 0:s.parseImageNode;return Cp(r),await r(t,n)}async function A5(t,e,n){e=e||{};const s=(e.image||{}).type||"auto",{url:i}=n||{},a=R5(s);let l;switch(a){case"imagebitmap":l=await f5(t,e,i);break;case"image":l=await Jk(t,e,i);break;case"data":l=await E5(t);break;default:Cp(!1)}return s==="data"&&(l=s5(l)),l}function R5(t){switch(t){case"auto":case"data":return n5();default:return t5(t),t}}const C5=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],k5=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],N5={image:{type:"auto",decode:!0}},M5={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:Gz,mimeTypes:k5,extensions:C5,parse:A5,tests:[t=>!!eN(new DataView(t))],options:N5},_n=new sh({id:"deck"});let ax={};function I5(t){ax=t}function Dr(t,e,n,r){_n.level>0&&ax[t]&&ax[t].call(null,e,n,r)}function O5(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const P5={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:O5,parseTextSync:JSON.parse};function D5(){const t="9.1.12",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(_n.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:_n,_registerLoggers:I5},Rz([P5,[M5,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const F5=D5();function Hv(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const kb={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function j5(t){const e={};for(const[n,r]of Object.entries(t))e[n]=B5(r);return e}function B5(t){let e=H2(t);if(e!=="object")return{value:t,...kb[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...kb[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=H2(t.value),{...t,...kb[e],type:e}):{type:"object",value:null};throw new Error("props")}function H2(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const U5=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,L5=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,z5={vertex:U5,fragment:L5},W2=/void\s+main\s*\([^)]*\)\s*\{\n?/,q2=/}\n?[^{}]*$/,Nb=[],lp="__LUMA_INJECT_DECLARATIONS__";function V5(t){const e={vertex:{},fragment:{}};for(const n in t){let r=t[n];const s=$5(n);typeof r=="string"&&(r={order:0,injection:r}),e[s][n]=r}return e}function $5(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Ip(t,e,n,r=!1){const s=e==="vertex";for(const i in n){const a=n[i];a.sort((u,h)=>u.order-h.order),Nb.length=a.length;for(let u=0,h=a.length;u<h;++u)Nb[u]=a[u].injection;const l=`${Nb.join(`
`)}
`;switch(i){case"vs:#decl":s&&(t=t.replace(lp,l));break;case"vs:#main-start":s&&(t=t.replace(W2,u=>u+l));break;case"vs:#main-end":s&&(t=t.replace(q2,u=>l+u));break;case"fs:#decl":s||(t=t.replace(lp,l));break;case"fs:#main-start":s||(t=t.replace(W2,u=>u+l));break;case"fs:#main-end":s||(t=t.replace(q2,u=>l+u));break;default:t=t.replace(i,u=>u+l)}}return t=t.replace(lp,""),r&&(t=t.replace(/\}\s*$/,i=>i+z5[e])),t}function Op(t){t.map(e=>H5(e))}function H5(t){if(t.instance)return;Op(t.dependencies||[]);const{propTypes:e={},deprecations:n=[],inject:r={}}=t,s={normalizedInjections:V5(r),parsedDeprecations:W5(n)};e&&(s.propValidators=j5(e)),t.instance=s;let i={};e&&(i=Object.entries(e).reduce((a,[l,u])=>{const h=u==null?void 0:u.value;return h&&(a[l]=h),a},{})),t.defaultUniforms={...t.defaultUniforms,...i}}function tN(t,e,n){var r;(r=t.deprecations)==null||r.forEach(s=>{var i;(i=s.regex)!=null&&i.test(e)&&(s.deprecated?n.deprecated(s.old,s.new)():n.removed(s.old,s.new)())})}function W5(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function Wv(t){Op(t);const e={},n={};nN({modules:t,level:0,moduleMap:e,moduleDepth:n});const r=Object.keys(n).sort((s,i)=>n[i]-n[s]).map(s=>e[s]);return Op(r),r}function nN(t){const{modules:e,level:n,moduleMap:r,moduleDepth:s}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const i of e)r[i.name]=i,(s[i.name]===void 0||s[i.name]<n)&&(s[i.name]=n);for(const i of e)i.dependencies&&nN({modules:i.dependencies,level:n+1,moduleMap:r,moduleDepth:s})}function q5(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function X5(t,e){var r;if(Number(((r=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:r[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=X2(t,Y5),t;case"fragment":return t=X2(t,K5),t;default:throw new Error(e)}}const rN=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Y5=[...rN,[lx("attribute"),"in $1"],[lx("varying"),"out $1"]],K5=[...rN,[lx("varying"),"in $1"]];function X2(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function lx(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function sN(t,e){let n="";for(const r in t){const s=t[r];if(n+=`void ${s.signature} {
`,s.header&&(n+=`  ${s.header}`),e[r]){const i=e[r];i.sort((a,l)=>a.order-l.order);for(const a of i)n+=`  ${a.injection}
`}s.footer&&(n+=`  ${s.footer}`),n+=`}
`}return n}function iN(t){const e={vertex:{},fragment:{}};for(const n of t){let r,s;typeof n!="string"?(r=n,s=r.hook):(r={},s=n),s=s.trim();const[i,a]=s.split(":"),l=s.replace(/\(.+/,""),u=Object.assign(r,{signature:a});switch(i){case"vs":e.vertex[l]=u;break;case"fs":e.fragment[l]=u;break;default:throw new Error(i)}}return e}function Z5(t,e){return{name:Q5(t,e),language:"glsl",version:G5(t)}}function Q5(t,e="unnamed"){const r=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return r?r[1]:e}function G5(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const oN=`

${lp}
`,J5=`precision highp float;
`;function eV(t){const e=Wv(t.modules||[]);return{source:nV(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:aN(e)}}function tV(t){const{vs:e,fs:n}=t,r=Wv(t.modules||[]);return{vs:Y2(t.platformInfo,{...t,source:e,stage:"vertex",modules:r}),fs:Y2(t.platformInfo,{...t,source:n,stage:"fragment",modules:r}),getUniforms:aN(r)}}function nV(t,e){var A;const{source:n,stage:r,modules:s,hookFunctions:i=[],inject:a={},log:l}=e;Hv(typeof n=="string","shader source must be a string");const u=n;let h="";const d=iN(i),g={},b={},w={};for(const C in a){const M=typeof a[C]=="string"?{injection:a[C],order:0}:a[C],N=/^(v|f)s:(#)?([\w-]+)$/.exec(C);if(N){const k=N[2],F=N[3];k?F==="decl"?b[C]=[M]:w[C]=[M]:g[C]=[M]}else w[C]=[M]}const R=s;for(const C of R){l&&tN(C,u,l);const M=lN(C,"wgsl");h+=M;const N=((A=C.injections)==null?void 0:A[r])||{};for(const k in N){const F=/^(v|f)s:#([\w-]+)$/.exec(k);if(F){const P=F[2]==="decl"?b:w;P[k]=P[k]||[],P[k].push(N[k])}else g[k]=g[k]||[],g[k].push(N[k])}}return h+=oN,h=Ip(h,r,b),h+=sN(d[r],g),h+=u,h=Ip(h,r,w),h}function Y2(t,e){var X;const{id:n,source:r,stage:s,language:i="glsl",modules:a,defines:l={},hookFunctions:u=[],inject:h={},prologue:d=!0,log:g}=e;Hv(typeof r=="string","shader source must be a string");const b=i==="glsl"?Z5(r).version:-1,w=t.shaderLanguageVersion,R=b===100?"#version 100":"#version 300 es",C=r.split(`
`).slice(1).join(`
`),M={};a.forEach(Y=>{Object.assign(M,Y.defines)}),Object.assign(M,l);let N="";switch(i){case"wgsl":break;case"glsl":N=d?`${R}

// ----- PROLOGUE -------------------------
${rV({id:n,source:r,stage:s})}
${`#define SHADER_TYPE_${s.toUpperCase()}`}

${q5(t)}
${s==="fragment"?J5:""}

// ----- APPLICATION DEFINES -------------------------

${sV(M)}

`:`${R}
`;break}const k=iN(u),F={},B={},P={};for(const Y in h){const G=typeof h[Y]=="string"?{injection:h[Y],order:0}:h[Y],K=/^(v|f)s:(#)?([\w-]+)$/.exec(Y);if(K){const Q=K[2],ie=K[3];Q?ie==="decl"?B[Y]=[G]:P[Y]=[G]:F[Y]=[G]}else P[Y]=[G]}for(const Y of a){g&&tN(Y,C,g);const G=lN(Y,s);N+=G;const K=((X=Y.instance)==null?void 0:X.normalizedInjections[s])||{};for(const Q in K){const ie=/^(v|f)s:#([\w-]+)$/.exec(Q);if(ie){const oe=ie[2]==="decl"?B:P;oe[Q]=oe[Q]||[],oe[Q].push(K[Q])}else F[Q]=F[Q]||[],F[Q].push(K[Q])}}return N+="// ----- MAIN SHADER SOURCE -------------------------",N+=oN,N=Ip(N,s,B),N+=sN(k[s],F),N+=C,N=Ip(N,s,P),i==="glsl"&&b!==w&&(N=X5(N,s)),N.trim()}function aN(t){return function(n){var s;const r={};for(const i of t){const a=(s=i.getUniforms)==null?void 0:s.call(i,n,r);Object.assign(r,a)}return r}}function rV(t){const{id:e,source:n,stage:r}=t;return e&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${r}`:""}function sV(t={}){let e="";for(const n in t){const r=t[n];(r||Number.isFinite(r))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}function lN(t,e){let n;switch(e){case"vertex":n=t.vs||"";break;case"fragment":n=t.fs||"";break;case"wgsl":n=t.source||"";break;default:Hv(!1)}if(!t.name)throw new Error("Shader module must have a name");const r=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let s=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(s+=`#define MODULE_${r}
`),s+=`${n}
`,s}const iV=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,oV=/^\s*\#\s*endif\s*$/;function aV(t,e){var a;const n=t.split(`
`),r=[];let s=!0,i=null;for(const l of n){const u=l.match(iV),h=l.match(oV);u?(i=u[1],s=!!((a=e==null?void 0:e.defines)!=null&&a[i])):h?s=!0:s&&r.push(l)}return r.join(`
`)}const ka=class ka{constructor(){z(this,"_hookFunctions",[]);z(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return ka.defaultShaderAssembler=ka.defaultShaderAssembler||new ka,ka.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const n=this._getModuleList(e.modules),r=this._hookFunctions,{source:s,getUniforms:i}=eV({...e,source:e.source,modules:n,hookFunctions:r});return{source:e.platformInfo.shaderLanguage==="wgsl"?aV(s):s,getUniforms:i,modules:n}}assembleGLSLShaderPair(e){const n=this._getModuleList(e.modules),r=this._hookFunctions;return{...tV({...e,vs:e.vs,fs:e.fs,modules:n,hookFunctions:r}),modules:n}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let s=0;for(let i=0,a=this._defaultModules.length;i<a;++i){const l=this._defaultModules[i],u=l.name;n[s++]=l,r[u]=!0}for(let i=0,a=e.length;i<a;++i){const l=e[i],u=l.name;r[u]||(n[s++]=l,r[u]=!0)}return n.length=s,Op(n),n}};z(ka,"defaultShaderAssembler");let Pp=ka;const lV=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,cV=`#version 300 es
${lV}`;function uV(t){const{input:e,inputChannels:n,output:r}={};if(!e)return cV;if(!n)throw new Error("inputChannels");const s=fV(n),i=hV(e,n);return`#version 300 es
in ${s} ${e};
out vec4 ${r};
void main() {
  ${r} = ${i};
}`}function fV(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function hV(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class dV{constructor(){z(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Dg({id:e})),this.stats.get(e)}}const cN=new dV,He=new sh({id:"luma.gl"}),Mb={};function jg(t="id"){Mb[t]=Mb[t]||1;const e=Mb[t]++;return`${t}-${e}`}var x_;let un=(x_=class{constructor(e,n,r){z(this,"id");z(this,"props");z(this,"userData",{});z(this,"_device");z(this,"destroyed",!1);z(this,"allocatedBytes",0);z(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=pV(n,r);const s=this.props.id!=="undefined"?this.props.id:jg(this[Symbol.toStringTag]);this.props.id=s,this.id=s,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},z(x_,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),x_);function pV(t,e){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}const hr=class hr extends un{constructor(n,r){const s={...r};(r.usage||0)&hr.INDEX&&!r.indexType&&(r.data instanceof Uint32Array?s.indexType="uint32":r.data instanceof Uint16Array&&(s.indexType="uint16")),delete s.data;super(n,s,hr.defaultProps);z(this,"usage");z(this,"indexType");z(this,"updateTimestamp");z(this,"debugData",new ArrayBuffer(0));this.usage=s.usage||0,this.indexType=s.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(n){return this.device.createBuffer({...this.props,...n})}readSyncWebGL(n,r){throw new Error("not implemented")}_setDebugData(n,r,s){const i=ArrayBuffer.isView(n)?n.buffer:n,a=Math.min(n?n.byteLength:s,hr.DEBUG_DATA_MAX_LENGTH);i===null?this.debugData=new ArrayBuffer(a):r===0&&s===i.byteLength?this.debugData=i.slice(0,a):this.debugData=i.slice(r,r+a)}};z(hr,"defaultProps",{...un.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),z(hr,"MAP_READ",1),z(hr,"MAP_WRITE",2),z(hr,"COPY_SRC",4),z(hr,"COPY_DST",8),z(hr,"INDEX",16),z(hr,"VERTEX",32),z(hr,"UNIFORM",64),z(hr,"STORAGE",128),z(hr,"INDIRECT",256),z(hr,"QUERY_RESOLVE",512),z(hr,"DEBUG_DATA_MAX_LENGTH",32);let wn=hr;function uN(t){const e=K2[t],n=gV(e),r=t.includes("norm"),s=!r&&!t.startsWith("float"),i=t.startsWith("s");return{dataType:K2[t],byteLength:n,integer:s,signed:i,normalized:r}}function gV(t){return mV[t]}const K2={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},mV={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},xr="texture-compression-bc",cn="texture-compression-astc",ni="texture-compression-etc2",yV="texture-compression-etc1-webgl",jd="texture-compression-pvrtc-webgl",Ib="texture-compression-atc-webgl",Bd="float32-renderable-webgl",Ob="float16-renderable-webgl",bV="rgb9e5ufloat-renderable-webgl",Pb="snorm8-renderable-webgl",tf="norm16-renderable-webgl",Db="snorm16-renderable-webgl",Ud="float32-filterable",Z2="float16-filterable-webgl";function fN(t){const e=_V[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const _V={r8unorm:{},r8snorm:{render:Pb},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:Pb},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:Ob,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:tf},"r16snorm-webgl":{f:Db},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:Pb},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:Ob,filter:Z2},"rg16unorm-webgl":{render:tf},"rg16snorm-webgl":{render:Db},r32uint:{},r32sint:{},r32float:{render:Bd,filter:Ud},rgb9e5ufloat:{channels:"rgb",packed:!0,render:bV},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Bd},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:tf},"rgb16snorm-webgl":{f:tf},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:Ud},rgba16uint:{},rgba16sint:{},rgba16float:{render:Ob,filter:Z2},"rgba16unorm-webgl":{render:tf},"rgba16snorm-webgl":{render:Db},"rgb32float-webgl":{render:Bd,filter:Ud},rgba32uint:{},rgba32sint:{},rgba32float:{render:Bd,filter:Ud},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:xr},"bc1-rgb-unorm-srgb-webgl":{f:xr},"bc1-rgba-unorm":{f:xr},"bc1-rgba-unorm-srgb":{f:xr},"bc2-rgba-unorm":{f:xr},"bc2-rgba-unorm-srgb":{f:xr},"bc3-rgba-unorm":{f:xr},"bc3-rgba-unorm-srgb":{f:xr},"bc4-r-unorm":{f:xr},"bc4-r-snorm":{f:xr},"bc5-rg-unorm":{f:xr},"bc5-rg-snorm":{f:xr},"bc6h-rgb-ufloat":{f:xr},"bc6h-rgb-float":{f:xr},"bc7-rgba-unorm":{f:xr},"bc7-rgba-unorm-srgb":{f:xr},"etc2-rgb8unorm":{f:ni},"etc2-rgb8unorm-srgb":{f:ni},"etc2-rgb8a1unorm":{f:ni},"etc2-rgb8a1unorm-srgb":{f:ni},"etc2-rgba8unorm":{f:ni},"etc2-rgba8unorm-srgb":{f:ni},"eac-r11unorm":{f:ni},"eac-r11snorm":{f:ni},"eac-rg11unorm":{f:ni},"eac-rg11snorm":{f:ni},"astc-4x4-unorm":{f:cn},"astc-4x4-unorm-srgb":{f:cn},"astc-5x4-unorm":{f:cn},"astc-5x4-unorm-srgb":{f:cn},"astc-5x5-unorm":{f:cn},"astc-5x5-unorm-srgb":{f:cn},"astc-6x5-unorm":{f:cn},"astc-6x5-unorm-srgb":{f:cn},"astc-6x6-unorm":{f:cn},"astc-6x6-unorm-srgb":{f:cn},"astc-8x5-unorm":{f:cn},"astc-8x5-unorm-srgb":{f:cn},"astc-8x6-unorm":{f:cn},"astc-8x6-unorm-srgb":{f:cn},"astc-8x8-unorm":{f:cn},"astc-8x8-unorm-srgb":{f:cn},"astc-10x5-unorm":{f:cn},"astc-10x5-unorm-srgb":{f:cn},"astc-10x6-unorm":{f:cn},"astc-10x6-unorm-srgb":{f:cn},"astc-10x8-unorm":{f:cn},"astc-10x8-unorm-srgb":{f:cn},"astc-10x10-unorm":{f:cn},"astc-10x10-unorm-srgb":{f:cn},"astc-12x10-unorm":{f:cn},"astc-12x10-unorm-srgb":{f:cn},"astc-12x12-unorm":{f:cn},"astc-12x12-unorm-srgb":{f:cn},"pvrtc-rgb4unorm-webgl":{f:jd},"pvrtc-rgba4unorm-webgl":{f:jd},"pvrtc-rbg2unorm-webgl":{f:jd},"pvrtc-rgba2unorm-webgl":{f:jd},"etc1-rbg-unorm-webgl":{f:yV},"atc-rgb-unorm-webgl":{f:Ib},"atc-rgba-unorm-webgl":{f:Ib},"atc-rgbai-unorm-webgl":{f:Ib}},xV=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],vV=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function hN(t){return xV.some(e=>t.startsWith(e))}function qv(t){let e=wV(t);if(hN(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const r=SV(t);r&&(e.blockWidth=r.blockWidth,e.blockHeight=r.blockHeight)}const n=vV.exec(t);if(n){const[,r,s,i,a,l]=n,u=`${i}${s}`,h=uN(u),d=h.byteLength*8,g=r.length,b=[d,g>=2?d:0,g>=3?d:0,g>=4?d:0];e={format:t,attachment:e.attachment,dataType:h.dataType,components:g,channels:r,integer:h.integer,signed:h.signed,normalized:h.normalized,bitsPerChannel:b,bytesPerPixel:h.byteLength*r.length,packed:e.packed,srgb:e.srgb},l==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function wV(t){var i;const e=fN(t),n=e.bytesPerPixel||1,r=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((i=e.channels)==null?void 0:i.length)||1,bytesPerPixel:n,bitsPerChannel:r,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function SV(t){const n=/.*-(\d+)x(\d+)-.*/.exec(t);if(n){const[,r,s]=n;return{blockWidth:Number(r),blockHeight:Number(s)}}return null}function TV(t){const e=fN(t),n={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},r=qv(t),s=t.startsWith("depth")||t.startsWith("stencil"),i=r==null?void 0:r.signed,a=r==null?void 0:r.integer,l=r==null?void 0:r.webgl;return n.render&&(n.render=!i),n.filter&&(n.filter=!s&&!i&&!a&&!l),n}class EV{}class AV{constructor(e=[],n){z(this,"features");z(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){var n;return!((n=this.disabledFeatures)!=null&&n[e])&&this.features.has(e)}}const ag=class ag{constructor(e){z(this,"id");z(this,"props");z(this,"userData",{});z(this,"statsManager",cN);z(this,"timestamp",0);z(this,"_reused",!1);z(this,"_lumaData",{});this.props={...ag.defaultProps,...e},this.id=this.props.id||jg(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const n=TV(e),r=a=>(typeof a=="string"?this.features.has(a):a)??!0,s=r(n.create),i={format:e,create:s,render:s&&r(n.render),filter:s&&r(n.filter),blend:s&&r(n.blend),store:s&&r(n.store)};return this._getDeviceSpecificTextureFormatCapabilities(i)}isTextureFormatSupported(e,n){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return hN(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};return(e.usage||0)&wn.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array?n.indexType="uint16":He.warn("indices buffer content must be of integer type")()),n}};z(ag,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>He.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:He.get("debug")||void 0,debugShaders:He.get("debug-shaders")||void 0,debugFramebuffers:!!He.get("debug-framebuffers"),debugWebGL:!!He.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let Ko=ag;const RV=sl()&&typeof document<"u",CV=()=>RV&&document.readyState==="complete",kV="set luma.log.level=1 (or higher) to trace rendering",Q2="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",Mo=class Mo{constructor(){z(this,"stats",cN);z(this,"log",He);z(this,"VERSION","9.1.9");z(this,"spector");z(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw He.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),He.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");He.error("This version of luma.gl has already been initialized")()}He.log(1,`${this.VERSION} - ${kV}`)(),globalThis.luma=this}registerAdapters(e){for(const n of e)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(e=[]){const n=this.getAdapterMap(e);return Array.from(n).map(([,r])=>r).filter(r=>{var s;return(s=r.isSupported)==null?void 0:s.call(r)}).map(r=>r.type)}getBestAvailableAdapter(e=[]){var r,s,i,a;const n=this.getAdapterMap(e);return(s=(r=n.get("webgpu"))==null?void 0:r.isSupported)!=null&&s.call(r)?"webgpu":(a=(i=n.get("webgl"))==null?void 0:i.isSupported)!=null&&a.call(i)?"webgl":null}setDefaultDeviceProps(e){Object.assign(Mo.defaultProps,e)}async createDevice(e={}){var l;e={...Mo.defaultProps,...e},e.waitForPageLoad&&await Mo.pageLoaded;const n=this.getAdapterMap(e.adapters);let r=e.type||"";r==="best-available"&&(r=this.getBestAvailableAdapter(e.adapters)||r);const i=(this.getAdapterMap(e.adapters)||n).get(r),a=await((l=i==null?void 0:i.create)==null?void 0:l.call(i,e));if(a)return a;throw new Error(Q2)}async attachDevice(e){var a;const n=this.getAdapterMap(e.adapters);let r="";e.handle instanceof WebGL2RenderingContext&&(r="webgl"),e.createCanvasContext&&await Mo.pageLoaded,e.handle===null&&(r="unknown");const s=n.get(r),i=await((a=s==null?void 0:s.attach)==null?void 0:a.call(s,null));if(i)return i;throw new Error(Q2)}enforceWebGL2(e=!0,n=[]){var i;const s=this.getAdapterMap(n).get("webgl");s||He.warn("enforceWebGL2: webgl adapter not found")(),(i=s==null?void 0:s.enforceWebGL2)==null||i.call(s,e)}getAdapterMap(e=[]){const n=new Map(this.preregisteredAdapters);for(const r of e)n.set(r.type,r);return n}registerDevices(e){He.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const n of e){const r=n.adapter;r&&this.preregisteredAdapters.set(r.type,r)}}};z(Mo,"defaultProps",{...Ko.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),z(Mo,"pageLoaded",NV().then(()=>{He.probe(2,"DOM is loaded")()}));let cx=Mo;const ux=new cx;function NV(){return CV()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class MV{}const lg=class lg{constructor(e){z(this,"id");z(this,"props");z(this,"canvas");z(this,"htmlCanvas");z(this,"offscreenCanvas");z(this,"type");z(this,"width",1);z(this,"height",1);z(this,"resizeObserver");z(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...lg.defaultProps,...e},e=this.props,!sl()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=OV(e.canvas):this.canvas=e.canvas;else{const n=PV(e),r=IV((e==null?void 0:e.container)||null);r.insertBefore(n,r.firstChild),this.canvas=n,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const r of n)r.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*e,n.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,n]=this.getPixelSize();return e/n}cssToDeviceRatio(){var e;try{const[n]=this.getDrawingBufferSize(),r=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return r?n/r:1}catch{return 1}}cssToDevicePixels(e,n=!0){const r=this.cssToDeviceRatio(),[s,i]=this.getDrawingBufferSize();return DV(e,r,s,i,n)}setDevicePixelRatio(e,n={}){if(!this.htmlCanvas)return;let r="width"in n?n.width:this.htmlCanvas.clientWidth,s="height"in n?n.height:this.htmlCanvas.clientHeight;(!r||!s)&&(He.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=this.htmlCanvas.width||1,s=this.htmlCanvas.height||1);const i=this._canvasSizeInfo;if(i.clientWidth!==r||i.clientHeight!==s||i.devicePixelRatio!==e){let a=e;const l=Math.floor(r*a),u=Math.floor(s*a);if(this.htmlCanvas.width=l,this.htmlCanvas.height=u,this.device.gl){const[d,g]=this.getDrawingBufferSize();(d!==l||g!==u)&&(a=Math.min(d/r,g/s),this.htmlCanvas.width=Math.floor(r*a),this.htmlCanvas.height=Math.floor(s*a),He.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=r,this._canvasSizeInfo.clientHeight=s,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};z(lg,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let fx=lg;function IV(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function OV(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function PV(t){const{width:e,height:n}=t,r=document.createElement("canvas");return r.id=jg("lumagl-auto-created-canvas"),r.width=e||1,r.height=n||1,r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}function DV(t,e,n,r,s){const i=t,a=G2(i[0],e,n);let l=J2(i[1],e,r,s),u=G2(i[0]+1,e,n);const h=u===n-1?u:u-1;u=J2(i[1]+1,e,r,s);let d;return s?(u=u===0?u:u+1,d=l,l=u):d=u===r-1?u:u-1,{x:a,y:l,width:Math.max(h-a+1,1),height:Math.max(d-l+1,1)}}function G2(t,e,n){return Math.min(Math.round(t*e),n-1)}function J2(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const dr=class dr extends un{constructor(n,r){r=dr.normalizeProps(n,r);super(n,r,dr.defaultProps);z(this,"dimension");z(this,"format");z(this,"width");z(this,"height");z(this,"depth");z(this,"mipLevels");z(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const s=dr.getTextureDataSize(this.props.data);this.width=(s==null?void 0:s.width)||1,this.height=(s==null?void 0:s.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?dr.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(n){return this.device.createTexture({...this.props,...n})}static isExternalImage(n){return typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement||typeof VideoFrame<"u"&&n instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}static getExternalImageSize(n){if(typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height};if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return{width:n.naturalWidth,height:n.naturalHeight};if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return{width:n.videoWidth,height:n.videoHeight};if(typeof VideoFrame<"u"&&n instanceof VideoFrame)return{width:n.displayWidth,height:n.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(n){const r=n==null?void 0:n.data;return ArrayBuffer.isView(r)}static getTextureDataSize(n){if(!n||ArrayBuffer.isView(n))return null;if(Array.isArray(n))return dr.getTextureDataSize(n[0]);if(dr.isExternalImage(n))return dr.getExternalImageSize(n);if(n&&typeof n=="object"&&n.constructor===Object){const s=Object.values(n)[0];return{width:s.width,height:s.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(n,r){let s;return ArrayBuffer.isView(n)?s=[{data:n,width:r.width,height:r.height}]:Array.isArray(n)?s=n:s=[n],s}static getMipLevelCount(n,r){return Math.floor(Math.log2(Math.max(n,r)))+1}static getCubeFaceDepth(n){switch(n){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(n)}}static normalizeProps(n,r){var u,h;const s={...r},i=((h=(u=n==null?void 0:n.props)==null?void 0:u._resourceDefaults)==null?void 0:h.texture)||{};Object.assign(s,i);const{width:a,height:l}=s;return typeof a=="number"&&(s.width=Math.max(1,Math.ceil(a))),typeof l=="number"&&(s.height=Math.max(1,Math.ceil(l))),s}};z(dr,"COPY_SRC",1),z(dr,"COPY_DST",2),z(dr,"TEXTURE",4),z(dr,"STORAGE",8),z(dr,"RENDER_ATTACHMENT",16),z(dr,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),z(dr,"defaultProps",{...un.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),z(dr,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Nn=dr;const cg=class cg extends un{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,cg.defaultProps)}};z(cg,"defaultProps",{...un.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let Dp=cg;function FV(t,e,n){let r="";const s=e.split(/\r?\n/),i=t.slice().sort((a,l)=>a.lineNum-l.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let a=0;for(let l=1;l<=s.length;l++)for(r+=dN(s[l-1],l,n);i.length>a&&i[a].lineNum===l;){const u=i[a++];r+=eE(u,s,u.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const l of t)r+=eE(l,s,l.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return r}}function eE(t,e,n,r){if(r!=null&&r.inlineSource){const i=jV(e,n),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${i}${a}${t.type.toUpperCase()}: ${t.message}

`}const s=t.type==="error"?"red":"#8B4000";return r!=null&&r.html?`<div class='luma-compiler-log-error' style="color:${s};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function jV(t,e,n){let r="";for(let s=e-2;s<=e;s++){const i=t[s-1];i!==void 0&&(r+=dN(i,e,n))}return r}function dN(t,e,n){const r=n!=null&&n.html?UV(t):t;return`${BV(String(e),4)}: ${r}${n!=null&&n.html?"<br/>":`
`}`}function BV(t,e){let n="";for(let r=t.length;r<e;++r)n+=" ";return n+t}function UV(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const ug=class ug extends un{constructor(n,r){r={...r,debugShaders:r.debugShaders||n.props.debugShaders||"errors"};super(n,{id:LV(r),...r},ug.defaultProps);z(this,"stage");z(this,"source");z(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const n=this.props.debugShaders;switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const r=await this.getCompilationInfo();n==="warnings"&&(r==null?void 0:r.length)===0||this._displayShaderLog(r)}_displayShaderLog(n){var h;if(typeof document>"u"||!(document!=null&&document.createElement))return;const r=pN(this.source),s=`${this.stage} ${r}`;let i=FV(n,this.source,{showSourceCode:"all",html:!0});const a=this.getTranslatedSource();a&&(i+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${a}</pre></code>`);const l=document.createElement("Button");l.innerHTML=`
<h1>Shader Compilation Error in ${s}</h1><br /><br />
<code style="user-select:text;"><pre>
${i}
</pre></code>`,l.style.top="10px",l.style.left="10px",l.style.position="absolute",l.style.zIndex="9999",l.style.width="100%",l.style.textAlign="left",document.body.appendChild(l),(h=document.getElementsByClassName("luma-compiler-log-error")[0])==null||h.scrollIntoView(),l.onclick=()=>{const d=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(d)}}};z(ug,"defaultProps",{...un.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let Fp=ug;function LV(t){return pN(t.source)||t.id||jg(`unnamed ${t.stage}-shader`)}function pN(t,e="unnamed"){const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return r?r[1]:e}const Mf=class Mf extends un{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){n=Mf.normalizeProps(e,n),super(e,n,Mf.defaultProps)}static normalizeProps(e,n){var i,a;const r=((a=(i=e==null?void 0:e.props)==null?void 0:i._resourceDefaults)==null?void 0:a.sampler)||{};return{...n,...r}}};z(Mf,"defaultProps",{...un.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let jp=Mf;const fg=class fg extends un{constructor(n,r={}){super(n,r,fg.defaultProps);z(this,"width");z(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(n){const r=this.colorAttachments.map(i=>i.texture.clone(n)),s=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(n);return this.device.createFramebuffer({...this.props,colorAttachments:r,depthStencilAttachment:s})}resize(n){let r=!n;if(n){const[s,i]=Array.isArray(n)?n:[n.width,n.height];r=r||i!==this.height||s!==this.width,this.width=s,this.height=i}r&&(He.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((r,s)=>{if(typeof r=="string"){const i=this.createColorTexture(r,s);return this.attachResource(i),i.view}return r instanceof Nn?r.view:r});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const r=this.createDepthStencilTexture(n);this.attachResource(r),this.depthStencilAttachment=r.view}else n instanceof Nn?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n,r){return this.device.createTexture({id:`${this.id}-color-attachment-${r}`,usage:Nn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(n){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Nn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(n,r){for(let s=0;s<this.colorAttachments.length;++s)if(this.colorAttachments[s]){const i=this.colorAttachments[s].texture.clone({width:n,height:r});this.destroyAttachedResource(this.colorAttachments[s]),this.colorAttachments[s]=i.view,this.attachResource(i.view)}if(this.depthStencilAttachment){const s=this.depthStencilAttachment.texture.clone({width:n,height:r});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=s.view,this.attachResource(s)}this.updateAttachments()}};z(fg,"defaultProps",{...un.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Bp=fg;const hg=class hg extends un{constructor(n,r){super(n,r,hg.defaultProps);z(this,"shaderLayout");z(this,"bufferLayout");z(this,"linkStatus","pending");z(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(n){throw new Error("Use uniform blocks")}};z(hg,"defaultProps",{...un.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let Oc=hg;const Bs=class Bs extends un{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){n=Bs.normalizeProps(e,n),super(e,n,Bs.defaultProps)}static normalizeProps(e,n){var i;return{...(i=e.props._resourceDefaults)==null?void 0:i.renderPass,...n}}};z(Bs,"defaultClearColor",[0,0,0,1]),z(Bs,"defaultClearDepth",1),z(Bs,"defaultClearStencil",0),z(Bs,"defaultProps",{...un.defaultProps,framebuffer:null,parameters:void 0,clearColor:Bs.defaultClearColor,clearColors:void 0,clearDepth:Bs.defaultClearDepth,clearStencil:Bs.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let hx=Bs;const dg=class dg extends un{constructor(n,r){super(n,r,dg.defaultProps);z(this,"hash","");z(this,"shaderLayout");this.shaderLayout=r.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};z(dg,"defaultProps",{...un.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let Up=dg;const pg=class pg extends un{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,pg.defaultProps)}};z(pg,"defaultProps",{...un.defaultProps,measureExecutionTime:void 0});let dx=pg;const gg=class gg extends un{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,gg.defaultProps)}};z(gg,"defaultProps",{...un.defaultProps});let px=gg;function zV(t){const[e,n]=$V[t],r=e==="i32"||e==="u32",s=e!=="u32",i=HV[e]*n,a=VV(e,n);return{dataType:e,components:n,defaultVertexFormat:a,byteLength:i,integer:r,signed:s}}function VV(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?n:`${n}x${e}`}const $V={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},HV={f32:4,f16:2,i32:4,u32:4};function gN(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,r]=t.split("x"),s=n,i=r?parseInt(r):1,a=uN(s),l={type:s,components:i,byteLength:a.byteLength*i,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(l.webglOnly=!0),l}function mN(t,e){const n={};for(const r of t.attributes){const s=qV(t,e,r.name);s&&(n[r.name]=s)}return n}function WV(t,e,n=16){const r=mN(t,e),s=new Array(n).fill(null);for(const i of Object.values(r))s[i.location]=i;return s}function qV(t,e,n){const r=XV(t,n),s=YV(e,n);if(!r)return null;const i=zV(r.type),a=(s==null?void 0:s.vertexFormat)||i.defaultVertexFormat,l=gN(a);return{attributeName:(s==null?void 0:s.attributeName)||r.name,bufferName:(s==null?void 0:s.bufferName)||r.name,location:r.location,shaderType:r.type,shaderDataType:i.dataType,shaderComponents:i.components,vertexFormat:a,bufferDataType:l.type,bufferComponents:l.components,normalized:l.normalized,integer:i.integer,stepMode:(s==null?void 0:s.stepMode)||r.stepMode||"vertex",byteOffset:(s==null?void 0:s.byteOffset)||0,byteStride:(s==null?void 0:s.byteStride)||0}}function XV(t,e){const n=t.attributes.find(r=>r.name===e);return n||He.warn(`shader layout attribute "${e}" not present in shader`),n||null}function YV(t,e){KV(t);let n=ZV(t,e);return n||(n=QV(t,e),n)?n:(He.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function KV(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&He.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function ZV(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function QV(t,e){var n;for(const r of t){let s=r.byteStride;if(typeof r.byteStride!="number")for(const a of r.attributes||[]){const l=gN(a.format);s+=l.byteLength}const i=(n=r.attributes)==null?void 0:n.find(a=>a.attribute===e);if(i)return{attributeName:i.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:i.format,byteOffset:i.byteOffset,byteStride:s}}return null}const mg=class mg extends un{constructor(n,r){super(n,r,mg.defaultProps);z(this,"maxVertexAttributes");z(this,"attributeInfos");z(this,"indexBuffer",null);z(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:s,bufferLayout:i}=r.renderPipeline||{};if(!s||!i)throw new Error("VertexArray");this.attributeInfos=WV(s,i,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,r){this.device.reportError(new Error("constant attributes not supported"))}};z(mg,"defaultProps",{...un.defaultProps,renderPipeline:null});let gx=mg;const yg=class yg extends un{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,yg.defaultProps)}};z(yg,"defaultProps",{...un.defaultProps,layout:void 0,buffers:{}});let mx=yg;const bg=class bg extends un{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,bg.defaultProps)}};z(bg,"defaultProps",{...un.defaultProps,type:void 0,count:void 0});let yx=bg;const GV={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function JV(t){return GV[t]}function e$(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Ld;function yN(t){return(!Ld||Ld.byteLength<t)&&(Ld=new ArrayBuffer(t)),Ld}function t$(t,e){const n=yN(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function n$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lp(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":n$(t)}const tE=1024;class r${constructor(e){z(this,"layout",{});z(this,"byteLength");let n=0;for(const[s,i]of Object.entries(e)){const a=JV(i),{type:l,components:u}=a;n=e$(n,u);const h=n;n+=u,this.layout[s]={type:l,size:u,offset:h}}n+=(4-n%4)%4;const r=n*4;this.byteLength=Math.max(r,tE)}getData(e){const n=Math.max(this.byteLength,tE),r=yN(n),s={i32:new Int32Array(r),u32:new Uint32Array(r),f32:new Float32Array(r),f16:new Uint16Array(r)};for(const[i,a]of Object.entries(e)){const l=this.layout[i];if(!l){He.warn(`Supplied uniform value ${i} not present in uniform block layout`)();continue}const{type:u,size:h,offset:d}=l,g=s[u];if(h===1){if(typeof a!="number"&&typeof a!="boolean"){He.warn(`Supplied value for single component uniform ${i} is not a number: ${a}`)();continue}g[d]=Number(a)}else{if(!Lp(a)){He.warn(`Supplied value for multi component / array uniform ${i} is not a numeric array: ${a}`)();continue}g.set(a,d)}}return new Uint8Array(r)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function s$(t,e,n=16){if(t!==e)return!1;const r=t,s=e;if(!Lp(r))return!1;if(Lp(s)&&r.length===s.length){for(let i=0;i<r.length;++i)if(s[i]!==r[i])return!1}return!0}function i$(t){return Lp(t)?t.slice():t}class o${constructor(e){z(this,"name");z(this,"uniforms",{});z(this,"modifiedUniforms",{});z(this,"modified",!0);z(this,"bindingLayout",{});z(this,"needsRedraw","initialized");var n;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const r=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(i=>i.type==="uniform"&&i.name===(e==null?void 0:e.name));if(!r)throw new Error(e==null?void 0:e.name);const s=r;for(const i of s.uniforms||[])this.bindingLayout[i.name]=i}}setUniforms(e){for(const[n,r]of Object.entries(e))this._setUniform(n,r),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${r}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){s$(this.uniforms[e],n)||(this.uniforms[e]=i$(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class a${constructor(e){z(this,"uniformBlocks",new Map);z(this,"uniformBufferLayouts",new Map);z(this,"uniformBuffers",new Map);for(const[n,r]of Object.entries(e)){const s=n,i=new r$(r.uniformTypes||{});this.uniformBufferLayouts.set(s,i);const a=new o$({name:n});a.setUniforms(r.defaultUniforms||{}),this.uniformBlocks.set(s,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var n;for(const[r,s]of Object.entries(e))(n=this.uniformBlocks.get(r))==null||n.setUniforms(s);this.updateUniformBuffers()}getUniformBufferByteLength(e){var n;return((n=this.uniformBufferLayouts.get(e))==null?void 0:n.byteLength)||0}getUniformBufferData(e){var r,s;const n=((r=this.uniformBlocks.get(e))==null?void 0:r.getAllUniforms())||{};return(s=this.uniformBufferLayouts.get(e))==null?void 0:s.getData(n)}createUniformBuffer(e,n,r){r&&this.setUniforms(r);const s=this.getUniformBufferByteLength(n),i=e.createBuffer({usage:wn.UNIFORM|wn.COPY_DST,byteLength:s}),a=this.getUniformBufferData(n);return i.write(a),i}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const r=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:wn.UNIFORM|wn.COPY_DST,byteLength:r});this.uniformBuffers.set(n,s)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const r=this.updateUniformBuffer(n);e||(e=r)}return e&&He.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var i;const n=this.uniformBlocks.get(e);let r=this.uniformBuffers.get(e),s=!1;if(r&&(n!=null&&n.needsRedraw)){s||(s=n.needsRedraw);const a=this.getUniformBufferData(e);r=this.uniformBuffers.get(e),r==null||r.write(a);const l=(i=this.uniformBlocks.get(e))==null?void 0:i.getAllUniforms();He.log(4,`Writing to uniform buffer ${String(e)}`,a,l)()}return s}}function bN(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function _N(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function l$(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const r=e;let s=bN(t);if(s==="uint8"&&n&&r===1)return"unorm8-webgl";if(s==="uint8"&&n&&r===3)return"unorm8x3-webgl";if(s==="uint8"||s==="sint8"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(s=s.replace("int","norm")),`${s}x${r}`}if(s==="uint16"||s==="sint16"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(s=s.replace("int","norm")),`${s}x${r}`}return r===1?s:`${s}x${r}`}class Fb{constructor(e){z(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(n=>n.name===e)||null}getAttributeNamesForBuffer(e){var n;return e.attributes?(n=e.attributes)==null?void 0:n.map(r=>r.attribute):[e.name]}mergeBufferLayouts(e,n){const r=[...e];for(const s of n){const i=r.findIndex(a=>a.name===s.name);i<0?r.push(s):r[i]=s}return r}getBufferIndex(e){const n=this.bufferLayouts.findIndex(r=>r.name===e);return n===-1&&He.warn(`BufferLayout: Missing buffer for "${e}".`)(),n}}function c$(t,e){const n=Object.fromEntries(t.attributes.map(s=>[s.name,s.location])),r=e.slice();return r.sort((s,i)=>{const a=s.attributes?s.attributes.map(d=>d.attribute):[s.name],l=i.attributes?i.attributes.map(d=>d.attribute):[i.name],u=Math.min(...a.map(d=>n[d])),h=Math.min(...l.map(d=>n[d]));return u-h}),r}class ws{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class nE{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Wo extends ws{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Zo extends ws{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class bx extends ws{constructor(e,n,r){super(e,r),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class Qa extends ws{constructor(e,n,r,s){super(e,r),this.format=n,this.access=s}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}var ko;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(ko||(ko={}));class zd{constructor(e,n,r,s,i,a,l){this.name=e,this.type=n,this.group=r,this.binding=s,this.attributes=i,this.resourceType=a,this.access=l}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class u${constructor(e,n){this.name=e,this.type=n}}class f${constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s,this.interpolation=null}}class rE{constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s}}class h${constructor(e,n,r,s){this.name=e,this.type=n,this.attributes=r,this.id=s}}class d${constructor(e,n,r){this.name=e,this.type=n,this.attributes=r}}class p${constructor(e,n=null,r){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n,this.attributes=r}}class g${constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}const xN=new Float32Array(1),m$=new Int32Array(xN.buffer),vr=new Uint16Array(1);function y$(t){xN[0]=t;const e=m$[0],n=e>>31&1;let r=e>>23&255,s=8388607&e;if(r===255)return vr[0]=n<<15|31744|(s!==0?512:0),vr[0];if(r===0){if(s===0)return vr[0]=n<<15,vr[0];s|=8388608;let i=113;for(;!(8388608&s);)s<<=1,i--;return r=127-i,s&=8388607,r>0?(s=(s>>126-r)+(s>>127-r&1),vr[0]=n<<15|r<<10|s>>13,vr[0]):(vr[0]=n<<15,vr[0])}return r=r-127+15,r>=31?(vr[0]=n<<15|31744,vr[0]):r<=0?r<-10?(vr[0]=n<<15,vr[0]):(s=(8388608|s)>>1-r,vr[0]=n<<15|s>>13,vr[0]):(s>>=13,vr[0]=n<<15|r<<10|s,vr[0])}const Xv=new Uint32Array(1),vN=new Float32Array(Xv.buffer,0,1);function sE(t){const e=112+(t>>6&31)<<23|(63&t)<<17;return Xv[0]=e,vN[0]}function b$(t,e,n,r,s,i,a,l,u){const h=r*(a>>=s)*(i>>=s)+n*a+e*l;switch(u){case"r8unorm":return[Wt(t,h,"8unorm",1)[0]];case"r8snorm":return[Wt(t,h,"8snorm",1)[0]];case"r8uint":return[Wt(t,h,"8uint",1)[0]];case"r8sint":return[Wt(t,h,"8sint",1)[0]];case"rg8unorm":{const d=Wt(t,h,"8unorm",2);return[d[0],d[1]]}case"rg8snorm":{const d=Wt(t,h,"8snorm",2);return[d[0],d[1]]}case"rg8uint":{const d=Wt(t,h,"8uint",2);return[d[0],d[1]]}case"rg8sint":{const d=Wt(t,h,"8sint",2);return[d[0],d[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const d=Wt(t,h,"8unorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8snorm":{const d=Wt(t,h,"8snorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8uint":{const d=Wt(t,h,"8uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba8sint":{const d=Wt(t,h,"8sint",4);return[d[0],d[1],d[2],d[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const d=Wt(t,h,"8unorm",4);return[d[2],d[1],d[0],d[3]]}case"r16uint":return[Wt(t,h,"16uint",1)[0]];case"r16sint":return[Wt(t,h,"16sint",1)[0]];case"r16float":return[Wt(t,h,"16float",1)[0]];case"rg16uint":{const d=Wt(t,h,"16uint",2);return[d[0],d[1]]}case"rg16sint":{const d=Wt(t,h,"16sint",2);return[d[0],d[1]]}case"rg16float":{const d=Wt(t,h,"16float",2);return[d[0],d[1]]}case"rgba16uint":{const d=Wt(t,h,"16uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16sint":{const d=Wt(t,h,"16sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16float":{const d=Wt(t,h,"16float",4);return[d[0],d[1],d[2],d[3]]}case"r32uint":return[Wt(t,h,"32uint",1)[0]];case"r32sint":return[Wt(t,h,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[Wt(t,h,"32float",1)[0]];case"rg32uint":{const d=Wt(t,h,"32uint",2);return[d[0],d[1]]}case"rg32sint":{const d=Wt(t,h,"32sint",2);return[d[0],d[1]]}case"rg32float":{const d=Wt(t,h,"32float",2);return[d[0],d[1]]}case"rgba32uint":{const d=Wt(t,h,"32uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32sint":{const d=Wt(t,h,"32sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32float":{const d=Wt(t,h,"32float",4);return[d[0],d[1],d[2],d[3]]}case"rg11b10ufloat":{const d=new Uint32Array(t.buffer,h,1)[0],g=(4192256&d)>>11,b=(4290772992&d)>>22;return[sE(2047&d),sE(g),function(w){const R=112+(w>>5&31)<<23|(31&w)<<18;return Xv[0]=R,vN[0]}(b),1]}}return null}function Wt(t,e,n,r){const s=[0,0,0,0];for(let h=0;h<r;++h)switch(n){case"8unorm":s[h]=t[e]/255,e++;break;case"8snorm":s[h]=t[e]/255*2-1,e++;break;case"8uint":s[h]=t[e],e++;break;case"8sint":s[h]=t[e]-127,e++;break;case"16uint":s[h]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":s[h]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":s[h]=(i=t[e]|t[e+1]<<8,a=void 0,l=void 0,u=void 0,a=(32768&i)>>15,u=1023&i,(l=(31744&i)>>10)==0?(a?-1:1)*Math.pow(2,-14)*(u/Math.pow(2,10)):l==31?u?NaN:1/0*(a?-1:1):(a?-1:1)*Math.pow(2,l-15)*(1+u/Math.pow(2,10))),e+=2;break;case"32uint":case"32sint":s[h]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":s[h]=new Float32Array(t.buffer,e,1)[0],e+=4}var i,a,l,u;return s}function Yt(t,e,n,r,s){for(let i=0;i<r;++i)switch(n){case"8unorm":t[e]=255*s[i],e++;break;case"8snorm":t[e]=.5*(s[i]+1)*255,e++;break;case"8uint":t[e]=s[i],e++;break;case"8sint":t[e]=s[i]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=s[i],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=s[i],e+=2;break;case"16float":{const a=y$(s[i]);new Uint16Array(t.buffer,e,1)[0]=a,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=s[i],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=s[i],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=s[i],e+=4}return s}const jb={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Cs{constructor(){this.id=Cs._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,n){if(e){n(zp.instance);for(const r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(Vp.instance)}}constEvaluate(e,n){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Cs._id=0;class zp extends Cs{}zp.instance=new zp;class Vp extends Cs{}Vp.instance=new Vp;const wN=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class Sn extends Cs{constructor(){super()}}class Vf extends Sn{constructor(e,n,r,s,i,a){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=s,this.startLine=i,this.endLine=a}get astNodeType(){return"function"}search(e){if(this.attributes)for(const n of this.attributes)e(n);e(this);for(const n of this.args)e(n);this.searchBlock(this.body,e)}}class _$ extends Sn{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class SN extends Sn{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class _x extends Sn{constructor(e,n){super(),this.body=e,this.loopId=n}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class TN extends Sn{constructor(e,n,r,s){super(),this.init=e,this.condition=n,this.increment=r,this.body=s}get astNodeType(){return"for"}search(e){var n,r,s;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(s=this.increment)===null||s===void 0||s.search(e),this.searchBlock(this.body,e)}}class Vi extends Sn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class Yv extends Sn{constructor(e,n,r){super(),this.attributes=null,this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Sf extends Sn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class cp extends Sn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"const"}constEvaluate(e,n){return this.value.constEvaluate(e,n)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var oc,gf,be,he;(t=>{t.increment="++",t.decrement="--"})(oc||(oc={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}})(oc||(oc={}));class EN extends Sn{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(gf||(gf={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(gf||(gf={}));class AN extends Sn{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class Kv extends Sn{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}isBuiltin(){return wN.has(this.name)}search(e){for(const n of this.args)n.search(e);e(this)}}class RN extends Sn{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class CN extends Sn{constructor(e,n){super(),this.condition=e,this.cases=n}get astNodeType(){return"switch"}search(e){e(this);for(const n of this.cases)n.search(e)}}class kN extends Sn{constructor(e,n,r,s){super(),this.condition=e,this.body=n,this.elseif=r,this.else=s}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class NN extends Sn{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class x$ extends Sn{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class v$ extends Sn{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class MN extends Sn{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class Zv extends Sn{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class w$ extends Sn{constructor(){super()}get astNodeType(){return"discard"}}class IN extends Sn{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class ON extends Sn{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}let je=class up extends Sn{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const s=up._priority.get(n.name);up._priority.get(e[r].name)<s&&(n=e[r])}return n.name==="x32"?up.i32:n}getTypeName(){return this.name}};je.x32=new je("x32"),je.f32=new je("f32"),je.i32=new je("i32"),je.u32=new je("u32"),je.f16=new je("f16"),je.bool=new je("bool"),je.void=new je("void"),je._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class iE extends je{constructor(e){super(e)}}class ji extends je{constructor(e,n,r,s){super(e),this.members=n,this.startLine=r,this.endLine=s}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}search(e){for(const n of this.members)e(n)}}class me extends je{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}me.vec2f=new me("vec2",je.f32,null),me.vec3f=new me("vec3",je.f32,null),me.vec4f=new me("vec4",je.f32,null),me.vec2i=new me("vec2",je.i32,null),me.vec3i=new me("vec3",je.i32,null),me.vec4i=new me("vec4",je.i32,null),me.vec2u=new me("vec2",je.u32,null),me.vec3u=new me("vec3",je.u32,null),me.vec4u=new me("vec4",je.u32,null),me.vec2h=new me("vec2",je.f16,null),me.vec3h=new me("vec3",je.f16,null),me.vec4h=new me("vec4",je.f16,null),me.vec2b=new me("vec2",je.bool,null),me.vec3b=new me("vec3",je.bool,null),me.vec4b=new me("vec4",je.bool,null),me.mat2x2f=new me("mat2x2",je.f32,null),me.mat2x3f=new me("mat2x3",je.f32,null),me.mat2x4f=new me("mat2x4",je.f32,null),me.mat3x2f=new me("mat3x2",je.f32,null),me.mat3x3f=new me("mat3x3",je.f32,null),me.mat3x4f=new me("mat3x4",je.f32,null),me.mat4x2f=new me("mat4x2",je.f32,null),me.mat4x3f=new me("mat4x3",je.f32,null),me.mat4x4f=new me("mat4x4",je.f32,null),me.mat2x2h=new me("mat2x2",je.f16,null),me.mat2x3h=new me("mat2x3",je.f16,null),me.mat2x4h=new me("mat2x4",je.f16,null),me.mat3x2h=new me("mat3x2",je.f16,null),me.mat3x3h=new me("mat3x3",je.f16,null),me.mat3x4h=new me("mat3x4",je.f16,null),me.mat4x2h=new me("mat4x2",je.f16,null),me.mat4x3h=new me("mat4x3",je.f16,null),me.mat4x4h=new me("mat4x4",je.f16,null),me.mat2x2i=new me("mat2x2",je.i32,null),me.mat2x3i=new me("mat2x3",je.i32,null),me.mat2x4i=new me("mat2x4",je.i32,null),me.mat3x2i=new me("mat3x2",je.i32,null),me.mat3x3i=new me("mat3x3",je.i32,null),me.mat3x4i=new me("mat3x4",je.i32,null),me.mat4x2i=new me("mat4x2",je.i32,null),me.mat4x3i=new me("mat4x3",je.i32,null),me.mat4x4i=new me("mat4x4",je.i32,null),me.mat2x2u=new me("mat2x2",je.u32,null),me.mat2x3u=new me("mat2x3",je.u32,null),me.mat2x4u=new me("mat2x4",je.u32,null),me.mat3x2u=new me("mat3x2",je.u32,null),me.mat3x3u=new me("mat3x3",je.u32,null),me.mat3x4u=new me("mat3x4",je.u32,null),me.mat4x2u=new me("mat4x2",je.u32,null),me.mat4x3u=new me("mat4x3",je.u32,null),me.mat4x4u=new me("mat4x4",je.u32,null);class fp extends je{constructor(e,n,r,s){super(e),this.storage=n,this.type=r,this.access=s}get astNodeType(){return"pointer"}}class Tf extends je{constructor(e,n,r,s){super(e),this.attributes=n,this.format=r,this.count=s}get astNodeType(){return"array"}get isArray(){return!0}}class mf extends je{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class Ys extends Cs{constructor(){super(),this.postfix=null}}class Ga extends Ys{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class ii extends Ys{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const n of this.args)n.search(e)}constEvaluate(e,n){return n&&(n[0]=this.type),e.evalExpression(this,e.context)}}class Qv extends Ys{constructor(e,n){super(),this.cachedReturnValue=null,this.name=e,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return wN.has(this.name)}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){for(const n of this.args)n.search(e);e(this)}}class ls extends Ys{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,n){return e.evalExpression(this,e.context)}}class PN extends Ys{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(e,n){if(this.initializer){const r=e.evalExpression(this.initializer,e.context);return r!==null&&this.postfix?r.getSubData(e,this.postfix,e.context):r}return null}search(e){this.initializer.search(e)}}class Jn extends Ys{constructor(e,n){super(),this.value=e,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(e,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof fe}get isVector(){return this.value instanceof Z||this.value instanceof mt}get scalarValue(){return this.value instanceof fe?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof Z||this.value instanceof mt?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class DN extends Ys{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class Pc extends Ys{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class FN extends Ys{constructor(){super()}}class Hn extends FN{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Fs extends FN{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}_getPromotedType(e,n){return e.name===n.name?e:e.name==="f32"||n.name==="f32"?je.f32:e.name==="u32"||n.name==="u32"?je.u32:je.i32}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class jN extends Cs{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class hp extends Ys{constructor(){super()}get astNodeType(){return"default"}}class BN extends jN{constructor(e,n){super(n),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class UN extends jN{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class oE extends Cs{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class S$ extends Cs{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class aE extends Cs{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}class LN extends Cs{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}class Rs{constructor(e,n){this.parent=null,this.typeInfo=e,this.parent=n,this.id=Rs._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,n,r,s){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,n,r){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Rs._id=0;class xx extends Rs{constructor(){super(new ws("void",null),null)}toString(){return"void"}}xx.void=new xx;class Ql extends Rs{constructor(e){super(new bx("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,n,r,s){this.reference.setDataValue(e,n,r,s)}getSubData(e,n,r){return n?this.reference.getSubData(e,n,r):this}toString(){return`&${this.reference.toString()}`}}class fe extends Rs{constructor(e,n,r=null){super(n,r),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!=0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new fe(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new fe(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new fe(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,n,r,s){if(r)return void console.error("SetDataValue: Scalar data does not support postfix",r);if(!(n instanceof fe))return void console.error("SetDataValue: Invalid value",n);let i=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?i=Math.floor(i):this.typeInfo.name==="bool"&&(i=i?1:0),this.data[0]=i}getSubData(e,n,r){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}}function T$(t,e,n){const r=e.length;return r===2?n==="f32"?new Z(new Float32Array(e),t.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new Z(new Int32Array(e),t.getTypeInfo("vec2i")):n==="u32"?new Z(new Uint32Array(e),t.getTypeInfo("vec2u")):n==="f16"?new Z(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):r===3?n==="f32"?new Z(new Float32Array(e),t.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new Z(new Int32Array(e),t.getTypeInfo("vec3i")):n==="u32"?new Z(new Uint32Array(e),t.getTypeInfo("vec3u")):n==="f16"?new Z(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):r===4?n==="f32"?new Z(new Float32Array(e),t.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new Z(new Int32Array(e),t.getTypeInfo("vec4i")):n==="u32"?new Z(new Uint32Array(e),t.getTypeInfo("vec4u")):n==="f16"?new Z(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}class Z extends Rs{constructor(e,n,r=null){if(super(n,r),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const s=this.typeInfo.name;s==="vec2f"||s==="vec3f"||s==="vec4f"?this.data=new Float32Array(e):s==="vec2i"||s==="vec3i"||s==="vec4i"?this.data=new Int32Array(e):s==="vec2u"||s==="vec3u"||s==="vec4u"?this.data=new Uint32Array(e):s==="vec2h"||s==="vec3h"||s==="vec4h"?this.data=new Float32Array(e):s==="vec2b"||s==="vec3b"||s==="vec4b"?this.data=new Int32Array(e):s==="vec2"||s==="vec3"||s==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${s}`)}}clone(){if(this.data instanceof Float32Array)return new Z(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Z(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Z(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,n,r,s){r instanceof Ga?console.error("TODO: Set vector postfix"):n instanceof Z?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;let s=e.getTypeInfo("f32");if(this.typeInfo instanceof Qa)s=this.typeInfo.format||s;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?s=e.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?s=e.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?s=e.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?s=e.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?s=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let i=this;for(;n!==null&&i!==null;){if(n instanceof Pc){const a=n.index;let l=-1;if(a instanceof Jn){if(!(a.value instanceof fe))return console.error(`GetSubData: Invalid array index ${a.value}`),null;l=a.value.value}else{const u=e.evalExpression(a,r);if(!(u instanceof fe))return console.error("GetSubData: Unknown index type",a),null;l=u.value}if(l<0||l>=i.data.length)return console.error("GetSubData: Index out of range",l),null;if(i.data instanceof Float32Array){const u=new Float32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new fe(u,s)}if(i.data instanceof Int32Array){const u=new Int32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new fe(u,s)}if(i.data instanceof Uint32Array){const u=new Uint32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new fe(u,s)}throw"GetSubData: Invalid data type"}if(!(n instanceof Ga))return console.error("GetSubData: Unknown postfix",n),null;{const a=n.value.toLowerCase();if(a.length===1){let u=0;if(a==="x"||a==="r")u=0;else if(a==="y"||a==="g")u=1;else if(a==="z"||a==="b")u=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;u=3}if(this.data instanceof Float32Array){let h=new Float32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new fe(h,s,this)}if(this.data instanceof Int32Array){let h=new Int32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new fe(h,s,this)}if(this.data instanceof Uint32Array){let h=new Uint32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new fe(h,s,this)}}const l=[];for(const u of a)u==="x"||u==="r"?l.push(this.data[0]):u==="y"||u==="g"?l.push(this.data[1]):u==="z"||u==="b"?l.push(this.data[2]):u==="w"||u==="a"?l.push(this.data[3]):console.error(`GetDataValue: Unknown member ${u}`);i=T$(e,l,s.name)}n=n.postfix}return i}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class mt extends Rs{constructor(e,n,r=null){super(n,r),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new mt(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,n,r,s){r instanceof Ga?console.error("TODO: Set matrix postfix"):n instanceof mt?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;const s=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof Qa)this.typeInfo.format;else if(s.endsWith("f"))e.getTypeInfo("f32");else if(s.endsWith("i"))e.getTypeInfo("i32");else if(s.endsWith("u"))e.getTypeInfo("u32");else{if(!s.endsWith("h"))return console.error(`GetDataValue: Unknown type ${s}`),null;e.getTypeInfo("f16")}if(n instanceof Pc){const i=n.index;let a=-1;if(i instanceof Jn){if(!(i.value instanceof fe))return console.error(`GetDataValue: Invalid array index ${i.value}`),null;a=i.value.value}else{const h=e.evalExpression(i,r);if(!(h instanceof fe))return console.error("GetDataValue: Unknown index type",i),null;a=h.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const l=s.endsWith("h")?"h":"f";let u;if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h"||s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h")u=new Z(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${l}`));else if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h"||s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h")u=new Z(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${l}`));else{if(s!=="mat2x4"&&s!=="mat2x4f"&&s!=="mat2x4h"&&s!=="mat3x4"&&s!=="mat3x4f"&&s!=="mat3x4h"&&s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${s}`),null;u=new Z(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${l}`))}return n.postfix?u.getSubData(e,n.postfix,r):u}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class Mn extends Rs{constructor(e,n,r=0,s=null){super(n,s),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=r}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Mn(e.buffer,this.typeInfo,0,null)}setDataValue(e,n,r,s){if(n===null)return void console.log("setDataValue: NULL data.");let i=this.offset,a=this.typeInfo;for(;r;){if(r instanceof Pc)if(a instanceof Zo){const l=r.index;if(l instanceof Jn){if(!(l.value instanceof fe))return void console.error(`SetDataValue: Invalid index type ${l.value}`);i+=l.value.value*a.stride}else{const u=e.evalExpression(l,s);if(!(u instanceof fe))return void console.error("SetDataValue: Unknown index type",l);i+=u.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(r instanceof Ga))return void console.error("SetDataValue: Unknown postfix type",r);{const l=r.value;if(a instanceof Wo){let u=!1;for(const h of a.members)if(h.name===l){i+=h.offset,a=h.type,u=!0;break}if(!u)return void console.error(`SetDataValue: Member ${l} not found`)}else if(a instanceof ws){const u=a.getTypeName();let h=0;if(l==="x"||l==="r")h=0;else if(l==="y"||l==="g")h=1;else if(l==="z"||l==="b")h=2;else{if(l!=="w"&&l!=="a")return void console.error(`SetDataValue: Unknown member ${l}`);h=3}if(!(n instanceof fe))return void console.error("SetDataValue: Invalid value",n);const d=n.value;return u==="vec2f"?void(new Float32Array(this.buffer,i,2)[h]=d):u==="vec3f"?void(new Float32Array(this.buffer,i,3)[h]=d):u==="vec4f"?void(new Float32Array(this.buffer,i,4)[h]=d):u==="vec2i"?void(new Int32Array(this.buffer,i,2)[h]=d):u==="vec3i"?void(new Int32Array(this.buffer,i,3)[h]=d):u==="vec4i"?void(new Int32Array(this.buffer,i,4)[h]=d):u==="vec2u"?void(new Uint32Array(this.buffer,i,2)[h]=d):u==="vec3u"?void(new Uint32Array(this.buffer,i,3)[h]=d):u==="vec4u"?void(new Uint32Array(this.buffer,i,4)[h]=d):void console.error(`SetDataValue: Type ${u} is not a struct`)}}}r=r.postfix}this.setData(e,n,a,i,s)}setData(e,n,r,s,i){const a=r.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool")if(a!=="vec2f"&&a!=="vec2h")if(a!=="vec3f"&&a!=="vec3h")if(a!=="vec4f"&&a!=="vec4h")if(a!=="vec2i")if(a!=="vec3i")if(a!=="vec4i")if(a!=="vec2u")if(a!=="vec3u")if(a!=="vec4u")if(a!=="vec2b")if(a!=="vec3b")if(a!=="vec4b")if(a!=="mat2x2f"&&a!=="mat2x2h")if(a!=="mat2x3f"&&a!=="mat2x3h")if(a!=="mat2x4f"&&a!=="mat2x4h")if(a!=="mat3x2f"&&a!=="mat3x2h")if(a!=="mat3x3f"&&a!=="mat3x3h")if(a!=="mat3x4f"&&a!=="mat3x4h")if(a!=="mat4x2f"&&a!=="mat4x2h")if(a!=="mat4x3f"&&a!=="mat4x3h")if(a!=="mat4x4f"&&a!=="mat4x4h")if(n instanceof Mn){if(r===n.typeInfo)return void new Uint8Array(this.buffer,s,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",a,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`);else{const l=new Float32Array(this.buffer,s,16);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11],l[12]=n.data[12],l[13]=n.data[13],l[14]=n.data[14],l[15]=n.data[15]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15])}else{const l=new Float32Array(this.buffer,s,12);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11])}else{const l=new Float32Array(this.buffer,s,8);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7])}else{const l=new Float32Array(this.buffer,s,12);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11])}else{const l=new Float32Array(this.buffer,s,9);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8])}else{const l=new Float32Array(this.buffer,s,6);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5])}else{const l=new Float32Array(this.buffer,s,8);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7])}else{const l=new Float32Array(this.buffer,s,6);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5])}else{const l=new Float32Array(this.buffer,s,4);n instanceof mt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,4);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,3);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Uint32Array(this.buffer,s,2);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Uint32Array(this.buffer,s,4);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,3);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Uint32Array(this.buffer,s,2);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Int32Array(this.buffer,s,4);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Int32Array(this.buffer,s,3);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Int32Array(this.buffer,s,2);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Float32Array(this.buffer,s,4);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Float32Array(this.buffer,s,3);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Float32Array(this.buffer,s,2);n instanceof Z?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else n instanceof fe&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof fe&&(new Uint32Array(this.buffer,s,1)[0]=n.value);else n instanceof fe&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof fe&&(new Float32Array(this.buffer,s,1)[0]=n.value)}getSubData(e,n,r){var s,i,a;if(n===null)return this;let l=this.offset,u=this.typeInfo;for(;n;){if(n instanceof Pc){const d=n.index,g=d instanceof Ys?e.evalExpression(d,r):d;let b=0;if(g instanceof fe?b=g.value:typeof g=="number"?b=g:console.error("GetDataValue: Invalid index type",d),u instanceof Zo)l+=b*u.stride,u=u.format;else{const w=u.getTypeName();w==="mat4x4"||w==="mat4x4f"||w==="mat4x4h"?(l+=16*b,u=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${u.getTypeName()} is not an array`)}}else{if(!(n instanceof Ga))return console.error("GetDataValue: Unknown postfix type",n),null;{const d=n.value;if(u instanceof Wo){let g=!1;for(const b of u.members)if(b.name===d){l+=b.offset,u=b.type,g=!0;break}if(!g)return console.error(`GetDataValue: Member ${d} not found`),null}else if(u instanceof ws){const g=u.getTypeName();if(g==="vec2f"||g==="vec3f"||g==="vec4f"||g==="vec2i"||g==="vec3i"||g==="vec4i"||g==="vec2u"||g==="vec3u"||g==="vec4u"||g==="vec2b"||g==="vec3b"||g==="vec4b"||g==="vec2h"||g==="vec3h"||g==="vec4h"||g==="vec2"||g==="vec3"||g==="vec4"){if(d.length>0&&d.length<5){let b="f";const w=[];for(let R=0;R<d.length;++R){const A=d[R].toLowerCase();let C=0;if(A==="x"||A==="r")C=0;else if(A==="y"||A==="g")C=1;else if(A==="z"||A==="b")C=2;else{if(A!=="w"&&A!=="a")return console.error(`Unknown member ${d}`),null;C=3}if(d.length===1){if(g.endsWith("f"))return this.buffer.byteLength<l+4*C+4?(console.log("Insufficient buffer data"),null):new fe(new Float32Array(this.buffer,l+4*C,1),e.getTypeInfo("f32"),this);if(g.endsWith("h"))return new fe(new Float32Array(this.buffer,l+4*C,1),e.getTypeInfo("f16"),this);if(g.endsWith("i"))return new fe(new Int32Array(this.buffer,l+4*C,1),e.getTypeInfo("i32"),this);if(g.endsWith("b"))return new fe(new Int32Array(this.buffer,l+4*C,1),e.getTypeInfo("bool"),this);if(g.endsWith("u"))return new fe(new Uint32Array(this.buffer,l+4*C,1),e.getTypeInfo("i32"),this)}if(g==="vec2f")w.push(new Float32Array(this.buffer,l,2)[C]);else if(g==="vec3f"){if(l+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const M=new Float32Array(this.buffer,l,3);w.push(M[C])}else if(g==="vec4f")w.push(new Float32Array(this.buffer,l,4)[C]);else if(g==="vec2i")b="i",w.push(new Int32Array(this.buffer,l,2)[C]);else if(g==="vec3i")b="i",w.push(new Int32Array(this.buffer,l,3)[C]);else if(g==="vec4i")b="i",w.push(new Int32Array(this.buffer,l,4)[C]);else if(g==="vec2u"){b="u";const M=new Uint32Array(this.buffer,l,2);w.push(M[C])}else g==="vec3u"?(b="u",w.push(new Uint32Array(this.buffer,l,3)[C])):g==="vec4u"&&(b="u",w.push(new Uint32Array(this.buffer,l,4)[C]))}return w.length===2?u=e.getTypeInfo(`vec2${b}`):w.length===3?u=e.getTypeInfo(`vec3${b}`):w.length===4?u=e.getTypeInfo(`vec4${b}`):console.error(`GetDataValue: Invalid vector length ${w.length}`),new Z(w,u,null)}return console.error(`GetDataValue: Unknown member ${d}`),null}return console.error(`GetDataValue: Type ${g} is not a struct`),null}}}n=n.postfix}const h=u.getTypeName();return h==="f32"?new fe(new Float32Array(this.buffer,l,1),u,this):h==="i32"?new fe(new Int32Array(this.buffer,l,1),u,this):h==="u32"?new fe(new Uint32Array(this.buffer,l,1),u,this):h==="vec2f"?new Z(new Float32Array(this.buffer,l,2),u,this):h==="vec3f"?new Z(new Float32Array(this.buffer,l,3),u,this):h==="vec4f"?new Z(new Float32Array(this.buffer,l,4),u,this):h==="vec2i"?new Z(new Int32Array(this.buffer,l,2),u,this):h==="vec3i"?new Z(new Int32Array(this.buffer,l,3),u,this):h==="vec4i"?new Z(new Int32Array(this.buffer,l,4),u,this):h==="vec2u"?new Z(new Uint32Array(this.buffer,l,2),u,this):h==="vec3u"?new Z(new Uint32Array(this.buffer,l,3),u,this):h==="vec4u"?new Z(new Uint32Array(this.buffer,l,4),u,this):u instanceof Qa&&u.name==="atomic"?((s=u.format)===null||s===void 0?void 0:s.name)==="u32"?new fe(new Uint32Array(this.buffer,l,1)[0],u.format,this):((i=u.format)===null||i===void 0?void 0:i.name)==="i32"?new fe(new Int32Array(this.buffer,l,1)[0],u.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=u.format)===null||a===void 0?void 0:a.name}`),null):new Mn(this.buffer,u,l,this)}toString(){let e="";if(this.typeInfo instanceof Zo)if(this.typeInfo.format.name==="f32"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="i32"){const n=new Int32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="u32"){const n=new Uint32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="vec2f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}]`;for(let r=1;r<n.length/2;++r)e+=`, [${n[2*r]}, ${n[2*r+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}, ${n[r+3]}]`}else e="[...]";else this.typeInfo instanceof Wo?e+="{...}":e="[...]";return e}}class Bi extends Rs{constructor(e,n,r,s){super(n,null),this.data=e,this.descriptor=r,this.view=s}clone(){return new Bi(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>0?(e=r[0])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.width)!==null&&n!==void 0?n:0}get height(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>1?(e=r[1])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>2?(e=r[2])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const n=[this.width,this.height,this.depthOrArrayLayers];for(let r=0;r<n.length;++r)n[r]=Math.max(1,n[r]>>e);return n}get texelByteSize(){const e=this.format,n=jb[e];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,n=jb[e];return!!n&&n.isDepthStencil}getGpuSize(){const e=this.format,n=jb[e],r=this.width;if(!e||r<=0||!n)return-1;const s=this.height,i=this.depthOrArrayLayers,a=this.dimension;return r/n.blockWidth*(a==="1d"?1:s/n.blockHeight)*n.bytesPerBlock*i}getPixel(e,n,r=0,s=0){const i=this.texelByteSize,a=this.bytesPerRow,l=this.height,u=this.data[s];return b$(new Uint8Array(u),e,n,r,s,l,a,i,this.format)}setPixel(e,n,r,s,i){const a=this.texelByteSize,l=this.bytesPerRow,u=this.height,h=this.data[s];(function(d,g,b,w,R,A,C,M,N,k){const F=w*(C>>=R)*(A>>=R)+b*C+g*M;switch(N){case"r8unorm":return void Yt(d,F,"8unorm",1,k);case"r8snorm":return void Yt(d,F,"8snorm",1,k);case"r8uint":return void Yt(d,F,"8uint",1,k);case"r8sint":return void Yt(d,F,"8sint",1,k);case"rg8unorm":return void Yt(d,F,"8unorm",2,k);case"rg8snorm":return void Yt(d,F,"8snorm",2,k);case"rg8uint":return void Yt(d,F,"8uint",2,k);case"rg8sint":return void Yt(d,F,"8sint",2,k);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void Yt(d,F,"8unorm",4,k);case"rgba8snorm":return void Yt(d,F,"8snorm",4,k);case"rgba8uint":return void Yt(d,F,"8uint",4,k);case"rgba8sint":return void Yt(d,F,"8sint",4,k);case"r16uint":return void Yt(d,F,"16uint",1,k);case"r16sint":return void Yt(d,F,"16sint",1,k);case"r16float":return void Yt(d,F,"16float",1,k);case"rg16uint":return void Yt(d,F,"16uint",2,k);case"rg16sint":return void Yt(d,F,"16sint",2,k);case"rg16float":return void Yt(d,F,"16float",2,k);case"rgba16uint":return void Yt(d,F,"16uint",4,k);case"rgba16sint":return void Yt(d,F,"16sint",4,k);case"rgba16float":return void Yt(d,F,"16float",4,k);case"r32uint":return void Yt(d,F,"32uint",1,k);case"r32sint":return void Yt(d,F,"32sint",1,k);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void Yt(d,F,"32float",1,k);case"rg32uint":return void Yt(d,F,"32uint",2,k);case"rg32sint":return void Yt(d,F,"32sint",2,k);case"rg32float":return void Yt(d,F,"32float",2,k);case"rgba32uint":return void Yt(d,F,"32uint",4,k);case"rgba32sint":return void Yt(d,F,"32sint",4,k);case"rgba32float":return void Yt(d,F,"32float",4,k);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(h),e,n,r,s,u,l,a,this.format,i)}}(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(he||(he={}));class de{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class W{}be=W,W.none=new de("",he.reserved,""),W.eof=new de("EOF",he.token,""),W.reserved={asm:new de("asm",he.reserved,"asm"),bf16:new de("bf16",he.reserved,"bf16"),do:new de("do",he.reserved,"do"),enum:new de("enum",he.reserved,"enum"),f16:new de("f16",he.reserved,"f16"),f64:new de("f64",he.reserved,"f64"),handle:new de("handle",he.reserved,"handle"),i8:new de("i8",he.reserved,"i8"),i16:new de("i16",he.reserved,"i16"),i64:new de("i64",he.reserved,"i64"),mat:new de("mat",he.reserved,"mat"),premerge:new de("premerge",he.reserved,"premerge"),regardless:new de("regardless",he.reserved,"regardless"),typedef:new de("typedef",he.reserved,"typedef"),u8:new de("u8",he.reserved,"u8"),u16:new de("u16",he.reserved,"u16"),u64:new de("u64",he.reserved,"u64"),unless:new de("unless",he.reserved,"unless"),using:new de("using",he.reserved,"using"),vec:new de("vec",he.reserved,"vec"),void:new de("void",he.reserved,"void")},W.keywords={array:new de("array",he.keyword,"array"),atomic:new de("atomic",he.keyword,"atomic"),bool:new de("bool",he.keyword,"bool"),f32:new de("f32",he.keyword,"f32"),i32:new de("i32",he.keyword,"i32"),mat2x2:new de("mat2x2",he.keyword,"mat2x2"),mat2x3:new de("mat2x3",he.keyword,"mat2x3"),mat2x4:new de("mat2x4",he.keyword,"mat2x4"),mat3x2:new de("mat3x2",he.keyword,"mat3x2"),mat3x3:new de("mat3x3",he.keyword,"mat3x3"),mat3x4:new de("mat3x4",he.keyword,"mat3x4"),mat4x2:new de("mat4x2",he.keyword,"mat4x2"),mat4x3:new de("mat4x3",he.keyword,"mat4x3"),mat4x4:new de("mat4x4",he.keyword,"mat4x4"),ptr:new de("ptr",he.keyword,"ptr"),sampler:new de("sampler",he.keyword,"sampler"),sampler_comparison:new de("sampler_comparison",he.keyword,"sampler_comparison"),struct:new de("struct",he.keyword,"struct"),texture_1d:new de("texture_1d",he.keyword,"texture_1d"),texture_2d:new de("texture_2d",he.keyword,"texture_2d"),texture_2d_array:new de("texture_2d_array",he.keyword,"texture_2d_array"),texture_3d:new de("texture_3d",he.keyword,"texture_3d"),texture_cube:new de("texture_cube",he.keyword,"texture_cube"),texture_cube_array:new de("texture_cube_array",he.keyword,"texture_cube_array"),texture_multisampled_2d:new de("texture_multisampled_2d",he.keyword,"texture_multisampled_2d"),texture_storage_1d:new de("texture_storage_1d",he.keyword,"texture_storage_1d"),texture_storage_2d:new de("texture_storage_2d",he.keyword,"texture_storage_2d"),texture_storage_2d_array:new de("texture_storage_2d_array",he.keyword,"texture_storage_2d_array"),texture_storage_3d:new de("texture_storage_3d",he.keyword,"texture_storage_3d"),texture_depth_2d:new de("texture_depth_2d",he.keyword,"texture_depth_2d"),texture_depth_2d_array:new de("texture_depth_2d_array",he.keyword,"texture_depth_2d_array"),texture_depth_cube:new de("texture_depth_cube",he.keyword,"texture_depth_cube"),texture_depth_cube_array:new de("texture_depth_cube_array",he.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new de("texture_depth_multisampled_2d",he.keyword,"texture_depth_multisampled_2d"),texture_external:new de("texture_external",he.keyword,"texture_external"),u32:new de("u32",he.keyword,"u32"),vec2:new de("vec2",he.keyword,"vec2"),vec3:new de("vec3",he.keyword,"vec3"),vec4:new de("vec4",he.keyword,"vec4"),bitcast:new de("bitcast",he.keyword,"bitcast"),block:new de("block",he.keyword,"block"),break:new de("break",he.keyword,"break"),case:new de("case",he.keyword,"case"),continue:new de("continue",he.keyword,"continue"),continuing:new de("continuing",he.keyword,"continuing"),default:new de("default",he.keyword,"default"),diagnostic:new de("diagnostic",he.keyword,"diagnostic"),discard:new de("discard",he.keyword,"discard"),else:new de("else",he.keyword,"else"),enable:new de("enable",he.keyword,"enable"),fallthrough:new de("fallthrough",he.keyword,"fallthrough"),false:new de("false",he.keyword,"false"),fn:new de("fn",he.keyword,"fn"),for:new de("for",he.keyword,"for"),function:new de("function",he.keyword,"function"),if:new de("if",he.keyword,"if"),let:new de("let",he.keyword,"let"),const:new de("const",he.keyword,"const"),loop:new de("loop",he.keyword,"loop"),while:new de("while",he.keyword,"while"),private:new de("private",he.keyword,"private"),read:new de("read",he.keyword,"read"),read_write:new de("read_write",he.keyword,"read_write"),return:new de("return",he.keyword,"return"),requires:new de("requires",he.keyword,"requires"),storage:new de("storage",he.keyword,"storage"),switch:new de("switch",he.keyword,"switch"),true:new de("true",he.keyword,"true"),alias:new de("alias",he.keyword,"alias"),type:new de("type",he.keyword,"type"),uniform:new de("uniform",he.keyword,"uniform"),var:new de("var",he.keyword,"var"),override:new de("override",he.keyword,"override"),workgroup:new de("workgroup",he.keyword,"workgroup"),write:new de("write",he.keyword,"write"),r8unorm:new de("r8unorm",he.keyword,"r8unorm"),r8snorm:new de("r8snorm",he.keyword,"r8snorm"),r8uint:new de("r8uint",he.keyword,"r8uint"),r8sint:new de("r8sint",he.keyword,"r8sint"),r16uint:new de("r16uint",he.keyword,"r16uint"),r16sint:new de("r16sint",he.keyword,"r16sint"),r16float:new de("r16float",he.keyword,"r16float"),rg8unorm:new de("rg8unorm",he.keyword,"rg8unorm"),rg8snorm:new de("rg8snorm",he.keyword,"rg8snorm"),rg8uint:new de("rg8uint",he.keyword,"rg8uint"),rg8sint:new de("rg8sint",he.keyword,"rg8sint"),r32uint:new de("r32uint",he.keyword,"r32uint"),r32sint:new de("r32sint",he.keyword,"r32sint"),r32float:new de("r32float",he.keyword,"r32float"),rg16uint:new de("rg16uint",he.keyword,"rg16uint"),rg16sint:new de("rg16sint",he.keyword,"rg16sint"),rg16float:new de("rg16float",he.keyword,"rg16float"),rgba8unorm:new de("rgba8unorm",he.keyword,"rgba8unorm"),rgba8unorm_srgb:new de("rgba8unorm_srgb",he.keyword,"rgba8unorm_srgb"),rgba8snorm:new de("rgba8snorm",he.keyword,"rgba8snorm"),rgba8uint:new de("rgba8uint",he.keyword,"rgba8uint"),rgba8sint:new de("rgba8sint",he.keyword,"rgba8sint"),bgra8unorm:new de("bgra8unorm",he.keyword,"bgra8unorm"),bgra8unorm_srgb:new de("bgra8unorm_srgb",he.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new de("rgb10a2unorm",he.keyword,"rgb10a2unorm"),rg11b10float:new de("rg11b10float",he.keyword,"rg11b10float"),rg32uint:new de("rg32uint",he.keyword,"rg32uint"),rg32sint:new de("rg32sint",he.keyword,"rg32sint"),rg32float:new de("rg32float",he.keyword,"rg32float"),rgba16uint:new de("rgba16uint",he.keyword,"rgba16uint"),rgba16sint:new de("rgba16sint",he.keyword,"rgba16sint"),rgba16float:new de("rgba16float",he.keyword,"rgba16float"),rgba32uint:new de("rgba32uint",he.keyword,"rgba32uint"),rgba32sint:new de("rgba32sint",he.keyword,"rgba32sint"),rgba32float:new de("rgba32float",he.keyword,"rgba32float"),static_assert:new de("static_assert",he.keyword,"static_assert")},W.tokens={decimal_float_literal:new de("decimal_float_literal",he.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new de("hex_float_literal",he.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new de("int_literal",he.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new de("uint_literal",he.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new de("name",he.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new de("ident",he.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new de("and",he.token,"&"),and_and:new de("and_and",he.token,"&&"),arrow:new de("arrow ",he.token,"->"),attr:new de("attr",he.token,"@"),forward_slash:new de("forward_slash",he.token,"/"),bang:new de("bang",he.token,"!"),bracket_left:new de("bracket_left",he.token,"["),bracket_right:new de("bracket_right",he.token,"]"),brace_left:new de("brace_left",he.token,"{"),brace_right:new de("brace_right",he.token,"}"),colon:new de("colon",he.token,":"),comma:new de("comma",he.token,","),equal:new de("equal",he.token,"="),equal_equal:new de("equal_equal",he.token,"=="),not_equal:new de("not_equal",he.token,"!="),greater_than:new de("greater_than",he.token,">"),greater_than_equal:new de("greater_than_equal",he.token,">="),shift_right:new de("shift_right",he.token,">>"),less_than:new de("less_than",he.token,"<"),less_than_equal:new de("less_than_equal",he.token,"<="),shift_left:new de("shift_left",he.token,"<<"),modulo:new de("modulo",he.token,"%"),minus:new de("minus",he.token,"-"),minus_minus:new de("minus_minus",he.token,"--"),period:new de("period",he.token,"."),plus:new de("plus",he.token,"+"),plus_plus:new de("plus_plus",he.token,"++"),or:new de("or",he.token,"|"),or_or:new de("or_or",he.token,"||"),paren_left:new de("paren_left",he.token,"("),paren_right:new de("paren_right",he.token,")"),semicolon:new de("semicolon",he.token,";"),star:new de("star",he.token,"*"),tilde:new de("tilde",he.token,"~"),underscore:new de("underscore",he.token,"_"),xor:new de("xor",he.token,"^"),plus_equal:new de("plus_equal",he.token,"+="),minus_equal:new de("minus_equal",he.token,"-="),times_equal:new de("times_equal",he.token,"*="),division_equal:new de("division_equal",he.token,"/="),modulo_equal:new de("modulo_equal",he.token,"%="),and_equal:new de("and_equal",he.token,"&="),or_equal:new de("or_equal",he.token,"|="),xor_equal:new de("xor_equal",he.token,"^="),shift_right_equal:new de("shift_right_equal",he.token,">>="),shift_left_equal:new de("shift_left_equal",he.token,"<<=")},W.simpleTokens={"@":be.tokens.attr,"{":be.tokens.brace_left,"}":be.tokens.brace_right,":":be.tokens.colon,",":be.tokens.comma,"(":be.tokens.paren_left,")":be.tokens.paren_right,";":be.tokens.semicolon},W.literalTokens={"&":be.tokens.and,"&&":be.tokens.and_and,"->":be.tokens.arrow,"/":be.tokens.forward_slash,"!":be.tokens.bang,"[":be.tokens.bracket_left,"]":be.tokens.bracket_right,"=":be.tokens.equal,"==":be.tokens.equal_equal,"!=":be.tokens.not_equal,">":be.tokens.greater_than,">=":be.tokens.greater_than_equal,">>":be.tokens.shift_right,"<":be.tokens.less_than,"<=":be.tokens.less_than_equal,"<<":be.tokens.shift_left,"%":be.tokens.modulo,"-":be.tokens.minus,"--":be.tokens.minus_minus,".":be.tokens.period,"+":be.tokens.plus,"++":be.tokens.plus_plus,"|":be.tokens.or,"||":be.tokens.or_or,"*":be.tokens.star,"~":be.tokens.tilde,_:be.tokens.underscore,"^":be.tokens.xor,"+=":be.tokens.plus_equal,"-=":be.tokens.minus_equal,"*=":be.tokens.times_equal,"/=":be.tokens.division_equal,"%=":be.tokens.modulo_equal,"&=":be.tokens.and_equal,"|=":be.tokens.or_equal,"^=":be.tokens.xor_equal,">>=":be.tokens.shift_right_equal,"<<=":be.tokens.shift_left_equal},W.regexTokens={decimal_float_literal:be.tokens.decimal_float_literal,hex_float_literal:be.tokens.hex_float_literal,int_literal:be.tokens.int_literal,uint_literal:be.tokens.uint_literal,ident:be.tokens.ident},W.storage_class=[be.keywords.function,be.keywords.private,be.keywords.workgroup,be.keywords.uniform,be.keywords.storage],W.access_mode=[be.keywords.read,be.keywords.write,be.keywords.read_write],W.sampler_type=[be.keywords.sampler,be.keywords.sampler_comparison],W.sampled_texture_type=[be.keywords.texture_1d,be.keywords.texture_2d,be.keywords.texture_2d_array,be.keywords.texture_3d,be.keywords.texture_cube,be.keywords.texture_cube_array],W.multisampled_texture_type=[be.keywords.texture_multisampled_2d],W.storage_texture_type=[be.keywords.texture_storage_1d,be.keywords.texture_storage_2d,be.keywords.texture_storage_2d_array,be.keywords.texture_storage_3d],W.depth_texture_type=[be.keywords.texture_depth_2d,be.keywords.texture_depth_2d_array,be.keywords.texture_depth_cube,be.keywords.texture_depth_cube_array,be.keywords.texture_depth_multisampled_2d],W.texture_external_type=[be.keywords.texture_external],W.any_texture_type=[...be.sampled_texture_type,...be.multisampled_texture_type,...be.storage_texture_type,...be.depth_texture_type,...be.texture_external_type],W.texel_format=[be.keywords.r8unorm,be.keywords.r8snorm,be.keywords.r8uint,be.keywords.r8sint,be.keywords.r16uint,be.keywords.r16sint,be.keywords.r16float,be.keywords.rg8unorm,be.keywords.rg8snorm,be.keywords.rg8uint,be.keywords.rg8sint,be.keywords.r32uint,be.keywords.r32sint,be.keywords.r32float,be.keywords.rg16uint,be.keywords.rg16sint,be.keywords.rg16float,be.keywords.rgba8unorm,be.keywords.rgba8unorm_srgb,be.keywords.rgba8snorm,be.keywords.rgba8uint,be.keywords.rgba8sint,be.keywords.bgra8unorm,be.keywords.bgra8unorm_srgb,be.keywords.rgb10a2unorm,be.keywords.rg11b10float,be.keywords.rg32uint,be.keywords.rg32sint,be.keywords.rg32float,be.keywords.rgba16uint,be.keywords.rgba16sint,be.keywords.rgba16float,be.keywords.rgba32uint,be.keywords.rgba32sint,be.keywords.rgba32float],W.const_literal=[be.tokens.int_literal,be.tokens.uint_literal,be.tokens.decimal_float_literal,be.tokens.hex_float_literal,be.keywords.true,be.keywords.false],W.literal_or_ident=[be.tokens.ident,be.tokens.int_literal,be.tokens.uint_literal,be.tokens.decimal_float_literal,be.tokens.hex_float_literal,be.tokens.name],W.element_count_expression=[be.tokens.int_literal,be.tokens.uint_literal,be.tokens.ident],W.template_types=[be.keywords.vec2,be.keywords.vec3,be.keywords.vec4,be.keywords.mat2x2,be.keywords.mat2x3,be.keywords.mat2x4,be.keywords.mat3x2,be.keywords.mat3x3,be.keywords.mat3x4,be.keywords.mat4x2,be.keywords.mat4x3,be.keywords.mat4x4,be.keywords.atomic,be.keywords.bitcast,...be.any_texture_type],W.attribute_name=[be.tokens.ident,be.keywords.block,be.keywords.diagnostic],W.assignment_operators=[be.tokens.equal,be.tokens.plus_equal,be.tokens.minus_equal,be.tokens.times_equal,be.tokens.division_equal,be.tokens.modulo_equal,be.tokens.and_equal,be.tokens.or_equal,be.tokens.xor_equal,be.tokens.shift_right_equal,be.tokens.shift_left_equal],W.increment_operators=[be.tokens.plus_plus,be.tokens.minus_minus];class lE{constructor(e,n,r,s,i){this.type=e,this.lexeme=n,this.line=r,this.start=s,this.end=i}toString(){return this.lexeme}isTemplateType(){return W.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==W.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class E${constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new lE(W.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=W.simpleTokens[e];if(n)return this._addToken(n),!0;let r=W.none;const s=this._isAlpha(e),i=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(s){const a=W.keywords[e];if(a)return this._addToken(a),!0}if(s||i)return this._addToken(W.tokens.ident),!0;for(;;){let a=this._findType(e);const l=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(l=="=")return this._current++,e+=l,this._addToken(W.tokens.minus_equal),!0;if(l=="-")return this._current++,e+=l,this._addToken(W.tokens.minus_minus),!0;const u=this._tokens.length-1;if((W.literal_or_ident.indexOf(this._tokens[u].type)!=-1||this._tokens[u].type==W.tokens.paren_right)&&l!=">")return this._addToken(a),!0}if(e==">"&&(l==">"||l=="=")){let u=!1,h=this._tokens.length-1;for(let d=0;d<5&&h>=0&&W.assignment_operators.indexOf(this._tokens[h].type)===-1;++d,--h)if(this._tokens[h].type===W.tokens.less_than){h>0&&this._tokens[h-1].isArrayOrTemplateType()&&(u=!0);break}if(u)return this._addToken(a),!0}if(a===W.none){let u=e,h=0;const d=2;for(let g=0;g<d;++g)if(u+=this._peekAhead(g),a=this._findType(u),a!==W.none){h=g;break}if(a===W.none)return r!==W.none&&(this._current--,this._addToken(r),!0);e=u,this._current+=h+1}if(r=a,this._isAtEnd())break;e+=this._advance()}return r!==W.none&&(this._addToken(r),!0)}_findType(e){for(const r in W.regexTokens){const s=W.regexTokens[r];if(this._match(e,s.rule))return s}return W.literalTokens[e]||W.none}_match(e,n){const r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new lE(e,n,this._line,this._start,this._current))}}function Ye(t){return Array.isArray(t)||(t==null?void 0:t.buffer)instanceof ArrayBuffer}const $p=new Float32Array(1),A$=new Uint32Array($p.buffer),R$=new Uint32Array($p.buffer),Hp=new Int32Array(1),C$=new Float32Array(Hp.buffer),k$=new Uint32Array(Hp.buffer),Wp=new Uint32Array(1),N$=new Float32Array(Wp.buffer),M$=new Int32Array(Wp.buffer);function cE(t,e,n){if(e===n)return t;if(e==="f32"){if(n==="i32"||n==="x32")return $p[0]=t,A$[0];if(n==="u32")return $p[0]=t,R$[0]}else if(e==="i32"||e==="x32"){if(n==="f32")return Hp[0]=t,C$[0];if(n==="u32")return Hp[0]=t,k$[0]}else if(e==="u32"){if(n==="f32")return Wp[0]=t,N$[0];if(n==="i32"||n==="x32")return Wp[0]=t,M$[0]}return console.error(`Unsupported cast from ${e} to ${n}`),t}class I${constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class Vd{constructor(e,n){this.align=e,this.size=n}}class hi{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new g$,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(const n of e)n instanceof Vf&&this._functions.set(n.name,new I$(n));for(const n of e)if(n instanceof ji){const r=this.getTypeInfo(n,null);r instanceof Wo&&this.structs.push(r)}for(const n of e)if(n instanceof Zv)this.aliases.push(this._getAliasInfo(n));else if(n instanceof Yv){const r=n,s=this._getAttributeNum(r.attributes,"id",0),i=r.type!=null?this.getTypeInfo(r.type,r.attributes):null;this.overrides.push(new h$(r.name,i,r.attributes,s))}else if(this._isUniformVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=new zd(r.name,a,s,i,r.attributes,ko.Uniform,r.access);l.access||(l.access="read"),this.uniforms.push(l)}else if(this._isStorageVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=this._isStorageTexture(a),u=new zd(r.name,a,s,i,r.attributes,l?ko.StorageTexture:ko.Storage,r.access);u.access||(u.access="read"),this.storage.push(u)}else if(this._isTextureVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=this._isStorageTexture(a),u=new zd(r.name,a,s,i,r.attributes,l?ko.StorageTexture:ko.Texture,r.access);u.access||(u.access="read"),l?this.storage.push(u):this.textures.push(u)}else if(this._isSamplerVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=new zd(r.name,a,s,i,r.attributes,ko.Sampler,r.access);this.samplers.push(l)}for(const n of e)if(n instanceof Vf){const r=this._getAttribute(n,"vertex"),s=this._getAttribute(n,"fragment"),i=this._getAttribute(n,"compute"),a=r||s||i,l=new p$(n.name,a==null?void 0:a.name,n.attributes);l.attributes=n.attributes,l.startLine=n.startLine,l.endLine=n.endLine,this.functions.push(l),this._functions.get(n.name).info=l,a&&(this._functions.get(n.name).inUse=!0,l.inUse=!0,l.resources=this._findResources(n,!!a),l.inputs=this._getInputs(n.args),l.outputs=this._getOutputs(n.returnType),this.entry[a.name].push(l)),l.arguments=n.args.map(u=>new d$(u.name,this.getTypeInfo(u.type,u.attributes),u.attributes)),l.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null}for(const n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(const n of this._functions.values())n.node.search(r=>{var s,i,a;if(r instanceof LN){if(r.value)if(Ye(r.value))for(const l of r.value)for(const u of this.overrides)l===u.name&&((s=n.info)===null||s===void 0||s.overrides.push(u));else for(const l of this.overrides)r.value===l.name&&((i=n.info)===null||i===void 0||i.overrides.push(l))}else if(r instanceof ls)for(const l of this.overrides)r.name===l.name&&((a=n.info)===null||a===void 0||a.overrides.push(l))});for(const n of this.uniforms)this._markStructsInUse(n.type);for(const n of this.storage)this._markStructsInUse(n.type)}getStructInfo(e){for(const n of this.structs)if(n.name==e)return n;return null}getOverrideInfo(e){for(const n of this.overrides)if(n.name==e)return n;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(const s of e.calls){const i=(r=this._functions.get(s.name))===null||r===void 0?void 0:r.info;i&&n.add(i)}}findResource(e,n,r){if(r){for(const s of this.entry.compute)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}for(const s of this.entry.vertex)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}for(const s of this.entry.fragment)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}}for(const s of this.uniforms)if(s.group==e&&s.binding==n)return s;for(const s of this.storage)if(s.group==e&&s.binding==n)return s;for(const s of this.textures)if(s.group==e&&s.binding==n)return s;for(const s of this.samplers)if(s.group==e&&s.binding==n)return s;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this.getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const r=[],s=this,i=[];return e.search(a=>{if(a instanceof zp)i.push({});else if(a instanceof Vp)i.pop();else if(a instanceof Vi){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type),i.length>0&&(i[i.length-1][l.name]=l)}else if(a instanceof ii){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type)}else if(a instanceof Sf){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type),i.length>0&&(i[i.length-1][l.name]=l)}else if(a instanceof ls){const l=a;if(i.length>0&&i[i.length-1][l.name])return;const u=s._findResource(l.name);u&&r.push(u)}else if(a instanceof Qv){const l=a,u=s._functions.get(l.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=s._findResources(u.node,n)),r.push(...u.resources))}else if(a instanceof Kv){const l=a,u=s._functions.get(l.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=s._findResources(u.node,n)),r.push(...u.resources))}}),[...new Map(r.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function n(r,s){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),s>=e[r].length&&(e[r].length=s+1)}for(const r of this.uniforms)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.storage)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.textures)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.samplers)n(r.group,r.binding),e[r.group][r.binding]=r;return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof ji)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof ji)this._getStructOutputs(r.type,n);else{const s=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(s!==null){const i=this.getTypeInfo(r.type,r.type.attributes),a=this._parseInt(s.value),l=new rE(r.name,i,s.name,a);n.push(l)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this.getTypeInfo(e,e.attributes),s=this._parseInt(n.value);return new rE("",r,n.name,s)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof ji)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof ji)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),s=this.getTypeInfo(e.type,e.attributes),i=this._parseInt(n.value),a=new f$(e.name,s,n.name,i);return r!==null&&(a.interpolation=this._parseString(r.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new u$(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const n of this.structs)if(n.name==e)return n;for(const n of this.aliases)if(n.name==e)return n.type;return null}getTypeInfo(e,n=null){if(this._types.has(e))return this._types.get(e);if(e instanceof fp){const s=e.type?this.getTypeInfo(e.type,e.attributes):null,i=new bx(e.name,s,n);return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof Tf){const s=e,i=s.format?this.getTypeInfo(s.format,s.attributes):null,a=new Zo(s.name,n);return a.format=i,a.count=s.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof ji){const s=e,i=new Wo(s.name,n);i.startLine=s.startLine,i.endLine=s.endLine;for(const a of s.members){const l=this.getTypeInfo(a.type,a.attributes);i.members.push(new nE(a.name,l,a.attributes))}return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof mf){const s=e,i=s.format instanceof je,a=s.format?i?this.getTypeInfo(s.format,null):new ws(s.format,null):null,l=new Qa(s.name,a,n,s.access);return this._types.set(e,l),this._updateTypeInfo(l),l}if(e instanceof me){const s=e,i=s.format?this.getTypeInfo(s.format,null):null,a=new Qa(s.name,i,n,s.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const r=new ws(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r,s;const i=this._getTypeSize(e);if(e.size=(n=i==null?void 0:i.size)!==null&&n!==void 0?n:0,e instanceof Zo&&e.format){const a=this._getTypeSize(e.format);e.stride=Math.max((r=a==null?void 0:a.size)!==null&&r!==void 0?r:0,(s=a==null?void 0:a.align)!==null&&s!==void 0?s:0),this._updateTypeInfo(e.format)}e instanceof bx&&this._updateTypeInfo(e.format),e instanceof Wo&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,s=0,i=0,a=0;for(let l=0,u=e.members.length;l<u;++l){const h=e.members[l],d=this._getTypeSize(h);if(!d)continue;(n=this._getAlias(h.type.name))!==null&&n!==void 0||h.type;const g=d.align,b=d.size;r=this._roundUp(g,r+s),s=b,i=r,a=Math.max(a,g),h.offset=r,h.size=b,this._updateTypeInfo(h.type)}e.size=this._roundUp(a,i+s),e.align=a}_getTypeSize(e){var n,r;if(e==null)return null;const s=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof nE&&(e=e.type),e instanceof ws){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=hi._typeInfo[e.name];if(a!==void 0){const l=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new Vd(Math.max(i,a.align/l),Math.max(s,a.size/l))}}{const a=hi._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const l=e.name[e.name.length-1]==="h"?2:1;return new Vd(Math.max(i,a.align/l),Math.max(s,a.size/l))}}if(e instanceof Zo){let a=e,l=8,u=8;const h=this._getTypeSize(a.format);return h!==null&&(u=h.size,l=h.align),u=a.count*this._getAttributeNum((r=e==null?void 0:e.attributes)!==null&&r!==void 0?r:null,"stride",this._roundUp(l,u)),s&&(u=s),new Vd(Math.max(i,l),Math.max(s,u))}if(e instanceof Wo){let a=0,l=0,u=0,h=0,d=0;for(const g of e.members){const b=this._getTypeSize(g.type);b!==null&&(a=Math.max(b.align,a),u=this._roundUp(b.align,u+h),h=b.size,d=u)}return l=this._roundUp(a,d+h),new Vd(Math.max(i,a),Math.max(s,l))}return null}_isUniformVar(e){return e instanceof Vi&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Vi&&e.storage=="storage"}_isTextureVar(e){return e instanceof Vi&&e.type!==null&&hi._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Vi&&e.type!==null&&hi._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const s=r.attributes;for(let i of s)if(i.name==n)return i;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let s of e)if(s.name==n){let i=s!==null&&s.value!==null?s.value:r;return i instanceof Array&&(i=i[0]),typeof i=="number"?i:typeof i=="string"?parseInt(i):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}hi._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},hi._textureTypes=W.any_texture_type.map(t=>t.name),hi._samplerTypes=W.sampler_type.map(t=>t.name);let Gv=0;class Jv{constructor(e,n,r){this.id=Gv++,this.name=e,this.value=n,this.node=r}clone(){return new Jv(this.name,this.value,this.node)}}class e0{constructor(e){this.id=Gv++,this.name=e.name,this.node=e}clone(){return new e0(this.node)}}class t0{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=Gv++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var n;return this.variables.has(e)?(n=this.variables.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var n;return this.functions.has(e)?(n=this.functions.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(e):null}createVariable(e,n,r){this.variables.set(e,new Jv(e,n,r??null))}setVariable(e,n,r){const s=this.getVariable(e);s!==null?s.value=n:this.createVariable(e,n,r)}getVariableValue(e){var n;const r=this.getVariable(e);return(n=r==null?void 0:r.value)!==null&&n!==void 0?n:null}clone(){return new t0(this)}}class O${evalExpression(e,n){return null}getTypeInfo(e){return null}getVariableName(e,n){return""}}class P${constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,n){const r=this.exec.evalExpression(e.args[0],n);let s=!0;if(r instanceof Z)return r.data.forEach(i=>{i||(s=!1)}),new fe(s?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z){const s=r.data.some(i=>i);return new fe(s?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,n){const r=this.exec.evalExpression(e.args[2],n);if(!(r instanceof fe))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return r.value?this.exec.evalExpression(e.args[1],n):this.exec.evalExpression(e.args[0],n)}ArrayLength(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.evalExpression(r,n);if(s instanceof Mn&&s.typeInfo.size===0){const i=s.typeInfo,a=s.buffer.byteLength/i.stride;return new fe(a,this.getTypeInfo("u32"))}return new fe(s.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.abs(i)),r.typeInfo);const s=r;return new fe(Math.abs(s.value),s.typeInfo)}Acos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.acos(i)),r.typeInfo);const s=r;return new fe(Math.acos(s.value),r.typeInfo)}Acosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.acosh(i)),r.typeInfo);const s=r;return new fe(Math.acosh(s.value),r.typeInfo)}Asin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.asin(i)),r.typeInfo);const s=r;return new fe(Math.asin(s.value),r.typeInfo)}Asinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.asinh(i)),r.typeInfo);const s=r;return new fe(Math.asinh(s.value),r.typeInfo)}Atan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.atan(i)),r.typeInfo);const s=r;return new fe(Math.atan(s.value),r.typeInfo)}Atanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.atanh(i)),r.typeInfo);const s=r;return new fe(Math.atanh(s.value),r.typeInfo)}Atan2(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((l,u)=>Math.atan2(l,s.data[u])),r.typeInfo);const i=r,a=s;return new fe(Math.atan2(i.value,a.value),r.typeInfo)}Ceil(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.ceil(i)),r.typeInfo);const s=r;return new fe(Math.ceil(s.value),r.typeInfo)}_clamp(e,n,r){return Math.min(Math.max(e,n),r)}Clamp(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Z&&s instanceof Z&&i instanceof Z)return new Z(r.data.map((h,d)=>this._clamp(h,s.data[d],i.data[d])),r.typeInfo);const a=r,l=s,u=i;return new fe(this._clamp(a.value,l.value,u.value),r.typeInfo)}Cos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.cos(i)),r.typeInfo);const s=r;return new fe(Math.cos(s.value),r.typeInfo)}Cosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.cosh(i)),r.typeInfo);const s=r;return new fe(Math.cos(s.value),r.typeInfo)}CountLeadingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.clz32(i)),r.typeInfo);const s=r;return new fe(Math.clz32(s.value),r.typeInfo)}_countOneBits(e){let n=0;for(;e!==0;)1&e&&n++,e>>=1;return n}CountOneBits(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>this._countOneBits(i)),r.typeInfo);const s=r;return new fe(this._countOneBits(s.value),r.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let n=0;for(;!(1&e);)e>>=1,n++;return n}CountTrailingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>this._countTrailingZeros(i)),r.typeInfo);const s=r;return new fe(this._countTrailingZeros(s.value),r.typeInfo)}Cross(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z){if(r.data.length!==3||s.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const i=r.data,a=s.data;return new Z([i[1]*a[2]-a[1]*i[2],i[2]*a[0]-a[2]*i[0],i[0]*a[1]-a[0]*i[1]],r.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,n){const r=this.exec.evalExpression(e.args[0],n),s=180/Math.PI;return r instanceof Z?new Z(r.data.map(i=>i*s),r.typeInfo):new fe(r.value*s,this.getTypeInfo("f32"))}Determinant(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof mt){const s=r.data,i=r.typeInfo.getTypeName(),a=i.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(i==="mat2x2"||i==="mat2x2f"||i==="mat2x2h")return new fe(s[0]*s[3]-s[1]*s[2],a);if(i==="mat2x3"||i==="mat2x3f"||i==="mat2x3h")return new fe(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);if(i==="mat2x4"||i==="mat2x4f"||i==="mat2x4h")console.error(`TODO: Determinant for ${i}`);else if(i==="mat3x2"||i==="mat3x2f"||i==="mat3x2h")console.error(`TODO: Determinant for ${i}`);else{if(i==="mat3x3"||i==="mat3x3f"||i==="mat3x3h")return new fe(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);i==="mat3x4"||i==="mat3x4f"||i==="mat3x4h"||i==="mat4x2"||i==="mat4x2f"||i==="mat4x2h"||i==="mat4x3"||i==="mat4x3f"||i==="mat4x3h"?console.error(`TODO: Determinant for ${i}`):i!=="mat4x4"&&i!=="mat4x4f"&&i!=="mat4x4h"||console.error(`TODO: Determinant for ${i}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z){let l=0;for(let u=0;u<r.data.length;++u)l+=(r.data[u]-s.data[u])*(r.data[u]-s.data[u]);return new fe(Math.sqrt(l),this.getTypeInfo("f32"))}const i=r,a=s;return new fe(Math.abs(i.value-a.value),r.typeInfo)}_dot(e,n){let r=0;for(let s=0;s<e.length;++s)r+=n[s]*e[s];return r}Dot(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);return r instanceof Z&&s instanceof Z?new fe(this._dot(r.data,s.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,n){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,n){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.exp(i)),r.typeInfo);const s=r;return new fe(Math.exp(s.value),r.typeInfo)}Exp2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.pow(2,i)),r.typeInfo);const s=r;return new fe(Math.pow(2,s.value),r.typeInfo)}ExtractBits(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(i.typeInfo.name!=="u32"&&i.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=s.value,l=i.value;if(r instanceof Z)return new Z(r.data.map(h=>h>>a&(1<<l)-1),r.typeInfo);if(r.typeInfo.name!=="i32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const u=r.value;return new fe(u>>a&(1<<l)-1,this.getTypeInfo("i32"))}FaceForward(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Z&&s instanceof Z&&i instanceof Z){const a=this._dot(s.data,i.data);return new Z(a<0?Array.from(r.data):r.data.map(l=>-l),r.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>this._firstLeadingBit(i)),r.typeInfo);const s=r;return new fe(this._firstLeadingBit(s.value),r.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>this._firstTrailingBit(i)),r.typeInfo);const s=r;return new fe(this._firstTrailingBit(s.value),r.typeInfo)}Floor(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.floor(i)),r.typeInfo);const s=r;return new fe(Math.floor(s.value),r.typeInfo)}Fma(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Z&&s instanceof Z&&i instanceof Z)return r.data.length!==s.data.length||r.data.length!==i.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new Z(r.data.map((h,d)=>h*s.data[d]+i.data[d]),r.typeInfo);const a=r,l=s,u=i;return new fe(a.value*l.value+u.value,a.typeInfo)}Fract(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>i-Math.floor(i)),r.typeInfo);const s=r;return new fe(s.value-Math.floor(s.value),r.typeInfo)}Frexp(e,n){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n),a=this.exec.evalExpression(e.args[3],n);if(i.typeInfo.name!=="u32"&&i.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const l=i.value,u=(1<<a.value)-1<<l,h=~u;if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((b,w)=>b&h|s.data[w]<<l&u),r.typeInfo);const d=r.value,g=s.value;return new fe(d&h|g<<l&u,r.typeInfo)}InverseSqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>1/Math.sqrt(i)),r.typeInfo);const s=r;return new fe(1/Math.sqrt(s.value),r.typeInfo)}Ldexp(e,n){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z){let i=0;return r.data.forEach(a=>{i+=a*a}),new fe(Math.sqrt(i),this.getTypeInfo("f32"))}const s=r;return new fe(Math.abs(s.value),r.typeInfo)}Log(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.log(i)),r.typeInfo);const s=r;return new fe(Math.log(s.value),r.typeInfo)}Log2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.log2(i)),r.typeInfo);const s=r;return new fe(Math.log2(s.value),r.typeInfo)}Max(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((l,u)=>Math.max(l,s.data[u])),r.typeInfo);const i=r,a=s;return new fe(Math.max(i.value,a.value),r.typeInfo)}Min(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((l,u)=>Math.min(l,s.data[u])),r.typeInfo);const i=r,a=s;return new fe(Math.min(i.value,a.value),r.typeInfo)}Mix(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Z&&s instanceof Z&&i instanceof Z)return new Z(r.data.map((u,h)=>r.data[h]*(1-i.data[h])+s.data[h]*i.data[h]),r.typeInfo);const a=s,l=i;return new fe(r.value*(1-l.value)+a.value*l.value,r.typeInfo)}Modf(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((a,l)=>a%s.data[l]),r.typeInfo);const i=s;return new fe(r.value%i.value,r.typeInfo)}Normalize(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z){const s=this.Length(e,n).value;return new Z(r.data.map(i=>i/s),r.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z)return new Z(r.data.map((l,u)=>Math.pow(l,s.data[u])),r.typeInfo);const i=r,a=s;return new fe(Math.pow(i.value,a.value),r.typeInfo)}QuantizeToF16(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof Z?new Z(r.data.map(s=>s),r.typeInfo):new fe(r.value,r.typeInfo)}Radians(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof Z?new Z(r.data.map(s=>s*Math.PI/180),r.typeInfo):new fe(r.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,n){let r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Z&&s instanceof Z){const i=this._dot(r.data,s.data);return new Z(r.data.map((a,l)=>a-2*i*s.data[l]),r.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,n){let r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Z&&s instanceof Z&&i instanceof fe){const a=this._dot(s.data,r.data);return new Z(r.data.map((l,u)=>{const h=1-i.value*i.value*(1-a*a);if(h<0)return 0;const d=Math.sqrt(h);return i.value*l-(i.value*a+d)*s.data[u]}),r.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,n){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.round(i)),r.typeInfo);const s=r;return new fe(Math.round(s.value),r.typeInfo)}Saturate(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.min(Math.max(i,0),1)),r.typeInfo);const s=r;return new fe(Math.min(Math.max(s.value,0),1),r.typeInfo)}Sign(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.sign(i)),r.typeInfo);const s=r;return new fe(Math.sign(s.value),r.typeInfo)}Sin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.sin(i)),r.typeInfo);const s=r;return new fe(Math.sin(s.value),r.typeInfo)}Sinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.sinh(i)),r.typeInfo);const s=r;return new fe(Math.sinh(s.value),r.typeInfo)}_smoothstep(e,n,r){const s=Math.min(Math.max((r-e)/(n-e),0),1);return s*s*(3-2*s)}SmoothStep(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(i instanceof Z&&r instanceof Z&&s instanceof Z)return new Z(i.data.map((h,d)=>this._smoothstep(r.data[d],s.data[d],h)),i.typeInfo);const a=r,l=s,u=i;return new fe(this._smoothstep(a.value,l.value,u.value),i.typeInfo)}Sqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.sqrt(i)),r.typeInfo);const s=r;return new fe(Math.sqrt(s.value),r.typeInfo)}Step(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(s instanceof Z&&r instanceof Z)return new Z(s.data.map((a,l)=>a<r.data[l]?0:1),s.typeInfo);const i=r;return new fe(s.value<i.value?0:1,i.typeInfo)}Tan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.tan(i)),r.typeInfo);const s=r;return new fe(Math.tan(s.value),r.typeInfo)}Tanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.tanh(i)),r.typeInfo);const s=r;return new fe(Math.tanh(s.value),r.typeInfo)}_getTransposeType(e){const n=e.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?e:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?e:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),e)}Transpose(e,n){const r=this.exec.evalExpression(e.args[0],n);if(!(r instanceof mt))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const s=this._getTransposeType(r.typeInfo);if(r.typeInfo.name==="mat2x2"||r.typeInfo.name==="mat2x2f"||r.typeInfo.name==="mat2x2h"){const i=r.data;return new mt([i[0],i[2],i[1],i[3]],s)}if(r.typeInfo.name==="mat2x3"||r.typeInfo.name==="mat2x3f"||r.typeInfo.name==="mat2x3h"){const i=r.data;return new mt([i[0],i[3],i[6],i[1],i[4],i[7]],s)}if(r.typeInfo.name==="mat2x4"||r.typeInfo.name==="mat2x4f"||r.typeInfo.name==="mat2x4h"){const i=r.data;return new mt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13]],s)}if(r.typeInfo.name==="mat3x2"||r.typeInfo.name==="mat3x2f"||r.typeInfo.name==="mat3x2h"){const i=r.data;return new mt([i[0],i[3],i[1],i[4],i[2],i[5]],s)}if(r.typeInfo.name==="mat3x3"||r.typeInfo.name==="mat3x3f"||r.typeInfo.name==="mat3x3h"){const i=r.data;return new mt([i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]],s)}if(r.typeInfo.name==="mat3x4"||r.typeInfo.name==="mat3x4f"||r.typeInfo.name==="mat3x4h"){const i=r.data;return new mt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14]],s)}if(r.typeInfo.name==="mat4x2"||r.typeInfo.name==="mat4x2f"||r.typeInfo.name==="mat4x2h"){const i=r.data;return new mt([i[0],i[4],i[1],i[5],i[2],i[6]],s)}if(r.typeInfo.name==="mat4x3"||r.typeInfo.name==="mat4x3f"||r.typeInfo.name==="mat4x3h"){const i=r.data;return new mt([i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]],s)}if(r.typeInfo.name==="mat4x4"||r.typeInfo.name==="mat4x4f"||r.typeInfo.name==="mat4x4h"){const i=r.data;return new mt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]],s)}return console.error(`Invalid matrix type ${r.typeInfo.name}`),null}Trunc(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Z)return new Z(r.data.map(i=>Math.trunc(i)),r.typeInfo);const s=r;return new fe(Math.trunc(s.value),r.typeInfo)}Dpdx(e,n){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,n){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,n){return console.error("TODO: dpdxFine"),null}Dpdy(e,n){return console.error("TODO: dpdy"),null}DpdyCoarse(e,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,n){return console.error("TODO: dpdyFine"),null}Fwidth(e,n){return console.error("TODO: fwidth"),null}FwidthCoarse(e,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,n){const r=e.args[0],s=e.args.length>1?this.exec.evalExpression(e.args[1],n).value:0;if(r instanceof ls){const i=r.name,a=n.getVariableValue(i);if(a instanceof Bi){if(s<0||s>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const l=a.getMipLevelSize(s),u=a.dimension;return u==="1d"?new fe(l[0],this.getTypeInfo("u32")):u==="3d"?new Z(l,this.getTypeInfo("vec3u")):u==="2d"?new Z(l.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${u} not found. Line ${e.line}`),null)}return console.error(`Texture ${i} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,n){const r=e.args[0],s=this.exec.evalExpression(e.args[1],n),i=e.args.length>2?this.exec.evalExpression(e.args[2],n).value:0;if(!(s instanceof Z)||s.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(r instanceof ls){const a=r.name,l=n.getVariableValue(a);if(l instanceof Bi){const u=Math.floor(s.data[0]),h=Math.floor(s.data[1]);if(u<0||u>=l.width||h<0||h>=l.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const d=l.getPixel(u,h,0,i);return d===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new Z(d,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,n){const r=e.args[0];if(r instanceof ls){const s=r.name,i=n.getVariableValue(s);return i instanceof Bi?new fe(i.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,n){const r=e.args[0];if(r instanceof ls){const s=r.name,i=n.getVariableValue(s);return i instanceof Bi?new fe(i.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,n){const r=e.args[0];if(r instanceof ls){const s=r.name,i=n.getVariableValue(s);return i instanceof Bi?new fe(i.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,n){return console.error("TODO: textureSample"),null}TextureSampleBias(e,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,n){const r=e.args[0],s=this.exec.evalExpression(e.args[1],n),i=e.args.length===4?this.exec.evalExpression(e.args[2],n).value:0,a=e.args.length===4?this.exec.evalExpression(e.args[3],n).data:this.exec.evalExpression(e.args[2],n).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(s instanceof Z)||s.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(r instanceof ls){const l=r.name,u=n.getVariableValue(l);if(u instanceof Bi){const h=u.getMipLevelSize(0),d=Math.floor(s.data[0]),g=Math.floor(s.data[1]);return d<0||d>=h[0]||g<0||g>=h[1]?(console.error(`Texture ${l} out of bounds. Line ${e.line}`),null):(u.setPixel(d,g,0,i,Array.from(a)),null)}return console.error(`Texture ${l} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n);return n.getVariable(s).value.getSubData(this.exec,r.postfix,n)}AtomicStore(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n);return u instanceof fe&&l instanceof fe&&(u.value=l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),null}AtomicAdd(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value+=l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicSub(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value-=l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMax(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=Math.max(u.value,l.value)),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMin(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=Math.min(u.value,l.value)),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicAnd(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=u.value&l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicOr(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=u.value|l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicXor(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=u.value^l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicExchange(e,n){let r=e.args[0];r instanceof Hn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new fe(u.value,u.typeInfo);return u instanceof fe&&l instanceof fe&&(u.value=l.value),i.value instanceof Mn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicCompareExchangeWeak(e,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,n){return null}TextureBarrier(e,n){return null}WorkgroupBarrier(e,n){return null}WorkgroupUniformLoad(e,n){return null}SubgroupAdd(e,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,n){return console.error("TODO: quadSwapY"),null}}const Bb={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Mr={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class Sr extends O${constructor(e,n){var r;super(),this.ast=e??[],this.reflection=new hi,this.reflection.updateAST(this.ast),this.context=(r=n==null?void 0:n.clone())!==null&&r!==void 0?r:new t0,this.builtins=new P$(this),this.typeInfo={bool:this.getTypeInfo(je.bool),i32:this.getTypeInfo(je.i32),u32:this.getTypeInfo(je.u32),f32:this.getTypeInfo(je.f32),f16:this.getTypeInfo(je.f16),vec2f:this.getTypeInfo(me.vec2f),vec2u:this.getTypeInfo(me.vec2u),vec2i:this.getTypeInfo(me.vec2i),vec2h:this.getTypeInfo(me.vec2h),vec3f:this.getTypeInfo(me.vec3f),vec3u:this.getTypeInfo(me.vec3u),vec3i:this.getTypeInfo(me.vec3i),vec3h:this.getTypeInfo(me.vec3h),vec4f:this.getTypeInfo(me.vec4f),vec4u:this.getTypeInfo(me.vec4u),vec4i:this.getTypeInfo(me.vec4i),vec4h:this.getTypeInfo(me.vec4h),mat2x2f:this.getTypeInfo(me.mat2x2f),mat2x3f:this.getTypeInfo(me.mat2x3f),mat2x4f:this.getTypeInfo(me.mat2x4f),mat3x2f:this.getTypeInfo(me.mat3x2f),mat3x3f:this.getTypeInfo(me.mat3x3f),mat3x4f:this.getTypeInfo(me.mat3x4f),mat4x2f:this.getTypeInfo(me.mat4x2f),mat4x3f:this.getTypeInfo(me.mat4x3f),mat4x4f:this.getTypeInfo(me.mat4x4f)}}getVariableValue(e){var n,r;const s=(r=(n=this.context.getVariable(e))===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:null;if(s===null)return null;if(s instanceof fe)return s.value;if(s instanceof Z||s instanceof mt)return Array.from(s.data);if(s instanceof Mn&&s.typeInfo instanceof Zo){if(s.typeInfo.format.name==="u32")return Array.from(new Uint32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="i32")return Array.from(new Int32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="f32")return Array.from(new Float32Array(s.buffer,s.offset,s.typeInfo.count))}return console.error(`Unsupported return variable type ${s.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,n,r,s){const i=this.context.clone();(s=s??{}).constants&&this._setOverrides(s.constants,i),this._execStatements(this.ast,i);const a=i.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const l=n[0],u=n[1],h=n[2],d=this.getTypeInfo("vec3u");i.setVariable("@num_workgroups",new Z(n,d));for(const g in r)for(const b in r[g]){const w=r[g][b];i.variables.forEach(R=>{var A;const C=R.node;if(C!=null&&C.attributes){let M=null,N=null;for(const k of C.attributes)k.name==="binding"?M=k.value:k.name==="group"&&(N=k.value);if(b==M&&g==N)if(w.texture!==void 0&&w.descriptor!==void 0){const k=new Bi(w.texture,this.getTypeInfo(C.type),w.descriptor,(A=w.texture.view)!==null&&A!==void 0?A:null);R.value=k}else w.uniform!==void 0?R.value=new Mn(w.uniform,this.getTypeInfo(C.type)):R.value=new Mn(w,this.getTypeInfo(C.type))}})}for(let g=0;g<h;++g)for(let b=0;b<u;++b)for(let w=0;w<l;++w)i.setVariable("@workgroup_id",new Z([w,b,g],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[w,b,g],i)}execStatement(e,n){if(e instanceof NN)return this.evalExpression(e.value,n);if(e instanceof IN){if(e.condition){const r=this.evalExpression(e.condition,n);if(!(r instanceof fe))throw new Error("Invalid break-if condition");if(!r.value)return null}return Sr._breakObj}if(e instanceof ON)return Sr._continueObj;if(e instanceof Sf)this._let(e,n);else if(e instanceof Vi)this._var(e,n);else if(e instanceof cp)this._const(e,n);else if(e instanceof Vf)this._function(e,n);else{if(e instanceof kN)return this._if(e,n);if(e instanceof CN)return this._switch(e,n);if(e instanceof TN)return this._for(e,n);if(e instanceof SN)return this._while(e,n);if(e instanceof RN)return this._loop(e,n);if(e instanceof _x){const r=n.clone();return r.currentFunctionName=n.currentFunctionName,this._execStatements(e.body,r)}if(e instanceof AN)this._assign(e,n);else if(e instanceof EN)this._increment(e,n);else{if(e instanceof ji)return null;if(e instanceof Yv){const r=e.name;n.getVariable(r)===null&&n.setVariable(r,new fe(0,this.getTypeInfo("u32")))}else if(e instanceof Kv)this._call(e,n);else{if(e instanceof MN||e instanceof Zv)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,n){return e instanceof Fs?this._evalBinaryOp(e,n):e instanceof Jn?this._evalLiteral(e,n):e instanceof ls?this._evalVariable(e,n):e instanceof Qv?this._evalCall(e,n):e instanceof ii?this._evalCreate(e,n):e instanceof PN?this._evalConst(e,n):e instanceof DN?this._evalBitcast(e,n):e instanceof Hn?this._evalUnaryOp(e,n):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var n;if(e instanceof je){const s=this.reflection.getTypeInfo(e);if(s!==null)return s}let r=(n=this.typeInfo[e])!==null&&n!==void 0?n:null;return r!==null||(r=this.reflection.getTypeInfoByName(e)),r}_setOverrides(e,n){for(const r in e){const s=e[r],i=this.reflection.getOverrideInfo(r);i!==null?(i.type===null&&(i.type=this.getTypeInfo("u32")),i.type.name==="u32"||i.type.name==="i32"||i.type.name==="f32"||i.type.name==="f16"?n.setVariable(r,new fe(s,i.type)):i.type.name==="bool"?n.setVariable(r,new fe(s?1:0,i.type)):i.type.name==="vec2"||i.type.name==="vec3"||i.type.name==="vec4"||i.type.name==="vec2f"||i.type.name==="vec3f"||i.type.name==="vec4f"||i.type.name==="vec2i"||i.type.name==="vec3i"||i.type.name==="vec4i"||i.type.name==="vec2u"||i.type.name==="vec3u"||i.type.name==="vec4u"||i.type.name==="vec2h"||i.type.name==="vec3h"||i.type.name==="vec4h"?n.setVariable(r,new Z(s,i.type)):console.error(`Invalid constant type for ${r}`)):console.error(`Override ${r} does not exist in the shader.`)}}_dispatchWorkgroup(e,n,r){const s=[1,1,1];for(const d of e.node.attributes)if(d.name==="workgroup_size"){if(d.value.length>0){const g=r.getVariableValue(d.value[0]);s[0]=g instanceof fe?g.value:parseInt(d.value[0])}if(d.value.length>1){const g=r.getVariableValue(d.value[1]);s[1]=g instanceof fe?g.value:parseInt(d.value[1])}if(d.value.length>2){const g=r.getVariableValue(d.value[2]);s[2]=g instanceof fe?g.value:parseInt(d.value[2])}}const i=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");r.setVariable("@workgroup_size",new Z(s,i));const l=s[0],u=s[1],h=s[2];for(let d=0,g=0;d<h;++d)for(let b=0;b<u;++b)for(let w=0;w<l;++w,++g){const R=[w,b,d],A=[w+n[0]*s[0],b+n[1]*s[1],d+n[2]*s[2]];r.setVariable("@local_invocation_id",new Z(R,i)),r.setVariable("@global_invocation_id",new Z(A,i)),r.setVariable("@local_invocation_index",new fe(g,a)),this._dispatchExec(e,r)}}_dispatchExec(e,n){for(const r of e.node.args)for(const s of r.attributes)if(s.name==="builtin"){const i=`@${s.value}`,a=n.getVariable(i);a!==void 0&&n.variables.set(r.name,a)}this._execStatements(e.node.body,n)}getVariableName(e,n){for(;e instanceof Hn;)e=e.right;return e instanceof ls?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,n){for(const r of e){if(r instanceof Array){const i=n.clone(),a=this._execStatements(r,i);if(a)return a;continue}const s=this.execStatement(r,n);if(s)return s}return null}_call(e,n){const r=n.clone();r.currentFunctionName=e.name;const s=n.getFunction(e.name);if(s){for(let i=0;i<s.node.args.length;++i){const a=s.node.args[i],l=this.evalExpression(e.args[i],r);r.setVariable(a.name,l,a)}this._execStatements(s.node.body,r)}else e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)&&this._evalCreate(e,n)}_increment(e,n){const r=this.getVariableName(e.variable,n),s=n.getVariable(r);s?e.operator==="++"?s.value instanceof fe?s.value.value++:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):e.operator==="--"?s.value instanceof fe?s.value.value--:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${r} not found. Line ${e.line}`)}_getVariableData(e,n){if(e instanceof ls){const r=this.getVariableName(e,n),s=n.getVariable(r);return s===null?(console.error(`Variable ${r} not found. Line ${e.line}`),null):s.value.getSubData(this,e.postfix,n)}if(e instanceof Hn){if(e.operator==="*"){const r=this._getVariableData(e.right,n);return r instanceof Ql?r.reference.getSubData(this,e.postfix,n):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){const r=this._getVariableData(e.right,n);return new Ql(r)}}return null}_assign(e,n){let r=null,s="<var>",i=null;if(e.variable instanceof Hn){const u=this._getVariableData(e.variable,n),h=this.evalExpression(e.value,n),d=e.operator;if(d==="="){if(u instanceof fe||u instanceof Z||u instanceof mt){if(h instanceof fe||h instanceof Z||h instanceof mt&&u.data.length===h.data.length)return void u.data.set(h.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(u instanceof Mn&&h instanceof Mn&&u.buffer.byteLength-u.offset>=h.buffer.byteLength-h.offset)return void(u.buffer.byteLength%4==0?new Uint32Array(u.buffer,u.offset,u.typeInfo.size/4).set(new Uint32Array(h.buffer,h.offset,h.typeInfo.size/4)):new Uint8Array(u.buffer,u.offset,u.typeInfo.size).set(new Uint8Array(h.buffer,h.offset,h.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(d==="+=")return u instanceof fe||u instanceof Z||u instanceof mt?h instanceof fe||h instanceof Z||h instanceof mt?void u.data.set(h.data.map((g,b)=>u.data[b]+g)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(d==="-=")return(u instanceof fe||u instanceof Z||u instanceof mt)&&(h instanceof fe||h instanceof Z||h instanceof mt)?void u.data.set(h.data.map((g,b)=>u.data[b]-g)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof Hn){if(e.variable.operator==="*"){s=this.getVariableName(e.variable.right,n);const u=n.getVariable(s);if(!(u&&u.value instanceof Ql))return void console.error(`Variable ${s} is not a pointer. Line ${e.line}`);r=u.value.reference;let h=e.variable.postfix;if(!h){let d=e.variable.right;for(;d instanceof Hn;){if(d.postfix){h=d.postfix;break}d=d.right}}h&&(r=r.getSubData(this,h,n))}}else{i=e.variable.postfix,s=this.getVariableName(e.variable,n);const u=n.getVariable(s);if(u===null)return void console.error(`Variable ${s} not found. Line ${e.line}`);r=u.value}if(r instanceof Ql&&(r=r.reference),r===null)return void console.error(`Variable ${s} not found. Line ${e.line}`);const a=this.evalExpression(e.value,n),l=e.operator;if(l==="=")if(r instanceof Mn)r.setDataValue(this,a,i,n);else if(i){if(!(r instanceof Z||r instanceof mt))return void console.error(`Variable ${s} is not a vector or matrix. Line ${e.line}`);if(i instanceof Pc){const u=this.evalExpression(i.index,n).value;if(r instanceof Z){if(!(a instanceof fe))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[u]=a.value}else{if(!(r instanceof mt))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const h=this.evalExpression(i.index,n).value;if(h<0)return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(a instanceof Z))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const d=r.typeInfo.getTypeName();if(d==="mat2x2"||d==="mat2x2f"||d==="mat2x2h"){if(!(h<2&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat2x3"||d==="mat2x3f"||d==="mat2x3h"){if(!(h<2&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat2x4"||d==="mat2x4f"||d==="mat2x4h"){if(!(h<2&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat3x2"||d==="mat3x2f"||d==="mat3x2h"){if(!(h<3&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat3x3"||d==="mat3x3f"||d==="mat3x3h"){if(!(h<3&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat3x4"||d==="mat3x4f"||d==="mat3x4h"){if(!(h<3&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat4x2"||d==="mat4x2f"||d==="mat4x2h"){if(!(h<4&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat4x3"||d==="mat4x3f"||d==="mat4x3h"){if(!(h<4&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else{if(d!=="mat4x4"&&d!=="mat4x4f"&&d!=="mat4x4h")return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(h<4&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}}}}}else if(i instanceof Ga){const u=i.value;if(!(r instanceof Z))return void console.error(`Invalid assignment to ${u}. Variable ${s} is not a vector. Line ${e.line}`);if(a instanceof fe){if(u.length>1)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);if(u==="x")r.data[0]=a.value;else if(u==="y"){if(r.data.length<2)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[1]=a.value}else if(u==="z"){if(r.data.length<3)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[2]=a.value}else if(u==="w"){if(r.data.length<4)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[3]=a.value}}else{if(!(a instanceof Z))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(u.length!==a.data.length)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);for(let h=0;h<u.length;++h){const d=u[h];if(d==="x"||d==="r")r.data[0]=a.data[h];else if(d==="y"||d==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[1]=a.data[h]}else if(d==="z"||d==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[2]=a.data[h]}else{if(d!=="w"&&d!=="a")return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[3]=a.data[h]}}}}}else r instanceof fe&&a instanceof fe?r.value=a.value:r instanceof Z&&a instanceof Z||r instanceof mt&&a instanceof mt?r.data.set(a.data):console.error(`Invalid assignment to ${s}. Line ${e.line}`);else{const u=r.getSubData(this,i,n);if(u instanceof Z&&a instanceof fe){const h=u.data,d=a.value;if(l==="+=")for(let g=0;g<h.length;++g)h[g]+=d;else if(l==="-=")for(let g=0;g<h.length;++g)h[g]-=d;else if(l==="*=")for(let g=0;g<h.length;++g)h[g]*=d;else if(l==="/=")for(let g=0;g<h.length;++g)h[g]/=d;else if(l==="%=")for(let g=0;g<h.length;++g)h[g]%=d;else if(l==="&=")for(let g=0;g<h.length;++g)h[g]&=d;else if(l==="|=")for(let g=0;g<h.length;++g)h[g]|=d;else if(l==="^=")for(let g=0;g<h.length;++g)h[g]^=d;else if(l==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d;else if(l===">>=")for(let g=0;g<h.length;++g)h[g]>>=d;else console.error(`Invalid operator ${l}. Line ${e.line}`)}else if(u instanceof Z&&a instanceof Z){const h=u.data,d=a.data;if(h.length!==d.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(l==="+=")for(let g=0;g<h.length;++g)h[g]+=d[g];else if(l==="-=")for(let g=0;g<h.length;++g)h[g]-=d[g];else if(l==="*=")for(let g=0;g<h.length;++g)h[g]*=d[g];else if(l==="/=")for(let g=0;g<h.length;++g)h[g]/=d[g];else if(l==="%=")for(let g=0;g<h.length;++g)h[g]%=d[g];else if(l==="&=")for(let g=0;g<h.length;++g)h[g]&=d[g];else if(l==="|=")for(let g=0;g<h.length;++g)h[g]|=d[g];else if(l==="^=")for(let g=0;g<h.length;++g)h[g]^=d[g];else if(l==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d[g];else if(l===">>=")for(let g=0;g<h.length;++g)h[g]>>=d[g];else console.error(`Invalid operator ${l}. Line ${e.line}`)}else{if(!(u instanceof fe&&a instanceof fe))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);l==="+="?u.value+=a.value:l==="-="?u.value-=a.value:l==="*="?u.value*=a.value:l==="/="?u.value/=a.value:l==="%="?u.value%=a.value:l==="&="?u.value&=a.value:l==="|="?u.value|=a.value:l==="^="?u.value^=a.value:l==="<<="?u.value<<=a.value:l===">>="?u.value>>=a.value:console.error(`Invalid operator ${l}. Line ${e.line}`)}r instanceof Mn&&r.setDataValue(this,u,i,n)}}_function(e,n){const r=new e0(e);n.functions.set(e.name,r)}_const(e,n){let r=null;e.value!==null&&(r=this.evalExpression(e.value,n)),n.createVariable(e.name,r,e)}_let(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Hn||(r=r.clone())}else{const s=e.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||s==="array"){const i=new ii(e.type,[]);r=this._evalCreate(i,n)}}n.createVariable(e.name,r,e)}_var(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Hn||(r=r.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const s=e.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||e.type instanceof Tf||e.type instanceof ji||e.type instanceof me){const i=new ii(e.type,[]);r=this._evalCreate(i,n)}}n.createVariable(e.name,r,e)}_switch(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof fe))return console.error(`Invalid if condition. Line ${e.line}`),null;let s=null;for(const i of e.cases)if(i instanceof BN)for(const a of i.selectors){if(a instanceof hp){s=i;continue}const l=this.evalExpression(a,n);if(!(l instanceof fe))return console.error(`Invalid case selector. Line ${e.line}`),null;if(l.value===r.value)return this._execStatements(i.body,n)}else i instanceof UN&&(s=i);return s?this._execStatements(s.body,n):null}_if(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof fe))return console.error(`Invalid if condition. Line ${e.line}`),null;if(r.value)return this._execStatements(e.body,n);for(const s of e.elseif){const i=this.evalExpression(s.condition,n);if(!(i instanceof fe))return console.error(`Invalid if condition. Line ${e.line}`),null;if(i.value)return this._execStatements(s.body,n)}return e.else?this._execStatements(e.else,n):null}_getScalarValue(e){return e instanceof fe?e.value:(console.error("Expected scalar value.",e),0)}_for(e,n){for(n=n.clone(),this.execStatement(e.init,n);this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r!==null&&r!==Sr._continueObj)return r;this.execStatement(e.increment,n)}return null}_loop(e,n){for(n=n.clone();;){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r===Sr._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,n)===Sr._breakObj)break}else if(r!==null)return r}return null}_while(e,n){for(n=n.clone();this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r!==Sr._continueObj&&r!==null)return r}return null}_evalBitcast(e,n){const r=this.evalExpression(e.value,n),s=e.type;if(r instanceof fe){const i=cE(r.value,r.typeInfo.name,s.name);return new fe(i,this.getTypeInfo(s))}if(r instanceof Z){const i=r.typeInfo.getTypeName();let a="";if(i.endsWith("f"))a="f32";else if(i.endsWith("i"))a="i32";else if(i.endsWith("u"))a="u32";else if(i.endsWith("b"))a="bool";else{if(!i.endsWith("h"))return console.error(`Unknown vector type ${i}. Line ${e.line}`),null;a="f16"}const l=s.getTypeName();let u="";if(l.endsWith("f"))u="f32";else if(l.endsWith("i"))u="i32";else if(l.endsWith("u"))u="u32";else if(l.endsWith("b"))u="bool";else{if(!l.endsWith("h"))return console.error(`Unknown vector type ${u}. Line ${e.line}`),null;u="f16"}const h=function(d,g,b){if(g===b)return d;const w=new Array(d.length);for(let R=0;R<d.length;R++)w[R]=cE(d[R],g,b);return w}(Array.from(r.data),a,u);return new Z(h,this.getTypeInfo(s))}return console.error(`TODO: bitcast for ${r.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,n){return n.getVariableValue(e.name).clone().getSubData(this,e.postfix,n)}_evalCreate(e,n){var r;if(e instanceof ii){if(e.type===null)return xx.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,n)}}const s=e instanceof ii?e.type.name:e.name,i=e instanceof ii?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(i===null)return console.error(`Unknown type ${s}. Line ${e.line}`),null;if(i.size===0)return null;const a=new Mn(new ArrayBuffer(i.size),i,0);if(i instanceof Wo){if(e.args)for(let l=0;l<e.args.length;++l){const u=i.members[l],h=e.args[l],d=this.evalExpression(h,n);a.setData(this,d,u.type,u.offset,n)}}else if(i instanceof Zo){let l=0;if(e.args)for(let u=0;u<e.args.length;++u){const h=e.args[u],d=this.evalExpression(h,n);i.format===null&&(((r=d.typeInfo)===null||r===void 0?void 0:r.name)==="x32"?i.format=this.getTypeInfo("i32"):i.format=d.typeInfo),a.setData(this,d,i.format,l,n),l+=i.stride}}else console.error(`Unknown type "${s}". Line ${e.line}`);return e instanceof ii?a.getSubData(this,e.postfix,n):a}_evalLiteral(e,n){const r=this.getTypeInfo(e.type),s=r.name;return s==="x32"||s==="u32"||s==="f32"||s==="f16"||s==="i32"||s==="bool"?new fe(e.scalarValue,r):s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"?this._callConstructorVec(e,n):s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"?this._callConstructorMatrix(e,n):e.value}_evalVariable(e,n){const r=n.getVariableValue(e.name);return r===null?r:r.getSubData(this,e.postfix,n)}_maxFormatTypeInfo(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const s=Sr._priority.get(n.name);Sr._priority.get(e[r].name)<s&&(n=e[r])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(e,n){const r=this.evalExpression(e.right,n);if(e.operator==="&")return new Ql(r);if(e.operator==="*")return r instanceof Ql?r.reference.getSubData(this,e.postfix,n):(console.error(`Invalid dereference. Line ${e.line}`),null);const s=r instanceof fe?r.value:r instanceof Z?Array.from(r.data):null;switch(e.operator){case"+":{if(Ye(s)){const l=s.map((u,h)=>+u);return new Z(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new fe(+i,a)}case"-":{if(Ye(s)){const l=s.map((u,h)=>-u);return new Z(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new fe(-i,a)}case"!":{if(Ye(s)){const l=s.map((u,h)=>u?0:1);return new Z(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new fe(i?0:1,a)}case"~":{if(Ye(s)){const l=s.map((u,h)=>~u);return new Z(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new fe(~i,a)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,n){const r=this.evalExpression(e.left,n),s=this.evalExpression(e.right,n),i=r instanceof fe?r.value:r instanceof Z||r instanceof mt?Array.from(r.data):null,a=s instanceof fe?s.value:s instanceof Z||s instanceof mt?Array.from(s.data):null;switch(e.operator){case"+":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w+g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b+d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d+b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l+u,h)}case"-":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w-g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b-d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d-b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l-u,h)}case"*":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(r instanceof mt&&s instanceof mt){const b=function(C,M,N,k){if(Mr[M.name]===void 0||Mr[k.name]===void 0)return null;const F=Mr[M.name][0],B=Mr[M.name][1],P=Mr[k.name][0];if(F!==Mr[k.name][1])return null;const X=new Array(P*B);for(let Y=0;Y<B;Y++)for(let G=0;G<P;G++){let K=0;for(let Q=0;Q<F;Q++)K+=C[Q*B+Y]*N[G*F+Q];X[Y*P+G]=K}return X}(d,r.typeInfo,g,s.typeInfo);if(b===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const w=Mr[s.typeInfo.name][0],R=Mr[r.typeInfo.name][1],A=this.getTypeInfo(`mat${w}x${R}f`);return new mt(b,A)}if(r instanceof mt&&s instanceof Z){const b=function(w,R,A,C){if(Mr[R.name]===void 0||Bb[C.name]===void 0)return null;const M=Mr[R.name][0],N=Mr[R.name][1];if(M!==A.length)return null;const k=new Array(N);for(let F=0;F<N;F++){let B=0;for(let P=0;P<M;P++)B+=w[P*N+F]*A[P];k[F]=B}return k}(d,r.typeInfo,g,s.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Z(b,s.typeInfo)}if(r instanceof Z&&s instanceof mt){const b=function(w,R,A,C){if(Bb[R.name]===void 0||Mr[C.name]===void 0)return null;const M=Mr[C.name][0],N=Mr[C.name][1];if(N!==w.length)return null;const k=[];for(let F=0;F<M;F++){let B=0;for(let P=0;P<N;P++)B+=w[P]*A[P*M+F];k[F]=B}return k}(d,r.typeInfo,g,s.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Z(b,r.typeInfo)}{if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w*g[R]);return new Z(b,r.typeInfo)}}if(Ye(i)){const d=a,g=i.map((b,w)=>b*d);return r instanceof mt?new mt(g,r.typeInfo):new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d*b);return s instanceof mt?new mt(g,s.typeInfo):new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l*u,h)}case"%":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w%g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b%d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d%b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l%u,h)}case"/":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w/g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b/d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d/b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l/u,h)}case"&":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w&g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b&d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d&b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l&u,h)}case"|":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w|g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b|d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d|b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l|u,h)}case"^":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w^g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b^d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d^b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l^u,h)}case"<<":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w<<g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b<<d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d<<b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l<<u,h)}case">>":{if(Ye(i)&&Ye(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w>>g[R]);return new Z(b,r.typeInfo)}if(Ye(i)){const d=a,g=i.map((b,w)=>b>>d);return new Z(g,r.typeInfo)}if(Ye(a)){const d=i,g=a.map((b,w)=>d>>b);return new Z(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new fe(l>>u,h)}case">":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d>u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h>l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l>h?1:0);return new Z(u,s.typeInfo)}return new fe(i>a?1:0,this.getTypeInfo("bool"));case"<":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d<u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h<l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l<h?1:0);return new Z(u,s.typeInfo)}return new fe(i<a?1:0,this.getTypeInfo("bool"));case"==":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d===u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h==l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l==h?1:0);return new Z(u,s.typeInfo)}return new fe(i===a?1:0,this.getTypeInfo("bool"));case"!=":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d!==u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h!==l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l!==h?1:0);return new Z(u,s.typeInfo)}return new fe(i!==a?1:0,this.getTypeInfo("bool"));case">=":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d>=u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h>=l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l>=h?1:0);return new Z(u,s.typeInfo)}return new fe(i>=a?1:0,this.getTypeInfo("bool"));case"<=":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d<=u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h<=l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l<=h?1:0);return new Z(u,s.typeInfo)}return new fe(i<=a?1:0,this.getTypeInfo("bool"));case"&&":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d&&u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h&&l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l&&h?1:0);return new Z(u,s.typeInfo)}return new fe(i&&a?1:0,this.getTypeInfo("bool"));case"||":if(Ye(i)&&Ye(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d||u[g]?1:0);return new Z(h,r.typeInfo)}if(Ye(i)){const l=a,u=i.map((h,d)=>h||l?1:0);return new Z(u,r.typeInfo)}if(Ye(a)){const l=i,u=a.map((h,d)=>l||h?1:0);return new Z(u,s.typeInfo)}return new fe(i||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,n){if(e.cachedReturnValue!==null)return e.cachedReturnValue;const r=n.clone();r.currentFunctionName=e.name;const s=n.getFunction(e.name);if(!s)return e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)?this._evalCreate(e,n):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let i=0;i<s.node.args.length;++i){const a=s.node.args[i],l=this.evalExpression(e.args[i],r);r.createVariable(a.name,l,a)}return this._execStatements(s.node.body,r)}_callBuiltinFunction(e,n){switch(e.name){case"all":return this.builtins.All(e,n);case"any":return this.builtins.Any(e,n);case"select":return this.builtins.Select(e,n);case"arrayLength":return this.builtins.ArrayLength(e,n);case"abs":return this.builtins.Abs(e,n);case"acos":return this.builtins.Acos(e,n);case"acosh":return this.builtins.Acosh(e,n);case"asin":return this.builtins.Asin(e,n);case"asinh":return this.builtins.Asinh(e,n);case"atan":return this.builtins.Atan(e,n);case"atanh":return this.builtins.Atanh(e,n);case"atan2":return this.builtins.Atan2(e,n);case"ceil":return this.builtins.Ceil(e,n);case"clamp":return this.builtins.Clamp(e,n);case"cos":return this.builtins.Cos(e,n);case"cosh":return this.builtins.Cosh(e,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,n);case"countOneBits":return this.builtins.CountOneBits(e,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,n);case"cross":return this.builtins.Cross(e,n);case"degrees":return this.builtins.Degrees(e,n);case"determinant":return this.builtins.Determinant(e,n);case"distance":return this.builtins.Distance(e,n);case"dot":return this.builtins.Dot(e,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,n);case"exp":return this.builtins.Exp(e,n);case"exp2":return this.builtins.Exp2(e,n);case"extractBits":return this.builtins.ExtractBits(e,n);case"faceForward":return this.builtins.FaceForward(e,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,n);case"floor":return this.builtins.Floor(e,n);case"fma":return this.builtins.Fma(e,n);case"fract":return this.builtins.Fract(e,n);case"frexp":return this.builtins.Frexp(e,n);case"insertBits":return this.builtins.InsertBits(e,n);case"inverseSqrt":return this.builtins.InverseSqrt(e,n);case"ldexp":return this.builtins.Ldexp(e,n);case"length":return this.builtins.Length(e,n);case"log":return this.builtins.Log(e,n);case"log2":return this.builtins.Log2(e,n);case"max":return this.builtins.Max(e,n);case"min":return this.builtins.Min(e,n);case"mix":return this.builtins.Mix(e,n);case"modf":return this.builtins.Modf(e,n);case"normalize":return this.builtins.Normalize(e,n);case"pow":return this.builtins.Pow(e,n);case"quantizeToF16":return this.builtins.QuantizeToF16(e,n);case"radians":return this.builtins.Radians(e,n);case"reflect":return this.builtins.Reflect(e,n);case"refract":return this.builtins.Refract(e,n);case"reverseBits":return this.builtins.ReverseBits(e,n);case"round":return this.builtins.Round(e,n);case"saturate":return this.builtins.Saturate(e,n);case"sign":return this.builtins.Sign(e,n);case"sin":return this.builtins.Sin(e,n);case"sinh":return this.builtins.Sinh(e,n);case"smoothStep":return this.builtins.SmoothStep(e,n);case"sqrt":return this.builtins.Sqrt(e,n);case"step":return this.builtins.Step(e,n);case"tan":return this.builtins.Tan(e,n);case"tanh":return this.builtins.Tanh(e,n);case"transpose":return this.builtins.Transpose(e,n);case"trunc":return this.builtins.Trunc(e,n);case"dpdx":return this.builtins.Dpdx(e,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,n);case"dpdxFine":return this.builtins.DpdxFine(e,n);case"dpdy":return this.builtins.Dpdy(e,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,n);case"dpdyFine":return this.builtins.DpdyFine(e,n);case"fwidth":return this.builtins.Fwidth(e,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,n);case"fwidthFine":return this.builtins.FwidthFine(e,n);case"textureDimensions":return this.builtins.TextureDimensions(e,n);case"textureGather":return this.builtins.TextureGather(e,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,n);case"textureLoad":return this.builtins.TextureLoad(e,n);case"textureNumLayers":return this.builtins.TextureNumLayers(e,n);case"textureNumLevels":return this.builtins.TextureNumLevels(e,n);case"textureNumSamples":return this.builtins.TextureNumSamples(e,n);case"textureSample":return this.builtins.TextureSample(e,n);case"textureSampleBias":return this.builtins.TextureSampleBias(e,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,n);case"textureStore":return this.builtins.TextureStore(e,n);case"atomicLoad":return this.builtins.AtomicLoad(e,n);case"atomicStore":return this.builtins.AtomicStore(e,n);case"atomicAdd":return this.builtins.AtomicAdd(e,n);case"atomicSub":return this.builtins.AtomicSub(e,n);case"atomicMax":return this.builtins.AtomicMax(e,n);case"atomicMin":return this.builtins.AtomicMin(e,n);case"atomicAnd":return this.builtins.AtomicAnd(e,n);case"atomicOr":return this.builtins.AtomicOr(e,n);case"atomicXor":return this.builtins.AtomicXor(e,n);case"atomicExchange":return this.builtins.AtomicExchange(e,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,n);case"pack4xI8":return this.builtins.Pack4xI8(e,n);case"pack4xU8":return this.builtins.Pack4xU8(e,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,n);case"pack2x16float":return this.builtins.Pack2x16float(e,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,n);case"unpack4xI8":return this.builtins.Unpack4xI8(e,n);case"unpack4xU8":return this.builtins.Unpack4xU8(e,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,n);case"unpack2x16float":return this.builtins.Unpack2x16float(e,n);case"storageBarrier":return this.builtins.StorageBarrier(e,n);case"textureBarrier":return this.builtins.TextureBarrier(e,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,n);case"subgroupAdd":return this.builtins.SubgroupAdd(e,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,n);case"subgroupAll":return this.builtins.SubgroupAll(e,n);case"subgroupAnd":return this.builtins.SubgroupAnd(e,n);case"subgroupAny":return this.builtins.SubgroupAny(e,n);case"subgroupBallot":return this.builtins.SubgroupBallot(e,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,n);case"subgroupElect":return this.builtins.SubgroupElect(e,n);case"subgroupMax":return this.builtins.SubgroupMax(e,n);case"subgroupMin":return this.builtins.SubgroupMin(e,n);case"subgroupMul":return this.builtins.SubgroupMul(e,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,n);case"subgroupOr":return this.builtins.SubgroupOr(e,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,n);case"subgroupXor":return this.builtins.SubgroupXor(e,n);case"quadBroadcast":return this.builtins.QuadBroadcast(e,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,n);case"quadSwapX":return this.builtins.QuadSwapX(e,n);case"quadSwapY":return this.builtins.QuadSwapY(e,n)}const r=n.getFunction(e.name);if(r){const s=n.clone();for(let i=0;i<r.node.args.length;++i){const a=r.node.args[i],l=this.evalExpression(e.args[i],s);s.setVariable(a.name,l,a)}return this._execStatements(r.node.body,s)}return null}_callConstructorValue(e,n){if(!e.args||e.args.length===0)return new fe(0,this.getTypeInfo(e.type));const r=this.evalExpression(e.args[0],n);return r.typeInfo=this.getTypeInfo(e.type),r.getSubData(this,e.postfix,n).clone()}_callConstructorVec(e,n){const r=this.getTypeInfo(e.type),s=e.type.getTypeName(),i=Bb[s];if(i===void 0)return console.error(`Invalid vec constructor ${s}. Line ${e.line}`),null;const a=[];if(e instanceof Jn)if(e.isVector){const l=e.vectorValue;for(const u of l)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const l of e.args){const u=this.evalExpression(l,n);if(u instanceof Z){const h=u.data;for(let d=0;d<h.length;++d){let g=h[d];a.push(g)}}else if(u instanceof fe){let h=u.value;a.push(h)}}if(e.type instanceof me&&e.type.format===null&&(e.type.format=me.f32),a.length===0){const l=new Array(i).fill(0);return new Z(l,r).getSubData(this,e.postfix,n)}if(a.length===1)for(;a.length<i;)a.push(a[0]);return a.length<i?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new Z(a.length>i?a.slice(0,i):a,r).getSubData(this,e.postfix,n)}_callConstructorMatrix(e,n){const r=this.getTypeInfo(e.type),s=e.type.getTypeName(),i=Mr[s];if(i===void 0)return console.error(`Invalid matrix constructor ${s}. Line ${e.line}`),null;const a=[];if(e instanceof Jn)if(e.isVector){const l=e.vectorValue;for(const u of l)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const l of e.args){const u=this.evalExpression(l,n);u instanceof Z?a.push(...u.data):u instanceof fe?a.push(u.value):u instanceof mt&&a.push(...u.data)}if(r instanceof Qa&&r.format===null&&(r.format=this.getTypeInfo("f32")),a.length===0){const l=new Array(i[2]).fill(0);return new mt(l,r).getSubData(this,e.postfix,n)}return a.length!==i[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new mt(a,r).getSubData(this,e.postfix,n)}}Sr._breakObj=new Rs(new ws("BREAK",null),null),Sr._continueObj=new Rs(new ws("CONTINUE",null),null),Sr._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class D${constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class F${constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new D$,this._exec=new Sr,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(const r of this._deferArrayCountEval){const s=r.arrayType,i=r.countNode;if(i instanceof ls){const a=i.name,l=this._context.constants.get(a);if(l)try{const u=l.constEvaluate(this._exec);s.count=u}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const r of n)r.search(s=>{s instanceof aE||s instanceof fp?s.type=this._forwardType(s.type):s instanceof Tf?s.format=this._forwardType(s.format):s instanceof Vi||s instanceof Sf||s instanceof cp?s.type=this._forwardType(s.type):s instanceof Vf?s.returnType=this._forwardType(s.returnType):s instanceof oE&&(s.type=this._forwardType(s.type))});return n}_forwardType(e){if(e instanceof iE){const n=this._getType(e.name);if(n)return n}else e instanceof fp?e.type=this._forwardType(e.type):e instanceof Tf&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){const n=new E$(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,n){return e.line=n??this._currentLine,e}_error(e,n){return{token:e,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==W.eof}_match(e){if(e instanceof de)return!!this._check(e)&&(this._advance(),!0);for(let n=0,r=e.length;n<r;++n){const s=e[n];if(this._check(s))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const r=n.type;let s=!1;for(const i of e){if(r===i)return!0;i===W.tokens.name&&(s=!0)}if(s){const i=W.tokens.name.rule.exec(n.lexeme);if(i&&i.index==0&&i[0]==n.lexeme)return!0}return!1}if(n.type===e)return!0;if(e===W.tokens.name){const r=W.tokens.name.rule.exec(n.lexeme);return r&&r.index==0&&r[0]==n.lexeme}return!1}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(W.tokens.semicolon)&&!this._isAtEnd(););if(this._match(W.keywords.alias)){const n=this._type_alias();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.diagnostic)){const n=this._diagnostic();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.requires)){const n=this._requires_directive();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.enable)){const n=this._enable_directive();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}const e=this._attribute();if(this._check(W.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(W.keywords.fn))return null;const e=this._currentLine,n=this._consume(W.tokens.ident,"Expected function name.").toString();this._consume(W.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(W.tokens.paren_right))do{if(this._check(W.tokens.paren_right))break;const l=this._attribute(),u=this._consume(W.tokens.name,"Expected argument name.").toString();this._consume(W.tokens.colon,"Expected ':' for argument type.");const h=this._attribute(),d=this._type_decl();d!=null&&(d.attributes=h,r.push(this._updateNode(new oE(u,d,l))))}while(this._match(W.tokens.comma));this._consume(W.tokens.paren_right,"Expected ')' after function arguments.");let s=null;if(this._match(W.tokens.arrow)){const l=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=l)}const i=this._compound_statement(),a=this._currentLine;return this._updateNode(new Vf(n,r,s,i,e,a),e)}_compound_statement(){const e=[];for(this._consume(W.tokens.brace_left,"Expected '{' for block.");!this._check(W.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(W.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(W.tokens.semicolon)&&!this._isAtEnd(););if(this._check(W.tokens.attr)&&this._attribute(),this._check(W.keywords.if))return this._if_statement();if(this._check(W.keywords.switch))return this._switch_statement();if(this._check(W.keywords.loop))return this._loop_statement();if(this._check(W.keywords.for))return this._for_statement();if(this._check(W.keywords.while))return this._while_statement();if(this._check(W.keywords.continuing))return this._continuing_statement();if(this._check(W.keywords.static_assert))return this._static_assert_statement();if(this._check(W.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(W.keywords.return))e=this._return_statement();else if(this._check([W.keywords.var,W.keywords.let,W.keywords.const]))e=this._variable_statement();else if(this._match(W.keywords.discard))e=this._updateNode(new w$);else if(this._match(W.keywords.break)){const n=this._updateNode(new IN);if(this._currentLoop.length>0){const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n,this._check(W.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(W.keywords.continue)){const n=this._updateNode(new ON);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(W.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(W.keywords.static_assert))return null;const e=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new _$(n),e)}_while_statement(){if(!this._match(W.keywords.while))return null;const e=this._updateNode(new SN(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(W.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(W.keywords.continuing))return null;const n=this._currentLine,r=this._compound_statement();return this._updateNode(new _x(r,e),n)}_for_statement(){if(!this._match(W.keywords.for))return null;this._consume(W.tokens.paren_left,"Expected '('.");const e=this._updateNode(new TN(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(W.tokens.semicolon)?null:this._for_init(),this._consume(W.tokens.semicolon,"Expected ';'."),e.condition=this._check(W.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(W.tokens.semicolon,"Expected ';'."),e.increment=this._check(W.tokens.paren_right)?null:this._for_increment(),this._consume(W.tokens.paren_right,"Expected ')'."),this._check(W.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(W.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(W.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new Vi(e.name,e.type,e.storage,e.access,n),e.line)}if(this._match(W.keywords.let)){const e=this._currentLine,n=this._consume(W.tokens.name,"Expected name for let.").toString();let r=null;if(this._match(W.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(W.tokens.equal,"Expected '=' for let.");const s=this._short_circuit_or_expression();return this._updateNode(new Sf(n,r,null,null,s),e)}if(this._match(W.keywords.const)){const e=this._currentLine,n=this._consume(W.tokens.name,"Expected name for const.").toString();let r=null;if(this._match(W.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(W.tokens.equal,"Expected '=' for const.");const s=this._short_circuit_or_expression();return r===null&&s instanceof Jn&&(r=s.type),this._updateNode(new cp(n,r,null,null,s),e)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(W.increment_operators))return this._current=e,null;const r=this._consume(W.increment_operators,"Expected increment operator");return this._updateNode(new EN(r.type===W.tokens.plus_plus?oc.increment:oc.decrement,n))}_assignment_statement(){let e=null;const n=this._currentLine;if(this._check(W.tokens.brace_right))return null;let r=this._match(W.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;const s=this._consume(W.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return this._updateNode(new AN(gf.parse(s.lexeme),e,i),n)}_func_call_statement(){if(!this._check(W.tokens.ident))return null;const e=this._currentLine,n=this._current,r=this._consume(W.tokens.ident,"Expected function name."),s=this._argument_expression_list();return s===null?(this._current=n,null):this._updateNode(new Kv(r.lexeme,s),e)}_loop_statement(){if(!this._match(W.keywords.loop))return null;this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new RN([],null));this._currentLoop.push(e);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let r of n)e.body.push(r);else e.body.push(n);if(n instanceof _x){e.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(W.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(W.keywords.switch))return null;const e=this._updateNode(new CN(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(W.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let n=!1;for(;this._check([W.keywords.default,W.keywords.case]);){if(this._match(W.keywords.case)){const r=this._case_selectors();for(const i of r)if(i instanceof hp){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(W.tokens.colon),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Exected '{' for switch case.");const s=this._case_body();this._consume(W.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new BN(r,s)))}if(this._match(W.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(W.tokens.colon),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(W.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new UN(r)))}}return e}_case_selectors(){const e=[];for(this._match(W.keywords.default)?e.push(this._updateNode(new hp)):e.push(this._shift_expression());this._match(W.tokens.comma);)this._match(W.keywords.default)?e.push(this._updateNode(new hp)):e.push(this._shift_expression());return e}_case_body(){if(this._match(W.keywords.fallthrough))return this._consume(W.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(W.keywords.if))return null;const e=this._currentLine,n=this._optional_paren_expression();this._check(W.tokens.attr)&&this._attribute();const r=this._compound_statement();let s=[];this._match_elseif()&&(this._check(W.tokens.attr)&&this._attribute(),s=this._elseif_statement(s));let i=null;return this._match(W.keywords.else)&&(this._check(W.tokens.attr)&&this._attribute(),i=this._compound_statement()),this._updateNode(new kN(n,r,s,i),e)}_match_elseif(){return this._tokens[this._current].type===W.keywords.else&&this._tokens[this._current+1].type===W.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(this._updateNode(new S$(n,r))),this._match_elseif()&&(this._check(W.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(W.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new NN(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(W.tokens.or_or);)e=this._updateNode(new Fs(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(W.tokens.and_and);)e=this._updateNode(new Fs(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(W.tokens.or);)e=this._updateNode(new Fs(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(W.tokens.xor);)e=this._updateNode(new Fs(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(W.tokens.and);)e=this._updateNode(new Fs(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([W.tokens.equal_equal,W.tokens.not_equal])?this._updateNode(new Fs(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([W.tokens.less_than,W.tokens.greater_than,W.tokens.less_than_equal,W.tokens.greater_than_equal]);)e=this._updateNode(new Fs(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([W.tokens.shift_left,W.tokens.shift_right]);)e=this._updateNode(new Fs(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([W.tokens.plus,W.tokens.minus]);)e=this._updateNode(new Fs(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([W.tokens.star,W.tokens.forward_slash,W.tokens.modulo]);)e=this._updateNode(new Fs(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([W.tokens.minus,W.tokens.bang,W.tokens.tilde,W.tokens.star,W.tokens.and])?this._updateNode(new Hn(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(W.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(W.tokens.bracket_right,"Expected ']'.");const n=this._updateNode(new Pc(e)),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(W.tokens.period)){const e=this._consume(W.tokens.name,"Expected member name."),n=this._postfix_expression(),r=this._updateNode(new Ga(e.lexeme));return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const n=this._getStruct(e);if(n!==null)return n;switch(e){case"void":return je.void;case"bool":return je.bool;case"i32":return je.i32;case"u32":return je.u32;case"f32":return je.f32;case"f16":return je.f16;case"vec2f":return me.vec2f;case"vec3f":return me.vec3f;case"vec4f":return me.vec4f;case"vec2i":return me.vec2i;case"vec3i":return me.vec3i;case"vec4i":return me.vec4i;case"vec2u":return me.vec2u;case"vec3u":return me.vec3u;case"vec4u":return me.vec4u;case"vec2h":return me.vec2h;case"vec3h":return me.vec3h;case"vec4h":return me.vec4h;case"mat2x2f":return me.mat2x2f;case"mat2x3f":return me.mat2x3f;case"mat2x4f":return me.mat2x4f;case"mat3x2f":return me.mat3x2f;case"mat3x3f":return me.mat3x3f;case"mat3x4f":return me.mat3x4f;case"mat4x2f":return me.mat4x2f;case"mat4x3f":return me.mat4x3f;case"mat4x4f":return me.mat4x4f;case"mat2x2h":return me.mat2x2h;case"mat2x3h":return me.mat2x3h;case"mat2x4h":return me.mat2x4h;case"mat3x2h":return me.mat3x2h;case"mat3x3h":return me.mat3x3h;case"mat3x4h":return me.mat3x4h;case"mat4x2h":return me.mat4x2h;case"mat4x3h":return me.mat4x3h;case"mat4x4h":return me.mat4x4h;case"mat2x2i":return me.mat2x2i;case"mat2x3i":return me.mat2x3i;case"mat2x4i":return me.mat2x4i;case"mat3x2i":return me.mat3x2i;case"mat3x3i":return me.mat3x3i;case"mat3x4i":return me.mat3x4i;case"mat4x2i":return me.mat4x2i;case"mat4x3i":return me.mat4x3i;case"mat4x4i":return me.mat4x4i;case"mat2x2u":return me.mat2x2u;case"mat2x3u":return me.mat2x3u;case"mat2x4u":return me.mat2x4u;case"mat3x2u":return me.mat3x2u;case"mat3x3u":return me.mat3x3u;case"mat3x4u":return me.mat3x4u;case"mat4x2u":return me.mat4x2u;case"mat4x3u":return me.mat4x3u;case"mat4x4u":return me.mat4x4u}return null}_validateTypeRange(e,n){if(n.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(W.tokens.ident)){const r=this._previous().toString();if(this._check(W.tokens.paren_left)){const s=this._argument_expression_list(),i=this._getType(r);return i!==null?this._updateNode(new ii(i,s)):this._updateNode(new Qv(r,s))}if(this._context.constants.has(r)){const s=this._context.constants.get(r);return this._updateNode(new PN(r,s.value))}return this._updateNode(new ls(r))}if(this._match(W.tokens.int_literal)){const r=this._previous().toString();let s=r.endsWith("i")||r.endsWith("i")?je.i32:r.endsWith("u")||r.endsWith("U")?je.u32:je.x32;const i=parseInt(r);return this._validateTypeRange(i,s),this._updateNode(new Jn(new fe(i,this._exec.getTypeInfo(s)),s))}if(this._match(W.tokens.uint_literal)){const r=parseInt(this._previous().toString());return this._validateTypeRange(r,je.u32),this._updateNode(new Jn(new fe(r,this._exec.getTypeInfo(je.u32)),je.u32))}if(this._match([W.tokens.decimal_float_literal,W.tokens.hex_float_literal])){let r=this._previous().toString(),s=r.endsWith("h");s&&(r=r.substring(0,r.length-1));const i=parseFloat(r);this._validateTypeRange(i,s?je.f16:je.f32);const a=s?je.f16:je.f32;return this._updateNode(new Jn(new fe(i,this._exec.getTypeInfo(a)),a))}if(this._match([W.keywords.true,W.keywords.false])){let r=this._previous().toString()===W.keywords.true.rule;return this._updateNode(new Jn(new fe(r?1:0,this._exec.getTypeInfo(je.bool)),je.bool))}if(this._check(W.tokens.paren_left))return this._paren_expression();if(this._match(W.keywords.bitcast)){this._consume(W.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(W.tokens.greater_than,"Expected '>'.");const s=this._paren_expression();return this._updateNode(new DN(r,s))}const e=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new ii(e,n))}_argument_expression_list(){if(!this._match(W.tokens.paren_left))return null;const e=[];do{if(this._check(W.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(W.tokens.comma));return this._consume(W.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(W.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(W.tokens.paren_right),e}_paren_expression(){this._consume(W.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(W.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(W.keywords.struct))return null;const e=this._currentLine,n=this._consume(W.tokens.ident,"Expected name for struct.").toString();this._consume(W.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(W.tokens.brace_right);){const a=this._attribute(),l=this._consume(W.tokens.name,"Expected variable name.").toString();this._consume(W.tokens.colon,"Expected ':' for struct member type.");const u=this._attribute(),h=this._type_decl();h!=null&&(h.attributes=u),this._check(W.tokens.brace_right)?this._match(W.tokens.comma):this._consume(W.tokens.comma,"Expected ',' for struct member."),r.push(this._updateNode(new aE(l,h,a)))}this._consume(W.tokens.brace_right,"Expected '}' after struct body.");const s=this._currentLine,i=this._updateNode(new ji(n,r,e,s),e);return this._context.structs.set(n,i),i}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(W.tokens.equal)){const n=this._const_expression();e.value=n}if(e.type!==null&&e.value instanceof Jn){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof Jn&&(e.type=e.value.type.name==="x32"?je.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(W.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(W.keywords.const))return null;const n=this._consume(W.tokens.name,"Expected variable name"),r=this._currentLine;let s=null;if(this._match(W.tokens.colon)){const u=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=u)}let i=null;this._consume(W.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let u=[je.f32],h=a.constEvaluate(this._exec,u);h instanceof fe&&this._validateTypeRange(h.value,u[0]),u[0]instanceof me&&u[0].format===null&&h.typeInfo instanceof Qa&&h.typeInfo.format!==null&&(h.typeInfo.format.name==="f16"?u[0].format=je.f16:h.typeInfo.format.name==="f32"?u[0].format=je.f32:h.typeInfo.format.name==="i32"?u[0].format=je.i32:h.typeInfo.format.name==="u32"?u[0].format=je.u32:h.typeInfo.format.name==="bool"?u[0].format=je.bool:console.error(`TODO: impelement template format type ${h.typeInfo.format.name}`)),i=this._updateNode(new Jn(h,u[0])),this._exec.context.setVariable(n.toString(),h)}catch{i=a}if(s!==null&&i instanceof Jn){if(i.type.name!=="x32"&&s.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${s.name}. Line:${this._currentLine}`);i.type=s,i.isScalar&&this._validateTypeRange(i.scalarValue,i.type)}else s===null&&i instanceof Jn&&(s=(e=i==null?void 0:i.type)!==null&&e!==void 0?e:je.f32,s===je.x32&&(s=je.i32));const l=this._updateNode(new cp(n.toString(),s,"","",i),r);return this._context.constants.set(l.name,l),l}_global_let_decl(){if(!this._match(W.keywords.let))return null;const e=this._currentLine,n=this._consume(W.tokens.name,"Expected variable name");let r=null;if(this._match(W.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}let s=null;if(this._match(W.tokens.equal)&&(s=this._const_expression()),r!==null&&s instanceof Jn){if(s.type.name!=="x32"&&r.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${r.name}. Line:${this._currentLine}`);s.type=r}else r===null&&s instanceof Jn&&(r=s.type.name==="x32"?je.i32:s.type);return s instanceof Jn&&s.isScalar&&this._validateTypeRange(s.scalarValue,r),this._updateNode(new Sf(n.toString(),r,"","",s),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(W.keywords.var))return null;const e=this._currentLine;let n="",r="";this._match(W.tokens.less_than)&&(n=this._consume(W.storage_class,"Expected storage_class.").toString(),this._match(W.tokens.comma)&&(r=this._consume(W.access_mode,"Expected access_mode.").toString()),this._consume(W.tokens.greater_than,"Expected '>'."));const s=this._consume(W.tokens.name,"Expected variable name");let i=null;if(this._match(W.tokens.colon)){const a=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=a)}return this._updateNode(new Vi(s.toString(),i,n,r,null),e)}_override_decl(){if(!this._match(W.keywords.override))return null;const e=this._consume(W.tokens.name,"Expected variable name");let n=null;if(this._match(W.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return this._updateNode(new Yv(e.toString(),n,null))}_diagnostic(){this._consume(W.tokens.paren_left,"Expected '('");const e=this._consume(W.tokens.ident,"Expected severity control name.");this._consume(W.tokens.comma,"Expected ','");let n=this._consume(W.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(W.tokens.period)&&(n+=`.${this._consume(W.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(W.tokens.paren_right,"Expected ')'"),this._updateNode(new MN(e.toString(),n))}_enable_directive(){const e=this._consume(W.tokens.ident,"identity expected.");return this._updateNode(new x$(e.toString()))}_requires_directive(){const e=[this._consume(W.tokens.ident,"identity expected.").toString()];for(;this._match(W.tokens.comma);){const n=this._consume(W.tokens.ident,"identity expected.");e.push(n.toString())}return this._updateNode(new v$(e))}_type_alias(){const e=this._consume(W.tokens.ident,"identity expected.");this._consume(W.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=this._updateNode(new Zv(e.toString(),n));return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([W.tokens.ident,...W.texel_format,W.keywords.bool,W.keywords.f32,W.keywords.i32,W.keywords.u32])){const r=this._advance().toString();if(this._context.structs.has(r))return this._context.structs.get(r);if(this._context.aliases.has(r))return this._context.aliases.get(r).type;if(!this._getType(r)){const s=this._updateNode(new iE(r));return this._forwardTypeCount++,s}return this._updateNode(new je(r))}let e=this._texture_sampler_types();if(e)return e;if(this._check(W.template_types)){let r=this._advance().toString(),s=null,i=null;return this._match(W.tokens.less_than)&&(s=this._type_decl(),i=null,this._match(W.tokens.comma)&&(i=this._consume(W.access_mode,"Expected access_mode for pointer").toString()),this._consume(W.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new me(r,s,i))}if(this._match(W.keywords.ptr)){let r=this._previous().toString();this._consume(W.tokens.less_than,"Expected '<' for pointer.");const s=this._consume(W.storage_class,"Expected storage_class for pointer");this._consume(W.tokens.comma,"Expected ',' for pointer.");const i=this._type_decl();let a=null;return this._match(W.tokens.comma)&&(a=this._consume(W.access_mode,"Expected access_mode for pointer").toString()),this._consume(W.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new fp(r,s.toString(),i,a))}const n=this._attribute();if(this._match(W.keywords.array)){let r=null,s=-1;const i=this._previous();let a=null;if(this._match(W.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let u="";if(this._match(W.tokens.comma)){a=this._shift_expression();try{u=a.constEvaluate(this._exec).toString(),a=null}catch{u="1"}}this._consume(W.tokens.greater_than,"Expected '>' for array."),s=u?parseInt(u):0}const l=this._updateNode(new Tf(i.toString(),n,r,s));return a&&this._deferArrayCountEval.push({arrayType:l,countNode:a}),l}return null}_texture_sampler_types(){if(this._match(W.sampler_type))return this._updateNode(new mf(this._previous().toString(),null,null));if(this._match(W.depth_texture_type))return this._updateNode(new mf(this._previous().toString(),null,null));if(this._match(W.sampled_texture_type)||this._match(W.multisampled_texture_type)){const e=this._previous();this._consume(W.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(W.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new mf(e.toString(),n,null))}if(this._match(W.storage_texture_type)){const e=this._previous();this._consume(W.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(W.texel_format,"Invalid texel format.").toString();this._consume(W.tokens.comma,"Expected ',' after texel format.");const r=this._consume(W.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(W.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new mf(e.toString(),n,r))}return null}_attribute(){let e=[];for(;this._match(W.tokens.attr);){const n=this._consume(W.attribute_name,"Expected attribute name"),r=this._updateNode(new LN(n.toString(),null));if(this._match(W.tokens.paren_left)){if(r.value=this._consume(W.literal_or_ident,"Expected attribute value").toString(),this._check(W.tokens.comma)){this._advance();do{const s=this._consume(W.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(s)}while(this._match(W.tokens.comma))}this._consume(W.tokens.paren_right,"Expected ')'")}e.push(r)}return e.length==0?null:e}}class j$ extends hi{constructor(e){super(),e&&this.update(e)}update(e){const n=new F$().parse(e);this.updateAST(n)}}function B$(t){var i;const e={attributes:[],bindings:[]};let n;try{n=U$(t)}catch(a){return He.error(a.message)(),e}for(const a of n.uniforms){const l=[];for(const u of((i=a.type)==null?void 0:i.members)||[])l.push({name:u.name,type:uE(u.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:l})}for(const a of n.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of n.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const r=n.entry.vertex[0],s=(r==null?void 0:r.inputs.length)||0;for(let a=0;a<s;a++){const l=r.inputs[a];if(l.locationType==="location"){const u=uE(l.type);e.attributes.push({name:l.name,location:Number(l.location),type:u})}}return e}function uE(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function U$(t){try{return new j$(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const L$={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...L$}};const Ss=globalThis.mathgl.config;function z$(t,{precision:e=Ss.precision}={}){return t=V$(t),`${parseFloat(t.toPrecision(e))}`}function Dc(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qo(t,e,n){return H$(t,r=>Math.max(e,Math.min(n,r)))}function qp(t,e,n){return Dc(t)?t.map((r,s)=>qp(r,e[s],n)):n*e+(1-n)*t}function $f(t,e,n){const r=Ss.EPSILON;try{if(t===e)return!0;if(Dc(t)&&Dc(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!$f(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Ss.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Ss.EPSILON=r}}function V$(t){return Math.round(t/Ss.EPSILON)*Ss.EPSILON}function $$(t){return t.clone?t.clone():new Array(t.length)}function H$(t,e,n){if(Dc(t)){const r=t;n=n||$$(r);for(let s=0;s<n.length&&s<r.length;++s){const i=typeof t=="number"?t:t[s];n[s]=e(i,s,n)}return n}return e(t)}class zN extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Dc(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ss)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+z$(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!$f(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let s=0;s<this.ELEMENTS;++s){const i=e[s],a=typeof n=="number"?n:n[s];this[s]=i+r*(a-i)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Ss.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function W$(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function os(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Ub(t,e,n=""){if(Ss.debug&&!W$(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function fE(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class q$ extends zN{get x(){return this[0]}set x(e){this[0]=os(e)}get y(){return this[1]}set y(e){this[1]=os(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-e[r];n+=s*s}return os(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return os(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return fE(e>=0&&e<this.ELEMENTS,"index is out of range"),os(this[e])}setComponent(e,n){return fE(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}const dp=1e-6;let Fc=typeof Float32Array<"u"?Float32Array:Array;function X$(){const t=new Fc(2);return Fc!=Float32Array&&(t[0]=0,t[1]=0),t}function hE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Y$(t,e){return t[0]=-e[0],t[1]=-e[1],t}function VN(t,e,n,r){const s=e[0],i=e[1];return t[0]=s+r*(n[0]-s),t[1]=i+r*(n[1]-i),t}function K$(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[4]*s+n[12],t[1]=n[1]*r+n[5]*s+n[13],t}(function(){const t=X$();return function(e,n,r,s,i,a){let l,u;for(n||(n=2),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],i(t,t,a),e[l]=t[0],e[l+1]=t[1];return e}})();function Z$(t,e,n){const r=e[0],s=e[1],i=n[3]*r+n[7]*s||1;return t[0]=(n[0]*r+n[4]*s)/i,t[1]=(n[1]*r+n[5]*s)/i,t}function $N(t,e,n){const r=e[0],s=e[1],i=e[2],a=n[3]*r+n[7]*s+n[11]*i||1;return t[0]=(n[0]*r+n[4]*s+n[8]*i)/a,t[1]=(n[1]*r+n[5]*s+n[9]*i)/a,t[2]=(n[2]*r+n[6]*s+n[10]*i)/a,t}function Q$(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s,t[1]=n[1]*r+n[3]*s,t[2]=e[2],t}function G$(){const t=new Fc(3);return Fc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function J$(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function e9(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function t9(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function n9(t,e,n){const r=e[0],s=e[1],i=e[2],a=n[0],l=n[1],u=n[2];return t[0]=s*u-i*l,t[1]=i*a-r*u,t[2]=r*l-s*a,t}function HN(t,e,n){const r=e[0],s=e[1],i=e[2];let a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/a,t}function r9(t,e,n){const r=e[0],s=e[1],i=e[2];return t[0]=r*n[0]+s*n[3]+i*n[6],t[1]=r*n[1]+s*n[4]+i*n[7],t[2]=r*n[2]+s*n[5]+i*n[8],t}function s9(t,e,n){const r=n[0],s=n[1],i=n[2],a=n[3],l=e[0],u=e[1],h=e[2];let d=s*h-i*u,g=i*l-r*h,b=r*u-s*l,w=s*b-i*g,R=i*d-r*b,A=r*g-s*d;const C=a*2;return d*=C,g*=C,b*=C,w*=2,R*=2,A*=2,t[0]=l+d+w,t[1]=u+g+R,t[2]=h+b+A,t}function i9(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0],i[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),i[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function o9(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),i[1]=s[1],i[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function a9(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),i[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),i[2]=s[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function l9(t,e){const n=t[0],r=t[1],s=t[2],i=e[0],a=e[1],l=e[2],u=Math.sqrt((n*n+r*r+s*s)*(i*i+a*a+l*l)),h=u&&t9(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}const c9=J$;(function(){const t=G$();return function(e,n,r,s,i,a){let l,u;for(n||(n=3),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],i(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();const Lb=[0,0,0];let $d;class mi extends q${static get ZERO(){return $d||($d=new mi(0,0,0),Object.freeze($d)),$d}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Dc(e)?this.copy(e):(Ss.debug&&(os(e),os(n),os(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Ss.debug&&(os(e.x),os(e.y),os(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=os(e)}angle(e){return l9(this,e)}cross(e){return n9(this,this,e),this.check()}rotateX({radians:e,origin:n=Lb}){return i9(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Lb}){return o9(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Lb}){return a9(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return HN(this,this,e),this.check()}transformAsVector(e){return $N(this,this,e),this.check()}transformByMatrix3(e){return r9(this,this,e),this.check()}transformByMatrix2(e){return Q$(this,this,e),this.check()}transformByQuaternion(e){return s9(this,this,e),this.check()}}let u9=class extends zN{toString(){let e="[";if(Ss.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=os(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[r+s];return n}setColumn(e,n){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=n[s];return this}};function f9(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h9(t,e){if(t===e){const n=e[1],r=e[2],s=e[3],i=e[6],a=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=s,t[13]=a,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function vx(t,e){const n=e[0],r=e[1],s=e[2],i=e[3],a=e[4],l=e[5],u=e[6],h=e[7],d=e[8],g=e[9],b=e[10],w=e[11],R=e[12],A=e[13],C=e[14],M=e[15],N=n*l-r*a,k=n*u-s*a,F=n*h-i*a,B=r*u-s*l,P=r*h-i*l,X=s*h-i*u,Y=d*A-g*R,G=d*C-b*R,K=d*M-w*R,Q=g*C-b*A,ie=g*M-w*A,xe=b*M-w*C;let oe=N*xe-k*ie+F*Q+B*K-P*G+X*Y;return oe?(oe=1/oe,t[0]=(l*xe-u*ie+h*Q)*oe,t[1]=(s*ie-r*xe-i*Q)*oe,t[2]=(A*X-C*P+M*B)*oe,t[3]=(b*P-g*X-w*B)*oe,t[4]=(u*K-a*xe-h*G)*oe,t[5]=(n*xe-s*K+i*G)*oe,t[6]=(C*F-R*X-M*k)*oe,t[7]=(d*X-b*F+w*k)*oe,t[8]=(a*ie-l*K+h*Y)*oe,t[9]=(r*K-n*ie-i*Y)*oe,t[10]=(R*P-A*F+M*N)*oe,t[11]=(g*F-d*P-w*N)*oe,t[12]=(l*G-a*Q-u*Y)*oe,t[13]=(n*Q-r*G+s*Y)*oe,t[14]=(A*k-R*B-C*N)*oe,t[15]=(d*B-g*k+b*N)*oe,t):null}function d9(t){const e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],g=t[10],b=t[11],w=t[12],R=t[13],A=t[14],C=t[15],M=e*a-n*i,N=e*l-r*i,k=n*l-r*a,F=h*R-d*w,B=h*A-g*w,P=d*A-g*R,X=e*P-n*B+r*F,Y=i*P-a*B+l*F,G=h*k-d*N+g*M,K=w*k-R*N+A*M;return u*X-s*Y+C*G-b*K}function za(t,e,n){const r=e[0],s=e[1],i=e[2],a=e[3],l=e[4],u=e[5],h=e[6],d=e[7],g=e[8],b=e[9],w=e[10],R=e[11],A=e[12],C=e[13],M=e[14],N=e[15];let k=n[0],F=n[1],B=n[2],P=n[3];return t[0]=k*r+F*l+B*g+P*A,t[1]=k*s+F*u+B*b+P*C,t[2]=k*i+F*h+B*w+P*M,t[3]=k*a+F*d+B*R+P*N,k=n[4],F=n[5],B=n[6],P=n[7],t[4]=k*r+F*l+B*g+P*A,t[5]=k*s+F*u+B*b+P*C,t[6]=k*i+F*h+B*w+P*M,t[7]=k*a+F*d+B*R+P*N,k=n[8],F=n[9],B=n[10],P=n[11],t[8]=k*r+F*l+B*g+P*A,t[9]=k*s+F*u+B*b+P*C,t[10]=k*i+F*h+B*w+P*M,t[11]=k*a+F*d+B*R+P*N,k=n[12],F=n[13],B=n[14],P=n[15],t[12]=k*r+F*l+B*g+P*A,t[13]=k*s+F*u+B*b+P*C,t[14]=k*i+F*h+B*w+P*M,t[15]=k*a+F*d+B*R+P*N,t}function Xp(t,e,n){const r=n[0],s=n[1],i=n[2];let a,l,u,h,d,g,b,w,R,A,C,M;return e===t?(t[12]=e[0]*r+e[4]*s+e[8]*i+e[12],t[13]=e[1]*r+e[5]*s+e[9]*i+e[13],t[14]=e[2]*r+e[6]*s+e[10]*i+e[14],t[15]=e[3]*r+e[7]*s+e[11]*i+e[15]):(a=e[0],l=e[1],u=e[2],h=e[3],d=e[4],g=e[5],b=e[6],w=e[7],R=e[8],A=e[9],C=e[10],M=e[11],t[0]=a,t[1]=l,t[2]=u,t[3]=h,t[4]=d,t[5]=g,t[6]=b,t[7]=w,t[8]=R,t[9]=A,t[10]=C,t[11]=M,t[12]=a*r+d*s+R*i+e[12],t[13]=l*r+g*s+A*i+e[13],t[14]=u*r+b*s+C*i+e[14],t[15]=h*r+w*s+M*i+e[15]),t}function n0(t,e,n){const r=n[0],s=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p9(t,e,n,r){let s=r[0],i=r[1],a=r[2],l=Math.sqrt(s*s+i*i+a*a),u,h,d,g,b,w,R,A,C,M,N,k,F,B,P,X,Y,G,K,Q,ie,xe,oe,Re;return l<dp?null:(l=1/l,s*=l,i*=l,a*=l,h=Math.sin(n),u=Math.cos(n),d=1-u,g=e[0],b=e[1],w=e[2],R=e[3],A=e[4],C=e[5],M=e[6],N=e[7],k=e[8],F=e[9],B=e[10],P=e[11],X=s*s*d+u,Y=i*s*d+a*h,G=a*s*d-i*h,K=s*i*d-a*h,Q=i*i*d+u,ie=a*i*d+s*h,xe=s*a*d+i*h,oe=i*a*d-s*h,Re=a*a*d+u,t[0]=g*X+A*Y+k*G,t[1]=b*X+C*Y+F*G,t[2]=w*X+M*Y+B*G,t[3]=R*X+N*Y+P*G,t[4]=g*K+A*Q+k*ie,t[5]=b*K+C*Q+F*ie,t[6]=w*K+M*Q+B*ie,t[7]=R*K+N*Q+P*ie,t[8]=g*xe+A*oe+k*Re,t[9]=b*xe+C*oe+F*Re,t[10]=w*xe+M*oe+B*Re,t[11]=R*xe+N*oe+P*Re,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function WN(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*s+h*r,t[5]=a*s+d*r,t[6]=l*s+g*r,t[7]=u*s+b*r,t[8]=h*s-i*r,t[9]=d*s-a*r,t[10]=g*s-l*r,t[11]=b*s-u*r,t}function g9(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[0],a=e[1],l=e[2],u=e[3],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s-h*r,t[1]=a*s-d*r,t[2]=l*s-g*r,t[3]=u*s-b*r,t[8]=i*r+h*s,t[9]=a*r+d*s,t[10]=l*r+g*s,t[11]=u*r+b*s,t}function qN(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],d=e[5],g=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s+h*r,t[1]=a*s+d*r,t[2]=l*s+g*r,t[3]=u*s+b*r,t[4]=h*s-i*r,t[5]=d*s-a*r,t[6]=g*s-l*r,t[7]=b*s-u*r,t}function m9(t,e){const n=e[0],r=e[1],s=e[2],i=e[3],a=n+n,l=r+r,u=s+s,h=n*a,d=r*a,g=r*l,b=s*a,w=s*l,R=s*u,A=i*a,C=i*l,M=i*u;return t[0]=1-g-R,t[1]=d+M,t[2]=b-C,t[3]=0,t[4]=d-M,t[5]=1-h-R,t[6]=w+A,t[7]=0,t[8]=b+C,t[9]=w-A,t[10]=1-h-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y9(t,e,n,r,s,i,a){const l=1/(n-e),u=1/(s-r),h=1/(i-a);return t[0]=i*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(s+r)*u,t[10]=(a+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*h,t[15]=0,t}function b9(t,e,n,r,s){const i=1/Math.tan(e/2);if(t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0){const a=1/(r-s);t[10]=(s+r)*a,t[14]=2*s*r*a}else t[10]=-1,t[14]=-2*r;return t}const _9=b9;function x9(t,e,n,r,s,i,a){const l=1/(e-n),u=1/(r-s),h=1/(i-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*l,t[13]=(s+r)*u,t[14]=(a+i)*h,t[15]=1,t}const v9=x9;function w9(t,e,n,r){let s,i,a,l,u,h,d,g,b,w;const R=e[0],A=e[1],C=e[2],M=r[0],N=r[1],k=r[2],F=n[0],B=n[1],P=n[2];return Math.abs(R-F)<dp&&Math.abs(A-B)<dp&&Math.abs(C-P)<dp?f9(t):(g=R-F,b=A-B,w=C-P,s=1/Math.sqrt(g*g+b*b+w*w),g*=s,b*=s,w*=s,i=N*w-k*b,a=k*g-M*w,l=M*b-N*g,s=Math.sqrt(i*i+a*a+l*l),s?(s=1/s,i*=s,a*=s,l*=s):(i=0,a=0,l=0),u=b*l-w*a,h=w*i-g*l,d=g*a-b*i,s=Math.sqrt(u*u+h*h+d*d),s?(s=1/s,u*=s,h*=s,d*=s):(u=0,h=0,d=0),t[0]=i,t[1]=u,t[2]=g,t[3]=0,t[4]=a,t[5]=h,t[6]=b,t[7]=0,t[8]=l,t[9]=d,t[10]=w,t[11]=0,t[12]=-(i*R+a*A+l*C),t[13]=-(u*R+h*A+d*C),t[14]=-(g*R+b*A+w*C),t[15]=1,t)}function S9(){const t=new Fc(4);return Fc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function T9(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function ah(t,e,n){const r=e[0],s=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*a,t}(function(){const t=S9();return function(e,n,r,s,i,a){let l,u;for(n||(n=4),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],i(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();var wx;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(wx||(wx={}));const E9=45*Math.PI/180,A9=1,zb=.1,Vb=500,R9=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class yi extends u9{static get IDENTITY(){return k9()}static get ZERO(){return C9()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return wx}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,s,i,a,l,u,h,d,g,b,w,R,A,C){return this[0]=e,this[1]=n,this[2]=r,this[3]=s,this[4]=i,this[5]=a,this[6]=l,this[7]=u,this[8]=h,this[9]=d,this[10]=g,this[11]=b,this[12]=w,this[13]=R,this[14]=A,this[15]=C,this.check()}setRowMajor(e,n,r,s,i,a,l,u,h,d,g,b,w,R,A,C){return this[0]=e,this[1]=i,this[2]=h,this[3]=w,this[4]=n,this[5]=a,this[6]=d,this[7]=R,this[8]=r,this[9]=l,this[10]=g,this[11]=A,this[12]=s,this[13]=u,this[14]=b,this[15]=C,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(R9)}fromObject(e){return this.check()}fromQuaternion(e){return m9(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:s,top:i,near:a=zb,far:l=Vb}=e;return l===1/0?N9(this,n,r,s,i,a):y9(this,n,r,s,i,a,l),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:s=[0,1,0]}=e;return w9(this,n,r,s),this.check()}ortho(e){const{left:n,right:r,bottom:s,top:i,near:a=zb,far:l=Vb}=e;return v9(this,n,r,s,i,a,l),this.check()}orthographic(e){const{fovy:n=E9,aspect:r=A9,focalDistance:s=1,near:i=zb,far:a=Vb}=e;dE(n);const l=n/2,u=s*Math.tan(l),h=u*r;return this.ortho({left:-h,right:h,bottom:-u,top:u,near:i,far:a})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:s=.1,far:i=500}=e;return dE(n),_9(this,n,r,s,i),this.check()}determinant(){return d9(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*s,e[5]=this[5]*i,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*s,e[9]=this[9]*i,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=this[4]*s,e[4]=this[5]*i,e[5]=this[6]*a,e[6]=this[8]*s,e[7]=this[9]*i,e[8]=this[10]*a,e}transpose(){return h9(this,this),this.check()}invert(){return vx(this,this),this.check()}multiplyLeft(e){return za(this,e,this),this.check()}multiplyRight(e){return za(this,this,e),this.check()}rotateX(e){return WN(this,this,e),this.check()}rotateY(e){return g9(this,this,e),this.check()}rotateZ(e){return qN(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return p9(this,this,e,n),this.check()}scale(e){return n0(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Xp(this,this,e),this.check()}transform(e,n){return e.length===4?(n=ah(n||[-0,-0,-0,-0],e,this),Ub(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let s;switch(r){case 2:s=K$(n||[-0,-0],e,this);break;case 3:s=HN(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ub(s,e.length),s}transformAsVector(e,n){let r;switch(e.length){case 2:r=Z$(n||[-0,-0],e,this);break;case 3:r=$N(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ub(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Hd,Wd;function C9(){return Hd||(Hd=new yi([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Hd)),Hd}function k9(){return Wd||(Wd=new yi,Object.freeze(Wd)),Wd}function dE(t){if(t>Math.PI*2)throw Error("expected radians")}function N9(t,e,n,r,s,i){const a=2*i/(n-e),l=2*i/(s-r),u=(n+e)/(n-e),h=(s+r)/(s-r),d=-1,g=-1,b=-2*i;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=g,t[12]=0,t[13]=0,t[14]=b,t[15]=0,t}function XN(t,e=[],n=0){const r=Math.fround(t),s=t-r;return e[n]=r,e[n+1]=s,e}function M9(t){return t-Math.fround(t)}function I9(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const s=n*4+r;XN(t[r*4+n],e,s*2)}return e}const O9=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,P9={name:"fp32",vs:O9},D9=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,F9={ONE:1},j9={name:"fp64arithmetic",vs:D9,defaultUniforms:F9,uniformTypes:{ONE:"f32"},fp64ify:XN,fp64LowPart:M9,fp64ifyMatrix4:I9},B9=[0,1,1,1],U9=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,L9=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,pE={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:B9},vs:U9,fs:L9,getUniforms:z9};function z9(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const r=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=r}if(t.highlightColor){const r=Array.from(t.highlightColor,s=>s/255);Number.isFinite(r[3])||(r[3]=1),n.highlightColor=r}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}const gE=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,V9={name:"layer",vs:gE,fs:gE,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},$9=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,YN="#define SMOOTH_EDGE_RADIUS 0.5",H9=`${YN}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,W9=`${YN}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,KN={name:"geometry",source:$9,vs:H9,fs:W9},q9=25;var qn;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(qn||(qn={}));var er;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(er||(er={}));var _t;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(_t||(_t={}));const X9="compute",Y9="auto",Sx="manipulation",pp="none",Tx="pan-x",Ex="pan-y";function K9(t){if(t.includes(pp))return pp;const e=t.includes(Tx),n=t.includes(Ex);return e&&n?pp:e||n?e?Tx:Ex:t.includes(Sx)?Sx:Y9}class Z9{constructor(e,n){this.actions="",this.manager=e,this.set(n)}set(e){e===X9&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const n of this.manager.recognizers)n.options.enable&&(e=e.concat(n.getTouchAction()));return K9(e.join(" "))}}function Yp(t){return t.trim().split(/\s+/g)}function $b(t,e,n){if(t)for(const r of Yp(e))t.addEventListener(r,n,!1)}function Hb(t,e,n){if(t)for(const r of Yp(e))t.removeEventListener(r,n,!1)}function mE(t){return(t.ownerDocument||t).defaultView}function Q9(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function ZN(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let n=0,r=0,s=0;for(;s<e;)n+=t[s].clientX,r+=t[s].clientY,s++;return{x:Math.round(n/e),y:Math.round(r/e)}}function yE(t){const e=[];let n=0;for(;n<t.pointers.length;)e[n]={clientX:Math.round(t.pointers[n].clientX),clientY:Math.round(t.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:e,center:ZN(e),deltaX:t.deltaX,deltaY:t.deltaY}}function QN(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function bE(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function G9(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)*180/Math.PI}function _E(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.atan2(r,n)*180/Math.PI}function GN(t,e){return t===e?er.None:Math.abs(t)>=Math.abs(e)?t<0?er.Left:er.Right:e<0?er.Up:er.Down}function J9(t,e){const n=e.center;let r=t.offsetDelta,s=t.prevDelta;const i=t.prevInput;return(e.eventType===qn.Start||(i==null?void 0:i.eventType)===qn.End)&&(s=t.prevDelta={x:(i==null?void 0:i.deltaX)||0,y:(i==null?void 0:i.deltaY)||0},r=t.offsetDelta={x:n.x,y:n.y}),{deltaX:s.x+(n.x-r.x),deltaY:s.y+(n.y-r.y)}}function JN(t,e,n){return{x:e/t||0,y:n/t||0}}function e7(t,e){return bE(e[0],e[1])/bE(t[0],t[1])}function t7(t,e){return _E(e[1],e[0])-_E(t[1],t[0])}function n7(t,e){const n=t.lastInterval||e,r=e.timeStamp-n.timeStamp;let s,i,a,l;if(e.eventType!==qn.Cancel&&(r>q9||n.velocity===void 0)){const u=e.deltaX-n.deltaX,h=e.deltaY-n.deltaY,d=JN(r,u,h);i=d.x,a=d.y,s=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,l=GN(u,h),t.lastInterval=e}else s=n.velocity,i=n.velocityX,a=n.velocityY,l=n.direction;e.velocity=s,e.velocityX=i,e.velocityY=a,e.direction=l}function r7(t,e){const{session:n}=t,{pointers:r}=e,{length:s}=r;n.firstInput||(n.firstInput=yE(e)),s>1&&!n.firstMultiple?n.firstMultiple=yE(e):s===1&&(n.firstMultiple=!1);const{firstInput:i,firstMultiple:a}=n,l=a?a.center:i.center,u=e.center=ZN(r);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=G9(l,u),e.distance=QN(l,u);const{deltaX:h,deltaY:d}=J9(n,e);e.deltaX=h,e.deltaY=d,e.offsetDirection=GN(e.deltaX,e.deltaY);const g=JN(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=g.x,e.overallVelocityY=g.y,e.overallVelocity=Math.abs(g.x)>Math.abs(g.y)?g.x:g.y,e.scale=a?e7(a.pointers,r):1,e.rotation=a?t7(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;let b=t.element;return Q9(e.srcEvent.target,b)&&(b=e.srcEvent.target),e.target=b,n7(n,e),e}function s7(t,e,n){const r=n.pointers.length,s=n.changedPointers.length,i=e&qn.Start&&r-s===0,a=e&(qn.End|qn.Cancel)&&r-s===0;n.isFirst=!!i,n.isFinal=!!a,i&&(t.session={}),n.eventType=e;const l=r7(t,n);t.emit("hammer.input",l),t.recognize(l),t.session.prevInput=l}let i7=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,n){s7(this.manager,e,n)}init(){$b(this.element,this.evEl,this.domHandler),$b(this.target,this.evTarget,this.domHandler),$b(mE(this.element),this.evWin,this.domHandler)}destroy(){Hb(this.element,this.evEl,this.domHandler),Hb(this.target,this.evTarget,this.domHandler),Hb(mE(this.element),this.evWin,this.domHandler)}};const o7={pointerdown:qn.Start,pointermove:qn.Move,pointerup:qn.End,pointercancel:qn.Cancel,pointerout:qn.Cancel},a7="pointerdown",l7="pointermove pointerup pointercancel";class c7 extends i7{constructor(e){super(e),this.evEl=a7,this.evWin=l7,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:n}=this;let r=!1;const s=o7[e.type],i=e.pointerType,a=i==="touch";let l=n.findIndex(u=>u.pointerId===e.pointerId);s&qn.Start&&(e.buttons||a)?l<0&&(n.push(e),l=n.length-1):s&(qn.End|qn.Cancel)&&(r=!0),!(l<0)&&(n[l]=e,this.callback(s,{pointers:n,changedPointers:[e],eventType:s,pointerType:i,srcEvent:e}),r&&n.splice(l,1))}}const u7=["","webkit","Moz","MS","ms","o"];function f7(t,e){const n=e[0].toUpperCase()+e.slice(1);for(const r of u7){const s=r?r+n:e;if(s in t)return s}}const h7=1,xE=2,vE={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class d7{constructor(e,n){this.options={...vE,...n,cssProps:{...vE.cssProps,...n.cssProps},inputTarget:n.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new c7(this),this.touchAction=new Z9(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?xE:h7}recognize(e){const{session:n}=this;if(n.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let r;const{recognizers:s}=this;let{curRecognizer:i}=n;(!i||i&&i.state&_t.Recognized)&&(i=n.curRecognizer=null);let a=0;for(;a<s.length;)r=s[a],n.stopped!==xE&&(!i||r===i||r.canRecognizeWith(i))?r.recognize(e):r.reset(),!i&&r.state&(_t.Began|_t.Changed|_t.Ended)&&(i=n.curRecognizer=r),a++}get(e){const{recognizers:n}=this;for(let r=0;r<n.length;r++)if(n[r].options.event===e)return n[r];return null}add(e){if(Array.isArray(e)){for(const r of e)this.add(r);return this}const n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const r of e)this.remove(r);return this}const n=typeof e=="string"?this.get(e):e;if(n){const{recognizers:r}=this,s=r.indexOf(n);s!==-1&&(r.splice(s,1),this.touchAction.update())}return this}on(e,n){if(!e||!n)return;const{handlers:r}=this;for(const s of Yp(e))r[s]=r[s]||[],r[s].push(n)}off(e,n){if(!e)return;const{handlers:r}=this;for(const s of Yp(e))n?r[s]&&r[s].splice(r[s].indexOf(n),1):delete r[s]}emit(e,n){const r=this.handlers[e]&&this.handlers[e].slice();if(!r||!r.length)return;const s=n;s.type=e,s.preventDefault=function(){n.srcEvent.preventDefault()};let i=0;for(;i<r.length;)r[i](s),i++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:n}=this;if(n){for(const[r,s]of Object.entries(this.options.cssProps)){const i=f7(n.style,r);e?(this.oldCssProps[i]=n.style[i],n.style[i]=s):n.style[i]=this.oldCssProps[i]||""}e||(this.oldCssProps={})}}}let p7=1;function g7(){return p7++}function wE(t){return t&_t.Cancelled?"cancel":t&_t.Ended?"end":t&_t.Changed?"move":t&_t.Began?"start":""}class eM{constructor(e){this.options=e,this.id=g7(),this.state=_t.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const s of e)this.recognizeWith(s);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{simultaneous:r}=this;return r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const r of e)this.dropRecognizeWith(r);return this}let n;return typeof e=="string"?n=this.manager.get(e):n=e,n&&delete this.simultaneous[n.id],this}requireFailure(e){if(Array.isArray(e)){for(const s of e)this.requireFailure(s);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{requireFail:r}=this;return r.indexOf(n)===-1&&(r.push(n),n.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const r of e)this.dropRequireFailure(r);return this}let n;if(typeof e=="string"?n=this.manager.get(e):n=e,n){const r=this.requireFail.indexOf(n);r>-1&&this.requireFail.splice(r,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:n}=this;n<_t.Ended&&this.manager.emit(this.options.event+wE(n),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),n>=_t.Ended&&this.manager.emit(this.options.event+wE(n),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=_t.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(_t.Failed|_t.Possible)))return!1;e++}return!0}recognize(e){const n={...e};if(!this.options.enable){this.reset(),this.state=_t.Failed;return}this.state&(_t.Recognized|_t.Cancelled|_t.Failed)&&(this.state=_t.Possible),this.state=this.process(n),this.state&(_t.Began|_t.Changed|_t.Ended|_t.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class tM extends eM{attrTest(e){const n=this.options.pointers;return n===0||e.pointers.length===n}process(e){const{state:n}=this,{eventType:r}=e,s=n&(_t.Began|_t.Changed),i=this.attrTest(e);return s&&(r&qn.Cancel||!i)?n|_t.Cancelled:s||i?r&qn.End?n|_t.Ended:n&_t.Began?n|_t.Changed:_t.Began:_t.Failed}}class SE extends eM{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[Sx]}process(e){const{options:n}=this,r=e.pointers.length===n.pointers,s=e.distance<n.threshold,i=e.deltaTime<n.time;if(this.reset(),e.eventType&qn.Start&&this.count===0)return this.failTimeout();if(s&&i&&r){if(e.eventType!==qn.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<n.interval:!0,l=!this.pCenter||QN(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!l||!a?this.count=1:this.count+=1,this._input=e,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=_t.Recognized,this.tryEmit(this._input)},n.interval),_t.Began):_t.Recognized}return _t.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=_t.Failed},this.options.interval),_t.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===_t.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const m7=["","start","move","end","cancel","up","down","left","right"];class TE extends tM{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:er.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,n=[];return e&er.Horizontal&&n.push(Ex),e&er.Vertical&&n.push(Tx),n}getEventNames(){return m7.map(e=>this.options.event+e)}directionTest(e){const{options:n}=this;let r=!0,{distance:s}=e,{direction:i}=e;const a=e.deltaX,l=e.deltaY;return i&n.direction||(n.direction&er.Horizontal?(i=a===0?er.None:a<0?er.Left:er.Right,r=a!==this.pX,s=Math.abs(e.deltaX)):(i=l===0?er.None:l<0?er.Up:er.Down,r=l!==this.pY,s=Math.abs(e.deltaY))),e.direction=i,r&&s>n.threshold&&!!(i&n.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&_t.Began)||!(this.state&_t.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const n=er[e.direction].toLowerCase();n&&(e.additionalEvent=this.options.event+n),super.emit(e)}}const y7=["","start","move","end","cancel","in","out"];class b7 extends tM{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[pp]}getEventNames(){return y7.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&_t.Began))}emit(e){if(e.scale!==1){const n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}super.emit(e)}}class Bg{constructor(e,n,r){this.element=e,this.callback=n,this.options=r}}const _7=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",x7=_7.indexOf("firefox")!==-1,EE=4.000244140625,v7=40,w7=.25;class S7 extends Bg{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=s=>{if(!this.options.enable)return;let i=s.deltaY;globalThis.WheelEvent&&(x7&&s.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(i/=globalThis.devicePixelRatio),s.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(i*=v7)),i!==0&&i%EE===0&&(i=Math.floor(i/EE)),s.shiftKey&&i&&(i=i*w7),this.callback({type:"wheel",center:{x:s.clientX,y:s.clientY},delta:-i,srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,n){e==="wheel"&&(this.options.enable=n)}}const AE=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class T7 extends Bg{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=i=>{this.handleOverEvent(i),this.handleOutEvent(i),this.handleEnterEvent(i),this.handleLeaveEvent(i),this.handleMoveEvent(i)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,AE.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){AE.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){switch(e){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const RE=["keydown","keyup"];class E7 extends Bg{constructor(e,n,r){super(e,n,{enable:!0,tabIndex:0,...r}),this.handleEvent=s=>{const i=s.target||s.srcElement;i.tagName==="INPUT"&&i.type==="text"||i.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:"keydown",srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:"keyup",srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",RE.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){RE.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e==="keydown"&&(this.enableDownEvent=n),e==="keyup"&&(this.enableUpEvent=n)}}class A7 extends Bg{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e==="contextmenu"&&(this.options.enable=n)}}const CE=1,Ax=2,kE=4,R7={pointerdown:CE,pointermove:Ax,pointerup:kE,mousedown:CE,mousemove:Ax,mouseup:kE},C7=0,k7=1,N7=2,M7=1,I7=2,O7=4;function P7(t){const e=R7[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let s=!1,i=!1,a=!1;return e===Ax?(s=!!(n&M7),i=!!(n&O7),a=!!(n&I7)):(s=r===C7,i=r===k7,a=r===N7),{leftButton:s,middleButton:i,rightButton:a}}function D7(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),s=r.width/e.offsetWidth||1,i=r.height/e.offsetHeight||1,a={x:(n.x-r.left-e.clientLeft)/s,y:(n.y-r.top-e.clientTop)/i};return{center:n,offsetCenter:a}}const F7={srcElement:"root",priority:0};class j7{constructor(e,n){this.handleEvent=r=>{if(this.isEmpty())return;const s=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==s.rootElement;){if(this._emit(s,i),s.handled)return;i=i.parentNode}this._emit(s,"root")},this.eventManager=e,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,s=!1,i=!1){const{handlers:a,handlersByElement:l}=this,u={...F7,...r};let h=l.get(u.srcElement);h||(h=[],l.set(u.srcElement,h));const d={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};s&&(d.once=!0),i&&(d.passive=!0),a.push(d),this._active=this._active||!d.passive;let g=h.length-1;for(;g>=0&&!(h[g].priority>=d.priority);)g--;h.splice(g+1,0,d)}remove(e,n){const{handlers:r,handlersByElement:s}=this;for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.type===e&&a.handler===n){r.splice(i,1);const l=s.get(a.srcElement);l.splice(l.indexOf(a),1),l.length===0&&s.delete(a.srcElement)}}this._active=r.some(i=>!i.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let s=!1;const i=()=>{e.handled=!0},a=()=>{e.handled=!0,s=!0},l=[];for(let u=0;u<r.length;u++){const{type:h,handler:d,once:g}=r[u];if(d({...e,type:h,stopPropagation:i,stopImmediatePropagation:a}),g&&l.push(r[u]),s)break}for(let u=0;u<l.length;u++){const{type:h,handler:d}=l[u];this.remove(h,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...P7(e),...D7(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function B7(t){if("recognizer"in t)return t;let e;const n=Array.isArray(t)?[...t]:[t];if(typeof n[0]=="function"){const r=n.shift(),s=n.shift()||{};e=new r(s)}else e=n.shift();return{recognizer:e,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class U7{constructor(e=null,n={}){if(this._onBasicInput=r=>{this.manager.emit(r.srcEvent.type,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=e,!!e){this.manager=new d7(e,this.options);for(const r of this.options.recognizers){const{recognizer:s,recognizeWith:i,requireFailure:a}=B7(r);this.manager.add(s),i&&s.recognizeWith(i),a&&s.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new S7(e,this._onOtherEvent,{enable:!1}),this.moveInput=new T7(e,this._onOtherEvent,{enable:!1}),this.keyInput=new E7(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new A7(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){var i,a,l,u;const{manager:r}=this;if(!r)return;const s=r.get(e);s&&(s.set({enable:n}),r.touchAction.update()),(i=this.wheelInput)==null||i.enableEventType(e,n),(a=this.moveInput)==null||a.enableEventType(e,n),(l=this.keyInput)==null||l.enableEventType(e,n),(u=this.contextmenuInput)==null||u.enableEventType(e,n)}_addEventHandler(e,n,r,s,i){if(typeof e!="string"){r=n;for(const[h,d]of Object.entries(e))this._addEventHandler(h,d,r,s,i);return}const{manager:a,events:l}=this;if(!a)return;let u=l.get(e);if(!u){const h=this._getRecognizerName(e)||e;u=new j7(this,h),l.set(e,u),a&&a.on(e,u.handleEvent)}u.add(e,n,r,s,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const[i,a]of Object.entries(e))this._removeEventHandler(i,a);return}const{events:r}=this,s=r.get(e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:i}=s;let a=!1;for(const l of r.values())if(l.recognizerName===i&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(i,!1)}}_getRecognizerName(e){var n;return(n=this.manager.recognizers.find(r=>r.getEventNames().includes(e)))==null?void 0:n.options.event}}const qt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(qt,"IDENTITY",{get:()=>(_n.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const vs={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},jc={common:0,meters:1,pixels:2},Rx={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},NE={multipan:[TE,{threshold:10,direction:er.Vertical,pointers:2}],pinch:[b7,{},null,["multipan"]],pan:[TE,{threshold:1},["pinch"],["multipan"]],dblclick:[SE,{event:"dblclick",taps:2}],click:[SE,{event:"click"},null,["dblclick"]]};function L7(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function lh(t){let e={},n;return r=>{for(const s in r)if(!L7(r[s],e[s])){n=t(r),e=r;break}return n}}const ME=[0,0,0,0],z7=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],nM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],V7=[0,0,0],rM=[0,0,0],$7=lh(q7);function sM(t,e,n=rM){n.length<3&&(n=[n[0],n[1],0]);let r=n,s,i=!0;switch(e===qt.LNGLAT_OFFSETS||e===qt.METER_OFFSETS?s=n:s=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case vs.WEB_MERCATOR:(e===qt.LNGLAT||e===qt.CARTESIAN)&&(s=[0,0,0],i=!1);break;case vs.WEB_MERCATOR_AUTO_OFFSET:e===qt.LNGLAT?r=s:e===qt.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],s=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case vs.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case vs.GLOBE:i=!1,s=null;break;default:i=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:r,offsetMode:i}}function H7(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:s}=t;let{viewMatrix:i,viewProjectionMatrix:a}=t,l=ME,u=ME,h=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:g,offsetMode:b}=sM(t,e,n);return b&&(u=t.projectPosition(d||g),h=[h[0]-u[0],h[1]-u[1],h[2]-u[2]],u[3]=1,l=ah([],u,a),i=r||i,a=za([],s,i),a=za([],a,z7)),{viewMatrix:i,viewProjectionMatrix:a,projectionCenter:l,originCommon:u,cameraPosCommon:h,shaderCoordinateOrigin:g,geospatialOrigin:d}}function W7({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=qt.DEFAULT,coordinateOrigin:s=rM,autoWrapLongitude:i=!1}){r===qt.DEFAULT&&(r=t.isGeospatial?qt.LNGLAT:qt.CARTESIAN);const a=$7({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:s});return a.wrapLongitude=i,a.modelMatrix=n||nM,a}function q7({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:s,viewProjectionMatrix:i,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:h}=H7(t,n,r),d=t.getDistanceScales(),g=[t.width*e,t.height*e],b=ah([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,w={coordinateSystem:n,projectionMode:t.projectionMode,coordinateOrigin:u,commonOrigin:a.slice(0,3),center:s,pseudoMeters:!!t._pseudoMeters,viewportSize:g,devicePixelRatio:e,focalDistance:b,commonUnitsPerMeter:d.unitsPerMeter,commonUnitsPerWorldUnit:d.unitsPerMeter,commonUnitsPerWorldUnit2:V7,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:i,modelMatrix:nM,cameraPosition:l};if(h){const R=t.getDistanceScales(h);switch(n){case qt.METER_OFFSETS:w.commonUnitsPerWorldUnit=R.unitsPerMeter,w.commonUnitsPerWorldUnit2=R.unitsPerMeter2;break;case qt.LNGLAT:case qt.LNGLAT_OFFSETS:t._pseudoMeters||(w.commonUnitsPerMeter=R.unitsPerMeter),w.commonUnitsPerWorldUnit=R.unitsPerDegree,w.commonUnitsPerWorldUnit2=R.unitsPerDegree2;break;case qt.CARTESIAN:w.commonUnitsPerWorldUnit=[1,1,R.unitsPerMeter[2]],w.commonUnitsPerWorldUnit2=[0,0,R.unitsPerMeter2[2]];break}}return w}const X7=Object.keys(qt).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${qt[t]};`).join(""),Y7=Object.keys(vs).map(t=>`const PROJECTION_MODE_${t}: i32 = ${vs[t]};`).join(""),K7=Object.keys(jc).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${jc[t]};`).join(""),Z7=`${X7}
${Y7}
${K7}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,Q7=`${Z7}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,G7=Object.keys(qt).map(t=>`const int COORDINATE_SYSTEM_${t} = ${qt[t]};`).join(""),J7=Object.keys(vs).map(t=>`const int PROJECTION_MODE_${t} = ${vs[t]};`).join(""),eH=Object.keys(jc).map(t=>`const int UNIT_${t.toUpperCase()} = ${jc[t]};`).join(""),tH=`${G7}
${J7}
${eH}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,nH={};function rH(t=nH){return"viewport"in t?W7(t):{}}const r0={name:"project",dependencies:[P9,KN],source:Q7,vs:tH,getUniforms:rH,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},sH=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,iH=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,oH={name:"project32",dependencies:[r0],source:sH,vs:iH};function aH(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function gc(t,e){const n=ah([],e,t);return T9(n,n,1/n[3]),n}function IE(t,e){const n=t%e;return n<0?e+n:n}function Cx(t,e,n){return t<e?e:t>n?n:t}function lH(t){return Math.log(t)*Math.LOG2E}const s0=Math.log2||lH;function qi(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const $s=Math.PI,iM=$s/4,Ts=$s/180,kx=180/$s,Bc=512,Kp=4003e4,qd=85.051129,cH=1.5;function uH(t){return s0(t)}function Zp(t){const[e,n]=t;qi(Number.isFinite(e)),qi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Ts,s=n*Ts,i=Bc*(r+$s)/(2*$s),a=Bc*($s+Math.log(Math.tan(iM+s*.5)))/(2*$s);return[i,a]}function Uc(t){const[e,n]=t,r=e/Bc*(2*$s)-$s,s=2*(Math.atan(Math.exp(n/Bc*(2*$s)-$s))-iM);return[r*kx,s*kx]}function fH(t){const{latitude:e}=t;qi(Number.isFinite(e));const n=Math.cos(e*Ts);return uH(Kp*n)-9}function Wb(t){const e=Math.cos(t*Ts);return Bc/Kp/e}function Nx(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;qi(Number.isFinite(e)&&Number.isFinite(n));const s=Bc,i=Math.cos(e*Ts),a=s/360,l=a/i,u=s/Kp/i,h={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[a,l,u],degreesPerUnit:[1/a,1/l,1/u]};if(r){const d=Ts*Math.tan(e*Ts)/i,g=a*d/2,b=s/Kp*d,w=b/l*u;h.unitsPerDegree2=[0,g,b],h.unitsPerMeter2=[w,0,w]}return h}function oM(t,e){const[n,r,s]=t,[i,a,l]=e,{unitsPerMeter:u,unitsPerMeter2:h}=Nx({longitude:n,latitude:r,highPrecision:!0}),d=Zp(t);d[0]+=i*(u[0]+h[0]*a),d[1]+=a*(u[1]+h[1]*a);const g=Uc(d),b=(s||0)+(l||0);return Number.isFinite(s)||Number.isFinite(l)?[g[0],g[1],b]:g}function hH(t){const{height:e,pitch:n,bearing:r,altitude:s,scale:i,center:a}=t,l=aH();Xp(l,l,[0,0,-s]),WN(l,l,-n*Ts),qN(l,l,r*Ts);const u=i/e;return n0(l,l,[u,u,u]),a&&Xp(l,l,e9([],a)),l}function dH(t){const{width:e,height:n,altitude:r,pitch:s=0,offset:i,center:a,scale:l,nearZMultiplier:u=1,farZMultiplier:h=1}=t;let{fovy:d=Qp(cH)}=t;r!==void 0&&(d=Qp(r));const g=d*Ts,b=s*Ts,w=aM(d);let R=w;a&&(R+=a[2]*l/Math.cos(b)/n);const A=g*(.5+(i?i[1]:0)/n),C=Math.sin(A)*R/Math.sin(Cx(Math.PI/2-b-A,.01,Math.PI-.01)),M=Math.sin(b)*C+R,N=R*10,k=Math.min(M*h,N);return{fov:g,aspect:e/n,focalDistance:w,near:u,far:k}}function Qp(t){return 2*Math.atan(.5/t)*kx}function aM(t){return .5/Math.tan(.5*t*Ts)}function lM(t,e){const[n,r,s=0]=t;return qi(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(s)),gc(e,[n,r,s,1])}function i0(t,e,n=0){const[r,s,i]=t;if(qi(Number.isFinite(r)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(i))return gc(e,[r,s,i,1]);const a=gc(e,[r,s,0,1]),l=gc(e,[r,s,1,1]),u=a[2],h=l[2],d=u===h?0:((n||0)-u)/(h-u);return VN([],a,l,d)}function pH(t){const{width:e,height:n,bounds:r,minExtent:s=0,maxZoom:i=24,offset:a=[0,0]}=t,[[l,u],[h,d]]=r,g=gH(t.padding),b=Zp([l,Cx(d,-qd,qd)]),w=Zp([h,Cx(u,-qd,qd)]),R=[Math.max(Math.abs(w[0]-b[0]),s),Math.max(Math.abs(w[1]-b[1]),s)],A=[e-g.left-g.right-Math.abs(a[0])*2,n-g.top-g.bottom-Math.abs(a[1])*2];qi(A[0]>0&&A[1]>0);const C=A[0]/R[0],M=A[1]/R[1],N=(g.right-g.left)/2/C,k=(g.top-g.bottom)/2/M,F=[(w[0]+b[0])/2+N,(w[1]+b[1])/2+k],B=Uc(F),P=Math.min(i,s0(Math.abs(Math.min(C,M))));return qi(Number.isFinite(P)),{longitude:B[0],latitude:B[1],zoom:P}}function gH(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(qi(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const OE=Math.PI/180;function mH(t,e=0){const{width:n,height:r,unproject:s}=t,i={targetZ:e},a=s([0,r],i),l=s([n,r],i);let u,h;const d=t.fovy?.5*t.fovy*OE:Math.atan(.5/t.altitude),g=(90-t.pitch)*OE;return d>g-.01?(u=PE(t,0,e),h=PE(t,n,e)):(u=s([0,0],i),h=s([n,0],i)),[a,l,h,u]}function PE(t,e,n){const{pixelUnprojectionMatrix:r}=t,s=gc(r,[e,0,1,1]),i=gc(r,[e,t.height,1,1]),l=(n*t.distanceScales.unitsPerMeter[2]-s[2])/(i[2]-s[2]),u=VN([],s,i,l),h=Uc(u);return h.push(n),h}const DE=512;function yH(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:s,latitude:i,zoom:a,bearing:l=0}=t;(s<-180||s>180)&&(s=IE(s+180,360)-180),(l<-180||l>180)&&(l=IE(l+180,360)-180);const u=s0(n/DE);if(a<=u)a=u,i=0;else{const h=n/2/Math.pow(2,a),d=Uc([0,h])[1];if(i<d)i=d;else{const g=Uc([0,DE-h])[1];i>g&&(i=g)}}return{width:e,height:n,longitude:s,latitude:i,zoom:a,pitch:r,bearing:l}}const cM=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,bH=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,_H=`
${cM}
${bH}
`,xH=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,vH=`
${cM}
${xH}
`,wH=lh(RH),SH=lh(CH),TH=[0,0,0,1],EH=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function AH(t,e){const[n,r,s]=t,i=i0([n,r,s],e);return Number.isFinite(s)?i:[i[0],i[1],0]}function RH({viewport:t,center:e}){return new yi(t.viewProjectionMatrix).invert().transform(e)}function CH({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,s=t.isGeospatial?void 0:1,i=[[0,0,s],[t.width,0,s],[0,t.height,s],[t.width,t.height,s],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>AH(a,r));for(const a of e){const l=a.clone().translate(new mi(t.center).negate()),u=i.map(d=>l.transform(d)),h=new yi().ortho({left:Math.min(...u.map(d=>d[0])),right:Math.max(...u.map(d=>d[0])),bottom:Math.min(...u.map(d=>d[1])),top:Math.max(...u.map(d=>d[1])),near:Math.min(...u.map(d=>-d[2])),far:Math.max(...u.map(d=>-d[2]))});n.push(h.multiplyRight(a))}return n}function kH(t){const{shadowEnabled:e=!0,project:n}=t;if(!e||!n||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const r=r0.getUniforms(n),s=wH({viewport:n.viewport,center:r.center}),i=[],a=SH({shadowMatrices:t.shadowMatrices,viewport:n.viewport}).slice();for(let u=0;u<t.shadowMatrices.length;u++){const h=a[u],d=h.clone().translate(new mi(n.viewport.center).negate());r.coordinateSystem===qt.LNGLAT&&r.projectionMode===vs.WEB_MERCATOR?(a[u]=d,i[u]=s):(a[u]=h.clone().multiplyRight(EH),i[u]=d.transform(s))}const l={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||TH,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let u=0;u<a.length;u++)l[`viewProjectionMatrix${u}`]=a[u],l[`projectCenter${u}`]=i[u];for(let u=0;u<2;u++)l[`shadow_uShadowMap${u}`]=t.shadowMaps&&t.shadowMaps[u]||t.dummyShadowMap;return l}const FE={name:"shadow",dependencies:[r0],vs:_H,fs:vH,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:kH,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},NH={...pE,defaultUniforms:{...pE.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},MH=[KN],IH=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],OH=[];function PH(t){const e=Pp.getDefaultShaderAssembler();for(const r of MH)e.addDefaultModule(r);const n=t==="glsl"?IH:OH;for(const r of n)e.addShaderHook(r);return e}const DH=[255,255,255],FH=1;let jH=0;class BH{constructor(e={}){this.type="ambient";const{color:n=DH}=e,{intensity:r=FH}=e;this.id=e.id||`ambient-${jH++}`,this.color=n,this.intensity=r}}const UH=[255,255,255],LH=1,zH=[0,0,-1];let VH=0;class jE{constructor(e={}){this.type="directional";const{color:n=UH}=e,{intensity:r=LH}=e,{direction:s=zH}=e,{_shadow:i=!1}=e;this.id=e.id||`directional-${VH++}`,this.color=n,this.intensity=r,this.type="directional",this.direction=new mi(s).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class $H{constructor(e,n={id:"pass"}){const{id:r}=n;this.id=r,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class o0 extends $H{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,r]=this.device.canvasContext.getDrawingBufferSize(),s=e.clearCanvas??!0,i=e.clearColor??(s?[0,0,0,0]:!1),a=s?1:!1,l=s?0:!1,u=e.colorMask??15,h={viewport:[0,0,n,r]};e.colorMask&&(h.colorMask=u),e.scissorRect&&(h.scissorRect=e.scissorRect);const d=this.device.beginRenderPass({framebuffer:e.target,parameters:h,clearColor:i,clearDepth:a,clearStencil:l});try{return this._drawLayers(d,e)}finally{d.end(),this.device.submit()}}_drawLayers(e,n){const{target:r,shaderModuleProps:s,viewports:i,views:a,onViewportActive:l,clearStack:u=!0}=n;n.pass=n.pass||"unknown",u&&(this._lastRenderIndex=-1);const h=[];for(const d of i){const g=a&&a[d.id];l==null||l(d);const b=this._getDrawLayerParams(d,n),w=d.subViewports||[d];for(const R of w){const A=this._drawLayersInViewport(e,{target:r,shaderModuleProps:s,viewport:R,view:g,pass:n.pass,layers:n.layers},b);h.push(A)}}return h}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:s=!1,layerFilter:i,cullRect:a,effects:l,shaderModuleProps:u},h=!1){var R;const d=[],g=uM(this._lastRenderIndex+1),b={layer:n[0],viewport:e,isPicking:s,renderPass:r,cullRect:a},w={};for(let A=0;A<n.length;A++){const C=n[A],M=this._shouldDrawLayer(C,b,i,w),N={shouldDrawLayer:M};M&&!h&&(N.shouldDrawLayer=!0,N.layerRenderIndex=g(C,M),N.shaderModuleProps=this._getShaderModuleProps(C,l,r,u),N.layerParameters={...(R=C.context.deck)==null?void 0:R.props.parameters,...this.getLayerParameters(C,A,e)}),d[A]=N}return d}_drawLayersInViewport(e,{layers:n,shaderModuleProps:r,pass:s,target:i,viewport:a,view:l},u){const h=HH(this.device,{shaderModuleProps:r,target:i,viewport:a});if(l&&l.props.clear){const g=l.props.clear===!0?{color:!0,depth:!0}:l.props.clear;this.device.beginRenderPass({framebuffer:i,parameters:{viewport:h,scissorRect:h},clearColor:g.color?[0,0,0,0]:!1,clearDepth:g.depth?1:!1}).end()}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:h});for(let g=0;g<n.length;g++){const b=n[g],w=u[g],{shouldDrawLayer:R}=w;if(R&&b.props.pickable&&d.pickableCount++,b.isComposite&&d.compositeCount++,b.isDrawable&&w.shouldDrawLayer){const{layerRenderIndex:A,shaderModuleProps:C,layerParameters:M}=w;d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,A),C.project&&(C.project.viewport=a),b.context.renderPass=e;try{b._drawLayer({renderPass:e,shaderModuleProps:C,uniforms:{layerIndex:A},parameters:M})}catch(N){b.raiseError(N,`drawing ${b} to ${s}`)}}}return d}shouldDrawLayer(e){return!0}getShaderModuleProps(e,n,r){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,s){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(r){const l=n.layer.id;if(l in s||(s[l]=r(n)),!s[l])return!1}return e.activateViewport(n.viewport),!0}_getShaderModuleProps(e,n,r,s){var u,h;const i=this.device.canvasContext.cssToDeviceRatio(),a=((u=e.internalState)==null?void 0:u.propsInTransition)||e.props,l={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:i,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(n)for(const d of n)BE(l,(h=d.getShaderModuleProps)==null?void 0:h.call(d,e,l));return BE(l,this.getShaderModuleProps(e,n,l),s)}}function uM(t=0,e={}){const n={},r=(s,i)=>{const a=s.props._offset,l=s.id,u=s.parent&&s.parent.id;let h;if(u&&!(u in e)&&r(s.parent,!1),u in n){const d=n[u]=n[u]||uM(e[u],e);h=d(s,i),n[l]=d}else Number.isFinite(a)?(h=a+(e[u]||0),n[l]=null):h=t;return i&&h>=t&&(t=h+1),e[l]=h,h};return r}function HH(t,{shaderModuleProps:e,target:n,viewport:r}){var u;const s=((u=e==null?void 0:e.project)==null?void 0:u.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,i]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:i,l=r;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}function BE(t,...e){for(const n of e)if(n)for(const r in n)t[r]?Object.assign(t[r],n[r]):t[r]=n[r];return t}class WH extends o0{constructor(e,n){super(e,n);const r=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),s=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[r],depthStencilAttachment:s})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const n=this.fbo,r=this.device.canvasContext.cssToDeviceRatio(),s=e.viewports[0],i=s.width*r,a=s.height*r,l=[1,1,1,1];(i!==n.width||a!==n.height)&&n.resize({width:i,height:a}),super.render({...e,clearColor:l,target:n,pass:"shadow"})}getLayerParameters(e,n,r){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,n,r){return{shadow:{project:r.project,drawToShadowMap:!0}}}}const qH={color:[255,255,255],intensity:1},UE=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],XH=[0,0,0,200/255];class fM{constructor(e={}){this.id="lighting-effect",this.shadowColor=XH,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:r}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),r._addDefaultShaderModule(FE),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:i}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:i,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,n){const r=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},s={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},i=e.props.material;return{shadow:r,lighting:s,phongMaterial:i,gouraudMaterial:i}}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(FE))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new yi().lookAt({eye:new mi(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new WH(e);this.shadowPasses[n]=r}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new BH(qH),this.directionalLights.push(new jE(UE[0]),new jE(UE[1])))}}class YH{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:s,padding:i=0,copy:a=!1,initialize:l=!1,maxCount:u}){const h=s||e&&e.constructor||Float32Array,d=n*r+i;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new h(e.buffer,0,d)}let g=1/0;u&&(g=u*r+i);const b=this._allocate(h,d,l,g);return e&&a?b.set(e):l||b.fill(0,0,4),this._release(e),b}release(e){this._release(e)}_allocate(e,n,r,s){let i=Math.max(Math.ceil(n*this.opts.overAlloc),1);i>s&&(i=s);const a=this._pool,l=e.BYTES_PER_ELEMENT*i,u=a.findIndex(h=>h.byteLength>=l);if(u>=0){const h=new e(a.splice(u,1)[0],0,i);return r&&h.fill(0),h}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:s}=r,i=n.findIndex(a=>a.byteLength>=s);i<0?n.push(r):(i>0||n.length<this.opts.poolSize)&&n.splice(i,0,r),n.length>this.opts.poolSize&&n.shift()}}const Hf=new YH;function yf(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function KH(t){return[t[12],t[13],t[14]]}function ZH(t){return{left:Gl(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Gl(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Gl(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Gl(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Gl(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Gl(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const LE=new mi;function Gl(t,e,n,r){LE.set(t,e,n);const s=LE.len();return{distance:r/s,normal:new mi(-t/s,-e/s,-n/s)}}function QH(t){return t-Math.fround(t)}let nf;function qb(t,e){const{size:n=1,startIndex:r=0}=e,s=e.endIndex!==void 0?e.endIndex:t.length,i=(s-r)/n;nf=Hf.allocate(nf,i,{type:Float32Array,size:n*2});let a=r,l=0;for(;a<s;){for(let u=0;u<n;u++){const h=t[a++];nf[l+u]=h,nf[l+u+n]=QH(h)}l+=n*2}return nf.subarray(0,i*n*2)}function GH(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const JH=Math.PI/180,eW=yf(),zE=[0,0,0],tW={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function nW({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:s,padding:i,near:a,far:l}){const u=t/e,h=n?new yi().orthographic({fovy:r,aspect:u,focalDistance:s,near:a,far:l}):new yi().perspective({fovy:r,aspect:u,near:a,far:l});if(i){const{left:d=0,right:g=0,top:b=0,bottom:w=0}=i,R=qo((d+t-g)/2,0,t)-t/2,A=qo((b+e-w)/2,0,e)-e/2;h[8]-=R*2/t,h[9]+=A*2/e}return h}class ch{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||tW,this.focalDistance=e.focalDistance||1,this.position=e.position||zE,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?vs.WEB_MERCATOR:vs.WEB_MERCATOR_AUTO_OFFSET:vs.IDENTITY}equals(e){return e instanceof ch?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&$f(e.projectionMatrix,this.projectionMatrix)&&$f(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),s=lM(r,this.pixelProjectionMatrix),[i,a]=s,l=n?a:this.height-a;return e.length===2?[i,l]:[i,l,s[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[s,i,a]=e,l=n?i:this.height-i,u=r&&r*this.distanceScales.unitsPerMeter[2],h=i0([s,l,a],this.pixelUnprojectionMatrix,u),[d,g,b]=this.unprojectPosition(h);return Number.isFinite(a)?[d,g,b]:Number.isFinite(r)?[d,g,r]:[d,g]}projectPosition(e){const[n,r]=this.projectFlat(e),s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,s]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,s]}projectFlat(e){if(this.isGeospatial){const n=Zp(e);return n[1]=qo(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Uc(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),s=this.unproject([this.width,0],n),i=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(r[0],s[0],i[0],a[0]),Math.min(r[1],s[1],i[1],a[1]),Math.max(r[0],s[0],i[0],a[0]),Math.max(r[1],s[1],i[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?Nx({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:s=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,ZH(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=fH({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Nx({latitude:r,longitude:n}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:i,modelMatrix:a}=e;let l=zE;if(i&&(l=a?new yi(a).transformAsVector(i,[]):i),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new mi(l).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(l)}_initMatrices(e){const{viewMatrix:n=eW,projectionMatrix:r=null,orthographic:s=!1,fovyRadians:i,fovy:a=75,near:l=.1,far:u=1e3,padding:h=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new yi().multiplyRight(n).translate(new mi(this.center).negate()),this.projectionMatrix=r||nW({width:this.width,height:this.height,orthographic:s,fovyRadians:i||a*JH,focalDistance:d,padding:h,near:l,far:u});const g=yf();za(g,g,this.projectionMatrix),za(g,g,this.viewMatrix),this.viewProjectionMatrix=g,this.viewMatrixInverse=vx([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=KH(this.viewMatrixInverse);const b=yf(),w=yf();n0(b,b,[this.width/2,-this.height/2,1]),Xp(b,b,[1,-1,0]),za(w,b,this.viewProjectionMatrix),this.pixelProjectionMatrix=w,this.pixelUnprojectionMatrix=vx(yf(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_n.warn("Pixel project matrix not invertible")()}}ch.displayName="Viewport";class Lc extends ch{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:s=0,pitch:i=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:u=1.01,nearZ:h,farZ:d,orthographic:g=!1,projectionMatrix:b,repeat:w=!1,worldOffset:R=0,position:A,padding:C,legacyMeterSizes:M=!1}=e;let{width:N,height:k,altitude:F=1.5}=e;const B=Math.pow(2,s);N=N||1,k=k||1;let P,X=null;if(b)F=b[5]/2,P=Qp(F);else{e.fovy?(P=e.fovy,F=aM(P)):P=Qp(F);let G;if(C){const{top:K=0,bottom:Q=0}=C;G=[0,qo((K+k-Q)/2,0,k)-k/2]}X=dH({width:N,height:k,scale:B,center:A&&[0,0,A[2]*Wb(n)],offset:G,pitch:i,fovy:P,nearZMultiplier:l,farZMultiplier:u}),Number.isFinite(h)&&(X.near=h),Number.isFinite(d)&&(X.far=d)}let Y=hH({height:k,pitch:i,bearing:a,scale:B,altitude:F});R&&(Y=new yi().translate([512*R,0,0]).multiplyLeft(Y)),super({...e,width:N,height:k,viewMatrix:Y,longitude:r,latitude:n,zoom:s,...X,fovy:P,focalDistance:F}),this.latitude=n,this.longitude=r,this.zoom=s,this.pitch=i,this.bearing=a,this.altitude=F,this.fovy=P,this.orthographic=g,this._subViewports=w?[]:null,this._pseudoMeters=M,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let s=n;s<=r;s++){const i=s?new Lc({...this,worldOffset:s}):this;this._subViewports.push(i)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),s=(e[2]||0)*Wb(e[1]);return[n,r,s]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),s=(e[2]||0)/Wb(r);return[n,r,s]}addMetersToLngLat(e,n){return oM(e,n)}panByPosition(e,n){const r=i0(n,this.pixelUnprojectionMatrix),s=this.projectFlat(e),i=hE([],s,Y$([],r)),a=hE([],this.center,i),[l,u]=this.unprojectFlat(a);return{longitude:l,latitude:u}}getBounds(e={}){const n=mH(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:s}=this,{longitude:i,latitude:a,zoom:l}=pH({width:r,height:s,bounds:e,...n});return new Lc({width:r,height:s,longitude:i,latitude:a,zoom:l})}}Lc.displayName="WebMercatorViewport";const VE=[0,0,0];function Xb(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Lc){const[s,i,a=0]=t,l=e.getDistanceScales([s,i]);r[2]=a*l.unitsPerMeter[2]}return r}function rW(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:s,fromCoordinateSystem:i,fromCoordinateOrigin:a}=t;return s===qt.DEFAULT&&(s=e.isGeospatial?qt.LNGLAT:qt.CARTESIAN),i===void 0&&(i=s),a===void 0&&(a=r),{viewport:e,coordinateSystem:s,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:i,fromCoordinateOrigin:a}}function hM(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s,offsetMode:i}){let[a,l,u=0]=t;switch(n&&([a,l,u]=ah([],[a,l,u,1],n)),r){case qt.LNGLAT:return Xb([a,l,u],e,i);case qt.LNGLAT_OFFSETS:return Xb([a+s[0],l+s[1],u+(s[2]||0)],e,i);case qt.METER_OFFSETS:return Xb(oM(s,[a,l,u]),e,i);case qt.CARTESIAN:default:return e.isGeospatial?[a+s[0],l+s[1],u+s[2]]:e.projectPosition([a,l,u])}}function sW(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:s,modelMatrix:i,fromCoordinateSystem:a,fromCoordinateOrigin:l}=rW(e),{autoOffset:u=!0}=e,{geospatialOrigin:h=VE,shaderCoordinateOrigin:d=VE,offsetMode:g=!1}=u?sM(n,r,s):{},b=hM(t,{viewport:n,modelMatrix:i,coordinateSystem:a,coordinateOrigin:l,offsetMode:g});if(g){const w=n.projectPosition(h||d);c9(b,b,w)}return b}let iW=1,oW=1;class dM{constructor(){z(this,"time",0);z(this,"channels",new Map);z(this,"animations",new Map);z(this,"playing",!1);z(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:s=1,repeat:i=1}=e,a=iW++,l={time:0,delay:n,duration:r,rate:s,repeat:i};return this._setChannelTime(l,this.time),this.channels.set(a,l),a}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const s of n)this._setChannelTime(s,this.time);const r=this.animations.values();for(const s of r){const{animation:i,channel:a}=s;i.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=oW++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,s=e.duration*e.repeat;r>=s?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}function aW(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function lW(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let cW=0;const uW={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:ux.stats.get(`animation-loop-${cW++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class fW{constructor(e){z(this,"device",null);z(this,"canvas",null);z(this,"props");z(this,"animationProps",null);z(this,"timeline",null);z(this,"stats");z(this,"cpuTime");z(this,"gpuTime");z(this,"frameRate");z(this,"display");z(this,"needsRedraw","initialized");z(this,"_initialized",!1);z(this,"_running",!1);z(this,"_animationFrameId",null);z(this,"_nextFramePromise",null);z(this,"_resolveNextFrame",null);z(this,"_cpuStartTime",0);z(this,"_error",null);if(this.props={...uW,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=e.stats||new Dg({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var r,s;if(this.props.onError(e),this._error=Error(),((s=(r=this.device)==null?void 0:r.canvasContext)==null?void 0:s.canvas)instanceof HTMLCanvasElement){const i=document.createElement("h1");i.innerHTML=e.message,i.style.position="absolute",i.style.top="20%",i.style.left="10px",i.style.color="black",i.style.backgroundColor="red",document.body.appendChild(i)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=aW(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(lW(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var n;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(n=this.device)==null||n.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var n,r;const e=(r=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:r.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){var i,a,l,u;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((a=(i=this.device)==null?void 0:i.canvasContext)==null?void 0:a.getPixelSize())||[1,1];let r=1;const s=(u=(l=this.device)==null?void 0:l.canvasContext)==null?void 0:u.canvas;return s&&s.clientHeight?r=s.clientWidth/s.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,n;this.props.autoResizeDrawingBuffer&&((n=(e=this.device)==null?void 0:e.canvasContext)==null||n.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const Yb={};function Ug(t="id"){Yb[t]=Yb[t]||1;const e=Yb[t]++;return`${t}-${e}`}class $E{constructor(e){z(this,"id");z(this,"userData",{});z(this,"topology");z(this,"bufferLayout",[]);z(this,"vertexCount");z(this,"indices");z(this,"attributes");if(this.id=e.id||Ug("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&wn.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function hW(t,e){if(e instanceof $E)return e;const n=dW(t,e),{attributes:r,bufferLayout:s}=pW(t,e);return new $E({topology:e.topology||"triangle-list",bufferLayout:s,vertexCount:e.vertexCount,indices:n,attributes:r})}function dW(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:wn.INDEX,data:n})}function pW(t,e){const n=[],r={};for(const[i,a]of Object.entries(e.attributes)){let l=i;switch(i){case"POSITION":l="positions";break;case"NORMAL":l="normals";break;case"TEXCOORD_0":l="texCoords";break;case"COLOR_0":l="colors";break}if(a){r[l]=t.createBuffer({data:a.value,id:`${i}-buffer`});const{value:u,size:h,normalized:d}=a;n.push({name:l,format:l$(u,h,d)})}}const s=e._calculateVertexCount(e.attributes,e.indices);return{attributes:r,bufferLayout:n,vertexCount:s}}const _g=class _g{constructor(e){z(this,"device");z(this,"destroyPolicy");z(this,"_hashCounter",0);z(this,"_hashes",{});z(this,"_renderPipelineCache",{});z(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new _g(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const n={...Oc.defaultProps,...e},r=this._hashRenderPipeline(n);if(!this._renderPipelineCache[r]){const s=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=r,this._renderPipelineCache[r]={pipeline:s,useCount:0}}return this._renderPipelineCache[r].useCount++,this._renderPipelineCache[r].pipeline}createComputePipeline(e){const n={...Up.defaultProps,...e},r=this._hashComputePipeline(n);if(!this._computePipelineCache[r]){const s=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=r,this._computePipelineCache[r]={pipeline:s,useCount:0}}return this._computePipelineCache[r].useCount++,this._computePipelineCache[r].pipeline}release(e){const n=e.hash,r=e instanceof Up?this._computePipelineCache:this._renderPipelineCache;r[n].useCount--,r[n].useCount===0&&this.destroyPolicy==="unused"&&(r[n].pipeline.destroy(),delete r[n])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const n=e.vs?this._getHash(e.vs.source):0,r=e.fs?this._getHash(e.fs.source):0,s="-",i=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${r}V${s}BL${i}`;default:const a=this._getHash(JSON.stringify(e.parameters));return`${n}/${r}V${s}T${e.topology}P${a}BL${i}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};z(_g,"defaultProps",{...Oc.defaultProps});let Mx=_g;const xg=class xg{constructor(e){z(this,"device");z(this,"destroyPolicy");z(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new xg(e)),e._lumaData.defaultShaderFactory}createShader(e){const n=this._hashShader(e);let r=this._cache[n];if(!r){const s=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=r={shader:s,useCount:0}}return r.useCount++,r.shader}release(e){const n=this._hashShader(e),r=this._cache[n];r&&(r.useCount--,r.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[n],r.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};z(xg,"defaultProps",{...Fp.defaultProps});let Ix=xg;function gW(t,e){var s;const n={},r="Values";if(t.attributes.length===0&&!((s=t.varyings)!=null&&s.length))return{"No attributes or varyings":{[r]:"N/A"}};for(const i of t.attributes)if(i){const a=`${i.location} ${i.name}: ${i.type}`;n[`in ${a}`]={[r]:i.stepMode||"vertex"}}for(const i of t.varyings||[]){const a=`${i.location} ${i.name}`;n[`out ${a}`]={[r]:JSON.stringify(i)}}return n}let or=null,Sa=null;function mW(t,{id:e,minimap:n,opaque:r,top:s="0",left:i="0",rgbaScale:a=1}){or||(or=document.createElement("canvas"),or.id=e,or.title=e,or.style.zIndex="100",or.style.position="absolute",or.style.top=s,or.style.left=i,or.style.border="blue 5px solid",or.style.transform="scaleY(-1)",document.body.appendChild(or),Sa=or.getContext("2d")),(or.width!==t.width||or.height!==t.height)&&(or.width=t.width/2,or.height=t.height/2,or.style.width="400px",or.style.height="400px");const l=t.device.readPixelsToArrayWebGL(t),u=Sa==null?void 0:Sa.createImageData(t.width,t.height);if(u){for(let d=0;d<l.length;d+=4)u.data[0+d+0]=l[d+0]*a,u.data[0+d+1]=l[d+1]*a,u.data[0+d+2]=l[d+2]*a,u.data[0+d+3]=r?255:l[d+3]*a;Sa==null||Sa.putImageData(u,0,0)}}function Ox(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Ox(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!Ox(t[i],e[i],n-1))return!1;return!0}return!1}function yW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bW(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function pM(t){return yW(t)||bW(t)}function _W(t){return pM(t)||typeof t=="number"||typeof t=="boolean"}function gM(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];_W(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}class xW{constructor(e,n){z(this,"options",{disableWarnings:!1});z(this,"modules");z(this,"moduleUniforms");z(this,"moduleBindings");Object.assign(this.options,n);const r=Wv(Object.values(e).filter(s=>s.dependencies));for(const s of r)e[s.name]=s;He.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[s,i]of Object.entries(e))this._addModule(i),i.name&&s!==i.name&&!this.options.disableWarnings&&He.warn(`Module name: ${s} vs ${i.name}`)()}destroy(){}setProps(e){var n;for(const r of Object.keys(e)){const s=r,i=e[s]||{},a=this.modules[s];if(!a){this.options.disableWarnings||He.warn(`Module ${r} not found`)();continue}const l=this.moduleUniforms[s],u=this.moduleBindings[s],h=((n=a.getUniforms)==null?void 0:n.call(a,i,l))||i,{uniforms:d,bindings:g}=gM(h);this.moduleUniforms[s]={...l,...d},this.moduleBindings[s]={...u,...g}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[r,s]of Object.entries(this.moduleUniforms))for(const[i,a]of Object.entries(s))e[`${r}.${i}`]={type:(n=this.modules[r].uniformTypes)==null?void 0:n[i],value:String(a)};return e}_addModule(e){const n=e.name;this.moduleUniforms[n]=e.defaultUniforms||{},this.moduleBindings[n]={}}}let vW="";async function wW(t,e){const n=new Image;return n.crossOrigin="anonymous",n.src=t.startsWith("http")?t:vW+t,await n.decode(),e?await createImageBitmap(n,e):await createImageBitmap(n)}class Kb{constructor(e,n){z(this,"device");z(this,"id");z(this,"texture");z(this,"sampler");z(this,"view");z(this,"ready");z(this,"isReady",!1);z(this,"destroyed",!1);z(this,"resolveReady",()=>{});z(this,"rejectReady",()=>{});this.device=e,this.id=n.id||Ug("async-texture"),typeof(n==null?void 0:n.data)=="string"&&n.dimension==="2d"&&(n={...n,data:wW(n.data)}),this.ready=new Promise((r,s)=>{this.resolveReady=()=>{this.isReady=!0,r()},this.rejectReady=s}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const n=e.data;let r;try{r=await mM(n)}catch(i){this.rejectReady(i)}if(this.destroyed)return;const s={...e,data:r};this.texture=this.device.createTexture(s),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(e),n.destroy()}return!0}}async function mM(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(mM));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,n=await Promise.all(Object.values(e)),r=Object.keys(e),s={};for(let i=0;i<r.length;i++)s[r[i]]=n[i];return s}return t}const Ta=2,SW=1e4,vg=class vg{constructor(e,n){z(this,"device");z(this,"id");z(this,"source");z(this,"vs");z(this,"fs");z(this,"pipelineFactory");z(this,"shaderFactory");z(this,"userData",{});z(this,"parameters");z(this,"topology");z(this,"bufferLayout");z(this,"isInstanced");z(this,"instanceCount",0);z(this,"vertexCount");z(this,"indexBuffer",null);z(this,"bufferAttributes",{});z(this,"constantAttributes",{});z(this,"bindings",{});z(this,"uniforms",{});z(this,"vertexArray");z(this,"transformFeedback",null);z(this,"pipeline");z(this,"shaderInputs");z(this,"_uniformStore");z(this,"_attributeInfos",{});z(this,"_gpuGeometry",null);z(this,"_getModuleUniforms");z(this,"props");z(this,"_pipelineNeedsUpdate","newly created");z(this,"_needsRedraw","initializing");z(this,"_destroyed",!1);z(this,"_lastDrawTimestamp",-1);z(this,"_lastLogTime",0);z(this,"_logOpen",!1);z(this,"_drawCount",0);var u,h,d,g;this.props={...vg.defaultProps,...n},n=this.props,this.id=n.id||Ug("model"),this.device=e,Object.assign(this.userData,n.userData);const r=Object.fromEntries(((u=this.props.modules)==null?void 0:u.map(b=>[b.name,b]))||[]),s=n.shaderInputs||new xW(r,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(s);const i=EW(e),a=(((h=this.props.modules)==null?void 0:h.length)>0?this.props.modules:(d=this.shaderInputs)==null?void 0:d.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:b,getUniforms:w}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:i,...this.props,modules:a});this.source=b,this._getModuleUniforms=w,(g=this.props).shaderLayout||(g.shaderLayout=B$(this.source))}else{const{vs:b,fs:w,getUniforms:R}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:i,...this.props,modules:a});this.vs=b,this.fs=w,this._getModuleUniforms=R}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||Mx.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||Ix.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniformsWebGL(n.uniforms),n.moduleSettings&&this.updateModuleSettingsWebGL(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const n=this._areBindingsLoading();if(n)return He.info(Ta,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let r;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const s=this._getBindings();this.pipeline.setBindings(s,{disableWarnings:this.props.disableWarnings}),Px(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:i}=this.vertexArray,a=i?i.byteLength/(i.indexType==="uint32"?4:2):void 0;r=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),r?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",r}setGeometry(e){var r;(r=this._gpuGeometry)==null||r.destroy();const n=e&&hW(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const s=new Fb(this.bufferLayout);this.bufferLayout=s.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const n=new Fb(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){Ox(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new a$(this.shaderInputs.modules);for(const[n,r]of Object.entries(this.shaderInputs.modules))if(TW(r)){const s=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=s}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){const r=(n==null?void 0:n.disableWarnings)??this.props.disableWarnings;e.indices&&He.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=c$(this.pipeline.shaderLayout,this.bufferLayout);const s=new Fb(this.bufferLayout);for(const[i,a]of Object.entries(e)){const l=s.getBufferLayout(i);if(!l){r||He.warn(`Model(${this.id}): Missing layout for buffer "${i}".`)();continue}const u=s.getAttributeNamesForBuffer(l);let h=!1;for(const d of u){const g=this._attributeInfos[d];if(g){const b=this.device.type==="webgpu"?s.getBufferIndex(g.bufferName):g.location;this.vertexArray.setBuffer(b,a),h=!0}}!h&&!r&&He.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${i}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[r,s]of Object.entries(e)){const i=this._attributeInfos[r];i?this.vertexArray.setConstantWebGL(i.location,s):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||He.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${r}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){Px(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:n,uniforms:r}=gM(this._getModuleUniforms(e));Object.assign(this.bindings,n),Object.assign(this.uniforms,r),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Kb&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[n,r]of Object.entries(this.bindings))r instanceof Kb?r.isReady&&(e[n]=r.texture):e[n]=r;return e}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof Dp?e=Math.max(e,n.texture.updateTimestamp):n instanceof wn||n instanceof Nn?e=Math.max(e,n.updateTimestamp):n instanceof Kb?e=n.texture?Math.max(e,n.texture.updateTimestamp):1/0:n instanceof jp||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[r]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(s=>s.name===r)&&r!=="positions"&&delete n[r];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&(He.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const r=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let s=null;this.source?s=r:this.fs&&(s=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:r,fs:s}),this._attributeInfos=mN(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=He.level>3?0:SW;He.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,He.group(Ta,`>>> DRAWING MODEL ${this.id}`,{collapsed:He.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=gW(this.pipeline.shaderLayout,this.id);He.table(Ta,e)();const n=this.shaderInputs.getDebugTable();for(const[s,i]of Object.entries(this.uniforms))n[s]={value:i};He.table(Ta,n)();const r=this._getAttributeDebugTable();He.table(Ta,this._attributeInfos)(),He.table(Ta,r)(),He.groupEnd(Ta)(),this._logOpen=!1}}_logFramebuffer(e){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const r=e.props.framebuffer;r&&mW(r,{id:r.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,r]of Object.entries(this._attributeInfos)){const s=this.vertexArray.attributes[r.location];e[r.location]={name:n,type:r.shaderType,values:s?this._getBufferOrConstantValues(s,r.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,r=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:r.toString()}}return e}_getBufferOrConstantValues(e,n){const r=_N(n);return(e instanceof wn?new r(e.debugData):e).toString()}};z(vg,"defaultProps",{...Oc.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:Pp.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Wf=vg;function TW(t){return!!(t.uniformTypes&&!Px(t.uniformTypes))}function EW(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function Px(t){for(const e in t)return!1;return!0}const If=class If{constructor(e,n=If.defaultProps){z(this,"device");z(this,"model");z(this,"transformFeedback");if(!If.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new Wf(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||uV(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof wn)return n.readAsync();const{buffer:r,byteOffset:s=0,byteLength:i=r.byteLength}=n;return r.readAsync(s,i)}};z(If,"defaultProps",{...Wf.defaultProps,outputs:void 0,feedbackBuffers:void 0});let qf=If;class AW{constructor(e){z(this,"id");z(this,"topology");z(this,"vertexCount");z(this,"indices");z(this,"attributes");z(this,"userData",{});const{attributes:n={},indices:r=null,vertexCount:s=null}=e;this.id=e.id||Ug("geometry"),this.topology=e.topology,r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r),this.attributes={};for(const[i,a]of Object.entries(n)){const l=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(l.value))throw new Error(`${this._print(i)}: must be typed array or object with value as typed array`);if((i==="POSITION"||i==="positions")&&!l.size&&(l.size=3),i==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=l}else this.attributes[i]=l}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const s of Object.values(e)){const{value:i,size:a,constant:l}=s;!l&&i&&a!==void 0&&a>=1&&(r=Math.min(r,i.length/a))}return r}}const RW={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class yM extends o0{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,pickingFBO:a,deviceRect:{x:l,y:u,width:h,height:d},cullRect:g,effects:b,pass:w="picking",pickZ:R,shaderModuleProps:A}){this.pickZ=R;const C=this._resetColorEncoder(R),M=[l,u,h,d],N=super.render({target:a,layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,cullRect:g,effects:b==null?void 0:b.filter(F=>F.useInPicking),pass:w,isPicking:!0,shaderModuleProps:A,clearColor:[0,0,0,0],colorMask:15,scissorRect:M});return this._colorEncoderState=null,{decodePickingColor:C&&kW.bind(null,C),stats:N}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getShaderModuleProps(e,n,r){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,n,r){const s={...e.props.parameters},{pickable:i,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?s.blend=!1:i&&a.includes("draw")&&(Object.assign(s,RW),s.blend=!0,s.blendColor=CW(this._colorEncoderState,e,r)),s}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function CW(t,e,n){const{byLayer:r,byAlpha:s}=t;let i,a=r.get(e);return a?(a.viewports.push(n),i=a.a):(i=r.size+1,i<=255?(a={a:i,layer:e,viewports:[n]},r.set(e,a),s[i]=a):(_n.warn("Too many pickable layers, only picking the first 255")(),i=0)),[0,0,0,i/255]}function kW(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const rc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Gp=Symbol.for("component"),Va=Symbol.for("propTypes"),Zb=Symbol.for("deprecatedProps"),mc=Symbol.for("asyncPropDefaults"),Ja=Symbol.for("asyncPropOriginal"),Xo=Symbol.for("asyncPropResolved");function bM(t,e=()=>!0){return Array.isArray(t)?_M(t,e,[]):e(t)?[t]:[]}function _M(t,e,n){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?_M(s,e,n):e(s)&&n.push(s)}return n}function NW({target:t,source:e,start:n=0,count:r=1}){const s=e.length,i=r*s;let a=0;for(let l=n;a<s;a++)t[l++]=e[a];for(;a<i;)a<i-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+i-a),a=i);return t}class MW{constructor(e,n,r){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let s=e;typeof e=="string"&&(s=rx(e)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=i)}).catch(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=i||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class IW{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:s=!0}){let i=this._resources[e];i?i.setData(n,r):(i=new MW(e,n,this._context),this._resources[e]=i),i.persistent=s}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const s=n[r],i=this._resources[s.resourceId];i&&i.unsubscribe(s)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:s="default"}){const{_resources:i,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),i[e]||this.add({resourceId:e,data:null,persistent:!1}));const l=i[e];if(this._track(r,s,l,n),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,s){const i=this._consumers,a=i[e]=i[e]||{};let l=a[n];const u=l&&l.resourceId&&this._resources[l.resourceId];u&&(u.unsubscribe(l),this.prune()),r&&(l?(l.onChange=s,l.resourceId=r.id):l={onChange:s,resourceId:r.id},a[n]=l,r.subscribe(l))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const OW="layerManager.setLayers",PW="layerManager.activateViewport";class DW{constructor(e,n){var l;this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=u=>{Dr(PW,this,u),u&&(this.context.viewport=u)};const{deck:r,stats:s,viewport:i,timeline:a}=n||{};this.layers=[],this.resourceManager=new IW({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:r,shaderAssembler:PH(((l=e==null?void 0:e.info)==null?void 0:l.shadingLanguage)||"glsl"),defaultShaderModules:[V9],renderPass:void 0,stats:s||new Dg({id:"deck.gl"}),viewport:i||new ch({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new dM,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const s=r.getNeedsRedraw(e);n=n||s}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Dr(OW,this,n,e),this._lastRenderedLayers=e;const r=bM(e,Boolean);for(const s of r)s.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(r=>r.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,r=n.findIndex(s=>s.name===e.name);r>=0&&(n.splice(r,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,r){r.raiseError(n,`${e} of ${r}`)}_updateLayers(e,n){const r={};for(const a of e)r[a.id]?_n.warn(`Multiple old layers with same id ${a.id}`)():r[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const s=[];this._updateSublayersRecursively(n,r,s),this._finalizeOldLayers(r);let i=!1;for(const a of s)if(a.hasUniformTransition()){i=`Uniform transition in ${a}`;break}this._needsUpdate=i,this.layers=s}_updateSublayersRecursively(e,n,r){for(const s of e){s.context=this.context;const i=n[s.id];i===null&&_n.warn(`Multiple new layers with same id ${s.id}`)(),n[s.id]=null;let a=null;try{this._debug&&i!==s&&s.validateProps(),i?(this._transferLayerState(i,s),this._updateLayer(s)):this._initializeLayer(s),r.push(s),a=s.isComposite?s.getSubLayers():null}catch(l){this._handleError("matching",l,s)}a&&this._updateSublayersRecursively(a,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=rc.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=rc.MATCHED,n!==e&&(e.lifecycle=rc.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=rc.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=rc.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Hs(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Hs(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!Hs(t[i],e[i],n-1))return!1;return!0}return!1}class FW{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),s={x:e[0],y:e[1]};for(let i=r.length-1;i>=0;--i){const a=r[i];if(a.containsPixel(s)){const l=e.slice();return l[0]-=a.x,l[1]-=a.y,a.unproject(l,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=bM(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Hs(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):_n.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:i=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:i,width:this.width,height:this.height})}})}_updateController(e,n,r,s){const i=e.controller;if(i&&r){const a={...n,...i,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!s||s.constructor!==i.type)&&(s=this._createController(e,a)),s&&s.setProps(a),s}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let s=e.length;s--;){const i=e[s],a=this.getViewState(i),l=i.makeViewport({viewState:a,width:this.width,height:this.height});let u=n[i.id];const h=!!i.controller;h&&!u&&(r=!0),(r||!h)&&u&&(u.finalize(),u=null),this.controllers[i.id]=this._updateController(i,a,l,u),l&&this._viewports.unshift(l)}for(const s in n){const i=n[s];i&&!this.controllers[s]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,s)=>!e[s].equals(n[s]))}}const jW=/([0-9]+\.?[0-9]*)(%|px)/;function vo(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=jW.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function wo(t,e){return t.relative?Math.round(t.position*e):t.position}class zc{constructor(e){const{id:n,x:r=0,y:s=0,width:i="100%",height:a="100%",padding:l=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=vo(r),this._y=vo(s),this._width=vo(i),this._height=vo(a),this._padding=l&&{left:vo(l.left||0),right:vo(l.right||0),top:vo(l.top||0),bottom:vo(l.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&Hs(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){r=this.filterViewState(r);const s=this.getDimensions({width:e,height:n});if(!s.height||!s.width)return null;const i=this.getViewportType(r);return new i({...r,...this.props,...s})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:wo(this._x,e),y:wo(this._y,n),width:wo(this._width,e),height:wo(this._height,n)};return this._padding&&(r.padding={left:wo(this._padding.left,e),top:wo(this._padding.top,n),right:wo(this._padding.right,e),bottom:wo(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Lg{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(r=(n=this.settings).onStart)==null||r.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:s}=this;this._handle=r.addChannel({delay:r.getTime(),duration:s.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const HE=()=>{},Dx={BREAK:1,SNAP_TO_END:2,IGNORE:3},BW=t=>t,UW=Dx.BREAK;class LW{constructor(e){this._onTransitionUpdate=n=>{const{time:r,settings:{interpolator:s,startProps:i,endProps:a,duration:l,easing:u}}=n,h=u(r/l),d=s.interpolateProps(i,a,h);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Lg(e.timeline),this.onViewStateChange=e.onViewStateChange||HE,this.onStateChange=e.onStateChange||HE}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let s=r;if(this.transition.inProgress){const{interruption:i,endProps:a}=this.transition.settings;s={...r,...i===Dx.SNAP_TO_END?a:this.propsInTransition||r}}this._triggerTransition(s,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Dx.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),s=this.getControllerState(n).shortestPathFrom(r),i=n.transitionInterpolator,a=i.getDuration?i.getDuration(e,n):n.transitionDuration;if(a===0)return;const l=i.initializeProps(e,s);this.propsInTransition={};const u={duration:a,easing:n.transitionEasing||BW,interpolator:i,interruption:n.transitionInterruption||UW,startProps:l.start,endProps:l.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function Tr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class zW{constructor(e){const{compare:n,extract:r,required:s}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=s}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!$f(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},s={};for(const i of this._propsToExtract)(i in e||i in n)&&(r[i]=e[i],s[i]=n[i]);return this._checkRequiredProps(r),this._checkRequiredProps(s),{start:r,end:s}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Tr(Number.isFinite(r)||Array.isArray(r),`${n} is required for transition`)})}}const VW=["longitude","latitude","zoom","bearing","pitch"],$W=["longitude","latitude","zoom"];class xM extends zW{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:VW,required:$W},super(r.transitionProps),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:s,around:i}=this.opts;if(s&&i){const a=s(e),l=s(n),u=a.unproject(i);r.start.around=i,Object.assign(r.end,{around:l.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const s={};for(const i of this._propsToExtract)s[i]=qp(e[i]||0,n[i]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...n,...s});Object.assign(s,i.panByPosition(n.aroundPosition,qp(e.around,n.around,r)))}return s}}const So={transitionDuration:0},HW=300,Xd=t=>1-(1-t)*(1-t),Jl={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Ea={};class WW{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new LW({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return n?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:s}=e;return[s.x-n,s.y-r]}isPointInBounds(e,n){const{width:r,height:s}=this.props;if(n&&n.handled)return!1;const i=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=s;return i&&n&&n.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?HW:0;const{scrollZoom:r=!0,dragPan:s=!0,dragRotate:i=!0,doubleClickZoom:a=!0,touchZoom:l=!0,touchRotate:u=!1,keyboard:h=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Jl.WHEEL,d&&r),this.toggleEvents(Jl.PAN,d),this.toggleEvents(Jl.PINCH,d&&(l||u)),this.toggleEvents(Jl.MULTI_PAN,d&&u),this.toggleEvents(Jl.DOUBLE_CLICK,d&&a),this.toggleEvents(Jl.KEYBOARD,d&&h),this.scrollZoom=r,this.dragPan=s,this.dragRotate=i,this.doubleClickZoom=a,this.touchZoom=l,this.touchRotate=u,this.keyboard=h}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const s={...e.getViewportProps(),...n},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),i){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const s=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(s,So,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,So,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Xd},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,So,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Xd},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:i}=e;let a=2/(1+Math.exp(-Math.abs(i*r)));i<0&&a!==0&&(a=1/a);const l=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(l,{...this._getTransitionProps({around:n}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,So,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,So,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),s=[r[0],r[1]+=e.velocityY*n/2],i=this.controllerState.rotate({pos:s});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Xd},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ea._startPinchRotation=e.rotation,Ea._lastPinchEvent=e,this.updateViewport(r,So,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,s=this.getCenter(e);n=n.zoom({pos:s,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ea._startPinchRotation-r})}return this.updateViewport(n,So,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ea._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ea;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const s=this.getCenter(e);let i=this.controllerState.rotateEnd();const a=Math.log2(e.scale),l=(a-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,a+l*n/2);i=i.zoom({pos:s,scale:u}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:s}),transitionDuration:n,transitionEasing:Xd},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ea._startPinchRotation=null,Ea._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(s,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:s,rotateSpeedX:i,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:l}=this;let u;const h={};switch(e.srcEvent.code){case"Minus":u=n?l.zoomOut(r).zoomOut(r):l.zoomOut(r),h.isZooming=!0;break;case"Equal":u=n?l.zoomIn(r).zoomIn(r):l.zoomIn(r),h.isZooming=!0;break;case"ArrowLeft":n?(u=l.rotateLeft(i),h.isRotating=!0):(u=l.moveLeft(s),h.isPanning=!0);break;case"ArrowRight":n?(u=l.rotateRight(i),h.isRotating=!0):(u=l.moveRight(s),h.isPanning=!0);break;case"ArrowUp":n?(u=l.rotateUp(a),h.isRotating=!0):(u=l.moveUp(s),h.isPanning=!0);break;case"ArrowDown":n?(u=l.rotateDown(a),h.isRotating=!0):(u=l.moveDown(s),h.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),h),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?So:e?{...n,transitionInterpolator:new xM({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class qW{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const WE=5,XW=1.2;class YW extends qW{constructor(e){const{width:n,height:r,latitude:s,longitude:i,zoom:a,bearing:l=0,pitch:u=0,altitude:h=1.5,position:d=[0,0,0],maxZoom:g=20,minZoom:b=0,maxPitch:w=60,minPitch:R=0,startPanLngLat:A,startZoomLngLat:C,startRotatePos:M,startBearing:N,startPitch:k,startZoom:F,normalize:B=!0}=e;Tr(Number.isFinite(i)),Tr(Number.isFinite(s)),Tr(Number.isFinite(a)),super({width:n,height:r,latitude:s,longitude:i,zoom:a,bearing:l,pitch:u,altitude:h,maxZoom:g,minZoom:b,maxPitch:w,minPitch:R,normalize:B,position:d},{startPanLngLat:A,startZoomLngLat:C,startRotatePos:M,startBearing:N,startPitch:k,startZoom:F}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:s,startBearing:i,startPitch:a}=this.getState();if(!s||i===void 0||a===void 0)return this;let l;return e?l=this._getNewRotation(e,s,a,i):l={bearing:i+n,pitch:a+r},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:s,startZoomLngLat:i}=this.getState();if(i||(s=this.getViewportProps().zoom,i=this._unproject(n)||this._unproject(e)),!i)return this;const{maxZoom:a,minZoom:l}=this.getViewportProps();let u=s+Math.log2(r);u=qo(u,l,a);const h=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...h.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:s,longitude:i}=r;return Math.abs(s-n.bearing)>180&&(r.bearing=s<0?s+360:s-360),Math.abs(i-n.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:s}=e;e.zoom=qo(s,r,n);const{maxPitch:i,minPitch:a,pitch:l}=e;e.pitch=qo(l,a,i);const{normalize:u=!0}=e;return u&&Object.assign(e,yH(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,s){const i=e[0]-n[0],a=e[1]-n[1],l=e[1],u=n[1],{width:h,height:d}=this.getViewportProps(),g=i/h;let b=0;a>0?Math.abs(d-u)>WE&&(b=a/(u-d)*XW):a<0&&u>WE&&(b=1-l/u),b=qo(b,-1,1);const{minPitch:w,maxPitch:R}=this.getViewportProps(),A=s+180*g;let C=r;return b>0?C=r+b*(R-r):b<0&&(C=r-b*(w-r)),{pitch:C,bearing:A}}}class KW extends WW{constructor(){super(...arguments),this.ControllerState=YW,this.transition={transitionDuration:300,transitionInterpolator:new xM({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class vM extends zc{constructor(e={}){super(e)}getViewportType(){return Lc}get ControllerType(){return KW}}vM.displayName="MapView";const ZW=new fM;function QW(t,e){const n=t.order??1/0,r=e.order??1/0;return n-r}class GW{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(s=>QW(s,e)>0);r<0?n.push(e):n.splice(r,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Hs(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const s of this.effects)n[s.id]=s;const r=[];for(const s of e){const i=n[s.id];let a=s;i&&i!==s?i.setProps?(i.setProps(s.props),a=i):i.cleanup(this._context):i||s.setup(this._context),r.push(a),delete n[s.id]}for(const s in n)n[s].cleanup(this._context);this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(s=>s instanceof fM)||this._resolvedEffects.push(ZW),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class JW extends o0{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const eq="deckRenderer.renderLayers";class tq{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new JW(e),this.pickLayersPass=new yM(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};r.effects&&this._preRender(r.effects,r);const s=this.lastPostProcessEffect?this.renderBuffers[0]:r.target;this.lastPostProcessEffect&&(r.clearColor=[0,0,0,0],r.clearCanvas=!0);const i=n.render({...r,target:s});r.effects&&this._postRender(r.effects,r),this.renderCount++,Dr(eq,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(r=>{const s=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${r}`,colorAttachments:[s]}))});for(const r of e)r.resize(n)}_postRender(e,n){const{renderBuffers:r}=this,s={...n,inputBuffer:r[0],swapBuffer:r[1]};for(const i of e)if(i.postRender){s.target=i.id===this.lastPostProcessEffect?n.target:void 0;const a=i.postRender(s);s.inputBuffer=a,s.swapBuffer=a===r[0]?r[1]:r[0]}}}const nq={pickedColor:null,pickedObjectIndex:-1};function rq({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:s,deviceRect:i}){const{x:a,y:l,width:u,height:h}=i;let d=s*s,g=-1,b=0;for(let w=0;w<h;w++){const R=w+l-r,A=R*R;if(A>d)b+=4*u;else for(let C=0;C<u;C++){if(t[b+3]-1>=0){const N=C+a-n,k=N*N+A;k<=d&&(d=k,g=b)}b+=4}}if(g>=0){const w=t.slice(g,g+4),R=e(w);if(R){const A=Math.floor(g/4/u),C=g/4-A*u;return{...R,pickedColor:w,pickedX:a+C,pickedY:l+A}}_n.error("Picked non-existent layer. Is picking buffer corrupt?")()}return nq}function sq({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),a=i.join(",");if(!n.has(a)){const l=e(i);l?n.set(a,{...l,color:i}):_n.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function wM({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:s,z:i}){let a=e[0];e.length>1&&(a=oq((t==null?void 0:t.pickedViewports)||e,{x:r,y:s}));let l;if(a){const u=[r-a.x,s-a.y];i!==void 0&&(u[2]=i),l=a.unproject(u)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:s,pixel:[r,s],coordinate:l,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function iq(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:s}=t,{pickedColor:i,pickedLayer:a,pickedObjectIndex:l}=e,u=a?[a]:[];if(r==="hover"){const g=n.index,b=n.layerId,w=a?a.props.id:null;if(w!==b||l!==g){if(w!==b){const R=s.find(A=>A.props.id===b);R&&u.unshift(R)}n.layerId=w,n.index=l,n.info=null}}const h=wM(t),d=new Map;return d.set(null,h),u.forEach(g=>{let b={...h};g===a&&(b.color=i,b.index=l,b.picked=!0),b=SM({layer:g,info:b,mode:r});const w=b.layer;g===a&&r==="hover"&&(n.info=b),d.set(w.id,b),r==="hover"&&w.updateAutoHighlight(b)}),d}function SM({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function oq(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class aq{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new yM(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:s},i=this.lastPickedInfo.info){const a=i&&i.layer&&i.layer.id,l=i&&i.viewport&&i.viewport.id,u=a?r.find(b=>b.id===a):null,h=l&&s.find(b=>b.id===l)||s[0],d=h&&h.unproject([e-h.x,n-h.y]);return{...i,...{x:e,y:n,viewport:h,coordinate:d,layer:u}}}_resizeBuffer(){var n,r;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const s=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=s}const{canvas:e}=this.device.getDefaultCanvasContext();(n=this.pickingFBO)==null||n.resize({width:e.width,height:e.height}),(r=this.depthFBO)==null||r.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:s,y:i,radius:a=0,depth:l=1,mode:u="query",unproject3D:h,onViewportActive:d,effects:g}){const b=this.device.canvasContext.cssToDeviceRatio(),w=this._getPickable(e);if(!w||r.length===0)return{result:[],emptyInfo:wM({viewports:r,x:s,y:i,pixelRatio:b})};this._resizeBuffer();const R=this.device.canvasContext.cssToDevicePixels([s,i],!0),A=[R.x+Math.floor(R.width/2),R.y+Math.floor(R.height/2)],C=Math.round(a*b),{width:M,height:N}=this.pickingFBO,k=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceWidth:M,deviceHeight:N}),F={x:s-a,y:i-a,width:a*2+1,height:a*2+1};let B;const P=[],X=new Set;for(let Y=0;Y<l;Y++){let G;if(k){const Q=this._drawAndSample({layers:w,views:n,viewports:r,onViewportActive:d,deviceRect:k,cullRect:F,effects:g,pass:`picking:${u}`});G=rq({...Q,deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceRect:k})}else G={pickedColor:null,pickedObjectIndex:-1};let K;if(G.pickedLayer&&h&&this.depthFBO){const{pickedColors:Q}=this._drawAndSample({layers:[G.pickedLayer],views:n,viewports:r,onViewportActive:d,deviceRect:{x:G.pickedX,y:G.pickedY,width:1,height:1},cullRect:F,effects:g,pass:`picking:${u}:z`},!0);Q[3]&&(K=Q[0])}G.pickedLayer&&Y+1<l&&(X.add(G.pickedLayer),G.pickedLayer.disablePickingIndex(G.pickedObjectIndex)),B=iq({pickInfo:G,lastPickedInfo:this.lastPickedInfo,mode:u,layers:w,viewports:r,x:s,y:i,z:K,pixelRatio:b});for(const Q of B.values())Q.layer&&P.push(Q);if(!G.pickedColor)break}for(const Y of X)Y.restorePickingColors();return{result:P,emptyInfo:B.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:s,y:i,width:a=1,height:l=1,mode:u="query",maxObjects:h=null,onViewportActive:d,effects:g}){const b=this._getPickable(e);if(!b||r.length===0)return[];this._resizeBuffer();const w=this.device.canvasContext.cssToDeviceRatio(),R=this.device.canvasContext.cssToDevicePixels([s,i],!0),A=R.x,C=R.y+R.height,M=this.device.canvasContext.cssToDevicePixels([s+a,i+l],!0),N=M.x+M.width,k=M.y,F={x:A,y:k,width:N-A,height:C-k},B=this._drawAndSample({layers:b,views:n,viewports:r,onViewportActive:d,deviceRect:F,cullRect:{x:s,y:i,width:a,height:l},effects:g,pass:`picking:${u}`}),P=sq(B),X=new Map,Y=[],G=Number.isFinite(h);for(let K=0;K<P.length&&!(G&&Y.length>=h);K++){const Q=P[K];let ie={color:Q.pickedColor,layer:null,index:Q.pickedObjectIndex,picked:!0,x:s,y:i,pixelRatio:w};ie=SM({layer:Q.pickedLayer,info:ie,mode:u});const xe=ie.layer.id;X.has(xe)||X.set(xe,new Set);const oe=X.get(xe),Re=ie.object??ie.index;oe.has(Re)||(oe.add(Re),Y.push(ie))}return Y}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:s,deviceRect:i,cullRect:a,effects:l,pass:u},h=!1){const d=h?this.depthFBO:this.pickingFBO,g={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:s,pickingFBO:d,deviceRect:i,cullRect:a,effects:l,pass:u,pickZ:h,preRenderStats:{},isPicking:!0};for(const N of l)N.useInPicking&&(g.preRenderStats[N.id]=N.preRender(g));const{decodePickingColor:b}=this.pickLayersPass.render(g),{x:w,y:R,width:A,height:C}=i,M=new(h?Float32Array:Uint8Array)(A*C*4);return this.device.readPixelsToArrayWebGL(d,{sourceX:w,sourceY:R,sourceWidth:A,sourceHeight:C,target:M}),{pickedColors:M,decodePickingColor:b}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:s,deviceHeight:i}){const a=Math.max(0,e-r),l=Math.max(0,n-r),u=Math.min(s,e+r+1)-a,h=Math.min(i,n+r+1)-l;return u<=0||h<=0?null:{x:a,y:l,width:u,height:h}}}const lq={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},cq="top-left",qE="__root";class uq{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!Hs(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const n={};for(const r of this.resolvedWidgets)n[r.id]=r;this.resolvedWidgets.length=0;for(const r of this.defaultWidgets)n[r.id]=null,this.resolvedWidgets.push(r);for(let r of e){const s=n[r.id];s?s.viewId!==r.viewId||s.placement!==r.placement?(this._remove(s),this._add(r)):r!==s&&(s.setProps(r.props),r=s):this._add(r),n[r.id]=null,this.resolvedWidgets.push(r)}for(const r in n){const s=n[r];s&&this._remove(s)}this.widgets=e}_add(e){const{viewId:n=null,placement:r=cq}=e,s=e.onAdd({deck:this.deck,viewId:n});s&&this._getContainer(n,r).append(s),e._element=s}_remove(e){var n;(n=e.onRemove)==null||n.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,n){var a;const r=e||qE;let s=this.containers[r];s||(s=document.createElement("div"),s.style.pointerEvents="none",s.style.position="absolute",s.style.overflow="hidden",(a=this.parentElement)==null||a.append(s),this.containers[r]=s);let i=s.querySelector(`.${n}`);return i||(i=document.createElement("div"),i.className=n,i.style.position="absolute",i.style.zIndex="2",Object.assign(i.style,lq[n]),s.append(i)),i}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const r in this.containers){const s=this.lastViewports[r]||null,i=r===qE||s,a=this.containers[r];i?(a.style.display="block",a.style.left=`${s?s.x:0}px`,a.style.top=`${s?s.y:0}px`,a.style.width=`${s?s.width:e}px`,a.style.height=`${s?s.height:n}px`):a.style.display="none"}}onRedraw({viewports:e,layers:n}){var s,i;const r=e.reduce((a,l)=>(a[l.id]=l,a),{});for(const a of this.getWidgets()){const{viewId:l}=a;if(l){const u=r[l];u&&(a.onViewportChange&&a.onViewportChange(u),(s=a.onRedraw)==null||s.call(a,{viewports:[u],layers:n}))}else{if(a.onViewportChange)for(const u of e)a.onViewportChange(u);(i=a.onRedraw)==null||i.call(a,{viewports:e,layers:n})}}this.lastViewports=r,this._updateContainers()}onHover(e,n){var r,s;for(const i of this.getWidgets()){const{viewId:a}=i;(!a||a===((r=e.viewport)==null?void 0:r.id))&&((s=i.onHover)==null||s.call(i,e,n))}}onEvent(e,n){var s,i;const r=Rx[n.type];if(r)for(const a of this.getWidgets()){const{viewId:l}=a;(!l||l===((s=e.viewport)==null?void 0:s.id))&&((i=a[r])==null||i.call(a,e,n))}}}const fq={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class hq{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,fq),this.deck=e,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:n}=this,r=n&&n.props.getTooltip;if(!r)return;const s=r(e);this.lastViewport=e.viewport,this.setTooltip(s,e.x,e.y)}setTooltip(e,n,r){const s=this.element;if(s){if(typeof e=="string")s.innerText=e;else if(e)e.text&&(s.innerText=e.text),e.html&&(s.innerHTML=e.html),e.className&&(s.className=e.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform=`translate(${n}px, ${r}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(s.style,e.style)}}}var ac;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(ac||(ac={}));const a0={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Vn=(t,e,n)=>e?t.enable(n):t.disable(n),XE=(t,e,n)=>t.hint(n,e),rs=(t,e,n)=>t.pixelStorei(n,e),YE=(t,e,n)=>{const r=n===36006?36009:36008;return t.bindFramebuffer(r,e)},rf=(t,e,n)=>{const s={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(s,e)};function Qb(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const dq={3042:Vn,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Vn,2885:(t,e)=>t.cullFace(e),2929:Vn,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Vn,35723:XE,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:YE,36010:YE,34964:rf,36662:rf,36663:rf,35053:rf,35055:rf,2886:(t,e)=>t.frontFace(e),33170:XE,2849:(t,e)=>t.lineWidth(e),32823:Vn,32824:"polygonOffset",10752:"polygonOffset",35977:Vn,32926:Vn,32928:Vn,32938:"sampleCoverage",32939:"sampleCoverage",3089:Vn,3088:(t,e)=>t.scissor(...e),2960:Vn,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:Vn,10754:Vn,12288:Vn,12289:Vn,12290:Vn,12291:Vn,12292:Vn,12293:Vn,12294:Vn,12295:Vn,3333:rs,3317:rs,37440:rs,37441:rs,37443:rs,3330:rs,3332:rs,3331:rs,3314:rs,32878:rs,3316:rs,3315:rs,32877:rs,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Qb(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Qb(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,a,l]=e;t.stencilFuncSeparate(1028,n,r,s),t.stencilFuncSeparate(1029,i,a,l)},stencilOp:(t,e)=>{e=Qb(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,a,l]=e;t.stencilOpSeparate(1028,n,r,s),t.stencilOpSeparate(1029,i,a,l)},viewport:(t,e)=>t.viewport(...e)};function Cn(t,e,n){return e[t]!==void 0?e[t]:n[t]}const pq={blendEquation:(t,e,n)=>t.blendEquationSeparate(Cn(32777,e,n),Cn(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Cn(32969,e,n),Cn(32968,e,n),Cn(32971,e,n),Cn(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Cn(32824,e,n),Cn(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Cn(32938,e,n),Cn(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Cn(2962,e,n),Cn(2967,e,n),Cn(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Cn(34816,e,n),Cn(36003,e,n),Cn(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Cn(2964,e,n),Cn(2965,e,n),Cn(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Cn(34817,e,n),Cn(34818,e,n),Cn(34819,e,n))},KE={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return r?t({[r]:n}):{valueChanged:!0}},blendColor:(t,e,n,r,s)=>t({32773:new Float32Array([e,n,r,s])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,s)=>t({32969:e,32968:n,32971:r,32970:s}),clearColor:(t,e,n,r,s)=>t({3106:new Float32Array([e,n,r,s])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,s)=>t({3107:[e,n,r,s]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,s)=>t({3088:new Int32Array([e,n,r,s])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,s)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:s}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,s)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:s}),viewport:(t,e,n,r,s)=>t({2978:[e,n,r,s]})},ri=(t,e)=>t.isEnabled(e),ZE={3042:ri,2884:ri,2929:ri,3024:ri,32823:ri,32926:ri,32928:ri,3089:ri,2960:ri,35977:ri},gq=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Jc(t,e){if(yq(e))return;const n={};for(const s in e){const i=Number(s),a=dq[s];a&&(typeof a=="string"?n[a]=!0:a(t,e[s],i))}const r=t.state&&t.state.cache;if(r)for(const s in n){const i=pq[s];i(t,e,r)}}function TM(t,e=a0){if(typeof e=="number"){const s=e,i=ZE[s];return i?i(t,s):t.getParameter(s)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const s of n){const i=ZE[s];r[s]=i?i(t,Number(s)):t.getParameter(Number(s))}return r}function mq(t){Jc(t,a0)}function yq(t){for(const e in t)return!1;return!0}function bq(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}return!1}class $a{constructor(e,n){z(this,"gl");z(this,"program",null);z(this,"stateStack",[]);z(this,"enable",!0);z(this,"cache",null);z(this,"log");z(this,"initialized",!1);this.gl=e,this.log=(n==null?void 0:n.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];Jc(this.gl,e),this.stateStack.pop()}trackState(e,n){if(this.cache=n.copyState?TM(e):Object.assign({},a0),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,xq(e);for(const r in KE){const s=KE[r];_q(e,r,s)}QE(e,"getParameter"),QE(e,"isEnabled")}_updateCache(e){let n=!1,r;const s=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const i in e){const a=e[i],l=this.cache[i];bq(a,l)||(n=!0,r=l,s&&!(i in s)&&(s[i]=l),this.cache[i]=a)}return{valueChanged:n,oldValue:r}}}function QE(t,e){const n=t[e].bind(t);t[e]=function(s){if(s===void 0||gq.has(s))return n(s);const i=$a.get(t);return s in i.cache||(i.cache[s]=n(s)),i.enable?i.cache[s]:n(s)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function _q(t,e,n){if(!t[e])return;const r=t[e].bind(t);t[e]=function(...i){const a=$a.get(t),{valueChanged:l,oldValue:u}=n(a._updateCache,...i);return l&&r(...i),u},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function xq(t){const e=t.useProgram.bind(t);t.useProgram=function(r){const s=$a.get(t);s.program!==r&&(e(r),s.program=r)}}function vq(t,e,n){let r="";const s={preserveDrawingBuffer:!0,...n};let i=null;if(i||(i=t.getContext("webgl2",s)),s.failIfMajorPerformanceCaveat&&(r||(r="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!i&&!n.failIfMajorPerformanceCaveat&&(s.failIfMajorPerformanceCaveat=!1,i=t.getContext("webgl2",s),i.luma||(i.luma={}),i.luma.softwareRenderer=!0),i||(i=t.getContext("webgl",{}),i&&(i=null,r||(r="Your browser only supports WebGL1"))),!i)throw r||(r="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${r}`);const{onContextLost:a,onContextRestored:l}=e;return t.addEventListener("webglcontextlost",u=>a(u),!1),t.addEventListener("webglcontextrestored",u=>l(u),!1),i.luma||(i.luma={}),i}function Vc(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function wq(t,e){const n=t.getParameter(7936),r=t.getParameter(7937);Vc(t,"WEBGL_debug_renderer_info",e);const s=e.WEBGL_debug_renderer_info,i=t.getParameter(s?s.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(s?s.UNMASKED_RENDERER_WEBGL:7937),l=i||n,u=a||r,h=t.getParameter(7938),d=EM(l,u),g=Sq(l,u),b=Tq(l,u);return{type:"webgl",gpu:d,gpuType:b,gpuBackend:g,vendor:l,renderer:u,version:h,shadingLanguage:"glsl",shadingLanguageVersion:300}}function EM(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function Sq(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function Tq(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(EM(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function AM(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const bf="WEBGL_compressed_texture_s3tc",_f="WEBGL_compressed_texture_s3tc_srgb",lc="EXT_texture_compression_rgtc",cc="EXT_texture_compression_bptc",Eq="WEBGL_compressed_texture_etc",Aq="WEBGL_compressed_texture_astc",Rq="WEBGL_compressed_texture_etc1",Cq="WEBGL_compressed_texture_pvrtc",kq="WEBGL_compressed_texture_atc",GE="EXT_texture_norm16",JE="EXT_render_snorm",Nq="EXT_color_buffer_float",l0={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[JE],"norm16-renderable-webgl":[GE],"snorm16-renderable-webgl":[GE,JE],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[bf,_f,lc,cc],"texture-compression-bc5-webgl":[lc],"texture-compression-bc7-webgl":[cc],"texture-compression-etc2":[Eq],"texture-compression-astc":[Aq],"texture-compression-etc1-webgl":[Rq],"texture-compression-pvrtc-webgl":[Cq],"texture-compression-atc-webgl":[kq]};function Mq(t){return t in l0}function Iq(t,e,n){return(l0[e]||[]).every(s=>Vc(t,s,n))}const c0={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:Nq,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:bf},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:_f},"bc1-rgba-unorm":{gl:33777,x:bf},"bc1-rgba-unorm-srgb":{gl:35916,x:_f},"bc2-rgba-unorm":{gl:33778,x:bf},"bc2-rgba-unorm-srgb":{gl:35918,x:_f},"bc3-rgba-unorm":{gl:33779,x:bf},"bc3-rgba-unorm-srgb":{gl:35919,x:_f},"bc4-r-unorm":{gl:36283,x:lc},"bc4-r-snorm":{gl:36284,x:lc},"bc5-rg-unorm":{gl:36285,x:lc},"bc5-rg-snorm":{gl:36286,x:lc},"bc6h-rgb-ufloat":{gl:36495,x:cc},"bc6h-rgb-float":{gl:36494,x:cc},"bc7-rgba-unorm":{gl:36492,x:cc},"bc7-rgba-unorm-srgb":{gl:36493,x:cc},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function Oq(t,e,n){let r=e.create;const s=c0[e.format];return(s==null?void 0:s.gl)===void 0&&(r=!1),s!=null&&s.x&&(r=r&&!!Vc(t,s.x,n)),{format:e.format,create:r&&e.create,render:r&&e.render,filter:r&&e.filter,blend:r&&e.blend,store:r&&e.store}}function RM(t){var s;const e=c0[t],n=Fq(t),r=qv(t);return{internalFormat:n,format:(e==null?void 0:e.dataFormat)||Dq(r.channels,r.integer,r.normalized,n),type:r.dataType?AM(r.dataType):((s=e==null?void 0:e.types)==null?void 0:s[0])||5121,compressed:r.compressed||!1}}function Pq(t){switch(qv(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function Dq(t,e,n,r){if(r===6408||r===6407)return r;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function Fq(t){const e=c0[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}const eA={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class jq extends AV{constructor(n,r,s){super([],s);z(this,"gl");z(this,"extensions");z(this,"testedFeatures",new Set);this.gl=n,this.extensions=r,Vc(n,"EXT_color_buffer_float",r)}*[Symbol.iterator](){const n=this.getFeatures();for(const r of n)this.has(r)&&(yield r);return[]}has(n){var r;return(r=this.disabledFeatures)!=null&&r[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),Mq(n)&&Iq(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(r=>r!=="polygon-mode-webgl");for(const r of n)this.has(r)}getFeatures(){return[...Object.keys(eA),...Object.keys(l0)]}getWebGLFeature(n){const r=eA[n];return typeof r=="string"?!!Vc(this.gl,r,this.extensions):!!r}}class Bq extends EV{constructor(n){super();z(this,"gl");z(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]||0}}class Ef extends Bp{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"colorAttachments",[]);z(this,"depthStencilAttachment",null);const s=r.handle===null;this.device=n,this.gl=n.gl,this.handle=this.props.handle||s?this.props.handle:this.gl.createFramebuffer(),s||(n.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const n=this.gl.bindFramebuffer(36160,this.handle);for(let r=0;r<this.colorAttachments.length;++r){const s=this.colorAttachments[r];if(s){const i=36064+r;this._attachTextureView(i,s)}}if(this.depthStencilAttachment){const r=Pq(this.depthStencilAttachment.props.format);this._attachTextureView(r,this.depthStencilAttachment)}if(this.device.props.debug){const r=this.gl.checkFramebufferStatus(36160);if(r!==36053)throw new Error(`Framebuffer ${Lq(r)}`)}this.gl.bindFramebuffer(36160,n)}_attachTextureView(n,r){const{gl:s}=this.device,{texture:i}=r,a=r.props.baseMipLevel,l=r.props.baseArrayLayer;switch(s.bindTexture(i.glTarget,i.handle),i.glTarget){case 35866:case 32879:s.framebufferTextureLayer(36160,n,i.handle,a,l);break;case 34067:const u=Uq(l);s.framebufferTexture2D(36160,n,u,i.handle,a);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,a);break;default:throw new Error("Illegal texture type")}s.bindTexture(i.glTarget,null)}}function Uq(t){return t<34069?t+34069:t}function Lq(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class zq extends fx{constructor(n,r){super(r);z(this,"device");z(this,"format","rgba8unorm");z(this,"depthStencilFormat","depth24plus");z(this,"presentationSize");z(this,"_framebuffer",null);this.device=n,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Ef(this.device,{handle:null}),this._framebuffer}update(){const n=this.getPixelSize();(n[0]!==this.presentationSize[0]||n[1]!==this.presentationSize[1])&&(this.presentationSize=n,this.resize())}resize(n){if(this.device.gl&&this.canvas){const r=this.getDevicePixelRatio(n==null?void 0:n.useDevicePixels);this.setDevicePixelRatio(r,n);return}}commit(){}}async function CM(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",t),new Promise((s,i)=>{r.onload=s,r.onerror=a=>i(new Error(`Unable to load script '${t}': ${a}`)),n.appendChild(r)})}const Vq=1;let pn=null,tA=!1;const u0={debugSpectorJS:He.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function $q(t){if(!globalThis.SPECTOR)try{await CM(t.debugSpectorJSUrl||u0.debugSpectorJSUrl)}catch(e){He.warn(String(e))}}function Hq(t){var e;if(t={...u0,...t},!t.debugSpectorJS)return null;if(!pn&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){He.probe(Vq,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:n}=globalThis.SPECTOR;pn=new n,globalThis.luma&&(globalThis.luma.spector=pn)}if(!pn)return null;if(tA||(tA=!0,pn.spyCanvases(),pn==null||pn.onCaptureStarted.add(n=>He.info("Spector capture started:",n)()),pn==null||pn.onCapture.add(n=>{He.info("Spector capture complete:",n)(),pn==null||pn.getResultUI(),pn==null||pn.resultView.display(),pn==null||pn.resultView.addCapture(n)})),t.gl){const n=t.gl,r=n.device;pn==null||pn.startCapture(t.gl,500),n.device=r,new Promise(s=>setTimeout(s,2e3)).then(s=>{He.info("Spector capture stopped after 2 seconds")(),pn==null||pn.stopCapture()})}return pn}const Wq="https://unpkg.com/webgl-debug@2.0.1/index.js";function kM(t){return t.luma=t.luma||{},t.luma}async function qq(){sl()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await CM(Wq))}function Xq(t,e={}){return e.debugWebGL||e.traceWebGL?Kq(t,e):Yq(t)}function Yq(t){const e=kM(t);return e.realContext?e.realContext:t}function Kq(t,e){if(!globalThis.WebGLDebugUtils)return He.warn("webgl-debug not loaded")(),t;const n=kM(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...ac,...t});const r=globalThis.WebGLDebugUtils.makeDebugContext(t,Zq.bind(null,e),Qq.bind(null,e));for(const a in ac)!(a in r)&&typeof ac[a]=="number"&&(r[a]=ac[a]);class s{}Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.setPrototypeOf(s,r);const i=Object.create(s);return n.realContext=t,n.debugContext=i,i.debug=!0,i}function nA(t,e){e=Array.from(e).map(r=>r===void 0?"undefined":r);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function Zq(t,e,n,r){r=Array.from(r).map(l=>l===void 0?"undefined":l);const s=globalThis.WebGLDebugUtils.glEnumToString(e),i=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r),a=`${s} in gl.${n}(${i})`;He.error(a)();debugger}function Qq(t,e,n){let r="";He.level>=1&&(r=nA(e,n),t.traceWebGL&&He.log(1,r)());for(const s of n)if(s===void 0){r=r||nA(e,n);debugger}}const Gb={};function Gq(t="id"){Gb[t]=Gb[t]||1;const e=Gb[t]++;return`${t}-${e}`}class Af extends wn{constructor(n,r={}){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"glTarget");z(this,"glUsage");z(this,"glIndexType",5123);z(this,"byteLength");z(this,"bytesUsed");this.device=n,this.gl=this.device.gl;const s=typeof r=="object"?r.handle:void 0;this.handle=s||this.gl.createBuffer(),n.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=Jq(this.props.usage),this.glUsage=eX(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,r.data?this._initWithData(r.data,r.byteOffset,r.byteLength):this._initWithByteLength(r.byteLength||0)}_initWithData(n,r=0,s=n.byteLength+r){const i=this.glTarget;this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,s,this.glUsage),this.gl.bufferSubData(i,r,n),this.gl.bindBuffer(i,null),this.bytesUsed=s,this.byteLength=s,this._setDebugData(n,r,s),this.trackAllocatedMemory(s)}_initWithByteLength(n){let r=n;n===0&&(r=new Float32Array(0));const s=this.glTarget;return this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.glUsage),this.gl.bindBuffer(s,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(n,r=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,r,n),this.gl.bindBuffer(36663,null),this._setDebugData(n,r,n.byteLength)}async readAsync(n=0,r){return this.readSyncWebGL(n,r)}readSyncWebGL(n=0,r){r=r??this.byteLength-n;const s=new Uint8Array(r),i=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,s,i,r),this.gl.bindBuffer(36662,null),this._setDebugData(s,n,r),s}}function Jq(t){return t&wn.INDEX?34963:t&wn.VERTEX?34962:t&wn.UNIFORM?35345:34962}function eX(t){return t&wn.INDEX||t&wn.VERTEX?35044:t&wn.UNIFORM?35048:35044}function tX(t){const e=t.split(/\r?\n/),n=[];for(const r of e){if(r.length<=1)continue;const s=r.split(":");if(s.length===2){const[g,b]=s;n.push({message:b.trim(),type:rA(g),lineNum:0,linePos:0});continue}const[i,a,l,...u]=s;let h=parseInt(l,10);isNaN(h)&&(h=0);let d=parseInt(a,10);isNaN(d)&&(d=0),n.push({message:u.join(":").trim(),type:rA(i),lineNum:h,linePos:d})}return n}function rA(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class nX extends Fp{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return n?tX(n):[]}getTranslatedSource(){const r=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(r==null?void 0:r.getTranslatedShaderSource(this.handle))||null}async _compile(n){n=n.startsWith("#version ")?n:`#version 300 es
${n}`;const{gl:r}=this.device;if(r.shaderSource(this.handle,n),r.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}He.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),He.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async i=>await new Promise(a=>setTimeout(a,i));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:s}=this.device;for(;;){if(s.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function rX(t,e,n,r){if(aX(e))return r(t);const s=t;s.pushState();try{return sX(t,e),Jc(s.gl,n),r(t)}finally{s.popState()}}function sX(t,e){const n=t,{gl:r}=n;if(e.cullMode)switch(e.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029);break}if(e.frontFace&&r.frontFace(Ha("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&r.enable(34383),e.depthBias!==void 0&&(r.enable(32823),r.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const i=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=Ha("provokingVertex",e.provokingVertex,{first:36429,last:36430});i==null||i.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const i=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=Ha("polygonMode",e.polygonMode,{fill:6914,line:6913});i==null||i.polygonModeWEBGL(1028,a),i==null||i.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&r.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&r.enable(12288),e.clipDistance1&&r.enable(12289),e.clipDistance2&&r.enable(12290),e.clipDistance3&&r.enable(12291),e.clipDistance4&&r.enable(12292),e.clipDistance5&&r.enable(12293),e.clipDistance6&&r.enable(12294),e.clipDistance7&&r.enable(12295)),e.depthWriteEnabled!==void 0&&r.depthMask(oX("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?r.enable(2929):r.disable(2929),r.depthFunc(Fx("depthCompare",e.depthCompare))),e.stencilWriteMask){const s=e.stencilWriteMask;r.stencilMaskSeparate(1028,s),r.stencilMaskSeparate(1029,s)}if(e.stencilReadMask&&He.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const s=e.stencilReadMask||4294967295,i=Fx("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,i,0,s),r.stencilFuncSeparate(1029,i,0,s)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const s=Jb("stencilPassOperation",e.stencilPassOperation),i=Jb("stencilFailOperation",e.stencilFailOperation),a=Jb("stencilDepthFailOperation",e.stencilDepthFailOperation);r.stencilOpSeparate(1028,i,a,s),r.stencilOpSeparate(1029,i,a,s)}switch(e.blend){case!0:r.enable(3042);break;case!1:r.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const s=sA("blendColorOperation",e.blendColorOperation||"add"),i=sA("blendAlphaOperation",e.blendAlphaOperation||"add");r.blendEquationSeparate(s,i);const a=Yd("blendColorSrcFactor",e.blendColorSrcFactor||"one"),l=Yd("blendColorDstFactor",e.blendColorDstFactor||"zero"),u=Yd("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),h=Yd("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");r.blendFuncSeparate(a,l,u,h)}}function Fx(t,e){return Ha(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Jb(t,e){return Ha(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function sA(t,e){return Ha(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Yd(t,e){return Ha(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function iX(t,e){return`Illegal parameter ${e} for ${t}`}function Ha(t,e,n){if(!(e in n))throw new Error(iX(t,e));return n[e]}function oX(t,e){return e}function aX(t){let e=!0;for(const n in t){e=!1;break}return e}function NM(t){const e={};return t.addressModeU&&(e[10242]=e_(t.addressModeU)),t.addressModeV&&(e[10243]=e_(t.addressModeV)),t.addressModeW&&(e[32882]=e_(t.addressModeW)),t.magFilter&&(e[10240]=jx(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=lX(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=Fx("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function e_(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function jx(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function lX(t,e="none"){if(!e)return jx(t);switch(e){case"none":return jx(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class Bx extends jp{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"parameters");this.device=n,this.parameters=NM(r),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[r,s]of Object.entries(n)){const i=Number(r);switch(i){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,i,s);break;default:this.device.gl.samplerParameteri(this.handle,i,s);break}}}}class uc extends Dp{constructor(n,r){super(n,{...Nn.defaultProps,...r});z(this,"device");z(this,"gl");z(this,"handle");z(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=r.texture}}const cX="Failed to deduce GL constant from typed array";function uX(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(cX)}}function fX(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function MM(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function hX(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function Jp(t,e,n){if(dX(e))return n(t);const{nocatch:r=!0}=e,s=$a.get(t);s.push(),Jc(t,e);let i;if(r)i=n(t),s.pop();else try{i=n(t)}finally{s.pop()}return i}function dX(t){for(const e in t)return!1;return!0}function pX(t,e,n){const{dimension:r,width:s,height:i,depth:a=0}=n,{glInternalFormat:l}=n,u=n.glTarget;switch(r){case"2d-array":case"3d":t.texStorage3D(u,e,l,s,i,a);break;default:t.texStorage2D(u,e,l,s,i)}}function iA(t,e,n,r){const{width:s,height:i}=r,{dimension:a,depth:l=0,mipLevel:u=0}=r,{x:h=0,y:d=0,z:g=0}=r,{glFormat:b,glType:w}=r,R=IM(r.glTarget,a,l),A=r.flipY?{37440:!0}:{};Jp(t,A,()=>{switch(a){case"2d-array":case"3d":t.bindTexture(R,e),t.texSubImage3D(R,u,h,d,g,s,i,l,b,w,n),t.bindTexture(R,null);break;case"2d":case"cube":t.bindTexture(R,e),t.texSubImage2D(R,u,h,d,s,i,b,w,n),t.bindTexture(R,null);break;default:throw new Error(a)}})}function oA(t,e,n){const{dimension:r,width:s,height:i,depth:a=0,mipLevel:l=0,byteOffset:u=0}=n,{x:h=0,y:d=0,z:g=0}=n,{glFormat:b,glType:w,compressed:R}=n,A=IM(n.glTarget,r,a);switch(r){case"2d-array":case"3d":R?t.compressedTexSubImage3D(A,l,h,d,g,s,i,a,b,e,u):t.texSubImage3D(A,l,h,d,g,s,i,a,b,w,e,u);break;case"2d":case"cube":R?t.compressedTexSubImage2D(A,l,h,d,s,i,b,e,u):t.texSubImage2D(A,l,h,d,s,i,b,w,e,u);break;default:throw new Error(r)}}function gX(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function IM(t,e,n){return e==="cube"?34069+n:t}function mX(t,e){var M;const{sourceX:n=0,sourceY:r=0,sourceAttachment:s=0}=e||{};let{target:i=null,sourceWidth:a,sourceHeight:l,sourceDepth:u,sourceFormat:h,sourceType:d}=e||{};const{framebuffer:g,deleteFramebuffer:b}=OM(t),{gl:w,handle:R}=g;a||(a=g.width),l||(l=g.height);const A=(M=g.colorAttachments[s])==null?void 0:M.texture;if(!A)throw new Error(`Invalid framebuffer attachment ${s}`);u=(A==null?void 0:A.depth)||1,h||(h=(A==null?void 0:A.glFormat)||6408),d||(d=(A==null?void 0:A.glType)||5121),i=_X(i,d,h,a,l),d=d||uX(i);const C=w.bindFramebuffer(36160,R);return w.readBuffer(36064+s),w.readPixels(n,r,a,l,h,d,i),w.readBuffer(36064),w.bindFramebuffer(36160,C||null),b&&g.destroy(),i}function yX(t,e){const{target:n,sourceX:r=0,sourceY:s=0,sourceFormat:i=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:l,sourceHeight:u,sourceType:h}=e||{};const{framebuffer:d,deleteFramebuffer:g}=OM(t);l=l||d.width,u=u||d.height;const b=d;h=h||5121;let w=n;if(!w){const A=MM(i),C=hX(h),M=a+l*u*A*C;w=b.device.createBuffer({byteLength:M})}const R=t.device.createCommandEncoder();return R.copyTextureToBuffer({sourceTexture:t,width:l,height:u,origin:[r,s],destinationBuffer:w,byteOffset:a}),R.destroy(),g&&d.destroy(),w}function OM(t){return t instanceof Bp?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:bX(t),deleteFramebuffer:!0}}function bX(t,e){const{device:n,width:r,height:s,id:i}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${i}`,width:r,height:s,colorAttachments:[t]})}function _X(t,e,n,r,s,i){if(t)return t;e||(e=5121);const a=fX(e,{clamped:!1}),l=MM(n);return new a(r*s*l)}class Rf extends Nn{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"sampler");z(this,"view");z(this,"mipmaps");z(this,"compressed");z(this,"glTarget");z(this,"glFormat");z(this,"glType");z(this,"glInternalFormat");z(this,"textureUnit",0);const s={...this.props};s.data=r.data,this.device=n,this.gl=this.device.gl,this.glTarget=gX(this.props.dimension);const i=RM(this.props.format);this.glInternalFormat=i.internalFormat,this.glFormat=i.format,this.glType=i.type,this.compressed=i.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(s),Object.seal(this)}_initialize(n){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:n.data});let{width:r,height:s}=n;if(!r||!s){const i=Nn.getTextureDataSize(n.data);r=(i==null?void 0:i.width)||1,s=(i==null?void 0:i.height)||1}if(this.width=r,this.height=s,this.depth=n.depth,this.setSampler(n.sampler),this.view=new uc(this.device,{...this.props,texture:this}),this.bind(),pX(this.gl,this.mipLevels,this),n.data)switch(n.dimension){case"1d":this.setTexture1DData(n.data);break;case"2d":this.setTexture2DData(n.data);break;case"3d":this.setTexture3DData(n.data);break;case"cube":this.setTextureCubeData(n.data);break;case"2d-array":this.setTextureArrayData(n.data);break;case"cube-array":this.setTextureCubeArrayData(n.data);break;default:throw new Error(n.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(n){return new uc(this.device,{...n,texture:this})}setSampler(n={}){let r;n instanceof Bx?(this.sampler=n,r=n.props):(this.sampler=new Bx(this.device,n),r=n);const s=NM(r);this._setSamplerParameters(s)}generateMipmap(n){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(He.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(n!=null&&n.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(s){He.warn(`Error generating mipmap for ${this}: ${s.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(n){const r=Nn.getExternalImageSize(n.image),s={...Nn.defaultCopyExternalImageOptions,...r,...n},{image:i,depth:a,mipLevel:l,x:u,y:h,z:d,flipY:g}=s;let{width:b,height:w}=s;const{dimension:R,glTarget:A,glFormat:C,glInternalFormat:M,glType:N}=this;if(b=Math.min(b,this.width-u),w=Math.min(w,this.height-h),n.sourceX||n.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return iA(this.device.gl,this.handle,i,{dimension:R,mipLevel:l,x:u,y:h,z:d,width:b,height:w,depth:a,glFormat:C,glType:N,glTarget:A,flipY:g}),{width:s.width,height:s.height}}setTexture1DData(n){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(n,r=0){this.bind();const s=Nn.normalizeTextureData(n,this);s.length>1&&this.props.mipmaps!==!1&&He.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let i=0;i<s.length;i++){const a=s[i];this._setMipLevel(r,i,a)}this.unbind()}setTexture3DData(n){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(n)&&(this.bind(),oA(this.device.gl,n,this),this.unbind())}setTextureCubeData(n,r=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const s of Nn.CubeFaces)this.setTextureCubeFaceData(n[s],s)}setTextureArrayData(n){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(n){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(n,r,s=0){Array.isArray(n)&&n.length>1&&this.props.mipmaps!==!1&&He.warn(`${this.id} has mipmap and multiple LODs.`)();const i=Nn.CubeFaces.indexOf(r);this.setTexture2DData(n,i)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(n){const{face:r,width:s,height:i,pixels:a,data:l,format:u=6408,type:h=5121}=n,{gl:d}=this,g=a||l;this.bind(),g instanceof Promise?g.then(b=>this.setImageDataForFace(Object.assign({},n,{face:r,data:b,pixels:b}))):this.width||this.height?d.texImage2D(r,0,u,s,i,0,u,h,g):d.texImage2D(r,0,u,u,h,g)}_getImageDataMap(n){for(let r=0;r<Nn.CubeFaces.length;++r){const s=Nn.CubeFaces[r];n[s]&&(n[34069+r]=n[s],delete n[s])}return n}_setSamplerParameters(n){He.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(n))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[r,s]of Object.entries(n)){const i=Number(r),a=s;switch(i){case 33082:case 33083:this.gl.texParameterf(this.glTarget,i,a);break;case 10241:this.gl.texParameteri(this.glTarget,i,a);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,i,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,i,a);break;default:this.gl.texParameteri(this.glTarget,i,a);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(n,r,s,i=this.glTarget){if(Nn.isExternalImage(s)){iA(this.device.gl,this.handle,s,{...this,depth:n,mipLevel:r,glTarget:i,flipY:this.props.flipY});return}if(Nn.isTextureLevelData(s)){oA(this.device.gl,s.data,{...this,depth:n,mipLevel:r,glTarget:i});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,this.handle),n}unbind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,null),n}}const xX=[1,2,4,8];class vX extends hx{constructor(n,r){var a;super(n,r);z(this,"device");z(this,"glParameters");this.device=n;let s;if(!((a=r==null?void 0:r.parameters)!=null&&a.viewport))if(r!=null&&r.framebuffer){const{width:l,height:u}=r.framebuffer;s=[0,0,l,u]}else{const[l,u]=n.getCanvasContext().getDrawingBufferSize();s=[0,0,l,u]}this.device.pushState(),this.setParameters({viewport:s,...this.props.parameters});const i=this.props.framebuffer;if(i!=null&&i.handle)if(this.props.framebuffer){const l=this.props.framebuffer.colorAttachments.map((u,h)=>36064+h);this.device.gl.drawBuffers(l)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const r={...this.glParameters};r.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(r.depthMask=!this.props.depthReadOnly),r.stencilMask=this.props.stencilReadOnly?0:1,r[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(r.viewport=n.viewport.slice(0,4),r.depthRange=[n.viewport[4],n.viewport[5]]):r.viewport=n.viewport),n.scissorRect&&(r.scissorTest=!0,r.scissor=n.scissorRect),n.blendConstant&&(r.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),n[2967]=n.stencilReference),n.colorMask&&(r.colorMask=xX.map(s=>!!(s&n.colorMask))),this.glParameters=r,Jc(this.device.gl,r)}beginOcclusionQuery(n){const r=this.props.occlusionQuerySet;r==null||r.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let r=0;this.props.clearColors&&this.props.clearColors.forEach((s,i)=>{s&&this.clearColorBuffer(i,s)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(r|=16384,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(r|=256,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(r|=1024,n.clearStencil=this.props.clearStencil),r!==0&&Jp(this.device.gl,n,()=>{this.device.gl.clear(r)})}clearColorBuffer(n=0,r=[0,0,0,0]){Jp(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(r.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,n,r);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,n,r);break;case Float32Array:this.device.gl.clearBufferfv(6144,n,r);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function wX(t){return SX.includes(t)}const SX=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],PM={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function DM(t){const e=PM[t];if(!e)throw new Error("uniform");const[n,r,,s]=e;return{format:s,components:r,glType:n}}function TX(t){const e=PM[t];if(!e)throw new Error("attribute");const[,n,,r,s]=e;return{attributeType:r,vertexFormat:s,components:n}}function EX(t,e){const n={attributes:[],bindings:[]};n.attributes=AX(t,e);const r=kX(t,e);for(const l of r){const u=l.uniforms.map(h=>({name:h.name,format:h.format,byteOffset:h.byteOffset,byteStride:h.byteStride,arrayLength:h.arrayLength}));n.bindings.push({type:"uniform",name:l.name,group:0,location:l.location,visibility:(l.vertex?1:0)&(l.fragment?2:0),minBindingSize:l.byteLength,uniforms:u})}const s=CX(t,e);let i=0;for(const l of s)if(wX(l.type)){const{viewDimension:u,sampleType:h}=MX(l.type);n.bindings.push({type:"texture",name:l.name,group:0,location:i,viewDimension:u,sampleType:h}),l.textureUnit=i,i+=1}s.length&&(n.uniforms=s);const a=RX(t,e);return a!=null&&a.length&&(n.varyings=a),n}function AX(t,e){const n=[],r=t.getProgramParameter(e,35721);for(let s=0;s<r;s++){const i=t.getActiveAttrib(e,s);if(!i)throw new Error("activeInfo");const{name:a,type:l}=i,u=t.getAttribLocation(e,a);if(u>=0){const{attributeType:h}=TX(l),d=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:u,stepMode:d,type:h})}}return n.sort((s,i)=>s.location-i.location),n}function RX(t,e){const n=[],r=t.getProgramParameter(e,35971);for(let s=0;s<r;s++){const i=t.getTransformFeedbackVarying(e,s);if(!i)throw new Error("activeInfo");const{name:a,type:l,size:u}=i,{glType:h,components:d}=DM(l),g={location:s,name:a,type:h,size:u*d};n.push(g)}return n.sort((s,i)=>s.location-i.location),n}function CX(t,e){const n=[],r=t.getProgramParameter(e,35718);for(let s=0;s<r;s++){const i=t.getActiveUniform(e,s);if(!i)throw new Error("activeInfo");const{name:a,size:l,type:u}=i,{name:h,isArray:d}=IX(a);let g=t.getUniformLocation(e,h);const b={location:g,name:h,size:l,type:u,isArray:d};if(n.push(b),b.size>1)for(let w=0;w<b.size;w++){const R=`${h}[${w}]`;g=t.getUniformLocation(e,R);const A={...b,name:R,location:g};n.push(A)}}return n}function kX(t,e){const n=(i,a)=>t.getActiveUniformBlockParameter(e,i,a),r=[],s=t.getProgramParameter(e,35382);for(let i=0;i<s;i++){const a={name:t.getActiveUniformBlockName(e,i)||"",location:n(i,35391),byteLength:n(i,35392),vertex:n(i,35396),fragment:n(i,35398),uniformCount:n(i,35394),uniforms:[]},l=n(i,35395)||[],u=t.getActiveUniforms(e,l,35383),h=t.getActiveUniforms(e,l,35384),d=t.getActiveUniforms(e,l,35387),g=t.getActiveUniforms(e,l,35388);for(let b=0;b<a.uniformCount;++b){const w=t.getActiveUniform(e,l[b]);if(!w)throw new Error("activeInfo");a.uniforms.push({name:w.name,format:DM(u[b]).format,type:u[b],arrayLength:h[b],byteOffset:d[b],byteStride:g[b]})}r.push(a)}return r.sort((i,a)=>i.location-a.location),r}const NX={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function MX(t){const e=NX[t];if(!e)throw new Error("sampler");const[n,r]=e;return{viewDimension:n,sampleType:r}}function IX(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function OX(t,e,n,r){const s=t;let i=r;i===!0&&(i=1),i===!1&&(i=0);const a=typeof i=="number"?[i]:i;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof r!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,r);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return s.uniform1uiv(e,a,1);case 36294:return s.uniform2uiv(e,a,2);case 36295:return s.uniform3uiv(e,a,3);case 36296:return s.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return s.uniformMatrix2x3fv(e,!1,a);case 35686:return s.uniformMatrix2x4fv(e,!1,a);case 35687:return s.uniformMatrix3x2fv(e,!1,a);case 35688:return s.uniformMatrix3x4fv(e,!1,a);case 35689:return s.uniformMatrix4x2fv(e,!1,a);case 35690:return s.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function PX(t){return pM(t)!==null||typeof t=="number"||typeof t=="boolean"}function DX(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];PX(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}function FX(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function jX(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const aA=4;class BX extends Oc{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"vs");z(this,"fs");z(this,"introspectedLayout");z(this,"uniforms",{});z(this,"bindings",{});z(this,"varyings",null);z(this,"_uniformCount",0);z(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=r.vs,this.fs=r.fs;const{varyings:s,bufferMode:i=35981}=r;s&&s.length>0&&(this.varyings=s,this.device.gl.transformFeedbackVaryings(this.handle,s,i)),this._linkShaders(),He.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=EX(this.device.gl,this.handle),He.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=UX(this.introspectedLayout,r.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(n,r){for(const[s,i]of Object.entries(n)){const a=this.shaderLayout.bindings.find(l=>l.name===s)||this.shaderLayout.bindings.find(l=>l.name===`${s}Uniforms`);if(!a){const l=this.shaderLayout.bindings.map(u=>`"${u.name}"`).join(", ");r!=null&&r.disableWarnings||He.warn(`No binding "${s}" in render pipeline "${this.id}", expected one of ${l}`,i)();continue}switch(i||He.warn(`Unsetting binding "${s}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(i instanceof Af)&&!(i.buffer instanceof Af))throw new Error("buffer value");break;case"texture":if(!(i instanceof uc||i instanceof Rf||i instanceof Ef))throw new Error("texture value");break;case"sampler":He.warn(`Ignoring sampler ${s}`)();break;default:throw new Error(a.type)}this.bindings[s]=i}}draw(n){var C;const{renderPass:r,parameters:s=this.props.parameters,topology:i=this.props.topology,vertexArray:a,vertexCount:l,instanceCount:u,isInstanced:h=!1,firstVertex:d=0,transformFeedback:g}=n,b=FX(i),w=!!a.indexBuffer,R=(C=a.indexBuffer)==null?void 0:C.glIndexType;if(this.linkStatus!=="success")return He.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return He.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(r),g&&g.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const A=r;return rX(this.device,s,A.glParameters,()=>{w&&h?this.device.gl.drawElementsInstanced(b,l||0,R,d,u||0):w?this.device.gl.drawElements(b,l||0,R,d):h?this.device.gl.drawArraysInstanced(b,d,l||0,u||0):this.device.gl.drawArrays(b,d,l||0),g&&g.end()}),a.unbindAfterRender(r),!0}setUniformsWebGL(n){const{bindings:r}=DX(n);Object.keys(r).forEach(s=>{He.warn(`Unsupported value "${JSON.stringify(r[s])}" used in setUniforms() for key ${s}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,n)}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),He.time(aA,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),He.timeEnd(aA,`linkProgram for ${this.id}`)(),He.level,!this.device.features.has("compilation-status-async-webgl")){const s=this._getLinkStatus();this._reportLinkStatus(s);return}He.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),He.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const r=this._getLinkStatus();this._reportLinkStatus(r)}async _reportLinkStatus(n){var r;switch(n){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((r=this.fs)==null?void 0:r.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const s=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${n}: ${s}`)}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const n=async i=>await new Promise(a=>setTimeout(a,i));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:s}=this.device;for(;;){if(s.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const r of this.shaderLayout.bindings)!this.bindings[r.name]&&!this.bindings[r.name.replace(/Uniforms$/,"")]&&(He.warn(`Binding ${r.name} not found in ${this.id}`)(),n=!1);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let r=0,s=0;for(const i of this.shaderLayout.bindings){const a=this.bindings[i.name]||this.bindings[i.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${i.name} in ${this.id}`);switch(i.type){case"uniform":const{name:l}=i,u=n.getUniformBlockIndex(this.handle,l);if(u===4294967295)throw new Error(`Invalid uniform block name ${l}`);n.uniformBlockBinding(this.handle,s,u),a instanceof Af?n.bindBufferBase(35345,s,a.handle):n.bindBufferRange(35345,s,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),s+=1;break;case"texture":if(!(a instanceof uc||a instanceof Rf||a instanceof Ef))throw new Error("texture");let h;if(a instanceof uc)h=a.texture;else if(a instanceof Rf)h=a;else if(a instanceof Ef&&a.colorAttachments[0]instanceof uc)He.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),h=a.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+r),n.bindTexture(h.glTarget,h.handle),r+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${i.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:r,location:s,type:i,textureUnit:a}=n,l=this.uniforms[r]??a;l!==void 0&&OX(this.device.gl,s,i,l)}}}function UX(t,e){const n={...t,attributes:t.attributes.map(r=>({...r}))};for(const r of(e==null?void 0:e.attributes)||[]){const s=n.attributes.find(i=>i.name===r.name);s?(s.type=r.type||s.type,s.stepMode=r.stepMode||s.stepMode):He.warn(`shader layout attribute ${r.name} not present in shader`)}return n}class LX extends px{constructor(n){super(n,{});z(this,"device");z(this,"commands",[]);this.device=n}submitCommands(n=this.commands){for(const r of n)switch(r.name){case"copy-buffer-to-buffer":zX(this.device,r.options);break;case"copy-buffer-to-texture":VX(this.device,r.options);break;case"copy-texture-to-buffer":$X(this.device,r.options);break;case"copy-texture-to-texture":HX(this.device,r.options);break;default:throw new Error(r.name)}}}function zX(t,e){const n=e.sourceBuffer,r=e.destinationBuffer;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,r.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function VX(t,e){throw new Error("Not implemented")}function $X(t,e){const{sourceTexture:n,mipLevel:r=0,aspect:s="all",width:i=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:l=0,origin:u=[0,0],destinationBuffer:h,byteOffset:d=0,bytesPerRow:g,rowsPerImage:b}=e;if(s!=="all")throw new Error("aspect not supported in WebGL");if(r!==0||l!==0||g||b)throw new Error("not implemented");const{framebuffer:w,destroyFramebuffer:R}=FM(n);let A;try{const C=h,M=i||w.width,N=a||w.height,k=RM(w.colorAttachments[0].texture.props.format),F=k.format,B=k.type;t.gl.bindBuffer(35051,C.handle),A=t.gl.bindFramebuffer(36160,w.handle),t.gl.readPixels(u[0],u[1],M,N,F,B,d)}finally{t.gl.bindBuffer(35051,null),A!==void 0&&t.gl.bindFramebuffer(36160,A),R&&w.destroy()}}function HX(t,e){const{sourceTexture:n,destinationMipLevel:r=0,origin:s=[0,0],destinationOrigin:i=[0,0],destinationTexture:a}=e;let{width:l=e.destinationTexture.width,height:u=e.destinationTexture.height}=e;const{framebuffer:h,destroyFramebuffer:d}=FM(n),[g,b]=s,[w,R,A]=i,C=t.gl.bindFramebuffer(36160,h.handle);let M=null,N;if(a instanceof Rf)M=a,l=Number.isFinite(l)?l:M.width,u=Number.isFinite(u)?u:M.height,M.bind(0),N=M.glTarget;else throw new Error("invalid destination");switch(N){case 3553:case 34067:t.gl.copyTexSubImage2D(N,r,w,R,g,b,l,u);break;case 35866:case 32879:t.gl.copyTexSubImage3D(N,r,w,R,A,g,b,l,u);break}M&&M.unbind(),t.gl.bindFramebuffer(36160,C),d&&h.destroy()}function FM(t){if(t instanceof Nn){const{width:e,height:n,id:r}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${r}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class WX extends dx{constructor(n,r){super(n,r);z(this,"device");z(this,"commandBuffer");this.device=n,this.commandBuffer=new LX(n)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,r,s){}}function qX(t){const{target:e,source:n,start:r=0,count:s=1}=t,i=n.length,a=s*i;let l=0;for(let u=r;l<i;l++)e[u++]=n[l];for(;l<a;)l<a-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+a-l),l=a);return t.target}class f0 extends gx{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"buffer",null);z(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return g8()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const r=n;if(r&&r.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,r?r.handle:null),this.indexBuffer=r,this.device.gl.bindVertexArray(null)}setBuffer(n,r){const s=r;if(s.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:i,type:a,stride:l,offset:u,normalized:h,integer:d,divisor:g}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,s.handle),d?this.device.gl.vertexAttribIPointer(n,i,a,l,u):this.device.gl.vertexAttribPointer(n,i,a,h,l,u),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,g||0),this.attributes[n]=s,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,r){this._enable(n,!1),this.attributes[n]=r}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const r=this.attributes[n];ArrayBuffer.isView(r)&&this.device.setConstantAttributeWebGL(n,r)}}_getAccessor(n){const r=this.attributeInfos[n];if(!r)throw new Error(`Unknown attribute location ${n}`);const s=AM(r.bufferDataType);return{size:r.bufferComponents,type:s,stride:r.byteStride,offset:r.byteOffset,normalized:r.normalized,integer:r.integer,divisor:r.stepMode==="instance"?1:0}}_enable(n,r=!0){const i=f0.isConstantAttributeZeroSupported(this.device)||n!==0;(r||i)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),r?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,r){const s=XX(r),i=s.byteLength*n,a=s.length*n;if(this.buffer&&i!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${i} !== ${this.buffer.byteLength}.`);let l=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:i}),l=l||!YX(s,this.bufferValue),l){const u=t$(r.constructor,a);qX({target:u,source:s,start:0,count:a}),this.buffer.write(u),this.bufferValue=r}return this.buffer}}function XX(t){return Array.isArray(t)?new Float32Array(t):t}function YX(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class KX extends mx{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"layout");z(this,"buffers",{});z(this,"unusedBuffers",{});z(this,"bindOnUse",!0);z(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,r.buffers&&this.setBuffers(r.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(jX(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const r in n)this.setBuffer(r,n[r])})}setBuffer(n,r){const s=this._getVaryingIndex(n),{buffer:i,byteLength:a,byteOffset:l}=this._getBufferRange(r);if(s<0){this.unusedBuffers[n]=i,He.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[s]={buffer:i,byteLength:a,byteOffset:l},this.bindOnUse||this._bindBuffer(s,i,l,a)}getBuffer(n){if(lA(n))return this.buffers[n]||null;const r=this._getVaryingIndex(n);return r>=0?this.buffers[r]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let r;return this._bound?r=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,r=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),r}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof Af)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:r,byteOffset:s=0,byteLength:i=n.buffer.byteLength}=n;return{buffer:r,byteOffset:s,byteLength:i}}_getVaryingIndex(n){if(lA(n))return Number(n);for(const r of this.layout.varyings)if(n===r.name)return r.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:r,byteLength:s,byteOffset:i}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),r,i,s)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,r,s=0,i){const a=r&&r.handle;!a||i===void 0?this.gl.bindBufferBase(35982,n,a):this.gl.bindBufferRange(35982,n,a,s,i)}}function lA(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class ZX extends yx{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"target",null);z(this,"_queryPending",!1);z(this,"_pollingPromise",null);if(this.device=n,r.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((s,i)=>{const a=()=>{this.isResultAvailable()?(s(this.getResult()),this._pollingPromise=null):r++>n?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}class fc extends Ko{constructor(n){var g,b;super({...n,id:n.id||Gq("webgl-device")});z(this,"type","webgl");z(this,"handle");z(this,"features");z(this,"limits");z(this,"info");z(this,"canvasContext");z(this,"lost");z(this,"_resolveContextLost");z(this,"gl");z(this,"debug",!1);z(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});z(this,"_extensions",{});z(this,"_polyfilled",!1);z(this,"spectorJS");z(this,"renderPass",null);z(this,"_constants");const r=Ko._getCanvasContextProps(n);if(!r)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let s=(b=(g=r.canvas)==null?void 0:g.gl)==null?void 0:b.device;if(s)throw new Error(`WebGL context already attached to device ${s.id}`);this.canvasContext=new zq(this,r),this.lost=new Promise(w=>{this._resolveContextLost=w});const i={...n.webgl};r.alphaMode==="premultiplied"&&(i.premultipliedAlpha=!0),n.powerPreference!==void 0&&(i.powerPreference=n.powerPreference);const l=this.props._handle||vq(this.canvasContext.canvas,{onContextLost:w=>{var R;return(R=this._resolveContextLost)==null?void 0:R.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:w=>console.log("WebGL context restored")},i);if(!l)throw new Error("WebGL context creation failed");if(s=l.device,s){if(n._reuseDevices)return He.log(1,`Not creating a new Device, instead returning a reference to Device ${s.id} already attached to WebGL context`,s)(),s._reused=!0,s;throw new Error(`WebGL context already attached to device ${s.id}`)}this.handle=l,this.gl=l,this.spectorJS=Hq({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=wq(this.gl,this._extensions),this.limits=new Bq(this.gl),this.features=new jq(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),r.autoResize!==!1&&this.canvasContext.resize(),new $a(this.gl,{log:(...w)=>He.log(1,...w)()}).trackState(this.gl,{copyState:!1});const h=n.debugWebGL||n.debug,d=n.debugWebGL;h&&(this.gl=Xq(this.gl,{debugWebGL:h,traceWebGL:d}),He.warn("WebGL debug mode activated. Performance reduced.")(),n.debugWebGL&&(He.level=Math.max(He.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const r=this._normalizeBufferProps(n);return new Af(this,r)}createTexture(n){return new Rf(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new Bx(this,n)}createShader(n){return new nX(this,n)}createFramebuffer(n){return new Ef(this,n)}createVertexArray(n){return new f0(this,n)}createTransformFeedback(n){return new KX(this,n)}createQuerySet(n){return new ZX(this,n)}createRenderPipeline(n){return new BX(this,n)}beginRenderPass(n){return new vX(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(n={}){return new WX(this,n)}submit(){var n;(n=this.renderPass)==null||n.end(),this.renderPass=null}readPixelsToArrayWebGL(n,r){return mX(n,r)}readPixelsToBufferWebGL(n,r){return yX(n,r)}setParametersWebGL(n){Jc(this.gl,n)}getParametersWebGL(n){return TM(this.gl,n)}withParametersWebGL(n,r){return Jp(this.gl,n,r)}resetWebGL(){He.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),mq(this.gl)}_getDeviceSpecificTextureFormatCapabilities(n){return Oq(this.gl,n,this._extensions)}loseDevice(){var i;let n=!1;const s=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return s&&(n=!0,s.loseContext()),(i=this._resolveContextLost)==null||i.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){$a.get(this.gl).push()}popState(){$a.get(this.gl).pop()}setSpectorMetadata(n,r){n.__SPECTOR_Metadata=r}getGLKey(n,r){const s=Number(n);for(const i in this.gl)if(this.gl[i]===s)return`GL.${i}`;return r!=null&&r.emptyIfUnknown?"":String(n)}getGLKeys(n){const r={emptyIfUnknown:!0};return Object.entries(n).reduce((s,[i,a])=>(s[`${i}:${this.getGLKey(i,r)}`]=`${a}:${this.getGLKey(a,r)}`,s),{})}setConstantAttributeWebGL(n,r){const s=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(s).fill(null);const i=this._constants[n];switch(i&&eY(i,r)&&He.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=r,r.constructor){case Float32Array:QX(this,n,r);break;case Int32Array:GX(this,n,r);break;case Uint32Array:JX(this,n,r);break;default:throw new Error("constant")}}getExtension(n){return Vc(this.gl,n,this._extensions),this._extensions}}function QX(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break}}function GX(t,e,n){t.gl.vertexAttribI4iv(e,n)}function JX(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function eY(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const tY={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},nY=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),rY=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),sY=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function iY(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(n,r){if(n==="webgl"||n==="experimental-webgl"){const s=this.originalGetContext("webgl2",r);return s instanceof HTMLElement&&oY(s),s}return this.originalGetContext(n,r)}}function oY(t){t.getExtension("EXT_color_buffer_float");const e={...tY,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:nY(t),OES_vertex_array_object:rY(t),ANGLE_instanced_arrays:sY(t)},n=t.getExtension;t.getExtension=function(s){const i=n.call(t,s);return i||(s in e?e[s]:null)};const r=t.getSupportedExtensions;t.getSupportedExtensions=function(){const s=r.apply(t)||[];return s==null?void 0:s.concat(Object.keys(e))}}const Kd=1;class aY extends MV{constructor(){super();z(this,"type","webgl");Ko.defaultProps={...Ko.defaultProps,...u0},fc.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(n){iY(n)}async attach(n){if(n instanceof fc)return n;if((n==null?void 0:n.device)instanceof Ko)return n.device;if(!lY(n))throw new Error("Invalid WebGL2RenderingContext");return new fc({_handle:n,createCanvasContext:{canvas:n.canvas,autoResize:!1}})}async create(n={}){He.groupCollapsed(Kd,"WebGLDevice created")();const r=[];(n.debugWebGL||n.debug)&&r.push(qq()),n.debugSpectorJS&&r.push($q(n));const s=await Promise.allSettled(r);for(const l of s)l.status==="rejected"&&He.error(`Failed to initialize debug libraries ${l.reason}`)();const i=new fc(n),a=`${i._reused?"Reusing":"Created"} device with WebGL2 ${i.debug?"debug ":""}context: ${i.info.vendor}, ${i.info.renderer} for canvas: ${i.canvasContext.id}`;return He.probe(Kd,a)(),He.table(Kd,i.info)(),He.groupEnd(Kd)(),i}}function lY(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const cA=new aY;function To(){}const cY=({isDragging:t})=>t?"grabbing":"grab",jM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:To,onWebGLInitialized:To,onResize:To,onViewStateChange:To,onInteractionStateChange:To,onBeforeRender:To,onAfterRender:To,onLoad:To,onError:t=>_n.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:cY,getTooltip:null,debug:!1,drawPickingColors:!1};class h0{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Dg({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=r=>{const{_pickRequest:s}=this;if(r.type==="pointerleave")s.x=-1,s.y=-1,s.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;s.x=i.x,s.y=i.y,s.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:s.x,y:s.y}),s.event=r},this._onEvent=r=>{const s=Rx[r.type],i=r.offsetCenter;if(!s||!i||!this.layerManager)return;const a=this.layerManager.getLayers(),l=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:a,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:u}=l,h=u&&(u[s]||u.props[s]),d=this.props[s];let g=!1;h&&(g=h.call(u,l,r)),g||(d==null||d(l,r),this.widgetManager.onEvent(l,r))},this._onPointerDown=r=>{var a;if(((a=this.device)==null?void 0:a.type)==="webgpu")return;const s=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:s.x,y:s.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo},this.props={...jM,...e},e=this.props,e.viewState&&e.initialViewState&&_n.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let n=this.device;!n&&e.gl&&(e.gl instanceof WebGLRenderingContext&&_n.error("WebGL1 context not supported.")(),n=cA.attach(e.gl)),n||(n=ux.createDevice({type:"best-available",_reuseDevices:!0,adapters:[cA],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&Hf.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,s,i,a,l,u,h,d;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(r=this.layerManager)==null||r.finalize(),this.layerManager=null,(s=this.viewManager)==null||s.finalize(),this.viewManager=null,(i=this.effectManager)==null||i.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(l=this.deckPicker)==null||l.finalize(),this.deckPicker=null,(u=this.eventManager)==null||u.destroy(),this.eventManager=null,(h=this.widgetManager)==null||h.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((d=this.canvas.parentElement)==null||d.removeChild(this.canvas),this.canvas=null)}setProps(e){var r;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&_n.removed("onLayerHover","onHover")(),"onLayerClick"in e&&_n.removed("onLayerClick","onClick")(),e.initialViewState&&!Hs(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(r=this.animationLoop)==null||r.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return n=n||r||s||i||a,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Tr(this.viewManager),this.viewManager.views}getViewports(e){return Tr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,r){Tr(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(n).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return s.get(n).timeEnd(),i}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Tr(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var s;if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const i=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=i}if(r||r===0){const i=Number.isFinite(r)?`${r}px`:r;this.canvas.style.position=((s=e.style)==null?void 0:s.position)||"absolute",this.canvas.style.height=i}}_updateCanvasSize(){var s,i;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,r=e.clientHeight??e.height;(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,(s=this.viewManager)==null||s.setProps({width:n,height:r}),(i=this.layerManager)==null||i.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:r}))}_createAnimationLoop(e,n){const{gl:r,onError:s,useDevicePixels:i}=n;return new fW({device:e,useDevicePixels:i,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new vM({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,r,s,i;if(((n=this.device)==null?void 0:n.type)==="webgpu")return;const{_pickRequest:e}=this;if(e.event){const{result:a,emptyInfo:l}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=a.length>0;let u=l,h=!1;for(const d of a)u=d,h=((r=d.layer)==null?void 0:r.onHover(d,e.event))||h;h||((i=(s=this.props).onHover)==null||i.call(s,u,e.event),this.widgetManager.onHover(u,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var s,i;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(s=this.device.canvasContext)==null?void 0:s.canvas),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const n=new dM;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new U7(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(NE).map(a=>{var w;const[l,u,h,d]=NE[a],g=(w=this.props.eventRecognizerOptions)==null?void 0:w[a],b={...u,...g,event:a};return{recognizer:new l(b),recognizeWith:h,requestFailure:d}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in Rx)this.eventManager.on(a,this._onEvent);this.viewManager=new FW({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new DW(this.device,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new GW({deck:this,device:this.device}),this.deckRenderer=new tq(this.device),this.deckPicker=new aq(this.device),this.widgetManager=new uq({deck:this,parentElement:(i=this.canvas)==null?void 0:i.parentElement}),this.widgetManager.addDefault(new hq),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var a;const{device:r,gl:s}=this.layerManager.context;this.props.onBeforeRender({device:r,gl:s});const i={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(a=this.deckRenderer)==null||a.renderLayers(i),i.pass==="screen"&&this.widgetManager.onRedraw({viewports:i.viewports,layers:i.layers}),this.props.onAfterRender({device:r,gl:s})}_onRenderFrame(){var e;this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),_n.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),((e=this.device)==null?void 0:e.type)!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=ux.stats.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}h0.defaultProps=jM;h0.VERSION=F5;function uY(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return _N(t)}}const fY=bN;function Zd(t,e,n){const r=n==="webgpu"&&e.type==="uint8"?"unorm8":e.type;return{attribute:t,format:e.size>1?`${r}x${e.size}`:e.type,byteOffset:e.offset||0}}function Ma(t){return t.stride||t.size*t.bytesPerElement}function hY(t,e){return t.type===e.type&&t.size===e.size&&Ma(t)===Ma(e)&&(t.offset||0)===(e.offset||0)}function Ux(t,e){e.offset&&_n.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Ma(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,s=e.elementOffset||0,i=r*n+s*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}function dY(t,e){const n=Ux(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class pY{constructor(e,n,r){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const s=n.logicalType||n.type,i=s==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let l;i?l="float32":!s&&n.isIndexed?l="uint32":l=s||"float32";let u=uY(s||l);this.doublePrecision=i,i&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:a,logicalType:s,type:l,normalized:l.includes("norm"),size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ma(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Hf.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const r={};if(this.state.constant){const s=this.value;if(n){const i=Ux(this.getAccessor(),n),a=i.offset/s.BYTES_PER_ELEMENT,l=i.size||this.size;r[e]=s.subarray(a,a+l)}else r[e]=s}else r[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?r[`${e}64Low`]=r[e]:r[`${e}64Low`]=new Float32Array(this.size)),r}_getBufferLayout(e=this.id,n=null){const r=this.getAccessor(),s=[],i={name:this.id,byteStride:Ma(r),attributes:s};if(this.doublePrecision){const a=dY(r,n||{});s.push(Zd(e,{...r,...a.high},this.device.type),Zd(`${e}64Low`,{...r,...a.low},this.device.type))}else if(n){const a=Ux(r,n);s.push(Zd(e,{...r,...a},this.device.type))}else s.push(Zd(e,r,this.device.type));return i}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:s}=this,i=r*s;if(n&&i&&n.length>=i){const a=new Array(s).fill(1/0),l=new Array(s).fill(-1/0);for(let u=0;u<i;)for(let h=0;h<s;h++){const d=n[u++];d<a[h]&&(a[h]=d),d>l[h]&&(l[h]=d)}e=[a,l]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof wn?r={buffer:e}:r=e;const s={...this.settings,...r};if(ArrayBuffer.isView(r.value)){if(!r.type)if(this.doublePrecision&&r.value instanceof Float64Array)s.type="float32";else{const a=fY(r.value);s.type=s.normalized?a.replace("int","norm"):a}s.bytesPerElement=r.value.BYTES_PER_ELEMENT,s.stride=Ma(s)}if(n.bounds=null,r.constant){let i=r.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this.normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(i)?i:new Float32Array(i)}else if(r.buffer){const i=r.buffer;n.externalBuffer=i,n.constant=!1,this.value=r.value||null}else if(r.value){this._checkExternalBuffer(r);let i=r.value;n.externalBuffer=null,n.constant=!1,this.value=i;let{buffer:a}=this;const l=Ma(s),u=(s.vertexOffset||0)*l;if(this.doublePrecision&&i instanceof Float64Array&&(i=qb(i,s)),this.settings.isIndexed){const d=this.settings.defaultType;i.constructor!==d&&(i=new d(i))}const h=i.byteLength+u+l*2;(!a||a.byteLength<h)&&(a=this._createBuffer(h)),a.write(i,u)}return this.setAccessor(s),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:s}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?qb(n,{size:this.size,startIndex:r,endIndex:s}):n.subarray(r,s),r*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:r}=this,s=r.allocatedValue,i=Hf.allocate(s,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=i;const{byteOffset:a}=this;let{buffer:l}=this;return(!l||l.byteLength<i.byteLength+a)&&(l=this._createBuffer(i.byteLength+a),n&&s&&l.write(s instanceof Float64Array?qb(s,this):s,a)),r.allocatedValue=i,r.constant=!1,r.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const r=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=n.BYTES_PER_ELEMENT<4),s)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&_n.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:s,size:i}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let a=i;for(;--a>=0;)n[r+a]=s[a];return n}switch(i){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:s[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:s[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:s[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:s[0];break;default:let a=i;for(;--a>=0;)n[r+a]=Number.isFinite(e[a])?e[a]:s[a]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let s=0;s<r;s++)if(e[s]!==n[s])return!1;return!0}_createBuffer(e){var s;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:r}=this.settings;return this._buffer=this.device.createBuffer({...(s=this._buffer)==null?void 0:s.props,id:this.id,usage:(n?wn.INDEX:wn.VERTEX)|wn.COPY_DST,indexType:n?r:void 0,byteLength:e}),this._buffer}}const uA=[],fA=[];function gY(t,e=0,n=1/0){let r=uA;const s={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(fA.length=t.length,r=fA):r=uA,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),s.index=e-1),{iterable:r,objectInfo:s}}function BM(t){return t&&t[Symbol.asyncIterator]}function mY(t,e){const{size:n,stride:r,offset:s,startIndices:i,nested:a}=e,l=t.BYTES_PER_ELEMENT,u=r?r/l:n,h=s?s/l:0,d=Math.floor((t.length-h)/u);return(g,{index:b,target:w})=>{if(!i){const M=b*u+h;for(let N=0;N<n;N++)w[N]=t[M+N];return w}const R=i[b],A=i[b+1]||d;let C;if(a){C=new Array(A-R);for(let M=R;M<A;M++){const N=M*u+h;w=new Array(n);for(let k=0;k<n;k++)w[k]=t[N+k];C[M-R]=w}}else if(u===n)C=t.subarray(R*n+h,A*n+h);else{C=new t.constructor((A-R)*n);let M=0;for(let N=R;N<A;N++){const k=N*u+h;for(let F=0;F<n;F++)C[M++]=t[k+F]}}return C}}const yY=[],gp=[[0,1/0]];function bY(t,e){if(t===gp||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let s=0;for(let i=0;i<r;i++){const a=t[i];a[1]<e[0]?(n.push(a),s=i+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(s,0,e),n}const _Y={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function UM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{..._Y[n],...e,...t,type:n}}class LM extends pY{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:gp}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!hY(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,s=Array.isArray(n)?e[n.find(i=>e[i])]:e[n];return UM(s,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:s=1/0}=n;this.state.updateRanges=bY(this.state.updateRanges,[r,s])}else this.state.updateRanges=gp}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=yY}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==gp),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:a,noAlloc:l}}=this;let u=!0;if(a){for(const[h,d]of i)a.call(s,this,{data:n,startRow:h,endRow:d,props:r,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[h,d]of i){const g=Number.isFinite(h)?this.getVertexOffset(h):0,b=Number.isFinite(d)?this.getVertexOffset(d):l||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:g,endOffset:b})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return this.device.type==="webgpu"||e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:s}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),s.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;Tr(ArrayBuffer.isView(a.value),`invalid ${s.accessor}`);const l=!!a.size&&a.size!==this.size;return r.binaryAccessor=mY(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:l}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const r in e)Object.assign(n,super.getValue(r,e[r]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,r=super._getBufferLayout(),{stepMode:s}=this.settings;if(s==="dynamic"?r.stepMode=e?e.isInstanced?"instance":"vertex":"instance":r.stepMode=s??"vertex",!n)return r;for(const i in n){const a=super._getBufferLayout(i,n[i]);r.attributes.push(...a.attributes)}return r}_autoUpdater(e,{data:n,startRow:r,endRow:s,props:i,numInstances:a}){if(e.constant&&this.context.device.type!=="webgpu")return;const{settings:l,state:u,value:h,size:d,startIndices:g}=e,{accessor:b,transform:w}=l;let R=u.binaryAccessor||(typeof b=="function"?b:i[b]);typeof R!="function"&&(R=()=>R),Tr(typeof R=="function",`accessor "${b}" is not a function`);let A=e.getVertexOffset(r);const{iterable:C,objectInfo:M}=gY(n,r,s);for(const N of C){M.index++;let k=R(N,M);if(w&&(k=w.call(this,k)),g){const F=(M.index<g.length-1?g[M.index+1]:a)-g[M.index];if(k&&Array.isArray(k[0])){let B=A;for(const P of k)e._normalizeValue(P,h,B),B+=d}else k&&k.length>d?h.set(k,A):(e._normalizeValue(k,M.target,0),NW({target:h,source:M.target,start:A,count:F}));A+=F*d}else e._normalizeValue(k,h,A),A+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function t_(t){const{source:e,target:n,start:r=0,size:s,getData:i}=t,a=t.end||n.length,l=e.length,u=a-r;if(l>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!i)return;let h=l;for(;h<u;){const d=i(h,e);for(let g=0;g<s;g++)n[r+h]=d[g]||0,h++}}function xY({source:t,target:e,size:n,getData:r,sourceStartIndices:s,targetStartIndices:i}){if(!s||!i)return t_({source:t,target:e,size:n,getData:r}),e;let a=0,l=0;const u=r&&((d,g)=>r(d+l,g)),h=Math.min(s.length,i.length);for(let d=1;d<h;d++){const g=s[d]*n,b=i[d]*n;t_({source:t.subarray(a,g),target:e,start:l,end:b,size:n,getData:u}),a=g,l=b}return l<e.length&&t_({source:[],target:e,start:l,size:n,getData:u}),e}function vY(t){const{device:e,settings:n,value:r}=t,s=new LM(e,n);return s.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),s}function zM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function VM(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function $M(t){t.push(t.shift())}function wY(t,e){const{doublePrecision:n,settings:r,value:s,size:i}=t,a=n&&s instanceof Float64Array?2:1;let l=0;const{shaderAttributes:u}=t.settings;if(u)for(const h of Object.values(u))l=Math.max(l,h.vertexOffset??0);return(r.noAlloc?s.length:(e+l)*i)*a}function HM({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function WM({device:t,buffer:e,attribute:n,fromLength:r,toLength:s,fromStartIndices:i,getData:a=l=>l}){const l=n.doublePrecision&&n.value instanceof Float64Array?2:1,u=n.size*l,h=n.byteOffset,d=n.settings.bytesPerElement<4?h/n.settings.bytesPerElement*4:h,g=n.startIndices,b=i&&g,w=n.isConstant;if(!b&&e&&r>=s)return e;const R=n.value instanceof Float64Array?Float32Array:n.value.constructor,A=w?n.value:new R(n.getBuffer().readSyncWebGL(h,s*R.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!w){const k=a;a=(F,B)=>n.normalizeConstant(k(F,B))}const C=w?(k,F)=>a(A,F):(k,F)=>a(A.subarray(k+h,k+h+u),F),M=e?new Float32Array(e.readSyncWebGL(d,r*4).buffer):new Float32Array(0),N=new Float32Array(s);return xY({source:M,target:N,sourceStartIndices:i,targetStartIndices:g,size:u,getData:C}),(!e||e.byteLength<N.byteLength+d)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:N.byteLength+d,usage:35050})),e.write(N,d),e}class qM{constructor({device:e,attribute:n,timeline:r}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Lg(r),this.attribute=n,this.attributeInTransition=vY(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,r=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=wY(this.attribute,n),this.transition.start({...e,duration:r})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class SY extends qM{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="interpolation",this.transform=RY(e,n)}start(e,n){const r=this.currentLength,s=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:i,attribute:a}=this;$M(i),i[0]=WM({device:this.device,buffer:i[0],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:s,getData:e.enter}),i[1]=HM({device:this.device,source:i[0],target:i[1]}),this.setBuffer(i[1]);const{transform:l}=this,u=l.model;let h=Math.floor(this.currentLength/a.size);XM(a)&&(h/=2),u.setVertexCount(h),a.isConstant?(u.setAttributes({aFrom:i[0]}),u.setConstantAttributes({aTo:a.value})):u.setAttributes({aFrom:i[0],aTo:a.getBuffer()}),l.transformFeedback.setBuffers({vCurrent:i[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:r}=this.transition;let s=r/e;n&&(s=n(s));const{model:i}=this.transform,a={time:s};i.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const TY=`uniform interpolationUniforms {
  float time;
} interpolation;
`,hA={name:"interpolation",vs:TY,uniformTypes:{time:"f32"}},EY=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,AY=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function XM(t){return t.doublePrecision&&t.value instanceof Float64Array}function RY(t,e){const n=e.size,r=zM(n),s=VM(n),i=e.getBufferLayout();return XM(e)?new qf(t,{vs:AY,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:s,byteOffset:0},{attribute:"aFrom64Low",format:s,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:s,byteOffset:0},{attribute:"aTo64Low",format:s,byteOffset:4*n}]}],modules:[j9,hA],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new qf(t,{vs:EY,bufferLayout:[{name:"aFrom",format:s},{name:"aTo",format:i.attributes[0].format}],modules:[hA],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}class CY extends qM{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="spring",this.texture=PY(e),this.framebuffer=DY(e,this.texture),this.transform=OY(e,n)}start(e,n){const r=this.currentLength,s=this.currentStartIndices;super.start(e,n);const{buffers:i,attribute:a}=this;for(let u=0;u<2;u++)i[u]=WM({device:this.device,buffer:i[u],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:s,getData:e.enter});i[2]=HM({device:this.device,source:i[0],target:i[2]}),this.setBuffer(i[1]);const{model:l}=this.transform;l.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?l.setConstantAttributes({aTo:a.value}):l.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:r,transition:s}=this,i=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:i.stiffness,damping:i.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:r,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),$M(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(r)[0]>0||s.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const kY=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,NY={name:"spring",vs:kY,uniformTypes:{damping:"f32",stiffness:"f32"}},MY=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,IY=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function OY(t,e){const n=zM(e.size),r=VM(e.size);return new qf(t,{vs:MY,fs:IY,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[NY],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function PY(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function DY(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const FY={interpolation:SY,spring:CY};class jY{constructor(e,{id:n,timeline:r}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const s in e){const i=e[s],a=i.getTransitionSetting(n);a&&this._updateAttribute(s,i,a)}for(const s in this.transitions){const i=e[s];(!i||!i.getTransitionSetting(n))&&this._removeTransition(s)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,r){const s=this.transitions[e];let i=!s||s.type!==r.type;if(i){s&&this._removeTransition(e);const a=FY[r.type];a?this.transitions[e]=new a({attribute:n,timeline:this.timeline,device:this.device}):(_n.error(`unsupported transition type '${r.type}'`)(),i=!1)}(i||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const dA="attributeManager.invalidate",BY="attributeManager.updateStart",UY="attributeManager.updateEnd",LY="attribute.updateStart",zY="attribute.allocate",VY="attribute.updateEnd";class $Y{constructor(e,{id:n="attribute-manager",stats:r,timeline:s}={}){this.mergeBoundsMemoized=lh(GH),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new jY(e,{id:`${n}-transitions`,timeline:s}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Dr(dA,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Dr(dA,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:s,props:i={},buffers:a={},context:l={}}){let u=!1;Dr(BY,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const h in this.attributes){const d=this.attributes[h],g=d.settings.accessor;d.startIndices=r,d.numInstances=n,i[h]&&_n.removed(`props.${h}`,`data.attributes.${h}`)(),d.setExternalBuffer(a[h])||d.setBinaryValue(typeof g=="string"?a[g]:void 0,e.startIndices)||typeof g=="string"&&!a[g]&&d.setConstantValue(i[g])||d.needsUpdate()&&(u=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:i,context:l})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}u&&Dr(UY,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:s})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(r=>{var s;return(s=this.attributes[r])==null?void 0:s.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,s={...r.getAttributes()};for(const i in n){const a=n[i];a.needsRedraw(e)&&!r.hasAttribute(i)&&(s[i]=a)}return s}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const r in e){const s=e[r],i={...s,id:r,size:s.isIndexed&&1||s.size||1,...n};this.attributes[r]=new LM(this.device,i)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(s=>{e[s]||(e[s]=[]),e[s].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:s}=this,i=s[e];return i&&i.forEach(a=>{const l=r[a];l&&l.setNeedsUpdate(l.id,n)}),i}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Dr(LY,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Dr(zY,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Dr(VY,n,r))}}class HY extends Lg{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:s,easing:i}}=this,a=i(e/s);this._value=qp(n,r,a)}}const pA=1e-5;function gA(t,e,n,r,s){const i=e-t,l=(n-e)*s,u=-i*r;return l+u+i+e}function WY(t,e,n,r,s){if(Array.isArray(n)){const i=[];for(let a=0;a<n.length;a++)i[a]=gA(t[a],e[a],n[a],r,s);return i}return gA(t,e,n,r,s)}function mA(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const s=t[r]-e[r];n+=s*s}return Math.sqrt(n)}return Math.abs(t-e)}class qY extends Lg{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:s}=this.settings,{_prevValue:i=e,_currValue:a=e}=this;let l=WY(i,a,n,r,s);const u=mA(l,n),h=mA(l,a);u<pA&&h<pA&&(l=n,this.end()),this._prevValue=a,this._currValue=l}}const XY={interpolation:HY,spring:qY};class YY{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,s){const{transitions:i}=this;if(i.has(e)){const u=i.get(e),{value:h=u.settings.fromValue}=u;n=h,this.remove(e)}if(s=UM(s),!s)return;const a=XY[s.type];if(!a){_n.error(`unsupported transition type '${s.type}'`)();return}const l=new a(this.timeline);l.start({...s,fromValue:n,toValue:r}),i.set(e,l)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function KY(t){const e=t[Va];for(const n in e){const r=e[n],{validate:s}=r;if(s&&!s(t[n],r))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function ZY(t,e){const n=YM({newProps:t,oldProps:e,propTypes:t[Va],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=GY(t,e);let s=!1;return r||(s=JY(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s,extensionsChanged:eK(t,e),transitionsChanged:QY(t,e)}}function QY(t,e){if(!t.transitions)return!1;const n={},r=t[Va];let s=!1;for(const i in t.transitions){const a=r[i],l=a&&a.type;(l==="number"||l==="color"||l==="array")&&Lx(t[i],e[i],a)&&(n[i]=!0,s=!0)}return s?n:!1}function YM({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:s="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${s} changed shallowly`;if(typeof e!="object"||e===null)return`${s} changed shallowly`;for(const i of Object.keys(t))if(!(i in n)){if(!(i in e))return`${s}.${i} added`;const a=Lx(t[i],e[i],r[i]);if(a)return`${s}.${i} ${a}`}for(const i of Object.keys(e))if(!(i in n)){if(!(i in t))return`${s}.${i} dropped`;if(!Object.hasOwnProperty.call(t,i)){const a=Lx(t[i],e[i],r[i]);if(a)return`${s}.${i} ${a}`}}return!1}function Lx(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function GY(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:s}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&s&&(n=s(t.data,e.data)||n),n}function JY(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&yA(t,e,"all"))return{all:!0};const n={};let r=!1;for(const s in t.updateTriggers)s!=="all"&&yA(t,e,s)&&(n[s]=!0,r=!0);return r?n:!1}function eK(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let s=0;s<r.length;s++)if(!r[s].equals(n[s]))return!0;return!1}function yA(t,e,n){let r=t.updateTriggers[n];r=r??{};let s=e.updateTriggers[n];return s=s??{},YM({oldProps:s,newProps:r,triggerName:n})}const tK="count(): argument not an object",nK="count(): argument not a container";function rK(t){if(!iK(t))throw new Error(tK);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(sK(t))return Object.keys(t).length;throw new Error(nK)}function sK(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function iK(t){return t!==null&&typeof t=="object"}function bA(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(s=>s.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const s in e.inject)r[s]=(r[s]||"")+e.inject[s];n.inject=r}return n}const oK={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},zx={};function aK(t,e,n,r){if(n instanceof Nn)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let s=null;n.compressed&&(s={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const i=e.createTexture({...n,sampler:{...oK,...s,...r},mipmaps:!0});return zx[i.id]=t,i}function lK(t,e){!e||!(e instanceof Nn)||zx[e.id]===t&&(e.delete(),delete zx[e.id])}const cK={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Vx(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Hs(t,e,1)}},accessor:{validate(t,e){const n=eg(t);return n==="function"||n===eg(e.value)},equal(t,e,n){return typeof e=="function"?!0:Hs(t,e,1)}},array:{validate(t,e){return e.optional&&!t||Vx(t)},equal(t,e,n){const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Hs(t,e,s):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Hs(t,e,s):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:r}=n.props;return r?r(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.device?null:aK(n.id,r.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{lK(n.id,t)}}};function uK(t){const e={},n={},r={};for(const[s,i]of Object.entries(t)){const a=i==null?void 0:i.deprecatedFor;if(a)r[s]=Array.isArray(a)?a:[a];else{const l=fK(s,i);e[s]=l,n[s]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function fK(t,e){switch(eg(e)){case"object":return sf(t,e);case"array":return sf(t,{type:"array",value:e,compare:!1});case"boolean":return sf(t,{type:"boolean",value:e});case"number":return sf(t,{type:"number",value:e});case"function":return sf(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function sf(t,e){return"type"in e?{name:t,...cK[e.type],...e}:"value"in e?{name:t,type:eg(e.value),...e}:{name:t,type:"object",value:e}}function Vx(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function eg(t){return Vx(t)?"array":t===null?"null":typeof t}function hK(t,e){let n;for(let i=e.length-1;i>=0;i--){const a=e[i];"extensions"in a&&(n=a.extensions)}const r=$x(t.constructor,n),s=Object.create(r);s[Gp]=t,s[Ja]={},s[Xo]={};for(let i=0;i<e.length;++i){const a=e[i];for(const l in a)s[l]=a[l]}return Object.freeze(s),s}const dK="_mergedDefaultProps";function $x(t,e){if(!(t instanceof zg.constructor))return{};let n=dK;if(e)for(const s of e){const i=s.constructor;i&&(n+=`:${i.extensionName||i.name}`)}const r=KM(t,n);return r||(t[n]=pK(t,e||[]))}function pK(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),s=$x(r),i=KM(t,"defaultProps")||{},a=uK(i),l=Object.assign(Object.create(null),s,a.defaultProps),u=Object.assign(Object.create(null),s==null?void 0:s[Va],a.propTypes),h=Object.assign(Object.create(null),s==null?void 0:s[Zb],a.deprecatedProps);for(const d of e){const g=$x(d.constructor);g&&(Object.assign(l,g),Object.assign(u,g[Va]),Object.assign(h,g[Zb]))}return gK(l,t),yK(l,u),mK(l,h),l[Va]=u,l[Zb]=h,e.length===0&&!d0(t,"_propTypes")&&(t._propTypes=u),l}function gK(t,e){const n=_K(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function mK(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const s=`${this.id}: ${n}`;for(const i of e[n])d0(this,i)||(this[i]=r);_n.deprecated(s,e[n].join("/"))()}})}function yK(t,e){const n={},r={};for(const s in e){const i=e[s],{name:a,value:l}=i;i.async&&(n[a]=l,r[a]=bK(a))}t[mc]=n,t[Ja]={},Object.defineProperties(t,r)}function bK(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||BM(e)?this[Ja][t]=e:this[Xo][t]=e},get(){if(this[Xo]){if(t in this[Xo])return this[Xo][t]||this[mc][t];if(t in this[Ja]){const e=this[Gp]&&this[Gp].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[mc][t]}}return this[mc][t]}}}function d0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function KM(t,e){return d0(t,e)&&t[e]}function _K(t){const e=t.componentName;return e||_n.warn(`${t.name}.componentName not specified`)(),e||t.name}let xK=0;class zg{constructor(...e){this.props=hK(this,e),this.id=this.props.id,this.count=xK++}clone(e){const{props:n}=this,r={};for(const s in n[mc])s in n[Xo]?r[s]=n[Xo][s]:s in n[Ja]&&(r[s]=n[Ja][s]);return new this.constructor({...n,...r,...e})}}zg.componentName="Component";zg.defaultProps={};const vK=Object.freeze({});class wK{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||vK}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Gp]||this.component;const n=e[Xo]||{},r=e[Ja]||e,s=e[mc]||{};for(const i in n){const a=n[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,a),n[i]=this.getAsyncProp(i)}for(const i in r){const a=r[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,a)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(BM(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const s=this.asyncProps[e];s&&r>=s.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=n,s.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const s=r.pendingLoadCount;n.then(i=>{this.component&&(i=this._postProcessValue(r,i),this._setAsyncPropValue(e,i,s),this._onResolve(e,i))}).catch(i=>{this._onError(e,i)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let i=[],a=0;for await(const l of n){if(!this.component)return;const{dataTransform:u}=this.component.props;u?i=u(l,i):i=i.concat(l),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:a,endRow:i.length}]}),a=i.length,this._setAsyncPropValue(e,i,s)}this._onResolve(e,i)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const s=this.component&&this.component.props[Va];this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class SK extends wK{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,s=r==null?void 0:r.props.fetch;return s?s(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const s=r.props.onDataLoad;e==="data"&&s&&s(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,`loading ${e} of ${this.layer}`)}}const TK="layer.changeFlag",EK="layer.initialize",AK="layer.update",RK="layer.finalize",CK="layer.matched",_A=2**24-1,kK=Object.freeze([]),NK=lh(({oldViewport:t,viewport:e})=>t.equals(e));let Ds=new Uint8ClampedArray(0);const MK={data:{type:"data",value:kK,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:s,signal:i})=>{const{resourceManager:a}=n.context;s=s||n.getLoadOptions(),r=r||n.props.loaders,i&&(s={...s,fetch:{...s==null?void 0:s.fetch,signal:i}});let l=a.contains(t);return!l&&!s&&(a.add({resourceId:t,data:rx(t,r),persistent:!1}),l=!0),l?a.subscribe({resourceId:t,onChange:u=>{var h;return(h=n.internalState)==null?void 0:h.reloadAsyncProp(e,u)},consumerId:n.id,requestId:e}):rx(t,r,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:qt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Vg extends zg{constructor(){super(...arguments),this.internalState=null,this.lifecycle=rc.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){Tr(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=hM(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,i,a]=lM(r,n.pixelProjectionMatrix);return e.length===2?[s,i]:[s,i,a]}unproject(e){return Tr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Tr(this.internalState);const r=this.internalState.viewport||this.context.viewport;return sW(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===qt.DEFAULT||e===qt.LNGLAT||e===qt.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Tr(e instanceof Uint8Array);const[n,r,s]=e;return n+r*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:rK(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=bA(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=bA(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const s of r)n.invalidateAll(s);else n.invalidateAll();if(n){const{props:s}=e,i=this.internalState.hasPickingBuffer,a=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(l=>l.getNeedsPickingBuffer.call(this,l));if(i!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:l,instancePickingColors:u}=n.attributes,h=l||u;h&&(a&&h.constant&&(h.constant=!1,n.invalidate(h.id)),!h.value&&!a&&(h.constant=!0,h.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e.renderPass)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:s}=e;return s>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[s]),e}raiseError(e,n){var r,s,i,a;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(s=(r=this.props).onError)!=null&&s.call(r,e)||(a=(i=this.context)==null?void 0:i.onError)==null||a.call(i,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!NK({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const r in e)e[r].layoutChanged()&&(n=!0);for(const r of this.getModels())this._setModelAttributes(r,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),s=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:s,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const s in n)Object.defineProperty(r,s,{value:n[s]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Ds.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>_A&&_n.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ds=Hf.allocate(Ds,n,{size:4,copy:!0,maxCount:Math.max(n,_A)});const s=Math.floor(Ds.length/4),i=[0,0,0];for(let a=r;a<s;a++)this.encodePickingColor(a,i),Ds[a*4+0]=i[0],Ds[a*4+1]=i[1],Ds[a*4+2]=i[2],Ds[a*4+3]=0}e.value=Ds.subarray(0,n*4)}_setModelAttributes(e,n,r=!1){var l;if(!Object.keys(n).length)return;if(r){const u=this.getAttributeManager();e.setBufferLayout(u.getBufferLayouts(e)),n=u.getAttributes()}const s=((l=e.userData)==null?void 0:l.excludeAttributes)||{},i={},a={};for(const u in n){if(s[u])continue;const h=n[u].getValue();for(const d in h){const g=h[d];g instanceof wn?n[u].settings.isIndexed?e.setIndexBuffer(g):i[d]=g:g&&(a[d]=g)}}e.setAttributes(i),e.setConstantAttributes(a)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:s}=this.getAttributeManager().attributes,i=r||s,a=i&&n.attributes&&n.attributes[i.id];if(a&&a.value){const l=a.value,u=this.encodePickingColor(e);for(let h=0;h<n.length;h++){const d=i.getVertexOffset(h);l[d]===u[0]&&l[d+1]===u[1]&&l[d+2]===u[2]&&this._disablePickingIndex(h)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,s=n||r;if(!s)return;const i=s.getVertexOffset(e),a=s.getVertexOffset(e+1);s.buffer.write(new Uint8Array(a-i),i)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Ds.buffer&&(r.value=Ds.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Tr(!this.internalState),Tr(Number.isFinite(this.props.coordinateSystem)),Dr(EK,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new SK({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(_n.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new YY(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Dr(CK,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Dr(AK,this,e),!e)return;const n=this.props,r=this.context,s=this.internalState,i=r.viewport,a=this._updateUniformTransition();s.propsInTransition=a,r.viewport=s.viewport||i,this.props=a;try{const l=this._getUpdateParams(),u=this.getModels();if(r.device)this.updateState(l);else try{this.updateState(l)}catch{}for(const d of this.props.extensions)d.updateState.call(this,l,d);this.setNeedsRedraw(),this._updateAttributes();const h=this.getModels()[0]!==u[0];this._postUpdate(l,h)}finally{r.viewport=i,this.props=n,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){Dr(RK,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:n=null,uniforms:r={},parameters:s={}}){this._updateAttributeTransition();const i=this.props,a=this.context;this.props=this.internalState.propsInTransition||i;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:l}=this.props,u=l&&l(r)||[0,0];a.device instanceof fc&&a.device.setParametersWebGL({polygonOffset:u});for(const h of this.getModels())h.device.type==="webgpu"?h.setParameters({...h.parameters,...s}):h.setParameters(s);if(a.device instanceof fc)a.device.withParametersWebGL(s,()=>{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:s,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)});else{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:s,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)}}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const s in e)if(e[s]){let i=!1;switch(s){case"dataChanged":const a=e[s],l=n[s];a&&Array.isArray(l)&&(n.dataChanged=Array.isArray(a)?l.concat(a):a,i=!0);default:n[s]||(n[s]=e[s],i=!0)}i&&Dr(TK,this,s,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var s;const r=ZY(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged)this.internalState.uniformTransitions.add(i,n[i],e[i],(s=e.transitions)==null?void 0:s[i]);return this.setChangeFlags(r)}validateProps(){KY(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.highlightColor=r(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new $Y(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:s}=e,i=this.state.model;i!=null&&i.isInstanced&&i.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:l,highlightColor:u}=r;if(n||s.autoHighlight!==a||s.highlightedObjectIndex!==l||s.highlightColor!==u){const h={};Array.isArray(u)&&(h.highlightColor=u),(n||s.autoHighlight!==a||l!==s.highlightedObjectIndex)&&(h.highlightedObjectColor=Number.isFinite(l)&&l>=0?this.encodePickingColor(l):null),this.setShaderModuleProps({picking:h})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),s=r?r.getNeedsRedraw(e):!1;if(n=n||s,n)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Vg.defaultProps=MK;Vg.layerName="Layer";const IK=typeof window<"u"?I.useLayoutEffect:I.useEffect;function tg(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const OK={position:"absolute",zIndex:-1};function ZM(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>ZM(n,e));if($g(t)){if(PK(t))return e.style=OK,I.cloneElement(t,e);if(DK(t))return I.cloneElement(t,e)}return t}function $g(t){return t&&typeof t=="object"&&"type"in t||!1}function PK(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function DK(t){const e=t.type;return e&&e.deckGLViewProps}function Hx(t){if(typeof t=="function")return I.createElement(zc,{},t);if(Array.isArray(t))return t.map(Hx);if($g(t)){if(t.type===I.Fragment)return Hx(t.props.children);if(tg(t.type,zc))return t}return t}function FK({children:t,layers:e=[],views:n=null}){const r=[],s=[],i={};return I.Children.forEach(Hx(t),a=>{if($g(a)){const l=a.type;if(tg(l,Vg)){const u=jK(l,a.props);s.push(u)}else r.push(a);if(tg(l,zc)&&l!==zc&&a.props.id){const u=new l(a.props);i[u.id]=u}}else a&&r.push(a)}),Object.keys(i).length>0&&(Array.isArray(n)?n.forEach(a=>{i[a.id]=a}):n&&(i[n.id]=n),n=Object.values(i)),e=s.length>0?[...s,...e]:e,{layers:e,children:r,views:n}}function jK(t,e){const n={},r=t.defaultProps||{};for(const s in e)r[s]!==e[s]&&(n[s]=e[s]);return new t(n)}const BK=I.createContext();function UK({children:t,deck:e,ContextProvider:n=BK.Provider}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const s={},i=r.views[0].id;for(const a of t){let l=i,u=a;$g(a)&&tg(a.type,zc)&&(l=a.props.id||i,u=a.props.children);const h=r.getViewport(l),d=r.getViewState(l);if(h){d.padding=h.padding;const{x:g,y:b,width:w,height:R}=h;u=ZM(u,{x:g,y:b,width:w,height:R,viewport:h,viewState:d}),s[l]||(s[l]={viewport:h,children:[]}),s[l].children.push(u)}}return Object.keys(s).map(a=>{const{viewport:l,children:u}=s[a],{x:h,y:d,width:g,height:b}=l,w={position:"absolute",left:h,top:d,width:g,height:b},R=`view-${a}`,A=I.createElement("div",{key:R,id:R,style:w},...u),C={deck:e,viewport:l,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:N=>{N.viewId=a,e._onViewStateChange(N)},widgets:[]},M=`view-${a}-context`;return I.createElement(n,{key:M,value:C},A)})}const LK={mixBlendMode:null};function zK({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},s={left:0,top:0};if(n)for(const i in n)i in LK?s[i]=n[i]:r[i]=n[i];return{containerStyle:r,canvasStyle:s}}function VK(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function QM(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function $K(t,e,n){var s,i,a;const r=new e({...n,_customRender:((a=(i=(s=n.deviceProps)==null?void 0:s.adapters)==null?void 0:i[0])==null?void 0:a.type)==="webgpu"?void 0:l=>{t.redrawReason=l;const u=r.getViewports();t.lastRenderedViewports!==u?t.forceUpdate():QM(t)}});return r}function HK(t,e){const[n,r]=I.useState(0),i=I.useRef({control:null,version:n,forceUpdate:()=>r(B=>B+1)}).current,a=I.useRef(null),l=I.useRef(null),u=I.useMemo(()=>FK(t),[t.layers,t.views,t.children]);let h=!0;const d=B=>{var P;return h&&t.viewState?(i.viewStateUpdateRequested=B,null):(i.viewStateUpdateRequested=null,(P=t.onViewStateChange)==null?void 0:P.call(t,B))},g=B=>{var P;h?i.interactionStateUpdateRequested=B:(i.interactionStateUpdateRequested=null,(P=t.onInteractionStateChange)==null||P.call(t,B))},b=I.useMemo(()=>{const B={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:l.current,layers:u.layers,views:u.views,onViewStateChange:d,onInteractionStateChange:g};return delete B._customRender,i.deck&&i.deck.setProps(B),B},[t]);I.useEffect(()=>{const B=t.Deck||h0;return i.deck=$K(i,B,{...b,parent:a.current,canvas:l.current}),()=>{var P;return(P=i.deck)==null?void 0:P.finalize()}},[]),IK(()=>{QM(i);const{viewStateUpdateRequested:B,interactionStateUpdateRequested:P}=i;B&&d(B),P&&g(P)}),I.useImperativeHandle(e,()=>VK(i),[]);const w=i.deck&&i.deck.isInitialized?i.deck.getViewports():void 0,{ContextProvider:R,width:A="100%",height:C="100%",id:M,style:N}=t,{containerStyle:k,canvasStyle:F}=I.useMemo(()=>zK({width:A,height:C,style:N}),[A,C,N]);if(!i.viewStateUpdateRequested&&i.lastRenderedViewports===w||i.version!==n){i.lastRenderedViewports=w,i.version=n;const B=UK({children:u.children,deck:i.deck,ContextProvider:R}),P=I.createElement("canvas",{key:"canvas",id:M||"deckgl-overlay",ref:l,style:F});i.control=I.createElement("div",{id:`${M||"deckgl"}-wrapper`,ref:a,style:k},[P,B])}return h=!1,i.control}const WK=I.forwardRef(HK),xA=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,qK={name:"scatterplot",vs:xA,fs:xA,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},XK=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,YK=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,KK=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)

struct LayerUniforms {
  opacity: f32,
};

var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    // discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        // discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    // discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,vA=[0,0,0,255],ZK={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:vA},getLineColor:{type:"accessor",value:vA},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class p0 extends Vg{getShaders(){return super.getShaders({vs:XK,fs:YK,source:KK,modules:[oH,NH,qK]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:s,radiusMaxPixels:i,stroked:a,filled:l,billboard:u,antialiasing:h,lineWidthUnits:d,lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:w}=this.props,R={stroked:a,filled:l,billboard:u,antialiasing:h,radiusUnits:jc[n],radiusScale:r,radiusMinPixels:s,radiusMaxPixels:i,lineWidthUnits:jc[d],lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:w},A=this.state.model;A.shaderInputs.setProps({scatterplot:R}),A.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Wf(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new AW({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}p0.defaultProps=ZK;p0.layerName="ScatterplotLayer";var At={};const QK=Object.prototype.toString;function Xf(t){const e=QK.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const GK=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:Xf},Symbol.toStringTag,{value:"Module"})),JK=k3(GK);function eZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xf(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,s=e.toIndex,i=s===void 0?t.length:s;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],l=r+1;l<i;l++)t[l]>a&&(a=t[l]);return a}function tZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xf(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,s=e.toIndex,i=s===void 0?t.length:s;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],l=r+1;l<i;l++)t[l]<a&&(a=t[l]);return a}function nZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Xf(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!Xf(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=tZ(t),s=eZ(t);if(r===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=e.min,a=i===void 0?e.autoMinMax?r:0:i,l=e.max,u=l===void 0?e.autoMinMax?s:1:l;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-a)/(s-r),d=0;d<t.length;d++)n[d]=(t[d]-r)*h+a;return n}const rZ=Object.freeze(Object.defineProperty({__proto__:null,default:nZ},Symbol.toStringTag,{value:"Module"})),sZ=k3(rZ);var wA;function iZ(){var Ns,Wx,Yn;if(wA)return At;wA=1,Object.defineProperty(At,"__esModule",{value:!0});var t=JK,e=sZ;const n=" ".repeat(2),r=" ".repeat(4);function s(){return i(this)}function i(j,S={}){const{maxRows:x=15,maxColumns:m=10,maxNumSize:v=8,padMinus:E="auto"}=S;return`${j.constructor.name} {
${n}[
${r}${a(j,x,m,v,E)}
${n}]
${n}rows: ${j.rows}
${n}columns: ${j.columns}
}`}function a(j,S,x,m,v){const{rows:E,columns:L}=j,$=Math.min(E,S),H=Math.min(L,x),q=[];if(v==="auto"){v=!1;e:for(let pe=0;pe<$;pe++)for(let ee=0;ee<H;ee++)if(j.get(pe,ee)<0){v=!0;break e}}for(let pe=0;pe<$;pe++){let ee=[];for(let Ne=0;Ne<H;Ne++)ee.push(l(j.get(pe,Ne),m,v));q.push(`${ee.join(" ")}`)}return H!==L&&(q[q.length-1]+=` ... ${L-x} more columns`),$!==E&&q.push(`... ${E-S} more rows`),q.join(`
${r}`)}function l(j,S,x){return(j>=0&&x?` ${u(j,S-1)}`:u(j,S)).padEnd(S)}function u(j,S){let x=j.toString();if(x.length<=S)return x;let m=j.toFixed(S);if(m.length>S&&(m=j.toFixed(Math.max(0,S-(m.length-S)))),m.length<=S&&!m.startsWith("0.000")&&!m.startsWith("-0.000"))return m;let v=j.toExponential(S);return v.length>S&&(v=j.toExponential(Math.max(0,S-(v.length-S)))),v.slice(0)}function h(j,S){j.prototype.add=function(m){return typeof m=="number"?this.addS(m):this.addM(m)},j.prototype.addS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)+m);return this},j.prototype.addM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)+m.get(v,E));return this},j.add=function(m,v){return new S(m).add(v)},j.prototype.sub=function(m){return typeof m=="number"?this.subS(m):this.subM(m)},j.prototype.subS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)-m);return this},j.prototype.subM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)-m.get(v,E));return this},j.sub=function(m,v){return new S(m).sub(v)},j.prototype.subtract=j.prototype.sub,j.prototype.subtractS=j.prototype.subS,j.prototype.subtractM=j.prototype.subM,j.subtract=j.sub,j.prototype.mul=function(m){return typeof m=="number"?this.mulS(m):this.mulM(m)},j.prototype.mulS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)*m);return this},j.prototype.mulM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)*m.get(v,E));return this},j.mul=function(m,v){return new S(m).mul(v)},j.prototype.multiply=j.prototype.mul,j.prototype.multiplyS=j.prototype.mulS,j.prototype.multiplyM=j.prototype.mulM,j.multiply=j.mul,j.prototype.div=function(m){return typeof m=="number"?this.divS(m):this.divM(m)},j.prototype.divS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)/m);return this},j.prototype.divM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)/m.get(v,E));return this},j.div=function(m,v){return new S(m).div(v)},j.prototype.divide=j.prototype.div,j.prototype.divideS=j.prototype.divS,j.prototype.divideM=j.prototype.divM,j.divide=j.div,j.prototype.mod=function(m){return typeof m=="number"?this.modS(m):this.modM(m)},j.prototype.modS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)%m);return this},j.prototype.modM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)%m.get(v,E));return this},j.mod=function(m,v){return new S(m).mod(v)},j.prototype.modulus=j.prototype.mod,j.prototype.modulusS=j.prototype.modS,j.prototype.modulusM=j.prototype.modM,j.modulus=j.mod,j.prototype.and=function(m){return typeof m=="number"?this.andS(m):this.andM(m)},j.prototype.andS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)&m);return this},j.prototype.andM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)&m.get(v,E));return this},j.and=function(m,v){return new S(m).and(v)},j.prototype.or=function(m){return typeof m=="number"?this.orS(m):this.orM(m)},j.prototype.orS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)|m);return this},j.prototype.orM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)|m.get(v,E));return this},j.or=function(m,v){return new S(m).or(v)},j.prototype.xor=function(m){return typeof m=="number"?this.xorS(m):this.xorM(m)},j.prototype.xorS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)^m);return this},j.prototype.xorM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)^m.get(v,E));return this},j.xor=function(m,v){return new S(m).xor(v)},j.prototype.leftShift=function(m){return typeof m=="number"?this.leftShiftS(m):this.leftShiftM(m)},j.prototype.leftShiftS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)<<m);return this},j.prototype.leftShiftM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)<<m.get(v,E));return this},j.leftShift=function(m,v){return new S(m).leftShift(v)},j.prototype.signPropagatingRightShift=function(m){return typeof m=="number"?this.signPropagatingRightShiftS(m):this.signPropagatingRightShiftM(m)},j.prototype.signPropagatingRightShiftS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)>>m);return this},j.prototype.signPropagatingRightShiftM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)>>m.get(v,E));return this},j.signPropagatingRightShift=function(m,v){return new S(m).signPropagatingRightShift(v)},j.prototype.rightShift=function(m){return typeof m=="number"?this.rightShiftS(m):this.rightShiftM(m)},j.prototype.rightShiftS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)>>>m);return this},j.prototype.rightShiftM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)>>>m.get(v,E));return this},j.rightShift=function(m,v){return new S(m).rightShift(v)},j.prototype.zeroFillRightShift=j.prototype.rightShift,j.prototype.zeroFillRightShiftS=j.prototype.rightShiftS,j.prototype.zeroFillRightShiftM=j.prototype.rightShiftM,j.zeroFillRightShift=j.rightShift,j.prototype.not=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,~this.get(m,v));return this},j.not=function(m){return new S(m).not()},j.prototype.abs=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.abs(this.get(m,v)));return this},j.abs=function(m){return new S(m).abs()},j.prototype.acos=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.acos(this.get(m,v)));return this},j.acos=function(m){return new S(m).acos()},j.prototype.acosh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.acosh(this.get(m,v)));return this},j.acosh=function(m){return new S(m).acosh()},j.prototype.asin=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.asin(this.get(m,v)));return this},j.asin=function(m){return new S(m).asin()},j.prototype.asinh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.asinh(this.get(m,v)));return this},j.asinh=function(m){return new S(m).asinh()},j.prototype.atan=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.atan(this.get(m,v)));return this},j.atan=function(m){return new S(m).atan()},j.prototype.atanh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.atanh(this.get(m,v)));return this},j.atanh=function(m){return new S(m).atanh()},j.prototype.cbrt=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.cbrt(this.get(m,v)));return this},j.cbrt=function(m){return new S(m).cbrt()},j.prototype.ceil=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.ceil(this.get(m,v)));return this},j.ceil=function(m){return new S(m).ceil()},j.prototype.clz32=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.clz32(this.get(m,v)));return this},j.clz32=function(m){return new S(m).clz32()},j.prototype.cos=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.cos(this.get(m,v)));return this},j.cos=function(m){return new S(m).cos()},j.prototype.cosh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.cosh(this.get(m,v)));return this},j.cosh=function(m){return new S(m).cosh()},j.prototype.exp=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.exp(this.get(m,v)));return this},j.exp=function(m){return new S(m).exp()},j.prototype.expm1=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.expm1(this.get(m,v)));return this},j.expm1=function(m){return new S(m).expm1()},j.prototype.floor=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.floor(this.get(m,v)));return this},j.floor=function(m){return new S(m).floor()},j.prototype.fround=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.fround(this.get(m,v)));return this},j.fround=function(m){return new S(m).fround()},j.prototype.log=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.log(this.get(m,v)));return this},j.log=function(m){return new S(m).log()},j.prototype.log1p=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.log1p(this.get(m,v)));return this},j.log1p=function(m){return new S(m).log1p()},j.prototype.log10=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.log10(this.get(m,v)));return this},j.log10=function(m){return new S(m).log10()},j.prototype.log2=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.log2(this.get(m,v)));return this},j.log2=function(m){return new S(m).log2()},j.prototype.round=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.round(this.get(m,v)));return this},j.round=function(m){return new S(m).round()},j.prototype.sign=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.sign(this.get(m,v)));return this},j.sign=function(m){return new S(m).sign()},j.prototype.sin=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.sin(this.get(m,v)));return this},j.sin=function(m){return new S(m).sin()},j.prototype.sinh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.sinh(this.get(m,v)));return this},j.sinh=function(m){return new S(m).sinh()},j.prototype.sqrt=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.sqrt(this.get(m,v)));return this},j.sqrt=function(m){return new S(m).sqrt()},j.prototype.tan=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.tan(this.get(m,v)));return this},j.tan=function(m){return new S(m).tan()},j.prototype.tanh=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.tanh(this.get(m,v)));return this},j.tanh=function(m){return new S(m).tanh()},j.prototype.trunc=function(){for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.set(m,v,Math.trunc(this.get(m,v)));return this},j.trunc=function(m){return new S(m).trunc()},j.pow=function(m,v){return new S(m).pow(v)},j.prototype.pow=function(m){return typeof m=="number"?this.powS(m):this.powM(m)},j.prototype.powS=function(m){for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)**m);return this},j.prototype.powM=function(m){if(m=S.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let v=0;v<this.rows;v++)for(let E=0;E<this.columns;E++)this.set(v,E,this.get(v,E)**m.get(v,E));return this}}function d(j,S,x){let m=x?j.rows:j.rows-1;if(S<0||S>m)throw new RangeError("Row index out of range")}function g(j,S,x){let m=x?j.columns:j.columns-1;if(S<0||S>m)throw new RangeError("Column index out of range")}function b(j,S){if(S.to1DArray&&(S=S.to1DArray()),S.length!==j.columns)throw new RangeError("vector size must be the same as the number of columns");return S}function w(j,S){if(S.to1DArray&&(S=S.to1DArray()),S.length!==j.rows)throw new RangeError("vector size must be the same as the number of rows");return S}function R(j,S){if(!t.isAnyArray(S))throw new TypeError("row indices must be an array");for(let x=0;x<S.length;x++)if(S[x]<0||S[x]>=j.rows)throw new RangeError("row indices are out of range")}function A(j,S){if(!t.isAnyArray(S))throw new TypeError("column indices must be an array");for(let x=0;x<S.length;x++)if(S[x]<0||S[x]>=j.columns)throw new RangeError("column indices are out of range")}function C(j,S,x,m,v){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(N("startRow",S),N("endRow",x),N("startColumn",m),N("endColumn",v),S>x||m>v||S<0||S>=j.rows||x<0||x>=j.rows||m<0||m>=j.columns||v<0||v>=j.columns)throw new RangeError("Submatrix indices are out of range")}function M(j,S=0){let x=[];for(let m=0;m<j;m++)x.push(S);return x}function N(j,S){if(typeof S!="number")throw new TypeError(`${j} must be a number`)}function k(j){if(j.isEmpty())throw new Error("Empty matrix has no elements to index")}function F(j){let S=M(j.rows);for(let x=0;x<j.rows;++x)for(let m=0;m<j.columns;++m)S[x]+=j.get(x,m);return S}function B(j){let S=M(j.columns);for(let x=0;x<j.rows;++x)for(let m=0;m<j.columns;++m)S[m]+=j.get(x,m);return S}function P(j){let S=0;for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)S+=j.get(x,m);return S}function X(j){let S=M(j.rows,1);for(let x=0;x<j.rows;++x)for(let m=0;m<j.columns;++m)S[x]*=j.get(x,m);return S}function Y(j){let S=M(j.columns,1);for(let x=0;x<j.rows;++x)for(let m=0;m<j.columns;++m)S[m]*=j.get(x,m);return S}function G(j){let S=1;for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)S*=j.get(x,m);return S}function K(j,S,x){const m=j.rows,v=j.columns,E=[];for(let L=0;L<m;L++){let $=0,H=0,q=0;for(let pe=0;pe<v;pe++)q=j.get(L,pe)-x[L],$+=q,H+=q*q;S?E.push((H-$*$/v)/(v-1)):E.push((H-$*$/v)/v)}return E}function Q(j,S,x){const m=j.rows,v=j.columns,E=[];for(let L=0;L<v;L++){let $=0,H=0,q=0;for(let pe=0;pe<m;pe++)q=j.get(pe,L)-x[L],$+=q,H+=q*q;S?E.push((H-$*$/m)/(m-1)):E.push((H-$*$/m)/m)}return E}function ie(j,S,x){const m=j.rows,v=j.columns,E=m*v;let L=0,$=0,H=0;for(let q=0;q<m;q++)for(let pe=0;pe<v;pe++)H=j.get(q,pe)-x,L+=H,$+=H*H;return S?($-L*L/E)/(E-1):($-L*L/E)/E}function xe(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)-S[x])}function oe(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)-S[m])}function Re(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)-S)}function re(j){const S=[];for(let x=0;x<j.rows;x++){let m=0;for(let v=0;v<j.columns;v++)m+=j.get(x,v)**2/(j.columns-1);S.push(Math.sqrt(m))}return S}function Ee(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)/S[x])}function ue(j){const S=[];for(let x=0;x<j.columns;x++){let m=0;for(let v=0;v<j.rows;v++)m+=j.get(v,x)**2/(j.rows-1);S.push(Math.sqrt(m))}return S}function Ve(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)/S[m])}function D(j){const S=j.size-1;let x=0;for(let m=0;m<j.columns;m++)for(let v=0;v<j.rows;v++)x+=j.get(v,m)**2/S;return Math.sqrt(x)}function ne(j,S){for(let x=0;x<j.rows;x++)for(let m=0;m<j.columns;m++)j.set(x,m,j.get(x,m)/S)}class ye{static from1DArray(S,x,m){if(S*x!==m.length)throw new RangeError("data length does not match given dimensions");let E=new ce(S,x);for(let L=0;L<S;L++)for(let $=0;$<x;$++)E.set(L,$,m[L*x+$]);return E}static rowVector(S){let x=new ce(1,S.length);for(let m=0;m<S.length;m++)x.set(0,m,S[m]);return x}static columnVector(S){let x=new ce(S.length,1);for(let m=0;m<S.length;m++)x.set(m,0,S[m]);return x}static zeros(S,x){return new ce(S,x)}static ones(S,x){return new ce(S,x).fill(1)}static rand(S,x,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{random:v=Math.random}=m;let E=new ce(S,x);for(let L=0;L<S;L++)for(let $=0;$<x;$++)E.set(L,$,v());return E}static randInt(S,x,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{min:v=0,max:E=1e3,random:L=Math.random}=m;if(!Number.isInteger(v))throw new TypeError("min must be an integer");if(!Number.isInteger(E))throw new TypeError("max must be an integer");if(v>=E)throw new RangeError("min must be smaller than max");let $=E-v,H=new ce(S,x);for(let q=0;q<S;q++)for(let pe=0;pe<x;pe++){let ee=v+Math.round(L()*$);H.set(q,pe,ee)}return H}static eye(S,x,m){x===void 0&&(x=S),m===void 0&&(m=1);let v=Math.min(S,x),E=this.zeros(S,x);for(let L=0;L<v;L++)E.set(L,L,m);return E}static diag(S,x,m){let v=S.length;x===void 0&&(x=v),m===void 0&&(m=x);let E=Math.min(v,x,m),L=this.zeros(x,m);for(let $=0;$<E;$++)L.set($,$,S[$]);return L}static min(S,x){S=this.checkMatrix(S),x=this.checkMatrix(x);let m=S.rows,v=S.columns,E=new ce(m,v);for(let L=0;L<m;L++)for(let $=0;$<v;$++)E.set(L,$,Math.min(S.get(L,$),x.get(L,$)));return E}static max(S,x){S=this.checkMatrix(S),x=this.checkMatrix(x);let m=S.rows,v=S.columns,E=new this(m,v);for(let L=0;L<m;L++)for(let $=0;$<v;$++)E.set(L,$,Math.max(S.get(L,$),x.get(L,$)));return E}static checkMatrix(S){return ye.isMatrix(S)?S:new ce(S)}static isMatrix(S){return S!=null&&S.klass==="Matrix"}get size(){return this.rows*this.columns}apply(S){if(typeof S!="function")throw new TypeError("callback must be a function");for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)S.call(this,x,m);return this}to1DArray(){let S=[];for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)S.push(this.get(x,m));return S}to2DArray(){let S=[];for(let x=0;x<this.rows;x++){S.push([]);for(let m=0;m<this.columns;m++)S[x].push(this.get(x,m))}return S}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let S=0;S<this.rows;S++)for(let x=0;x<=S;x++)if(this.get(S,x)!==this.get(x,S))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let S=0;S<this.rows;S++)if(this.get(S,S)!==0)return!1;return!0}isEchelonForm(){let S=0,x=0,m=-1,v=!0,E=!1;for(;S<this.rows&&v;){for(x=0,E=!1;x<this.columns&&E===!1;)this.get(S,x)===0?x++:this.get(S,x)===1&&x>m?(E=!0,m=x):(v=!1,E=!0);S++}return v}isReducedEchelonForm(){let S=0,x=0,m=-1,v=!0,E=!1;for(;S<this.rows&&v;){for(x=0,E=!1;x<this.columns&&E===!1;)this.get(S,x)===0?x++:this.get(S,x)===1&&x>m?(E=!0,m=x):(v=!1,E=!0);for(let L=x+1;L<this.rows;L++)this.get(S,L)!==0&&(v=!1);S++}return v}echelonForm(){let S=this.clone(),x=0,m=0;for(;x<S.rows&&m<S.columns;){let v=x;for(let E=x;E<S.rows;E++)S.get(E,m)>S.get(v,m)&&(v=E);if(S.get(v,m)===0)m++;else{S.swapRows(x,v);let E=S.get(x,m);for(let L=m;L<S.columns;L++)S.set(x,L,S.get(x,L)/E);for(let L=x+1;L<S.rows;L++){let $=S.get(L,m)/S.get(x,m);S.set(L,m,0);for(let H=m+1;H<S.columns;H++)S.set(L,H,S.get(L,H)-S.get(x,H)*$)}x++,m++}}return S}reducedEchelonForm(){let S=this.echelonForm(),x=S.columns,m=S.rows,v=m-1;for(;v>=0;)if(S.maxRow(v)===0)v--;else{let E=0,L=!1;for(;E<m&&L===!1;)S.get(v,E)===1?L=!0:E++;for(let $=0;$<v;$++){let H=S.get($,E);for(let q=E;q<x;q++){let pe=S.get($,q)-H*S.get(v,q);S.set($,q,pe)}}v--}return S}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{rows:x=1,columns:m=1}=S;if(!Number.isInteger(x)||x<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(m)||m<=0)throw new TypeError("columns must be a positive integer");let v=new ce(this.rows*x,this.columns*m);for(let E=0;E<x;E++)for(let L=0;L<m;L++)v.setSubMatrix(this,this.rows*E,this.columns*L);return v}fill(S){for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,S);return this}neg(){return this.mulS(-1)}getRow(S){d(this,S);let x=[];for(let m=0;m<this.columns;m++)x.push(this.get(S,m));return x}getRowVector(S){return ce.rowVector(this.getRow(S))}setRow(S,x){d(this,S),x=b(this,x);for(let m=0;m<this.columns;m++)this.set(S,m,x[m]);return this}swapRows(S,x){d(this,S),d(this,x);for(let m=0;m<this.columns;m++){let v=this.get(S,m);this.set(S,m,this.get(x,m)),this.set(x,m,v)}return this}getColumn(S){g(this,S);let x=[];for(let m=0;m<this.rows;m++)x.push(this.get(m,S));return x}getColumnVector(S){return ce.columnVector(this.getColumn(S))}setColumn(S,x){g(this,S),x=w(this,x);for(let m=0;m<this.rows;m++)this.set(m,S,x[m]);return this}swapColumns(S,x){g(this,S),g(this,x);for(let m=0;m<this.rows;m++){let v=this.get(m,S);this.set(m,S,this.get(m,x)),this.set(m,x,v)}return this}addRowVector(S){S=b(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)+S[m]);return this}subRowVector(S){S=b(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)-S[m]);return this}mulRowVector(S){S=b(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)*S[m]);return this}divRowVector(S){S=b(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)/S[m]);return this}addColumnVector(S){S=w(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)+S[x]);return this}subColumnVector(S){S=w(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)-S[x]);return this}mulColumnVector(S){S=w(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)*S[x]);return this}divColumnVector(S){S=w(this,S);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)this.set(x,m,this.get(x,m)/S[x]);return this}mulRow(S,x){d(this,S);for(let m=0;m<this.columns;m++)this.set(S,m,this.get(S,m)*x);return this}mulColumn(S,x){g(this,S);for(let m=0;m<this.rows;m++)this.set(m,S,this.get(m,S)*x);return this}max(S){if(this.isEmpty())return NaN;switch(S){case"row":{const x=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)>x[m]&&(x[m]=this.get(m,v));return x}case"column":{const x=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)>x[v]&&(x[v]=this.get(m,v));return x}case void 0:{let x=this.get(0,0);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)>x&&(x=this.get(m,v));return x}default:throw new Error(`invalid option: ${S}`)}}maxIndex(){k(this);let S=this.get(0,0),x=[0,0];for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)>S&&(S=this.get(m,v),x[0]=m,x[1]=v);return x}min(S){if(this.isEmpty())return NaN;switch(S){case"row":{const x=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)<x[m]&&(x[m]=this.get(m,v));return x}case"column":{const x=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)<x[v]&&(x[v]=this.get(m,v));return x}case void 0:{let x=this.get(0,0);for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)<x&&(x=this.get(m,v));return x}default:throw new Error(`invalid option: ${S}`)}}minIndex(){k(this);let S=this.get(0,0),x=[0,0];for(let m=0;m<this.rows;m++)for(let v=0;v<this.columns;v++)this.get(m,v)<S&&(S=this.get(m,v),x[0]=m,x[1]=v);return x}maxRow(S){if(d(this,S),this.isEmpty())return NaN;let x=this.get(S,0);for(let m=1;m<this.columns;m++)this.get(S,m)>x&&(x=this.get(S,m));return x}maxRowIndex(S){d(this,S),k(this);let x=this.get(S,0),m=[S,0];for(let v=1;v<this.columns;v++)this.get(S,v)>x&&(x=this.get(S,v),m[1]=v);return m}minRow(S){if(d(this,S),this.isEmpty())return NaN;let x=this.get(S,0);for(let m=1;m<this.columns;m++)this.get(S,m)<x&&(x=this.get(S,m));return x}minRowIndex(S){d(this,S),k(this);let x=this.get(S,0),m=[S,0];for(let v=1;v<this.columns;v++)this.get(S,v)<x&&(x=this.get(S,v),m[1]=v);return m}maxColumn(S){if(g(this,S),this.isEmpty())return NaN;let x=this.get(0,S);for(let m=1;m<this.rows;m++)this.get(m,S)>x&&(x=this.get(m,S));return x}maxColumnIndex(S){g(this,S),k(this);let x=this.get(0,S),m=[0,S];for(let v=1;v<this.rows;v++)this.get(v,S)>x&&(x=this.get(v,S),m[0]=v);return m}minColumn(S){if(g(this,S),this.isEmpty())return NaN;let x=this.get(0,S);for(let m=1;m<this.rows;m++)this.get(m,S)<x&&(x=this.get(m,S));return x}minColumnIndex(S){g(this,S),k(this);let x=this.get(0,S),m=[0,S];for(let v=1;v<this.rows;v++)this.get(v,S)<x&&(x=this.get(v,S),m[0]=v);return m}diag(){let S=Math.min(this.rows,this.columns),x=[];for(let m=0;m<S;m++)x.push(this.get(m,m));return x}norm(S="frobenius"){switch(S){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${S}`)}}cumulativeSum(){let S=0;for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)S+=this.get(x,m),this.set(x,m,S);return this}dot(S){ye.isMatrix(S)&&(S=S.to1DArray());let x=this.to1DArray();if(x.length!==S.length)throw new RangeError("vectors do not have the same size");let m=0;for(let v=0;v<x.length;v++)m+=x[v]*S[v];return m}mmul(S){S=ce.checkMatrix(S);let x=this.rows,m=this.columns,v=S.columns,E=new ce(x,v),L=new Float64Array(m);for(let $=0;$<v;$++){for(let H=0;H<m;H++)L[H]=S.get(H,$);for(let H=0;H<x;H++){let q=0;for(let pe=0;pe<m;pe++)q+=this.get(H,pe)*L[pe];E.set(H,$,q)}}return E}mpow(S){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(S)||S<0)throw new RangeError("Exponent must be a non-negative integer");let x=ce.eye(this.rows),m=this;for(let v=S;v>=1;v/=2)(v&1)!==0&&(x=x.mmul(m)),m=m.mmul(m);return x}strassen2x2(S){S=ce.checkMatrix(S);let x=new ce(2,2);const m=this.get(0,0),v=S.get(0,0),E=this.get(0,1),L=S.get(0,1),$=this.get(1,0),H=S.get(1,0),q=this.get(1,1),pe=S.get(1,1),ee=(m+q)*(v+pe),Ne=($+q)*v,ze=m*(L-pe),Te=q*(H-v),Ie=(m+E)*pe,Xe=($-m)*(v+L),te=(E-q)*(H+pe),$e=ee+Te-Ie+te,Ze=ze+Ie,ot=Ne+Te,ft=ee-Ne+ze+Xe;return x.set(0,0,$e),x.set(0,1,Ze),x.set(1,0,ot),x.set(1,1,ft),x}strassen3x3(S){S=ce.checkMatrix(S);let x=new ce(3,3);const m=this.get(0,0),v=this.get(0,1),E=this.get(0,2),L=this.get(1,0),$=this.get(1,1),H=this.get(1,2),q=this.get(2,0),pe=this.get(2,1),ee=this.get(2,2),Ne=S.get(0,0),ze=S.get(0,1),Te=S.get(0,2),Ie=S.get(1,0),Xe=S.get(1,1),te=S.get(1,2),$e=S.get(2,0),Ze=S.get(2,1),ot=S.get(2,2),ft=(m+v+E-L-$-pe-ee)*Xe,mn=(m-L)*(-ze+Xe),rt=$*(-Ne+ze+Ie-Xe-te-$e+ot),at=(-m+L+$)*(Ne-ze+Xe),Gt=(L+$)*(-Ne+ze),le=m*Ne,Be=(-m+q+pe)*(Ne-Te+te),qe=(-m+q)*(Te-te),Ue=(q+pe)*(-Ne+Te),hn=(m+v+E-$-H-q-pe)*te,Ot=pe*(-Ne+Te+Ie-Xe-te-$e+Ze),Jt=(-E+pe+ee)*(Xe+$e-Ze),sn=(E-ee)*(Xe-Ze),Kn=E*$e,Br=(pe+ee)*(-$e+Ze),Lt=(-E+$+H)*(te+$e-ot),Kr=(E-H)*(te-ot),Ms=($+H)*(-$e+ot),vt=v*Ie,Un=H*Ze,nr=L*Te,kr=q*ze,zt=ee*ot,su=le+Kn+vt,dh=ft+at+Gt+le+Jt+Kn+Br,iu=le+Be+Ue+hn+Kn+Lt+Ms,Ki=mn+rt+at+le+Kn+Lt+Kr,ph=mn+at+Gt+le+Un,gh=Kn+Lt+Kr+Ms+nr,Zi=le+Be+qe+Ot+Jt+sn+Kn,Kg=Jt+sn+Kn+Br+kr,mh=le+Be+qe+Ue+zt;return x.set(0,0,su),x.set(0,1,dh),x.set(0,2,iu),x.set(1,0,Ki),x.set(1,1,ph),x.set(1,2,gh),x.set(2,0,Zi),x.set(2,1,Kg),x.set(2,2,mh),x}mmulStrassen(S){S=ce.checkMatrix(S);let x=this.clone(),m=x.rows,v=x.columns,E=S.rows,L=S.columns;v!==E&&console.warn(`Multiplying ${m} x ${v} and ${E} x ${L} matrix: dimensions do not match.`);function $(ee,Ne,ze){let Te=ee.rows,Ie=ee.columns;if(Te===Ne&&Ie===ze)return ee;{let Xe=ye.zeros(Ne,ze);return Xe=Xe.setSubMatrix(ee,0,0),Xe}}let H=Math.max(m,E),q=Math.max(v,L);x=$(x,H,q),S=$(S,H,q);function pe(ee,Ne,ze,Te){if(ze<=512||Te<=512)return ee.mmul(Ne);ze%2===1&&Te%2===1?(ee=$(ee,ze+1,Te+1),Ne=$(Ne,ze+1,Te+1)):ze%2===1?(ee=$(ee,ze+1,Te),Ne=$(Ne,ze+1,Te)):Te%2===1&&(ee=$(ee,ze,Te+1),Ne=$(Ne,ze,Te+1));let Ie=parseInt(ee.rows/2,10),Xe=parseInt(ee.columns/2,10),te=ee.subMatrix(0,Ie-1,0,Xe-1),$e=Ne.subMatrix(0,Ie-1,0,Xe-1),Ze=ee.subMatrix(0,Ie-1,Xe,ee.columns-1),ot=Ne.subMatrix(0,Ie-1,Xe,Ne.columns-1),ft=ee.subMatrix(Ie,ee.rows-1,0,Xe-1),mn=Ne.subMatrix(Ie,Ne.rows-1,0,Xe-1),rt=ee.subMatrix(Ie,ee.rows-1,Xe,ee.columns-1),at=Ne.subMatrix(Ie,Ne.rows-1,Xe,Ne.columns-1),Gt=pe(ye.add(te,rt),ye.add($e,at),Ie,Xe),le=pe(ye.add(ft,rt),$e,Ie,Xe),Be=pe(te,ye.sub(ot,at),Ie,Xe),qe=pe(rt,ye.sub(mn,$e),Ie,Xe),Ue=pe(ye.add(te,Ze),at,Ie,Xe),hn=pe(ye.sub(ft,te),ye.add($e,ot),Ie,Xe),Ot=pe(ye.sub(Ze,rt),ye.add(mn,at),Ie,Xe),Jt=ye.add(Gt,qe);Jt.sub(Ue),Jt.add(Ot);let sn=ye.add(Be,Ue),Kn=ye.add(le,qe),Br=ye.sub(Gt,le);Br.add(Be),Br.add(hn);let Lt=ye.zeros(2*Jt.rows,2*Jt.columns);return Lt=Lt.setSubMatrix(Jt,0,0),Lt=Lt.setSubMatrix(sn,Jt.rows,0),Lt=Lt.setSubMatrix(Kn,0,Jt.columns),Lt=Lt.setSubMatrix(Br,Jt.rows,Jt.columns),Lt.subMatrix(0,ze-1,0,Te-1)}return pe(x,S,H,q)}scaleRows(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{min:x=0,max:m=1}=S;if(!Number.isFinite(x))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(x>=m)throw new RangeError("min must be smaller than max");let v=new ce(this.rows,this.columns);for(let E=0;E<this.rows;E++){const L=this.getRow(E);L.length>0&&e(L,{min:x,max:m,output:L}),v.setRow(E,L)}return v}scaleColumns(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{min:x=0,max:m=1}=S;if(!Number.isFinite(x))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(x>=m)throw new RangeError("min must be smaller than max");let v=new ce(this.rows,this.columns);for(let E=0;E<this.columns;E++){const L=this.getColumn(E);L.length&&e(L,{min:x,max:m,output:L}),v.setColumn(E,L)}return v}flipRows(){const S=Math.ceil(this.columns/2);for(let x=0;x<this.rows;x++)for(let m=0;m<S;m++){let v=this.get(x,m),E=this.get(x,this.columns-1-m);this.set(x,m,E),this.set(x,this.columns-1-m,v)}return this}flipColumns(){const S=Math.ceil(this.rows/2);for(let x=0;x<this.columns;x++)for(let m=0;m<S;m++){let v=this.get(m,x),E=this.get(this.rows-1-m,x);this.set(m,x,E),this.set(this.rows-1-m,x,v)}return this}kroneckerProduct(S){S=ce.checkMatrix(S);let x=this.rows,m=this.columns,v=S.rows,E=S.columns,L=new ce(x*v,m*E);for(let $=0;$<x;$++)for(let H=0;H<m;H++)for(let q=0;q<v;q++)for(let pe=0;pe<E;pe++)L.set(v*$+q,E*H+pe,this.get($,H)*S.get(q,pe));return L}kroneckerSum(S){if(S=ce.checkMatrix(S),!this.isSquare()||!S.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let x=this.rows,m=S.rows,v=this.kroneckerProduct(ce.eye(m,m)),E=ce.eye(x,x).kroneckerProduct(S);return v.add(E)}transpose(){let S=new ce(this.columns,this.rows);for(let x=0;x<this.rows;x++)for(let m=0;m<this.columns;m++)S.set(m,x,this.get(x,m));return S}sortRows(S=U){for(let x=0;x<this.rows;x++)this.setRow(x,this.getRow(x).sort(S));return this}sortColumns(S=U){for(let x=0;x<this.columns;x++)this.setColumn(x,this.getColumn(x).sort(S));return this}subMatrix(S,x,m,v){C(this,S,x,m,v);let E=new ce(x-S+1,v-m+1);for(let L=S;L<=x;L++)for(let $=m;$<=v;$++)E.set(L-S,$-m,this.get(L,$));return E}subMatrixRow(S,x,m){if(x===void 0&&(x=0),m===void 0&&(m=this.columns-1),x>m||x<0||x>=this.columns||m<0||m>=this.columns)throw new RangeError("Argument out of range");let v=new ce(S.length,m-x+1);for(let E=0;E<S.length;E++)for(let L=x;L<=m;L++){if(S[E]<0||S[E]>=this.rows)throw new RangeError(`Row index out of range: ${S[E]}`);v.set(E,L-x,this.get(S[E],L))}return v}subMatrixColumn(S,x,m){if(x===void 0&&(x=0),m===void 0&&(m=this.rows-1),x>m||x<0||x>=this.rows||m<0||m>=this.rows)throw new RangeError("Argument out of range");let v=new ce(m-x+1,S.length);for(let E=0;E<S.length;E++)for(let L=x;L<=m;L++){if(S[E]<0||S[E]>=this.columns)throw new RangeError(`Column index out of range: ${S[E]}`);v.set(L-x,E,this.get(L,S[E]))}return v}setSubMatrix(S,x,m){if(S=ce.checkMatrix(S),S.isEmpty())return this;let v=x+S.rows-1,E=m+S.columns-1;C(this,x,v,m,E);for(let L=0;L<S.rows;L++)for(let $=0;$<S.columns;$++)this.set(x+L,m+$,S.get(L,$));return this}selection(S,x){R(this,S),A(this,x);let m=new ce(S.length,x.length);for(let v=0;v<S.length;v++){let E=S[v];for(let L=0;L<x.length;L++){let $=x[L];m.set(v,L,this.get(E,$))}}return m}trace(){let S=Math.min(this.rows,this.columns),x=0;for(let m=0;m<S;m++)x+=this.get(m,m);return x}clone(){return this.constructor.copy(this,new ce(this.rows,this.columns))}static copy(S,x){for(const[m,v,E]of S.entries())x.set(m,v,E);return x}sum(S){switch(S){case"row":return F(this);case"column":return B(this);case void 0:return P(this);default:throw new Error(`invalid option: ${S}`)}}product(S){switch(S){case"row":return X(this);case"column":return Y(this);case void 0:return G(this);default:throw new Error(`invalid option: ${S}`)}}mean(S){const x=this.sum(S);switch(S){case"row":{for(let m=0;m<this.rows;m++)x[m]/=this.columns;return x}case"column":{for(let m=0;m<this.columns;m++)x[m]/=this.rows;return x}case void 0:return x/this.size;default:throw new Error(`invalid option: ${S}`)}}variance(S,x={}){if(typeof S=="object"&&(x=S,S=void 0),typeof x!="object")throw new TypeError("options must be an object");const{unbiased:m=!0,mean:v=this.mean(S)}=x;if(typeof m!="boolean")throw new TypeError("unbiased must be a boolean");switch(S){case"row":{if(!t.isAnyArray(v))throw new TypeError("mean must be an array");return K(this,m,v)}case"column":{if(!t.isAnyArray(v))throw new TypeError("mean must be an array");return Q(this,m,v)}case void 0:{if(typeof v!="number")throw new TypeError("mean must be a number");return ie(this,m,v)}default:throw new Error(`invalid option: ${S}`)}}standardDeviation(S,x){typeof S=="object"&&(x=S,S=void 0);const m=this.variance(S,x);if(S===void 0)return Math.sqrt(m);for(let v=0;v<m.length;v++)m[v]=Math.sqrt(m[v]);return m}center(S,x={}){if(typeof S=="object"&&(x=S,S=void 0),typeof x!="object")throw new TypeError("options must be an object");const{center:m=this.mean(S)}=x;switch(S){case"row":{if(!t.isAnyArray(m))throw new TypeError("center must be an array");return xe(this,m),this}case"column":{if(!t.isAnyArray(m))throw new TypeError("center must be an array");return oe(this,m),this}case void 0:{if(typeof m!="number")throw new TypeError("center must be a number");return Re(this,m),this}default:throw new Error(`invalid option: ${S}`)}}scale(S,x={}){if(typeof S=="object"&&(x=S,S=void 0),typeof x!="object")throw new TypeError("options must be an object");let m=x.scale;switch(S){case"row":{if(m===void 0)m=re(this);else if(!t.isAnyArray(m))throw new TypeError("scale must be an array");return Ee(this,m),this}case"column":{if(m===void 0)m=ue(this);else if(!t.isAnyArray(m))throw new TypeError("scale must be an array");return Ve(this,m),this}case void 0:{if(m===void 0)m=D(this);else if(typeof m!="number")throw new TypeError("scale must be a number");return ne(this,m),this}default:throw new Error(`invalid option: ${S}`)}}toString(S){return i(this,S)}[Symbol.iterator](){return this.entries()}*entries(){for(let S=0;S<this.rows;S++)for(let x=0;x<this.columns;x++)yield[S,x,this.get(S,x)]}*values(){for(let S=0;S<this.rows;S++)for(let x=0;x<this.columns;x++)yield this.get(S,x)}}ye.prototype.klass="Matrix",typeof Symbol<"u"&&(ye.prototype[Symbol.for("nodejs.util.inspect.custom")]=s);function U(j,S){return j-S}function we(j){return j.every(S=>typeof S=="number")}ye.random=ye.rand,ye.randomInt=ye.randInt,ye.diagonal=ye.diag,ye.prototype.diagonal=ye.prototype.diag,ye.identity=ye.eye,ye.prototype.negate=ye.prototype.neg,ye.prototype.tensorProduct=ye.prototype.kroneckerProduct;const sa=class sa extends ye{constructor(x,m){super();lt(this,Ns);z(this,"data");if(sa.isMatrix(x))xt(this,Ns,Wx).call(this,x.rows,x.columns),sa.copy(x,this);else if(Number.isInteger(x)&&x>=0)xt(this,Ns,Wx).call(this,x,m);else if(t.isAnyArray(x)){const v=x;if(x=v.length,m=x?v[0].length:0,typeof m!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let E=0;E<x;E++){if(v[E].length!==m)throw new RangeError("Inconsistent array dimensions");if(!we(v[E]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(v[E]))}this.rows=x,this.columns=m}else throw new TypeError("First argument must be a positive number or an array")}set(x,m,v){return this.data[x][m]=v,this}get(x,m){return this.data[x][m]}removeRow(x){return d(this,x),this.data.splice(x,1),this.rows-=1,this}addRow(x,m){return m===void 0&&(m=x,x=this.rows),d(this,x,!0),m=Float64Array.from(b(this,m)),this.data.splice(x,0,m),this.rows+=1,this}removeColumn(x){g(this,x);for(let m=0;m<this.rows;m++){const v=new Float64Array(this.columns-1);for(let E=0;E<x;E++)v[E]=this.data[m][E];for(let E=x+1;E<this.columns;E++)v[E-1]=this.data[m][E];this.data[m]=v}return this.columns-=1,this}addColumn(x,m){typeof m>"u"&&(m=x,x=this.columns),g(this,x,!0),m=w(this,m);for(let v=0;v<this.rows;v++){const E=new Float64Array(this.columns+1);let L=0;for(;L<x;L++)E[L]=this.data[v][L];for(E[L++]=m[v];L<this.columns+1;L++)E[L]=this.data[v][L-1];this.data[v]=E}return this.columns+=1,this}};Ns=new WeakSet,Wx=function(x,m){if(this.data=[],Number.isInteger(m)&&m>=0)for(let v=0;v<x;v++)this.data.push(new Float64Array(m));else throw new TypeError("nColumns must be a positive integer");this.rows=x,this.columns=m};let ce=sa;h(ye,ce);const Yi=class Yi extends ye{constructor(x){super();lt(this,Yn);if(ce.isMatrix(x)){if(!x.isSymmetric())throw new TypeError("not symmetric data");Qe(this,Yn,ce.copy(x,new ce(x.rows,x.rows)))}else if(Number.isInteger(x)&&x>=0)Qe(this,Yn,new ce(x,x));else if(Qe(this,Yn,new ce(x)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return se(this,Yn).size}get rows(){return se(this,Yn).rows}get columns(){return se(this,Yn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(x){return ce.isMatrix(x)&&x.klassType==="SymmetricMatrix"}static zeros(x){return new this(x)}static ones(x){return new this(x).fill(1)}clone(){const x=new Yi(this.diagonalSize);for(const[m,v,E]of this.upperRightEntries())x.set(m,v,E);return x}toMatrix(){return new ce(this)}get(x,m){return se(this,Yn).get(x,m)}set(x,m,v){return se(this,Yn).set(x,m,v),se(this,Yn).set(m,x,v),this}removeCross(x){return se(this,Yn).removeRow(x),se(this,Yn).removeColumn(x),this}addCross(x,m){m===void 0&&(m=x,x=this.diagonalSize);const v=m.slice();return v.splice(x,1),se(this,Yn).addRow(x,v),se(this,Yn).addColumn(x,m),this}applyMask(x){if(x.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const m=[];for(const[v,E]of x.entries())E||m.push(v);m.reverse();for(const v of m)this.removeCross(v);return this}toCompact(){const{diagonalSize:x}=this,m=new Array(x*(x+1)/2);for(let v=0,E=0,L=0;L<m.length;L++)m[L]=this.get(E,v),++v>=x&&(v=++E);return m}static fromCompact(x){const m=x.length,v=(Math.sqrt(8*m+1)-1)/2;if(!Number.isInteger(v))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(x)}`);const E=new Yi(v);for(let L=0,$=0,H=0;H<m;H++)E.set(L,$,x[H]),++L>=v&&(L=++$);return E}*upperRightEntries(){for(let x=0,m=0;x<this.diagonalSize;void 0){const v=this.get(x,m);yield[x,m,v],++m>=this.diagonalSize&&(m=++x)}}*upperRightValues(){for(let x=0,m=0;x<this.diagonalSize;void 0)yield this.get(x,m),++m>=this.diagonalSize&&(m=++x)}};Yn=new WeakMap;let ke=Yi;ke.prototype.klassType="SymmetricMatrix";class Ce extends ke{static isDistanceMatrix(S){return ke.isSymmetricMatrix(S)&&S.klassSubType==="DistanceMatrix"}constructor(S){if(super(S),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(S,x,m){return S===x&&(m=0),super.set(S,x,m)}addCross(S,x){return x===void 0&&(x=S,S=this.diagonalSize),x=x.slice(),x[S]=0,super.addCross(S,x)}toSymmetricMatrix(){return new ke(this)}clone(){const S=new Ce(this.diagonalSize);for(const[x,m,v]of this.upperRightEntries())x!==m&&S.set(x,m,v);return S}toCompact(){const{diagonalSize:S}=this,x=(S-1)*S/2,m=new Array(x);for(let v=1,E=0,L=0;L<m.length;L++)m[L]=this.get(E,v),++v>=S&&(v=++E+1);return m}static fromCompact(S){const x=S.length;if(x===0)return new this(0);const m=(Math.sqrt(8*x+1)+1)/2;if(!Number.isInteger(m))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(S)}`);const v=new this(m);for(let E=1,L=0,$=0;$<x;$++)v.set(E,L,S[$]),++E>=m&&(E=++L+1);return v}}Ce.prototype.klassSubType="DistanceMatrix";class De extends ye{constructor(S,x,m){super(),this.matrix=S,this.rows=x,this.columns=m}}class Ge extends De{constructor(S,x){g(S,x),super(S,S.rows,1),this.column=x}set(S,x,m){return this.matrix.set(S,this.column,m),this}get(S){return this.matrix.get(S,this.column)}}class Ke extends De{constructor(S,x){A(S,x),super(S,S.rows,x.length),this.columnIndices=x}set(S,x,m){return this.matrix.set(S,this.columnIndices[x],m),this}get(S,x){return this.matrix.get(S,this.columnIndices[x])}}class nt extends De{constructor(S){super(S,S.rows,S.columns)}set(S,x,m){return this.matrix.set(S,this.columns-x-1,m),this}get(S,x){return this.matrix.get(S,this.columns-x-1)}}class st extends De{constructor(S){super(S,S.rows,S.columns)}set(S,x,m){return this.matrix.set(this.rows-S-1,x,m),this}get(S,x){return this.matrix.get(this.rows-S-1,x)}}class ct extends De{constructor(S,x){d(S,x),super(S,1,S.columns),this.row=x}set(S,x,m){return this.matrix.set(this.row,x,m),this}get(S,x){return this.matrix.get(this.row,x)}}class Xt extends De{constructor(S,x){R(S,x),super(S,x.length,S.columns),this.rowIndices=x}set(S,x,m){return this.matrix.set(this.rowIndices[S],x,m),this}get(S,x){return this.matrix.get(this.rowIndices[S],x)}}class In extends De{constructor(S,x,m){R(S,x),A(S,m),super(S,x.length,m.length),this.rowIndices=x,this.columnIndices=m}set(S,x,m){return this.matrix.set(this.rowIndices[S],this.columnIndices[x],m),this}get(S,x){return this.matrix.get(this.rowIndices[S],this.columnIndices[x])}}class ar extends De{constructor(S,x,m,v,E){C(S,x,m,v,E),super(S,m-x+1,E-v+1),this.startRow=x,this.startColumn=v}set(S,x,m){return this.matrix.set(this.startRow+S,this.startColumn+x,m),this}get(S,x){return this.matrix.get(this.startRow+S,this.startColumn+x)}}class xn extends De{constructor(S){super(S,S.columns,S.rows)}set(S,x,m){return this.matrix.set(x,S,m),this}get(S,x){return this.matrix.get(x,S)}}class Tn extends ye{constructor(S,x={}){const{rows:m=1}=x;if(S.length%m!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=m,this.columns=S.length/m,this.data=S}set(S,x,m){let v=this._calculateIndex(S,x);return this.data[v]=m,this}get(S,x){let m=this._calculateIndex(S,x);return this.data[m]}_calculateIndex(S,x){return S*this.columns+x}}class fn extends ye{constructor(S){super(),this.data=S,this.rows=S.length,this.columns=S[0].length}set(S,x,m){return this.data[S][x]=m,this}get(S,x){return this.data[S][x]}}function xi(j,S){if(t.isAnyArray(j))return j[0]&&t.isAnyArray(j[0])?new fn(j):new Tn(j,S);throw new Error("the argument is not an array")}class lr{constructor(S){S=fn.checkMatrix(S);let x=S.clone(),m=x.rows,v=x.columns,E=new Float64Array(m),L=1,$,H,q,pe,ee,Ne,ze,Te,Ie;for($=0;$<m;$++)E[$]=$;for(Te=new Float64Array(m),H=0;H<v;H++){for($=0;$<m;$++)Te[$]=x.get($,H);for($=0;$<m;$++){for(Ie=Math.min($,H),ee=0,q=0;q<Ie;q++)ee+=x.get($,q)*Te[q];Te[$]-=ee,x.set($,H,Te[$])}for(pe=H,$=H+1;$<m;$++)Math.abs(Te[$])>Math.abs(Te[pe])&&(pe=$);if(pe!==H){for(q=0;q<v;q++)Ne=x.get(pe,q),x.set(pe,q,x.get(H,q)),x.set(H,q,Ne);ze=E[pe],E[pe]=E[H],E[H]=ze,L=-L}if(H<m&&x.get(H,H)!==0)for($=H+1;$<m;$++)x.set($,H,x.get($,H)/x.get(H,H))}this.LU=x,this.pivotVector=E,this.pivotSign=L}isSingular(){let S=this.LU,x=S.columns;for(let m=0;m<x;m++)if(S.get(m,m)===0)return!0;return!1}solve(S){S=ce.checkMatrix(S);let x=this.LU;if(x.rows!==S.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let v=S.columns,E=S.subMatrixRow(this.pivotVector,0,v-1),L=x.columns,$,H,q;for(q=0;q<L;q++)for($=q+1;$<L;$++)for(H=0;H<v;H++)E.set($,H,E.get($,H)-E.get(q,H)*x.get($,q));for(q=L-1;q>=0;q--){for(H=0;H<v;H++)E.set(q,H,E.get(q,H)/x.get(q,q));for($=0;$<q;$++)for(H=0;H<v;H++)E.set($,H,E.get($,H)-E.get(q,H)*x.get($,q))}return E}get determinant(){let S=this.LU;if(!S.isSquare())throw new Error("Matrix must be square");let x=this.pivotSign,m=S.columns;for(let v=0;v<m;v++)x*=S.get(v,v);return x}get lowerTriangularMatrix(){let S=this.LU,x=S.rows,m=S.columns,v=new ce(x,m);for(let E=0;E<x;E++)for(let L=0;L<m;L++)E>L?v.set(E,L,S.get(E,L)):E===L?v.set(E,L,1):v.set(E,L,0);return v}get upperTriangularMatrix(){let S=this.LU,x=S.rows,m=S.columns,v=new ce(x,m);for(let E=0;E<x;E++)for(let L=0;L<m;L++)E<=L?v.set(E,L,S.get(E,L)):v.set(E,L,0);return v}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function mr(j,S){let x=0;return Math.abs(j)>Math.abs(S)?(x=S/j,Math.abs(j)*Math.sqrt(1+x*x)):S!==0?(x=j/S,Math.abs(S)*Math.sqrt(1+x*x)):0}class Ks{constructor(S){S=fn.checkMatrix(S);let x=S.clone(),m=S.rows,v=S.columns,E=new Float64Array(v),L,$,H,q;for(H=0;H<v;H++){let pe=0;for(L=H;L<m;L++)pe=mr(pe,x.get(L,H));if(pe!==0){for(x.get(H,H)<0&&(pe=-pe),L=H;L<m;L++)x.set(L,H,x.get(L,H)/pe);for(x.set(H,H,x.get(H,H)+1),$=H+1;$<v;$++){for(q=0,L=H;L<m;L++)q+=x.get(L,H)*x.get(L,$);for(q=-q/x.get(H,H),L=H;L<m;L++)x.set(L,$,x.get(L,$)+q*x.get(L,H))}}E[H]=-pe}this.QR=x,this.Rdiag=E}solve(S){S=ce.checkMatrix(S);let x=this.QR,m=x.rows;if(S.rows!==m)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let v=S.columns,E=S.clone(),L=x.columns,$,H,q,pe;for(q=0;q<L;q++)for(H=0;H<v;H++){for(pe=0,$=q;$<m;$++)pe+=x.get($,q)*E.get($,H);for(pe=-pe/x.get(q,q),$=q;$<m;$++)E.set($,H,E.get($,H)+pe*x.get($,q))}for(q=L-1;q>=0;q--){for(H=0;H<v;H++)E.set(q,H,E.get(q,H)/this.Rdiag[q]);for($=0;$<q;$++)for(H=0;H<v;H++)E.set($,H,E.get($,H)-E.get(q,H)*x.get($,q))}return E.subMatrix(0,L-1,0,v-1)}isFullRank(){let S=this.QR.columns;for(let x=0;x<S;x++)if(this.Rdiag[x]===0)return!1;return!0}get upperTriangularMatrix(){let S=this.QR,x=S.columns,m=new ce(x,x),v,E;for(v=0;v<x;v++)for(E=0;E<x;E++)v<E?m.set(v,E,S.get(v,E)):v===E?m.set(v,E,this.Rdiag[v]):m.set(v,E,0);return m}get orthogonalMatrix(){let S=this.QR,x=S.rows,m=S.columns,v=new ce(x,m),E,L,$,H;for($=m-1;$>=0;$--){for(E=0;E<x;E++)v.set(E,$,0);for(v.set($,$,1),L=$;L<m;L++)if(S.get($,$)!==0){for(H=0,E=$;E<x;E++)H+=S.get(E,$)*v.get(E,L);for(H=-H/S.get($,$),E=$;E<x;E++)v.set(E,L,v.get(E,L)+H*S.get(E,$))}}return v}}class Zs{constructor(S,x={}){if(S=fn.checkMatrix(S),S.isEmpty())throw new Error("Matrix must be non-empty");let m=S.rows,v=S.columns;const{computeLeftSingularVectors:E=!0,computeRightSingularVectors:L=!0,autoTranspose:$=!1}=x;let H=!!E,q=!!L,pe=!1,ee;if(m<v)if(!$)ee=S.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ee=S.transpose(),m=ee.rows,v=ee.columns,pe=!0;let le=H;H=q,q=le}else ee=S.clone();let Ne=Math.min(m,v),ze=Math.min(m+1,v),Te=new Float64Array(ze),Ie=new ce(m,Ne),Xe=new ce(v,v),te=new Float64Array(v),$e=new Float64Array(m),Ze=new Float64Array(ze);for(let le=0;le<ze;le++)Ze[le]=le;let ot=Math.min(m-1,v),ft=Math.max(0,Math.min(v-2,m)),mn=Math.max(ot,ft);for(let le=0;le<mn;le++){if(le<ot){Te[le]=0;for(let Be=le;Be<m;Be++)Te[le]=mr(Te[le],ee.get(Be,le));if(Te[le]!==0){ee.get(le,le)<0&&(Te[le]=-Te[le]);for(let Be=le;Be<m;Be++)ee.set(Be,le,ee.get(Be,le)/Te[le]);ee.set(le,le,ee.get(le,le)+1)}Te[le]=-Te[le]}for(let Be=le+1;Be<v;Be++){if(le<ot&&Te[le]!==0){let qe=0;for(let Ue=le;Ue<m;Ue++)qe+=ee.get(Ue,le)*ee.get(Ue,Be);qe=-qe/ee.get(le,le);for(let Ue=le;Ue<m;Ue++)ee.set(Ue,Be,ee.get(Ue,Be)+qe*ee.get(Ue,le))}te[Be]=ee.get(le,Be)}if(H&&le<ot)for(let Be=le;Be<m;Be++)Ie.set(Be,le,ee.get(Be,le));if(le<ft){te[le]=0;for(let Be=le+1;Be<v;Be++)te[le]=mr(te[le],te[Be]);if(te[le]!==0){te[le+1]<0&&(te[le]=0-te[le]);for(let Be=le+1;Be<v;Be++)te[Be]/=te[le];te[le+1]+=1}if(te[le]=-te[le],le+1<m&&te[le]!==0){for(let Be=le+1;Be<m;Be++)$e[Be]=0;for(let Be=le+1;Be<m;Be++)for(let qe=le+1;qe<v;qe++)$e[Be]+=te[qe]*ee.get(Be,qe);for(let Be=le+1;Be<v;Be++){let qe=-te[Be]/te[le+1];for(let Ue=le+1;Ue<m;Ue++)ee.set(Ue,Be,ee.get(Ue,Be)+qe*$e[Ue])}}if(q)for(let Be=le+1;Be<v;Be++)Xe.set(Be,le,te[Be])}}let rt=Math.min(v,m+1);if(ot<v&&(Te[ot]=ee.get(ot,ot)),m<rt&&(Te[rt-1]=0),ft+1<rt&&(te[ft]=ee.get(ft,rt-1)),te[rt-1]=0,H){for(let le=ot;le<Ne;le++){for(let Be=0;Be<m;Be++)Ie.set(Be,le,0);Ie.set(le,le,1)}for(let le=ot-1;le>=0;le--)if(Te[le]!==0){for(let Be=le+1;Be<Ne;Be++){let qe=0;for(let Ue=le;Ue<m;Ue++)qe+=Ie.get(Ue,le)*Ie.get(Ue,Be);qe=-qe/Ie.get(le,le);for(let Ue=le;Ue<m;Ue++)Ie.set(Ue,Be,Ie.get(Ue,Be)+qe*Ie.get(Ue,le))}for(let Be=le;Be<m;Be++)Ie.set(Be,le,-Ie.get(Be,le));Ie.set(le,le,1+Ie.get(le,le));for(let Be=0;Be<le-1;Be++)Ie.set(Be,le,0)}else{for(let Be=0;Be<m;Be++)Ie.set(Be,le,0);Ie.set(le,le,1)}}if(q)for(let le=v-1;le>=0;le--){if(le<ft&&te[le]!==0)for(let Be=le+1;Be<v;Be++){let qe=0;for(let Ue=le+1;Ue<v;Ue++)qe+=Xe.get(Ue,le)*Xe.get(Ue,Be);qe=-qe/Xe.get(le+1,le);for(let Ue=le+1;Ue<v;Ue++)Xe.set(Ue,Be,Xe.get(Ue,Be)+qe*Xe.get(Ue,le))}for(let Be=0;Be<v;Be++)Xe.set(Be,le,0);Xe.set(le,le,1)}let at=rt-1,Gt=Number.EPSILON;for(;rt>0;){let le,Be;for(le=rt-2;le>=-1&&le!==-1;le--){const qe=Number.MIN_VALUE+Gt*Math.abs(Te[le]+Math.abs(Te[le+1]));if(Math.abs(te[le])<=qe||Number.isNaN(te[le])){te[le]=0;break}}if(le===rt-2)Be=4;else{let qe;for(qe=rt-1;qe>=le&&qe!==le;qe--){let Ue=(qe!==rt?Math.abs(te[qe]):0)+(qe!==le+1?Math.abs(te[qe-1]):0);if(Math.abs(Te[qe])<=Gt*Ue){Te[qe]=0;break}}qe===le?Be=3:qe===rt-1?Be=1:(Be=2,le=qe)}switch(le++,Be){case 1:{let qe=te[rt-2];te[rt-2]=0;for(let Ue=rt-2;Ue>=le;Ue--){let hn=mr(Te[Ue],qe),Ot=Te[Ue]/hn,Jt=qe/hn;if(Te[Ue]=hn,Ue!==le&&(qe=-Jt*te[Ue-1],te[Ue-1]=Ot*te[Ue-1]),q)for(let sn=0;sn<v;sn++)hn=Ot*Xe.get(sn,Ue)+Jt*Xe.get(sn,rt-1),Xe.set(sn,rt-1,-Jt*Xe.get(sn,Ue)+Ot*Xe.get(sn,rt-1)),Xe.set(sn,Ue,hn)}break}case 2:{let qe=te[le-1];te[le-1]=0;for(let Ue=le;Ue<rt;Ue++){let hn=mr(Te[Ue],qe),Ot=Te[Ue]/hn,Jt=qe/hn;if(Te[Ue]=hn,qe=-Jt*te[Ue],te[Ue]=Ot*te[Ue],H)for(let sn=0;sn<m;sn++)hn=Ot*Ie.get(sn,Ue)+Jt*Ie.get(sn,le-1),Ie.set(sn,le-1,-Jt*Ie.get(sn,Ue)+Ot*Ie.get(sn,le-1)),Ie.set(sn,Ue,hn)}break}case 3:{const qe=Math.max(Math.abs(Te[rt-1]),Math.abs(Te[rt-2]),Math.abs(te[rt-2]),Math.abs(Te[le]),Math.abs(te[le])),Ue=Te[rt-1]/qe,hn=Te[rt-2]/qe,Ot=te[rt-2]/qe,Jt=Te[le]/qe,sn=te[le]/qe,Kn=((hn+Ue)*(hn-Ue)+Ot*Ot)/2,Br=Ue*Ot*(Ue*Ot);let Lt=0;(Kn!==0||Br!==0)&&(Kn<0?Lt=0-Math.sqrt(Kn*Kn+Br):Lt=Math.sqrt(Kn*Kn+Br),Lt=Br/(Kn+Lt));let Kr=(Jt+Ue)*(Jt-Ue)+Lt,Ms=Jt*sn;for(let vt=le;vt<rt-1;vt++){let Un=mr(Kr,Ms);Un===0&&(Un=Number.MIN_VALUE);let nr=Kr/Un,kr=Ms/Un;if(vt!==le&&(te[vt-1]=Un),Kr=nr*Te[vt]+kr*te[vt],te[vt]=nr*te[vt]-kr*Te[vt],Ms=kr*Te[vt+1],Te[vt+1]=nr*Te[vt+1],q)for(let zt=0;zt<v;zt++)Un=nr*Xe.get(zt,vt)+kr*Xe.get(zt,vt+1),Xe.set(zt,vt+1,-kr*Xe.get(zt,vt)+nr*Xe.get(zt,vt+1)),Xe.set(zt,vt,Un);if(Un=mr(Kr,Ms),Un===0&&(Un=Number.MIN_VALUE),nr=Kr/Un,kr=Ms/Un,Te[vt]=Un,Kr=nr*te[vt]+kr*Te[vt+1],Te[vt+1]=-kr*te[vt]+nr*Te[vt+1],Ms=kr*te[vt+1],te[vt+1]=nr*te[vt+1],H&&vt<m-1)for(let zt=0;zt<m;zt++)Un=nr*Ie.get(zt,vt)+kr*Ie.get(zt,vt+1),Ie.set(zt,vt+1,-kr*Ie.get(zt,vt)+nr*Ie.get(zt,vt+1)),Ie.set(zt,vt,Un)}te[rt-2]=Kr;break}case 4:{if(Te[le]<=0&&(Te[le]=Te[le]<0?-Te[le]:0,q))for(let qe=0;qe<=at;qe++)Xe.set(qe,le,-Xe.get(qe,le));for(;le<at&&!(Te[le]>=Te[le+1]);){let qe=Te[le];if(Te[le]=Te[le+1],Te[le+1]=qe,q&&le<v-1)for(let Ue=0;Ue<v;Ue++)qe=Xe.get(Ue,le+1),Xe.set(Ue,le+1,Xe.get(Ue,le)),Xe.set(Ue,le,qe);if(H&&le<m-1)for(let Ue=0;Ue<m;Ue++)qe=Ie.get(Ue,le+1),Ie.set(Ue,le+1,Ie.get(Ue,le)),Ie.set(Ue,le,qe);le++}rt--;break}}}if(pe){let le=Xe;Xe=Ie,Ie=le}this.m=m,this.n=v,this.s=Te,this.U=Ie,this.V=Xe}solve(S){let x=S,m=this.threshold,v=this.s.length,E=ce.zeros(v,v);for(let Ne=0;Ne<v;Ne++)Math.abs(this.s[Ne])<=m?E.set(Ne,Ne,0):E.set(Ne,Ne,1/this.s[Ne]);let L=this.U,$=this.rightSingularVectors,H=$.mmul(E),q=$.rows,pe=L.rows,ee=ce.zeros(q,pe);for(let Ne=0;Ne<q;Ne++)for(let ze=0;ze<pe;ze++){let Te=0;for(let Ie=0;Ie<v;Ie++)Te+=H.get(Ne,Ie)*L.get(ze,Ie);ee.set(Ne,ze,Te)}return ee.mmul(x)}solveForDiagonal(S){return this.solve(ce.diag(S))}inverse(){let S=this.V,x=this.threshold,m=S.rows,v=S.columns,E=new ce(m,this.s.length);for(let pe=0;pe<m;pe++)for(let ee=0;ee<v;ee++)Math.abs(this.s[ee])>x&&E.set(pe,ee,S.get(pe,ee)/this.s[ee]);let L=this.U,$=L.rows,H=L.columns,q=new ce(m,$);for(let pe=0;pe<m;pe++)for(let ee=0;ee<$;ee++){let Ne=0;for(let ze=0;ze<H;ze++)Ne+=E.get(pe,ze)*L.get(ee,ze);q.set(pe,ee,Ne)}return q}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let S=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,x=0,m=this.s;for(let v=0,E=m.length;v<E;v++)m[v]>S&&x++;return x}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ce.diag(this.s)}}function nu(j,S=!1){return j=fn.checkMatrix(j),S?new Zs(j).inverse():Me(j,ce.eye(j.rows))}function Me(j,S,x=!1){return j=fn.checkMatrix(j),S=fn.checkMatrix(S),x?new Zs(j).solve(S):j.isSquare()?new lr(j).solve(S):new Ks(j).solve(S)}function Le(j){if(j=ce.checkMatrix(j),j.isSquare()){if(j.columns===0)return 1;let S,x,m,v;if(j.columns===2)return S=j.get(0,0),x=j.get(0,1),m=j.get(1,0),v=j.get(1,1),S*v-x*m;if(j.columns===3){let E,L,$;return E=new In(j,[1,2],[1,2]),L=new In(j,[1,2],[0,2]),$=new In(j,[1,2],[0,1]),S=j.get(0,0),x=j.get(0,1),m=j.get(0,2),S*Le(E)-x*Le(L)+m*Le($)}else return new lr(j).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ut(j,S){let x=[];for(let m=0;m<j;m++)m!==S&&x.push(m);return x}function dt(j,S,x,m=1e-9,v=1e-9){if(j>v)return new Array(S.rows+1).fill(0);{let E=S.addRow(x,[0]);for(let L=0;L<E.rows;L++)Math.abs(E.get(L,0))<m&&E.set(L,0,0);return E.to1DArray()}}function $t(j,S={}){const{thresholdValue:x=1e-9,thresholdError:m=1e-9}=S;j=ce.checkMatrix(j);let v=j.rows,E=new ce(v,v);for(let L=0;L<v;L++){let $=ce.columnVector(j.getRow(L)),H=j.subMatrixRow(ut(v,L)).transpose(),pe=new Zs(H).solve($),ee=ce.sub($,H.mmul(pe)).abs().max();E.setRow(L,dt(ee,pe,L,x,m))}return E}function Rr(j,S=Number.EPSILON){if(j=ce.checkMatrix(j),j.isEmpty())return j.transpose();let x=new Zs(j,{autoTranspose:!0}),m=x.leftSingularVectors,v=x.rightSingularVectors,E=x.diagonal;for(let L=0;L<E.length;L++)Math.abs(E[L])>S?E[L]=1/E[L]:E[L]=0;return v.mmul(ce.diag(E).mmul(m.transpose()))}function ks(j,S=j,x={}){j=new ce(j);let m=!1;if(typeof S=="object"&&!ce.isMatrix(S)&&!t.isAnyArray(S)?(x=S,S=j,m=!0):S=new ce(S),j.rows!==S.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:v=!0}=x;v&&(j=j.center("column"),m||(S=S.center("column")));const E=j.transpose().mmul(S);for(let L=0;L<E.rows;L++)for(let $=0;$<E.columns;$++)E.set(L,$,E.get(L,$)*(1/(j.rows-1)));return E}function yr(j,S=j,x={}){j=new ce(j);let m=!1;if(typeof S=="object"&&!ce.isMatrix(S)&&!t.isAnyArray(S)?(x=S,S=j,m=!0):S=new ce(S),j.rows!==S.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:v=!0,scale:E=!0}=x;v&&(j.center("column"),m||S.center("column")),E&&(j.scale("column"),m||S.scale("column"));const L=j.standardDeviation("column",{unbiased:!0}),$=m?L:S.standardDeviation("column",{unbiased:!0}),H=j.transpose().mmul(S);for(let q=0;q<H.rows;q++)for(let pe=0;pe<H.columns;pe++)H.set(q,pe,H.get(q,pe)*(1/(L[q]*$[pe]))*(1/(j.rows-1)));return H}class Xr{constructor(S,x={}){const{assumeSymmetric:m=!1}=x;if(S=fn.checkMatrix(S),!S.isSquare())throw new Error("Matrix is not a square matrix");if(S.isEmpty())throw new Error("Matrix must be non-empty");let v=S.columns,E=new ce(v,v),L=new Float64Array(v),$=new Float64Array(v),H=S,q,pe,ee=!1;if(m?ee=!0:ee=S.isSymmetric(),ee){for(q=0;q<v;q++)for(pe=0;pe<v;pe++)E.set(q,pe,H.get(q,pe));Cr(v,$,L,E),Bn(v,$,L,E)}else{let Ne=new ce(v,v),ze=new Float64Array(v);for(pe=0;pe<v;pe++)for(q=0;q<v;q++)Ne.set(q,pe,H.get(q,pe));jr(v,Ne,ze,E),Yr(v,$,L,E,Ne)}this.n=v,this.e=$,this.d=L,this.V=E}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let S=this.n,x=this.e,m=this.d,v=new ce(S,S),E,L;for(E=0;E<S;E++){for(L=0;L<S;L++)v.set(E,L,0);v.set(E,E,m[E]),x[E]>0?v.set(E,E+1,x[E]):x[E]<0&&v.set(E,E-1,x[E])}return v}}function Cr(j,S,x,m){let v,E,L,$,H,q,pe,ee;for(H=0;H<j;H++)x[H]=m.get(j-1,H);for($=j-1;$>0;$--){for(ee=0,L=0,q=0;q<$;q++)ee=ee+Math.abs(x[q]);if(ee===0)for(S[$]=x[$-1],H=0;H<$;H++)x[H]=m.get($-1,H),m.set($,H,0),m.set(H,$,0);else{for(q=0;q<$;q++)x[q]/=ee,L+=x[q]*x[q];for(v=x[$-1],E=Math.sqrt(L),v>0&&(E=-E),S[$]=ee*E,L=L-v*E,x[$-1]=v-E,H=0;H<$;H++)S[H]=0;for(H=0;H<$;H++){for(v=x[H],m.set(H,$,v),E=S[H]+m.get(H,H)*v,q=H+1;q<=$-1;q++)E+=m.get(q,H)*x[q],S[q]+=m.get(q,H)*v;S[H]=E}for(v=0,H=0;H<$;H++)S[H]/=L,v+=S[H]*x[H];for(pe=v/(L+L),H=0;H<$;H++)S[H]-=pe*x[H];for(H=0;H<$;H++){for(v=x[H],E=S[H],q=H;q<=$-1;q++)m.set(q,H,m.get(q,H)-(v*S[q]+E*x[q]));x[H]=m.get($-1,H),m.set($,H,0)}}x[$]=L}for($=0;$<j-1;$++){if(m.set(j-1,$,m.get($,$)),m.set($,$,1),L=x[$+1],L!==0){for(q=0;q<=$;q++)x[q]=m.get(q,$+1)/L;for(H=0;H<=$;H++){for(E=0,q=0;q<=$;q++)E+=m.get(q,$+1)*m.get(q,H);for(q=0;q<=$;q++)m.set(q,H,m.get(q,H)-E*x[q])}}for(q=0;q<=$;q++)m.set(q,$+1,0)}for(H=0;H<j;H++)x[H]=m.get(j-1,H),m.set(j-1,H,0);m.set(j-1,j-1,1),S[0]=0}function Bn(j,S,x,m){let v,E,L,$,H,q,pe,ee,Ne,ze,Te,Ie,Xe,te,$e,Ze;for(L=1;L<j;L++)S[L-1]=S[L];S[j-1]=0;let ot=0,ft=0,mn=Number.EPSILON;for(q=0;q<j;q++){for(ft=Math.max(ft,Math.abs(x[q])+Math.abs(S[q])),pe=q;pe<j&&!(Math.abs(S[pe])<=mn*ft);)pe++;if(pe>q)do{for(v=x[q],ee=(x[q+1]-v)/(2*S[q]),Ne=mr(ee,1),ee<0&&(Ne=-Ne),x[q]=S[q]/(ee+Ne),x[q+1]=S[q]*(ee+Ne),ze=x[q+1],E=v-x[q],L=q+2;L<j;L++)x[L]-=E;for(ot=ot+E,ee=x[pe],Te=1,Ie=Te,Xe=Te,te=S[q+1],$e=0,Ze=0,L=pe-1;L>=q;L--)for(Xe=Ie,Ie=Te,Ze=$e,v=Te*S[L],E=Te*ee,Ne=mr(ee,S[L]),S[L+1]=$e*Ne,$e=S[L]/Ne,Te=ee/Ne,ee=Te*x[L]-$e*v,x[L+1]=E+$e*(Te*v+$e*x[L]),H=0;H<j;H++)E=m.get(H,L+1),m.set(H,L+1,$e*m.get(H,L)+Te*E),m.set(H,L,Te*m.get(H,L)-$e*E);ee=-$e*Ze*Xe*te*S[q]/ze,S[q]=$e*ee,x[q]=Te*ee}while(Math.abs(S[q])>mn*ft);x[q]=x[q]+ot,S[q]=0}for(L=0;L<j-1;L++){for(H=L,ee=x[L],$=L+1;$<j;$++)x[$]<ee&&(H=$,ee=x[$]);if(H!==L)for(x[H]=x[L],x[L]=ee,$=0;$<j;$++)ee=m.get($,L),m.set($,L,m.get($,H)),m.set($,H,ee)}}function jr(j,S,x,m){let v=0,E=j-1,L,$,H,q,pe,ee,Ne;for(ee=v+1;ee<=E-1;ee++){for(Ne=0,q=ee;q<=E;q++)Ne=Ne+Math.abs(S.get(q,ee-1));if(Ne!==0){for(H=0,q=E;q>=ee;q--)x[q]=S.get(q,ee-1)/Ne,H+=x[q]*x[q];for($=Math.sqrt(H),x[ee]>0&&($=-$),H=H-x[ee]*$,x[ee]=x[ee]-$,pe=ee;pe<j;pe++){for(L=0,q=E;q>=ee;q--)L+=x[q]*S.get(q,pe);for(L=L/H,q=ee;q<=E;q++)S.set(q,pe,S.get(q,pe)-L*x[q])}for(q=0;q<=E;q++){for(L=0,pe=E;pe>=ee;pe--)L+=x[pe]*S.get(q,pe);for(L=L/H,pe=ee;pe<=E;pe++)S.set(q,pe,S.get(q,pe)-L*x[pe])}x[ee]=Ne*x[ee],S.set(ee,ee-1,Ne*$)}}for(q=0;q<j;q++)for(pe=0;pe<j;pe++)m.set(q,pe,q===pe?1:0);for(ee=E-1;ee>=v+1;ee--)if(S.get(ee,ee-1)!==0){for(q=ee+1;q<=E;q++)x[q]=S.get(q,ee-1);for(pe=ee;pe<=E;pe++){for($=0,q=ee;q<=E;q++)$+=x[q]*m.get(q,pe);for($=$/x[ee]/S.get(ee,ee-1),q=ee;q<=E;q++)m.set(q,pe,m.get(q,pe)+$*x[q])}}}function Yr(j,S,x,m,v){let E=j-1,L=0,$=j-1,H=Number.EPSILON,q=0,pe=0,ee=0,Ne=0,ze=0,Te=0,Ie=0,Xe=0,te,$e,Ze,ot,ft,mn,rt,at,Gt,le,Be,qe,Ue,hn,Ot;for(te=0;te<j;te++)for((te<L||te>$)&&(x[te]=v.get(te,te),S[te]=0),$e=Math.max(te-1,0);$e<j;$e++)pe=pe+Math.abs(v.get(te,$e));for(;E>=L;){for(ot=E;ot>L&&(Te=Math.abs(v.get(ot-1,ot-1))+Math.abs(v.get(ot,ot)),Te===0&&(Te=pe),!(Math.abs(v.get(ot,ot-1))<H*Te));)ot--;if(ot===E)v.set(E,E,v.get(E,E)+q),x[E]=v.get(E,E),S[E]=0,E--,Xe=0;else if(ot===E-1){if(rt=v.get(E,E-1)*v.get(E-1,E),ee=(v.get(E-1,E-1)-v.get(E,E))/2,Ne=ee*ee+rt,Ie=Math.sqrt(Math.abs(Ne)),v.set(E,E,v.get(E,E)+q),v.set(E-1,E-1,v.get(E-1,E-1)+q),at=v.get(E,E),Ne>=0){for(Ie=ee>=0?ee+Ie:ee-Ie,x[E-1]=at+Ie,x[E]=x[E-1],Ie!==0&&(x[E]=at-rt/Ie),S[E-1]=0,S[E]=0,at=v.get(E,E-1),Te=Math.abs(at)+Math.abs(Ie),ee=at/Te,Ne=Ie/Te,ze=Math.sqrt(ee*ee+Ne*Ne),ee=ee/ze,Ne=Ne/ze,$e=E-1;$e<j;$e++)Ie=v.get(E-1,$e),v.set(E-1,$e,Ne*Ie+ee*v.get(E,$e)),v.set(E,$e,Ne*v.get(E,$e)-ee*Ie);for(te=0;te<=E;te++)Ie=v.get(te,E-1),v.set(te,E-1,Ne*Ie+ee*v.get(te,E)),v.set(te,E,Ne*v.get(te,E)-ee*Ie);for(te=L;te<=$;te++)Ie=m.get(te,E-1),m.set(te,E-1,Ne*Ie+ee*m.get(te,E)),m.set(te,E,Ne*m.get(te,E)-ee*Ie)}else x[E-1]=at+ee,x[E]=at+ee,S[E-1]=Ie,S[E]=-Ie;E=E-2,Xe=0}else{if(at=v.get(E,E),Gt=0,rt=0,ot<E&&(Gt=v.get(E-1,E-1),rt=v.get(E,E-1)*v.get(E-1,E)),Xe===10){for(q+=at,te=L;te<=E;te++)v.set(te,te,v.get(te,te)-at);Te=Math.abs(v.get(E,E-1))+Math.abs(v.get(E-1,E-2)),at=Gt=.75*Te,rt=-.4375*Te*Te}if(Xe===30&&(Te=(Gt-at)/2,Te=Te*Te+rt,Te>0)){for(Te=Math.sqrt(Te),Gt<at&&(Te=-Te),Te=at-rt/((Gt-at)/2+Te),te=L;te<=E;te++)v.set(te,te,v.get(te,te)-Te);q+=Te,at=Gt=rt=.964}for(Xe=Xe+1,ft=E-2;ft>=ot&&(Ie=v.get(ft,ft),ze=at-Ie,Te=Gt-Ie,ee=(ze*Te-rt)/v.get(ft+1,ft)+v.get(ft,ft+1),Ne=v.get(ft+1,ft+1)-Ie-ze-Te,ze=v.get(ft+2,ft+1),Te=Math.abs(ee)+Math.abs(Ne)+Math.abs(ze),ee=ee/Te,Ne=Ne/Te,ze=ze/Te,!(ft===ot||Math.abs(v.get(ft,ft-1))*(Math.abs(Ne)+Math.abs(ze))<H*(Math.abs(ee)*(Math.abs(v.get(ft-1,ft-1))+Math.abs(Ie)+Math.abs(v.get(ft+1,ft+1))))));)ft--;for(te=ft+2;te<=E;te++)v.set(te,te-2,0),te>ft+2&&v.set(te,te-3,0);for(Ze=ft;Ze<=E-1&&(hn=Ze!==E-1,Ze!==ft&&(ee=v.get(Ze,Ze-1),Ne=v.get(Ze+1,Ze-1),ze=hn?v.get(Ze+2,Ze-1):0,at=Math.abs(ee)+Math.abs(Ne)+Math.abs(ze),at!==0&&(ee=ee/at,Ne=Ne/at,ze=ze/at)),at!==0);Ze++)if(Te=Math.sqrt(ee*ee+Ne*Ne+ze*ze),ee<0&&(Te=-Te),Te!==0){for(Ze!==ft?v.set(Ze,Ze-1,-Te*at):ot!==ft&&v.set(Ze,Ze-1,-v.get(Ze,Ze-1)),ee=ee+Te,at=ee/Te,Gt=Ne/Te,Ie=ze/Te,Ne=Ne/ee,ze=ze/ee,$e=Ze;$e<j;$e++)ee=v.get(Ze,$e)+Ne*v.get(Ze+1,$e),hn&&(ee=ee+ze*v.get(Ze+2,$e),v.set(Ze+2,$e,v.get(Ze+2,$e)-ee*Ie)),v.set(Ze,$e,v.get(Ze,$e)-ee*at),v.set(Ze+1,$e,v.get(Ze+1,$e)-ee*Gt);for(te=0;te<=Math.min(E,Ze+3);te++)ee=at*v.get(te,Ze)+Gt*v.get(te,Ze+1),hn&&(ee=ee+Ie*v.get(te,Ze+2),v.set(te,Ze+2,v.get(te,Ze+2)-ee*ze)),v.set(te,Ze,v.get(te,Ze)-ee),v.set(te,Ze+1,v.get(te,Ze+1)-ee*Ne);for(te=L;te<=$;te++)ee=at*m.get(te,Ze)+Gt*m.get(te,Ze+1),hn&&(ee=ee+Ie*m.get(te,Ze+2),m.set(te,Ze+2,m.get(te,Ze+2)-ee*ze)),m.set(te,Ze,m.get(te,Ze)-ee),m.set(te,Ze+1,m.get(te,Ze+1)-ee*Ne)}}}if(pe!==0){for(E=j-1;E>=0;E--)if(ee=x[E],Ne=S[E],Ne===0)for(ot=E,v.set(E,E,1),te=E-1;te>=0;te--){for(rt=v.get(te,te)-ee,ze=0,$e=ot;$e<=E;$e++)ze=ze+v.get(te,$e)*v.get($e,E);if(S[te]<0)Ie=rt,Te=ze;else if(ot=te,S[te]===0?v.set(te,E,rt!==0?-ze/rt:-ze/(H*pe)):(at=v.get(te,te+1),Gt=v.get(te+1,te),Ne=(x[te]-ee)*(x[te]-ee)+S[te]*S[te],mn=(at*Te-Ie*ze)/Ne,v.set(te,E,mn),v.set(te+1,E,Math.abs(at)>Math.abs(Ie)?(-ze-rt*mn)/at:(-Te-Gt*mn)/Ie)),mn=Math.abs(v.get(te,E)),H*mn*mn>1)for($e=te;$e<=E;$e++)v.set($e,E,v.get($e,E)/mn)}else if(Ne<0)for(ot=E-1,Math.abs(v.get(E,E-1))>Math.abs(v.get(E-1,E))?(v.set(E-1,E-1,Ne/v.get(E,E-1)),v.set(E-1,E,-(v.get(E,E)-ee)/v.get(E,E-1))):(Ot=ra(0,-v.get(E-1,E),v.get(E-1,E-1)-ee,Ne),v.set(E-1,E-1,Ot[0]),v.set(E-1,E,Ot[1])),v.set(E,E-1,0),v.set(E,E,1),te=E-2;te>=0;te--){for(le=0,Be=0,$e=ot;$e<=E;$e++)le=le+v.get(te,$e)*v.get($e,E-1),Be=Be+v.get(te,$e)*v.get($e,E);if(rt=v.get(te,te)-ee,S[te]<0)Ie=rt,ze=le,Te=Be;else if(ot=te,S[te]===0?(Ot=ra(-le,-Be,rt,Ne),v.set(te,E-1,Ot[0]),v.set(te,E,Ot[1])):(at=v.get(te,te+1),Gt=v.get(te+1,te),qe=(x[te]-ee)*(x[te]-ee)+S[te]*S[te]-Ne*Ne,Ue=(x[te]-ee)*2*Ne,qe===0&&Ue===0&&(qe=H*pe*(Math.abs(rt)+Math.abs(Ne)+Math.abs(at)+Math.abs(Gt)+Math.abs(Ie))),Ot=ra(at*ze-Ie*le+Ne*Be,at*Te-Ie*Be-Ne*le,qe,Ue),v.set(te,E-1,Ot[0]),v.set(te,E,Ot[1]),Math.abs(at)>Math.abs(Ie)+Math.abs(Ne)?(v.set(te+1,E-1,(-le-rt*v.get(te,E-1)+Ne*v.get(te,E))/at),v.set(te+1,E,(-Be-rt*v.get(te,E)-Ne*v.get(te,E-1))/at)):(Ot=ra(-ze-Gt*v.get(te,E-1),-Te-Gt*v.get(te,E),Ie,Ne),v.set(te+1,E-1,Ot[0]),v.set(te+1,E,Ot[1]))),mn=Math.max(Math.abs(v.get(te,E-1)),Math.abs(v.get(te,E))),H*mn*mn>1)for($e=te;$e<=E;$e++)v.set($e,E-1,v.get($e,E-1)/mn),v.set($e,E,v.get($e,E)/mn)}for(te=0;te<j;te++)if(te<L||te>$)for($e=te;$e<j;$e++)m.set(te,$e,v.get(te,$e));for($e=j-1;$e>=L;$e--)for(te=L;te<=$;te++){for(Ie=0,Ze=L;Ze<=Math.min($e,$);Ze++)Ie=Ie+m.get(te,Ze)*v.get(Ze,$e);m.set(te,$e,Ie)}}}function ra(j,S,x,m){let v,E;return Math.abs(x)>Math.abs(m)?(v=m/x,E=x+v*m,[(j+v*S)/E,(S-v*j)/E]):(v=x/m,E=m+v*x,[(v*j+S)/E,(v*S-j)/E])}class ru{constructor(S){if(S=fn.checkMatrix(S),!S.isSymmetric())throw new Error("Matrix is not symmetric");let x=S,m=x.rows,v=new ce(m,m),E=!0,L,$,H;for($=0;$<m;$++){let q=0;for(H=0;H<$;H++){let pe=0;for(L=0;L<H;L++)pe+=v.get(H,L)*v.get($,L);pe=(x.get($,H)-pe)/v.get(H,H),v.set($,H,pe),q=q+pe*pe}for(q=x.get($,$)-q,E&&(E=q>0),v.set($,$,Math.sqrt(Math.max(q,0))),H=$+1;H<m;H++)v.set($,H,0)}this.L=v,this.positiveDefinite=E}isPositiveDefinite(){return this.positiveDefinite}solve(S){S=fn.checkMatrix(S);let x=this.L,m=x.rows;if(S.rows!==m)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let v=S.columns,E=S.clone(),L,$,H;for(H=0;H<m;H++)for($=0;$<v;$++){for(L=0;L<H;L++)E.set(H,$,E.get(H,$)-E.get(L,$)*x.get(H,L));E.set(H,$,E.get(H,$)/x.get(H,H))}for(H=m-1;H>=0;H--)for($=0;$<v;$++){for(L=H+1;L<m;L++)E.set(H,$,E.get(H,$)-E.get(L,$)*x.get(L,H));E.set(H,$,E.get(H,$)/x.get(H,H))}return E}get lowerTriangularMatrix(){return this.L}}class ll{constructor(S,x={}){S=fn.checkMatrix(S);let{Y:m}=x;const{scaleScores:v=!1,maxIterations:E=1e3,terminationCriteria:L=1e-10}=x;let $;if(m){if(t.isAnyArray(m)&&typeof m[0]=="number"?m=ce.columnVector(m):m=fn.checkMatrix(m),m.rows!==S.rows)throw new Error("Y should have the same number of rows as X");$=m.getColumnVector(0)}else $=S.getColumnVector(0);let H=1,q,pe,ee,Ne;for(let ze=0;ze<E&&H>L;ze++)ee=S.transpose().mmul($).div($.transpose().mmul($).get(0,0)),ee=ee.div(ee.norm()),q=S.mmul(ee).div(ee.transpose().mmul(ee).get(0,0)),ze>0&&(H=q.clone().sub(Ne).pow(2).sum()),Ne=q.clone(),m?(pe=m.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0)),pe=pe.div(pe.norm()),$=m.mmul(pe).div(pe.transpose().mmul(pe).get(0,0))):$=q;if(m){let ze=S.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0));ze=ze.div(ze.norm());let Te=S.clone().sub(q.clone().mmul(ze.transpose())),Ie=$.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0)),Xe=m.clone().sub(q.clone().mulS(Ie.get(0,0)).mmul(pe.transpose()));this.t=q,this.p=ze.transpose(),this.w=ee.transpose(),this.q=pe,this.u=$,this.s=q.transpose().mmul(q),this.xResidual=Te,this.yResidual=Xe,this.betas=Ie}else this.w=ee.transpose(),this.s=q.transpose().mmul(q).sqrt(),v?this.t=q.clone().div(this.s.get(0,0)):this.t=q,this.xResidual=S.sub(q.mmul(ee.transpose()))}}return At.AbstractMatrix=ye,At.CHO=ru,At.CholeskyDecomposition=ru,At.DistanceMatrix=Ce,At.EVD=Xr,At.EigenvalueDecomposition=Xr,At.LU=lr,At.LuDecomposition=lr,At.Matrix=ce,At.MatrixColumnSelectionView=Ke,At.MatrixColumnView=Ge,At.MatrixFlipColumnView=nt,At.MatrixFlipRowView=st,At.MatrixRowSelectionView=Xt,At.MatrixRowView=ct,At.MatrixSelectionView=In,At.MatrixSubView=ar,At.MatrixTransposeView=xn,At.NIPALS=ll,At.Nipals=ll,At.QR=Ks,At.QrDecomposition=Ks,At.SVD=Zs,At.SingularValueDecomposition=Zs,At.SymmetricMatrix=ke,At.WrapperMatrix1D=Tn,At.WrapperMatrix2D=fn,At.correlation=yr,At.covariance=ks,At.default=ce,At.determinant=Le,At.inverse=nu,At.linearDependencies=$t,At.pseudoInverse=Rr,At.solve=Me,At.wrap=xi,At}var g0=iZ();const SA=Hc(g0),oZ=g0.Matrix;SA.Matrix?SA.Matrix:g0.Matrix;const n_={function:[59,130,246],method_definition:[16,185,129],arrow_function:[245,158,11],react_component:[236,72,153],unknown:[156,163,175]};function aZ(){var d;const[t,e]=I.useState(!0),[n,r]=I.useState([]),[s,i]=I.useState({nodes:[],edges:[]}),[a,l]=I.useState(null),u=async()=>{e(!0);try{const[g,b]=await Promise.all([fetch("http://localhost:3333/api/semantic-chunks"),fetch("http://localhost:3333/api/vector-db/network")]);if(g.ok&&b.ok){const w=await g.json(),R=await b.json(),A=w.chunks.filter(C=>C.embedding);if(A.length>1){const C=new oZ(A.map(k=>k.embedding)),{V:M}=C.subRowVector(C.mean("column")).svd(),N=C.mmul(M.getColumn(0).augment(M.getColumn(1)));r(A.map((k,F)=>({...k,x:N.get(F,0),y:N.get(F,1)})))}i(R)}}catch(g){console.error("Failed to fetch semantic data:",g)}finally{e(!1)}};I.useEffect(()=>{u()},[]);const h=()=>[new p0({id:"semantic-points",data:n,getPosition:g=>[g.x*10,g.y*10],getRadius:g=>{var b;return Math.max(2,(((b=g.complexity)==null?void 0:b.score)||1)*.5)},getFillColor:g=>n_[g.semanticType]||n_.unknown,pickable:!0,onHover:g=>l(g.object?{object:g.object,x:g.x,y:g.y}:null)})];return y.jsxs("div",{className:"w-full space-y-6",children:[y.jsxs("header",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-lg font-thin tracking-tight flex items-center gap-2",children:[y.jsx(FT,{className:"w-4 h-4 text-vesper-accent"}),"Semantic Landscape"]}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Visualizing the code's conceptual clusters"})]}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs(nn,{variant:"outline",className:"border-vesper font-thin text-[10px] uppercase tracking-widest",children:[y.jsx(SR,{className:"w-3 h-3 mr-1"}),"SQLite Persistence Active"]})})]}),y.jsx(Ut,{className:"border-vesper bg-vesper-card overflow-hidden",children:y.jsxs("div",{className:"relative w-full h-[500px]",children:[y.jsx(WK,{initialViewState:{longitude:0,latitude:0,zoom:5},controller:!0,layers:h(),width:"100%",height:"100%"}),a&&y.jsxs("div",{className:"absolute z-50 bg-background/95 border border-vesper p-3 rounded shadow-xl pointer-events-none",style:{left:a.x+10,top:a.y+10},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(ER,{className:"w-3 h-3 text-vesper-accent"}),y.jsx("span",{className:"text-xs font-bold color-vesper-fg",children:a.object.name})]}),y.jsx("div",{className:"text-[10px] color-vesper-muted mono mb-2",children:a.object.filePath}),y.jsx("div",{className:"text-[11px] color-vesper-fg line-clamp-2 max-w-[250px]",children:a.object.purpose}),y.jsxs("div",{className:"mt-2 flex gap-2",children:[y.jsx(nn,{variant:"outline",className:"text-[9px] border-vesper",children:a.object.semanticType}),y.jsxs(nn,{variant:"outline",className:"text-[9px] border-vesper",children:["Complexity: ",(d=a.object.complexity)==null?void 0:d.score]})]})]}),t&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 backdrop-blur-sm",children:y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(FT,{className:"w-8 h-8 animate-pulse text-vesper-accent"}),y.jsx("span",{className:"text-xs font-thin tracking-widest uppercase",children:"Projecting Intelligence..."})]})})]})}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(n_).map(([g,b])=>y.jsxs("div",{className:"flex items-center gap-2 p-2 border border-vesper rounded bg-vesper-card/50",children:[y.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:`rgb(${b.join(",")})`}}),y.jsx("span",{className:"text-[10px] uppercase tracking-widest font-thin",children:g.replace("_"," ")})]},g))})]})}var m0="Progress",y0=100,[lZ,yre]=tl(m0),[cZ,uZ]=lZ(m0),GM=I.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=fZ,...a}=t;(s||s===0)&&!TA(s)&&console.error(hZ(`${s}`,"Progress"));const l=TA(s)?s:y0;r!==null&&!EA(r,l)&&console.error(dZ(`${r}`,"Progress"));const u=EA(r,l)?r:null,h=ng(u)?i(u,l):void 0;return y.jsx(cZ,{scope:n,value:u,max:l,children:y.jsx(Pt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ng(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":tI(u,l),"data-value":u??void 0,"data-max":l,...a,ref:e})})});GM.displayName=m0;var JM="ProgressIndicator",eI=I.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=uZ(JM,n);return y.jsx(Pt.div,{"data-state":tI(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});eI.displayName=JM;function fZ(t,e){return`${Math.round(t/e*100)}%`}function tI(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function ng(t){return typeof t=="number"}function TA(t){return ng(t)&&!isNaN(t)&&t>0}function EA(t,e){return ng(t)&&!isNaN(t)&&t<=e&&t>=0}function hZ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${y0}\`.`}function dZ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${y0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nI=GM,pZ=eI;const qx=I.forwardRef(({className:t,value:e,...n},r)=>y.jsx(nI,{ref:r,className:Qt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:y.jsx(pZ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));qx.displayName=nI.displayName;function gZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const mZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bZ={};function AA(t,e){return(bZ.jsx?yZ:mZ).test(t)}const _Z=/[ \t\n\f\r]/g;function xZ(t){return typeof t=="object"?t.type==="text"?RA(t.value):!1:RA(t)}function RA(t){return t.replace(_Z,"")===""}class uh{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}uh.prototype.normal={};uh.prototype.property={};uh.prototype.space=void 0;function rI(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new uh(n,r,e)}function Xx(t){return t.toLowerCase()}class qr{constructor(e,n){this.attribute=n,this.property=e}}qr.prototype.attribute="";qr.prototype.booleanish=!1;qr.prototype.boolean=!1;qr.prototype.commaOrSpaceSeparated=!1;qr.prototype.commaSeparated=!1;qr.prototype.defined=!1;qr.prototype.mustUseProperty=!1;qr.prototype.number=!1;qr.prototype.overloadedBoolean=!1;qr.prototype.property="";qr.prototype.spaceSeparated=!1;qr.prototype.space=void 0;let vZ=0;const St=al(),$n=al(),Yx=al(),We=al(),bn=al(),yc=al(),ss=al();function al(){return 2**++vZ}const Kx=Object.freeze(Object.defineProperty({__proto__:null,boolean:St,booleanish:$n,commaOrSpaceSeparated:ss,commaSeparated:yc,number:We,overloadedBoolean:Yx,spaceSeparated:bn},Symbol.toStringTag,{value:"Module"})),r_=Object.keys(Kx);class b0 extends qr{constructor(e,n,r,s){let i=-1;if(super(e,n),CA(this,"space",s),typeof r=="number")for(;++i<r_.length;){const a=r_[i];CA(this,r_[i],(r&Kx[a])===Kx[a])}}}b0.prototype.defined=!0;function CA(t,e,n){n&&(t[e]=n)}function eu(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new b0(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[Xx(r)]=r,n[Xx(i.attribute)]=r}return new uh(e,n,t.space)}const sI=eu({properties:{ariaActiveDescendant:null,ariaAtomic:$n,ariaAutoComplete:null,ariaBusy:$n,ariaChecked:$n,ariaColCount:We,ariaColIndex:We,ariaColSpan:We,ariaControls:bn,ariaCurrent:null,ariaDescribedBy:bn,ariaDetails:null,ariaDisabled:$n,ariaDropEffect:bn,ariaErrorMessage:null,ariaExpanded:$n,ariaFlowTo:bn,ariaGrabbed:$n,ariaHasPopup:null,ariaHidden:$n,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bn,ariaLevel:We,ariaLive:null,ariaModal:$n,ariaMultiLine:$n,ariaMultiSelectable:$n,ariaOrientation:null,ariaOwns:bn,ariaPlaceholder:null,ariaPosInSet:We,ariaPressed:$n,ariaReadOnly:$n,ariaRelevant:null,ariaRequired:$n,ariaRoleDescription:bn,ariaRowCount:We,ariaRowIndex:We,ariaRowSpan:We,ariaSelected:$n,ariaSetSize:We,ariaSort:null,ariaValueMax:We,ariaValueMin:We,ariaValueNow:We,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function iI(t,e){return e in t?t[e]:e}function oI(t,e){return iI(t,e.toLowerCase())}const wZ=eu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yc,acceptCharset:bn,accessKey:bn,action:null,allow:null,allowFullScreen:St,allowPaymentRequest:St,allowUserMedia:St,alt:null,as:null,async:St,autoCapitalize:null,autoComplete:bn,autoFocus:St,autoPlay:St,blocking:bn,capture:null,charSet:null,checked:St,cite:null,className:bn,cols:We,colSpan:null,content:null,contentEditable:$n,controls:St,controlsList:bn,coords:We|yc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:St,defer:St,dir:null,dirName:null,disabled:St,download:Yx,draggable:$n,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:St,formTarget:null,headers:bn,height:We,hidden:Yx,high:We,href:null,hrefLang:null,htmlFor:bn,httpEquiv:bn,id:null,imageSizes:null,imageSrcSet:null,inert:St,inputMode:null,integrity:null,is:null,isMap:St,itemId:null,itemProp:bn,itemRef:bn,itemScope:St,itemType:bn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:St,low:We,manifest:null,max:null,maxLength:We,media:null,method:null,min:null,minLength:We,multiple:St,muted:St,name:null,nonce:null,noModule:St,noValidate:St,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:St,optimum:We,pattern:null,ping:bn,placeholder:null,playsInline:St,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:St,referrerPolicy:null,rel:bn,required:St,reversed:St,rows:We,rowSpan:We,sandbox:bn,scope:null,scoped:St,seamless:St,selected:St,shadowRootClonable:St,shadowRootDelegatesFocus:St,shadowRootMode:null,shape:null,size:We,sizes:null,slot:null,span:We,spellCheck:$n,src:null,srcDoc:null,srcLang:null,srcSet:null,start:We,step:null,style:null,tabIndex:We,target:null,title:null,translate:null,type:null,typeMustMatch:St,useMap:null,value:$n,width:We,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bn,axis:null,background:null,bgColor:null,border:We,borderColor:null,bottomMargin:We,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:St,declare:St,event:null,face:null,frame:null,frameBorder:null,hSpace:We,leftMargin:We,link:null,longDesc:null,lowSrc:null,marginHeight:We,marginWidth:We,noResize:St,noHref:St,noShade:St,noWrap:St,object:null,profile:null,prompt:null,rev:null,rightMargin:We,rules:null,scheme:null,scrolling:$n,standby:null,summary:null,text:null,topMargin:We,valueType:null,version:null,vAlign:null,vLink:null,vSpace:We,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:St,disableRemotePlayback:St,prefix:null,property:null,results:We,security:null,unselectable:null},space:"html",transform:oI}),SZ=eu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ss,accentHeight:We,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:We,amplitude:We,arabicForm:null,ascent:We,attributeName:null,attributeType:null,azimuth:We,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:We,by:null,calcMode:null,capHeight:We,className:bn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:We,diffuseConstant:We,direction:null,display:null,dur:null,divisor:We,dominantBaseline:null,download:St,dx:null,dy:null,edgeMode:null,editable:null,elevation:We,enableBackground:null,end:null,event:null,exponent:We,externalResourcesRequired:null,fill:null,fillOpacity:We,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yc,g2:yc,glyphName:yc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:We,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:We,horizOriginX:We,horizOriginY:We,id:null,ideographic:We,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:We,k:We,k1:We,k2:We,k3:We,k4:We,kernelMatrix:ss,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:We,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:We,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:We,overlineThickness:We,paintOrder:null,panose1:null,path:null,pathLength:We,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:We,pointsAtY:We,pointsAtZ:We,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ss,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ss,rev:ss,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ss,requiredFeatures:ss,requiredFonts:ss,requiredFormats:ss,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:We,specularExponent:We,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:We,strikethroughThickness:We,string:null,stroke:null,strokeDashArray:ss,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:We,strokeOpacity:We,strokeWidth:null,style:null,surfaceScale:We,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ss,tabIndex:We,tableValues:null,target:null,targetX:We,targetY:We,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ss,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:We,underlineThickness:We,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:We,values:null,vAlphabetic:We,vMathematical:We,vectorEffect:null,vHanging:We,vIdeographic:We,version:null,vertAdvY:We,vertOriginX:We,vertOriginY:We,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:We,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:iI}),aI=eu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),lI=eu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:oI}),cI=eu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),TZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EZ=/[A-Z]/g,kA=/-[a-z]/g,AZ=/^data[-\w.:]+$/i;function RZ(t,e){const n=Xx(e);let r=e,s=qr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&AZ.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(kA,kZ);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!kA.test(i)){let a=i.replace(EZ,CZ);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=b0}return new s(r,e)}function CZ(t){return"-"+t.toLowerCase()}function kZ(t){return t.charAt(1).toUpperCase()}const NZ=rI([sI,wZ,aI,lI,cI],"html"),_0=rI([sI,SZ,aI,lI,cI],"svg");function MZ(t){return t.join(" ").trim()}var ec={},s_,NA;function IZ(){if(NA)return s_;NA=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,h="/",d="*",g="",b="comment",w="declaration";s_=function(A,C){if(typeof A!="string")throw new TypeError("First argument must be a string");if(!A)return[];C=C||{};var M=1,N=1;function k(xe){var oe=xe.match(e);oe&&(M+=oe.length);var Re=xe.lastIndexOf(u);N=~Re?xe.length-Re:N+xe.length}function F(){var xe={line:M,column:N};return function(oe){return oe.position=new B(xe),Y(),oe}}function B(xe){this.start=xe,this.end={line:M,column:N},this.source=C.source}B.prototype.content=A;function P(xe){var oe=new Error(C.source+":"+M+":"+N+": "+xe);if(oe.reason=xe,oe.filename=C.source,oe.line=M,oe.column=N,oe.source=A,!C.silent)throw oe}function X(xe){var oe=xe.exec(A);if(oe){var Re=oe[0];return k(Re),A=A.slice(Re.length),oe}}function Y(){X(n)}function G(xe){var oe;for(xe=xe||[];oe=K();)oe!==!1&&xe.push(oe);return xe}function K(){var xe=F();if(!(h!=A.charAt(0)||d!=A.charAt(1))){for(var oe=2;g!=A.charAt(oe)&&(d!=A.charAt(oe)||h!=A.charAt(oe+1));)++oe;if(oe+=2,g===A.charAt(oe-1))return P("End of comment missing");var Re=A.slice(2,oe-2);return N+=2,k(Re),A=A.slice(oe),N+=2,xe({type:b,comment:Re})}}function Q(){var xe=F(),oe=X(r);if(oe){if(K(),!X(s))return P("property missing ':'");var Re=X(i),re=xe({type:w,property:R(oe[0].replace(t,g)),value:Re?R(Re[0].replace(t,g)):g});return X(a),re}}function ie(){var xe=[];G(xe);for(var oe;oe=Q();)oe!==!1&&(xe.push(oe),G(xe));return xe}return Y(),ie()};function R(A){return A?A.replace(l,g):g}return s_}var MA;function OZ(){if(MA)return ec;MA=1;var t=ec&&ec.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ec,"__esModule",{value:!0}),ec.default=n;var e=t(IZ());function n(r,s){var i=null;if(!r||typeof r!="string")return i;var a=(0,e.default)(r),l=typeof s=="function";return a.forEach(function(u){if(u.type==="declaration"){var h=u.property,d=u.value;l?s(h,d,u):d&&(i=i||{},i[h]=d)}}),i}return ec}var of={},IA;function PZ(){if(IA)return of;IA=1,Object.defineProperty(of,"__esModule",{value:!0}),of.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,i=function(h){return!h||n.test(h)||t.test(h)},a=function(h,d){return d.toUpperCase()},l=function(h,d){return"".concat(d,"-")},u=function(h,d){return d===void 0&&(d={}),i(h)?h:(h=h.toLowerCase(),d.reactCompat?h=h.replace(s,l):h=h.replace(r,l),h.replace(e,a))};return of.camelCase=u,of}var af,OA;function DZ(){if(OA)return af;OA=1;var t=af&&af.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(OZ()),n=PZ();function r(s,i){var a={};return!s||typeof s!="string"||(0,e.default)(s,function(l,u){l&&u&&(a[(0,n.camelCase)(l,i)]=u)}),a}return r.default=r,af=r,af}var FZ=DZ();const jZ=Hc(FZ),uI=fI("end"),x0=fI("start");function fI(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function BZ(t){const e=x0(t),n=uI(t);if(e&&n)return{start:e,end:n}}function Cf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?PA(t.position):"start"in t||"end"in t?PA(t):"line"in t||"column"in t?Zx(t):""}function Zx(t){return DA(t&&t.line)+":"+DA(t&&t.column)}function PA(t){return Zx(t&&t.start)+"-"+Zx(t&&t.end)}function DA(t){return t&&typeof t=="number"?t:1}class Ar extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(a=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?i.ruleId=r:(i.source=r.slice(0,u),i.ruleId=r.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=Cf(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ar.prototype.file="";Ar.prototype.name="";Ar.prototype.reason="";Ar.prototype.message="";Ar.prototype.stack="";Ar.prototype.column=void 0;Ar.prototype.line=void 0;Ar.prototype.ancestors=void 0;Ar.prototype.cause=void 0;Ar.prototype.fatal=void 0;Ar.prototype.place=void 0;Ar.prototype.ruleId=void 0;Ar.prototype.source=void 0;const v0={}.hasOwnProperty,UZ=new Map,LZ=/[A-Z]/g,zZ=new Set(["table","tbody","thead","tfoot","tr"]),VZ=new Set(["td","th"]),hI="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function $Z(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=QZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ZZ(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?_0:NZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=dI(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function dI(t,e,n){if(e.type==="element")return HZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return WZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return XZ(t,e,n);if(e.type==="mdxjsEsm")return qZ(t,e);if(e.type==="root")return YZ(t,e,n);if(e.type==="text")return KZ(t,e)}function HZ(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=_0,t.schema=s),t.ancestors.push(e);const i=gI(t,e.tagName,!1),a=GZ(t,e);let l=S0(t,e);return zZ.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!xZ(u):!0})),pI(t,a,i,e),w0(a,l),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function WZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Yf(t,e.position)}function qZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Yf(t,e.position)}function XZ(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=_0,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:gI(t,e.name,!0),a=JZ(t,e),l=S0(t,e);return pI(t,a,i,e),w0(a,l),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function YZ(t,e,n){const r={};return w0(r,S0(t,e)),t.create(e,t.Fragment,r,n)}function KZ(t,e){return e.value}function pI(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function w0(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function ZZ(t,e,n){return r;function r(s,i,a,l){const h=Array.isArray(a.children)?n:e;return l?h(i,a,l):h(i,a)}}function QZ(t,e){return n;function n(r,s,i,a){const l=Array.isArray(i.children),u=x0(r);return e(s,i,a,l,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function GZ(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&v0.call(e.properties,s)){const i=eQ(t,s,e.properties[s]);if(i){const[a,l]=i;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&VZ.has(e.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JZ(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Yf(t,e.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,i=t.evaluater.evaluateExpression(l.expression)}else Yf(t,e.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function S0(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:UZ;for(;++r<e.children.length;){const i=e.children[r];let a;if(t.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=s.get(u)||0;a=u+"-"+h,s.set(u,h+1)}}const l=dI(t,i,a);l!==void 0&&n.push(l)}return n}function eQ(t,e,n){const r=RZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?gZ(n):MZ(n)),r.property==="style"){let s=typeof n=="object"?n:tQ(t,String(n));return t.stylePropertyNameCase==="css"&&(s=nQ(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?TZ[r.property]||r.property:r.attribute,n]}}function tQ(t,e){try{return jZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Ar("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=hI+"#cannot-parse-style-attribute",s}}function gI(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,a;for(;++i<s.length;){const l=AA(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=AA(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return v0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Yf(t)}function Yf(t,e){const n=new Ar("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=hI+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nQ(t){const e={};let n;for(n in t)v0.call(t,n)&&(e[rQ(n)]=t[n]);return e}function rQ(t){let e=t.replace(LZ,sQ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function sQ(t){return"-"+t.toLowerCase()}const i_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iQ={};function T0(t,e){const n=iQ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return mI(t,r,s)}function mI(t,e,n){if(oQ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return FA(t.children,e,n)}return Array.isArray(t)?FA(t,e,n):""}function FA(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=mI(t[s],e,n);return r.join("")}function oQ(t){return!!(t&&typeof t=="object")}const jA=document.createElement("i");function E0(t){const e="&"+t+";";jA.innerHTML=e;const n=jA.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function fs(t,e,n,r){const s=t.length;let i=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(e,0),t.splice(...a),i+=1e4,e+=1e4}function xs(t,e){return t.length>0?(fs(t,t.length,0,e),t):e}const BA={}.hasOwnProperty;function yI(t){const e={};let n=-1;for(;++n<t.length;)aQ(e,t[n]);return e}function aQ(t,e){let n;for(n in e){const s=(BA.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let a;if(i)for(a in i){BA.call(s,a)||(s[a]=[]);const l=i[a];lQ(s[a],Array.isArray(l)?l:l?[l]:[])}}}function lQ(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);fs(t,0,0,r)}function bI(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ws(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fr=na(/[A-Za-z]/),Er=na(/[\dA-Za-z]/),cQ=na(/[#-'*+\--9=?A-Z^-~]/);function rg(t){return t!==null&&(t<32||t===127)}const Qx=na(/\d/),uQ=na(/[\dA-Fa-f]/),fQ=na(/[!-/:-@[-`{-~]/);function ht(t){return t!==null&&t<-2}function gn(t){return t!==null&&(t<0||t===32)}function It(t){return t===-2||t===-1||t===32}const Hg=na(new RegExp("\\p{P}|\\p{S}","u")),el=na(/\s/);function na(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function tu(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let a="";if(i===37&&Er(t.charCodeAt(n+1))&&Er(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=t.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function jt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(u){return It(u)?(t.enter(n),l(u)):e(u)}function l(u){return It(u)&&i++<s?(t.consume(u),l):(t.exit(n),e(u))}}const hQ={tokenize:dQ};function dQ(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),jt(t,e,"linePrefix")}function s(l){return t.enter("paragraph"),i(l)}function i(l){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return ht(l)?(t.consume(l),t.exit("chunkText"),i):(t.consume(l),a)}}const pQ={tokenize:gQ},UA={tokenize:mQ};function gQ(t){const e=this,n=[];let r=0,s,i,a;return l;function l(k){if(r<n.length){const F=n[r];return e.containerState=F[1],t.attempt(F[0].continuation,u,h)(k)}return h(k)}function u(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&N();const F=e.events.length;let B=F,P;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){P=e.events[B][1].end;break}M(r);let X=F;for(;X<e.events.length;)e.events[X][1].end={...P},X++;return fs(e.events,B+1,0,e.events.slice(F)),e.events.length=X,h(k)}return l(k)}function h(k){if(r===n.length){if(!s)return b(k);if(s.currentConstruct&&s.currentConstruct.concrete)return R(k);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(UA,d,g)(k)}function d(k){return s&&N(),M(r),b(k)}function g(k){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,R(k)}function b(k){return e.containerState={},t.attempt(UA,w,R)(k)}function w(k){return r++,n.push([e.currentConstruct,e.containerState]),b(k)}function R(k){if(k===null){s&&N(),M(0),t.consume(k);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),A(k)}function A(k){if(k===null){C(t.exit("chunkFlow"),!0),M(0),t.consume(k);return}return ht(k)?(t.consume(k),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(k),A)}function C(k,F){const B=e.sliceStream(k);if(F&&B.push(null),k.previous=i,i&&(i.next=k),i=k,s.defineSkip(k.start),s.write(B),e.parser.lazy[k.start.line]){let P=s.events.length;for(;P--;)if(s.events[P][1].start.offset<a&&(!s.events[P][1].end||s.events[P][1].end.offset>a))return;const X=e.events.length;let Y=X,G,K;for(;Y--;)if(e.events[Y][0]==="exit"&&e.events[Y][1].type==="chunkFlow"){if(G){K=e.events[Y][1].end;break}G=!0}for(M(r),P=X;P<e.events.length;)e.events[P][1].end={...K},P++;fs(e.events,Y+1,0,e.events.slice(X)),e.events.length=P}}function M(k){let F=n.length;for(;F-- >k;){const B=n[F];e.containerState=B[1],B[0].exit.call(e,t)}n.length=k}function N(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function mQ(t,e,n){return jt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $c(t){if(t===null||gn(t)||el(t))return 1;if(Hg(t))return 2}function Wg(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const Gx={name:"attention",resolveAll:yQ,tokenize:bQ};function yQ(t,e){let n=-1,r,s,i,a,l,u,h,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[r][1].end},b={...t[n][1].start};LA(g,-u),LA(b,u),a={type:u>1?"strongSequence":"emphasisSequence",start:g,end:{...t[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},i={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:u>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=xs(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=xs(h,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",i,e]]),h=xs(h,Wg(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=xs(h,[["exit",i,e],["enter",l,e],["exit",l,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,h=xs(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,fs(t,r-1,n-r+3,h),n=r+h.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function bQ(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=$c(r);let i;return a;function a(u){return i=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===i)return t.consume(u),l;const h=t.exit("attentionSequence"),d=$c(u),g=!d||d===2&&s||n.includes(u),b=!s||s===2&&d||n.includes(r);return h._open=!!(i===42?g:g&&(s||!b)),h._close=!!(i===42?b:b&&(d||!g)),e(u)}}function LA(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const _Q={name:"autolink",tokenize:xQ};function xQ(t,e,n){let r=0;return s;function s(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(w){return Fr(w)?(t.consume(w),a):w===64?n(w):h(w)}function a(w){return w===43||w===45||w===46||Er(w)?(r=1,l(w)):h(w)}function l(w){return w===58?(t.consume(w),r=0,u):(w===43||w===45||w===46||Er(w))&&r++<32?(t.consume(w),l):(r=0,h(w))}function u(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):w===null||w===32||w===60||rg(w)?n(w):(t.consume(w),u)}function h(w){return w===64?(t.consume(w),d):cQ(w)?(t.consume(w),h):n(w)}function d(w){return Er(w)?g(w):n(w)}function g(w){return w===46?(t.consume(w),r=0,d):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):b(w)}function b(w){if((w===45||Er(w))&&r++<63){const R=w===45?b:g;return t.consume(w),R}return n(w)}}const fh={partial:!0,tokenize:vQ};function vQ(t,e,n){return r;function r(i){return It(i)?jt(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||ht(i)?e(i):n(i)}}const _I={continuation:{tokenize:SQ},exit:TQ,name:"blockQuote",tokenize:wQ};function wQ(t,e,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),i}return n(a)}function i(a){return It(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function SQ(t,e,n){const r=this;return s;function s(a){return It(a)?jt(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return t.attempt(_I,e,n)(a)}}function TQ(t){t.exit("blockQuote")}const xI={name:"characterEscape",tokenize:EQ};function EQ(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return fQ(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const vI={name:"characterReference",tokenize:AQ};function AQ(t,e,n){const r=this;let s=0,i,a;return l;function l(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),u}function u(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,a=Er,d(g))}function h(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,a=uQ,d):(t.enter("characterReferenceValue"),i=7,a=Qx,d(g))}function d(g){if(g===59&&s){const b=t.exit("characterReferenceValue");return a===Er&&!E0(r.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(g)&&s++<i?(t.consume(g),d):n(g)}}const zA={partial:!0,tokenize:CQ},VA={concrete:!0,name:"codeFenced",tokenize:RQ};function RQ(t,e,n){const r=this,s={partial:!0,tokenize:B};let i=0,a=0,l;return u;function u(P){return h(P)}function h(P){const X=r.events[r.events.length-1];return i=X&&X[1].type==="linePrefix"?X[2].sliceSerialize(X[1],!0).length:0,l=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(P)}function d(P){return P===l?(a++,t.consume(P),d):a<3?n(P):(t.exit("codeFencedFenceSequence"),It(P)?jt(t,g,"whitespace")(P):g(P))}function g(P){return P===null||ht(P)?(t.exit("codeFencedFence"),r.interrupt?e(P):t.check(zA,A,F)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===null||ht(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(P)):It(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),jt(t,w,"whitespace")(P)):P===96&&P===l?n(P):(t.consume(P),b)}function w(P){return P===null||ht(P)?g(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),R(P))}function R(P){return P===null||ht(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(P)):P===96&&P===l?n(P):(t.consume(P),R)}function A(P){return t.attempt(s,F,C)(P)}function C(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),M}function M(P){return i>0&&It(P)?jt(t,N,"linePrefix",i+1)(P):N(P)}function N(P){return P===null||ht(P)?t.check(zA,A,F)(P):(t.enter("codeFlowValue"),k(P))}function k(P){return P===null||ht(P)?(t.exit("codeFlowValue"),N(P)):(t.consume(P),k)}function F(P){return t.exit("codeFenced"),e(P)}function B(P,X,Y){let G=0;return K;function K(Re){return P.enter("lineEnding"),P.consume(Re),P.exit("lineEnding"),Q}function Q(Re){return P.enter("codeFencedFence"),It(Re)?jt(P,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Re):ie(Re)}function ie(Re){return Re===l?(P.enter("codeFencedFenceSequence"),xe(Re)):Y(Re)}function xe(Re){return Re===l?(G++,P.consume(Re),xe):G>=a?(P.exit("codeFencedFenceSequence"),It(Re)?jt(P,oe,"whitespace")(Re):oe(Re)):Y(Re)}function oe(Re){return Re===null||ht(Re)?(P.exit("codeFencedFence"),X(Re)):Y(Re)}}}function CQ(t,e,n){const r=this;return s;function s(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const o_={name:"codeIndented",tokenize:NQ},kQ={partial:!0,tokenize:MQ};function NQ(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),jt(t,i,"linePrefix",5)(h)}function i(h){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(h):n(h)}function a(h){return h===null?u(h):ht(h)?t.attempt(kQ,a,u)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||ht(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),l)}function u(h){return t.exit("codeIndented"),e(h)}}function MQ(t,e,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):ht(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):jt(t,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):ht(a)?s(a):n(a)}}const IQ={name:"codeText",previous:PQ,resolve:OQ,tokenize:DQ};function OQ(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function PQ(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function DQ(t,e,n){let r=0,s,i;return a;function a(g){return t.enter("codeText"),t.enter("codeTextSequence"),l(g)}function l(g){return g===96?(t.consume(g),r++,l):(t.exit("codeTextSequence"),u(g))}function u(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),u):g===96?(i=t.enter("codeTextSequence"),s=0,d(g)):ht(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||ht(g)?(t.exit("codeTextData"),u(g)):(t.consume(g),h)}function d(g){return g===96?(t.consume(g),s++,d):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(g)):(i.type="codeTextData",h(g))}}class FQ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&lf(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),lf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),lf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);lf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);lf(this.left,n.reverse())}}}function lf(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function wI(t){const e={};let n=-1,r,s,i,a,l,u,h;const d=new FQ(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,jQ(d,n)),n=e[n],h=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return fs(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function jQ(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,u=[],h={};let d,g,b=-1,w=n,R=0,A=0;const C=[A];for(;w;){for(;t.get(++s)[1]!==w;);i.push(s),w._tokenizer||(d=r.sliceStream(w),w.next||d.push(null),g&&a.defineSkip(w.start),w._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),w._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),g=w,w=w.next}for(w=n;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(A=b+1,C.push(A),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(a.events=[],w?(w._tokenizer=void 0,w.previous=void 0):C.pop(),b=C.length;b--;){const M=l.slice(C[b],C[b+1]),N=i.pop();u.push([N,N+M.length-1]),t.splice(N,2,M)}for(u.reverse(),b=-1;++b<u.length;)h[R+u[b][0]]=R+u[b][1],R+=u[b][1]-u[b][0]-1;return h}const BQ={resolve:LQ,tokenize:zQ},UQ={partial:!0,tokenize:VQ};function LQ(t){return wI(t),t}function zQ(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):ht(l)?t.check(UQ,a,i)(l):(t.consume(l),s)}function i(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function VQ(t,e,n){const r=this;return s;function s(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),jt(t,i,"linePrefix")}function i(a){if(a===null||ht(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function SI(t,e,n,r,s,i,a,l,u){const h=u||Number.POSITIVE_INFINITY;let d=0;return g;function g(M){return M===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(M),t.exit(i),b):M===null||M===32||M===41||rg(M)?n(M):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),A(M))}function b(M){return M===62?(t.enter(i),t.consume(M),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),w(M))}function w(M){return M===62?(t.exit("chunkString"),t.exit(l),b(M)):M===null||M===60||ht(M)?n(M):(t.consume(M),M===92?R:w)}function R(M){return M===60||M===62||M===92?(t.consume(M),w):w(M)}function A(M){return!d&&(M===null||M===41||gn(M))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(M)):d<h&&M===40?(t.consume(M),d++,A):M===41?(t.consume(M),d--,A):M===null||M===32||M===40||rg(M)?n(M):(t.consume(M),M===92?C:A)}function C(M){return M===40||M===41||M===92?(t.consume(M),A):A(M)}}function TI(t,e,n,r,s,i){const a=this;let l=0,u;return h;function h(w){return t.enter(r),t.enter(s),t.consume(w),t.exit(s),t.enter(i),d}function d(w){return l>999||w===null||w===91||w===93&&!u||w===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(w):w===93?(t.exit(i),t.enter(s),t.consume(w),t.exit(s),t.exit(r),e):ht(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===null||w===91||w===93||ht(w)||l++>999?(t.exit("chunkString"),d(w)):(t.consume(w),u||(u=!It(w)),w===92?b:g)}function b(w){return w===91||w===92||w===93?(t.consume(w),l++,g):g(w)}}function EI(t,e,n,r,s,i){let a;return l;function l(b){return b===34||b===39||b===40?(t.enter(r),t.enter(s),t.consume(b),t.exit(s),a=b===40?41:b,u):n(b)}function u(b){return b===a?(t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):(t.enter(i),h(b))}function h(b){return b===a?(t.exit(i),u(a)):b===null?n(b):ht(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),jt(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(b))}function d(b){return b===a||b===null||ht(b)?(t.exit("chunkString"),h(b)):(t.consume(b),b===92?g:d)}function g(b){return b===a||b===92?(t.consume(b),d):d(b)}}function kf(t,e){let n;return r;function r(s){return ht(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):It(s)?jt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const $Q={name:"definition",tokenize:WQ},HQ={partial:!0,tokenize:qQ};function WQ(t,e,n){const r=this;let s;return i;function i(w){return t.enter("definition"),a(w)}function a(w){return TI.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function l(w){return s=Ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),u):n(w)}function u(w){return gn(w)?kf(t,h)(w):h(w)}function h(w){return SI(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function d(w){return t.attempt(HQ,g,g)(w)}function g(w){return It(w)?jt(t,b,"whitespace")(w):b(w)}function b(w){return w===null||ht(w)?(t.exit("definition"),r.parser.defined.push(s),e(w)):n(w)}}function qQ(t,e,n){return r;function r(l){return gn(l)?kf(t,s)(l):n(l)}function s(l){return EI(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return It(l)?jt(t,a,"whitespace")(l):a(l)}function a(l){return l===null||ht(l)?e(l):n(l)}}const XQ={name:"hardBreakEscape",tokenize:YQ};function YQ(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return ht(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const KQ={name:"headingAtx",resolve:ZQ,tokenize:QQ};function ZQ(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},fs(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function QQ(t,e,n){let r=0;return s;function s(d){return t.enter("atxHeading"),i(d)}function i(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(t.consume(d),a):d===null||gn(d)?(t.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(t.enter("atxHeadingSequence"),u(d)):d===null||ht(d)?(t.exit("atxHeading"),e(d)):It(d)?jt(t,l,"whitespace")(d):(t.enter("atxHeadingText"),h(d))}function u(d){return d===35?(t.consume(d),u):(t.exit("atxHeadingSequence"),l(d))}function h(d){return d===null||d===35||gn(d)?(t.exit("atxHeadingText"),l(d)):(t.consume(d),h)}}const GQ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$A=["pre","script","style","textarea"],JQ={concrete:!0,name:"htmlFlow",resolveTo:nG,tokenize:rG},eG={partial:!0,tokenize:iG},tG={partial:!0,tokenize:sG};function nG(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function rG(t,e,n){const r=this;let s,i,a,l,u;return h;function h(U){return d(U)}function d(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),g}function g(U){return U===33?(t.consume(U),b):U===47?(t.consume(U),i=!0,A):U===63?(t.consume(U),s=3,r.interrupt?e:D):Fr(U)?(t.consume(U),a=String.fromCharCode(U),C):n(U)}function b(U){return U===45?(t.consume(U),s=2,w):U===91?(t.consume(U),s=5,l=0,R):Fr(U)?(t.consume(U),s=4,r.interrupt?e:D):n(U)}function w(U){return U===45?(t.consume(U),r.interrupt?e:D):n(U)}function R(U){const we="CDATA[";return U===we.charCodeAt(l++)?(t.consume(U),l===we.length?r.interrupt?e:ie:R):n(U)}function A(U){return Fr(U)?(t.consume(U),a=String.fromCharCode(U),C):n(U)}function C(U){if(U===null||U===47||U===62||gn(U)){const we=U===47,ce=a.toLowerCase();return!we&&!i&&$A.includes(ce)?(s=1,r.interrupt?e(U):ie(U)):GQ.includes(a.toLowerCase())?(s=6,we?(t.consume(U),M):r.interrupt?e(U):ie(U)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(U):i?N(U):k(U))}return U===45||Er(U)?(t.consume(U),a+=String.fromCharCode(U),C):n(U)}function M(U){return U===62?(t.consume(U),r.interrupt?e:ie):n(U)}function N(U){return It(U)?(t.consume(U),N):K(U)}function k(U){return U===47?(t.consume(U),K):U===58||U===95||Fr(U)?(t.consume(U),F):It(U)?(t.consume(U),k):K(U)}function F(U){return U===45||U===46||U===58||U===95||Er(U)?(t.consume(U),F):B(U)}function B(U){return U===61?(t.consume(U),P):It(U)?(t.consume(U),B):k(U)}function P(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),u=U,X):It(U)?(t.consume(U),P):Y(U)}function X(U){return U===u?(t.consume(U),u=null,G):U===null||ht(U)?n(U):(t.consume(U),X)}function Y(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||gn(U)?B(U):(t.consume(U),Y)}function G(U){return U===47||U===62||It(U)?k(U):n(U)}function K(U){return U===62?(t.consume(U),Q):n(U)}function Q(U){return U===null||ht(U)?ie(U):It(U)?(t.consume(U),Q):n(U)}function ie(U){return U===45&&s===2?(t.consume(U),re):U===60&&s===1?(t.consume(U),Ee):U===62&&s===4?(t.consume(U),ne):U===63&&s===3?(t.consume(U),D):U===93&&s===5?(t.consume(U),Ve):ht(U)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(eG,ye,xe)(U)):U===null||ht(U)?(t.exit("htmlFlowData"),xe(U)):(t.consume(U),ie)}function xe(U){return t.check(tG,oe,ye)(U)}function oe(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),Re}function Re(U){return U===null||ht(U)?xe(U):(t.enter("htmlFlowData"),ie(U))}function re(U){return U===45?(t.consume(U),D):ie(U)}function Ee(U){return U===47?(t.consume(U),a="",ue):ie(U)}function ue(U){if(U===62){const we=a.toLowerCase();return $A.includes(we)?(t.consume(U),ne):ie(U)}return Fr(U)&&a.length<8?(t.consume(U),a+=String.fromCharCode(U),ue):ie(U)}function Ve(U){return U===93?(t.consume(U),D):ie(U)}function D(U){return U===62?(t.consume(U),ne):U===45&&s===2?(t.consume(U),D):ie(U)}function ne(U){return U===null||ht(U)?(t.exit("htmlFlowData"),ye(U)):(t.consume(U),ne)}function ye(U){return t.exit("htmlFlow"),e(U)}}function sG(t,e,n){const r=this;return s;function s(a){return ht(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function iG(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(fh,e,n)}}const oG={name:"htmlText",tokenize:aG};function aG(t,e,n){const r=this;let s,i,a;return l;function l(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),u}function u(D){return D===33?(t.consume(D),h):D===47?(t.consume(D),B):D===63?(t.consume(D),k):Fr(D)?(t.consume(D),Y):n(D)}function h(D){return D===45?(t.consume(D),d):D===91?(t.consume(D),i=0,R):Fr(D)?(t.consume(D),N):n(D)}function d(D){return D===45?(t.consume(D),w):n(D)}function g(D){return D===null?n(D):D===45?(t.consume(D),b):ht(D)?(a=g,Ee(D)):(t.consume(D),g)}function b(D){return D===45?(t.consume(D),w):g(D)}function w(D){return D===62?re(D):D===45?b(D):g(D)}function R(D){const ne="CDATA[";return D===ne.charCodeAt(i++)?(t.consume(D),i===ne.length?A:R):n(D)}function A(D){return D===null?n(D):D===93?(t.consume(D),C):ht(D)?(a=A,Ee(D)):(t.consume(D),A)}function C(D){return D===93?(t.consume(D),M):A(D)}function M(D){return D===62?re(D):D===93?(t.consume(D),M):A(D)}function N(D){return D===null||D===62?re(D):ht(D)?(a=N,Ee(D)):(t.consume(D),N)}function k(D){return D===null?n(D):D===63?(t.consume(D),F):ht(D)?(a=k,Ee(D)):(t.consume(D),k)}function F(D){return D===62?re(D):k(D)}function B(D){return Fr(D)?(t.consume(D),P):n(D)}function P(D){return D===45||Er(D)?(t.consume(D),P):X(D)}function X(D){return ht(D)?(a=X,Ee(D)):It(D)?(t.consume(D),X):re(D)}function Y(D){return D===45||Er(D)?(t.consume(D),Y):D===47||D===62||gn(D)?G(D):n(D)}function G(D){return D===47?(t.consume(D),re):D===58||D===95||Fr(D)?(t.consume(D),K):ht(D)?(a=G,Ee(D)):It(D)?(t.consume(D),G):re(D)}function K(D){return D===45||D===46||D===58||D===95||Er(D)?(t.consume(D),K):Q(D)}function Q(D){return D===61?(t.consume(D),ie):ht(D)?(a=Q,Ee(D)):It(D)?(t.consume(D),Q):G(D)}function ie(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),s=D,xe):ht(D)?(a=ie,Ee(D)):It(D)?(t.consume(D),ie):(t.consume(D),oe)}function xe(D){return D===s?(t.consume(D),s=void 0,Re):D===null?n(D):ht(D)?(a=xe,Ee(D)):(t.consume(D),xe)}function oe(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||gn(D)?G(D):(t.consume(D),oe)}function Re(D){return D===47||D===62||gn(D)?G(D):n(D)}function re(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function Ee(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),ue}function ue(D){return It(D)?jt(t,Ve,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):Ve(D)}function Ve(D){return t.enter("htmlTextData"),a(D)}}const A0={name:"labelEnd",resolveAll:fG,resolveTo:hG,tokenize:dG},lG={tokenize:pG},cG={tokenize:gG},uG={tokenize:mG};function fG(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&fs(t,0,t.length,n),t}function hG(t,e){let n=t.length,r=0,s,i,a,l;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const u={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",u,e],["enter",h,e]],l=xs(l,t.slice(i+1,i+r+3)),l=xs(l,[["enter",d,e]]),l=xs(l,Wg(e.parser.constructs.insideSpan.null,t.slice(i+r+4,a-3),e)),l=xs(l,[["exit",d,e],t[a-2],t[a-1],["exit",h,e]]),l=xs(l,t.slice(a+1)),l=xs(l,[["exit",u,e]]),fs(t,i,t.length,l),t}function dG(t,e,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(b){return i?i._inactive?g(b):(a=r.parser.defined.includes(Ws(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),u):n(b)}function u(b){return b===40?t.attempt(lG,d,a?d:g)(b):b===91?t.attempt(cG,d,a?h:g)(b):a?d(b):g(b)}function h(b){return t.attempt(uG,d,g)(b)}function d(b){return e(b)}function g(b){return i._balanced=!0,n(b)}}function pG(t,e,n){return r;function r(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),s}function s(g){return gn(g)?kf(t,i)(g):i(g)}function i(g){return g===41?d(g):SI(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function a(g){return gn(g)?kf(t,u)(g):d(g)}function l(g){return n(g)}function u(g){return g===34||g===39||g===40?EI(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):d(g)}function h(g){return gn(g)?kf(t,d)(g):d(g)}function d(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),e):n(g)}}function gG(t,e,n){const r=this;return s;function s(l){return TI.call(r,t,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(Ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function mG(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const yG={name:"labelStartImage",resolveAll:A0.resolveAll,tokenize:bG};function bG(t,e,n){const r=this;return s;function s(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),i}function i(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const _G={name:"labelStartLink",resolveAll:A0.resolveAll,tokenize:xG};function xG(t,e,n){const r=this;return s;function s(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const a_={name:"lineEnding",tokenize:vG};function vG(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),jt(t,e,"linePrefix")}}const mp={name:"thematicBreak",tokenize:wG};function wG(t,e,n){let r=0,s;return i;function i(h){return t.enter("thematicBreak"),a(h)}function a(h){return s=h,l(h)}function l(h){return h===s?(t.enter("thematicBreakSequence"),u(h)):r>=3&&(h===null||ht(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===s?(t.consume(h),r++,u):(t.exit("thematicBreakSequence"),It(h)?jt(t,l,"whitespace")(h):l(h))}}const $r={continuation:{tokenize:AG},exit:CG,name:"list",tokenize:EG},SG={partial:!0,tokenize:kG},TG={partial:!0,tokenize:RG};function EG(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(w){const R=r.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(R==="listUnordered"?!r.containerState.marker||w===r.containerState.marker:Qx(w)){if(r.containerState.type||(r.containerState.type=R,t.enter(R,{_container:!0})),R==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(mp,n,h)(w):h(w);if(!r.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(w)}return n(w)}function u(w){return Qx(w)&&++a<10?(t.consume(w),u):(!r.interrupt||a<2)&&(r.containerState.marker?w===r.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),h(w)):n(w)}function h(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||w,t.check(fh,r.interrupt?n:d,t.attempt(SG,b,g))}function d(w){return r.containerState.initialBlankLine=!0,i++,b(w)}function g(w){return It(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),b):n(w)}function b(w){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(w)}}function AG(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(fh,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,jt(t,e,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!It(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(TG,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,jt(t,t.attempt($r,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function RG(t,e,n){const r=this;return jt(t,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(i):n(i)}}function CG(t){t.exit(this.containerState.type)}function kG(t,e,n){const r=this;return jt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!It(i)&&a&&a[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const HA={name:"setextUnderline",resolveTo:NG,tokenize:MG};function NG(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",a,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function MG(t,e,n){const r=this;let s;return i;function i(h){let d=r.events.length,g;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){g=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(t.enter("setextHeadingLine"),s=h,a(h)):n(h)}function a(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===s?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),It(h)?jt(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||ht(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const IG={tokenize:OG};function OG(t){const e=this,n=t.attempt(fh,r,t.attempt(this.parser.constructs.flowInitial,s,jt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(BQ,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const PG={resolveAll:RI()},DG=AI("string"),FG=AI("text");function AI(t){return{resolveAll:RI(t==="text"?jG:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,a,l);return a;function a(d){return h(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return h(d)?(n.exit("data"),i(d)):(n.consume(d),u)}function h(d){if(d===null)return!0;const g=s[d];let b=-1;if(g)for(;++b<g.length;){const w=g[b];if(!w.previous||w.previous.call(r,r.previous))return!0}return!1}}}function RI(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function jG(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,a=-1,l=0,u;for(;i--;){const h=s[i];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(h===-2)u=!0,l++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const BG={42:$r,43:$r,45:$r,48:$r,49:$r,50:$r,51:$r,52:$r,53:$r,54:$r,55:$r,56:$r,57:$r,62:_I},UG={91:$Q},LG={[-2]:o_,[-1]:o_,32:o_},zG={35:KQ,42:mp,45:[HA,mp],60:JQ,61:HA,95:mp,96:VA,126:VA},VG={38:vI,92:xI},$G={[-5]:a_,[-4]:a_,[-3]:a_,33:yG,38:vI,42:Gx,60:[_Q,oG],91:_G,92:[XQ,xI],93:A0,95:Gx,96:IQ},HG={null:[Gx,PG]},WG={null:[42,95]},qG={null:[]},XG=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:WG,contentInitial:UG,disable:qG,document:BG,flow:zG,flowInitial:LG,insideSpan:HG,string:VG,text:$G},Symbol.toStringTag,{value:"Module"}));function YG(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const u={attempt:X(B),check:X(P),consume:N,enter:k,exit:F,interrupt:X(P,{interrupt:!0})},h={code:null,containerState:{},defineSkip:A,events:[],now:R,parser:t,previous:null,sliceSerialize:b,sliceStream:w,write:g};let d=e.tokenize.call(h,u);return e.resolveAll&&i.push(e),h;function g(Q){return a=xs(a,Q),C(),a[a.length-1]!==null?[]:(Y(e,0),h.events=Wg(i,h.events,h),h.events)}function b(Q,ie){return ZG(w(Q),ie)}function w(Q){return KG(a,Q)}function R(){const{_bufferIndex:Q,_index:ie,line:xe,column:oe,offset:Re}=r;return{_bufferIndex:Q,_index:ie,line:xe,column:oe,offset:Re}}function A(Q){s[Q.line]=Q.column,K()}function C(){let Q;for(;r._index<a.length;){const ie=a[r._index];if(typeof ie=="string")for(Q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Q&&r._bufferIndex<ie.length;)M(ie.charCodeAt(r._bufferIndex));else M(ie)}}function M(Q){d=d(Q)}function N(Q){ht(Q)?(r.line++,r.column=1,r.offset+=Q===-3?2:1,K()):Q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=Q}function k(Q,ie){const xe=ie||{};return xe.type=Q,xe.start=R(),h.events.push(["enter",xe,h]),l.push(xe),xe}function F(Q){const ie=l.pop();return ie.end=R(),h.events.push(["exit",ie,h]),ie}function B(Q,ie){Y(Q,ie.from)}function P(Q,ie){ie.restore()}function X(Q,ie){return xe;function xe(oe,Re,re){let Ee,ue,Ve,D;return Array.isArray(oe)?ye(oe):"tokenize"in oe?ye([oe]):ne(oe);function ne(ke){return Ce;function Ce(De){const Ge=De!==null&&ke[De],Ke=De!==null&&ke.null,nt=[...Array.isArray(Ge)?Ge:Ge?[Ge]:[],...Array.isArray(Ke)?Ke:Ke?[Ke]:[]];return ye(nt)(De)}}function ye(ke){return Ee=ke,ue=0,ke.length===0?re:U(ke[ue])}function U(ke){return Ce;function Ce(De){return D=G(),Ve=ke,ke.partial||(h.currentConstruct=ke),ke.name&&h.parser.constructs.disable.null.includes(ke.name)?ce():ke.tokenize.call(ie?Object.assign(Object.create(h),ie):h,u,we,ce)(De)}}function we(ke){return Q(Ve,D),Re}function ce(ke){return D.restore(),++ue<Ee.length?U(Ee[ue]):re}}}function Y(Q,ie){Q.resolveAll&&!i.includes(Q)&&i.push(Q),Q.resolve&&fs(h.events,ie,h.events.length-ie,Q.resolve(h.events.slice(ie),h)),Q.resolveTo&&(h.events=Q.resolveTo(h.events,h))}function G(){const Q=R(),ie=h.previous,xe=h.currentConstruct,oe=h.events.length,Re=Array.from(l);return{from:oe,restore:re};function re(){r=Q,h.previous=ie,h.currentConstruct=xe,h.events.length=oe,l=Re,K()}}function K(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function KG(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let a;if(n===s)a=[t[n].slice(r,i)];else{if(a=t.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(t[s].slice(0,i))}return a}function ZG(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function QG(t){const r={constructs:yI([XG,...(t||{}).extensions||[]]),content:s(hQ),defined:[],document:s(pQ),flow:s(IG),lazy:{},string:s(DG),text:s(FG)};return r;function s(i){return a;function a(l){return YG(r,i,l)}}}function GG(t){for(;!wI(t););return t}const WA=/[\0\t\n\r]/g;function JG(){let t=1,e="",n=!0,r;return s;function s(i,a,l){const u=[];let h,d,g,b,w;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),g=0,e="",n&&(i.charCodeAt(0)===65279&&g++,n=void 0);g<i.length;){if(WA.lastIndex=g,h=WA.exec(i),b=h&&h.index!==void 0?h.index:i.length,w=i.charCodeAt(b),!h){e=i.slice(g);break}if(w===10&&g===b&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),g<b&&(u.push(i.slice(g,b)),t+=b-g),w){case 0:{u.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,u.push(-2);t++<d;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}g=b+1}return l&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const eJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tJ(t){return t.replace(eJ,nJ)}function nJ(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return bI(n.slice(i?2:1),i?16:10)}return E0(n)||t}const CI={}.hasOwnProperty;function rJ(t,e,n){return typeof e!="string"&&(n=e,e=void 0),sJ(n)(GG(QG(n).document().write(JG()(t,e,!0))))}function sJ(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(fn),autolinkProtocol:G,autolinkEmail:G,atxHeading:i(In),blockQuote:i(Ke),characterEscape:G,characterReference:G,codeFenced:i(nt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(nt,a),codeText:i(st,a),codeTextData:G,data:G,codeFlowValue:G,definition:i(ct),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Xt),hardBreakEscape:i(ar),hardBreakTrailing:i(ar),htmlFlow:i(xn,a),htmlFlowData:G,htmlText:i(xn,a),htmlTextData:G,image:i(Tn),label:a,link:i(fn),listItem:i(lr),listItemValue:b,listOrdered:i(xi,g),listUnordered:i(xi),paragraph:i(mr),reference:U,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(In),strong:i(Ks),thematicBreak:i(nu)},exit:{atxHeading:u(),atxHeadingSequence:B,autolink:u(),autolinkEmail:Ge,autolinkProtocol:De,blockQuote:u(),characterEscapeValue:K,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:ke,characterReference:Ce,codeFenced:u(C),codeFencedFence:A,codeFencedFenceInfo:w,codeFencedFenceMeta:R,codeFlowValue:K,codeIndented:u(M),codeText:u(Re),codeTextData:K,data:K,definition:u(),definitionDestinationString:F,definitionLabelString:N,definitionTitleString:k,emphasis:u(),hardBreakEscape:u(ie),hardBreakTrailing:u(ie),htmlFlow:u(xe),htmlFlowData:K,htmlText:u(oe),htmlTextData:K,image:u(Ee),label:Ve,labelText:ue,lineEnding:Q,link:u(re),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:we,resourceDestinationString:D,resourceTitleString:ne,resource:ye,setextHeading:u(Y),setextHeadingLineSequence:X,setextHeadingText:P,strong:u(),thematicBreak:u()}};kI(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Me){let Le={type:"root",children:[]};const ut={stack:[Le],tokenStack:[],config:e,enter:l,exit:h,buffer:a,resume:d,data:n},dt=[];let $t=-1;for(;++$t<Me.length;)if(Me[$t][1].type==="listOrdered"||Me[$t][1].type==="listUnordered")if(Me[$t][0]==="enter")dt.push($t);else{const Rr=dt.pop();$t=s(Me,Rr,$t)}for($t=-1;++$t<Me.length;){const Rr=e[Me[$t][0]];CI.call(Rr,Me[$t][1].type)&&Rr[Me[$t][1].type].call(Object.assign({sliceSerialize:Me[$t][2].sliceSerialize},ut),Me[$t][1])}if(ut.tokenStack.length>0){const Rr=ut.tokenStack[ut.tokenStack.length-1];(Rr[1]||qA).call(ut,void 0,Rr[0])}for(Le.position={start:Eo(Me.length>0?Me[0][1].start:{line:1,column:1,offset:0}),end:Eo(Me.length>0?Me[Me.length-2][1].end:{line:1,column:1,offset:0})},$t=-1;++$t<e.transforms.length;)Le=e.transforms[$t](Le)||Le;return Le}function s(Me,Le,ut){let dt=Le-1,$t=-1,Rr=!1,ks,yr,Xr,Cr;for(;++dt<=ut;){const Bn=Me[dt];switch(Bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bn[0]==="enter"?$t++:$t--,Cr=void 0;break}case"lineEndingBlank":{Bn[0]==="enter"&&(ks&&!Cr&&!$t&&!Xr&&(Xr=dt),Cr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Cr=void 0}if(!$t&&Bn[0]==="enter"&&Bn[1].type==="listItemPrefix"||$t===-1&&Bn[0]==="exit"&&(Bn[1].type==="listUnordered"||Bn[1].type==="listOrdered")){if(ks){let jr=dt;for(yr=void 0;jr--;){const Yr=Me[jr];if(Yr[1].type==="lineEnding"||Yr[1].type==="lineEndingBlank"){if(Yr[0]==="exit")continue;yr&&(Me[yr][1].type="lineEndingBlank",Rr=!0),Yr[1].type="lineEnding",yr=jr}else if(!(Yr[1].type==="linePrefix"||Yr[1].type==="blockQuotePrefix"||Yr[1].type==="blockQuotePrefixWhitespace"||Yr[1].type==="blockQuoteMarker"||Yr[1].type==="listItemIndent"))break}Xr&&(!yr||Xr<yr)&&(ks._spread=!0),ks.end=Object.assign({},yr?Me[yr][1].start:Bn[1].end),Me.splice(yr||dt,0,["exit",ks,Bn[2]]),dt++,ut++}if(Bn[1].type==="listItemPrefix"){const jr={type:"listItem",_spread:!1,start:Object.assign({},Bn[1].start),end:void 0};ks=jr,Me.splice(dt,0,["enter",jr,Bn[2]]),dt++,ut++,Xr=void 0,Cr=!0}}}return Me[Le][1]._spread=Rr,ut}function i(Me,Le){return ut;function ut(dt){l.call(this,Me(dt),dt),Le&&Le.call(this,dt)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(Me,Le,ut){this.stack[this.stack.length-1].children.push(Me),this.stack.push(Me),this.tokenStack.push([Le,ut||void 0]),Me.position={start:Eo(Le.start),end:void 0}}function u(Me){return Le;function Le(ut){Me&&Me.call(this,ut),h.call(this,ut)}}function h(Me,Le){const ut=this.stack.pop(),dt=this.tokenStack.pop();if(dt)dt[0].type!==Me.type&&(Le?Le.call(this,Me,dt[0]):(dt[1]||qA).call(this,Me,dt[0]));else throw new Error("Cannot close `"+Me.type+"` ("+Cf({start:Me.start,end:Me.end})+"): its not open");ut.position.end=Eo(Me.end)}function d(){return T0(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(Me){if(this.data.expectingFirstListItemValue){const Le=this.stack[this.stack.length-2];Le.start=Number.parseInt(this.sliceSerialize(Me),10),this.data.expectingFirstListItemValue=void 0}}function w(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.lang=Me}function R(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.meta=Me}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function M(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me.replace(/(\r?\n|\r)$/g,"")}function N(Me){const Le=this.resume(),ut=this.stack[this.stack.length-1];ut.label=Le,ut.identifier=Ws(this.sliceSerialize(Me)).toLowerCase()}function k(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Me}function F(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Me}function B(Me){const Le=this.stack[this.stack.length-1];if(!Le.depth){const ut=this.sliceSerialize(Me).length;Le.depth=ut}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function X(Me){const Le=this.stack[this.stack.length-1];Le.depth=this.sliceSerialize(Me).codePointAt(0)===61?1:2}function Y(){this.data.setextHeadingSlurpLineEnding=void 0}function G(Me){const ut=this.stack[this.stack.length-1].children;let dt=ut[ut.length-1];(!dt||dt.type!=="text")&&(dt=Zs(),dt.position={start:Eo(Me.start),end:void 0},ut.push(dt)),this.stack.push(dt)}function K(Me){const Le=this.stack.pop();Le.value+=this.sliceSerialize(Me),Le.position.end=Eo(Me.end)}function Q(Me){const Le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ut=Le.children[Le.children.length-1];ut.position.end=Eo(Me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Le.type)&&(G.call(this,Me),K.call(this,Me))}function ie(){this.data.atHardBreak=!0}function xe(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function oe(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function Re(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function re(){const Me=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Me.type+="Reference",Me.referenceType=Le,delete Me.url,delete Me.title}else delete Me.identifier,delete Me.label;this.data.referenceType=void 0}function Ee(){const Me=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Me.type+="Reference",Me.referenceType=Le,delete Me.url,delete Me.title}else delete Me.identifier,delete Me.label;this.data.referenceType=void 0}function ue(Me){const Le=this.sliceSerialize(Me),ut=this.stack[this.stack.length-2];ut.label=tJ(Le),ut.identifier=Ws(Le).toLowerCase()}function Ve(){const Me=this.stack[this.stack.length-1],Le=this.resume(),ut=this.stack[this.stack.length-1];if(this.data.inReference=!0,ut.type==="link"){const dt=Me.children;ut.children=dt}else ut.alt=Le}function D(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Me}function ne(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Me}function ye(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function we(Me){const Le=this.resume(),ut=this.stack[this.stack.length-1];ut.label=Le,ut.identifier=Ws(this.sliceSerialize(Me)).toLowerCase(),this.data.referenceType="full"}function ce(Me){this.data.characterReferenceType=Me.type}function ke(Me){const Le=this.sliceSerialize(Me),ut=this.data.characterReferenceType;let dt;ut?(dt=bI(Le,ut==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):dt=E0(Le);const $t=this.stack[this.stack.length-1];$t.value+=dt}function Ce(Me){const Le=this.stack.pop();Le.position.end=Eo(Me.end)}function De(Me){K.call(this,Me);const Le=this.stack[this.stack.length-1];Le.url=this.sliceSerialize(Me)}function Ge(Me){K.call(this,Me);const Le=this.stack[this.stack.length-1];Le.url="mailto:"+this.sliceSerialize(Me)}function Ke(){return{type:"blockquote",children:[]}}function nt(){return{type:"code",lang:null,meta:null,value:""}}function st(){return{type:"inlineCode",value:""}}function ct(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xt(){return{type:"emphasis",children:[]}}function In(){return{type:"heading",depth:0,children:[]}}function ar(){return{type:"break"}}function xn(){return{type:"html",value:""}}function Tn(){return{type:"image",title:null,url:"",alt:null}}function fn(){return{type:"link",title:null,url:"",children:[]}}function xi(Me){return{type:"list",ordered:Me.type==="listOrdered",start:null,spread:Me._spread,children:[]}}function lr(Me){return{type:"listItem",spread:Me._spread,checked:null,children:[]}}function mr(){return{type:"paragraph",children:[]}}function Ks(){return{type:"strong",children:[]}}function Zs(){return{type:"text",value:""}}function nu(){return{type:"thematicBreak"}}}function Eo(t){return{line:t.line,column:t.column,offset:t.offset}}function kI(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?kI(t,r):iJ(t,r)}}function iJ(t,e){let n;for(n in e)if(CI.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function qA(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Cf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Cf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Cf({start:e.start,end:e.end})+") is still open")}function oJ(t){const e=this;e.parser=n;function n(r){return rJ(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function aJ(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function lJ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function cJ(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function uJ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fJ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hJ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=tu(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let a,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=i+1,l+=1,t.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function dJ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pJ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function NI(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function gJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NI(t,e);const s={src:tu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function mJ(t,e){const n={src:tu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function yJ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function bJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NI(t,e);const s={href:tu(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function _J(t,e){const n={href:tu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function xJ(t,e,n){const r=t.all(e),s=n?vJ(n):MI(e),i={},a=[];if(typeof e.checked=="boolean"){const d=r[0];let g;d&&d.type==="element"&&d.tagName==="p"?g=d:(g={type:"element",tagName:"p",properties:{},children:[]},r.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:a};return t.patch(e,h),t.applyData(e,h)}function vJ(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=MI(n[r])}return e}function MI(t){const e=t.spread;return e??t.children.length>1}function wJ(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function SJ(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TJ(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function EJ(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function AJ(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=x0(e.children[1]),u=uI(e.children[e.children.length-1]);l&&u&&(a.position={start:l,end:u}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function RJ(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let u=-1;const h=[];for(;++u<l;){const g=e.children[u],b={},w=a?a[u]:void 0;w&&(b.align=w);let R={type:"element",tagName:i,properties:b,children:[]};g&&(R.children=t.all(g),t.patch(g,R),R=t.applyData(g,R)),h.push(R)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,d),t.applyData(e,d)}function CJ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const XA=9,YA=32;function kJ(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(KA(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(KA(e.slice(s),s>0,!1)),i.join("")}function KA(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===XA||i===YA;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===XA||i===YA;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function NJ(t,e){const n={type:"text",value:kJ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function MJ(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const IJ={blockquote:aJ,break:lJ,code:cJ,delete:uJ,emphasis:fJ,footnoteReference:hJ,heading:dJ,html:pJ,imageReference:gJ,image:mJ,inlineCode:yJ,linkReference:bJ,link:_J,listItem:xJ,list:wJ,paragraph:SJ,root:TJ,strong:EJ,table:AJ,tableCell:CJ,tableRow:RJ,text:NJ,thematicBreak:MJ,toml:Qd,yaml:Qd,definition:Qd,footnoteDefinition:Qd};function Qd(){}const II=-1,qg=0,Nf=1,sg=2,R0=3,C0=4,k0=5,N0=6,OI=7,PI=8,ZA=typeof self=="object"?self:globalThis,OJ=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,a]=e[s];switch(i){case qg:case II:return n(a,s);case Nf:{const l=n([],s);for(const u of a)l.push(r(u));return l}case sg:{const l=n({},s);for(const[u,h]of a)l[r(u)]=r(h);return l}case R0:return n(new Date(a),s);case C0:{const{source:l,flags:u}=a;return n(new RegExp(l,u),s)}case k0:{const l=n(new Map,s);for(const[u,h]of a)l.set(r(u),r(h));return l}case N0:{const l=n(new Set,s);for(const u of a)l.add(r(u));return l}case OI:{const{name:l,message:u}=a;return n(new ZA[l](u),s)}case PI:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new ZA[i](a),s)};return r},QA=t=>OJ(new Map,t)(0),tc="",{toString:PJ}={},{keys:DJ}=Object,cf=t=>{const e=typeof t;if(e!=="object"||!t)return[qg,e];const n=PJ.call(t).slice(8,-1);switch(n){case"Array":return[Nf,tc];case"Object":return[sg,tc];case"Date":return[R0,tc];case"RegExp":return[C0,tc];case"Map":return[k0,tc];case"Set":return[N0,tc];case"DataView":return[Nf,n]}return n.includes("Array")?[Nf,n]:n.includes("Error")?[OI,n]:[sg,n]},Gd=([t,e])=>t===qg&&(e==="function"||e==="symbol"),FJ=(t,e,n,r)=>{const s=(a,l)=>{const u=r.push(a)-1;return n.set(l,u),u},i=a=>{if(n.has(a))return n.get(a);let[l,u]=cf(a);switch(l){case qg:{let d=a;switch(u){case"bigint":l=PI,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return s([II],a)}return s([l,d],a)}case Nf:{if(u){let b=a;return u==="DataView"?b=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(b=new Uint8Array(a)),s([u,[...b]],a)}const d=[],g=s([l,d],a);for(const b of a)d.push(i(b));return g}case sg:{if(u)switch(u){case"BigInt":return s([u,a.toString()],a);case"Boolean":case"Number":case"String":return s([u,a.valueOf()],a)}if(e&&"toJSON"in a)return i(a.toJSON());const d=[],g=s([l,d],a);for(const b of DJ(a))(t||!Gd(cf(a[b])))&&d.push([i(b),i(a[b])]);return g}case R0:return s([l,a.toISOString()],a);case C0:{const{source:d,flags:g}=a;return s([l,{source:d,flags:g}],a)}case k0:{const d=[],g=s([l,d],a);for(const[b,w]of a)(t||!(Gd(cf(b))||Gd(cf(w))))&&d.push([i(b),i(w)]);return g}case N0:{const d=[],g=s([l,d],a);for(const b of a)(t||!Gd(cf(b)))&&d.push(i(b));return g}}const{message:h}=a;return s([l,{name:u,message:h}],a)};return i},GA=(t,{json:e,lossy:n}={})=>{const r=[];return FJ(!(e||n),!!e,new Map,r)(t),r},ig=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?QA(GA(t,e)):structuredClone(t):(t,e)=>QA(GA(t,e));function jJ(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function BJ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function UJ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||jJ,r=t.options.footnoteBackLabel||BJ,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const d=t.all(h),g=String(h.identifier).toUpperCase(),b=tu(g.toLowerCase());let w=0;const R=[],A=t.footnoteCounts.get(g);for(;A!==void 0&&++w<=A;){R.length>0&&R.push({type:"text",value:" "});let N=typeof n=="string"?n:n(u,w);typeof N=="string"&&(N={type:"text",value:N}),R.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,w),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const C=d[d.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const N=C.children[C.children.length-1];N&&N.type==="text"?N.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...R)}else d.push(...R);const M={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(d,!0)};t.patch(h,M),l.push(M)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ig(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const Xg=function(t){if(t==null)return $J;if(typeof t=="function")return Yg(t);if(typeof t=="object")return Array.isArray(t)?LJ(t):zJ(t);if(typeof t=="string")return VJ(t);throw new Error("Expected function, string, or object as test")};function LJ(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Xg(t[n]);return Yg(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function zJ(t){const e=t;return Yg(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function VJ(t){return Yg(e);function e(n){return n&&n.type===t}}function Yg(t){return e;function e(n,r,s){return!!(HJ(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function $J(){return!0}function HJ(t){return t!==null&&typeof t=="object"&&"type"in t}const DI=[],WJ=!0,Jx=!1,qJ="skip";function FI(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=Xg(s),a=r?-1:1;l(t,void 0,[])();function l(u,h,d){const g=u&&typeof u=="object"?u:{};if(typeof g.type=="string"){const w=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(u.type+(w?"<"+w+">":""))+")"})}return b;function b(){let w=DI,R,A,C;if((!e||i(u,h,d[d.length-1]||void 0))&&(w=XJ(n(u,d)),w[0]===Jx))return w;if("children"in u&&u.children){const M=u;if(M.children&&w[0]!==qJ)for(A=(r?M.children.length:-1)+a,C=d.concat(M);A>-1&&A<M.children.length;){const N=M.children[A];if(R=l(N,A,C)(),R[0]===Jx)return R;A=typeof R[1]=="number"?R[1]:A+a}}return w}}}function XJ(t){return Array.isArray(t)?t:typeof t=="number"?[WJ,t]:t==null?DI:[t]}function M0(t,e,n,r){let s,i,a;typeof e=="function"&&typeof n!="function"?(i=void 0,a=e,s=n):(i=e,a=n,s=r),FI(t,i,l,s);function l(u,h){const d=h[h.length-1],g=d?d.children.indexOf(u):void 0;return a(u,g,d)}}const ev={}.hasOwnProperty,YJ={};function KJ(t,e){const n=e||YJ,r=new Map,s=new Map,i=new Map,a={...IJ,...n.handlers},l={all:h,applyData:QJ,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:u,options:n,patch:ZJ,wrap:JJ};return M0(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const g=d.type==="definition"?r:s,b=String(d.identifier).toUpperCase();g.has(b)||g.set(b,d)}}),l;function u(d,g){const b=d.type,w=l.handlers[b];if(ev.call(l.handlers,b)&&w)return w(l,d,g);if(l.options.passThrough&&l.options.passThrough.includes(b)){if("children"in d){const{children:A,...C}=d,M=ig(C);return M.children=l.all(d),M}return ig(d)}return(l.options.unknownHandler||GJ)(l,d,g)}function h(d){const g=[];if("children"in d){const b=d.children;let w=-1;for(;++w<b.length;){const R=l.one(b[w],d);if(R){if(w&&b[w-1].type==="break"&&(!Array.isArray(R)&&R.type==="text"&&(R.value=JA(R.value)),!Array.isArray(R)&&R.type==="element")){const A=R.children[0];A&&A.type==="text"&&(A.value=JA(A.value))}Array.isArray(R)?g.push(...R):g.push(R)}}}return g}}function ZJ(t,e){t.position&&(e.position=BZ(t))}function QJ(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,ig(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function GJ(t,e){const n=e.data||{},r="value"in e&&!(ev.call(n,"hProperties")||ev.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function JJ(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function JA(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function e3(t,e){const n=KJ(t,e),r=n.one(t,void 0),s=UJ(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function eee(t,e){return t&&"run"in t?async function(n,r){const s=e3(n,{file:r,...e});await t.run(s,r)}:function(n,r){return e3(n,{file:r,...t||e})}}function t3(t){if(t)throw t}var l_,n3;function tee(){if(n3)return l_;n3=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},i=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var d=t.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!d&&!g)return!1;var b;for(b in h);return typeof b>"u"||t.call(h,b)},a=function(h,d){n&&d.name==="__proto__"?n(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},l=function(h,d){if(d==="__proto__")if(t.call(h,d)){if(r)return r(h,d).value}else return;return h[d]};return l_=function u(){var h,d,g,b,w,R,A=arguments[0],C=1,M=arguments.length,N=!1;for(typeof A=="boolean"&&(N=A,A=arguments[1]||{},C=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});C<M;++C)if(h=arguments[C],h!=null)for(d in h)g=l(A,d),b=l(h,d),A!==b&&(N&&b&&(i(b)||(w=s(b)))?(w?(w=!1,R=g&&s(g)?g:[]):R=g&&i(g)?g:{},a(A,{name:d,newValue:u(N,R,b)})):typeof b<"u"&&a(A,{name:d,newValue:b}));return A},l_}var nee=tee();const c_=Hc(nee);function tv(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ree(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(u,...h){const d=t[++i];let g=-1;if(u){a(u);return}for(;++g<s.length;)(h[g]===null||h[g]===void 0)&&(h[g]=s[g]);s=h,d?see(d,l)(...h):a(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function see(t,e){let n;return r;function r(...a){const l=t.length>a.length;let u;l&&a.push(s);try{u=t.apply(this,a)}catch(h){const d=h;if(l&&n)throw d;return s(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(i,s):u instanceof Error?s(u):i(u))}function s(a,...l){n||(n=!0,e(a,...l))}function i(a){s(null,a)}}const si={basename:iee,dirname:oee,extname:aee,join:lee,sep:"/"};function iee(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');hh(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,l=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(t.codePointAt(s)===e.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function oee(t){if(hh(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function aee(t){hh(t);let e=t.length,n=-1,r=0,s=-1,i=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function lee(...t){let e=-1,n;for(;++e<t.length;)hh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":cee(n)}function cee(t){hh(t);const e=t.codePointAt(0)===47;let n=uee(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function uee(t,e){let n="",r=0,s=-1,i=0,a=-1,l,u;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function hh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const fee={cwd:hee};function hee(){return"/"}function nv(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function dee(t){if(typeof t=="string")t=new URL(t);else if(!nv(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return pee(t)}function pee(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const u_=["history","path","basename","stem","extname","dirname"];class jI{constructor(e){let n;e?nv(e)?n={path:e}:typeof e=="string"||gee(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":fee.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<u_.length;){const i=u_[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)u_.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?si.basename(this.path):void 0}set basename(e){h_(e,"basename"),f_(e,"basename"),this.path=si.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?si.dirname(this.path):void 0}set dirname(e){r3(this.basename,"dirname"),this.path=si.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?si.extname(this.path):void 0}set extname(e){if(f_(e,"extname"),r3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=si.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){nv(e)&&(e=dee(e)),h_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?si.basename(this.path,this.extname):void 0}set stem(e){h_(e,"stem"),f_(e,"stem"),this.path=si.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Ar(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function f_(t,e){if(t&&t.includes(si.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+si.sep+"`")}function h_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function r3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function gee(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mee=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},yee={}.hasOwnProperty;class I0 extends mee{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ree()}copy(){const e=new I0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(c_(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(g_("data",this.frozen),this.namespace[e]=n,this):yee.call(this.namespace,e)&&this.namespace[e]||void 0:e?(g_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Jd(e),r=this.parser||this.Parser;return d_("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),d_("process",this.parser||this.Parser),p_("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=Jd(e),u=r.parse(l);r.run(u,l,function(d,g,b){if(d||!g||!b)return h(d);const w=g,R=r.stringify(w,b);xee(R)?b.value=R:b.result=R,h(d,b)});function h(d,g){d||!g?a(d):i?i(g):n(void 0,g)}}}processSync(e){let n=!1,r;return this.freeze(),d_("processSync",this.parser||this.Parser),p_("processSync",this.compiler||this.Compiler),this.process(e,s),i3("processSync","process",n),r;function s(i,a){n=!0,t3(i),r=a}}run(e,n,r){s3(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const u=Jd(n);s.run(e,u,h);function h(d,g,b){const w=g||e;d?l(d):a?a(w):r(void 0,w,b)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),i3("runSync","run",r),s;function i(a,l){t3(a),s=l,r=!0}}stringify(e,n){this.freeze();const r=Jd(n),s=this.compiler||this.Compiler;return p_("stringify",s),s3(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(g_("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...g]=h;u(d,g)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(s.settings=c_(!0,s.settings,h.settings))}function l(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const g=h[d];i(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,d){let g=-1,b=-1;for(;++g<r.length;)if(r[g][0]===h){b=g;break}if(b===-1)r.push([h,...d]);else if(d.length>0){let[w,...R]=d;const A=r[b][1];tv(A)&&tv(w)&&(w=c_(!0,A,w)),r[b]=[h,w,...R]}}}}const bee=new I0().freeze();function d_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function p_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function g_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function s3(t){if(!tv(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function i3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Jd(t){return _ee(t)?t:new jI(t)}function _ee(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function xee(t){return typeof t=="string"||vee(t)}function vee(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const wee="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",o3=[],a3={allowDangerousHtml:!0},See=/^(https?|ircs?|mailto|xmpp)$/i,Tee=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Eee(t){const e=Aee(t),n=Ree(t);return Cee(e.runSync(e.parse(n),n),t)}function Aee(t){const e=t.rehypePlugins||o3,n=t.remarkPlugins||o3,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...a3}:a3;return bee().use(oJ).use(n).use(eee,r).use(e)}function Ree(t){const e=t.children||"",n=new jI;return typeof e=="string"&&(n.value=e),n}function Cee(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,i=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,u=e.urlTransform||kee;for(const d of Tee)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+wee+d.id,void 0);return M0(t,h),$Z(t,{Fragment:y.Fragment,components:s,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function h(d,g,b){if(d.type==="raw"&&b&&typeof g=="number")return a?b.children.splice(g,1):b.children[g]={type:"text",value:d.value},g;if(d.type==="element"){let w;for(w in i_)if(Object.hasOwn(i_,w)&&Object.hasOwn(d.properties,w)){const R=d.properties[w],A=i_[w];(A===null||A.includes(d.tagName))&&(d.properties[w]=u(String(R||""),w,d))}}if(d.type==="element"){let w=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!w&&r&&typeof g=="number"&&(w=!r(d,g,b)),w&&b&&typeof g=="number")return l&&d.children?b.children.splice(g,1,...d.children):b.children.splice(g,1),g}}}function kee(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||See.test(t.slice(0,e))?t:""}function l3(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function Nee(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Mee(t,e,n){const s=Xg((n||{}).ignore||[]),i=Iee(e);let a=-1;for(;++a<i.length;)FI(t,"text",l);function l(h,d){let g=-1,b;for(;++g<d.length;){const w=d[g],R=b?b.children:void 0;if(s(w,R?R.indexOf(w):void 0,b))return;b=w}if(b)return u(h,d)}function u(h,d){const g=d[d.length-1],b=i[a][0],w=i[a][1];let R=0;const C=g.children.indexOf(h);let M=!1,N=[];b.lastIndex=0;let k=b.exec(h.value);for(;k;){const F=k.index,B={index:k.index,input:k.input,stack:[...d,h]};let P=w(...k,B);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?b.lastIndex=F+1:(R!==F&&N.push({type:"text",value:h.value.slice(R,F)}),Array.isArray(P)?N.push(...P):P&&N.push(P),R=F+k[0].length,M=!0),!b.global)break;k=b.exec(h.value)}return M?(R<h.value.length&&N.push({type:"text",value:h.value.slice(R)}),g.children.splice(C,1,...N)):N=[h],C+N.length}}function Iee(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([Oee(s[0]),Pee(s[1])])}return e}function Oee(t){return typeof t=="string"?new RegExp(Nee(t),"g"):t}function Pee(t){return typeof t=="function"?t:function(){return t}}const m_="phrasing",y_=["autolink","link","image","label"];function Dee(){return{transforms:[Vee],enter:{literalAutolink:jee,literalAutolinkEmail:b_,literalAutolinkHttp:b_,literalAutolinkWww:b_},exit:{literalAutolink:zee,literalAutolinkEmail:Lee,literalAutolinkHttp:Bee,literalAutolinkWww:Uee}}}function Fee(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:m_,notInConstruct:y_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:m_,notInConstruct:y_},{character:":",before:"[ps]",after:"\\/",inConstruct:m_,notInConstruct:y_}]}}function jee(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function b_(t){this.config.enter.autolinkProtocol.call(this,t)}function Bee(t){this.config.exit.autolinkProtocol.call(this,t)}function Uee(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Lee(t){this.config.exit.autolinkEmail.call(this,t)}function zee(t){this.exit(t)}function Vee(t){Mee(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$ee],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Hee]],{ignore:["link","linkReference"]})}function $ee(t,e,n,r,s){let i="";if(!BI(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!Wee(n)))return!1;const a=qee(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:i+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Hee(t,e,n,r){return!BI(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Wee(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function qee(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=l3(t,"(");let i=l3(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function BI(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||el(n)||Hg(n))&&(!e||n!==47)}UI.peek=tte;function Xee(){this.buffer()}function Yee(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Kee(){this.buffer()}function Zee(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Qee(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ws(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Gee(t){this.exit(t)}function Jee(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ws(this.sliceSerialize(t)).toLowerCase(),n.label=e}function ete(t){this.exit(t)}function tte(){return"["}function UI(t,e,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(t),{after:"]",before:i})),l(),a(),i+=s.move("]"),i}function nte(){return{enter:{gfmFootnoteCallString:Xee,gfmFootnoteCall:Yee,gfmFootnoteDefinitionLabelString:Kee,gfmFootnoteDefinition:Zee},exit:{gfmFootnoteCallString:Qee,gfmFootnoteCall:Gee,gfmFootnoteDefinitionLabelString:Jee,gfmFootnoteDefinition:ete}}}function rte(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:UI},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,a){const l=i.createTracker(a);let u=l.move("[^");const h=i.enter("footnoteDefinition"),d=i.enter("label");return u+=l.move(i.safe(i.associationId(r),{before:u,after:"]"})),d(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((e?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),e?LI:ste))),h(),u}}function ste(t,e,n){return e===0?t:LI(t,e,n)}function LI(t,e,n){return(n?"":"    ")+t}const ite=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];zI.peek=ute;function ote(){return{canContainEols:["delete"],enter:{strikethrough:lte},exit:{strikethrough:cte}}}function ate(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ite}],handlers:{delete:zI}}}function lte(t){this.enter({type:"delete",children:[]},t)}function cte(t){this.exit(t)}function zI(t,e,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(t,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function ute(){return"~"}function fte(t){return t.length}function hte(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||fte,i=[],a=[],l=[],u=[];let h=0,d=-1;for(;++d<t.length;){const A=[],C=[];let M=-1;for(t[d].length>h&&(h=t[d].length);++M<t[d].length;){const N=dte(t[d][M]);if(n.alignDelimiters!==!1){const k=s(N);C[M]=k,(u[M]===void 0||k>u[M])&&(u[M]=k)}A.push(N)}a[d]=A,l[d]=C}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<h;)i[g]=c3(r[g]);else{const A=c3(r);for(;++g<h;)i[g]=A}g=-1;const b=[],w=[];for(;++g<h;){const A=i[g];let C="",M="";A===99?(C=":",M=":"):A===108?C=":":A===114&&(M=":");let N=n.alignDelimiters===!1?1:Math.max(1,u[g]-C.length-M.length);const k=C+"-".repeat(N)+M;n.alignDelimiters!==!1&&(N=C.length+N+M.length,N>u[g]&&(u[g]=N),w[g]=N),b[g]=k}a.splice(1,0,b),l.splice(1,0,w),d=-1;const R=[];for(;++d<a.length;){const A=a[d],C=l[d];g=-1;const M=[];for(;++g<h;){const N=A[g]||"";let k="",F="";if(n.alignDelimiters!==!1){const B=u[g]-(C[g]||0),P=i[g];P===114?k=" ".repeat(B):P===99?B%2?(k=" ".repeat(B/2+.5),F=" ".repeat(B/2-.5)):(k=" ".repeat(B/2),F=k):F=" ".repeat(B)}n.delimiterStart!==!1&&!g&&M.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&N==="")&&(n.delimiterStart!==!1||g)&&M.push(" "),n.alignDelimiters!==!1&&M.push(k),M.push(N),n.alignDelimiters!==!1&&M.push(F),n.padding!==!1&&M.push(" "),(n.delimiterEnd!==!1||g!==h-1)&&M.push("|")}R.push(n.delimiterEnd===!1?M.join("").replace(/ +$/,""):M.join(""))}return R.join(`
`)}function dte(t){return t==null?"":String(t)}function c3(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function pte(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(t,i.current()),gte);return s(),a}function gte(t,e,n){return">"+(n?"":" ")+t}function mte(t,e){return u3(t,e.inConstruct,!0)&&!u3(t,e.notInConstruct,!1)}function u3(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function f3(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&mte(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function yte(t,e){const n=String(t);let r=n.indexOf(e),s=r,i=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>a&&(a=i):i=1,s=r+e.length,r=n.indexOf(e,s);return a}function bte(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function _te(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xte(t,e,n,r){const s=_te(n),i=t.value||"",a=s==="`"?"GraveAccent":"Tilde";if(bte(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(i,vte);return g(),b}const l=n.createTracker(r),u=s.repeat(Math.max(yte(i,s)+1,3)),h=n.enter("codeFenced");let d=l.move(u);if(t.lang){const g=n.enter(`codeFencedLang${a}`);d+=l.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...l.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...l.current()})),g()}return d+=l.move(`
`),i&&(d+=l.move(i+`
`)),d+=l.move(u),h(),d}function vte(t,e,n){return(n?"":"    ")+t}function O0(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function wte(t,e,n,r){const s=O0(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("[");return h+=u.move(n.safe(n.associationId(t),{before:h,after:"]",...u.current()})),h+=u.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+s),h+=u.move(n.safe(t.title,{before:h,after:s,...u.current()})),h+=u.move(s),l()),a(),h}function Ste(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Kf(t){return"&#x"+t.toString(16).toUpperCase()+";"}function og(t,e,n){const r=$c(t),s=$c(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}VI.peek=Tte;function VI(t,e,n,r){const s=Ste(n),i=n.enter("emphasis"),a=n.createTracker(r),l=a.move(s);let u=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const h=u.charCodeAt(0),d=og(r.before.charCodeAt(r.before.length-1),h,s);d.inside&&(u=Kf(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=og(r.after.charCodeAt(0),g,s);b.inside&&(u=u.slice(0,-1)+Kf(g));const w=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},l+u+w}function Tte(t,e,n){return n.options.emphasis||"*"}function Ete(t,e){let n=!1;return M0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Jx}),!!((!t.depth||t.depth<3)&&T0(t)&&(e.options.setext||n))}function Ate(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(Ete(t,n)){const d=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return g(),d(),b+`
`+(s===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),u=n.enter("phrasing");i.move(a+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=Kf(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,n.options.closeAtx&&(h+=" "+a),u(),l(),h}$I.peek=Rte;function $I(t){return t.value||""}function Rte(){return"<"}HI.peek=Cte;function HI(t,e,n,r){const s=O0(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("![");return h+=u.move(n.safe(t.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":")",...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+s),h+=u.move(n.safe(t.title,{before:h,after:s,...u.current()})),h+=u.move(s),l()),h+=u.move(")"),a(),h}function Cte(){return"!"}WI.peek=kte;function WI(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const h=n.safe(t.alt,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=d,i(),s==="full"||!h||h!==g?u+=l.move(g+"]"):s==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function kte(){return"!"}qI.peek=Nte;function qI(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const a=n.unsafe[i],l=n.compilePattern(a);let u;if(a.atBreak)for(;u=l.exec(r);){let h=u.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(u.index+1)}}return s+r+s}function Nte(){return"`"}function XI(t,e){const n=T0(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}YI.peek=Mte;function YI(t,e,n,r){const s=O0(n),i=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,u;if(XI(t,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let g=a.move("<");return g+=a.move(n.containerPhrasing(t,{before:g,after:">",...a.current()})),g+=a.move(">"),l(),n.stack=d,g}l=n.enter("link"),u=n.enter("label");let h=a.move("[");return h+=a.move(n.containerPhrasing(t,{before:h,after:"](",...a.current()})),h+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(n.safe(t.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(u=n.enter("destinationRaw"),h+=a.move(n.safe(t.url,{before:h,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${i}`),h+=a.move(" "+s),h+=a.move(n.safe(t.title,{before:h,after:s,...a.current()})),h+=a.move(s),u()),h+=a.move(")"),l(),h}function Mte(t,e,n){return XI(t,n)?"<":"["}KI.peek=Ite;function KI(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const h=n.containerPhrasing(t,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=d,i(),s==="full"||!h||h!==g?u+=l.move(g+"]"):s==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function Ite(){return"["}function P0(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Ote(t){const e=P0(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Pte(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ZI(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Dte(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=t.ordered?Pte(n):P0(n);const l=t.ordered?a==="."?")":".":Ote(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),ZI(n)===a&&d){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=l),n.bulletCurrent=a;const h=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),h}function Fte(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function jte(t,e,n,r){const s=Fte(n);let i=n.bulletCurrent||P0(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let a=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(a-i.length)),l.shift(a);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,l.current()),d);return u(),h;function d(g,b,w){return b?(w?"":" ".repeat(a))+g:(w?i:i+" ".repeat(a-i.length))+g}}function Bte(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(t,r);return i(),s(),a}const Ute=Xg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Lte(t,e,n,r){return(t.children.some(function(a){return Ute(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function zte(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}QI.peek=Vte;function QI(t,e,n,r){const s=zte(n),i=n.enter("strong"),a=n.createTracker(r),l=a.move(s+s);let u=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const h=u.charCodeAt(0),d=og(r.before.charCodeAt(r.before.length-1),h,s);d.inside&&(u=Kf(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=og(r.after.charCodeAt(0),g,s);b.inside&&(u=u.slice(0,-1)+Kf(g));const w=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},l+u+w}function Vte(t,e,n){return n.options.strong||"*"}function $te(t,e,n,r){return n.safe(t.value,r)}function Hte(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Wte(t,e,n){const r=(ZI(n)+(n.options.ruleSpaces?" ":"")).repeat(Hte(n));return n.options.ruleSpaces?r.slice(0,-1):r}const GI={blockquote:pte,break:f3,code:xte,definition:wte,emphasis:VI,hardBreak:f3,heading:Ate,html:$I,image:HI,imageReference:WI,inlineCode:qI,link:YI,linkReference:KI,list:Dte,listItem:jte,paragraph:Bte,root:Lte,strong:QI,text:$te,thematicBreak:Wte};function qte(){return{enter:{table:Xte,tableData:h3,tableHeader:h3,tableRow:Kte},exit:{codeText:Zte,table:Yte,tableData:__,tableHeader:__,tableRow:__}}}function Xte(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Yte(t){this.exit(t),this.data.inTable=void 0}function Kte(t){this.enter({type:"tableRow",children:[]},t)}function __(t){this.exit(t)}function h3(t){this.enter({type:"tableCell",children:[]},t)}function Zte(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Qte));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Qte(t,e){return e==="|"?e:t}function Gte(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:a,tableCell:u,tableRow:l}};function a(w,R,A,C){return h(d(w,A,C),w.align)}function l(w,R,A,C){const M=g(w,A,C),N=h([M]);return N.slice(0,N.indexOf(`
`))}function u(w,R,A,C){const M=A.enter("tableCell"),N=A.enter("phrasing"),k=A.containerPhrasing(w,{...C,before:i,after:i});return N(),M(),k}function h(w,R){return hte(w,{align:R,alignDelimiters:r,padding:n,stringLength:s})}function d(w,R,A){const C=w.children;let M=-1;const N=[],k=R.enter("table");for(;++M<C.length;)N[M]=g(C[M],R,A);return k(),N}function g(w,R,A){const C=w.children;let M=-1;const N=[],k=R.enter("tableRow");for(;++M<C.length;)N[M]=u(C[M],w,R,A);return k(),N}function b(w,R,A){let C=GI.inlineCode(w,R,A);return A.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function Jte(){return{exit:{taskListCheckValueChecked:d3,taskListCheckValueUnchecked:d3,paragraph:tne}}}function ene(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:nne}}}function d3(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function tne(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,a;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function nne(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(a);let u=GI.listItem(t,e,n,{...r,...l.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(d){return d+a}}function rne(){return[Dee(),nte(),ote(),qte(),Jte()]}function sne(t){return{extensions:[Fee(),rte(t),ate(),Gte(t),ene()]}}const ine={tokenize:fne,partial:!0},JI={tokenize:hne,partial:!0},eO={tokenize:dne,partial:!0},tO={tokenize:pne,partial:!0},one={tokenize:gne,partial:!0},nO={name:"wwwAutolink",tokenize:cne,previous:sO},rO={name:"protocolAutolink",tokenize:une,previous:iO},Xi={name:"emailAutolink",tokenize:lne,previous:oO},_i={};function ane(){return{text:_i}}let Aa=48;for(;Aa<123;)_i[Aa]=Xi,Aa++,Aa===58?Aa=65:Aa===91&&(Aa=97);_i[43]=Xi;_i[45]=Xi;_i[46]=Xi;_i[95]=Xi;_i[72]=[Xi,rO];_i[104]=[Xi,rO];_i[87]=[Xi,nO];_i[119]=[Xi,nO];function lne(t,e,n){const r=this;let s,i;return a;function a(g){return!rv(g)||!oO.call(r,r.previous)||D0(r.events)?n(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(g))}function l(g){return rv(g)?(t.consume(g),l):g===64?(t.consume(g),u):n(g)}function u(g){return g===46?t.check(one,d,h)(g):g===45||g===95||Er(g)?(i=!0,t.consume(g),u):d(g)}function h(g){return t.consume(g),s=!0,u}function d(g){return i&&s&&Fr(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(g)):n(g)}}function cne(t,e,n){const r=this;return s;function s(a){return a!==87&&a!==119||!sO.call(r,r.previous)||D0(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(ine,t.attempt(JI,t.attempt(eO,i),n),n)(a))}function i(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function une(t,e,n){const r=this;let s="",i=!1;return a;function a(g){return(g===72||g===104)&&iO.call(r,r.previous)&&!D0(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(g),t.consume(g),l):n(g)}function l(g){if(Fr(g)&&s.length<5)return s+=String.fromCodePoint(g),t.consume(g),l;if(g===58){const b=s.toLowerCase();if(b==="http"||b==="https")return t.consume(g),u}return n(g)}function u(g){return g===47?(t.consume(g),i?h:(i=!0,u)):n(g)}function h(g){return g===null||rg(g)||gn(g)||el(g)||Hg(g)?n(g):t.attempt(JI,t.attempt(eO,d),n)(g)}function d(g){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(g)}}function fne(t,e,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),s):a===46&&r===3?(t.consume(a),i):n(a)}function i(a){return a===null?n(a):e(a)}}function hne(t,e,n){let r,s,i;return a;function a(h){return h===46||h===95?t.check(tO,u,l)(h):h===null||gn(h)||el(h)||h!==45&&Hg(h)?u(h):(i=!0,t.consume(h),a)}function l(h){return h===95?r=!0:(s=r,r=void 0),t.consume(h),a}function u(h){return s||r||!i?n(h):e(h)}}function dne(t,e){let n=0,r=0;return s;function s(a){return a===40?(n++,t.consume(a),s):a===41&&r<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(tO,e,i)(a):a===null||gn(a)||el(a)?e(a):(t.consume(a),s)}function i(a){return a===41&&r++,t.consume(a),s}}function pne(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),i):l===93?(t.consume(l),s):l===60||l===null||gn(l)||el(l)?e(l):n(l)}function s(l){return l===null||l===40||l===91||gn(l)||el(l)?e(l):r(l)}function i(l){return Fr(l)?a(l):n(l)}function a(l){return l===59?(t.consume(l),r):Fr(l)?(t.consume(l),a):n(l)}}function gne(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return Er(i)?n(i):e(i)}}function sO(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||gn(t)}function iO(t){return!Fr(t)}function oO(t){return!(t===47||rv(t))}function rv(t){return t===43||t===45||t===46||t===95||Er(t)}function D0(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const mne={tokenize:Tne,partial:!0};function yne(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:vne,continuation:{tokenize:wne},exit:Sne}},text:{91:{name:"gfmFootnoteCall",tokenize:xne},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:bne,resolveTo:_ne}}}}function bne(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const u=r.events[s][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!a||!a._balanced)return n(u);const h=Ws(r.sliceSerialize({start:a.end,end:r.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?n(u):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),e(u))}}function _ne(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function xne(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,a;return l;function l(g){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),u}function u(g){return g!==94?n(g):(t.enter("gfmFootnoteCallMarker"),t.consume(g),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(g){if(i>999||g===93&&!a||g===null||g===91||gn(g))return n(g);if(g===93){t.exit("chunkString");const b=t.exit("gfmFootnoteCallString");return s.includes(Ws(r.sliceSerialize(b)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(g)}return gn(g)||(a=!0),i++,t.consume(g),g===92?d:h}function d(g){return g===91||g===92||g===93?(t.consume(g),i++,h):h(g)}}function vne(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0,l;return u;function u(R){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(R){return R===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(R)}function d(R){if(a>999||R===93&&!l||R===null||R===91||gn(R))return n(R);if(R===93){t.exit("chunkString");const A=t.exit("gfmFootnoteDefinitionLabelString");return i=Ws(r.sliceSerialize(A)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),b}return gn(R)||(l=!0),a++,t.consume(R),R===92?g:d}function g(R){return R===91||R===92||R===93?(t.consume(R),a++,d):d(R)}function b(R){return R===58?(t.enter("definitionMarker"),t.consume(R),t.exit("definitionMarker"),s.includes(i)||s.push(i),jt(t,w,"gfmFootnoteDefinitionWhitespace")):n(R)}function w(R){return e(R)}}function wne(t,e,n){return t.check(fh,e,t.attempt(mne,e,n))}function Sne(t){t.exit("gfmFootnoteDefinition")}function Tne(t,e,n){const r=this;return jt(t,s,"gfmFootnoteDefinitionIndent",5);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(i):n(i)}}function Ene(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,l){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let h=u;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[u][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[u][1].end)},g={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[u][1].start)},b=[["enter",d,l],["enter",a[h][1],l],["exit",a[h][1],l],["enter",g,l]],w=l.parser.constructs.insideSpan.null;w&&fs(b,b.length,0,Wg(w,a.slice(h+1,u),l)),fs(b,b.length,0,[["exit",g,l],["enter",a[u][1],l],["exit",a[u][1],l],["exit",d,l]]),fs(a,h-1,u-h+3,b),u=h+b.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function i(a,l,u){const h=this.previous,d=this.events;let g=0;return b;function b(R){return h===126&&d[d.length-1][1].type!=="characterEscape"?u(R):(a.enter("strikethroughSequenceTemporary"),w(R))}function w(R){const A=$c(h);if(R===126)return g>1?u(R):(a.consume(R),g++,w);if(g<2&&!n)return u(R);const C=a.exit("strikethroughSequenceTemporary"),M=$c(R);return C._open=!M||M===2&&!!A,C._close=!A||A===2&&!!M,l(R)}}}class Ane{constructor(){this.map=[]}add(e,n,r){Rne(this,e,n,r)}consume(e){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const i of s)e.push(i);s=r.pop()}this.map.length=0}}function Rne(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function Cne(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function kne(){return{flow:{null:{name:"table",tokenize:Nne,resolveAll:Mne}}}}function Nne(t,e,n){const r=this;let s=0,i=0,a;return l;function l(K){let Q=r.events.length-1;for(;Q>-1;){const oe=r.events[Q][1].type;if(oe==="lineEnding"||oe==="linePrefix")Q--;else break}const ie=Q>-1?r.events[Q][1].type:null,xe=ie==="tableHead"||ie==="tableRow"?P:u;return xe===P&&r.parser.lazy[r.now().line]?n(K):xe(K)}function u(K){return t.enter("tableHead"),t.enter("tableRow"),h(K)}function h(K){return K===124||(a=!0,i+=1),d(K)}function d(K){return K===null?n(K):ht(K)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),w):n(K):It(K)?jt(t,d,"whitespace")(K):(i+=1,a&&(a=!1,s+=1),K===124?(t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),a=!0,d):(t.enter("data"),g(K)))}function g(K){return K===null||K===124||gn(K)?(t.exit("data"),d(K)):(t.consume(K),K===92?b:g)}function b(K){return K===92||K===124?(t.consume(K),g):g(K)}function w(K){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(K):(t.enter("tableDelimiterRow"),a=!1,It(K)?jt(t,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):R(K))}function R(K){return K===45||K===58?C(K):K===124?(a=!0,t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),A):B(K)}function A(K){return It(K)?jt(t,C,"whitespace")(K):C(K)}function C(K){return K===58?(i+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(K),t.exit("tableDelimiterMarker"),M):K===45?(i+=1,M(K)):K===null||ht(K)?F(K):B(K)}function M(K){return K===45?(t.enter("tableDelimiterFiller"),N(K)):B(K)}function N(K){return K===45?(t.consume(K),N):K===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(K),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(K))}function k(K){return It(K)?jt(t,F,"whitespace")(K):F(K)}function F(K){return K===124?R(K):K===null||ht(K)?!a||s!==i?B(K):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(K)):B(K)}function B(K){return n(K)}function P(K){return t.enter("tableRow"),X(K)}function X(K){return K===124?(t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),X):K===null||ht(K)?(t.exit("tableRow"),e(K)):It(K)?jt(t,X,"whitespace")(K):(t.enter("data"),Y(K))}function Y(K){return K===null||K===124||gn(K)?(t.exit("data"),X(K)):(t.consume(K),K===92?G:Y)}function G(K){return K===92||K===124?(t.consume(K),Y):Y(K)}}function Mne(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],a=[0,0,0,0],l=!1,u=0,h,d,g;const b=new Ane;for(;++n<t.length;){const w=t[n],R=w[1];w[0]==="enter"?R.type==="tableHead"?(l=!1,u!==0&&(p3(b,e,u,h,d),d=void 0,u=0),h={type:"table",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",h,e]])):R.type==="tableRow"||R.type==="tableDelimiterRow"?(r=!0,g=void 0,i=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",d,e]])),s=R.type==="tableDelimiterRow"?2:d?3:1):s&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],g=ep(b,e,i,s,void 0,g),i=[0,0,0,0]),a[2]=n)):R.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(a[0]=a[1],g=ep(b,e,i,s,void 0,g)),i=a,a=[i[1],n,0,0])):R.type==="tableHead"?(l=!0,u=n):R.type==="tableRow"||R.type==="tableDelimiterRow"?(u=n,i[1]!==0?(a[0]=a[1],g=ep(b,e,i,s,n,g)):a[1]!==0&&(g=ep(b,e,a,s,n,g)),s=0):s&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&p3(b,e,u,h,d),b.consume(e.events),n=-1;++n<e.events.length;){const w=e.events[n];w[0]==="enter"&&w[1].type==="table"&&(w[1]._align=Cne(e.events,n))}return t}function ep(t,e,n,r,s,i){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},sc(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const u=sc(e.events,n[1]);if(i={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const h=sc(e.events,n[2]),d=sc(e.events,n[3]),g={type:l,start:Object.assign({},h),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",g,e]]),r!==2){const b=e.events[n[2]],w=e.events[n[3]];if(b[1].end=Object.assign({},w[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const R=n[2]+1,A=n[3]-n[2]-1;t.add(R,A,[])}}t.add(n[3]+1,0,[["exit",g,e]])}return s!==void 0&&(i.end=Object.assign({},sc(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function p3(t,e,n,r,s){const i=[],a=sc(e.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,e])),r.end=Object.assign({},a),i.push(["exit",r,e]),t.add(n+1,0,i)}function sc(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Ine={name:"tasklistCheck",tokenize:Pne};function One(){return{text:{91:Ine}}}function Pne(t,e,n){const r=this;return s;function s(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),i)}function i(u){return gn(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(u)}function l(u){return ht(u)?e(u):It(u)?t.check({tokenize:Dne},e,n)(u):n(u)}}function Dne(t,e,n){return jt(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function Fne(t){return yI([ane(),yne(),Ene(t),kne(),One()])}const jne={};function Bne(t){const e=this,n=t||jne,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(Fne(n)),i.push(rne()),a.push(sne(n))}const Une=async()=>{const t=await fetch("http://localhost:3333/api/activities");if(!t.ok)throw new Error("Failed to fetch activities");return t.json()},tp=({content:t,fileName:e,activityId:n})=>{const[r,s]=I.useState("rendered"),i=async()=>{try{await navigator.clipboard.writeText(t),rn.success("Copied to clipboard",`${e} content copied successfully`)}catch(l){console.error("Failed to copy to clipboard:",l),rn.error("Copy failed","Unable to copy content to clipboard")}},a=async()=>{try{const l=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:`.cntx/activities/activities/${n}/${e}`})});if(!l.ok){const u=await l.json();throw new Error(u.error||"Failed to open file via API")}rn.success("Opening file in editor...")}catch(l){console.error("Failed to open in editor:",l),rn.error("Could not open file",l.message)}};return y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-border pb-2",children:[y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsxs(Tt,{variant:r==="rendered"?"secondary":"ghost",size:"sm",onClick:()=>s("rendered"),className:"h-6 px-2 text-xs",children:[y.jsx(TR,{className:"w-3 h-3 mr-1"}),"Rendered"]}),y.jsxs(Tt,{variant:r==="raw"?"secondary":"ghost",size:"sm",onClick:()=>s("raw"),className:"h-6 px-2 text-xs",children:[y.jsx(bv,{className:"w-3 h-3 mr-1"}),"Raw"]})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx(Tt,{variant:"ghost",size:"sm",onClick:i,className:"h-6 px-2 text-xs",title:"Copy to clipboard",children:y.jsx(Ff,{className:"w-3 h-3"})}),y.jsx(Tt,{variant:"ghost",size:"sm",onClick:a,className:"h-6 px-2 text-xs",title:"Open in editor",children:y.jsx(Eg,{className:"w-3 h-3"})})]})]}),y.jsx("div",{className:"overflow-auto max-h-80",children:r==="rendered"?y.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:y.jsx(Eee,{remarkPlugins:[Bne],components:{h1:({children:l})=>y.jsx("h1",{className:"text-lg font-semibold mb-3 mt-4 first:mt-0",children:l}),h2:({children:l})=>y.jsx("h2",{className:"text-base font-semibold mb-2 mt-3",children:l}),h3:({children:l})=>y.jsx("h3",{className:"text-sm font-semibold mb-2 mt-3",children:l}),p:({children:l})=>y.jsx("p",{className:"text-sm mb-2 leading-relaxed",children:l}),ul:({children:l})=>y.jsx("ul",{className:"text-sm space-y-1 mb-3 ml-4",children:l}),ol:({children:l})=>y.jsx("ol",{className:"text-sm space-y-1 mb-3 ml-4",children:l}),li:({children:l})=>y.jsx("li",{className:"text-sm",children:l}),code:({children:l})=>y.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs font-mono",children:l}),pre:({children:l})=>y.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs font-mono overflow-x-auto mb-3",children:l}),blockquote:({children:l})=>y.jsx("blockquote",{className:"border-l-2 border-muted-foreground/20 pl-3 italic text-muted-foreground text-sm mb-3",children:l}),table:({children:l})=>y.jsx("table",{className:"text-xs border-collapse border border-border mb-3 w-full",children:l}),th:({children:l})=>y.jsx("th",{className:"border border-border px-2 py-1 bg-muted font-semibold text-left",children:l}),td:({children:l})=>y.jsx("td",{className:"border border-border px-2 py-1",children:l}),input:({type:l,checked:u,...h})=>l==="checkbox"?y.jsx("input",{type:"checkbox",checked:u,disabled:!0,className:"mr-2 scale-75",...h}):y.jsx("input",{...h})},children:t})}):y.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono bg-muted/50 p-3 rounded border",children:t})})]})};function Lne(){const[t,e]=I.useState(null),{data:n=[],isLoading:r,error:s,refetch:i}=Es({queryKey:["activities"],queryFn:Une,refetchInterval:3e4}),a=u=>{switch(u){case"completed":return y.jsx(Na,{className:"h-3 w-3"});case"in_progress":return y.jsx(L_,{className:"h-3 w-3"});case"failed":return y.jsx(Ho,{className:"h-3 w-3"});default:return y.jsx(L_,{className:"h-3 w-3"})}},l=u=>y.jsx(nn,{variant:"outline",className:"text-xs py-0",children:u.replace("_"," ")});return r?y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),y.jsx(di,{className:"h-4 w-4 animate-spin"})]}),y.jsx("div",{className:"space-y-2",children:[1,2,3].map(u=>y.jsx(Ut,{className:"animate-pulse",children:y.jsxs(Kt,{className:"p-3",children:[y.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-2"}),y.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})},u))})]}):s?y.jsxs("div",{className:"space-y-3",children:[y.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),y.jsx(Ut,{children:y.jsx(Kt,{className:"p-4",children:y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx(Ho,{className:"h-6 w-6 mx-auto"}),y.jsx("p",{className:"text-sm font-medium",children:"Failed to load activities"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running and activities are configured."}),y.jsxs(Tt,{onClick:()=>i(),variant:"outline",size:"sm",children:[y.jsx(di,{className:"h-3 w-3 mr-1"}),"Retry"]})]})})})]}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("h2",{className:"text-lg font-medium flex items-center gap-2",children:[y.jsx(vR,{className:"h-4 w-4"}),"Activities (",n.length,")"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Agent task definitions and progress"})]}),y.jsxs(Tt,{onClick:()=>i(),variant:"ghost",size:"sm",children:[y.jsx(di,{className:"h-3 w-3 mr-1"}),"Refresh"]})]}),n.length===0?y.jsx(Ut,{children:y.jsx(Kt,{className:"p-6",children:y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx(jf,{className:"h-8 w-8 mx-auto text-muted-foreground"}),y.jsx("h3",{className:"text-sm font-medium",children:"No activities found"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities will appear here once they are defined in your .cntx/activities directory."})]})})}):y.jsx("div",{className:"space-y-2",children:n.map(u=>y.jsxs(Ut,{className:"overflow-hidden",children:[y.jsx(Fn,{className:"pb-2 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>e(t===u.id?null:u.id),children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[t===u.id?y.jsx(Tg,{className:"h-3 w-3"}):y.jsx(wR,{className:"h-3 w-3"}),a(u.status),y.jsx("div",{children:y.jsx(Xn,{className:"text-sm",children:u.name})})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[l(u.status),u.progress!==void 0&&u.progress>0&&y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(qx,{value:u.progress,className:"w-16 h-2"}),y.jsxs(nn,{variant:"secondary",className:"text-xs py-0",children:[u.progress,"%"]})]}),u.tags&&u.tags.map(h=>y.jsx(nn,{variant:"outline",className:"text-xs py-0",children:h},h))]})]})}),t===u.id&&y.jsx(Kt,{className:"pt-0 pb-2",children:y.jsxs(nl,{defaultValue:"readme",className:"w-full",children:[y.jsxs(rl,{className:"grid w-full bg-card grid-cols-4 h-8 space-x-2",children:[y.jsx(Dn,{value:"readme",className:"text-xs border-accent-muted",children:"README"}),y.jsx(Dn,{value:"progress",className:"text-xs border-accent-muted",children:"Progress"}),y.jsx(Dn,{value:"tasks",className:"text-xs border-accent-muted",children:"Tasks"}),y.jsx(Dn,{value:"notes",className:"text-xs border-accent-muted",children:"Notes"})]}),y.jsx(Wn,{value:"readme",className:"mt-2 mb-0",children:y.jsx(tp,{content:u.files.readme,fileName:"README.md",activityId:u.id})}),y.jsxs(Wn,{value:"progress",className:"mt-2 mb-0",children:[u.progress>0&&y.jsxs("div",{className:"mb-4 p-3 bg-muted/50 rounded-md",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),y.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.progress,"%"]})]}),y.jsx(qx,{value:u.progress,className:"w-full h-3"})]}),y.jsx(tp,{content:u.files.progress,fileName:"progress.md",activityId:u.id})]}),y.jsx(Wn,{value:"tasks",className:"mt-2 mb-0",children:y.jsx(tp,{content:u.files.tasks,fileName:"tasks.md",activityId:u.id})}),y.jsx(Wn,{value:"notes",className:"mt-2 mb-0",children:y.jsx(tp,{content:u.files.notes,fileName:"notes.md",activityId:u.id})})]})})]},u.id))})]})}var zne="Label",aO=I.forwardRef((t,e)=>y.jsx(Pt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aO.displayName=zne;var Vne=aO;function g3({className:t,...e}){return y.jsx(Vne,{"data-slot":"label",className:Qt("flex items-center gap-2 text-sm leading-none font-thin select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const $ne=async()=>{const t=await fetch("http://localhost:3333/api/config");if(!t.ok)throw new Error("Failed to fetch config");return t.json()},Hne=async t=>{const e=await fetch("http://localhost:3333/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to save config");return e.json()};function Wne(){const t=qc(),[e,n]=I.useState("code"),[r,s]=I.useState(""),{data:i,isLoading:a}=Es({queryKey:["config"],queryFn:$ne});I.useEffect(()=>{i!=null&&i.editor&&(["code","subl","system"].includes(i.editor)?n(i.editor):(n("custom"),s(i.editor)))},[i]);const l=_p({mutationFn:Hne,onSuccess:()=>{t.invalidateQueries({queryKey:["config"]}),rn.success("Editor preference saved")},onError:h=>{rn.error(`Failed to save: ${h.message}`)}}),u=()=>{const d={...i,editor:e==="custom"?r:e};l.mutate(d)};return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(CR,{className:"w-4 h-4"}),"Editor Preference"]})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(g3,{htmlFor:"editor-select",children:"Select your preferred editor"}),y.jsxs(Ra,{value:e,onValueChange:n,children:[y.jsx(Io,{id:"editor-select",children:y.jsx(Ca,{placeholder:"Select an editor"})}),y.jsxs(Oo,{children:[y.jsx(pr,{value:"code",children:"Visual Studio Code"}),y.jsx(pr,{value:"subl",children:"Sublime Text"}),y.jsx(pr,{value:"system",children:"System Default"}),y.jsx(pr,{value:"custom",children:"Custom"})]})]})]}),e==="custom"&&y.jsxs("div",{className:"space-y-2",children:[y.jsx(g3,{htmlFor:"custom-editor-input",children:"Custom editor command"}),y.jsx(Mk,{id:"custom-editor-input",value:r,onChange:h=>s(h.target.value),placeholder:"e.g., atom -w"})]}),y.jsx("div",{className:"flex justify-end",children:y.jsxs(Tt,{onClick:u,disabled:l.isPending,size:"sm",className:"h-7 text-xs",children:[y.jsx(xp,{className:"w-3 h-3 mr-1"}),l.isPending?"Saving...":"Save"]})})]})]})}const qne=async t=>{const e=await fetch(`http://localhost:3333/api/${t}`);if(!e.ok)throw new Error(`Failed to fetch ${t} file`);return e.text()},Xne=async({endpoint:t,content:e})=>{const n=await fetch(`http://localhost:3333/api/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(!n.ok)throw new Error(`Failed to save ${t} file`);return n.json()};function m3({fileType:t,endpoint:e,filePath:n}){const r=qc(),[s,i]=I.useState(""),[a,l]=I.useState(!1),{data:u,isLoading:h}=Es({queryKey:[t],queryFn:()=>qne(e)});I.useEffect(()=>{u!==void 0&&(i(u),l(!1))},[u]);const d=_p({mutationFn:Xne,onSuccess:()=>{r.invalidateQueries({queryKey:[t]}),l(!1),rn.success(`${t} file saved`)},onError:C=>rn.error(`Failed to save: ${C.message}`)}),g=C=>{i(C),l(C!==u)},b=()=>{d.mutate({endpoint:e,content:s})},w=()=>{i(u||""),l(!1)},R=async()=>{try{await navigator.clipboard.writeText(s),rn.success("Copied to clipboard")}catch(C){console.error("Failed to copy to clipboard:",C),rn.error("Copy failed")}},A=async()=>{try{const C=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});if(!C.ok){const M=await C.json();throw new Error(M.error||"Failed to open file")}rn.success(`Opening ${t} in editor...`)}catch(C){console.error("Failed to open in editor:",C),rn.error(`Could not open file: ${C.message}`)}};return y.jsxs(Ut,{children:[y.jsxs(Fn,{className:"flex flex-row items-center justify-between",children:[y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(jf,{className:"w-4 h-4"}),t]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(Tt,{variant:"ghost",size:"sm",onClick:R,className:"h-7 px-2",children:y.jsx(Ff,{className:"w-3 h-3"})}),y.jsx(Tt,{variant:"ghost",size:"sm",onClick:A,className:"h-7 px-2",children:y.jsx(Eg,{className:"w-3 h-3"})}),a&&y.jsxs(Tt,{variant:"outline",size:"sm",onClick:w,className:"h-7 text-xs",children:[y.jsx(VF,{className:"w-3 h-3 mr-1"}),"Reset"]}),y.jsxs(Tt,{onClick:b,disabled:!a||d.isPending,size:"sm",className:"h-7 text-xs",children:[y.jsx(xp,{className:"w-3 h-3 mr-1"}),d.isPending?"Saving...":"Save"]})]})]}),y.jsx(Kt,{className:"space-y-4",children:h?y.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["Loading ",t," file..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Rp,{value:s,onChange:C=>g(C.target.value),placeholder:`# Add ignore patterns for ${t}, one per line`,className:"min-h-[300px] font-mono text-xs"}),y.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.split(`
`).filter(C=>C.trim()&&!C.trim().startsWith("#")).length," active patterns"]})]})})]})}function Yne(){return y.jsxs("div",{className:"space-y-6",children:[y.jsxs(nl,{defaultValue:"cntxignore",children:[y.jsxs(rl,{children:[y.jsx(Dn,{value:"cntxignore",children:".cntxignore"}),y.jsx(Dn,{value:"gitignore",children:".gitignore"})]}),y.jsx(Wn,{value:"cntxignore",children:y.jsx(m3,{fileType:".cntxignore",endpoint:"cntxignore",filePath:".cntxignore"})}),y.jsx(Wn,{value:"gitignore",children:y.jsx(m3,{fileType:".gitignore",endpoint:"gitignore",filePath:".gitignore"})})]}),y.jsx(Ut,{children:y.jsx(Kt,{className:"pt-6",children:y.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[y.jsx("div",{children:y.jsx("strong",{children:"Common patterns:"})}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"node_modules/**"})," - Ignore all node_modules"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"*.log"})," - Ignore log files"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"src/debug/**"})," - Ignore debug directory"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"**/*.test.*"})," - Ignore test files"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:".git/**"})," - Ignore git directory"]})]})})})]})}function Kne(){return y.jsxs(nl,{defaultValue:"ignore",children:[y.jsxs(rl,{children:[y.jsx(Dn,{value:"ignore",children:"File Ignore Patterns"}),y.jsx(Dn,{value:"editor",children:"Editor Preference"})]}),y.jsx(Wn,{value:"ignore",children:y.jsx(Yne,{})}),y.jsx(Wn,{value:"editor",children:y.jsx(Wne,{})})]})}function Zne(){return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(bv,{className:"w-4 h-4"}),"Context Management for React Developers"]})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsxs(Lf,{className:"border-accent",children:[y.jsx(Ag,{className:"w-4 h-4"}),y.jsxs(zf,{children:[y.jsx("strong",{children:"Target Audience:"})," React developers who want AI context management as trivial to run as a linter."]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-thin mb-2",children:"What This Tool Does"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[y.jsx("div",{children:" Creates focused code bundles for AI consumption (not copy-paste chaos)"}),y.jsx("div",{children:" Provides function-level semantic chunking with surgical precision"}),y.jsx("div",{children:" Acts as MCP server so AI agents access your codebase through APIs"}),y.jsx("div",{children:" Automatically organizes code by bundle membership and complexity"})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-thin mb-2",children:"Quick Start"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[y.jsxs("div",{children:["1. ",y.jsx("strong",{children:"MCP Setup:"})," ",y.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"})]}),y.jsxs("div",{children:["2. ",y.jsx("strong",{children:"Create Bundles:"})," Use Bundle Config tab to organize your code"]}),y.jsxs("div",{children:["3. ",y.jsx("strong",{children:"AI Access:"})," Claude/Cursor connects via MCP automatically"]}),y.jsxs("div",{children:["4. ",y.jsx("strong",{children:"Semantic Analysis:"})," View function-level chunks in Semantic Chunks tab"]})]})]})]})]})]})}function Qne(){return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(AR,{className:"w-4 h-4"}),"Function-Level Semantic Chunking"]})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-thin mb-2",children:"Why Function-Level Chunks Matter"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Surgical precision:"})," AI gets exactly the function it needs, not entire files"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Context inclusion:"})," Each chunk includes necessary imports and types"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Bundle inheritance:"})," Functions automatically grouped by bundle membership"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Complexity analysis:"})," Identify refactoring candidates with complexity scoring"]})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-thin mb-2",children:"Filtering & Organization"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[y.jsxs("div",{children:[" ",y.jsx("strong",{children:"By Bundle:"})," See all frontend vs server functions"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"By Type:"})," React components, hooks, arrow functions, methods"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"By Complexity:"})," Find high-complexity functions needing refactoring"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"By Purpose:"})," API handlers, validation, data processing"]})]})]}),y.jsx("div",{className:"p-3 rounded border border-accent",children:y.jsxs("div",{className:"text-xs",children:[y.jsx("strong",{children:" Pro Tip:"})," Large functions that don't fit in chunks signal refactoring opportunities. The tool nudges better code practices rather than working around bad ones."]})})]})]})}function Gne(){return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(RF,{className:"w-4 h-4"}),"MCP Server Integration"]})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Agents Access Your Code"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Gated access:"})," AI doesn't dump entire codebase, uses API navigation"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Bundle-first approach:"})," AI sees organized bundles before master bundle"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Real-time updates:"})," Changes immediately available to connected AI"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Function-level precision:"})," AI can request specific functions via semantic chunks"]})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-thin mb-2",children:"Available MCP Tools"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[y.jsxs("div",{children:[" ",y.jsx("code",{children:"list_bundles"})," - Show available bundle organization"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"get_bundle"})," - Retrieve focused code bundles"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"get_semantic_chunks"})," - Access function-level chunks"]}),y.jsxs("div",{children:[" ",y.jsx("code",{children:"get_file_tree"})," - Navigate project structure"]})]})]}),y.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:y.jsxs("div",{className:"text-xs",children:[y.jsx("strong",{children:" Setup:"})," Run ",y.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"}),"and your AI tools (Claude Desktop, Cursor) will automatically connect."]})})]})]})}function Jne(){return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(NF,{className:"w-4 h-4"}),"AI-Assisted Context Management"]})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Navigates Your Code"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Gated access:"})," AI doesn't see master bundle first - uses API navigation"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Function-level precision:"})," Requests specific functions via semantic chunks"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Bundle discovery:"})," Explores organized bundles before diving deep"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Context control:"})," You control what AI sees through bundle organization"]})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-thin mb-2",children:"AI Bundle Creation (Coming Soon)"}),y.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[y.jsxs("div",{children:[" ",y.jsx("strong",{children:'"Find all API stuff":'})," AI analyzes semantic chunks and creates focused bundles"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:'"Group React hooks":'})," Intelligent pattern detection and organization"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:'"Optimize bundles":'})," AI suggests better organization based on code relationships"]}),y.jsxs("div",{children:[" ",y.jsx("strong",{children:"Smart maintenance:"})," AI updates bundles as your code evolves"]})]})]}),y.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:y.jsxs("div",{className:"text-xs",children:[y.jsx("strong",{children:" Philosophy:"})," Context management as trivial as running a linter. AI handles the heavy lifting, you focus on building features."]})})]})]})}function ere(){return y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2 text-sm font-thin",children:[y.jsx(tj,{className:"w-4 h-4"}),"Essential CLI Commands"]})}),y.jsx(Kt,{children:y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-xs font-thin mb-2",children:"Most Used Commands"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui setup-mcp"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Setup MCP for AI tools"})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui watch"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Start server (use web interface)"})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui mcp"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Start MCP server only"})]})]})]}),y.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:y.jsxs("div",{className:"text-xs text-muted-foreground",children:[y.jsx("strong",{children:"Recommendation:"})," Use the web interface for bundle management. CLI is mainly for automation and MCP server startup."]})})]})})]})}function tre(){return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Help & Documentation"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Usage guides and workflow instructions"})]}),y.jsxs(nl,{defaultValue:"usage-guidance",className:"w-full",children:[y.jsxs(rl,{className:"grid w-full grid-cols-5 h-8",children:[y.jsx(Dn,{value:"usage-guidance",className:"text-xs",children:"Usage Guidance"}),y.jsx(Dn,{value:"semantic-features",className:"text-xs",children:"Semantic Features"}),y.jsx(Dn,{value:"mcp-features",className:"text-xs",children:"MCP Features"}),y.jsx(Dn,{value:"ai-workflow",className:"text-xs",children:"AI Workflow"}),y.jsx(Dn,{value:"cli-reference",className:"text-xs",children:"CLI Reference"})]}),y.jsx(Wn,{value:"usage-guidance",className:"mt-2",children:y.jsx(Zne,{})}),y.jsx(Wn,{value:"semantic-features",className:"mt-2",children:y.jsx(Qne,{})}),y.jsx(Wn,{value:"mcp-features",className:"mt-2",children:y.jsx(Gne,{})}),y.jsx(Wn,{value:"ai-workflow",className:"mt-2",children:y.jsx(Jne,{})}),y.jsx(Wn,{value:"cli-reference",className:"mt-2",children:y.jsx(ere,{})})]})]})}function nre(){const[t,e]=I.useState("SELECT name, file_count, size, generated_at FROM bundles ORDER BY name;"),[n,r]=I.useState(null),[s,i]=I.useState(!1),[a,l]=I.useState(null),u=[{name:"All Bundles",sql:"SELECT name, file_count, size, generated_at FROM bundles ORDER BY name;"},{name:"Large Bundles",sql:"SELECT name, file_count, size FROM bundles WHERE file_count > 5 ORDER BY size DESC;"},{name:"Recent Activity",sql:"SELECT name, generated_at FROM bundles WHERE generated_at IS NOT NULL ORDER BY generated_at DESC LIMIT 10;"},{name:"Bundle Statistics",sql:"SELECT COUNT(*) as total_bundles, SUM(file_count) as total_files, SUM(size) as total_size FROM bundles;"}];I.useEffect(()=>{h()},[]);const h=async()=>{try{const w=await(await fetch("/api/database/info")).json();l(w)}catch(b){console.error("Failed to fetch database info:",b),l({error:"Failed to load database info"})}},d=async()=>{if(t.trim()){i(!0);try{const w=await(await fetch("/api/database/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.trim()})})).json();r(w)}catch{r({error:"Failed to execute query"})}finally{i(!1)}}},g=b=>{b.key==="Enter"&&(b.ctrlKey||b.metaKey)&&d()};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsxs(Xn,{className:"flex items-center gap-2",children:[y.jsx(_v,{className:"h-5 w-5"}),"SQLite Database"]})}),y.jsx(Kt,{children:a?y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Bundles:"})," ",a.bundleCount||0]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Size:"})," ",a.sizeFormatted||"Unknown"]}),y.jsxs("div",{className:"col-span-2",children:[y.jsx("span",{className:"font-medium",children:"Path:"}),y.jsx("span",{className:"font-mono text-xs ml-2",children:a.path||"Unknown"})]})]}):y.jsx("div",{className:"text-muted-foreground",children:"Loading database info..."})})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[y.jsx("div",{className:"lg:col-span-2",children:y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsx(Xn,{children:"SQL Query"})}),y.jsxs(Kt,{className:"space-y-4",children:[y.jsx(Rp,{value:t,onChange:b=>e(b.target.value),onKeyDown:g,placeholder:"Enter your SQL query...",className:"font-mono text-sm min-h-[120px]"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"text-xs text-muted-foreground",children:"Press Ctrl/Cmd + Enter to execute"}),y.jsxs(Tt,{onClick:d,disabled:s||!t.trim(),className:"flex items-center gap-2",children:[s?y.jsx(di,{className:"h-4 w-4 animate-spin"}):y.jsx(RR,{className:"h-4 w-4"}),"Execute"]})]})]})]})}),y.jsx("div",{children:y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsx(Xn,{children:"Sample Queries"})}),y.jsx(Kt,{className:"space-y-2",children:u.map((b,w)=>y.jsx(Tt,{variant:"outline",size:"sm",className:"w-full justify-start text-left h-auto p-3",onClick:()=>e(b.sql),children:y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:b.name}),y.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:[b.sql.substring(0,40),"..."]})]})},w))})]})})]}),n&&y.jsxs(Ut,{children:[y.jsx(Fn,{children:y.jsx(Xn,{children:"Results"})}),y.jsx(Kt,{children:n.error?y.jsxs("div",{className:"text-red-500 font-mono text-sm bg-red-50 dark:bg-red-950/20 p-4 rounded",children:["Error: ",n.error]}):n.results?y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs(nn,{variant:"secondary",children:[n.results.length," rows"]})}),n.results.length>0?y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full border-collapse border border-border text-sm",children:[y.jsx("thead",{children:y.jsx("tr",{className:"bg-muted",children:Object.keys(n.results[0]).map(b=>y.jsx("th",{className:"border border-border p-2 text-left font-medium",children:b},b))})}),y.jsx("tbody",{children:n.results.map((b,w)=>y.jsx("tr",{className:"hover:bg-muted/50",children:Object.values(b).map((R,A)=>y.jsx("td",{className:"border border-border p-2 font-mono text-xs",children:R===null?y.jsx("span",{className:"text-muted-foreground italic",children:"null"}):typeof R=="string"&&R.length>50?y.jsxs("span",{title:R,children:[R.substring(0,47),"..."]}):String(R)},A))},w))})]})}):y.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Query executed successfully, but returned no results."})]}):null})]})]})}const rre=new z3,sre=[{id:"bundles",label:"Bundles & Files",icon:B_},{id:"semantic",label:"Semantic Chunks",icon:QF},{id:"vector-db",label:"Vector Database",icon:SR},{id:"database",label:"SQLite Database",icon:_v},{id:"activities",label:"Activities",icon:vR},{id:"settings",label:"Settings",icon:CR},{id:"ai-rules",label:"AI Rules",icon:z_},{id:"system-status",label:"System Status",icon:Na},{id:"help",label:"Help & Documentation",icon:cF}],lO="cntx-ui-preferences",ire=()=>{try{const t=localStorage.getItem(lO);if(t)return{...y3,...JSON.parse(t)}}catch(t){console.warn("Failed to load preferences from localStorage:",t)}return y3},ore=t=>{try{localStorage.setItem(lO,JSON.stringify(t))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}},y3={sidebarCollapsed:!1,activeSection:"bundles"};function are(){const[t,e]=I.useState("connecting"),[n,r]=I.useState("unknown"),[s,i]=I.useState(ire),{sidebarCollapsed:a,activeSection:l}=s,u=b=>{const w={...s,...b};i(w),ore(w)},h=b=>{u({sidebarCollapsed:b})},d=b=>{u({activeSection:b})};I.useEffect(()=>{const b=new WebSocket("ws://localhost:3333");b.onopen=()=>e("connected"),b.onclose=()=>e("disconnected");const w=async()=>{try{const A=await fetch("/api/mcp-status");if(A.ok){const{running:C}=await A.json();r(C?"running":"stopped")}else r("stopped")}catch{r("stopped")}};w();const R=setInterval(w,1e4);return()=>{b.close(),clearInterval(R)}},[]);const g=()=>{switch(l){case"bundles":return y.jsx("div",{className:"flex-1 min-h-0 flex",children:y.jsx("main",{className:"flex-1 min-h-0 flex flex-col",children:y.jsx(ZL,{})})});case"semantic":return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Semantic Chunks"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"AI-powered code organization and intelligent bundles"})]}),y.jsx(d8,{})]});case"vector-db":return y.jsx("div",{className:"space-y-6",children:y.jsx(aZ,{})});case"database":return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"SQLite Database"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Query and inspect the bundle database"})]}),y.jsx(nre,{})]});case"activities":return y.jsx(Lne,{});case"settings":return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Settings"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure file visibility and bundle patterns"})]}),y.jsx(Kne,{})]});case"ai-rules":return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"AI Rules"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure AI context and project guidelines"})]}),y.jsx(n8,{})]});case"system-status":return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"System Status"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Overall health and configuration of cntx-ui"})]}),y.jsx(o8,{})]});case"help":return y.jsx(tre,{});default:return null}};return y.jsx(H3,{client:rre,children:y.jsxs("div",{className:"h-screen bg-background overflow-hidden flex flex-col",children:[a&&y.jsxs("div",{className:"h-16 border-b flex items-center px-4 flex-shrink-0",children:[y.jsx("div",{className:"flex items-center gap-4 flex-1",children:y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs("div",{children:[y.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]})})}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),y.jsx(w2,{})]})]}),y.jsxs("div",{className:"flex flex-1",style:{height:a?"calc(100vh - 4rem)":"100%"},children:[y.jsxs("div",{className:`${a?"w-16":"w-64"} border-r flex flex-col h-full transition-all duration-200`,children:[!a&&y.jsx("div",{className:"p-4 border-b flex-shrink-0",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),y.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]}),y.jsx(Tt,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:y.jsx(zs,{className:"w-3 h-3"})})]})}),a&&y.jsx("div",{className:"p-3 border-b flex-shrink-0 flex justify-center",children:y.jsx(Tt,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"h-8 w-8 p-0",children:y.jsx(FF,{className:"w-4 h-4"})})}),y.jsx("nav",{className:`${a?"p-2":"p-4"} space-y-1 flex-1 overflow-y-auto`,children:sre.map(b=>{const w=b.icon,R=l===b.id;return y.jsxs(Tt,{variant:R?"secondary":"ghost",className:`${a?"w-12 h-12 p-0 justify-center":"w-full justify-start h-8 text-xs font-thin"} transition-all`,onClick:()=>d(b.id),title:a?b.label:void 0,children:[y.jsx(w,{className:`${a?"w-4 h-4":"w-3 h-3 mr-2"}`}),!a&&b.label]},b.id)})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto pb-12",children:y.jsx("main",{className:"p-6 max-w-6xl",children:g()})})]}),y.jsxs("div",{className:"fixed left-0 right-0 h-10 bg-card border-t border-border px-4 flex items-center justify-between z-40 bottom-0",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${t==="connected"?"bg-[color:var(--color-success)]":t==="connecting"?"bg-[color:var(--color-warning)]":"bg-destructive"}`}),y.jsxs("span",{className:"text-xs font-thin",children:["UI: ",t==="connected"?"Live":t==="connecting"?"Connecting":"Offline"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${n==="running"?"bg-[color:var(--color-success)]":n==="stopped"?"bg-destructive":"bg-muted-foreground"}`}),y.jsxs("span",{className:"text-xs font-thin",children:["MCP SERVER: ",n==="running"?"Running":n==="stopped"?"Stopped":"Unknown"]})]})]}),!a&&y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),y.jsx(w2,{})]})]})]})})}const lre=new z3;S4.createRoot(document.getElementById("root")).render(y.jsx(I.StrictMode,{children:y.jsx(H3,{client:lre,children:y.jsxs(o6,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[y.jsx(are,{}),y.jsx(Kj,{})]})})}));
