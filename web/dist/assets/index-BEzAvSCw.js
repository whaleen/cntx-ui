var t4=Object.defineProperty;var t2=t=>{throw TypeError(t)};var n4=(t,e,n)=>e in t?t4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>n4(t,typeof e!="symbol"?e+"":e,n),Vy=(t,e,n)=>e.has(t)||t2("Cannot "+n);var te=(t,e,n)=>(Vy(t,e,"read from private field"),n?n.call(t):e.get(t)),at=(t,e,n)=>e.has(t)?t2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(Vy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),vt=(t,e,n)=>(Vy(t,e,"access private method"),n);var pd=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return te(t,e,r)}});function r4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $y={exports:{}},qu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function i4(){if(n2)return qu;n2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return qu.Fragment=e,qu.jsx=n,qu.jsxs=n,qu}var r2;function s4(){return r2||(r2=1,$y.exports=i4()),$y.exports}var v=s4(),Hy={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function o4(){if(i2)return wt;i2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function C(O,Ee,Ae){this.props=O,this.context=Ee,this.refs=A,this.updater=Ae||S}C.prototype.isReactComponent={},C.prototype.setState=function(O,Ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Ee,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=C.prototype;function P(O,Ee,Ae){this.props=O,this.context=Ee,this.refs=A,this.updater=Ae||S}var M=P.prototype=new k;M.constructor=P,R(M,C.prototype),M.isPureReactComponent=!0;var z=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function Z(O,Ee,Ae,B,Ce,ge){return Ae=ge.ref,{$$typeof:t,type:O,key:Ee,ref:Ae!==void 0?Ae:null,props:ge}}function Q(O,Ee){return Z(O.type,Ee,void 0,void 0,void 0,O.props)}function ue(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function Y(O){var Ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Ae){return Ee[Ae]})}var K=/\/+/g;function ie(O,Ee){return typeof O=="object"&&O!==null&&O.key!=null?Y(""+O.key):Ee.toString(36)}function _e(){}function re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(_e,_e):(O.status="pending",O.then(function(Ee){O.status==="pending"&&(O.status="fulfilled",O.value=Ee)},function(Ee){O.status==="pending"&&(O.status="rejected",O.reason=Ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Te(O,Ee,Ae,B,Ce){var ge=typeof O;(ge==="undefined"||ge==="boolean")&&(O=null);var Oe=!1;if(O===null)Oe=!0;else switch(ge){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(O.$$typeof){case t:case e:Oe=!0;break;case d:return Oe=O._init,Te(Oe(O._payload),Ee,Ae,B,Ce)}}if(Oe)return Ce=Ce(O),Oe=B===""?"."+ie(O,0):B,z(Ce)?(Ae="",Oe!=null&&(Ae=Oe.replace(K,"$&/")+"/"),Te(Ce,Ee,Ae,"",function(tt){return tt})):Ce!=null&&(ue(Ce)&&(Ce=Q(Ce,Ae+(Ce.key==null||O&&O.key===Ce.key?"":(""+Ce.key).replace(K,"$&/")+"/")+Oe)),Ee.push(Ce)),1;Oe=0;var ke=B===""?".":B+":";if(z(O))for(var je=0;je<O.length;je++)B=O[je],ge=ke+ie(B,je),Oe+=Te(B,Ee,Ae,ge,Ce);else if(je=b(O),typeof je=="function")for(O=je.call(O),je=0;!(B=O.next()).done;)B=B.value,ge=ke+ie(B,je++),Oe+=Te(B,Ee,Ae,ge,Ce);else if(ge==="object"){if(typeof O.then=="function")return Te(re(O),Ee,Ae,B,Ce);throw Ee=String(O),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ne(O,Ee,Ae){if(O==null)return O;var B=[],Ce=0;return Te(O,B,"","",function(ge){return Ee.call(Ae,ge,Ce++)}),B}function Se(O){if(O._status===-1){var Ee=O._result;Ee=Ee(),Ee.then(function(Ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=Ae)},function(Ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=Ae)}),O._status===-1&&(O._status=0,O._result=Ee)}if(O._status===1)return O._result.default;throw O._result}var pe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Xe(){}return wt.Children={map:ne,forEach:function(O,Ee,Ae){ne(O,function(){Ee.apply(this,arguments)},Ae)},count:function(O){var Ee=0;return ne(O,function(){Ee++}),Ee},toArray:function(O){return ne(O,function(Ee){return Ee})||[]},only:function(O){if(!ue(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},wt.Component=C,wt.Fragment=n,wt.Profiler=i,wt.PureComponent=P,wt.StrictMode=r,wt.Suspense=u,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,wt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return $.H.useMemoCache(O)}},wt.cache=function(O){return function(){return O.apply(null,arguments)}},wt.cloneElement=function(O,Ee,Ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var B=R({},O.props),Ce=O.key,ge=void 0;if(Ee!=null)for(Oe in Ee.ref!==void 0&&(ge=void 0),Ee.key!==void 0&&(Ce=""+Ee.key),Ee)!F.call(Ee,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&Ee.ref===void 0||(B[Oe]=Ee[Oe]);var Oe=arguments.length-2;if(Oe===1)B.children=Ae;else if(1<Oe){for(var ke=Array(Oe),je=0;je<Oe;je++)ke[je]=arguments[je+2];B.children=ke}return Z(O.type,Ce,void 0,void 0,ge,B)},wt.createContext=function(O){return O={$$typeof:a,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:s,_context:O},O},wt.createElement=function(O,Ee,Ae){var B,Ce={},ge=null;if(Ee!=null)for(B in Ee.key!==void 0&&(ge=""+Ee.key),Ee)F.call(Ee,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(Ce[B]=Ee[B]);var Oe=arguments.length-2;if(Oe===1)Ce.children=Ae;else if(1<Oe){for(var ke=Array(Oe),je=0;je<Oe;je++)ke[je]=arguments[je+2];Ce.children=ke}if(O&&O.defaultProps)for(B in Oe=O.defaultProps,Oe)Ce[B]===void 0&&(Ce[B]=Oe[B]);return Z(O,ge,void 0,void 0,null,Ce)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(O){return{$$typeof:c,render:O}},wt.isValidElement=ue,wt.lazy=function(O){return{$$typeof:d,_payload:{_status:-1,_result:O},_init:Se}},wt.memo=function(O,Ee){return{$$typeof:h,type:O,compare:Ee===void 0?null:Ee}},wt.startTransition=function(O){var Ee=$.T,Ae={};$.T=Ae;try{var B=O(),Ce=$.S;Ce!==null&&Ce(Ae,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Xe,pe)}catch(ge){pe(ge)}finally{$.T=Ee}},wt.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},wt.use=function(O){return $.H.use(O)},wt.useActionState=function(O,Ee,Ae){return $.H.useActionState(O,Ee,Ae)},wt.useCallback=function(O,Ee){return $.H.useCallback(O,Ee)},wt.useContext=function(O){return $.H.useContext(O)},wt.useDebugValue=function(){},wt.useDeferredValue=function(O,Ee){return $.H.useDeferredValue(O,Ee)},wt.useEffect=function(O,Ee,Ae){var B=$.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(O,Ee)},wt.useId=function(){return $.H.useId()},wt.useImperativeHandle=function(O,Ee,Ae){return $.H.useImperativeHandle(O,Ee,Ae)},wt.useInsertionEffect=function(O,Ee){return $.H.useInsertionEffect(O,Ee)},wt.useLayoutEffect=function(O,Ee){return $.H.useLayoutEffect(O,Ee)},wt.useMemo=function(O,Ee){return $.H.useMemo(O,Ee)},wt.useOptimistic=function(O,Ee){return $.H.useOptimistic(O,Ee)},wt.useReducer=function(O,Ee,Ae){return $.H.useReducer(O,Ee,Ae)},wt.useRef=function(O){return $.H.useRef(O)},wt.useState=function(O){return $.H.useState(O)},wt.useSyncExternalStore=function(O,Ee,Ae){return $.H.useSyncExternalStore(O,Ee,Ae)},wt.useTransition=function(){return $.H.useTransition()},wt.version="19.1.0",wt}var s2;function q0(){return s2||(s2=1,Hy.exports=o4()),Hy.exports}var I=q0();const So=Hf(I),X0=r4({__proto__:null,default:So},[I]);var Wy={exports:{}},Xu={},qy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function a4(){return o2||(o2=1,function(t){function e(ne,Se){var pe=ne.length;ne.push(Se);e:for(;0<pe;){var Xe=pe-1>>>1,O=ne[Xe];if(0<i(O,Se))ne[Xe]=Se,ne[pe]=O,pe=Xe;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Se=ne[0],pe=ne.pop();if(pe!==Se){ne[0]=pe;e:for(var Xe=0,O=ne.length,Ee=O>>>1;Xe<Ee;){var Ae=2*(Xe+1)-1,B=ne[Ae],Ce=Ae+1,ge=ne[Ce];if(0>i(B,pe))Ce<O&&0>i(ge,B)?(ne[Xe]=ge,ne[Ce]=pe,Xe=Ce):(ne[Xe]=B,ne[Ae]=pe,Xe=Ae);else if(Ce<O&&0>i(ge,pe))ne[Xe]=ge,ne[Ce]=pe,Xe=Ce;else break e}}return Se}function i(ne,Se){var pe=ne.sortIndex-Se.sortIndex;return pe!==0?pe:ne.id-Se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],h=[],d=1,g=null,b=3,S=!1,R=!1,A=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function z(ne){for(var Se=n(h);Se!==null;){if(Se.callback===null)r(h);else if(Se.startTime<=ne)r(h),Se.sortIndex=Se.expirationTime,e(u,Se);else break;Se=n(h)}}function $(ne){if(A=!1,z(ne),!R)if(n(u)!==null)R=!0,F||(F=!0,ie());else{var Se=n(h);Se!==null&&Te($,Se.startTime-ne)}}var F=!1,Z=-1,Q=5,ue=-1;function Y(){return C?!0:!(t.unstable_now()-ue<Q)}function K(){if(C=!1,F){var ne=t.unstable_now();ue=ne;var Se=!0;try{e:{R=!1,A&&(A=!1,P(Z),Z=-1),S=!0;var pe=b;try{t:{for(z(ne),g=n(u);g!==null&&!(g.expirationTime>ne&&Y());){var Xe=g.callback;if(typeof Xe=="function"){g.callback=null,b=g.priorityLevel;var O=Xe(g.expirationTime<=ne);if(ne=t.unstable_now(),typeof O=="function"){g.callback=O,z(ne),Se=!0;break t}g===n(u)&&r(u),z(ne)}else r(u);g=n(u)}if(g!==null)Se=!0;else{var Ee=n(h);Ee!==null&&Te($,Ee.startTime-ne),Se=!1}}break e}finally{g=null,b=pe,S=!1}Se=void 0}}finally{Se?ie():F=!1}}}var ie;if(typeof M=="function")ie=function(){M(K)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,re=_e.port2;_e.port1.onmessage=K,ie=function(){re.postMessage(null)}}else ie=function(){k(K,0)};function Te(ne,Se){Z=k(function(){ne(t.unstable_now())},Se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(ne){switch(b){case 1:case 2:case 3:var Se=3;break;default:Se=b}var pe=b;b=Se;try{return ne()}finally{b=pe}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(ne,Se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var pe=b;b=ne;try{return Se()}finally{b=pe}},t.unstable_scheduleCallback=function(ne,Se,pe){var Xe=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Xe+pe:Xe):pe=Xe,ne){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=pe+O,ne={id:d++,callback:Se,priorityLevel:ne,startTime:pe,expirationTime:O,sortIndex:-1},pe>Xe?(ne.sortIndex=pe,e(h,ne),n(u)===null&&ne===n(h)&&(A?(P(Z),Z=-1):A=!0,Te($,pe-Xe))):(ne.sortIndex=O,e(u,ne),R||S||(R=!0,F||(F=!0,ie()))),ne},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(ne){var Se=b;return function(){var pe=b;b=Se;try{return ne.apply(this,arguments)}finally{b=pe}}}}(Xy)),Xy}var a2;function l4(){return a2||(a2=1,qy.exports=a4()),qy.exports}var Yy={exports:{}},br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function c4(){if(l2)return br;l2=1;var t=q0();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:d}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,br.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(u,h,null,d)},br.flushSync=function(u){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=h,r.p=d,r.d.f()}},br.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},br.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},br.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,g=c(d,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:S}):d==="script"&&r.d.X(u,{crossOrigin:g,integrity:b,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},br.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},br.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=c(d,h.crossOrigin);r.d.L(u,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},br.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},br.requestFormReset=function(u){r.d.r(u)},br.unstable_batchedUpdates=function(u,h){return u(h)},br.useFormState=function(u,h,d){return a.H.useFormState(u,h,d)},br.useFormStatus=function(){return a.H.useHostTransitionStatus()},br.version="19.1.0",br}var c2;function _A(){if(c2)return Yy.exports;c2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yy.exports=c4(),Yy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2;function u4(){if(u2)return Xu;u2=1;var t=l4(),e=q0(),n=_A();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(r(188))}function u(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var f=o,p=l;;){var y=f.return;if(y===null)break;var T=y.alternate;if(T===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===f)return c(y),o;if(T===p)return c(y),l;T=T.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=T;else{for(var N=!1,L=y.child;L;){if(L===f){N=!0,f=y,p=T;break}if(L===p){N=!0,p=y,f=T;break}L=L.sibling}if(!N){for(L=T.child;L;){if(L===f){N=!0,f=T,p=y;break}if(L===p){N=!0,p=T,f=y;break}L=L.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function ie(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var _e=Symbol.for("react.client.reference");function re(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===_e?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case R:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case F:return"SuspenseList";case ue:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case M:return(o.displayName||"Context")+".Provider";case P:return(o._context.displayName||"Context")+".Consumer";case z:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Z:return l=o.displayName||null,l!==null?l:re(o.type)||"Memo";case Q:l=o._payload,o=o._init;try{return re(o(l))}catch{}}return null}var Te=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Xe=[],O=-1;function Ee(o){return{current:o}}function Ae(o){0>O||(o.current=Xe[O],Xe[O]=null,O--)}function B(o,l){O++,Xe[O]=o.current,o.current=l}var Ce=Ee(null),ge=Ee(null),Oe=Ee(null),ke=Ee(null);function je(o,l){switch(B(Oe,l),B(ge,o),B(Ce,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?kS(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=kS(l),o=MS(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Ae(Ce),B(Ce,o)}function tt(){Ae(Ce),Ae(ge),Ae(Oe)}function Ze(o){o.memoizedState!==null&&B(ke,o);var l=Ce.current,f=MS(l,o.type);l!==f&&(B(ge,o),B(Ce,f))}function it(o){ge.current===o&&(Ae(Ce),Ae(ge)),ke.current===o&&(Ae(ke),zu._currentValue=pe)}var ct=Object.prototype.hasOwnProperty,bt=t.unstable_scheduleCallback,qt=t.unstable_cancelCallback,In=t.unstable_shouldYield,ar=t.unstable_requestPaint,bn=t.unstable_now,Sn=t.unstable_getCurrentPriorityLevel,ln=t.unstable_ImmediatePriority,ys=t.unstable_UserBlockingPriority,lr=t.unstable_NormalPriority,gr=t.unstable_LowPriority,Xi=t.unstable_IdlePriority,Yi=t.log,Qc=t.unstable_setDisableYieldValue,Me=null,Le=null;function lt(o){if(typeof Yi=="function"&&Qc(o),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Me,o)}catch{}}var ht=Math.clz32?Math.clz32:Ri,zt=Math.log,Ar=Math.LN2;function Ri(o){return o>>>=0,o===0?32:31-(zt(o)/Ar|0)|0}var mr=256,qr=4194304;function Rr(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Bn(o,l,f){var p=o.pendingLanes;if(p===0)return 0;var y=0,T=o.suspendedLanes,N=o.pingedLanes;o=o.warmLanes;var L=p&134217727;return L!==0?(p=L&~T,p!==0?y=Rr(p):(N&=L,N!==0?y=Rr(N):f||(f=L&~o,f!==0&&(y=Rr(f))))):(L=p&~T,L!==0?y=Rr(L):N!==0?y=Rr(N):f||(f=p&~o,f!==0&&(y=Rr(f)))),y===0?0:l!==0&&l!==y&&(l&T)===0&&(T=y&-y,f=l&-l,T>=f||T===32&&(f&4194048)!==0)?l:y}function Fr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Xr(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var o=mr;return mr<<=1,(mr&4194048)===0&&(mr=256),o}function Zc(){var o=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),o}function nl(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Ci(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function GI(o,l,f,p,y,T){var N=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var L=o.entanglements,G=o.expirationTimes,be=o.hiddenUpdates;for(f=N&~f;0<f;){var Ie=31-ht(f),De=1<<Ie;L[Ie]=0,G[Ie]=-1;var ve=be[Ie];if(ve!==null)for(be[Ie]=null,Ie=0;Ie<ve.length;Ie++){var we=ve[Ie];we!==null&&(we.lane&=-536870913)}f&=~De}p!==0&&Jo(o,p,0),T!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=T&~(N&~l))}function Jo(o,l,f){o.pendingLanes|=l,o.suspendedLanes&=~l;var p=31-ht(l);o.entangledLanes|=l,o.entanglements[p]=o.entanglements[p]|1073741824|f&4194090}function qn(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var p=31-ht(f),y=1<<p;y&l|o[p]&l&&(o[p]|=l),f&=~y}}function Ws(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function D(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function w(){var o=Se.p;return o!==0?o:(o=window.event,o===void 0?32:KS(o.type))}function _(o,l){var f=Se.p;try{return Se.p=o,l()}finally{Se.p=f}}var m=Math.random().toString(36).slice(2),x="__reactFiber$"+m,E="__reactProps$"+m,j="__reactContainer$"+m,V="__reactEvents$"+m,H="__reactListeners$"+m,q="__reactHandles$"+m,fe="__reactResources$"+m,J="__reactMarker$"+m;function Re(o){delete o[x],delete o[E],delete o[V],delete o[H],delete o[q]}function ze(o){var l=o[x];if(l)return l;for(var f=o.parentNode;f;){if(l=f[j]||f[x]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=PS(o);o!==null;){if(f=o[x])return f;o=PS(o)}return l}o=f,f=o.parentNode}return null}function xe(o){if(o=o[x]||o[j]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Ne(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function qe(o){var l=o[fe];return l||(l=o[fe]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ee(o){o[J]=!0}var Ve=new Set,Ke={};function st(o,l){ut(o,l),ut(o+"Capture",l)}function ut(o,l){for(Ke[o]=l,o=0;o<l.length;o++)Ve.add(l[o])}var pn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nt={},ot={};function Qt(o){return ct.call(ot,o)?!0:ct.call(nt,o)?!1:pn.test(o)?ot[o]=!0:(nt[o]=!0,!1)}function oe(o,l,f){if(Qt(l))if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+f)}}function Be(o,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+f)}}function We(o,l,f,p){if(p===null)o.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(l,f,""+p)}}var Ue,cn;function It(o){if(Ue===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ue=l&&l[1]||"",cn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+o+cn}var Zt=!1;function en(o,l){if(!o||Zt)return"";Zt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var ve=we}Reflect.construct(o,[],De)}else{try{De.call()}catch(we){ve=we}o.call(De.prototype)}}else{try{throw Error()}catch(we){ve=we}(De=o())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=p.DetermineComponentFrameRoot(),N=T[0],L=T[1];if(N&&L){var G=N.split(`
`),be=L.split(`
`);for(y=p=0;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;for(;y<be.length&&!be[y].includes("DetermineComponentFrameRoot");)y++;if(p===G.length||y===be.length)for(p=G.length-1,y=be.length-1;1<=p&&0<=y&&G[p]!==be[y];)y--;for(;1<=p&&0<=y;p--,y--)if(G[p]!==be[y]){if(p!==1||y!==1)do if(p--,y--,0>y||G[p]!==be[y]){var Ie=`
`+G[p].replace(" at new "," at ");return o.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",o.displayName)),Ie}while(1<=p&&0<=y);break}}}finally{Zt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?It(f):""}function Xn(o){switch(o.tag){case 26:case 27:case 5:return It(o.type);case 16:return It("Lazy");case 13:return It("Suspense");case 19:return It("SuspenseList");case 0:case 15:return en(o.type,!1);case 11:return en(o.type.render,!1);case 1:return en(o.type,!0);case 31:return It("Activity");default:return""}}function Br(o){try{var l="";do l+=Xn(o),o=o.return;while(o);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function jt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Yr(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ki(o){var l=Yr(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,T=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(N){p=""+N,T.call(this,N)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(N){p=""+N},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function xt(o){o._valueTracker||(o._valueTracker=ki(o))}function jn(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return o&&(p=Yr(o)?o.checked?"true":"false":o.value),o=p,o!==f?(l.setValue(o),!0):!1}function tr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Cr=/[\n"\\]/g;function Ut(o){return o.replace(Cr,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Gc(o,l,f,p,y,T,N,L){o.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.type=N:o.removeAttribute("type"),l!=null?N==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+jt(l)):o.value!==""+jt(l)&&(o.value=""+jt(l)):N!=="submit"&&N!=="reset"||o.removeAttribute("value"),l!=null?Jc(o,N,jt(l)):f!=null?Jc(o,N,jt(f)):p!=null&&o.removeAttribute("value"),y==null&&T!=null&&(o.defaultChecked=!!T),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.name=""+jt(L):o.removeAttribute("name")}function ih(o,l,f,p,y,T,N,L){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),l!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||l!=null))return;f=f!=null?""+jt(f):"",l=l!=null?""+jt(l):f,L||l===o.value||(o.value=l),o.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=L?o.checked:!!p,o.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.name=N)}function Jc(o,l,f){l==="number"&&tr(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function qs(o,l,f,p){if(o=o.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<o.length;f++)y=l.hasOwnProperty("$"+o[f].value),o[f].selected!==y&&(o[f].selected=y),y&&p&&(o[f].defaultSelected=!0)}else{for(f=""+jt(f),l=null,y=0;y<o.length;y++){if(o[y].value===f){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function sh(o,l,f){if(l!=null&&(l=""+jt(l),l!==o.value&&(o.value=l),f==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=f!=null?""+jt(f):""}function oh(o,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(Te(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=jt(l),o.defaultValue=f,p=o.textContent,p===f&&p!==""&&p!==null&&(o.value=p)}function Xs(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Lg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ah(o,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":p?o.setProperty(l,f):typeof f!="number"||f===0||Lg.has(l)?l==="float"?o.cssFloat=f:o[l]=(""+f).trim():o[l]=f+"px"}function Mx(o,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&f[y]!==p&&ah(o,y,p)}else for(var T in l)l.hasOwnProperty(T)&&ah(o,T,l[T])}function zg(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lh(o){return eO.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Vg=null;function $g(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var rl=null,il=null;function Nx(o){var l=xe(o);if(l&&(o=l.stateNode)){var f=o[E]||null;e:switch(o=l.stateNode,l.type){case"input":if(Gc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ut(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==o&&p.form===o.form){var y=p[E]||null;if(!y)throw Error(r(90));Gc(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===o.form&&jn(p)}break e;case"textarea":sh(o,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&qs(o,!!f.multiple,l,!1)}}}var Hg=!1;function Ix(o,l,f){if(Hg)return o(l,f);Hg=!0;try{var p=o(l);return p}finally{if(Hg=!1,(rl!==null||il!==null)&&(Xh(),rl&&(l=rl,o=il,il=rl=null,Nx(l),o)))for(l=0;l<o.length;l++)Nx(o[l])}}function eu(o,l){var f=o.stateNode;if(f===null)return null;var p=f[E]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=!1;if(bs)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){Wg=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{Wg=!1}var Ys=null,qg=null,ch=null;function Ox(){if(ch)return ch;var o,l=qg,f=l.length,p,y="value"in Ys?Ys.value:Ys.textContent,T=y.length;for(o=0;o<f&&l[o]===y[o];o++);var N=f-o;for(p=1;p<=N&&l[f-p]===y[T-p];p++);return ch=y.slice(o,1<p?1-p:void 0)}function uh(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function fh(){return!0}function Px(){return!1}function jr(o){function l(f,p,y,T,N){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=T,this.target=N,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(f=o[L],this[L]=f?f(T):T[L]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?fh:Px,this.isPropagationStopped=Px,this}return d(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=fh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=fh)},persist:function(){},isPersistent:fh}),l}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=jr(ea),nu=d({},ea,{view:0,detail:0}),tO=jr(nu),Xg,Yg,ru,dh=d({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qg,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ru&&(ru&&o.type==="mousemove"?(Xg=o.screenX-ru.screenX,Yg=o.screenY-ru.screenY):Yg=Xg=0,ru=o),Xg)},movementY:function(o){return"movementY"in o?o.movementY:Yg}}),Dx=jr(dh),nO=d({},dh,{dataTransfer:0}),rO=jr(nO),iO=d({},nu,{relatedTarget:0}),Kg=jr(iO),sO=d({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),oO=jr(sO),aO=d({},ea,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),lO=jr(aO),cO=d({},ea,{data:0}),Fx=jr(cO),uO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dO(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=hO[o])?!!l[o]:!1}function Qg(){return dO}var pO=d({},nu,{key:function(o){if(o.key){var l=uO[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=uh(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?fO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qg,charCode:function(o){return o.type==="keypress"?uh(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?uh(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),gO=jr(pO),mO=d({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bx=jr(mO),yO=d({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qg}),bO=jr(yO),_O=d({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),vO=jr(_O),xO=d({},dh,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),wO=jr(xO),SO=d({},ea,{newState:0,oldState:0}),TO=jr(SO),EO=[9,13,27,32],Zg=bs&&"CompositionEvent"in window,iu=null;bs&&"documentMode"in document&&(iu=document.documentMode);var AO=bs&&"TextEvent"in window&&!iu,jx=bs&&(!Zg||iu&&8<iu&&11>=iu),Ux=" ",Lx=!1;function zx(o,l){switch(o){case"keyup":return EO.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vx(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var sl=!1;function RO(o,l){switch(o){case"compositionend":return Vx(l);case"keypress":return l.which!==32?null:(Lx=!0,Ux);case"textInput":return o=l.data,o===Ux&&Lx?null:o;default:return null}}function CO(o,l){if(sl)return o==="compositionend"||!Zg&&zx(o,l)?(o=Ox(),ch=qg=Ys=null,sl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return jx&&l.locale!=="ko"?null:l.data;default:return null}}var kO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $x(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!kO[o.type]:l==="textarea"}function Hx(o,l,f,p){rl?il?il.push(p):il=[p]:rl=p,l=Jh(l,"onChange"),0<l.length&&(f=new hh("onChange","change",null,f,p),o.push({event:f,listeners:l}))}var su=null,ou=null;function MO(o){TS(o,0)}function ph(o){var l=Ne(o);if(jn(l))return o}function Wx(o,l){if(o==="change")return l}var qx=!1;if(bs){var Gg;if(bs){var Jg="oninput"in document;if(!Jg){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),Jg=typeof Xx.oninput=="function"}Gg=Jg}else Gg=!1;qx=Gg&&(!document.documentMode||9<document.documentMode)}function Yx(){su&&(su.detachEvent("onpropertychange",Kx),ou=su=null)}function Kx(o){if(o.propertyName==="value"&&ph(ou)){var l=[];Hx(l,ou,o,$g(o)),Ix(MO,l)}}function NO(o,l,f){o==="focusin"?(Yx(),su=l,ou=f,su.attachEvent("onpropertychange",Kx)):o==="focusout"&&Yx()}function IO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ph(ou)}function OO(o,l){if(o==="click")return ph(l)}function PO(o,l){if(o==="input"||o==="change")return ph(l)}function DO(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Kr=typeof Object.is=="function"?Object.is:DO;function au(o,l){if(Kr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!ct.call(l,y)||!Kr(o[y],l[y]))return!1}return!0}function Qx(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Zx(o,l){var f=Qx(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=l&&p>=l)return{node:f,offset:l-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Qx(f)}}function Gx(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Gx(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Jx(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=tr(o.document);l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=tr(o.document)}return l}function em(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var FO=bs&&"documentMode"in document&&11>=document.documentMode,ol=null,tm=null,lu=null,nm=!1;function ew(o,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;nm||ol==null||ol!==tr(p)||(p=ol,"selectionStart"in p&&em(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),lu&&au(lu,p)||(lu=p,p=Jh(tm,"onSelect"),0<p.length&&(l=new hh("onSelect","select",null,l,f),o.push({event:l,listeners:p}),l.target=ol)))}function ta(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var al={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},rm={},tw={};bs&&(tw=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function na(o){if(rm[o])return rm[o];if(!al[o])return o;var l=al[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in tw)return rm[o]=l[f];return o}var nw=na("animationend"),rw=na("animationiteration"),iw=na("animationstart"),BO=na("transitionrun"),jO=na("transitionstart"),UO=na("transitioncancel"),sw=na("transitionend"),ow=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function Mi(o,l){ow.set(o,l),st(l,[o])}var aw=new WeakMap;function fi(o,l){if(typeof o=="object"&&o!==null){var f=aw.get(o);return f!==void 0?f:(l={value:o,source:l,stack:Br(l)},aw.set(o,l),l)}return{value:o,source:l,stack:Br(l)}}var hi=[],ll=0,sm=0;function gh(){for(var o=ll,l=sm=ll=0;l<o;){var f=hi[l];hi[l++]=null;var p=hi[l];hi[l++]=null;var y=hi[l];hi[l++]=null;var T=hi[l];if(hi[l++]=null,p!==null&&y!==null){var N=p.pending;N===null?y.next=y:(y.next=N.next,N.next=y),p.pending=y}T!==0&&lw(f,y,T)}}function mh(o,l,f,p){hi[ll++]=o,hi[ll++]=l,hi[ll++]=f,hi[ll++]=p,sm|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function om(o,l,f,p){return mh(o,l,f,p),yh(o)}function cl(o,l){return mh(o,null,null,l),yh(o)}function lw(o,l,f){o.lanes|=f;var p=o.alternate;p!==null&&(p.lanes|=f);for(var y=!1,T=o.return;T!==null;)T.childLanes|=f,p=T.alternate,p!==null&&(p.childLanes|=f),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(y=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,y&&l!==null&&(y=31-ht(f),o=T.hiddenUpdates,p=o[y],p===null?o[y]=[l]:p.push(l),l.lane=f|536870912),T):null}function yh(o){if(50<Ou)throw Ou=0,hy=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var ul={};function LO(o,l,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(o,l,f,p){return new LO(o,l,f,p)}function am(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _s(o,l){var f=o.alternate;return f===null?(f=Qr(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function cw(o,l){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,l=f.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function bh(o,l,f,p,y,T){var N=0;if(p=o,typeof o=="function")am(o)&&(N=1);else if(typeof o=="string")N=VP(o,f,Ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ue:return o=Qr(31,f,l,y),o.elementType=ue,o.lanes=T,o;case R:return ra(f.children,y,T,l);case A:N=8,y|=24;break;case C:return o=Qr(12,f,l,y|2),o.elementType=C,o.lanes=T,o;case $:return o=Qr(13,f,l,y),o.elementType=$,o.lanes=T,o;case F:return o=Qr(19,f,l,y),o.elementType=F,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:case M:N=10;break e;case P:N=9;break e;case z:N=11;break e;case Z:N=14;break e;case Q:N=16,p=null;break e}N=29,f=Error(r(130,o===null?"null":typeof o,"")),p=null}return l=Qr(N,f,l,y),l.elementType=o,l.type=p,l.lanes=T,l}function ra(o,l,f,p){return o=Qr(7,o,p,l),o.lanes=f,o}function lm(o,l,f){return o=Qr(6,o,null,l),o.lanes=f,o}function cm(o,l,f){return l=Qr(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var fl=[],hl=0,_h=null,vh=0,di=[],pi=0,ia=null,vs=1,xs="";function sa(o,l){fl[hl++]=vh,fl[hl++]=_h,_h=o,vh=l}function uw(o,l,f){di[pi++]=vs,di[pi++]=xs,di[pi++]=ia,ia=o;var p=vs;o=xs;var y=32-ht(p)-1;p&=~(1<<y),f+=1;var T=32-ht(l)+y;if(30<T){var N=y-y%5;T=(p&(1<<N)-1).toString(32),p>>=N,y-=N,vs=1<<32-ht(l)+y|f<<y|p,xs=T+o}else vs=1<<T|f<<y|p,xs=o}function um(o){o.return!==null&&(sa(o,1),uw(o,1,0))}function fm(o){for(;o===_h;)_h=fl[--hl],fl[hl]=null,vh=fl[--hl],fl[hl]=null;for(;o===ia;)ia=di[--pi],di[pi]=null,xs=di[--pi],di[pi]=null,vs=di[--pi],di[pi]=null}var kr=null,En=null,Vt=!1,oa=null,Ki=!1,hm=Error(r(519));function aa(o){var l=Error(r(418,""));throw fu(fi(l,o)),hm}function fw(o){var l=o.stateNode,f=o.type,p=o.memoizedProps;switch(l[x]=o,l[E]=p,f){case"dialog":Mt("cancel",l),Mt("close",l);break;case"iframe":case"object":case"embed":Mt("load",l);break;case"video":case"audio":for(f=0;f<Du.length;f++)Mt(Du[f],l);break;case"source":Mt("error",l);break;case"img":case"image":case"link":Mt("error",l),Mt("load",l);break;case"details":Mt("toggle",l);break;case"input":Mt("invalid",l),ih(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),xt(l);break;case"select":Mt("invalid",l);break;case"textarea":Mt("invalid",l),oh(l,p.value,p.defaultValue,p.children),xt(l)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||CS(l.textContent,f)?(p.popover!=null&&(Mt("beforetoggle",l),Mt("toggle",l)),p.onScroll!=null&&Mt("scroll",l),p.onScrollEnd!=null&&Mt("scrollend",l),p.onClick!=null&&(l.onclick=ed),l=!0):l=!1,l||aa(o)}function hw(o){for(kr=o.return;kr;)switch(kr.tag){case 5:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:kr=kr.return}}function cu(o){if(o!==kr)return!1;if(!Vt)return hw(o),Vt=!0,!1;var l=o.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Cy(o.type,o.memoizedProps)),f=!f),f&&En&&aa(o),hw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(l===0){En=Ii(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;o=o.nextSibling}En=null}}else l===27?(l=En,uo(o.type)?(o=Iy,Iy=null,En=o):En=l):En=kr?Ii(o.stateNode.nextSibling):null;return!0}function uu(){En=kr=null,Vt=!1}function dw(){var o=oa;return o!==null&&(zr===null?zr=o:zr.push.apply(zr,o),oa=null),o}function fu(o){oa===null?oa=[o]:oa.push(o)}var dm=Ee(null),la=null,ws=null;function Ks(o,l,f){B(dm,l._currentValue),l._currentValue=f}function Ss(o){o._currentValue=dm.current,Ae(dm)}function pm(o,l,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===f)break;o=o.return}}function gm(o,l,f,p){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var T=y.dependencies;if(T!==null){var N=y.child;T=T.firstContext;e:for(;T!==null;){var L=T;T=y;for(var G=0;G<l.length;G++)if(L.context===l[G]){T.lanes|=f,L=T.alternate,L!==null&&(L.lanes|=f),pm(T.return,f,o),p||(N=null);break e}T=L.next}}else if(y.tag===18){if(N=y.return,N===null)throw Error(r(341));N.lanes|=f,T=N.alternate,T!==null&&(T.lanes|=f),pm(N,f,o),N=null}else N=y.child;if(N!==null)N.return=y;else for(N=y;N!==null;){if(N===o){N=null;break}if(y=N.sibling,y!==null){y.return=N.return,N=y;break}N=N.return}y=N}}function hu(o,l,f,p){o=null;for(var y=l,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var N=y.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var L=y.type;Kr(y.pendingProps.value,N.value)||(o!==null?o.push(L):o=[L])}}else if(y===ke.current){if(N=y.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(zu):o=[zu])}y=y.return}o!==null&&gm(l,o,f,p),l.flags|=262144}function xh(o){for(o=o.firstContext;o!==null;){if(!Kr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ca(o){la=o,ws=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function yr(o){return pw(la,o)}function wh(o,l){return la===null&&ca(o),pw(o,l)}function pw(o,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ws===null){if(o===null)throw Error(r(308));ws=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ws=ws.next=l;return f}var zO=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(f,p){o.push(p)}};this.abort=function(){l.aborted=!0,o.forEach(function(f){return f()})}},VO=t.unstable_scheduleCallback,$O=t.unstable_NormalPriority,Yn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new zO,data:new Map,refCount:0}}function du(o){o.refCount--,o.refCount===0&&VO($O,function(){o.controller.abort()})}var pu=null,ym=0,dl=0,pl=null;function HO(o,l){if(pu===null){var f=pu=[];ym=0,dl=_y(),pl={status:"pending",value:void 0,then:function(p){f.push(p)}}}return ym++,l.then(gw,gw),l}function gw(){if(--ym===0&&pu!==null){pl!==null&&(pl.status="fulfilled");var o=pu;pu=null,dl=0,pl=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function WO(o,l){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return o.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var mw=ne.S;ne.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&HO(o,l),mw!==null&&mw(o,l)};var ua=Ee(null);function bm(){var o=ua.current;return o!==null?o:gn.pooledCache}function Sh(o,l){l===null?B(ua,ua.current):B(ua,l.pool)}function yw(){var o=bm();return o===null?null:{parent:Yn._currentValue,pool:o}}var gu=Error(r(460)),bw=Error(r(474)),Th=Error(r(542)),_m={then:function(){}};function _w(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Eh(){}function vw(o,l,f){switch(f=o[f],f===void 0?o.push(l):f!==l&&(l.then(Eh,Eh),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ww(o),o;default:if(typeof l.status=="string")l.then(Eh,Eh);else{if(o=gn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,ww(o),o}throw mu=l,gu}}var mu=null;function xw(){if(mu===null)throw Error(r(459));var o=mu;return mu=null,o}function ww(o){if(o===gu||o===Th)throw Error(r(483))}var Qs=!1;function vm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Zs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Gs(o,l,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Gt&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=yh(o),lw(o,null,f),l}return mh(o,p,l,f),yh(o)}function yu(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=o.pendingLanes,f|=p,l.lanes=f,qn(o,f)}}function wm(o,l){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?y=T=N:T=T.next=N,f=f.next}while(f!==null);T===null?y=T=l:T=T.next=l}else y=T=l;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:p.shared,callbacks:p.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}var Sm=!1;function bu(){if(Sm){var o=pl;if(o!==null)throw o}}function _u(o,l,f,p){Sm=!1;var y=o.updateQueue;Qs=!1;var T=y.firstBaseUpdate,N=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var G=L,be=G.next;G.next=null,N===null?T=be:N.next=be,N=G;var Ie=o.alternate;Ie!==null&&(Ie=Ie.updateQueue,L=Ie.lastBaseUpdate,L!==N&&(L===null?Ie.firstBaseUpdate=be:L.next=be,Ie.lastBaseUpdate=G))}if(T!==null){var De=y.baseState;N=0,Ie=be=G=null,L=T;do{var ve=L.lane&-536870913,we=ve!==L.lane;if(we?(Dt&ve)===ve:(p&ve)===ve){ve!==0&&ve===dl&&(Sm=!0),Ie!==null&&(Ie=Ie.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var yt=o,dt=L;ve=l;var rn=f;switch(dt.tag){case 1:if(yt=dt.payload,typeof yt=="function"){De=yt.call(rn,De,ve);break e}De=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=dt.payload,ve=typeof yt=="function"?yt.call(rn,De,ve):yt,ve==null)break e;De=d({},De,ve);break e;case 2:Qs=!0}}ve=L.callback,ve!==null&&(o.flags|=64,we&&(o.flags|=8192),we=y.callbacks,we===null?y.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Ie===null?(be=Ie=we,G=De):Ie=Ie.next=we,N|=ve;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;we=L,L=we.next,we.next=null,y.lastBaseUpdate=we,y.shared.pending=null}}while(!0);Ie===null&&(G=De),y.baseState=G,y.firstBaseUpdate=be,y.lastBaseUpdate=Ie,T===null&&(y.shared.lanes=0),oo|=N,o.lanes=N,o.memoizedState=De}}function Sw(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Tw(o,l){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)Sw(f[o],l)}var gl=Ee(null),Ah=Ee(0);function Ew(o,l){o=Ms,B(Ah,o),B(gl,l),Ms=o|l.baseLanes}function Tm(){B(Ah,Ms),B(gl,gl.current)}function Em(){Ms=Ah.current,Ae(gl),Ae(Ah)}var Js=0,Tt=null,tn=null,Un=null,Rh=!1,ml=!1,fa=!1,Ch=0,vu=0,yl=null,qO=0;function On(){throw Error(r(321))}function Am(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Kr(o[f],l[f]))return!1;return!0}function Rm(o,l,f,p,y,T){return Js=T,Tt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ne.H=o===null||o.memoizedState===null?l1:c1,fa=!1,T=f(p,y),fa=!1,ml&&(T=Rw(l,f,p,y)),Aw(o),T}function Aw(o){ne.H=Ph;var l=tn!==null&&tn.next!==null;if(Js=0,Un=tn=Tt=null,Rh=!1,vu=0,yl=null,l)throw Error(r(300));o===null||nr||(o=o.dependencies,o!==null&&xh(o)&&(nr=!0))}function Rw(o,l,f,p){Tt=o;var y=0;do{if(ml&&(yl=null),vu=0,ml=!1,25<=y)throw Error(r(301));if(y+=1,Un=tn=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ne.H=JO,T=l(f,p)}while(ml);return T}function XO(){var o=ne.H,l=o.useState()[0];return l=typeof l.then=="function"?xu(l):l,o=o.useState()[0],(tn!==null?tn.memoizedState:null)!==o&&(Tt.flags|=1024),l}function Cm(){var o=Ch!==0;return Ch=0,o}function km(o,l,f){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~f}function Mm(o){if(Rh){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Rh=!1}Js=0,Un=tn=Tt=null,ml=!1,vu=Ch=0,yl=null}function Ur(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Tt.memoizedState=Un=o:Un=Un.next=o,Un}function Ln(){if(tn===null){var o=Tt.alternate;o=o!==null?o.memoizedState:null}else o=tn.next;var l=Un===null?Tt.memoizedState:Un.next;if(l!==null)Un=l,tn=o;else{if(o===null)throw Tt.alternate===null?Error(r(467)):Error(r(310));tn=o,o={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Un===null?Tt.memoizedState=Un=o:Un=Un.next=o}return Un}function Nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xu(o){var l=vu;return vu+=1,yl===null&&(yl=[]),o=vw(yl,o,l),l=Tt,(Un===null?l.memoizedState:Un.next)===null&&(l=l.alternate,ne.H=l===null||l.memoizedState===null?l1:c1),o}function kh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return xu(o);if(o.$$typeof===M)return yr(o)}throw Error(r(438,String(o)))}function Im(o){var l=null,f=Tt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=Tt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Nm(),Tt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(o),p=0;p<o;p++)f[p]=Y;return l.index++,f}function Ts(o,l){return typeof l=="function"?l(o):l}function Mh(o){var l=Ln();return Om(l,tn,o)}function Om(o,l,f){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=o.baseQueue,T=p.pending;if(T!==null){if(y!==null){var N=y.next;y.next=T.next,T.next=N}l.baseQueue=y=T,p.pending=null}if(T=o.baseState,y===null)o.memoizedState=T;else{l=y.next;var L=N=null,G=null,be=l,Ie=!1;do{var De=be.lane&-536870913;if(De!==be.lane?(Dt&De)===De:(Js&De)===De){var ve=be.revertLane;if(ve===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),De===dl&&(Ie=!0);else if((Js&ve)===ve){be=be.next,ve===dl&&(Ie=!0);continue}else De={lane:0,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},G===null?(L=G=De,N=T):G=G.next=De,Tt.lanes|=ve,oo|=ve;De=be.action,fa&&f(T,De),T=be.hasEagerState?be.eagerState:f(T,De)}else ve={lane:De,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},G===null?(L=G=ve,N=T):G=G.next=ve,Tt.lanes|=De,oo|=De;be=be.next}while(be!==null&&be!==l);if(G===null?N=T:G.next=L,!Kr(T,o.memoizedState)&&(nr=!0,Ie&&(f=pl,f!==null)))throw f;o.memoizedState=T,o.baseState=N,o.baseQueue=G,p.lastRenderedState=T}return y===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function Pm(o){var l=Ln(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var p=f.dispatch,y=f.pending,T=l.memoizedState;if(y!==null){f.pending=null;var N=y=y.next;do T=o(T,N.action),N=N.next;while(N!==y);Kr(T,l.memoizedState)||(nr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),f.lastRenderedState=T}return[T,p]}function Cw(o,l,f){var p=Tt,y=Ln(),T=Vt;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!Kr((tn||y).memoizedState,f);N&&(y.memoizedState=f,nr=!0),y=y.queue;var L=Nw.bind(null,p,y,o);if(wu(2048,8,L,[o]),y.getSnapshot!==l||N||Un!==null&&Un.memoizedState.tag&1){if(p.flags|=2048,bl(9,Nh(),Mw.bind(null,p,y,f,l),null),gn===null)throw Error(r(349));T||(Js&124)!==0||kw(p,l,f)}return f}function kw(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Tt.updateQueue,l===null?(l=Nm(),Tt.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function Mw(o,l,f,p){l.value=f,l.getSnapshot=p,Iw(l)&&Ow(o)}function Nw(o,l,f){return f(function(){Iw(l)&&Ow(o)})}function Iw(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Kr(o,f)}catch{return!0}}function Ow(o){var l=cl(o,2);l!==null&&ti(l,o,2)}function Dm(o){var l=Ur();if(typeof o=="function"){var f=o;if(o=f(),fa){lt(!0);try{f()}finally{lt(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:o},l}function Pw(o,l,f,p){return o.baseState=f,Om(o,tn,typeof p=="function"?p:Ts)}function YO(o,l,f,p,y){if(Oh(o))throw Error(r(485));if(o=l.action,o!==null){var T={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){T.listeners.push(N)}};ne.T!==null?f(!0):T.isTransition=!1,p(T),f=l.pending,f===null?(T.next=l.pending=T,Dw(l,T)):(T.next=f.next,l.pending=f.next=T)}}function Dw(o,l){var f=l.action,p=l.payload,y=o.state;if(l.isTransition){var T=ne.T,N={};ne.T=N;try{var L=f(y,p),G=ne.S;G!==null&&G(N,L),Fw(o,l,L)}catch(be){Fm(o,l,be)}finally{ne.T=T}}else try{T=f(y,p),Fw(o,l,T)}catch(be){Fm(o,l,be)}}function Fw(o,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){Bw(o,l,p)},function(p){return Fm(o,l,p)}):Bw(o,l,f)}function Bw(o,l,f){l.status="fulfilled",l.value=f,jw(l),o.state=f,l=o.pending,l!==null&&(f=l.next,f===l?o.pending=null:(f=f.next,l.next=f,Dw(o,f)))}function Fm(o,l,f){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,jw(l),l=l.next;while(l!==p)}o.action=null}function jw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Uw(o,l){return l}function Lw(o,l){if(Vt){var f=gn.formState;if(f!==null){e:{var p=Tt;if(Vt){if(En){t:{for(var y=En,T=Ki;y.nodeType!==8;){if(!T){y=null;break t}if(y=Ii(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){En=Ii(y.nextSibling),p=y.data==="F!";break e}}aa(p)}p=!1}p&&(l=f[0])}}return f=Ur(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uw,lastRenderedState:l},f.queue=p,f=s1.bind(null,Tt,p),p.dispatch=f,p=Dm(!1),T=zm.bind(null,Tt,!1,p.queue),p=Ur(),y={state:l,dispatch:null,action:o,pending:null},p.queue=y,f=YO.bind(null,Tt,y,T,f),y.dispatch=f,p.memoizedState=o,[l,f,!1]}function zw(o){var l=Ln();return Vw(l,tn,o)}function Vw(o,l,f){if(l=Om(o,l,Uw)[0],o=Mh(Ts)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=xu(l)}catch(N){throw N===gu?Th:N}else p=l;l=Ln();var y=l.queue,T=y.dispatch;return f!==l.memoizedState&&(Tt.flags|=2048,bl(9,Nh(),KO.bind(null,y,f),null)),[p,T,o]}function KO(o,l){o.action=l}function $w(o){var l=Ln(),f=tn;if(f!==null)return Vw(l,f,o);Ln(),l=l.memoizedState,f=Ln();var p=f.queue.dispatch;return f.memoizedState=o,[l,p,!1]}function bl(o,l,f,p){return o={tag:o,create:f,deps:p,inst:l,next:null},l=Tt.updateQueue,l===null&&(l=Nm(),Tt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,l.lastEffect=o),o}function Nh(){return{destroy:void 0,resource:void 0}}function Hw(){return Ln().memoizedState}function Ih(o,l,f,p){var y=Ur();p=p===void 0?null:p,Tt.flags|=o,y.memoizedState=bl(1|l,Nh(),f,p)}function wu(o,l,f,p){var y=Ln();p=p===void 0?null:p;var T=y.memoizedState.inst;tn!==null&&p!==null&&Am(p,tn.memoizedState.deps)?y.memoizedState=bl(l,T,f,p):(Tt.flags|=o,y.memoizedState=bl(1|l,T,f,p))}function Ww(o,l){Ih(8390656,8,o,l)}function qw(o,l){wu(2048,8,o,l)}function Xw(o,l){return wu(4,2,o,l)}function Yw(o,l){return wu(4,4,o,l)}function Kw(o,l){if(typeof l=="function"){o=o();var f=l(o);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Qw(o,l,f){f=f!=null?f.concat([o]):null,wu(4,4,Kw.bind(null,l,o),f)}function Bm(){}function Zw(o,l){var f=Ln();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&Am(l,p[1])?p[0]:(f.memoizedState=[o,l],o)}function Gw(o,l){var f=Ln();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&Am(l,p[1]))return p[0];if(p=o(),fa){lt(!0);try{o()}finally{lt(!1)}}return f.memoizedState=[p,l],p}function jm(o,l,f){return f===void 0||(Js&1073741824)!==0?o.memoizedState=l:(o.memoizedState=f,o=tS(),Tt.lanes|=o,oo|=o,f)}function Jw(o,l,f,p){return Kr(f,l)?f:gl.current!==null?(o=jm(o,f,p),Kr(o,l)||(nr=!0),o):(Js&42)===0?(nr=!0,o.memoizedState=f):(o=tS(),Tt.lanes|=o,oo|=o,l)}function e1(o,l,f,p,y){var T=Se.p;Se.p=T!==0&&8>T?T:8;var N=ne.T,L={};ne.T=L,zm(o,!1,l,f);try{var G=y(),be=ne.S;if(be!==null&&be(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var Ie=WO(G,p);Su(o,l,Ie,ei(o))}else Su(o,l,p,ei(o))}catch(De){Su(o,l,{then:function(){},status:"rejected",reason:De},ei())}finally{Se.p=T,ne.T=N}}function QO(){}function Um(o,l,f,p){if(o.tag!==5)throw Error(r(476));var y=t1(o).queue;e1(o,y,l,pe,f===null?QO:function(){return n1(o),f(p)})}function t1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:pe},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:f},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function n1(o){var l=t1(o).next.queue;Su(o,l,{},ei())}function Lm(){return yr(zu)}function r1(){return Ln().memoizedState}function i1(){return Ln().memoizedState}function ZO(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var f=ei();o=Zs(f);var p=Gs(l,o,f);p!==null&&(ti(p,l,f),yu(p,l,f)),l={cache:mm()},o.payload=l;return}l=l.return}}function GO(o,l,f){var p=ei();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Oh(o)?o1(l,f):(f=om(o,l,f,p),f!==null&&(ti(f,o,p),a1(f,l,p)))}function s1(o,l,f){var p=ei();Su(o,l,f,p)}function Su(o,l,f,p){var y={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Oh(o))o1(l,y);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var N=l.lastRenderedState,L=T(N,f);if(y.hasEagerState=!0,y.eagerState=L,Kr(L,N))return mh(o,l,y,0),gn===null&&gh(),!1}catch{}finally{}if(f=om(o,l,y,p),f!==null)return ti(f,o,p),a1(f,l,p),!0}return!1}function zm(o,l,f,p){if(p={lane:2,revertLane:_y(),action:p,hasEagerState:!1,eagerState:null,next:null},Oh(o)){if(l)throw Error(r(479))}else l=om(o,f,p,2),l!==null&&ti(l,o,2)}function Oh(o){var l=o.alternate;return o===Tt||l!==null&&l===Tt}function o1(o,l){ml=Rh=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function a1(o,l,f){if((f&4194048)!==0){var p=l.lanes;p&=o.pendingLanes,f|=p,l.lanes=f,qn(o,f)}}var Ph={readContext:yr,use:kh,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On},l1={readContext:yr,use:kh,useCallback:function(o,l){return Ur().memoizedState=[o,l===void 0?null:l],o},useContext:yr,useEffect:Ww,useImperativeHandle:function(o,l,f){f=f!=null?f.concat([o]):null,Ih(4194308,4,Kw.bind(null,l,o),f)},useLayoutEffect:function(o,l){return Ih(4194308,4,o,l)},useInsertionEffect:function(o,l){Ih(4,2,o,l)},useMemo:function(o,l){var f=Ur();l=l===void 0?null:l;var p=o();if(fa){lt(!0);try{o()}finally{lt(!1)}}return f.memoizedState=[p,l],p},useReducer:function(o,l,f){var p=Ur();if(f!==void 0){var y=f(l);if(fa){lt(!0);try{f(l)}finally{lt(!1)}}}else y=l;return p.memoizedState=p.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},p.queue=o,o=o.dispatch=GO.bind(null,Tt,o),[p.memoizedState,o]},useRef:function(o){var l=Ur();return o={current:o},l.memoizedState=o},useState:function(o){o=Dm(o);var l=o.queue,f=s1.bind(null,Tt,l);return l.dispatch=f,[o.memoizedState,f]},useDebugValue:Bm,useDeferredValue:function(o,l){var f=Ur();return jm(f,o,l)},useTransition:function(){var o=Dm(!1);return o=e1.bind(null,Tt,o.queue,!0,!1),Ur().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,f){var p=Tt,y=Ur();if(Vt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),gn===null)throw Error(r(349));(Dt&124)!==0||kw(p,l,f)}y.memoizedState=f;var T={value:f,getSnapshot:l};return y.queue=T,Ww(Nw.bind(null,p,T,o),[o]),p.flags|=2048,bl(9,Nh(),Mw.bind(null,p,T,f,l),null),f},useId:function(){var o=Ur(),l=gn.identifierPrefix;if(Vt){var f=xs,p=vs;f=(p&~(1<<32-ht(p)-1)).toString(32)+f,l=""+l+"R"+f,f=Ch++,0<f&&(l+="H"+f.toString(32)),l+=""}else f=qO++,l=""+l+"r"+f.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:Lm,useFormState:Lw,useActionState:Lw,useOptimistic:function(o){var l=Ur();l.memoizedState=l.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=zm.bind(null,Tt,!0,f),f.dispatch=l,[o,l]},useMemoCache:Im,useCacheRefresh:function(){return Ur().memoizedState=ZO.bind(null,Tt)}},c1={readContext:yr,use:kh,useCallback:Zw,useContext:yr,useEffect:qw,useImperativeHandle:Qw,useInsertionEffect:Xw,useLayoutEffect:Yw,useMemo:Gw,useReducer:Mh,useRef:Hw,useState:function(){return Mh(Ts)},useDebugValue:Bm,useDeferredValue:function(o,l){var f=Ln();return Jw(f,tn.memoizedState,o,l)},useTransition:function(){var o=Mh(Ts)[0],l=Ln().memoizedState;return[typeof o=="boolean"?o:xu(o),l]},useSyncExternalStore:Cw,useId:r1,useHostTransitionStatus:Lm,useFormState:zw,useActionState:zw,useOptimistic:function(o,l){var f=Ln();return Pw(f,tn,o,l)},useMemoCache:Im,useCacheRefresh:i1},JO={readContext:yr,use:kh,useCallback:Zw,useContext:yr,useEffect:qw,useImperativeHandle:Qw,useInsertionEffect:Xw,useLayoutEffect:Yw,useMemo:Gw,useReducer:Pm,useRef:Hw,useState:function(){return Pm(Ts)},useDebugValue:Bm,useDeferredValue:function(o,l){var f=Ln();return tn===null?jm(f,o,l):Jw(f,tn.memoizedState,o,l)},useTransition:function(){var o=Pm(Ts)[0],l=Ln().memoizedState;return[typeof o=="boolean"?o:xu(o),l]},useSyncExternalStore:Cw,useId:r1,useHostTransitionStatus:Lm,useFormState:$w,useActionState:$w,useOptimistic:function(o,l){var f=Ln();return tn!==null?Pw(f,tn,o,l):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:Im,useCacheRefresh:i1},_l=null,Tu=0;function Dh(o){var l=Tu;return Tu+=1,_l===null&&(_l=[]),vw(_l,o,l)}function Eu(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Fh(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function u1(o){var l=o._init;return l(o._payload)}function f1(o){function l(he,se){if(o){var ye=he.deletions;ye===null?(he.deletions=[se],he.flags|=16):ye.push(se)}}function f(he,se){if(!o)return null;for(;se!==null;)l(he,se),se=se.sibling;return null}function p(he){for(var se=new Map;he!==null;)he.key!==null?se.set(he.key,he):se.set(he.index,he),he=he.sibling;return se}function y(he,se){return he=_s(he,se),he.index=0,he.sibling=null,he}function T(he,se,ye){return he.index=ye,o?(ye=he.alternate,ye!==null?(ye=ye.index,ye<se?(he.flags|=67108866,se):ye):(he.flags|=67108866,se)):(he.flags|=1048576,se)}function N(he){return o&&he.alternate===null&&(he.flags|=67108866),he}function L(he,se,ye,Pe){return se===null||se.tag!==6?(se=lm(ye,he.mode,Pe),se.return=he,se):(se=y(se,ye),se.return=he,se)}function G(he,se,ye,Pe){var Ge=ye.type;return Ge===R?Ie(he,se,ye.props.children,Pe,ye.key):se!==null&&(se.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Q&&u1(Ge)===se.type)?(se=y(se,ye.props),Eu(se,ye),se.return=he,se):(se=bh(ye.type,ye.key,ye.props,null,he.mode,Pe),Eu(se,ye),se.return=he,se)}function be(he,se,ye,Pe){return se===null||se.tag!==4||se.stateNode.containerInfo!==ye.containerInfo||se.stateNode.implementation!==ye.implementation?(se=cm(ye,he.mode,Pe),se.return=he,se):(se=y(se,ye.children||[]),se.return=he,se)}function Ie(he,se,ye,Pe,Ge){return se===null||se.tag!==7?(se=ra(ye,he.mode,Pe,Ge),se.return=he,se):(se=y(se,ye),se.return=he,se)}function De(he,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=lm(""+se,he.mode,ye),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return ye=bh(se.type,se.key,se.props,null,he.mode,ye),Eu(ye,se),ye.return=he,ye;case S:return se=cm(se,he.mode,ye),se.return=he,se;case Q:var Pe=se._init;return se=Pe(se._payload),De(he,se,ye)}if(Te(se)||ie(se))return se=ra(se,he.mode,ye,null),se.return=he,se;if(typeof se.then=="function")return De(he,Dh(se),ye);if(se.$$typeof===M)return De(he,wh(he,se),ye);Fh(he,se)}return null}function ve(he,se,ye,Pe){var Ge=se!==null?se.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Ge!==null?null:L(he,se,""+ye,Pe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return ye.key===Ge?G(he,se,ye,Pe):null;case S:return ye.key===Ge?be(he,se,ye,Pe):null;case Q:return Ge=ye._init,ye=Ge(ye._payload),ve(he,se,ye,Pe)}if(Te(ye)||ie(ye))return Ge!==null?null:Ie(he,se,ye,Pe,null);if(typeof ye.then=="function")return ve(he,se,Dh(ye),Pe);if(ye.$$typeof===M)return ve(he,se,wh(he,ye),Pe);Fh(he,ye)}return null}function we(he,se,ye,Pe,Ge){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return he=he.get(ye)||null,L(se,he,""+Pe,Ge);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case b:return he=he.get(Pe.key===null?ye:Pe.key)||null,G(se,he,Pe,Ge);case S:return he=he.get(Pe.key===null?ye:Pe.key)||null,be(se,he,Pe,Ge);case Q:var Ct=Pe._init;return Pe=Ct(Pe._payload),we(he,se,ye,Pe,Ge)}if(Te(Pe)||ie(Pe))return he=he.get(ye)||null,Ie(se,he,Pe,Ge,null);if(typeof Pe.then=="function")return we(he,se,ye,Dh(Pe),Ge);if(Pe.$$typeof===M)return we(he,se,ye,wh(se,Pe),Ge);Fh(se,Pe)}return null}function yt(he,se,ye,Pe){for(var Ge=null,Ct=null,rt=se,pt=se=0,ir=null;rt!==null&&pt<ye.length;pt++){rt.index>pt?(ir=rt,rt=null):ir=rt.sibling;var Lt=ve(he,rt,ye[pt],Pe);if(Lt===null){rt===null&&(rt=ir);break}o&&rt&&Lt.alternate===null&&l(he,rt),se=T(Lt,se,pt),Ct===null?Ge=Lt:Ct.sibling=Lt,Ct=Lt,rt=ir}if(pt===ye.length)return f(he,rt),Vt&&sa(he,pt),Ge;if(rt===null){for(;pt<ye.length;pt++)rt=De(he,ye[pt],Pe),rt!==null&&(se=T(rt,se,pt),Ct===null?Ge=rt:Ct.sibling=rt,Ct=rt);return Vt&&sa(he,pt),Ge}for(rt=p(rt);pt<ye.length;pt++)ir=we(rt,he,pt,ye[pt],Pe),ir!==null&&(o&&ir.alternate!==null&&rt.delete(ir.key===null?pt:ir.key),se=T(ir,se,pt),Ct===null?Ge=ir:Ct.sibling=ir,Ct=ir);return o&&rt.forEach(function(mo){return l(he,mo)}),Vt&&sa(he,pt),Ge}function dt(he,se,ye,Pe){if(ye==null)throw Error(r(151));for(var Ge=null,Ct=null,rt=se,pt=se=0,ir=null,Lt=ye.next();rt!==null&&!Lt.done;pt++,Lt=ye.next()){rt.index>pt?(ir=rt,rt=null):ir=rt.sibling;var mo=ve(he,rt,Lt.value,Pe);if(mo===null){rt===null&&(rt=ir);break}o&&rt&&mo.alternate===null&&l(he,rt),se=T(mo,se,pt),Ct===null?Ge=mo:Ct.sibling=mo,Ct=mo,rt=ir}if(Lt.done)return f(he,rt),Vt&&sa(he,pt),Ge;if(rt===null){for(;!Lt.done;pt++,Lt=ye.next())Lt=De(he,Lt.value,Pe),Lt!==null&&(se=T(Lt,se,pt),Ct===null?Ge=Lt:Ct.sibling=Lt,Ct=Lt);return Vt&&sa(he,pt),Ge}for(rt=p(rt);!Lt.done;pt++,Lt=ye.next())Lt=we(rt,he,pt,Lt.value,Pe),Lt!==null&&(o&&Lt.alternate!==null&&rt.delete(Lt.key===null?pt:Lt.key),se=T(Lt,se,pt),Ct===null?Ge=Lt:Ct.sibling=Lt,Ct=Lt);return o&&rt.forEach(function(e4){return l(he,e4)}),Vt&&sa(he,pt),Ge}function rn(he,se,ye,Pe){if(typeof ye=="object"&&ye!==null&&ye.type===R&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:e:{for(var Ge=ye.key;se!==null;){if(se.key===Ge){if(Ge=ye.type,Ge===R){if(se.tag===7){f(he,se.sibling),Pe=y(se,ye.props.children),Pe.return=he,he=Pe;break e}}else if(se.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Q&&u1(Ge)===se.type){f(he,se.sibling),Pe=y(se,ye.props),Eu(Pe,ye),Pe.return=he,he=Pe;break e}f(he,se);break}else l(he,se);se=se.sibling}ye.type===R?(Pe=ra(ye.props.children,he.mode,Pe,ye.key),Pe.return=he,he=Pe):(Pe=bh(ye.type,ye.key,ye.props,null,he.mode,Pe),Eu(Pe,ye),Pe.return=he,he=Pe)}return N(he);case S:e:{for(Ge=ye.key;se!==null;){if(se.key===Ge)if(se.tag===4&&se.stateNode.containerInfo===ye.containerInfo&&se.stateNode.implementation===ye.implementation){f(he,se.sibling),Pe=y(se,ye.children||[]),Pe.return=he,he=Pe;break e}else{f(he,se);break}else l(he,se);se=se.sibling}Pe=cm(ye,he.mode,Pe),Pe.return=he,he=Pe}return N(he);case Q:return Ge=ye._init,ye=Ge(ye._payload),rn(he,se,ye,Pe)}if(Te(ye))return yt(he,se,ye,Pe);if(ie(ye)){if(Ge=ie(ye),typeof Ge!="function")throw Error(r(150));return ye=Ge.call(ye),dt(he,se,ye,Pe)}if(typeof ye.then=="function")return rn(he,se,Dh(ye),Pe);if(ye.$$typeof===M)return rn(he,se,wh(he,ye),Pe);Fh(he,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,se!==null&&se.tag===6?(f(he,se.sibling),Pe=y(se,ye),Pe.return=he,he=Pe):(f(he,se),Pe=lm(ye,he.mode,Pe),Pe.return=he,he=Pe),N(he)):f(he,se)}return function(he,se,ye,Pe){try{Tu=0;var Ge=rn(he,se,ye,Pe);return _l=null,Ge}catch(rt){if(rt===gu||rt===Th)throw rt;var Ct=Qr(29,rt,null,he.mode);return Ct.lanes=Pe,Ct.return=he,Ct}finally{}}}var vl=f1(!0),h1=f1(!1),gi=Ee(null),Qi=null;function eo(o){var l=o.alternate;B(Kn,Kn.current&1),B(gi,o),Qi===null&&(l===null||gl.current!==null||l.memoizedState!==null)&&(Qi=o)}function d1(o){if(o.tag===22){if(B(Kn,Kn.current),B(gi,o),Qi===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Qi=o)}}else to()}function to(){B(Kn,Kn.current),B(gi,gi.current)}function Es(o){Ae(gi),Qi===o&&(Qi=null),Ae(Kn)}var Kn=Ee(0);function Bh(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Ny(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Vm(o,l,f,p){l=o.memoizedState,f=f(p,l),f=f==null?l:d({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var $m={enqueueSetState:function(o,l,f){o=o._reactInternals;var p=ei(),y=Zs(p);y.payload=l,f!=null&&(y.callback=f),l=Gs(o,y,p),l!==null&&(ti(l,o,p),yu(l,o,p))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var p=ei(),y=Zs(p);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=Gs(o,y,p),l!==null&&(ti(l,o,p),yu(l,o,p))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=ei(),p=Zs(f);p.tag=2,l!=null&&(p.callback=l),l=Gs(o,p,f),l!==null&&(ti(l,o,f),yu(l,o,f))}};function p1(o,l,f,p,y,T,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,T,N):l.prototype&&l.prototype.isPureReactComponent?!au(f,p)||!au(y,T):!0}function g1(o,l,f,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==o&&$m.enqueueReplaceState(l,l.state,null)}function ha(o,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(o=o.defaultProps){f===l&&(f=d({},f));for(var y in o)f[y]===void 0&&(f[y]=o[y])}return f}var jh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function m1(o){jh(o)}function y1(o){console.error(o)}function b1(o){jh(o)}function Uh(o,l){try{var f=o.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function _1(o,l,f){try{var p=o.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Hm(o,l,f){return f=Zs(f),f.tag=3,f.payload={element:null},f.callback=function(){Uh(o,l)},f}function v1(o){return o=Zs(o),o.tag=3,o}function x1(o,l,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var T=p.value;o.payload=function(){return y(T)},o.callback=function(){_1(l,f,p)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(o.callback=function(){_1(l,f,p),typeof y!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function eP(o,l,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&hu(l,f,y,!0),f=gi.current,f!==null){switch(f.tag){case 13:return Qi===null?py():f.alternate===null&&An===0&&(An=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===_m?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),my(o,p,y)),!1;case 22:return f.flags|=65536,p===_m?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),my(o,p,y)),!1}throw Error(r(435,f.tag))}return my(o,p,y),py(),!1}if(Vt)return l=gi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==hm&&(o=Error(r(422),{cause:p}),fu(fi(o,f)))):(p!==hm&&(l=Error(r(423),{cause:p}),fu(fi(l,f))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,p=fi(p,f),y=Hm(o.stateNode,p,y),wm(o,y),An!==4&&(An=2)),!1;var T=Error(r(520),{cause:p});if(T=fi(T,f),Iu===null?Iu=[T]:Iu.push(T),An!==4&&(An=2),l===null)return!0;p=fi(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,o=y&-y,f.lanes|=o,o=Hm(f.stateNode,p,o),wm(f,o),!1;case 1:if(l=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ao===null||!ao.has(T))))return f.flags|=65536,y&=-y,f.lanes|=y,y=v1(y),x1(y,o,f,p),wm(f,y),!1}f=f.return}while(f!==null);return!1}var w1=Error(r(461)),nr=!1;function cr(o,l,f,p){l.child=o===null?h1(l,null,f,p):vl(l,o.child,f,p)}function S1(o,l,f,p,y){f=f.render;var T=l.ref;if("ref"in p){var N={};for(var L in p)L!=="ref"&&(N[L]=p[L])}else N=p;return ca(l),p=Rm(o,l,f,N,T,y),L=Cm(),o!==null&&!nr?(km(o,l,y),As(o,l,y)):(Vt&&L&&um(l),l.flags|=1,cr(o,l,p,y),l.child)}function T1(o,l,f,p,y){if(o===null){var T=f.type;return typeof T=="function"&&!am(T)&&T.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=T,E1(o,l,T,p,y)):(o=bh(f.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(T=o.child,!Gm(o,y)){var N=T.memoizedProps;if(f=f.compare,f=f!==null?f:au,f(N,p)&&o.ref===l.ref)return As(o,l,y)}return l.flags|=1,o=_s(T,p),o.ref=l.ref,o.return=l,l.child=o}function E1(o,l,f,p,y){if(o!==null){var T=o.memoizedProps;if(au(T,p)&&o.ref===l.ref)if(nr=!1,l.pendingProps=p=T,Gm(o,y))(o.flags&131072)!==0&&(nr=!0);else return l.lanes=o.lanes,As(o,l,y)}return Wm(o,l,f,p,y)}function A1(o,l,f){var p=l.pendingProps,y=p.children,T=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=T!==null?T.baseLanes|f:f,o!==null){for(y=l.child=o.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;l.childLanes=T&~p}else l.childLanes=0,l.child=null;return R1(o,l,p,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Sh(l,T!==null?T.cachePool:null),T!==null?Ew(l,T):Tm(),d1(l);else return l.lanes=l.childLanes=536870912,R1(o,l,T!==null?T.baseLanes|f:f,f)}else T!==null?(Sh(l,T.cachePool),Ew(l,T),to(),l.memoizedState=null):(o!==null&&Sh(l,null),Tm(),to());return cr(o,l,y,f),l.child}function R1(o,l,f,p){var y=bm();return y=y===null?null:{parent:Yn._currentValue,pool:y},l.memoizedState={baseLanes:f,cachePool:y},o!==null&&Sh(l,null),Tm(),d1(l),o!==null&&hu(o,l,p,!0),null}function Lh(o,l){var f=l.ref;if(f===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(l.flags|=4194816)}}function Wm(o,l,f,p,y){return ca(l),f=Rm(o,l,f,p,void 0,y),p=Cm(),o!==null&&!nr?(km(o,l,y),As(o,l,y)):(Vt&&p&&um(l),l.flags|=1,cr(o,l,f,y),l.child)}function C1(o,l,f,p,y,T){return ca(l),l.updateQueue=null,f=Rw(l,p,f,y),Aw(o),p=Cm(),o!==null&&!nr?(km(o,l,T),As(o,l,T)):(Vt&&p&&um(l),l.flags|=1,cr(o,l,f,T),l.child)}function k1(o,l,f,p,y){if(ca(l),l.stateNode===null){var T=ul,N=f.contextType;typeof N=="object"&&N!==null&&(T=yr(N)),T=new f(p,T),l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=$m,l.stateNode=T,T._reactInternals=l,T=l.stateNode,T.props=p,T.state=l.memoizedState,T.refs={},vm(l),N=f.contextType,T.context=typeof N=="object"&&N!==null?yr(N):ul,T.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(Vm(l,f,N,p),T.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(N=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),N!==T.state&&$m.enqueueReplaceState(T,T.state,null),_u(l,p,T,y),bu(),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(o===null){T=l.stateNode;var L=l.memoizedProps,G=ha(f,L);T.props=G;var be=T.context,Ie=f.contextType;N=ul,typeof Ie=="object"&&Ie!==null&&(N=yr(Ie));var De=f.getDerivedStateFromProps;Ie=typeof De=="function"||typeof T.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,Ie||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L||be!==N)&&g1(l,T,p,N),Qs=!1;var ve=l.memoizedState;T.state=ve,_u(l,p,T,y),bu(),be=l.memoizedState,L||ve!==be||Qs?(typeof De=="function"&&(Vm(l,f,De,p),be=l.memoizedState),(G=Qs||p1(l,f,G,p,ve,be,N))?(Ie||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=be),T.props=p,T.state=be,T.context=N,p=G):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{T=l.stateNode,xm(o,l),N=l.memoizedProps,Ie=ha(f,N),T.props=Ie,De=l.pendingProps,ve=T.context,be=f.contextType,G=ul,typeof be=="object"&&be!==null&&(G=yr(be)),L=f.getDerivedStateFromProps,(be=typeof L=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==De||ve!==G)&&g1(l,T,p,G),Qs=!1,ve=l.memoizedState,T.state=ve,_u(l,p,T,y),bu();var we=l.memoizedState;N!==De||ve!==we||Qs||o!==null&&o.dependencies!==null&&xh(o.dependencies)?(typeof L=="function"&&(Vm(l,f,L,p),we=l.memoizedState),(Ie=Qs||p1(l,f,Ie,p,ve,we,G)||o!==null&&o.dependencies!==null&&xh(o.dependencies))?(be||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,we,G),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,we,G)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||N===o.memoizedProps&&ve===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&ve===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=we),T.props=p,T.state=we,T.context=G,p=Ie):(typeof T.componentDidUpdate!="function"||N===o.memoizedProps&&ve===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&ve===o.memoizedState||(l.flags|=1024),p=!1)}return T=p,Lh(o,l),p=(l.flags&128)!==0,T||p?(T=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:T.render(),l.flags|=1,o!==null&&p?(l.child=vl(l,o.child,null,y),l.child=vl(l,null,f,y)):cr(o,l,f,y),l.memoizedState=T.state,o=l.child):o=As(o,l,y),o}function M1(o,l,f,p){return uu(),l.flags|=256,cr(o,l,f,p),l.child}var qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(o){return{baseLanes:o,cachePool:yw()}}function Ym(o,l,f){return o=o!==null?o.childLanes&~f:0,l&&(o|=mi),o}function N1(o,l,f){var p=l.pendingProps,y=!1,T=(l.flags&128)!==0,N;if((N=T)||(N=o!==null&&o.memoizedState===null?!1:(Kn.current&2)!==0),N&&(y=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,o===null){if(Vt){if(y?eo(l):to(),Vt){var L=En,G;if(G=L){e:{for(G=L,L=Ki;G.nodeType!==8;){if(!L){L=null;break e}if(G=Ii(G.nextSibling),G===null){L=null;break e}}L=G}L!==null?(l.memoizedState={dehydrated:L,treeContext:ia!==null?{id:vs,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},G=Qr(18,null,null,0),G.stateNode=L,G.return=l,l.child=G,kr=l,En=null,G=!0):G=!1}G||aa(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return Ny(L)?l.lanes=32:l.lanes=536870912,null;Es(l)}return L=p.children,p=p.fallback,y?(to(),y=l.mode,L=zh({mode:"hidden",children:L},y),p=ra(p,y,f,null),L.return=l,p.return=l,L.sibling=p,l.child=L,y=l.child,y.memoizedState=Xm(f),y.childLanes=Ym(o,N,f),l.memoizedState=qm,p):(eo(l),Km(l,L))}if(G=o.memoizedState,G!==null&&(L=G.dehydrated,L!==null)){if(T)l.flags&256?(eo(l),l.flags&=-257,l=Qm(o,l,f)):l.memoizedState!==null?(to(),l.child=o.child,l.flags|=128,l=null):(to(),y=p.fallback,L=l.mode,p=zh({mode:"visible",children:p.children},L),y=ra(y,L,f,null),y.flags|=2,p.return=l,y.return=l,p.sibling=y,l.child=p,vl(l,o.child,null,f),p=l.child,p.memoizedState=Xm(f),p.childLanes=Ym(o,N,f),l.memoizedState=qm,l=y);else if(eo(l),Ny(L)){if(N=L.nextSibling&&L.nextSibling.dataset,N)var be=N.dgst;N=be,p=Error(r(419)),p.stack="",p.digest=N,fu({value:p,source:null,stack:null}),l=Qm(o,l,f)}else if(nr||hu(o,l,f,!1),N=(f&o.childLanes)!==0,nr||N){if(N=gn,N!==null&&(p=f&-f,p=(p&42)!==0?1:Ws(p),p=(p&(N.suspendedLanes|f))!==0?0:p,p!==0&&p!==G.retryLane))throw G.retryLane=p,cl(o,p),ti(N,o,p),w1;L.data==="$?"||py(),l=Qm(o,l,f)}else L.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=G.treeContext,En=Ii(L.nextSibling),kr=l,Vt=!0,oa=null,Ki=!1,o!==null&&(di[pi++]=vs,di[pi++]=xs,di[pi++]=ia,vs=o.id,xs=o.overflow,ia=l),l=Km(l,p.children),l.flags|=4096);return l}return y?(to(),y=p.fallback,L=l.mode,G=o.child,be=G.sibling,p=_s(G,{mode:"hidden",children:p.children}),p.subtreeFlags=G.subtreeFlags&65011712,be!==null?y=_s(be,y):(y=ra(y,L,f,null),y.flags|=2),y.return=l,p.return=l,p.sibling=y,l.child=p,p=y,y=l.child,L=o.child.memoizedState,L===null?L=Xm(f):(G=L.cachePool,G!==null?(be=Yn._currentValue,G=G.parent!==be?{parent:be,pool:be}:G):G=yw(),L={baseLanes:L.baseLanes|f,cachePool:G}),y.memoizedState=L,y.childLanes=Ym(o,N,f),l.memoizedState=qm,p):(eo(l),f=o.child,o=f.sibling,f=_s(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,o!==null&&(N=l.deletions,N===null?(l.deletions=[o],l.flags|=16):N.push(o)),l.child=f,l.memoizedState=null,f)}function Km(o,l){return l=zh({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function zh(o,l){return o=Qr(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Qm(o,l,f){return vl(l,o.child,null,f),o=Km(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function I1(o,l,f){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),pm(o.return,l,f)}function Zm(o,l,f,p,y){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=f,T.tailMode=y)}function O1(o,l,f){var p=l.pendingProps,y=p.revealOrder,T=p.tail;if(cr(o,l,p.children,f),p=Kn.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&I1(o,f,l);else if(o.tag===19)I1(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(B(Kn,p),y){case"forwards":for(f=l.child,y=null;f!==null;)o=f.alternate,o!==null&&Bh(o)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),Zm(l,!1,y,f,T);break;case"backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&Bh(o)===null){l.child=y;break}o=y.sibling,y.sibling=f,f=y,y=o}Zm(l,!0,f,null,T);break;case"together":Zm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function As(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),oo|=l.lanes,(f&l.childLanes)===0)if(o!==null){if(hu(o,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,f=_s(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=_s(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function Gm(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&xh(o)))}function tP(o,l,f){switch(l.tag){case 3:je(l,l.stateNode.containerInfo),Ks(l,Yn,o.memoizedState.cache),uu();break;case 27:case 5:Ze(l);break;case 4:je(l,l.stateNode.containerInfo);break;case 10:Ks(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(eo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?N1(o,l,f):(eo(l),o=As(o,l,f),o!==null?o.sibling:null);eo(l);break;case 19:var y=(o.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(hu(o,l,f,!1),p=(f&l.childLanes)!==0),y){if(p)return O1(o,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),B(Kn,Kn.current),p)break;return null;case 22:case 23:return l.lanes=0,A1(o,l,f);case 24:Ks(l,Yn,o.memoizedState.cache)}return As(o,l,f)}function P1(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps)nr=!0;else{if(!Gm(o,f)&&(l.flags&128)===0)return nr=!1,tP(o,l,f);nr=(o.flags&131072)!==0}else nr=!1,Vt&&(l.flags&1048576)!==0&&uw(l,vh,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var p=l.elementType,y=p._init;if(p=y(p._payload),l.type=p,typeof p=="function")am(p)?(o=ha(p,o),l.tag=1,l=k1(null,l,p,o,f)):(l.tag=0,l=Wm(null,l,p,o,f));else{if(p!=null){if(y=p.$$typeof,y===z){l.tag=11,l=S1(null,l,p,o,f);break e}else if(y===Z){l.tag=14,l=T1(null,l,p,o,f);break e}}throw l=re(p)||p,Error(r(306,l,""))}}return l;case 0:return Wm(o,l,l.type,l.pendingProps,f);case 1:return p=l.type,y=ha(p,l.pendingProps),k1(o,l,p,y,f);case 3:e:{if(je(l,l.stateNode.containerInfo),o===null)throw Error(r(387));p=l.pendingProps;var T=l.memoizedState;y=T.element,xm(o,l),_u(l,p,null,f);var N=l.memoizedState;if(p=N.cache,Ks(l,Yn,p),p!==T.cache&&gm(l,[Yn],f,!0),bu(),p=N.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){l=M1(o,l,p,f);break e}else if(p!==y){y=fi(Error(r(424)),l),fu(y),l=M1(o,l,p,f);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(En=Ii(o.firstChild),kr=l,Vt=!0,oa=null,Ki=!0,f=h1(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(uu(),p===y){l=As(o,l,f);break e}cr(o,l,p,f)}l=l.child}return l;case 26:return Lh(o,l),o===null?(f=jS(l.type,null,l.pendingProps,null))?l.memoizedState=f:Vt||(f=l.type,o=l.pendingProps,p=td(Oe.current).createElement(f),p[x]=l,p[E]=o,fr(p,f,o),ee(p),l.stateNode=p):l.memoizedState=jS(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ze(l),o===null&&Vt&&(p=l.stateNode=DS(l.type,l.pendingProps,Oe.current),kr=l,Ki=!0,y=En,uo(l.type)?(Iy=y,En=Ii(p.firstChild)):En=y),cr(o,l,l.pendingProps.children,f),Lh(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Vt&&((y=p=En)&&(p=kP(p,l.type,l.pendingProps,Ki),p!==null?(l.stateNode=p,kr=l,En=Ii(p.firstChild),Ki=!1,y=!0):y=!1),y||aa(l)),Ze(l),y=l.type,T=l.pendingProps,N=o!==null?o.memoizedProps:null,p=T.children,Cy(y,T)?p=null:N!==null&&Cy(y,N)&&(l.flags|=32),l.memoizedState!==null&&(y=Rm(o,l,XO,null,null,f),zu._currentValue=y),Lh(o,l),cr(o,l,p,f),l.child;case 6:return o===null&&Vt&&((o=f=En)&&(f=MP(f,l.pendingProps,Ki),f!==null?(l.stateNode=f,kr=l,En=null,o=!0):o=!1),o||aa(l)),null;case 13:return N1(o,l,f);case 4:return je(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=vl(l,null,p,f):cr(o,l,p,f),l.child;case 11:return S1(o,l,l.type,l.pendingProps,f);case 7:return cr(o,l,l.pendingProps,f),l.child;case 8:return cr(o,l,l.pendingProps.children,f),l.child;case 12:return cr(o,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,Ks(l,l.type,p.value),cr(o,l,p.children,f),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,ca(l),y=yr(y),p=p(y),l.flags|=1,cr(o,l,p,f),l.child;case 14:return T1(o,l,l.type,l.pendingProps,f);case 15:return E1(o,l,l.type,l.pendingProps,f);case 19:return O1(o,l,f);case 31:return p=l.pendingProps,f=l.mode,p={mode:p.mode,children:p.children},o===null?(f=zh(p,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=_s(o.child,p),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return A1(o,l,f);case 24:return ca(l),p=yr(Yn),o===null?(y=bm(),y===null&&(y=gn,T=mm(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=f),y=T),l.memoizedState={parent:p,cache:y},vm(l),Ks(l,Yn,y)):((o.lanes&f)!==0&&(xm(o,l),_u(l,null,null,f),bu()),y=o.memoizedState,T=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Ks(l,Yn,p)):(p=T.cache,Ks(l,Yn,p),p!==y.cache&&gm(l,[Yn],f,!0))),cr(o,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Rs(o){o.flags|=4}function D1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!$S(l)){if(l=gi.current,l!==null&&((Dt&4194048)===Dt?Qi!==null:(Dt&62914560)!==Dt&&(Dt&536870912)===0||l!==Qi))throw mu=_m,bw;o.flags|=8192}}function Vh(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Zc():536870912,o.lanes|=l,Tl|=l)}function Au(o,l){if(!Vt)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(l)for(var y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=f,l}function nP(o,l,f){var p=l.pendingProps;switch(fm(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(l),null;case 1:return Tn(l),null;case 3:return f=l.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Ss(Yn),tt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(cu(l)?Rs(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dw())),Tn(l),null;case 26:return f=l.memoizedState,o===null?(Rs(l),f!==null?(Tn(l),D1(l,f)):(Tn(l),l.flags&=-16777217)):f?f!==o.memoizedState?(Rs(l),Tn(l),D1(l,f)):(Tn(l),l.flags&=-16777217):(o.memoizedProps!==p&&Rs(l),Tn(l),l.flags&=-16777217),null;case 27:it(l),f=Oe.current;var y=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Rs(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Tn(l),null}o=Ce.current,cu(l)?fw(l):(o=DS(y,p,f),l.stateNode=o,Rs(l))}return Tn(l),null;case 5:if(it(l),f=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Rs(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Tn(l),null}if(o=Ce.current,cu(l))fw(l);else{switch(y=td(Oe.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?y.createElement("select",{is:p.is}):y.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?y.createElement(f,{is:p.is}):y.createElement(f)}}o[x]=l,o[E]=p;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=o;e:switch(fr(o,f,p),f){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Rs(l)}}return Tn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==p&&Rs(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(o=Oe.current,cu(l)){if(o=l.stateNode,f=l.memoizedProps,p=null,y=kr,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}o[x]=l,o=!!(o.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||CS(o.nodeValue,f)),o||aa(l)}else o=td(o).createTextNode(p),o[x]=l,l.stateNode=o}return Tn(l),null;case 13:if(p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=cu(l),p!==null&&p.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[x]=l}else uu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Tn(l),y=!1}else y=dw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Es(l),l):(Es(l),null)}if(Es(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=p!==null,o=o!==null&&o.memoizedState!==null,f){p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool);var T=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),T!==y&&(p.flags|=2048)}return f!==o&&f&&(l.child.flags|=8192),Vh(l,l.updateQueue),Tn(l),null;case 4:return tt(),o===null&&Sy(l.stateNode.containerInfo),Tn(l),null;case 10:return Ss(l.type),Tn(l),null;case 19:if(Ae(Kn),y=l.memoizedState,y===null)return Tn(l),null;if(p=(l.flags&128)!==0,T=y.rendering,T===null)if(p)Au(y,!1);else{if(An!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(T=Bh(o),T!==null){for(l.flags|=128,Au(y,!1),o=T.updateQueue,l.updateQueue=o,Vh(l,o),l.subtreeFlags=0,o=f,f=l.child;f!==null;)cw(f,o),f=f.sibling;return B(Kn,Kn.current&1|2),l.child}o=o.sibling}y.tail!==null&&bn()>Wh&&(l.flags|=128,p=!0,Au(y,!1),l.lanes=4194304)}else{if(!p)if(o=Bh(T),o!==null){if(l.flags|=128,p=!0,o=o.updateQueue,l.updateQueue=o,Vh(l,o),Au(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Vt)return Tn(l),null}else 2*bn()-y.renderingStartTime>Wh&&f!==536870912&&(l.flags|=128,p=!0,Au(y,!1),l.lanes=4194304);y.isBackwards?(T.sibling=l.child,l.child=T):(o=y.last,o!==null?o.sibling=T:l.child=T,y.last=T)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=bn(),l.sibling=null,o=Kn.current,B(Kn,p?o&1|2:o&1),l):(Tn(l),null);case 22:case 23:return Es(l),Em(),p=l.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Tn(l),l.subtreeFlags&6&&(l.flags|=8192)):Tn(l),f=l.updateQueue,f!==null&&Vh(l,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),o!==null&&Ae(ua),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ss(Yn),Tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function rP(o,l){switch(fm(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Ss(Yn),tt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return it(l),null;case 13:if(Es(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));uu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Ae(Kn),null;case 4:return tt(),null;case 10:return Ss(l.type),null;case 22:case 23:return Es(l),Em(),o!==null&&Ae(ua),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Ss(Yn),null;case 25:return null;default:return null}}function F1(o,l){switch(fm(l),l.tag){case 3:Ss(Yn),tt();break;case 26:case 27:case 5:it(l);break;case 4:tt();break;case 13:Es(l);break;case 19:Ae(Kn);break;case 10:Ss(l.type);break;case 22:case 23:Es(l),Em(),o!==null&&Ae(ua);break;case 24:Ss(Yn)}}function Ru(o,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&o)===o){p=void 0;var T=f.create,N=f.inst;p=T(),N.destroy=p}f=f.next}while(f!==y)}}catch(L){un(l,l.return,L)}}function no(o,l,f){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var T=y.next;p=T;do{if((p.tag&o)===o){var N=p.inst,L=N.destroy;if(L!==void 0){N.destroy=void 0,y=l;var G=f,be=L;try{be()}catch(Ie){un(y,G,Ie)}}}p=p.next}while(p!==T)}}catch(Ie){un(l,l.return,Ie)}}function B1(o){var l=o.updateQueue;if(l!==null){var f=o.stateNode;try{Tw(l,f)}catch(p){un(o,o.return,p)}}}function j1(o,l,f){f.props=ha(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(p){un(o,l,p)}}function Cu(o,l){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof f=="function"?o.refCleanup=f(p):f.current=p}}catch(y){un(o,l,y)}}function Zi(o,l){var f=o.ref,p=o.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){un(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){un(o,l,y)}else f.current=null}function U1(o){var l=o.type,f=o.memoizedProps,p=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){un(o,o.return,y)}}function Jm(o,l,f){try{var p=o.stateNode;TP(p,o.type,f,l),p[E]=l}catch(y){un(o,o.return,y)}}function L1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&uo(o.type)||o.tag===4}function ey(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||L1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&uo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ty(o,l,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(o),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ed));else if(p!==4&&(p===27&&uo(o.type)&&(f=o.stateNode,l=null),o=o.child,o!==null))for(ty(o,l,f),o=o.sibling;o!==null;)ty(o,l,f),o=o.sibling}function $h(o,l,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(p!==4&&(p===27&&uo(o.type)&&(f=o.stateNode),o=o.child,o!==null))for($h(o,l,f),o=o.sibling;o!==null;)$h(o,l,f),o=o.sibling}function z1(o){var l=o.stateNode,f=o.memoizedProps;try{for(var p=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);fr(l,p,f),l[x]=o,l[E]=f}catch(T){un(o,o.return,T)}}var Cs=!1,Pn=!1,ny=!1,V1=typeof WeakSet=="function"?WeakSet:Set,rr=null;function iP(o,l){if(o=o.containerInfo,Ay=ad,o=Jx(o),em(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var N=0,L=-1,G=-1,be=0,Ie=0,De=o,ve=null;t:for(;;){for(var we;De!==f||y!==0&&De.nodeType!==3||(L=N+y),De!==T||p!==0&&De.nodeType!==3||(G=N+p),De.nodeType===3&&(N+=De.nodeValue.length),(we=De.firstChild)!==null;)ve=De,De=we;for(;;){if(De===o)break t;if(ve===f&&++be===y&&(L=N),ve===T&&++Ie===p&&(G=N),(we=De.nextSibling)!==null)break;De=ve,ve=De.parentNode}De=we}f=L===-1||G===-1?null:{start:L,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ry={focusedElem:o,selectionRange:f},ad=!1,rr=l;rr!==null;)if(l=rr,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,rr=o;else for(;rr!==null;){switch(l=rr,T=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,f=l,y=T.memoizedProps,T=T.memoizedState,p=f.stateNode;try{var yt=ha(f.type,y,f.elementType===f.type);o=p.getSnapshotBeforeUpdate(yt,T),p.__reactInternalSnapshotBeforeUpdate=o}catch(dt){un(f,f.return,dt)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,f=o.nodeType,f===9)My(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":My(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,rr=o;break}rr=l.return}}function $1(o,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:ro(o,f),p&4&&Ru(5,f);break;case 1:if(ro(o,f),p&4)if(o=f.stateNode,l===null)try{o.componentDidMount()}catch(N){un(f,f.return,N)}else{var y=ha(f.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(N){un(f,f.return,N)}}p&64&&B1(f),p&512&&Cu(f,f.return);break;case 3:if(ro(o,f),p&64&&(o=f.updateQueue,o!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{Tw(o,l)}catch(N){un(f,f.return,N)}}break;case 27:l===null&&p&4&&z1(f);case 26:case 5:ro(o,f),l===null&&p&4&&U1(f),p&512&&Cu(f,f.return);break;case 12:ro(o,f);break;case 13:ro(o,f),p&4&&q1(o,f),p&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=dP.bind(null,f),NP(o,f))));break;case 22:if(p=f.memoizedState!==null||Cs,!p){l=l!==null&&l.memoizedState!==null||Pn,y=Cs;var T=Pn;Cs=p,(Pn=l)&&!T?io(o,f,(f.subtreeFlags&8772)!==0):ro(o,f),Cs=y,Pn=T}break;case 30:break;default:ro(o,f)}}function H1(o){var l=o.alternate;l!==null&&(o.alternate=null,H1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Re(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var vn=null,Lr=!1;function ks(o,l,f){for(f=f.child;f!==null;)W1(o,l,f),f=f.sibling}function W1(o,l,f){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Me,f)}catch{}switch(f.tag){case 26:Pn||Zi(f,l),ks(o,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Pn||Zi(f,l);var p=vn,y=Lr;uo(f.type)&&(vn=f.stateNode,Lr=!1),ks(o,l,f),Bu(f.stateNode),vn=p,Lr=y;break;case 5:Pn||Zi(f,l);case 6:if(p=vn,y=Lr,vn=null,ks(o,l,f),vn=p,Lr=y,vn!==null)if(Lr)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(f.stateNode)}catch(T){un(f,l,T)}else try{vn.removeChild(f.stateNode)}catch(T){un(f,l,T)}break;case 18:vn!==null&&(Lr?(o=vn,OS(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Wu(o)):OS(vn,f.stateNode));break;case 4:p=vn,y=Lr,vn=f.stateNode.containerInfo,Lr=!0,ks(o,l,f),vn=p,Lr=y;break;case 0:case 11:case 14:case 15:Pn||no(2,f,l),Pn||no(4,f,l),ks(o,l,f);break;case 1:Pn||(Zi(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&j1(f,l,p)),ks(o,l,f);break;case 21:ks(o,l,f);break;case 22:Pn=(p=Pn)||f.memoizedState!==null,ks(o,l,f),Pn=p;break;default:ks(o,l,f)}}function q1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Wu(o)}catch(f){un(l,l.return,f)}}function sP(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new V1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new V1),l;default:throw Error(r(435,o.tag))}}function ry(o,l){var f=sP(o);l.forEach(function(p){var y=pP.bind(null,o,p);f.has(p)||(f.add(p),p.then(y,y))})}function Zr(o,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],T=o,N=l,L=N;e:for(;L!==null;){switch(L.tag){case 27:if(uo(L.type)){vn=L.stateNode,Lr=!1;break e}break;case 5:vn=L.stateNode,Lr=!1;break e;case 3:case 4:vn=L.stateNode.containerInfo,Lr=!0;break e}L=L.return}if(vn===null)throw Error(r(160));W1(T,N,y),vn=null,Lr=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)X1(l,o),l=l.sibling}var Ni=null;function X1(o,l){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Zr(l,o),Gr(o),p&4&&(no(3,o,o.return),Ru(3,o),no(5,o,o.return));break;case 1:Zr(l,o),Gr(o),p&512&&(Pn||f===null||Zi(f,f.return)),p&64&&Cs&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Ni;if(Zr(l,o),Gr(o),p&512&&(Pn||f===null||Zi(f,f.return)),p&4){var T=f!==null?f.memoizedState:null;if(p=o.memoizedState,f===null)if(p===null)if(o.stateNode===null){e:{p=o.type,f=o.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":T=y.getElementsByTagName("title")[0],(!T||T[J]||T[x]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(p),y.head.insertBefore(T,y.querySelector("head > title"))),fr(T,p,f),T[x]=o,ee(T),p=T;break e;case"link":var N=zS("link","href",y).get(p+(f.href||""));if(N){for(var L=0;L<N.length;L++)if(T=N[L],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(L,1);break t}}T=y.createElement(p),fr(T,p,f),y.head.appendChild(T);break;case"meta":if(N=zS("meta","content",y).get(p+(f.content||""))){for(L=0;L<N.length;L++)if(T=N[L],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(L,1);break t}}T=y.createElement(p),fr(T,p,f),y.head.appendChild(T);break;default:throw Error(r(468,p))}T[x]=o,ee(T),p=T}o.stateNode=p}else VS(y,o.type,o.stateNode);else o.stateNode=LS(y,p,o.memoizedProps);else T!==p?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,p===null?VS(y,o.type,o.stateNode):LS(y,p,o.memoizedProps)):p===null&&o.stateNode!==null&&Jm(o,o.memoizedProps,f.memoizedProps)}break;case 27:Zr(l,o),Gr(o),p&512&&(Pn||f===null||Zi(f,f.return)),f!==null&&p&4&&Jm(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Zr(l,o),Gr(o),p&512&&(Pn||f===null||Zi(f,f.return)),o.flags&32){y=o.stateNode;try{Xs(y,"")}catch(we){un(o,o.return,we)}}p&4&&o.stateNode!=null&&(y=o.memoizedProps,Jm(o,y,f!==null?f.memoizedProps:y)),p&1024&&(ny=!0);break;case 6:if(Zr(l,o),Gr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,f=o.stateNode;try{f.nodeValue=p}catch(we){un(o,o.return,we)}}break;case 3:if(id=null,y=Ni,Ni=nd(l.containerInfo),Zr(l,o),Ni=y,Gr(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Wu(l.containerInfo)}catch(we){un(o,o.return,we)}ny&&(ny=!1,Y1(o));break;case 4:p=Ni,Ni=nd(o.stateNode.containerInfo),Zr(l,o),Gr(o),Ni=p;break;case 12:Zr(l,o),Gr(o);break;case 13:Zr(l,o),Gr(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(cy=bn()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,ry(o,p)));break;case 22:y=o.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,be=Cs,Ie=Pn;if(Cs=be||y,Pn=Ie||G,Zr(l,o),Pn=Ie,Cs=be,Gr(o),p&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||G||Cs||Pn||da(o)),f=null,l=o;;){if(l.tag===5||l.tag===26){if(f===null){G=f=l;try{if(T=G.stateNode,y)N=T.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{L=G.stateNode;var De=G.memoizedProps.style,ve=De!=null&&De.hasOwnProperty("display")?De.display:null;L.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(we){un(G,G.return,we)}}}else if(l.tag===6){if(f===null){G=l;try{G.stateNode.nodeValue=y?"":G.memoizedProps}catch(we){un(G,G.return,we)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=o.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,ry(o,f))));break;case 19:Zr(l,o),Gr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,ry(o,p)));break;case 30:break;case 21:break;default:Zr(l,o),Gr(o)}}function Gr(o){var l=o.flags;if(l&2){try{for(var f,p=o.return;p!==null;){if(L1(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,T=ey(o);$h(o,T,y);break;case 5:var N=f.stateNode;f.flags&32&&(Xs(N,""),f.flags&=-33);var L=ey(o);$h(o,L,N);break;case 3:case 4:var G=f.stateNode.containerInfo,be=ey(o);ty(o,be,G);break;default:throw Error(r(161))}}catch(Ie){un(o,o.return,Ie)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Y1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;Y1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function ro(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)$1(o,l.alternate,l),l=l.sibling}function da(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:no(4,l,l.return),da(l);break;case 1:Zi(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&j1(l,l.return,f),da(l);break;case 27:Bu(l.stateNode);case 26:case 5:Zi(l,l.return),da(l);break;case 22:l.memoizedState===null&&da(l);break;case 30:da(l);break;default:da(l)}o=o.sibling}}function io(o,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=o,T=l,N=T.flags;switch(T.tag){case 0:case 11:case 15:io(y,T,f),Ru(4,T);break;case 1:if(io(y,T,f),p=T,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(be){un(p,p.return,be)}if(p=T,y=p.updateQueue,y!==null){var L=p.stateNode;try{var G=y.shared.hiddenCallbacks;if(G!==null)for(y.shared.hiddenCallbacks=null,y=0;y<G.length;y++)Sw(G[y],L)}catch(be){un(p,p.return,be)}}f&&N&64&&B1(T),Cu(T,T.return);break;case 27:z1(T);case 26:case 5:io(y,T,f),f&&p===null&&N&4&&U1(T),Cu(T,T.return);break;case 12:io(y,T,f);break;case 13:io(y,T,f),f&&N&4&&q1(y,T);break;case 22:T.memoizedState===null&&io(y,T,f),Cu(T,T.return);break;case 30:break;default:io(y,T,f)}l=l.sibling}}function iy(o,l){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&du(f))}function sy(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&du(o))}function Gi(o,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)K1(o,l,f,p),l=l.sibling}function K1(o,l,f,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gi(o,l,f,p),y&2048&&Ru(9,l);break;case 1:Gi(o,l,f,p);break;case 3:Gi(o,l,f,p),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&du(o)));break;case 12:if(y&2048){Gi(o,l,f,p),o=l.stateNode;try{var T=l.memoizedProps,N=T.id,L=T.onPostCommit;typeof L=="function"&&L(N,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(G){un(l,l.return,G)}}else Gi(o,l,f,p);break;case 13:Gi(o,l,f,p);break;case 23:break;case 22:T=l.stateNode,N=l.alternate,l.memoizedState!==null?T._visibility&2?Gi(o,l,f,p):ku(o,l):T._visibility&2?Gi(o,l,f,p):(T._visibility|=2,xl(o,l,f,p,(l.subtreeFlags&10256)!==0)),y&2048&&iy(N,l);break;case 24:Gi(o,l,f,p),y&2048&&sy(l.alternate,l);break;default:Gi(o,l,f,p)}}function xl(o,l,f,p,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var T=o,N=l,L=f,G=p,be=N.flags;switch(N.tag){case 0:case 11:case 15:xl(T,N,L,G,y),Ru(8,N);break;case 23:break;case 22:var Ie=N.stateNode;N.memoizedState!==null?Ie._visibility&2?xl(T,N,L,G,y):ku(T,N):(Ie._visibility|=2,xl(T,N,L,G,y)),y&&be&2048&&iy(N.alternate,N);break;case 24:xl(T,N,L,G,y),y&&be&2048&&sy(N.alternate,N);break;default:xl(T,N,L,G,y)}l=l.sibling}}function ku(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=o,p=l,y=p.flags;switch(p.tag){case 22:ku(f,p),y&2048&&iy(p.alternate,p);break;case 24:ku(f,p),y&2048&&sy(p.alternate,p);break;default:ku(f,p)}l=l.sibling}}var Mu=8192;function wl(o){if(o.subtreeFlags&Mu)for(o=o.child;o!==null;)Q1(o),o=o.sibling}function Q1(o){switch(o.tag){case 26:wl(o),o.flags&Mu&&o.memoizedState!==null&&HP(Ni,o.memoizedState,o.memoizedProps);break;case 5:wl(o);break;case 3:case 4:var l=Ni;Ni=nd(o.stateNode.containerInfo),wl(o),Ni=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Mu,Mu=16777216,wl(o),Mu=l):wl(o));break;default:wl(o)}}function Z1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Nu(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];rr=p,J1(p,o)}Z1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)G1(o),o=o.sibling}function G1(o){switch(o.tag){case 0:case 11:case 15:Nu(o),o.flags&2048&&no(9,o,o.return);break;case 3:Nu(o);break;case 12:Nu(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Hh(o)):Nu(o);break;default:Nu(o)}}function Hh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];rr=p,J1(p,o)}Z1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:no(8,l,l.return),Hh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Hh(l));break;default:Hh(l)}o=o.sibling}}function J1(o,l){for(;rr!==null;){var f=rr;switch(f.tag){case 0:case 11:case 15:no(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:du(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,rr=p;else e:for(f=o;rr!==null;){p=rr;var y=p.sibling,T=p.return;if(H1(p),p===f){rr=null;break e}if(y!==null){y.return=T,rr=y;break e}rr=T}}}var oP={getCacheForType:function(o){var l=yr(Yn),f=l.data.get(o);return f===void 0&&(f=o(),l.data.set(o,f)),f}},aP=typeof WeakMap=="function"?WeakMap:Map,Gt=0,gn=null,kt=null,Dt=0,Jt=0,Jr=null,so=!1,Sl=!1,oy=!1,Ms=0,An=0,oo=0,pa=0,ay=0,mi=0,Tl=0,Iu=null,zr=null,ly=!1,cy=0,Wh=1/0,qh=null,ao=null,ur=0,lo=null,El=null,Al=0,uy=0,fy=null,eS=null,Ou=0,hy=null;function ei(){if((Gt&2)!==0&&Dt!==0)return Dt&-Dt;if(ne.T!==null){var o=dl;return o!==0?o:_y()}return w()}function tS(){mi===0&&(mi=(Dt&536870912)===0||Vt?Go():536870912);var o=gi.current;return o!==null&&(o.flags|=32),mi}function ti(o,l,f){(o===gn&&(Jt===2||Jt===9)||o.cancelPendingCommit!==null)&&(Rl(o,0),co(o,Dt,mi,!1)),Ci(o,f),((Gt&2)===0||o!==gn)&&(o===gn&&((Gt&2)===0&&(pa|=f),An===4&&co(o,Dt,mi,!1)),Ji(o))}function nS(o,l,f){if((Gt&6)!==0)throw Error(r(327));var p=!f&&(l&124)===0&&(l&o.expiredLanes)===0||Fr(o,l),y=p?uP(o,l):gy(o,l,!0),T=p;do{if(y===0){Sl&&!p&&co(o,l,0,!1);break}else{if(f=o.current.alternate,T&&!lP(f)){y=gy(o,l,!1),T=!1;continue}if(y===2){if(T=l,o.errorRecoveryDisabledLanes&T)var N=0;else N=o.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var L=o;y=Iu;var G=L.current.memoizedState.isDehydrated;if(G&&(Rl(L,N).flags|=256),N=gy(L,N,!1),N!==2){if(oy&&!G){L.errorRecoveryDisabledLanes|=T,pa|=T,y=4;break e}T=zr,zr=y,T!==null&&(zr===null?zr=T:zr.push.apply(zr,T))}y=N}if(T=!1,y!==2)continue}}if(y===1){Rl(o,0),co(o,l,0,!0);break}e:{switch(p=o,T=y,T){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:co(p,l,mi,!so);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=cy+300-bn(),10<y)){if(co(p,l,mi,!so),Bn(p,0,!0)!==0)break e;p.timeoutHandle=NS(rS.bind(null,p,f,zr,qh,ly,l,mi,pa,Tl,so,T,2,-0,0),y);break e}rS(p,f,zr,qh,ly,l,mi,pa,Tl,so,T,0,-0,0)}}break}while(!0);Ji(o)}function rS(o,l,f,p,y,T,N,L,G,be,Ie,De,ve,we){if(o.timeoutHandle=-1,De=l.subtreeFlags,(De&8192||(De&16785408)===16785408)&&(Lu={stylesheets:null,count:0,unsuspend:$P},Q1(l),De=WP(),De!==null)){o.cancelPendingCommit=De(uS.bind(null,o,l,T,f,p,y,N,L,G,Ie,1,ve,we)),co(o,T,N,!be);return}uS(o,l,T,f,p,y,N,L,G)}function lP(o){for(var l=o;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],T=y.getSnapshot;y=y.value;try{if(!Kr(T(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function co(o,l,f,p){l&=~ay,l&=~pa,o.suspendedLanes|=l,o.pingedLanes&=~l,p&&(o.warmLanes|=l),p=o.expirationTimes;for(var y=l;0<y;){var T=31-ht(y),N=1<<T;p[T]=-1,y&=~N}f!==0&&Jo(o,f,l)}function Xh(){return(Gt&6)===0?(Pu(0),!1):!0}function dy(){if(kt!==null){if(Jt===0)var o=kt.return;else o=kt,ws=la=null,Mm(o),_l=null,Tu=0,o=kt;for(;o!==null;)F1(o.alternate,o),o=o.return;kt=null}}function Rl(o,l){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,AP(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),dy(),gn=o,kt=f=_s(o.current,null),Dt=l,Jt=0,Jr=null,so=!1,Sl=Fr(o,l),oy=!1,Tl=mi=ay=pa=oo=An=0,zr=Iu=null,ly=!1,(l&8)!==0&&(l|=l&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=l;0<p;){var y=31-ht(p),T=1<<y;l|=o[y],p&=~T}return Ms=l,gh(),f}function iS(o,l){Tt=null,ne.H=Ph,l===gu||l===Th?(l=xw(),Jt=3):l===bw?(l=xw(),Jt=4):Jt=l===w1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Jr=l,kt===null&&(An=1,Uh(o,fi(l,o.current)))}function sS(){var o=ne.H;return ne.H=Ph,o===null?Ph:o}function oS(){var o=ne.A;return ne.A=oP,o}function py(){An=4,so||(Dt&4194048)!==Dt&&gi.current!==null||(Sl=!0),(oo&134217727)===0&&(pa&134217727)===0||gn===null||co(gn,Dt,mi,!1)}function gy(o,l,f){var p=Gt;Gt|=2;var y=sS(),T=oS();(gn!==o||Dt!==l)&&(qh=null,Rl(o,l)),l=!1;var N=An;e:do try{if(Jt!==0&&kt!==null){var L=kt,G=Jr;switch(Jt){case 8:dy(),N=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(l=!0);var be=Jt;if(Jt=0,Jr=null,Cl(o,L,G,be),f&&Sl){N=0;break e}break;default:be=Jt,Jt=0,Jr=null,Cl(o,L,G,be)}}cP(),N=An;break}catch(Ie){iS(o,Ie)}while(!0);return l&&o.shellSuspendCounter++,ws=la=null,Gt=p,ne.H=y,ne.A=T,kt===null&&(gn=null,Dt=0,gh()),N}function cP(){for(;kt!==null;)aS(kt)}function uP(o,l){var f=Gt;Gt|=2;var p=sS(),y=oS();gn!==o||Dt!==l?(qh=null,Wh=bn()+500,Rl(o,l)):Sl=Fr(o,l);e:do try{if(Jt!==0&&kt!==null){l=kt;var T=Jr;t:switch(Jt){case 1:Jt=0,Jr=null,Cl(o,l,T,1);break;case 2:case 9:if(_w(T)){Jt=0,Jr=null,lS(l);break}l=function(){Jt!==2&&Jt!==9||gn!==o||(Jt=7),Ji(o)},T.then(l,l);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:_w(T)?(Jt=0,Jr=null,lS(l)):(Jt=0,Jr=null,Cl(o,l,T,7));break;case 5:var N=null;switch(kt.tag){case 26:N=kt.memoizedState;case 5:case 27:var L=kt;if(!N||$S(N)){Jt=0,Jr=null;var G=L.sibling;if(G!==null)kt=G;else{var be=L.return;be!==null?(kt=be,Yh(be)):kt=null}break t}}Jt=0,Jr=null,Cl(o,l,T,5);break;case 6:Jt=0,Jr=null,Cl(o,l,T,6);break;case 8:dy(),An=6;break e;default:throw Error(r(462))}}fP();break}catch(Ie){iS(o,Ie)}while(!0);return ws=la=null,ne.H=p,ne.A=y,Gt=f,kt!==null?0:(gn=null,Dt=0,gh(),An)}function fP(){for(;kt!==null&&!In();)aS(kt)}function aS(o){var l=P1(o.alternate,o,Ms);o.memoizedProps=o.pendingProps,l===null?Yh(o):kt=l}function lS(o){var l=o,f=l.alternate;switch(l.tag){case 15:case 0:l=C1(f,l,l.pendingProps,l.type,void 0,Dt);break;case 11:l=C1(f,l,l.pendingProps,l.type.render,l.ref,Dt);break;case 5:Mm(l);default:F1(f,l),l=kt=cw(l,Ms),l=P1(f,l,Ms)}o.memoizedProps=o.pendingProps,l===null?Yh(o):kt=l}function Cl(o,l,f,p){ws=la=null,Mm(l),_l=null,Tu=0;var y=l.return;try{if(eP(o,y,l,f,Dt)){An=1,Uh(o,fi(f,o.current)),kt=null;return}}catch(T){if(y!==null)throw kt=y,T;An=1,Uh(o,fi(f,o.current)),kt=null;return}l.flags&32768?(Vt||p===1?o=!0:Sl||(Dt&536870912)!==0?o=!1:(so=o=!0,(p===2||p===9||p===3||p===6)&&(p=gi.current,p!==null&&p.tag===13&&(p.flags|=16384))),cS(l,o)):Yh(l)}function Yh(o){var l=o;do{if((l.flags&32768)!==0){cS(l,so);return}o=l.return;var f=nP(l.alternate,l,Ms);if(f!==null){kt=f;return}if(l=l.sibling,l!==null){kt=l;return}kt=l=o}while(l!==null);An===0&&(An=5)}function cS(o,l){do{var f=rP(o.alternate,o);if(f!==null){f.flags&=32767,kt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(o=o.sibling,o!==null)){kt=o;return}kt=o=f}while(o!==null);An=6,kt=null}function uS(o,l,f,p,y,T,N,L,G){o.cancelPendingCommit=null;do Kh();while(ur!==0);if((Gt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(T=l.lanes|l.childLanes,T|=sm,GI(o,f,T,N,L,G),o===gn&&(kt=gn=null,Dt=0),El=l,lo=o,Al=f,uy=T,fy=y,eS=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,gP(lr,function(){return gS(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=ne.T,ne.T=null,y=Se.p,Se.p=2,N=Gt,Gt|=4;try{iP(o,l,f)}finally{Gt=N,Se.p=y,ne.T=p}}ur=1,fS(),hS(),dS()}}function fS(){if(ur===1){ur=0;var o=lo,l=El,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=ne.T,ne.T=null;var p=Se.p;Se.p=2;var y=Gt;Gt|=4;try{X1(l,o);var T=Ry,N=Jx(o.containerInfo),L=T.focusedElem,G=T.selectionRange;if(N!==L&&L&&L.ownerDocument&&Gx(L.ownerDocument.documentElement,L)){if(G!==null&&em(L)){var be=G.start,Ie=G.end;if(Ie===void 0&&(Ie=be),"selectionStart"in L)L.selectionStart=be,L.selectionEnd=Math.min(Ie,L.value.length);else{var De=L.ownerDocument||document,ve=De&&De.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),yt=L.textContent.length,dt=Math.min(G.start,yt),rn=G.end===void 0?dt:Math.min(G.end,yt);!we.extend&&dt>rn&&(N=rn,rn=dt,dt=N);var he=Zx(L,dt),se=Zx(L,rn);if(he&&se&&(we.rangeCount!==1||we.anchorNode!==he.node||we.anchorOffset!==he.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ye=De.createRange();ye.setStart(he.node,he.offset),we.removeAllRanges(),dt>rn?(we.addRange(ye),we.extend(se.node,se.offset)):(ye.setEnd(se.node,se.offset),we.addRange(ye))}}}}for(De=[],we=L;we=we.parentNode;)we.nodeType===1&&De.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<De.length;L++){var Pe=De[L];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}ad=!!Ay,Ry=Ay=null}finally{Gt=y,Se.p=p,ne.T=f}}o.current=l,ur=2}}function hS(){if(ur===2){ur=0;var o=lo,l=El,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=ne.T,ne.T=null;var p=Se.p;Se.p=2;var y=Gt;Gt|=4;try{$1(o,l.alternate,l)}finally{Gt=y,Se.p=p,ne.T=f}}ur=3}}function dS(){if(ur===4||ur===3){ur=0,ar();var o=lo,l=El,f=Al,p=eS;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ur=5:(ur=0,El=lo=null,pS(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(ao=null),D(f),l=l.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Me,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=ne.T,y=Se.p,Se.p=2,ne.T=null;try{for(var T=o.onRecoverableError,N=0;N<p.length;N++){var L=p[N];T(L.value,{componentStack:L.stack})}}finally{ne.T=l,Se.p=y}}(Al&3)!==0&&Kh(),Ji(o),y=o.pendingLanes,(f&4194090)!==0&&(y&42)!==0?o===hy?Ou++:(Ou=0,hy=o):Ou=0,Pu(0)}}function pS(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,du(l)))}function Kh(o){return fS(),hS(),dS(),gS()}function gS(){if(ur!==5)return!1;var o=lo,l=uy;uy=0;var f=D(Al),p=ne.T,y=Se.p;try{Se.p=32>f?32:f,ne.T=null,f=fy,fy=null;var T=lo,N=Al;if(ur=0,El=lo=null,Al=0,(Gt&6)!==0)throw Error(r(331));var L=Gt;if(Gt|=4,G1(T.current),K1(T,T.current,N,f),Gt=L,Pu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Me,T)}catch{}return!0}finally{Se.p=y,ne.T=p,pS(o,l)}}function mS(o,l,f){l=fi(f,l),l=Hm(o.stateNode,l,2),o=Gs(o,l,2),o!==null&&(Ci(o,2),Ji(o))}function un(o,l,f){if(o.tag===3)mS(o,o,f);else for(;l!==null;){if(l.tag===3){mS(l,o,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ao===null||!ao.has(p))){o=fi(f,o),f=v1(2),p=Gs(l,f,2),p!==null&&(x1(f,p,l,o),Ci(p,2),Ji(p));break}}l=l.return}}function my(o,l,f){var p=o.pingCache;if(p===null){p=o.pingCache=new aP;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(f)||(oy=!0,y.add(f),o=hP.bind(null,o,l,f),l.then(o,o))}function hP(o,l,f){var p=o.pingCache;p!==null&&p.delete(l),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,gn===o&&(Dt&f)===f&&(An===4||An===3&&(Dt&62914560)===Dt&&300>bn()-cy?(Gt&2)===0&&Rl(o,0):ay|=f,Tl===Dt&&(Tl=0)),Ji(o)}function yS(o,l){l===0&&(l=Zc()),o=cl(o,l),o!==null&&(Ci(o,l),Ji(o))}function dP(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),yS(o,f)}function pP(o,l){var f=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),yS(o,f)}function gP(o,l){return bt(o,l)}var Qh=null,kl=null,yy=!1,Zh=!1,by=!1,ga=0;function Ji(o){o!==kl&&o.next===null&&(kl===null?Qh=kl=o:kl=kl.next=o),Zh=!0,yy||(yy=!0,yP())}function Pu(o,l){if(!by&&Zh){by=!0;do for(var f=!1,p=Qh;p!==null;){if(o!==0){var y=p.pendingLanes;if(y===0)var T=0;else{var N=p.suspendedLanes,L=p.pingedLanes;T=(1<<31-ht(42|o)+1)-1,T&=y&~(N&~L),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,xS(p,T))}else T=Dt,T=Bn(p,p===gn?T:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(T&3)===0||Fr(p,T)||(f=!0,xS(p,T));p=p.next}while(f);by=!1}}function mP(){bS()}function bS(){Zh=yy=!1;var o=0;ga!==0&&(EP()&&(o=ga),ga=0);for(var l=bn(),f=null,p=Qh;p!==null;){var y=p.next,T=_S(p,l);T===0?(p.next=null,f===null?Qh=y:f.next=y,y===null&&(kl=f)):(f=p,(o!==0||(T&3)!==0)&&(Zh=!0)),p=y}Pu(o)}function _S(o,l){for(var f=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var N=31-ht(T),L=1<<N,G=y[N];G===-1?((L&f)===0||(L&p)!==0)&&(y[N]=Xr(L,l)):G<=l&&(o.expiredLanes|=L),T&=~L}if(l=gn,f=Dt,f=Bn(o,o===l?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,f===0||o===l&&(Jt===2||Jt===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&qt(p),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Fr(o,f)){if(l=f&-f,l===o.callbackPriority)return l;switch(p!==null&&qt(p),D(f)){case 2:case 8:f=ys;break;case 32:f=lr;break;case 268435456:f=Xi;break;default:f=lr}return p=vS.bind(null,o),f=bt(f,p),o.callbackPriority=l,o.callbackNode=f,l}return p!==null&&p!==null&&qt(p),o.callbackPriority=2,o.callbackNode=null,2}function vS(o,l){if(ur!==0&&ur!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Kh()&&o.callbackNode!==f)return null;var p=Dt;return p=Bn(o,o===gn?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(nS(o,p,l),_S(o,bn()),o.callbackNode!=null&&o.callbackNode===f?vS.bind(null,o):null)}function xS(o,l){if(Kh())return null;nS(o,l,!0)}function yP(){RP(function(){(Gt&6)!==0?bt(ln,mP):bS()})}function _y(){return ga===0&&(ga=Go()),ga}function wS(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:lh(""+o)}function SS(o,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,o.id&&f.setAttribute("form",o.id),l.parentNode.insertBefore(f,l),o=new FormData(o),f.parentNode.removeChild(f),o}function bP(o,l,f,p,y){if(l==="submit"&&f&&f.stateNode===y){var T=wS((y[E]||null).action),N=p.submitter;N&&(l=(l=N[E]||null)?wS(l.formAction):N.getAttribute("formAction"),l!==null&&(T=l,N=null));var L=new hh("action","action",null,p,y);o.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ga!==0){var G=N?SS(y,N):new FormData(y);Um(f,{pending:!0,data:G,method:y.method,action:T},null,G)}}else typeof T=="function"&&(L.preventDefault(),G=N?SS(y,N):new FormData(y),Um(f,{pending:!0,data:G,method:y.method,action:T},T,G))},currentTarget:y}]})}}for(var vy=0;vy<im.length;vy++){var xy=im[vy],_P=xy.toLowerCase(),vP=xy[0].toUpperCase()+xy.slice(1);Mi(_P,"on"+vP)}Mi(nw,"onAnimationEnd"),Mi(rw,"onAnimationIteration"),Mi(iw,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(BO,"onTransitionRun"),Mi(jO,"onTransitionStart"),Mi(UO,"onTransitionCancel"),Mi(sw,"onTransitionEnd"),ut("onMouseEnter",["mouseout","mouseover"]),ut("onMouseLeave",["mouseout","mouseover"]),ut("onPointerEnter",["pointerout","pointerover"]),ut("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function TS(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],y=p.event;p=p.listeners;e:{var T=void 0;if(l)for(var N=p.length-1;0<=N;N--){var L=p[N],G=L.instance,be=L.currentTarget;if(L=L.listener,G!==T&&y.isPropagationStopped())break e;T=L,y.currentTarget=be;try{T(y)}catch(Ie){jh(Ie)}y.currentTarget=null,T=G}else for(N=0;N<p.length;N++){if(L=p[N],G=L.instance,be=L.currentTarget,L=L.listener,G!==T&&y.isPropagationStopped())break e;T=L,y.currentTarget=be;try{T(y)}catch(Ie){jh(Ie)}y.currentTarget=null,T=G}}}}function Mt(o,l){var f=l[V];f===void 0&&(f=l[V]=new Set);var p=o+"__bubble";f.has(p)||(ES(l,o,2,!1),f.add(p))}function wy(o,l,f){var p=0;l&&(p|=4),ES(f,o,p,l)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Sy(o){if(!o[Gh]){o[Gh]=!0,Ve.forEach(function(f){f!=="selectionchange"&&(xP.has(f)||wy(f,!1,o),wy(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Gh]||(l[Gh]=!0,wy("selectionchange",!1,l))}}function ES(o,l,f,p){switch(KS(l)){case 2:var y=YP;break;case 8:y=KP;break;default:y=By}f=y.bind(null,l,f,o),y=void 0,!Wg||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,f,{capture:!0,passive:y}):o.addEventListener(l,f,!0):y!==void 0?o.addEventListener(l,f,{passive:y}):o.addEventListener(l,f,!1)}function Ty(o,l,f,p,y){var T=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var L=p.stateNode.containerInfo;if(L===y)break;if(N===4)for(N=p.return;N!==null;){var G=N.tag;if((G===3||G===4)&&N.stateNode.containerInfo===y)return;N=N.return}for(;L!==null;){if(N=ze(L),N===null)return;if(G=N.tag,G===5||G===6||G===26||G===27){p=T=N;continue e}L=L.parentNode}}p=p.return}Ix(function(){var be=T,Ie=$g(f),De=[];e:{var ve=ow.get(o);if(ve!==void 0){var we=hh,yt=o;switch(o){case"keypress":if(uh(f)===0)break e;case"keydown":case"keyup":we=gO;break;case"focusin":yt="focus",we=Kg;break;case"focusout":yt="blur",we=Kg;break;case"beforeblur":case"afterblur":we=Kg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=rO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=bO;break;case nw:case rw:case iw:we=oO;break;case sw:we=vO;break;case"scroll":case"scrollend":we=tO;break;case"wheel":we=wO;break;case"copy":case"cut":case"paste":we=lO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Bx;break;case"toggle":case"beforetoggle":we=TO}var dt=(l&4)!==0,rn=!dt&&(o==="scroll"||o==="scrollend"),he=dt?ve!==null?ve+"Capture":null:ve;dt=[];for(var se=be,ye;se!==null;){var Pe=se;if(ye=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||ye===null||he===null||(Pe=eu(se,he),Pe!=null&&dt.push(Fu(se,Pe,ye))),rn)break;se=se.return}0<dt.length&&(ve=new we(ve,yt,null,f,Ie),De.push({event:ve,listeners:dt}))}}if((l&7)===0){e:{if(ve=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",ve&&f!==Vg&&(yt=f.relatedTarget||f.fromElement)&&(ze(yt)||yt[j]))break e;if((we||ve)&&(ve=Ie.window===Ie?Ie:(ve=Ie.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?(yt=f.relatedTarget||f.toElement,we=be,yt=yt?ze(yt):null,yt!==null&&(rn=s(yt),dt=yt.tag,yt!==rn||dt!==5&&dt!==27&&dt!==6)&&(yt=null)):(we=null,yt=be),we!==yt)){if(dt=Dx,Pe="onMouseLeave",he="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(dt=Bx,Pe="onPointerLeave",he="onPointerEnter",se="pointer"),rn=we==null?ve:Ne(we),ye=yt==null?ve:Ne(yt),ve=new dt(Pe,se+"leave",we,f,Ie),ve.target=rn,ve.relatedTarget=ye,Pe=null,ze(Ie)===be&&(dt=new dt(he,se+"enter",yt,f,Ie),dt.target=ye,dt.relatedTarget=rn,Pe=dt),rn=Pe,we&&yt)t:{for(dt=we,he=yt,se=0,ye=dt;ye;ye=Ml(ye))se++;for(ye=0,Pe=he;Pe;Pe=Ml(Pe))ye++;for(;0<se-ye;)dt=Ml(dt),se--;for(;0<ye-se;)he=Ml(he),ye--;for(;se--;){if(dt===he||he!==null&&dt===he.alternate)break t;dt=Ml(dt),he=Ml(he)}dt=null}else dt=null;we!==null&&AS(De,ve,we,dt,!1),yt!==null&&rn!==null&&AS(De,rn,yt,dt,!0)}}e:{if(ve=be?Ne(be):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var Ge=Wx;else if($x(ve))if(qx)Ge=PO;else{Ge=IO;var Ct=NO}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?be&&zg(be.elementType)&&(Ge=Wx):Ge=OO;if(Ge&&(Ge=Ge(o,be))){Hx(De,Ge,f,Ie);break e}Ct&&Ct(o,ve,be),o==="focusout"&&be&&ve.type==="number"&&be.memoizedProps.value!=null&&Jc(ve,"number",ve.value)}switch(Ct=be?Ne(be):window,o){case"focusin":($x(Ct)||Ct.contentEditable==="true")&&(ol=Ct,tm=be,lu=null);break;case"focusout":lu=tm=ol=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,ew(De,f,Ie);break;case"selectionchange":if(FO)break;case"keydown":case"keyup":ew(De,f,Ie)}var rt;if(Zg)e:{switch(o){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else sl?zx(o,f)&&(pt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(pt="onCompositionStart");pt&&(jx&&f.locale!=="ko"&&(sl||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&sl&&(rt=Ox()):(Ys=Ie,qg="value"in Ys?Ys.value:Ys.textContent,sl=!0)),Ct=Jh(be,pt),0<Ct.length&&(pt=new Fx(pt,o,null,f,Ie),De.push({event:pt,listeners:Ct}),rt?pt.data=rt:(rt=Vx(f),rt!==null&&(pt.data=rt)))),(rt=AO?RO(o,f):CO(o,f))&&(pt=Jh(be,"onBeforeInput"),0<pt.length&&(Ct=new Fx("onBeforeInput","beforeinput",null,f,Ie),De.push({event:Ct,listeners:pt}),Ct.data=rt)),bP(De,o,be,f,Ie)}TS(De,l)})}function Fu(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Jh(o,l){for(var f=l+"Capture",p=[];o!==null;){var y=o,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=eu(o,f),y!=null&&p.unshift(Fu(o,y,T)),y=eu(o,l),y!=null&&p.push(Fu(o,y,T))),o.tag===3)return p;o=o.return}return[]}function Ml(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function AS(o,l,f,p,y){for(var T=l._reactName,N=[];f!==null&&f!==p;){var L=f,G=L.alternate,be=L.stateNode;if(L=L.tag,G!==null&&G===p)break;L!==5&&L!==26&&L!==27||be===null||(G=be,y?(be=eu(f,T),be!=null&&N.unshift(Fu(f,be,G))):y||(be=eu(f,T),be!=null&&N.push(Fu(f,be,G)))),f=f.return}N.length!==0&&o.push({event:l,listeners:N})}var wP=/\r\n?/g,SP=/\u0000|\uFFFD/g;function RS(o){return(typeof o=="string"?o:""+o).replace(wP,`
`).replace(SP,"")}function CS(o,l){return l=RS(l),RS(o)===l}function ed(){}function nn(o,l,f,p,y,T){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Xs(o,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Xs(o,""+p);break;case"className":Be(o,"class",p);break;case"tabIndex":Be(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Be(o,f,p);break;case"style":Mx(o,p,T);break;case"data":if(l!=="object"){Be(o,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){o.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=lh(""+p),o.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(l!=="input"&&nn(o,l,"name",y.name,y,null),nn(o,l,"formEncType",y.formEncType,y,null),nn(o,l,"formMethod",y.formMethod,y,null),nn(o,l,"formTarget",y.formTarget,y,null)):(nn(o,l,"encType",y.encType,y,null),nn(o,l,"method",y.method,y,null),nn(o,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=lh(""+p),o.setAttribute(f,p);break;case"onClick":p!=null&&(o.onclick=ed);break;case"onScroll":p!=null&&Mt("scroll",o);break;case"onScrollEnd":p!=null&&Mt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}f=lh(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""+p):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":p===!0?o.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,p):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(f,p):o.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(f):o.setAttribute(f,p);break;case"popover":Mt("beforetoggle",o),Mt("toggle",o),oe(o,"popover",p);break;case"xlinkActuate":We(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":We(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":We(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":We(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":We(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":We(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":We(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":We(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":We(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":oe(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=JI.get(f)||f,oe(o,f,p))}}function Ey(o,l,f,p,y,T){switch(f){case"style":Mx(o,p,T);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof p=="string"?Xs(o,p):(typeof p=="number"||typeof p=="bigint")&&Xs(o,""+p);break;case"onScroll":p!=null&&Mt("scroll",o);break;case"onScrollEnd":p!=null&&Mt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=ed);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ke.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),T=o[E]||null,T=T!=null?T[f]:null,typeof T=="function"&&o.removeEventListener(l,T,y),typeof p=="function")){typeof T!="function"&&T!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(l,p,y);break e}f in o?o[f]=p:p===!0?o.setAttribute(f,""):oe(o,f,p)}}}function fr(o,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",o),Mt("load",o);var p=!1,y=!1,T;for(T in f)if(f.hasOwnProperty(T)){var N=f[T];if(N!=null)switch(T){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:nn(o,l,T,N,f,null)}}y&&nn(o,l,"srcSet",f.srcSet,f,null),p&&nn(o,l,"src",f.src,f,null);return;case"input":Mt("invalid",o);var L=T=N=y=null,G=null,be=null;for(p in f)if(f.hasOwnProperty(p)){var Ie=f[p];if(Ie!=null)switch(p){case"name":y=Ie;break;case"type":N=Ie;break;case"checked":G=Ie;break;case"defaultChecked":be=Ie;break;case"value":T=Ie;break;case"defaultValue":L=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,l));break;default:nn(o,l,p,Ie,f,null)}}ih(o,T,L,G,be,N,y,!1),xt(o);return;case"select":Mt("invalid",o),p=N=T=null;for(y in f)if(f.hasOwnProperty(y)&&(L=f[y],L!=null))switch(y){case"value":T=L;break;case"defaultValue":N=L;break;case"multiple":p=L;default:nn(o,l,y,L,f,null)}l=T,f=N,o.multiple=!!p,l!=null?qs(o,!!p,l,!1):f!=null&&qs(o,!!p,f,!0);return;case"textarea":Mt("invalid",o),T=y=p=null;for(N in f)if(f.hasOwnProperty(N)&&(L=f[N],L!=null))switch(N){case"value":p=L;break;case"defaultValue":y=L;break;case"children":T=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:nn(o,l,N,L,f,null)}oh(o,p,y,T),xt(o);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(p=f[G],p!=null))switch(G){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:nn(o,l,G,p,f,null)}return;case"dialog":Mt("beforetoggle",o),Mt("toggle",o),Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":Mt("load",o);break;case"video":case"audio":for(p=0;p<Du.length;p++)Mt(Du[p],o);break;case"image":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"embed":case"source":case"link":Mt("error",o),Mt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in f)if(f.hasOwnProperty(be)&&(p=f[be],p!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:nn(o,l,be,p,f,null)}return;default:if(zg(l)){for(Ie in f)f.hasOwnProperty(Ie)&&(p=f[Ie],p!==void 0&&Ey(o,l,Ie,p,f,void 0));return}}for(L in f)f.hasOwnProperty(L)&&(p=f[L],p!=null&&nn(o,l,L,p,f,null))}function TP(o,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,N=null,L=null,G=null,be=null,Ie=null;for(we in f){var De=f[we];if(f.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":G=De;default:p.hasOwnProperty(we)||nn(o,l,we,null,p,De)}}for(var ve in p){var we=p[ve];if(De=f[ve],p.hasOwnProperty(ve)&&(we!=null||De!=null))switch(ve){case"type":T=we;break;case"name":y=we;break;case"checked":be=we;break;case"defaultChecked":Ie=we;break;case"value":N=we;break;case"defaultValue":L=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,l));break;default:we!==De&&nn(o,l,ve,we,p,De)}}Gc(o,N,L,G,be,Ie,T,y);return;case"select":we=N=L=ve=null;for(T in f)if(G=f[T],f.hasOwnProperty(T)&&G!=null)switch(T){case"value":break;case"multiple":we=G;default:p.hasOwnProperty(T)||nn(o,l,T,null,p,G)}for(y in p)if(T=p[y],G=f[y],p.hasOwnProperty(y)&&(T!=null||G!=null))switch(y){case"value":ve=T;break;case"defaultValue":L=T;break;case"multiple":N=T;default:T!==G&&nn(o,l,y,T,p,G)}l=L,f=N,p=we,ve!=null?qs(o,!!f,ve,!1):!!p!=!!f&&(l!=null?qs(o,!!f,l,!0):qs(o,!!f,f?[]:"",!1));return;case"textarea":we=ve=null;for(L in f)if(y=f[L],f.hasOwnProperty(L)&&y!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:nn(o,l,L,null,p,y)}for(N in p)if(y=p[N],T=f[N],p.hasOwnProperty(N)&&(y!=null||T!=null))switch(N){case"value":ve=y;break;case"defaultValue":we=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==T&&nn(o,l,N,y,p,T)}sh(o,ve,we);return;case"option":for(var yt in f)if(ve=f[yt],f.hasOwnProperty(yt)&&ve!=null&&!p.hasOwnProperty(yt))switch(yt){case"selected":o.selected=!1;break;default:nn(o,l,yt,null,p,ve)}for(G in p)if(ve=p[G],we=f[G],p.hasOwnProperty(G)&&ve!==we&&(ve!=null||we!=null))switch(G){case"selected":o.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:nn(o,l,G,ve,p,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in f)ve=f[dt],f.hasOwnProperty(dt)&&ve!=null&&!p.hasOwnProperty(dt)&&nn(o,l,dt,null,p,ve);for(be in p)if(ve=p[be],we=f[be],p.hasOwnProperty(be)&&ve!==we&&(ve!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:nn(o,l,be,ve,p,we)}return;default:if(zg(l)){for(var rn in f)ve=f[rn],f.hasOwnProperty(rn)&&ve!==void 0&&!p.hasOwnProperty(rn)&&Ey(o,l,rn,void 0,p,ve);for(Ie in p)ve=p[Ie],we=f[Ie],!p.hasOwnProperty(Ie)||ve===we||ve===void 0&&we===void 0||Ey(o,l,Ie,ve,p,we);return}}for(var he in f)ve=f[he],f.hasOwnProperty(he)&&ve!=null&&!p.hasOwnProperty(he)&&nn(o,l,he,null,p,ve);for(De in p)ve=p[De],we=f[De],!p.hasOwnProperty(De)||ve===we||ve==null&&we==null||nn(o,l,De,ve,p,we)}var Ay=null,Ry=null;function td(o){return o.nodeType===9?o:o.ownerDocument}function kS(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MS(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Cy(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ky=null;function EP(){var o=window.event;return o&&o.type==="popstate"?o===ky?!1:(ky=o,!0):(ky=null,!1)}var NS=typeof setTimeout=="function"?setTimeout:void 0,AP=typeof clearTimeout=="function"?clearTimeout:void 0,IS=typeof Promise=="function"?Promise:void 0,RP=typeof queueMicrotask=="function"?queueMicrotask:typeof IS<"u"?function(o){return IS.resolve(null).then(o).catch(CP)}:NS;function CP(o){setTimeout(function(){throw o})}function uo(o){return o==="head"}function OS(o,l){var f=l,p=0,y=0;do{var T=f.nextSibling;if(o.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<p&&8>p){f=p;var N=o.ownerDocument;if(f&1&&Bu(N.documentElement),f&2&&Bu(N.body),f&4)for(f=N.head,Bu(f),N=f.firstChild;N;){var L=N.nextSibling,G=N.nodeName;N[J]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&N.rel.toLowerCase()==="stylesheet"||f.removeChild(N),N=L}}if(y===0){o.removeChild(T),Wu(l);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:p=f.charCodeAt(0)-48;else p=0;f=T}while(f);Wu(l)}function My(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":My(f),Re(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function kP(o,l,f,p){for(;o.nodeType===1;){var y=f;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[J])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Ii(o.nextSibling),o===null)break}return null}function MP(o,l,f){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Ii(o.nextSibling),o===null))return null;return o}function Ny(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function NP(o,l){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Ii(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Iy=null;function PS(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}function DS(o,l,f){switch(l=td(f),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Bu(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Re(o)}var yi=new Map,FS=new Set;function nd(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ns=Se.d;Se.d={f:IP,r:OP,D:PP,C:DP,L:FP,m:BP,X:UP,S:jP,M:LP};function IP(){var o=Ns.f(),l=Xh();return o||l}function OP(o){var l=xe(o);l!==null&&l.tag===5&&l.type==="form"?n1(l):Ns.r(o)}var Nl=typeof document>"u"?null:document;function BS(o,l,f){var p=Nl;if(p&&typeof l=="string"&&l){var y=Ut(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),FS.has(y)||(FS.add(y),o={rel:o,crossOrigin:f,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),fr(l,"link",o),ee(l),p.head.appendChild(l)))}}function PP(o){Ns.D(o),BS("dns-prefetch",o,null)}function DP(o,l){Ns.C(o,l),BS("preconnect",o,l)}function FP(o,l,f){Ns.L(o,l,f);var p=Nl;if(p&&o&&l){var y='link[rel="preload"][as="'+Ut(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Ut(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Ut(f.imageSizes)+'"]')):y+='[href="'+Ut(o)+'"]';var T=y;switch(l){case"style":T=Il(o);break;case"script":T=Ol(o)}yi.has(T)||(o=d({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:o,as:l},f),yi.set(T,o),p.querySelector(y)!==null||l==="style"&&p.querySelector(ju(T))||l==="script"&&p.querySelector(Uu(T))||(l=p.createElement("link"),fr(l,"link",o),ee(l),p.head.appendChild(l)))}}function BP(o,l){Ns.m(o,l);var f=Nl;if(f&&o){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Ut(p)+'"][href="'+Ut(o)+'"]',T=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ol(o)}if(!yi.has(T)&&(o=d({rel:"modulepreload",href:o},l),yi.set(T,o),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Uu(T)))return}p=f.createElement("link"),fr(p,"link",o),ee(p),f.head.appendChild(p)}}}function jP(o,l,f){Ns.S(o,l,f);var p=Nl;if(p&&o){var y=qe(p).hoistableStyles,T=Il(o);l=l||"default";var N=y.get(T);if(!N){var L={loading:0,preload:null};if(N=p.querySelector(ju(T)))L.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":l},f),(f=yi.get(T))&&Oy(o,f);var G=N=p.createElement("link");ee(G),fr(G,"link",o),G._p=new Promise(function(be,Ie){G.onload=be,G.onerror=Ie}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,rd(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:L},y.set(T,N)}}}function UP(o,l){Ns.X(o,l);var f=Nl;if(f&&o){var p=qe(f).hoistableScripts,y=Ol(o),T=p.get(y);T||(T=f.querySelector(Uu(y)),T||(o=d({src:o,async:!0},l),(l=yi.get(y))&&Py(o,l),T=f.createElement("script"),ee(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(y,T))}}function LP(o,l){Ns.M(o,l);var f=Nl;if(f&&o){var p=qe(f).hoistableScripts,y=Ol(o),T=p.get(y);T||(T=f.querySelector(Uu(y)),T||(o=d({src:o,async:!0,type:"module"},l),(l=yi.get(y))&&Py(o,l),T=f.createElement("script"),ee(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(y,T))}}function jS(o,l,f,p){var y=(y=Oe.current)?nd(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Il(f.href),f=qe(y).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Il(f.href);var T=qe(y).hoistableStyles,N=T.get(o);if(N||(y=y.ownerDocument||y,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,N),(T=y.querySelector(ju(o)))&&!T._p&&(N.instance=T,N.state.loading=5),yi.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},yi.set(o,f),T||zP(y,o,f,N.state))),l&&p===null)throw Error(r(528,""));return N}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ol(f),f=qe(y).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Il(o){return'href="'+Ut(o)+'"'}function ju(o){return'link[rel="stylesheet"]['+o+"]"}function US(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function zP(o,l,f,p){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=o.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),fr(l,"link",f),ee(l),o.head.appendChild(l))}function Ol(o){return'[src="'+Ut(o)+'"]'}function Uu(o){return"script[async]"+o}function LS(o,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=o.querySelector('style[data-href~="'+Ut(f.href)+'"]');if(p)return l.instance=p,ee(p),p;var y=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),ee(p),fr(p,"style",y),rd(p,f.precedence,o),l.instance=p;case"stylesheet":y=Il(f.href);var T=o.querySelector(ju(y));if(T)return l.state.loading|=4,l.instance=T,ee(T),T;p=US(f),(y=yi.get(y))&&Oy(p,y),T=(o.ownerDocument||o).createElement("link"),ee(T);var N=T;return N._p=new Promise(function(L,G){N.onload=L,N.onerror=G}),fr(T,"link",p),l.state.loading|=4,rd(T,f.precedence,o),l.instance=T;case"script":return T=Ol(f.src),(y=o.querySelector(Uu(T)))?(l.instance=y,ee(y),y):(p=f,(y=yi.get(T))&&(p=d({},f),Py(p,y)),o=o.ownerDocument||o,y=o.createElement("script"),ee(y),fr(y,"link",p),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,rd(p,f.precedence,o));return l.instance}function rd(o,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,T=y,N=0;N<p.length;N++){var L=p[N];if(L.dataset.precedence===l)T=L;else if(T!==y)break}T?T.parentNode.insertBefore(o,T.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(o,l.firstChild))}function Oy(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Py(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var id=null;function zS(o,l,f){if(id===null){var p=new Map,y=id=new Map;y.set(f,p)}else y=id,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(o))return p;for(p.set(o,null),f=f.getElementsByTagName(o),y=0;y<f.length;y++){var T=f[y];if(!(T[J]||T[x]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var N=T.getAttribute(l)||"";N=o+N;var L=p.get(N);L?L.push(T):p.set(N,[T])}}return p}function VS(o,l,f){o=o.ownerDocument||o,o.head.insertBefore(f,l==="title"?o.querySelector("head > title"):null)}function VP(o,l,f){if(f===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function $S(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Lu=null;function $P(){}function HP(o,l,f){if(Lu===null)throw Error(r(475));var p=Lu;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Il(f.href),T=o.querySelector(ju(y));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=sd.bind(p),o.then(p,p)),l.state.loading|=4,l.instance=T,ee(T);return}T=o.ownerDocument||o,f=US(f),(y=yi.get(y))&&Oy(f,y),T=T.createElement("link"),ee(T);var N=T;N._p=new Promise(function(L,G){N.onload=L,N.onerror=G}),fr(T,"link",f),l.instance=T}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=sd.bind(p),o.addEventListener("load",l),o.addEventListener("error",l))}}function WP(){if(Lu===null)throw Error(r(475));var o=Lu;return o.stylesheets&&o.count===0&&Dy(o,o.stylesheets),0<o.count?function(l){var f=setTimeout(function(){if(o.stylesheets&&Dy(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(f)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)Dy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var od=null;function Dy(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,od=new Map,l.forEach(qP,o),od=null,sd.call(o))}function qP(o,l){if(!(l.state.loading&4)){var f=od.get(o);if(f)var p=f.get(null);else{f=new Map,od.set(o,f);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var N=y[T];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),p=N)}p&&f.set(null,p)}y=l.instance,N=y.getAttribute("data-precedence"),T=f.get(N)||p,T===p&&f.set(null,y),f.set(N,y),this.count++,p=sd.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),T?T.parentNode.insertBefore(y,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var zu={$$typeof:M,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function XP(o,l,f,p,y,T,N,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.hiddenUpdates=nl(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function HS(o,l,f,p,y,T,N,L,G,be,Ie,De){return o=new XP(o,l,f,N,L,G,be,De),l=1,T===!0&&(l|=24),T=Qr(3,null,null,l),o.current=T,T.stateNode=o,l=mm(),l.refCount++,o.pooledCache=l,l.refCount++,T.memoizedState={element:p,isDehydrated:f,cache:l},vm(T),o}function WS(o){return o?(o=ul,o):ul}function qS(o,l,f,p,y,T){y=WS(y),p.context===null?p.context=y:p.pendingContext=y,p=Zs(l),p.payload={element:f},T=T===void 0?null:T,T!==null&&(p.callback=T),f=Gs(o,p,l),f!==null&&(ti(f,o,l),yu(f,o,l))}function XS(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Fy(o,l){XS(o,l),(o=o.alternate)&&XS(o,l)}function YS(o){if(o.tag===13){var l=cl(o,67108864);l!==null&&ti(l,o,67108864),Fy(o,67108864)}}var ad=!0;function YP(o,l,f,p){var y=ne.T;ne.T=null;var T=Se.p;try{Se.p=2,By(o,l,f,p)}finally{Se.p=T,ne.T=y}}function KP(o,l,f,p){var y=ne.T;ne.T=null;var T=Se.p;try{Se.p=8,By(o,l,f,p)}finally{Se.p=T,ne.T=y}}function By(o,l,f,p){if(ad){var y=jy(p);if(y===null)Ty(o,l,p,ld,f),QS(o,p);else if(ZP(y,o,l,f,p))p.stopPropagation();else if(QS(o,p),l&4&&-1<QP.indexOf(o)){for(;y!==null;){var T=xe(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var N=Rr(T.pendingLanes);if(N!==0){var L=T;for(L.pendingLanes|=2,L.entangledLanes|=2;N;){var G=1<<31-ht(N);L.entanglements[1]|=G,N&=~G}Ji(T),(Gt&6)===0&&(Wh=bn()+500,Pu(0))}}break;case 13:L=cl(T,2),L!==null&&ti(L,T,2),Xh(),Fy(T,2)}if(T=jy(p),T===null&&Ty(o,l,p,ld,f),T===y)break;y=T}y!==null&&p.stopPropagation()}else Ty(o,l,p,null,f)}}function jy(o){return o=$g(o),Uy(o)}var ld=null;function Uy(o){if(ld=null,o=ze(o),o!==null){var l=s(o);if(l===null)o=null;else{var f=l.tag;if(f===13){if(o=a(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return ld=o,null}function KS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case ln:return 2;case ys:return 8;case lr:case gr:return 32;case Xi:return 268435456;default:return 32}default:return 32}}var Ly=!1,fo=null,ho=null,po=null,Vu=new Map,$u=new Map,go=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QS(o,l){switch(o){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Vu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(l.pointerId)}}function Hu(o,l,f,p,y,T){return o===null||o.nativeEvent!==T?(o={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:T,targetContainers:[y]},l!==null&&(l=xe(l),l!==null&&YS(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function ZP(o,l,f,p,y){switch(l){case"focusin":return fo=Hu(fo,o,l,f,p,y),!0;case"dragenter":return ho=Hu(ho,o,l,f,p,y),!0;case"mouseover":return po=Hu(po,o,l,f,p,y),!0;case"pointerover":var T=y.pointerId;return Vu.set(T,Hu(Vu.get(T)||null,o,l,f,p,y)),!0;case"gotpointercapture":return T=y.pointerId,$u.set(T,Hu($u.get(T)||null,o,l,f,p,y)),!0}return!1}function ZS(o){var l=ze(o.target);if(l!==null){var f=s(l);if(f!==null){if(l=f.tag,l===13){if(l=a(f),l!==null){o.blockedOn=l,_(o.priority,function(){if(f.tag===13){var p=ei();p=Ws(p);var y=cl(f,p);y!==null&&ti(y,f,p),Fy(f,p)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function cd(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=jy(o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);Vg=p,f.target.dispatchEvent(p),Vg=null}else return l=xe(f),l!==null&&YS(l),o.blockedOn=f,!1;l.shift()}return!0}function GS(o,l,f){cd(o)&&f.delete(l)}function GP(){Ly=!1,fo!==null&&cd(fo)&&(fo=null),ho!==null&&cd(ho)&&(ho=null),po!==null&&cd(po)&&(po=null),Vu.forEach(GS),$u.forEach(GS)}function ud(o,l){o.blockedOn===l&&(o.blockedOn=null,Ly||(Ly=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GP)))}var fd=null;function JS(o){fd!==o&&(fd=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fd===o&&(fd=null);for(var l=0;l<o.length;l+=3){var f=o[l],p=o[l+1],y=o[l+2];if(typeof p!="function"){if(Uy(p||f)===null)continue;break}var T=xe(f);T!==null&&(o.splice(l,3),l-=3,Um(T,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function Wu(o){function l(G){return ud(G,o)}fo!==null&&ud(fo,o),ho!==null&&ud(ho,o),po!==null&&ud(po,o),Vu.forEach(l),$u.forEach(l);for(var f=0;f<go.length;f++){var p=go[f];p.blockedOn===o&&(p.blockedOn=null)}for(;0<go.length&&(f=go[0],f.blockedOn===null);)ZS(f),f.blockedOn===null&&go.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],T=f[p+1],N=y[E]||null;if(typeof T=="function")N||JS(f);else if(N){var L=null;if(T&&T.hasAttribute("formAction")){if(y=T,N=T[E]||null)L=N.formAction;else if(Uy(y)!==null)continue}else L=N.action;typeof L=="function"?f[p+1]=L:(f.splice(p,3),p-=3),JS(f)}}}function zy(o){this._internalRoot=o}hd.prototype.render=zy.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=ei();qS(f,p,o,l,null,null)},hd.prototype.unmount=zy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;qS(o.current,2,null,o,null,null),Xh(),l[j]=null}};function hd(o){this._internalRoot=o}hd.prototype.unstable_scheduleHydration=function(o){if(o){var l=w();o={blockedOn:null,target:o,priority:l};for(var f=0;f<go.length&&l!==0&&l<go[f].priority;f++);go.splice(f,0,o),f===0&&ZS(o)}};var e2=e.version;if(e2!=="19.1.0")throw Error(r(527,e2,"19.1.0"));Se.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var JP={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{Me=dd.inject(JP),Le=dd}catch{}}return Xu.createRoot=function(o,l){if(!i(o))throw Error(r(299));var f=!1,p="",y=m1,T=y1,N=b1,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=HS(o,1,!1,null,null,f,p,y,T,N,L,null),o[j]=l.current,Sy(o),new zy(l)},Xu.hydrateRoot=function(o,l,f){if(!i(o))throw Error(r(299));var p=!1,y="",T=m1,N=y1,L=b1,G=null,be=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(L=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(G=f.unstable_transitionCallbacks),f.formState!==void 0&&(be=f.formState)),l=HS(o,1,!0,l,f??null,p,y,T,N,L,G,be),l.context=WS(null),f=l.current,p=ei(),p=Ws(p),y=Zs(p),y.callback=null,Gs(f,y,p),f=p,l.current.lanes=f,Ci(l,f),Ji(l),o[j]=l.current,Sy(o),new hd(l)},Xu.version="19.1.0",Xu}var f2;function f4(){if(f2)return Wy.exports;f2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wy.exports=u4(),Wy.exports}var h4=f4(),Uc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ua=typeof window>"u"||"Deno"in globalThis;function Or(){}function d4(t,e){return typeof t=="function"?t(e):t}function u_(t){return typeof t=="number"&&t>=0&&t!==1/0}function vA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Vo(t,e){return typeof t=="function"?t(e):t}function Ui(t,e){return typeof t=="function"?t(e):t}function h2(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:c}=t;if(a){if(r){if(e.queryHash!==Y0(a,e.options))return!1}else if(!Rf(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||s&&!s(e))}function d2(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(La(e.options.mutationKey)!==La(s))return!1}else if(!Rf(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Y0(t,e){return((e==null?void 0:e.queryKeyHashFn)||La)(t)}function La(t){return JSON.stringify(t,(e,n)=>f_(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Rf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Rf(t[n],e[n])):!1}function xA(t,e){if(t===e)return t;const n=p2(t)&&p2(e);if(n||f_(t)&&f_(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),a=s.length,c=n?[]:{},u=new Set(r);let h=0;for(let d=0;d<a;d++){const g=n?d:s[d];(!n&&u.has(g)||n)&&t[g]===void 0&&e[g]===void 0?(c[g]=void 0,h++):(c[g]=xA(t[g],e[g]),c[g]===t[g]&&t[g]!==void 0&&h++)}return i===a&&h===i?t:c}return e}function ap(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function p2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function f_(t){if(!g2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!g2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function g2(t){return Object.prototype.toString.call(t)==="[object Object]"}function p4(t){return new Promise(e=>{setTimeout(e,t)})}function h_(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?xA(t,e):e}function g4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function m4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K0=Symbol();function wA(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===K0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function SA(t,e){return typeof t=="function"?t(...e):!!t}var Aa,ko,dc,aA,y4=(aA=class extends Uc{constructor(){super();at(this,Aa);at(this,ko);at(this,dc);Qe(this,dc,e=>{if(!Ua&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){te(this,ko)||this.setEventListener(te(this,dc))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,ko))==null||e.call(this),Qe(this,ko,void 0))}setEventListener(e){var n;Qe(this,dc,e),(n=te(this,ko))==null||n.call(this),Qe(this,ko,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){te(this,Aa)!==e&&(Qe(this,Aa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof te(this,Aa)=="boolean"?te(this,Aa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Aa=new WeakMap,ko=new WeakMap,dc=new WeakMap,aA),Q0=new y4,pc,Mo,gc,lA,b4=(lA=class extends Uc{constructor(){super();at(this,pc,!0);at(this,Mo);at(this,gc);Qe(this,gc,e=>{if(!Ua&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){te(this,Mo)||this.setEventListener(te(this,gc))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,Mo))==null||e.call(this),Qe(this,Mo,void 0))}setEventListener(e){var n;Qe(this,gc,e),(n=te(this,Mo))==null||n.call(this),Qe(this,Mo,e(this.setOnline.bind(this)))}setOnline(e){te(this,pc)!==e&&(Qe(this,pc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return te(this,pc)}},pc=new WeakMap,Mo=new WeakMap,gc=new WeakMap,lA),lp=new b4;function d_(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function _4(t){return Math.min(1e3*2**t,3e4)}function TA(t){return(t??"online")==="online"?lp.isOnline():!0}var EA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ky(t){return t instanceof EA}function AA(t){let e=!1,n=0,r=!1,i;const s=d_(),a=A=>{var C;r||(b(new EA(A)),(C=t.abort)==null||C.call(t))},c=()=>{e=!0},u=()=>{e=!1},h=()=>Q0.isFocused()&&(t.networkMode==="always"||lp.isOnline())&&t.canRun(),d=()=>TA(t.networkMode)&&t.canRun(),g=A=>{var C;r||(r=!0,(C=t.onSuccess)==null||C.call(t,A),i==null||i(),s.resolve(A))},b=A=>{var C;r||(r=!0,(C=t.onError)==null||C.call(t,A),i==null||i(),s.reject(A))},S=()=>new Promise(A=>{var C;i=k=>{(r||h())&&A(k)},(C=t.onPause)==null||C.call(t)}).then(()=>{var A;i=void 0,r||(A=t.onContinue)==null||A.call(t)}),R=()=>{if(r)return;let A;const C=n===0?t.initialPromise:void 0;try{A=C??t.fn()}catch(k){A=Promise.reject(k)}Promise.resolve(A).then(g).catch(k=>{var F;if(r)return;const P=t.retry??(Ua?0:3),M=t.retryDelay??_4,z=typeof M=="function"?M(n,k):M,$=P===!0||typeof P=="number"&&n<P||typeof P=="function"&&P(n,k);if(e||!$){b(k);return}n++,(F=t.onFail)==null||F.call(t,n,k),p4(z).then(()=>h()?void 0:S()).then(()=>{e?b(k):R()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:c,continueRetry:u,canStart:d,start:()=>(d()?R():S().then(R),s)}}var v4=t=>setTimeout(t,0);function x4(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=v4;const s=c=>{e?t.push(c):i(()=>{n(c)})},a=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||a()}return u},batchCalls:c=>(...u)=>{s(()=>{c(...u)})},schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Jn=x4(),Ra,cA,RA=(cA=class{constructor(){at(this,Ra)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),u_(this.gcTime)&&Qe(this,Ra,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ua?1/0:5*60*1e3))}clearGcTimeout(){te(this,Ra)&&(clearTimeout(te(this,Ra)),Qe(this,Ra,void 0))}},Ra=new WeakMap,cA),mc,yc,bi,Ca,xr,Lf,ka,Bi,Os,uA,w4=(uA=class extends RA{constructor(e){super();at(this,Bi);at(this,mc);at(this,yc);at(this,bi);at(this,Ca);at(this,xr);at(this,Lf);at(this,ka);Qe(this,ka,!1),Qe(this,Lf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Qe(this,Ca,e.client),Qe(this,bi,te(this,Ca).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Qe(this,mc,S4(this.options)),this.state=e.state??te(this,mc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=te(this,xr))==null?void 0:e.promise}setOptions(e){this.options={...te(this,Lf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,bi).remove(this)}setData(e,n){const r=h_(this.state.data,e,this.options);return vt(this,Bi,Os).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){vt(this,Bi,Os).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=te(this,xr))==null?void 0:r.promise;return(i=te(this,xr))==null||i.cancel(e),n?n.then(Or).catch(Or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,mc))}isActive(){return this.observers.some(e=>Ui(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Vo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!vA(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=te(this,xr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=te(this,xr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),te(this,bi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(te(this,xr)&&(te(this,ka)?te(this,xr).cancel({revert:!0}):te(this,xr).cancelRetry()),this.scheduleGc()),te(this,bi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||vt(this,Bi,Os).call(this,{type:"invalidate"})}fetch(e,n){var h,d,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(te(this,xr))return te(this,xr).continueRetry(),te(this,xr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,i=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Qe(this,ka,!0),r.signal)})},s=()=>{const b=wA(this.options,n),R=(()=>{const A={client:te(this,Ca),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return Qe(this,ka,!1),this.options.persister?this.options.persister(b,R,this):b(R)},c=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:te(this,Ca),state:this.state,fetchFn:s};return i(b),b})();(h=this.options.behavior)==null||h.onFetch(c,this),Qe(this,yc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&vt(this,Bi,Os).call(this,{type:"fetch",meta:(g=c.fetchOptions)==null?void 0:g.meta});const u=b=>{var S,R,A,C;Ky(b)&&b.silent||vt(this,Bi,Os).call(this,{type:"error",error:b}),Ky(b)||((R=(S=te(this,bi).config).onError)==null||R.call(S,b,this),(C=(A=te(this,bi).config).onSettled)==null||C.call(A,this.state.data,b,this)),this.scheduleGc()};return Qe(this,xr,AA({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:b=>{var S,R,A,C;if(b===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(k){u(k);return}(R=(S=te(this,bi).config).onSuccess)==null||R.call(S,b,this),(C=(A=te(this,bi).config).onSettled)==null||C.call(A,b,this.state.error,this),this.scheduleGc()},onError:u,onFail:(b,S)=>{vt(this,Bi,Os).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{vt(this,Bi,Os).call(this,{type:"pause"})},onContinue:()=>{vt(this,Bi,Os).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),te(this,xr).start()}},mc=new WeakMap,yc=new WeakMap,bi=new WeakMap,Ca=new WeakMap,xr=new WeakMap,Lf=new WeakMap,ka=new WeakMap,Bi=new WeakSet,Os=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...CA(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Ky(i)&&i.revert&&te(this,yc)?{...te(this,yc),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Jn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),te(this,bi).notify({query:this,type:"updated",action:e})})},uA);function CA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function S4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var is,fA,T4=(fA=class extends Uc{constructor(e={}){super();at(this,is);this.config=e,Qe(this,is,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??Y0(i,n);let a=this.get(s);return a||(a=new w4({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){te(this,is).has(e.queryHash)||(te(this,is).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=te(this,is).get(e.queryHash);n&&(e.destroy(),n===e&&te(this,is).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return te(this,is).get(e)}getAll(){return[...te(this,is).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>h2(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>h2(e,r)):n}notify(e){Jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},is=new WeakMap,fA),ss,Nr,Ma,os,To,hA,E4=(hA=class extends RA{constructor(e){super();at(this,os);at(this,ss);at(this,Nr);at(this,Ma);this.mutationId=e.mutationId,Qe(this,Nr,e.mutationCache),Qe(this,ss,[]),this.state=e.state||kA(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){te(this,ss).includes(e)||(te(this,ss).push(e),this.clearGcTimeout(),te(this,Nr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Qe(this,ss,te(this,ss).filter(n=>n!==e)),this.scheduleGc(),te(this,Nr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){te(this,ss).length||(this.state.status==="pending"?this.scheduleGc():te(this,Nr).remove(this))}continue(){var e;return((e=te(this,Ma))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,c,u,h,d,g,b,S,R,A,C,k,P,M,z,$,F,Z,Q;const n=()=>{vt(this,os,To).call(this,{type:"continue"})};Qe(this,Ma,AA({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(ue,Y)=>{vt(this,os,To).call(this,{type:"failed",failureCount:ue,error:Y})},onPause:()=>{vt(this,os,To).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Nr).canRun(this)}));const r=this.state.status==="pending",i=!te(this,Ma).canStart();try{if(r)n();else{vt(this,os,To).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(s=te(this,Nr).config).onMutate)==null?void 0:a.call(s,e,this));const Y=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e));Y!==this.state.context&&vt(this,os,To).call(this,{type:"pending",context:Y,variables:e,isPaused:i})}const ue=await te(this,Ma).start();return await((d=(h=te(this,Nr).config).onSuccess)==null?void 0:d.call(h,ue,e,this.state.context,this)),await((b=(g=this.options).onSuccess)==null?void 0:b.call(g,ue,e,this.state.context)),await((R=(S=te(this,Nr).config).onSettled)==null?void 0:R.call(S,ue,null,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,ue,null,e,this.state.context)),vt(this,os,To).call(this,{type:"success",data:ue}),ue}catch(ue){try{throw await((P=(k=te(this,Nr).config).onError)==null?void 0:P.call(k,ue,e,this.state.context,this)),await((z=(M=this.options).onError)==null?void 0:z.call(M,ue,e,this.state.context)),await((F=($=te(this,Nr).config).onSettled)==null?void 0:F.call($,void 0,ue,this.state.variables,this.state.context,this)),await((Q=(Z=this.options).onSettled)==null?void 0:Q.call(Z,void 0,ue,e,this.state.context)),ue}finally{vt(this,os,To).call(this,{type:"error",error:ue})}}finally{te(this,Nr).runNext(this)}}},ss=new WeakMap,Nr=new WeakMap,Ma=new WeakMap,os=new WeakSet,To=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Jn.batch(()=>{te(this,ss).forEach(r=>{r.onMutationUpdate(e)}),te(this,Nr).notify({mutation:this,type:"updated",action:e})})},hA);function kA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fs,ji,zf,dA,A4=(dA=class extends Uc{constructor(e={}){super();at(this,Fs);at(this,ji);at(this,zf);this.config=e,Qe(this,Fs,new Set),Qe(this,ji,new Map),Qe(this,zf,0)}build(e,n,r){const i=new E4({mutationCache:this,mutationId:++pd(this,zf)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){te(this,Fs).add(e);const n=gd(e);if(typeof n=="string"){const r=te(this,ji).get(n);r?r.push(e):te(this,ji).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(te(this,Fs).delete(e)){const n=gd(e);if(typeof n=="string"){const r=te(this,ji).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&te(this,ji).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=gd(e);if(typeof n=="string"){const r=te(this,ji).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=gd(e);if(typeof n=="string"){const i=(r=te(this,ji).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Jn.batch(()=>{te(this,Fs).forEach(e=>{this.notify({type:"removed",mutation:e})}),te(this,Fs).clear(),te(this,ji).clear()})}getAll(){return Array.from(te(this,Fs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>d2(n,r))}findAll(e={}){return this.getAll().filter(n=>d2(e,n))}notify(e){Jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Jn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Or))))}},Fs=new WeakMap,ji=new WeakMap,zf=new WeakMap,dA);function gd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function m2(t){return{onFetch:(e,n)=>{var d,g,b,S,R;const r=e.options,i=(b=(g=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:g.fetchMore)==null?void 0:b.direction,s=((S=e.state.data)==null?void 0:S.pages)||[],a=((R=e.state.data)==null?void 0:R.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let A=!1;const C=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?A=!0:e.signal.addEventListener("abort",()=>{A=!0}),e.signal)})},k=wA(e.options,e.fetchOptions),P=async(M,z,$)=>{if(A)return Promise.reject();if(z==null&&M.pages.length)return Promise.resolve(M);const Z=(()=>{const K={client:e.client,queryKey:e.queryKey,pageParam:z,direction:$?"backward":"forward",meta:e.options.meta};return C(K),K})(),Q=await k(Z),{maxPages:ue}=e.options,Y=$?m4:g4;return{pages:Y(M.pages,Q,ue),pageParams:Y(M.pageParams,z,ue)}};if(i&&s.length){const M=i==="backward",z=M?R4:y2,$={pages:s,pageParams:a},F=z(r,$);c=await P($,F,M)}else{const M=t??s.length;do{const z=u===0?a[0]??r.initialPageParam:y2(r,c);if(u>0&&z==null)break;c=await P(c,z),u++}while(u<M)}return c};e.options.persister?e.fetchFn=()=>{var A,C;return(C=(A=e.options).persister)==null?void 0:C.call(A,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function y2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function R4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Cn,No,Io,bc,_c,Oo,vc,xc,pA,MA=(pA=class{constructor(t={}){at(this,Cn);at(this,No);at(this,Io);at(this,bc);at(this,_c);at(this,Oo);at(this,vc);at(this,xc);Qe(this,Cn,t.queryCache||new T4),Qe(this,No,t.mutationCache||new A4),Qe(this,Io,t.defaultOptions||{}),Qe(this,bc,new Map),Qe(this,_c,new Map),Qe(this,Oo,0)}mount(){pd(this,Oo)._++,te(this,Oo)===1&&(Qe(this,vc,Q0.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Cn).onFocus())})),Qe(this,xc,lp.subscribe(async t=>{t&&(await this.resumePausedMutations(),te(this,Cn).onOnline())})))}unmount(){var t,e;pd(this,Oo)._--,te(this,Oo)===0&&((t=te(this,vc))==null||t.call(this),Qe(this,vc,void 0),(e=te(this,xc))==null||e.call(this),Qe(this,xc,void 0))}isFetching(t){return te(this,Cn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return te(this,No).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,Cn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=te(this,Cn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Vo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return te(this,Cn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=te(this,Cn).get(r.queryHash),s=i==null?void 0:i.state.data,a=d4(e,s);if(a!==void 0)return te(this,Cn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Jn.batch(()=>te(this,Cn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=te(this,Cn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=te(this,Cn);Jn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=te(this,Cn);return Jn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Jn.batch(()=>te(this,Cn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Or).catch(Or)}invalidateQueries(t,e={}){return Jn.batch(()=>(te(this,Cn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Jn.batch(()=>te(this,Cn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Or)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Or)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=te(this,Cn).build(this,e);return n.isStaleByTime(Vo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Or).catch(Or)}fetchInfiniteQuery(t){return t.behavior=m2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Or).catch(Or)}ensureInfiniteQueryData(t){return t.behavior=m2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return lp.isOnline()?te(this,No).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,Cn)}getMutationCache(){return te(this,No)}getDefaultOptions(){return te(this,Io)}setDefaultOptions(t){Qe(this,Io,t)}setQueryDefaults(t,e){te(this,bc).set(La(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...te(this,bc).values()],n={};return e.forEach(r=>{Rf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){te(this,_c).set(La(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...te(this,_c).values()],n={};return e.forEach(r=>{Rf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...te(this,Io).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Y0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===K0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...te(this,Io).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){te(this,Cn).clear(),te(this,No).clear()}},Cn=new WeakMap,No=new WeakMap,Io=new WeakMap,bc=new WeakMap,_c=new WeakMap,Oo=new WeakMap,vc=new WeakMap,xc=new WeakMap,pA),$r,Pt,Vf,Ir,Na,wc,Po,Do,$f,Sc,Tc,Ia,Oa,Fo,Ec,Yt,rf,p_,g_,m_,y_,b_,__,v_,NA,gA,C4=(gA=class extends Uc{constructor(e,n){super();at(this,Yt);at(this,$r);at(this,Pt);at(this,Vf);at(this,Ir);at(this,Na);at(this,wc);at(this,Po);at(this,Do);at(this,$f);at(this,Sc);at(this,Tc);at(this,Ia);at(this,Oa);at(this,Fo);at(this,Ec,new Set);this.options=n,Qe(this,$r,e),Qe(this,Do,null),Qe(this,Po,d_()),this.options.experimental_prefetchInRender||te(this,Po).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,Pt).addObserver(this),b2(te(this,Pt),this.options)?vt(this,Yt,rf).call(this):this.updateResult(),vt(this,Yt,y_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return x_(te(this,Pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return x_(te(this,Pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,vt(this,Yt,b_).call(this),vt(this,Yt,__).call(this),te(this,Pt).removeObserver(this)}setOptions(e){const n=this.options,r=te(this,Pt);if(this.options=te(this,$r).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ui(this.options.enabled,te(this,Pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");vt(this,Yt,v_).call(this),te(this,Pt).setOptions(this.options),n._defaulted&&!ap(this.options,n)&&te(this,$r).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,Pt),observer:this});const i=this.hasListeners();i&&_2(te(this,Pt),r,this.options,n)&&vt(this,Yt,rf).call(this),this.updateResult(),i&&(te(this,Pt)!==r||Ui(this.options.enabled,te(this,Pt))!==Ui(n.enabled,te(this,Pt))||Vo(this.options.staleTime,te(this,Pt))!==Vo(n.staleTime,te(this,Pt)))&&vt(this,Yt,p_).call(this);const s=vt(this,Yt,g_).call(this);i&&(te(this,Pt)!==r||Ui(this.options.enabled,te(this,Pt))!==Ui(n.enabled,te(this,Pt))||s!==te(this,Fo))&&vt(this,Yt,m_).call(this,s)}getOptimisticResult(e){const n=te(this,$r).getQueryCache().build(te(this,$r),e),r=this.createResult(n,e);return M4(this,r)&&(Qe(this,Ir,r),Qe(this,wc,this.options),Qe(this,Na,te(this,Pt).state)),r}getCurrentResult(){return te(this,Ir)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),Reflect.get(r,i))})}trackProp(e){te(this,Ec).add(e)}getCurrentQuery(){return te(this,Pt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=te(this,$r).defaultQueryOptions(e),r=te(this,$r).getQueryCache().build(te(this,$r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return vt(this,Yt,rf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,Ir)))}createResult(e,n){var ue;const r=te(this,Pt),i=this.options,s=te(this,Ir),a=te(this,Na),c=te(this,wc),h=e!==r?e.state:te(this,Vf),{state:d}=e;let g={...d},b=!1,S;if(n._optimisticResults){const Y=this.hasListeners(),K=!Y&&b2(e,n),ie=Y&&_2(e,r,n,i);(K||ie)&&(g={...g,...CA(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:R,errorUpdatedAt:A,status:C}=g;S=g.data;let k=!1;if(n.placeholderData!==void 0&&S===void 0&&C==="pending"){let Y;s!=null&&s.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(Y=s.data,k=!0):Y=typeof n.placeholderData=="function"?n.placeholderData((ue=te(this,Tc))==null?void 0:ue.state.data,te(this,Tc)):n.placeholderData,Y!==void 0&&(C="success",S=h_(s==null?void 0:s.data,Y,n),b=!0)}if(n.select&&S!==void 0&&!k)if(s&&S===(a==null?void 0:a.data)&&n.select===te(this,$f))S=te(this,Sc);else try{Qe(this,$f,n.select),S=n.select(S),S=h_(s==null?void 0:s.data,S,n),Qe(this,Sc,S),Qe(this,Do,null)}catch(Y){Qe(this,Do,Y)}te(this,Do)&&(R=te(this,Do),S=te(this,Sc),A=Date.now(),C="error");const P=g.fetchStatus==="fetching",M=C==="pending",z=C==="error",$=M&&P,F=S!==void 0,Q={status:C,fetchStatus:g.fetchStatus,isPending:M,isSuccess:C==="success",isError:z,isInitialLoading:$,isLoading:$,data:S,dataUpdatedAt:g.dataUpdatedAt,error:R,errorUpdatedAt:A,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:P,isRefetching:P&&!M,isLoadingError:z&&!F,isPaused:g.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:z&&F,isStale:Z0(e,n),refetch:this.refetch,promise:te(this,Po)};if(this.options.experimental_prefetchInRender){const Y=_e=>{Q.status==="error"?_e.reject(Q.error):Q.data!==void 0&&_e.resolve(Q.data)},K=()=>{const _e=Qe(this,Po,Q.promise=d_());Y(_e)},ie=te(this,Po);switch(ie.status){case"pending":e.queryHash===r.queryHash&&Y(ie);break;case"fulfilled":(Q.status==="error"||Q.data!==ie.value)&&K();break;case"rejected":(Q.status!=="error"||Q.error!==ie.reason)&&K();break}}return Q}updateResult(){const e=te(this,Ir),n=this.createResult(te(this,Pt),this.options);if(Qe(this,Na,te(this,Pt).state),Qe(this,wc,this.options),te(this,Na).data!==void 0&&Qe(this,Tc,te(this,Pt)),ap(n,e))return;Qe(this,Ir,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!te(this,Ec).size)return!0;const a=new Set(s??te(this,Ec));return this.options.throwOnError&&a.add("error"),Object.keys(te(this,Ir)).some(c=>{const u=c;return te(this,Ir)[u]!==e[u]&&a.has(u)})};vt(this,Yt,NA).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&vt(this,Yt,y_).call(this)}},$r=new WeakMap,Pt=new WeakMap,Vf=new WeakMap,Ir=new WeakMap,Na=new WeakMap,wc=new WeakMap,Po=new WeakMap,Do=new WeakMap,$f=new WeakMap,Sc=new WeakMap,Tc=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,Fo=new WeakMap,Ec=new WeakMap,Yt=new WeakSet,rf=function(e){vt(this,Yt,v_).call(this);let n=te(this,Pt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Or)),n},p_=function(){vt(this,Yt,b_).call(this);const e=Vo(this.options.staleTime,te(this,Pt));if(Ua||te(this,Ir).isStale||!u_(e))return;const r=vA(te(this,Ir).dataUpdatedAt,e)+1;Qe(this,Ia,setTimeout(()=>{te(this,Ir).isStale||this.updateResult()},r))},g_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,Pt)):this.options.refetchInterval)??!1},m_=function(e){vt(this,Yt,__).call(this),Qe(this,Fo,e),!(Ua||Ui(this.options.enabled,te(this,Pt))===!1||!u_(te(this,Fo))||te(this,Fo)===0)&&Qe(this,Oa,setInterval(()=>{(this.options.refetchIntervalInBackground||Q0.isFocused())&&vt(this,Yt,rf).call(this)},te(this,Fo)))},y_=function(){vt(this,Yt,p_).call(this),vt(this,Yt,m_).call(this,vt(this,Yt,g_).call(this))},b_=function(){te(this,Ia)&&(clearTimeout(te(this,Ia)),Qe(this,Ia,void 0))},__=function(){te(this,Oa)&&(clearInterval(te(this,Oa)),Qe(this,Oa,void 0))},v_=function(){const e=te(this,$r).getQueryCache().build(te(this,$r),this.options);if(e===te(this,Pt))return;const n=te(this,Pt);Qe(this,Pt,e),Qe(this,Vf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},NA=function(e){Jn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(te(this,Ir))}),te(this,$r).getQueryCache().notify({query:te(this,Pt),type:"observerResultsUpdated"})})},gA);function k4(t,e){return Ui(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function b2(t,e){return k4(t,e)||t.state.data!==void 0&&x_(t,e,e.refetchOnMount)}function x_(t,e,n){if(Ui(e.enabled,t)!==!1&&Vo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Z0(t,e)}return!1}function _2(t,e,n,r){return(t!==e||Ui(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Z0(t,n)}function Z0(t,e){return Ui(e.enabled,t)!==!1&&t.isStaleByTime(Vo(e.staleTime,t))}function M4(t,e){return!ap(t.getCurrentResult(),e)}var Bo,jo,Hr,Bs,Ls,qd,w_,mA,N4=(mA=class extends Uc{constructor(n,r){super();at(this,Ls);at(this,Bo);at(this,jo);at(this,Hr);at(this,Bs);Qe(this,Bo,n),this.setOptions(r),this.bindMethods(),vt(this,Ls,qd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=te(this,Bo).defaultMutationOptions(n),ap(this.options,r)||te(this,Bo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:te(this,Hr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&La(r.mutationKey)!==La(this.options.mutationKey)?this.reset():((i=te(this,Hr))==null?void 0:i.state.status)==="pending"&&te(this,Hr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=te(this,Hr))==null||n.removeObserver(this)}onMutationUpdate(n){vt(this,Ls,qd).call(this),vt(this,Ls,w_).call(this,n)}getCurrentResult(){return te(this,jo)}reset(){var n;(n=te(this,Hr))==null||n.removeObserver(this),Qe(this,Hr,void 0),vt(this,Ls,qd).call(this),vt(this,Ls,w_).call(this)}mutate(n,r){var i;return Qe(this,Bs,r),(i=te(this,Hr))==null||i.removeObserver(this),Qe(this,Hr,te(this,Bo).getMutationCache().build(te(this,Bo),this.options)),te(this,Hr).addObserver(this),te(this,Hr).execute(n)}},Bo=new WeakMap,jo=new WeakMap,Hr=new WeakMap,Bs=new WeakMap,Ls=new WeakSet,qd=function(){var r;const n=((r=te(this,Hr))==null?void 0:r.state)??kA();Qe(this,jo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},w_=function(n){Jn.batch(()=>{var r,i,s,a,c,u,h,d;if(te(this,Bs)&&this.hasListeners()){const g=te(this,jo).variables,b=te(this,jo).context;(n==null?void 0:n.type)==="success"?((i=(r=te(this,Bs)).onSuccess)==null||i.call(r,n.data,g,b),(a=(s=te(this,Bs)).onSettled)==null||a.call(s,n.data,null,g,b)):(n==null?void 0:n.type)==="error"&&((u=(c=te(this,Bs)).onError)==null||u.call(c,n.error,g,b),(d=(h=te(this,Bs)).onSettled)==null||d.call(h,void 0,n.error,g,b))}this.listeners.forEach(g=>{g(te(this,jo))})})},mA),IA=I.createContext(void 0),Lc=t=>{const e=I.useContext(IA);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},OA=({client:t,children:e})=>(I.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),v.jsx(IA.Provider,{value:t,children:e})),PA=I.createContext(!1),I4=()=>I.useContext(PA);PA.Provider;function O4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var P4=I.createContext(O4()),D4=()=>I.useContext(P4),F4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},B4=t=>{I.useEffect(()=>{t.clearReset()},[t])},j4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||SA(n,[t.error,r])),U4=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},L4=(t,e)=>t.isLoading&&t.isFetching&&!e,z4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,v2=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function V4(t,e,n){var g,b,S,R,A;const r=I4(),i=D4(),s=Lc(),a=s.defaultQueryOptions(t);(b=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||b.call(g,a),a._optimisticResults=r?"isRestoring":"optimistic",U4(a),F4(a,i),B4(i);const c=!s.getQueryCache().get(a.queryHash),[u]=I.useState(()=>new e(s,a)),h=u.getOptimisticResult(a),d=!r&&t.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(C=>{const k=d?u.subscribe(Jn.batchCalls(C)):Or;return u.updateResult(),k},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),I.useEffect(()=>{u.setOptions(a)},[a,u]),z4(a,h))throw v2(a,u,i);if(j4({result:h,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((R=(S=s.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||R.call(S,a,h),a.experimental_prefetchInRender&&!Ua&&L4(h,r)){const C=c?v2(a,u,i):(A=s.getQueryCache().get(a.queryHash))==null?void 0:A.promise;C==null||C.catch(Or).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?h:u.trackResult(h)}function $i(t,e){return V4(t,C4)}function cp(t,e){const n=Lc(),[r]=I.useState(()=>new N4(n,t));I.useEffect(()=>{r.setOptions(t)},[r,t]);const i=I.useSyncExternalStore(I.useCallback(a=>r.subscribe(Jn.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=I.useCallback((a,c)=>{r.mutate(a,c).catch(Or)},[r]);if(i.error&&SA(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var zc=_A();const $4=Hf(zc);function Rt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function x2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function DA(...t){return e=>{let n=!1;const r=t.map(i=>{const s=x2(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():x2(t[i],null)}}}}function Fn(...t){return I.useCallback(DA(...t),t)}function Ka(t,e=[]){let n=[];function r(s,a){const c=I.createContext(a),u=n.length;n=[...n,a];const h=g=>{var k;const{scope:b,children:S,...R}=g,A=((k=b==null?void 0:b[t])==null?void 0:k[u])||c,C=I.useMemo(()=>R,Object.values(R));return v.jsx(A.Provider,{value:C,children:S})};h.displayName=s+"Provider";function d(g,b){var A;const S=((A=b==null?void 0:b[t])==null?void 0:A[u])||c,R=I.useContext(S);if(R)return R;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,d]}const i=()=>{const s=n.map(a=>I.createContext(a));return function(c){const u=(c==null?void 0:c[t])||s;return I.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,H4(i,...e)]}function H4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:h})=>{const g=u(s)[`__scope${h}`];return{...c,...g}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Cf(t){const e=W4(t),n=I.forwardRef((r,i)=>{const{children:s,...a}=r,c=I.Children.toArray(s),u=c.find(X4);if(u){const h=u.props.children,d=c.map(g=>g===u?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:g);return v.jsx(e,{...a,ref:i,children:I.isValidElement(h)?I.cloneElement(h,void 0,d):null})}return v.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var FA=Cf("Slot");function W4(t){const e=I.forwardRef((n,r)=>{const{children:i,...s}=n;if(I.isValidElement(i)){const a=K4(i),c=Y4(s,i.props);return i.type!==I.Fragment&&(c.ref=r?DA(r,a):a),I.cloneElement(i,c)}return I.Children.count(i)>1?I.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var q4=Symbol("radix.slottable");function X4(t){return I.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===q4}function Y4(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function K4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function G0(t){const e=t+"CollectionProvider",[n,r]=Ka(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:C,children:k}=A,P=So.useRef(null),M=So.useRef(new Map).current;return v.jsx(i,{scope:C,itemMap:M,collectionRef:P,children:k})};a.displayName=e;const c=t+"CollectionSlot",u=Cf(c),h=So.forwardRef((A,C)=>{const{scope:k,children:P}=A,M=s(c,k),z=Fn(C,M.collectionRef);return v.jsx(u,{ref:z,children:P})});h.displayName=c;const d=t+"CollectionItemSlot",g="data-radix-collection-item",b=Cf(d),S=So.forwardRef((A,C)=>{const{scope:k,children:P,...M}=A,z=So.useRef(null),$=Fn(C,z),F=s(d,k);return So.useEffect(()=>(F.itemMap.set(z,{ref:z,...M}),()=>void F.itemMap.delete(z))),v.jsx(b,{[g]:"",ref:$,children:P})});S.displayName=d;function R(A){const C=s(t+"CollectionConsumer",A);return So.useCallback(()=>{const P=C.collectionRef.current;if(!P)return[];const M=Array.from(P.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((F,Z)=>M.indexOf(F.ref.current)-M.indexOf(Z.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:S},R,r]}var Q4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ot=Q4.reduce((t,e)=>{const n=Cf(`Primitive.${e}`),r=I.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function BA(t,e){t&&zc.flushSync(()=>t.dispatchEvent(e))}function Ti(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t}),I.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Z4(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t);I.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var G4="DismissableLayer",S_="dismissableLayer.update",J4="dismissableLayer.pointerDownOutside",eD="dismissableLayer.focusOutside",w2,jA=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J0=I.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...u}=t,h=I.useContext(jA),[d,g]=I.useState(null),b=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=I.useState({}),R=Fn(e,Z=>g(Z)),A=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),k=A.indexOf(C),P=d?A.indexOf(d):-1,M=h.layersWithOutsidePointerEventsDisabled.size>0,z=P>=k,$=nD(Z=>{const Q=Z.target,ue=[...h.branches].some(Y=>Y.contains(Q));!z||ue||(i==null||i(Z),a==null||a(Z),Z.defaultPrevented||c==null||c())},b),F=rD(Z=>{const Q=Z.target;[...h.branches].some(Y=>Y.contains(Q))||(s==null||s(Z),a==null||a(Z),Z.defaultPrevented||c==null||c())},b);return Z4(Z=>{P===h.layers.size-1&&(r==null||r(Z),!Z.defaultPrevented&&c&&(Z.preventDefault(),c()))},b),I.useEffect(()=>{if(d)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(w2=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),S2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=w2)}},[d,b,n,h]),I.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),S2())},[d,h]),I.useEffect(()=>{const Z=()=>S({});return document.addEventListener(S_,Z),()=>document.removeEventListener(S_,Z)},[]),v.jsx(Ot.div,{...u,ref:R,style:{pointerEvents:M?z?"auto":"none":void 0,...t.style},onFocusCapture:Rt(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Rt(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Rt(t.onPointerDownCapture,$.onPointerDownCapture)})});J0.displayName=G4;var tD="DismissableLayerBranch",UA=I.forwardRef((t,e)=>{const n=I.useContext(jA),r=I.useRef(null),i=Fn(e,r);return I.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),v.jsx(Ot.div,{...t,ref:i})});UA.displayName=tD;function nD(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t),r=I.useRef(!1),i=I.useRef(()=>{});return I.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let u=function(){LA(J4,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function rD(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t),r=I.useRef(!1);return I.useEffect(()=>{const i=s=>{s.target&&!r.current&&LA(eD,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function S2(){const t=new CustomEvent(S_);document.dispatchEvent(t)}function LA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?BA(i,s):i.dispatchEvent(s)}var iD=J0,sD=UA,pr=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},oD="Portal",ev=I.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[i,s]=I.useState(!1);pr(()=>s(!0),[]);const a=n||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?$4.createPortal(v.jsx(Ot.div,{...r,ref:e}),a):null});ev.displayName=oD;function aD(t,e){return I.useReducer((n,r)=>e[n][r]??n,t)}var tv=t=>{const{present:e,children:n}=t,r=lD(e),i=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),s=Fn(r.ref,cD(i));return typeof n=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};tv.displayName="Presence";function lD(t){const[e,n]=I.useState(),r=I.useRef(null),i=I.useRef(t),s=I.useRef("none"),a=t?"mounted":"unmounted",[c,u]=aD(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const h=md(r.current);s.current=c==="mounted"?h:"none"},[c]),pr(()=>{const h=r.current,d=i.current;if(d!==t){const b=s.current,S=md(h);t?u("MOUNT"):S==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(d&&b!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),pr(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,g=S=>{const A=md(r.current).includes(S.animationName);if(S.target===e&&A&&(u("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},b=S=>{S.target===e&&(s.current=md(r.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function md(t){return(t==null?void 0:t.animationName)||"none"}function cD(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var uD=X0[" useInsertionEffect ".trim().toString()]||pr;function kf({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=fD({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const d=I.useRef(t!==void 0);I.useEffect(()=>{const g=d.current;g!==c&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,r])}const h=I.useCallback(d=>{var g;if(c){const b=hD(d)?d(t):d;b!==t&&((g=a.current)==null||g.call(a,b))}else s(d)},[c,t,s,a]);return[u,h]}function fD({defaultProp:t,onChange:e}){const[n,r]=I.useState(t),i=I.useRef(n),s=I.useRef(e);return uD(()=>{s.current=e},[e]),I.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function hD(t){return typeof t=="function"}var zA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dD="VisuallyHidden",nv=I.forwardRef((t,e)=>v.jsx(Ot.span,{...t,ref:e,style:{...zA,...t.style}}));nv.displayName=dD;var rv="ToastProvider",[iv,pD,gD]=G0("Toast"),[VA,Jne]=Ka("Toast",[gD]),[mD,gg]=VA(rv),$A=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[c,u]=I.useState(null),[h,d]=I.useState(0),g=I.useRef(!1),b=I.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${rv}\`. Expected non-empty \`string\`.`),v.jsx(iv.Provider,{scope:e,children:v.jsx(mD,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:c,onViewportChange:u,onToastAdd:I.useCallback(()=>d(S=>S+1),[]),onToastRemove:I.useCallback(()=>d(S=>S-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:b,children:a})})};$A.displayName=rv;var HA="ToastViewport",yD=["F8"],T_="toast.viewportPause",E_="toast.viewportResume",WA=I.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=yD,label:i="Notifications ({hotkey})",...s}=t,a=gg(HA,n),c=pD(n),u=I.useRef(null),h=I.useRef(null),d=I.useRef(null),g=I.useRef(null),b=Fn(e,g,a.onViewportChange),S=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=a.toastCount>0;I.useEffect(()=>{const C=k=>{var M;r.length!==0&&r.every(z=>k[z]||k.code===z)&&((M=g.current)==null||M.focus())};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),I.useEffect(()=>{const C=u.current,k=g.current;if(R&&C&&k){const P=()=>{if(!a.isClosePausedRef.current){const F=new CustomEvent(T_);k.dispatchEvent(F),a.isClosePausedRef.current=!0}},M=()=>{if(a.isClosePausedRef.current){const F=new CustomEvent(E_);k.dispatchEvent(F),a.isClosePausedRef.current=!1}},z=F=>{!C.contains(F.relatedTarget)&&M()},$=()=>{C.contains(document.activeElement)||M()};return C.addEventListener("focusin",P),C.addEventListener("focusout",z),C.addEventListener("pointermove",P),C.addEventListener("pointerleave",$),window.addEventListener("blur",P),window.addEventListener("focus",M),()=>{C.removeEventListener("focusin",P),C.removeEventListener("focusout",z),C.removeEventListener("pointermove",P),C.removeEventListener("pointerleave",$),window.removeEventListener("blur",P),window.removeEventListener("focus",M)}}},[R,a.isClosePausedRef]);const A=I.useCallback(({tabbingDirection:C})=>{const P=c().map(M=>{const z=M.ref.current,$=[z,...MD(z)];return C==="forwards"?$:$.reverse()});return(C==="forwards"?P.reverse():P).flat()},[c]);return I.useEffect(()=>{const C=g.current;if(C){const k=P=>{var $,F,Z;const M=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!M){const Q=document.activeElement,ue=P.shiftKey;if(P.target===C&&ue){($=h.current)==null||$.focus();return}const ie=A({tabbingDirection:ue?"backwards":"forwards"}),_e=ie.findIndex(re=>re===Q);Qy(ie.slice(_e+1))?P.preventDefault():ue?(F=h.current)==null||F.focus():(Z=d.current)==null||Z.focus()}};return C.addEventListener("keydown",k),()=>C.removeEventListener("keydown",k)}},[c,A]),v.jsxs(sD,{ref:u,role:"region","aria-label":i.replace("{hotkey}",S),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&v.jsx(A_,{ref:h,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"forwards"});Qy(C)}}),v.jsx(iv.Slot,{scope:n,children:v.jsx(Ot.ol,{tabIndex:-1,...s,ref:b})}),R&&v.jsx(A_,{ref:d,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"backwards"});Qy(C)}})]})});WA.displayName=HA;var qA="ToastFocusProxy",A_=I.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=gg(qA,n);return v.jsx(nv,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var h;const c=a.relatedTarget;!((h=s.viewport)!=null&&h.contains(c))&&r()}})});A_.displayName=qA;var Wf="Toast",bD="toast.swipeStart",_D="toast.swipeMove",vD="toast.swipeCancel",xD="toast.swipeEnd",XA=I.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=t,[c,u]=kf({prop:r,defaultProp:i??!0,onChange:s,caller:Wf});return v.jsx(tv,{present:n||c,children:v.jsx(TD,{open:c,...a,ref:e,onClose:()=>u(!1),onPause:Ti(t.onPause),onResume:Ti(t.onResume),onSwipeStart:Rt(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rt(t.onSwipeMove,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:Rt(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rt(t.onSwipeEnd,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),u(!1)})})})});XA.displayName=Wf;var[wD,SD]=VA(Wf,{onClose(){}}),TD=I.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:c,onPause:u,onResume:h,onSwipeStart:d,onSwipeMove:g,onSwipeCancel:b,onSwipeEnd:S,...R}=t,A=gg(Wf,n),[C,k]=I.useState(null),P=Fn(e,re=>k(re)),M=I.useRef(null),z=I.useRef(null),$=i||A.duration,F=I.useRef(0),Z=I.useRef($),Q=I.useRef(0),{onToastAdd:ue,onToastRemove:Y}=A,K=Ti(()=>{var Te;(C==null?void 0:C.contains(document.activeElement))&&((Te=A.viewport)==null||Te.focus()),a()}),ie=I.useCallback(re=>{!re||re===1/0||(window.clearTimeout(Q.current),F.current=new Date().getTime(),Q.current=window.setTimeout(K,re))},[K]);I.useEffect(()=>{const re=A.viewport;if(re){const Te=()=>{ie(Z.current),h==null||h()},ne=()=>{const Se=new Date().getTime()-F.current;Z.current=Z.current-Se,window.clearTimeout(Q.current),u==null||u()};return re.addEventListener(T_,ne),re.addEventListener(E_,Te),()=>{re.removeEventListener(T_,ne),re.removeEventListener(E_,Te)}}},[A.viewport,$,u,h,ie]),I.useEffect(()=>{s&&!A.isClosePausedRef.current&&ie($)},[s,$,A.isClosePausedRef,ie]),I.useEffect(()=>(ue(),()=>Y()),[ue,Y]);const _e=I.useMemo(()=>C?eR(C):null,[C]);return A.viewport?v.jsxs(v.Fragment,{children:[_e&&v.jsx(ED,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_e}),v.jsx(wD,{scope:n,onClose:K,children:zc.createPortal(v.jsx(iv.ItemSlot,{scope:n,children:v.jsx(iD,{asChild:!0,onEscapeKeyDown:Rt(c,()=>{A.isFocusedToastEscapeKeyDownRef.current||K(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:v.jsx(Ot.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":A.swipeDirection,...R,ref:P,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Rt(t.onKeyDown,re=>{re.key==="Escape"&&(c==null||c(re.nativeEvent),re.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,K()))}),onPointerDown:Rt(t.onPointerDown,re=>{re.button===0&&(M.current={x:re.clientX,y:re.clientY})}),onPointerMove:Rt(t.onPointerMove,re=>{if(!M.current)return;const Te=re.clientX-M.current.x,ne=re.clientY-M.current.y,Se=!!z.current,pe=["left","right"].includes(A.swipeDirection),Xe=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,O=pe?Xe(0,Te):0,Ee=pe?0:Xe(0,ne),Ae=re.pointerType==="touch"?10:2,B={x:O,y:Ee},Ce={originalEvent:re,delta:B};Se?(z.current=B,yd(_D,g,Ce,{discrete:!1})):T2(B,A.swipeDirection,Ae)?(z.current=B,yd(bD,d,Ce,{discrete:!1}),re.target.setPointerCapture(re.pointerId)):(Math.abs(Te)>Ae||Math.abs(ne)>Ae)&&(M.current=null)}),onPointerUp:Rt(t.onPointerUp,re=>{const Te=z.current,ne=re.target;if(ne.hasPointerCapture(re.pointerId)&&ne.releasePointerCapture(re.pointerId),z.current=null,M.current=null,Te){const Se=re.currentTarget,pe={originalEvent:re,delta:Te};T2(Te,A.swipeDirection,A.swipeThreshold)?yd(xD,S,pe,{discrete:!0}):yd(vD,b,pe,{discrete:!0}),Se.addEventListener("click",Xe=>Xe.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),ED=t=>{const{__scopeToast:e,children:n,...r}=t,i=gg(Wf,e),[s,a]=I.useState(!1),[c,u]=I.useState(!1);return CD(()=>a(!0)),I.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:v.jsx(ev,{asChild:!0,children:v.jsx(nv,{...r,children:s&&v.jsxs(v.Fragment,{children:[i.label," ",n]})})})},AD="ToastTitle",YA=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return v.jsx(Ot.div,{...r,ref:e})});YA.displayName=AD;var RD="ToastDescription",KA=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return v.jsx(Ot.div,{...r,ref:e})});KA.displayName=RD;var QA="ToastAction",ZA=I.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?v.jsx(JA,{altText:n,asChild:!0,children:v.jsx(sv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${QA}\`. Expected non-empty \`string\`.`),null)});ZA.displayName=QA;var GA="ToastClose",sv=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=SD(GA,n);return v.jsx(JA,{asChild:!0,children:v.jsx(Ot.button,{type:"button",...r,ref:e,onClick:Rt(t.onClick,i.onClose)})})});sv.displayName=GA;var JA=I.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return v.jsx(Ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function eR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),kD(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...eR(r))}}),e}function yd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?BA(i,s):i.dispatchEvent(s)}var T2=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function CD(t=()=>{}){const e=Ti(t);pr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function kD(t){return t.nodeType===t.ELEMENT_NODE}function MD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Qy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var ND=$A,tR=WA,nR=XA,rR=YA,iR=KA,sR=ZA,oR=sv;function aR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=aR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lR(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=aR(t))&&(r&&(r+=" "),r+=e);return r}const E2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,A2=lR,mg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return A2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const d=n==null?void 0:n[h],g=s==null?void 0:s[h];if(d===null)return null;const b=E2(d)||E2(g);return i[h][b]}),c=n&&Object.entries(n).reduce((h,d)=>{let[g,b]=d;return b===void 0||(h[g]=b),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,d)=>{let{class:g,className:b,...S}=d;return Object.entries(S).every(R=>{let[A,C]=R;return Array.isArray(C)?C.includes({...s,...c}[A]):{...s,...c}[A]===C})?[...h,g,b]:h},[]);return A2(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),R2=t=>{const e=OD(t);return e.charAt(0).toUpperCase()+e.slice(1)},cR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),PD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},u)=>I.createElement("svg",{ref:u,...DD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cR("lucide",i),...!s&&!PD(c)&&{"aria-hidden":"true"},...c},[...a.map(([h,d])=>I.createElement(h,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,e)=>{const n=I.forwardRef(({className:r,...i},s)=>I.createElement(FD,{ref:s,iconNode:e,className:cR(`lucide-${ID(R2(t))}`,`lucide-${t}`,r),...i}));return n.displayName=R2(t),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],uR=mt("activity",BD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],UD=mt("box",jD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],R_=mt("boxes",LD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],VD=mt("braces",zD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],HD=mt("brain-circuit",$D);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],C2=mt("chart-column",WD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XD=mt("check",qD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ov=mt("chevron-down",YD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fR=mt("chevron-right",KD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ZD=mt("circle-alert",QD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sa=mt("circle-check-big",GD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e6=mt("circle-help",JD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],C_=mt("clock",t6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],hR=mt("code",n6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],i6=mt("code-xml",r6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],up=mt("copy",s6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],dR=mt("database-zap",o6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],av=mt("database",a6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],k2=mt("download",l6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],lv=mt("external-link",c6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],f6=mt("eye",u6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cv=mt("file-text",h6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Pl=mt("file",d6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],uv=mt("fingerprint",p6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],m6=mt("folder-open",g6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],b6=mt("folder",y6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],v6=mt("funnel",_6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],w6=mt("globe",x6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ac=mt("info",S6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],E6=mt("layers",T6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],R6=mt("moon",A6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],M2=mt("network",C6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],M6=mt("panel-left",k6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],pR=mt("play",N6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$o=mt("refresh-cw",I6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],P6=mt("rotate-ccw",O6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fp=mt("save",D6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B6=mt("search",F6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],U6=mt("server",j6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gR=mt("settings",L6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],k_=mt("sparkles",z6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 0 1 1h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-3a1 1 0 0 0-1-1z",key:"17jnth"}]],$6=mt("squares-unite",V6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],W6=mt("sun",H6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],X6=mt("table",q6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],K6=mt("terminal",Y6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],N2=mt("test-tube",Q6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],mR=mt("tree-pine",Z6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ta=mt("triangle-alert",G6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fv=mt("x",J6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yg=mt("zap",eF),hv="-",tF=t=>{const e=rF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const c=a.split(hv);return c[0]===""&&c.length!==1&&c.shift(),yR(c,e)||nF(a)},getConflictingClassGroupIds:(a,c)=>{const u=n[a]||[];return c&&r[a]?[...u,...r[a]]:u}}},yR=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?yR(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(hv);return(a=e.validators.find(({validator:c})=>c(s)))==null?void 0:a.classGroupId},I2=/^\[(.+)\]$/,nF=t=>{if(I2.test(t)){const e=I2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},rF=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)M_(n[i],r,i,e);return r},M_=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:O2(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(iF(i)){M_(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{M_(a,O2(e,s),n,r)})})},O2=(t,e)=>{let n=t;return e.split(hv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},iF=t=>t.isThemeGetter,sF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},N_="!",I_=":",oF=I_.length,aF=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,c=0,u=0,h;for(let R=0;R<i.length;R++){let A=i[R];if(a===0&&c===0){if(A===I_){s.push(i.slice(u,R)),u=R+oF;continue}if(A==="/"){h=R;continue}}A==="["?a++:A==="]"?a--:A==="("?c++:A===")"&&c--}const d=s.length===0?i:i.substring(u),g=lF(d),b=g!==d,S=h&&h>u?h-u:void 0;return{modifiers:s,hasImportantModifier:b,baseClassName:g,maybePostfixModifierPosition:S}};if(e){const i=e+I_,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},lF=t=>t.endsWith(N_)?t.substring(0,t.length-1):t.startsWith(N_)?t.substring(1):t,cF=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||e[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},uF=t=>({cache:sF(t.cacheSize),parseClassName:aF(t),sortModifiers:cF(t),...tF(t)}),fF=/\s+/,hF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],c=t.trim().split(fF);let u="";for(let h=c.length-1;h>=0;h-=1){const d=c[h],{isExternal:g,modifiers:b,hasImportantModifier:S,baseClassName:R,maybePostfixModifierPosition:A}=n(d);if(g){u=d+(u.length>0?" "+u:u);continue}let C=!!A,k=r(C?R.substring(0,A):R);if(!k){if(!C){u=d+(u.length>0?" "+u:u);continue}if(k=r(R),!k){u=d+(u.length>0?" "+u:u);continue}C=!1}const P=s(b).join(":"),M=S?P+N_:P,z=M+k;if(a.includes(z))continue;a.push(z);const $=i(k,C);for(let F=0;F<$.length;++F){const Z=$[F];a.push(M+Z)}u=d+(u.length>0?" "+u:u)}return u};function dF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=bR(e))&&(r&&(r+=" "),r+=n);return r}const bR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=bR(t[r]))&&(n&&(n+=" "),n+=e);return n};function pF(t,...e){let n,r,i,s=a;function a(u){const h=e.reduce((d,g)=>g(d),t());return n=uF(h),r=n.cache.get,i=n.cache.set,s=c,c(u)}function c(u){const h=r(u);if(h)return h;const d=hF(u,n);return i(u,d),d}return function(){return s(dF.apply(null,arguments))}}const Qn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_R=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gF=/^\d+\/\d+$/,mF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_F=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dl=t=>gF.test(t),At=t=>!!t&&!Number.isNaN(Number(t)),yo=t=>!!t&&Number.isInteger(Number(t)),Zy=t=>t.endsWith("%")&&At(t.slice(0,-1)),Is=t=>mF.test(t),xF=()=>!0,wF=t=>yF.test(t)&&!bF.test(t),xR=()=>!1,SF=t=>_F.test(t),TF=t=>vF.test(t),EF=t=>!Je(t)&&!et(t),AF=t=>Vc(t,TR,xR),Je=t=>_R.test(t),ma=t=>Vc(t,ER,wF),Gy=t=>Vc(t,NF,At),P2=t=>Vc(t,wR,xR),RF=t=>Vc(t,SR,TF),bd=t=>Vc(t,AR,SF),et=t=>vR.test(t),Yu=t=>$c(t,ER),CF=t=>$c(t,IF),D2=t=>$c(t,wR),kF=t=>$c(t,TR),MF=t=>$c(t,SR),_d=t=>$c(t,AR,!0),Vc=(t,e,n)=>{const r=_R.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},$c=(t,e,n=!1)=>{const r=vR.exec(t);return r?r[1]?e(r[1]):n:!1},wR=t=>t==="position"||t==="percentage",SR=t=>t==="image"||t==="url",TR=t=>t==="length"||t==="size"||t==="bg-size",ER=t=>t==="length",NF=t=>t==="number",IF=t=>t==="family-name",AR=t=>t==="shadow",OF=()=>{const t=Qn("color"),e=Qn("font"),n=Qn("text"),r=Qn("font-weight"),i=Qn("tracking"),s=Qn("leading"),a=Qn("breakpoint"),c=Qn("container"),u=Qn("spacing"),h=Qn("radius"),d=Qn("shadow"),g=Qn("inset-shadow"),b=Qn("text-shadow"),S=Qn("drop-shadow"),R=Qn("blur"),A=Qn("perspective"),C=Qn("aspect"),k=Qn("ease"),P=Qn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],$=()=>[...z(),et,Je],F=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto","contain","none"],Q=()=>[et,Je,u],ue=()=>[Dl,"full","auto",...Q()],Y=()=>[yo,"none","subgrid",et,Je],K=()=>["auto",{span:["full",yo,et,Je]},yo,et,Je],ie=()=>[yo,"auto",et,Je],_e=()=>["auto","min","max","fr",et,Je],re=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Te=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...Q()],Se=()=>[Dl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Q()],pe=()=>[t,et,Je],Xe=()=>[...z(),D2,P2,{position:[et,Je]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ee=()=>["auto","cover","contain",kF,AF,{size:[et,Je]}],Ae=()=>[Zy,Yu,ma],B=()=>["","none","full",h,et,Je],Ce=()=>["",At,Yu,ma],ge=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[At,Zy,D2,P2],je=()=>["","none",R,et,Je],tt=()=>["none",At,et,Je],Ze=()=>["none",At,et,Je],it=()=>[At,et,Je],ct=()=>[Dl,"full",...Q()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Is],breakpoint:[Is],color:[xF],container:[Is],"drop-shadow":[Is],ease:["in","out","in-out"],font:[EF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Is],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Is],shadow:[Is],spacing:["px",At],text:[Is],"text-shadow":[Is],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dl,Je,et,C]}],container:["container"],columns:[{columns:[At,Je,et,c]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:$()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ue()}],"inset-x":[{"inset-x":ue()}],"inset-y":[{"inset-y":ue()}],start:[{start:ue()}],end:[{end:ue()}],top:[{top:ue()}],right:[{right:ue()}],bottom:[{bottom:ue()}],left:[{left:ue()}],visibility:["visible","invisible","collapse"],z:[{z:[yo,"auto",et,Je]}],basis:[{basis:[Dl,"full","auto",c,...Q()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[At,Dl,"auto","initial","none",Je]}],grow:[{grow:["",At,et,Je]}],shrink:[{shrink:["",At,et,Je]}],order:[{order:[yo,"first","last","none",et,Je]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_e()}],"auto-rows":[{"auto-rows":_e()}],gap:[{gap:Q()}],"gap-x":[{"gap-x":Q()}],"gap-y":[{"gap-y":Q()}],"justify-content":[{justify:[...re(),"normal"]}],"justify-items":[{"justify-items":[...Te(),"normal"]}],"justify-self":[{"justify-self":["auto",...Te()]}],"align-content":[{content:["normal",...re()]}],"align-items":[{items:[...Te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Te(),{baseline:["","last"]}]}],"place-content":[{"place-content":re()}],"place-items":[{"place-items":[...Te(),"baseline"]}],"place-self":[{"place-self":["auto",...Te()]}],p:[{p:Q()}],px:[{px:Q()}],py:[{py:Q()}],ps:[{ps:Q()}],pe:[{pe:Q()}],pt:[{pt:Q()}],pr:[{pr:Q()}],pb:[{pb:Q()}],pl:[{pl:Q()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":Q()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Q()}],"space-y-reverse":["space-y-reverse"],size:[{size:Se()}],w:[{w:[c,"screen",...Se()]}],"min-w":[{"min-w":[c,"screen","none",...Se()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...Se()]}],h:[{h:["screen","lh",...Se()]}],"min-h":[{"min-h":["screen","lh","none",...Se()]}],"max-h":[{"max-h":["screen","lh",...Se()]}],"font-size":[{text:["base",n,Yu,ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,et,Gy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Zy,Je]}],"font-family":[{font:[CF,Je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,et,Je]}],"line-clamp":[{"line-clamp":[At,"none",et,Gy]}],leading:[{leading:[s,...Q()]}],"list-image":[{"list-image":["none",et,Je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",et,Je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:pe()}],"text-color":[{text:pe()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[At,"from-font","auto",et,ma]}],"text-decoration-color":[{decoration:pe()}],"underline-offset":[{"underline-offset":[At,"auto",et,Je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et,Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et,Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Xe()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:Ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yo,et,Je],radial:["",et,Je],conic:[yo,et,Je]},MF,RF]}],"bg-color":[{bg:pe()}],"gradient-from-pos":[{from:Ae()}],"gradient-via-pos":[{via:Ae()}],"gradient-to-pos":[{to:Ae()}],"gradient-from":[{from:pe()}],"gradient-via":[{via:pe()}],"gradient-to":[{to:pe()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:Ce()}],"border-w-x":[{"border-x":Ce()}],"border-w-y":[{"border-y":Ce()}],"border-w-s":[{"border-s":Ce()}],"border-w-e":[{"border-e":Ce()}],"border-w-t":[{"border-t":Ce()}],"border-w-r":[{"border-r":Ce()}],"border-w-b":[{"border-b":Ce()}],"border-w-l":[{"border-l":Ce()}],"divide-x":[{"divide-x":Ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:pe()}],"border-color-x":[{"border-x":pe()}],"border-color-y":[{"border-y":pe()}],"border-color-s":[{"border-s":pe()}],"border-color-e":[{"border-e":pe()}],"border-color-t":[{"border-t":pe()}],"border-color-r":[{"border-r":pe()}],"border-color-b":[{"border-b":pe()}],"border-color-l":[{"border-l":pe()}],"divide-color":[{divide:pe()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[At,et,Je]}],"outline-w":[{outline:["",At,Yu,ma]}],"outline-color":[{outline:pe()}],shadow:[{shadow:["","none",d,_d,bd]}],"shadow-color":[{shadow:pe()}],"inset-shadow":[{"inset-shadow":["none",g,_d,bd]}],"inset-shadow-color":[{"inset-shadow":pe()}],"ring-w":[{ring:Ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:pe()}],"ring-offset-w":[{"ring-offset":[At,ma]}],"ring-offset-color":[{"ring-offset":pe()}],"inset-ring-w":[{"inset-ring":Ce()}],"inset-ring-color":[{"inset-ring":pe()}],"text-shadow":[{"text-shadow":["none",b,_d,bd]}],"text-shadow-color":[{"text-shadow":pe()}],opacity:[{opacity:[At,et,Je]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[At]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":pe()}],"mask-image-linear-to-color":[{"mask-linear-to":pe()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":pe()}],"mask-image-t-to-color":[{"mask-t-to":pe()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":pe()}],"mask-image-r-to-color":[{"mask-r-to":pe()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":pe()}],"mask-image-b-to-color":[{"mask-b-to":pe()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":pe()}],"mask-image-l-to-color":[{"mask-l-to":pe()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":pe()}],"mask-image-x-to-color":[{"mask-x-to":pe()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":pe()}],"mask-image-y-to-color":[{"mask-y-to":pe()}],"mask-image-radial":[{"mask-radial":[et,Je]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":pe()}],"mask-image-radial-to-color":[{"mask-radial-to":pe()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[At]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":pe()}],"mask-image-conic-to-color":[{"mask-conic-to":pe()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Xe()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:Ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",et,Je]}],filter:[{filter:["","none",et,Je]}],blur:[{blur:je()}],brightness:[{brightness:[At,et,Je]}],contrast:[{contrast:[At,et,Je]}],"drop-shadow":[{"drop-shadow":["","none",S,_d,bd]}],"drop-shadow-color":[{"drop-shadow":pe()}],grayscale:[{grayscale:["",At,et,Je]}],"hue-rotate":[{"hue-rotate":[At,et,Je]}],invert:[{invert:["",At,et,Je]}],saturate:[{saturate:[At,et,Je]}],sepia:[{sepia:["",At,et,Je]}],"backdrop-filter":[{"backdrop-filter":["","none",et,Je]}],"backdrop-blur":[{"backdrop-blur":je()}],"backdrop-brightness":[{"backdrop-brightness":[At,et,Je]}],"backdrop-contrast":[{"backdrop-contrast":[At,et,Je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",At,et,Je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[At,et,Je]}],"backdrop-invert":[{"backdrop-invert":["",At,et,Je]}],"backdrop-opacity":[{"backdrop-opacity":[At,et,Je]}],"backdrop-saturate":[{"backdrop-saturate":[At,et,Je]}],"backdrop-sepia":[{"backdrop-sepia":["",At,et,Je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Q()}],"border-spacing-x":[{"border-spacing-x":Q()}],"border-spacing-y":[{"border-spacing-y":Q()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",et,Je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[At,"initial",et,Je]}],ease:[{ease:["linear","initial",k,et,Je]}],delay:[{delay:[At,et,Je]}],animate:[{animate:["none",P,et,Je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,et,Je]}],"perspective-origin":[{"perspective-origin":$()}],rotate:[{rotate:tt()}],"rotate-x":[{"rotate-x":tt()}],"rotate-y":[{"rotate-y":tt()}],"rotate-z":[{"rotate-z":tt()}],scale:[{scale:Ze()}],"scale-x":[{"scale-x":Ze()}],"scale-y":[{"scale-y":Ze()}],"scale-z":[{"scale-z":Ze()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[et,Je,"","none","gpu","cpu"]}],"transform-origin":[{origin:$()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ct()}],"translate-x":[{"translate-x":ct()}],"translate-y":[{"translate-y":ct()}],"translate-z":[{"translate-z":ct()}],"translate-none":["translate-none"],accent:[{accent:pe()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:pe()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et,Je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et,Je]}],fill:[{fill:["none",...pe()]}],"stroke-w":[{stroke:[At,Yu,ma,Gy]}],stroke:[{stroke:["none",...pe()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PF=pF(OF);function Kt(...t){return PF(lR(t))}const DF=mg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-card text-card-foreground",success:"border-[color:var(--color-success)] bg-card text-card-foreground",warning:"border-[color:var(--color-warning)] bg-card text-card-foreground",info:"border-[color:var(--color-info)] bg-card text-card-foreground"}},defaultVariants:{variant:"default"}}),FF=ND,RR=I.forwardRef(({className:t,...e},n)=>v.jsx(tR,{ref:n,className:Kt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] gap-2",t),...e}));RR.displayName=tR.displayName;const CR=I.forwardRef(({className:t,variant:e,...n},r)=>v.jsx(nR,{ref:r,className:Kt(DF({variant:e}),t),...n}));CR.displayName=nR.displayName;const BF=I.forwardRef(({className:t,...e},n)=>v.jsx(sR,{ref:n,className:Kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-thin ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));BF.displayName=sR.displayName;const kR=I.forwardRef(({className:t,...e},n)=>v.jsx(oR,{ref:n,className:Kt("absolute right-2 top-2 rounded-md p-1 text-foreground/30 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-80 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:v.jsx(fv,{className:"h-4 w-4"})}));kR.displayName=oR.displayName;const MR=I.forwardRef(({className:t,...e},n)=>v.jsx(rR,{ref:n,className:Kt("text-xs font-thin",t),...e}));MR.displayName=rR.displayName;const NR=I.forwardRef(({className:t,...e},n)=>v.jsx(iR,{ref:n,className:Kt("text-xs opacity-70",t),...e}));NR.displayName=iR.displayName;const IR=I.forwardRef(({className:t,variant:e="default",...n},r)=>{const i={default:Ac,destructive:ZD,success:Sa,warning:Ta,info:Ac}[e],s={default:"text-muted-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"}[e];return v.jsx("div",{ref:r,className:Kt("flex-shrink-0",t),...n,children:v.jsx(i,{className:Kt("h-4 w-4",s)})})});IR.displayName="ToastIcon";const F2=(t,e)=>{const n={default:"text-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"},r={success:["added","created","saved","completed","success","done"],destructive:["error","failed","deleted","removed","warning"],warning:["warning","caution","alert"],info:["info","note","updated","changed"]};let i=t;return i=i.replace(/([^\s]+\.[a-zA-Z0-9]+)/g,"<strong>$1</strong>"),i=i.replace(/([^\s]*\/[^\s]+)/g,"<strong>$1</strong>"),Object.entries(r).forEach(([s,a])=>{a.forEach(c=>{const u=new RegExp(`\\b(${c})\\b`,"gi"),h=n[s];i=i.replace(u,`<span class="${h} font-medium">$1</span>`)})}),{__html:i}},jF=3,UF=5e3;let Jy=0;function LF(){return Jy=(Jy+1)%Number.MAX_SAFE_INTEGER,Jy.toString()}const eb=new Map,B2=t=>{if(eb.has(t))return;const e=setTimeout(()=>{eb.delete(t),pf({type:"REMOVE_TOAST",toastId:t})},UF);eb.set(t,e)},zF=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,jF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?B2(n):t.toasts.forEach(r=>{B2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Xd=[];let Yd={toasts:[]};function pf(t){Yd=zF(Yd,t),Xd.forEach(e=>{e(Yd)})}function sf({...t}){const e=LF(),n=i=>pf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>pf({type:"DISMISS_TOAST",toastId:e});return pf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function VF(){const[t,e]=I.useState(Yd);return I.useEffect(()=>(Xd.push(e),()=>{const n=Xd.indexOf(e);n>-1&&Xd.splice(n,1)}),[t]),{...t,toast:sf,dismiss:n=>pf({type:"DISMISS_TOAST",toastId:n})}}function $F(){const{toasts:t}=VF();return v.jsxs(FF,{children:[t.map(function({id:e,title:n,description:r,action:i,variant:s,...a}){return v.jsxs(CR,{variant:s,...a,children:[v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(IR,{variant:s}),v.jsxs("div",{className:"grid gap-1 flex-1",children:[n&&v.jsx(MR,{dangerouslySetInnerHTML:F2(String(n))}),r&&v.jsx(NR,{dangerouslySetInnerHTML:F2(String(r))})]})]}),i,v.jsx(kR,{})]},e)}),v.jsx(RR,{})]})}var HF=(t,e,n,r,i,s,a,c)=>{let u=document.documentElement,h=["light","dark"];function d(S){(Array.isArray(t)?t:[t]).forEach(R=>{let A=R==="class",C=A&&s?i.map(k=>s[k]||k):i;A?(u.classList.remove(...C),u.classList.add(s&&s[S]?s[S]:S)):u.setAttribute(R,S)}),g(S)}function g(S){c&&h.includes(S)&&(u.style.colorScheme=S)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let S=localStorage.getItem(e)||n,R=a&&S==="system"?b():S;d(R)}catch{}},j2=["light","dark"],OR="(prefers-color-scheme: dark)",WF=typeof window>"u",dv=I.createContext(void 0),qF={setTheme:t=>{},themes:[]},XF=()=>{var t;return(t=I.useContext(dv))!=null?t:qF},YF=t=>I.useContext(dv)?I.createElement(I.Fragment,null,t.children):I.createElement(QF,{...t}),KF=["light","dark"],QF=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=KF,defaultTheme:a=n?"system":"light",attribute:c="data-theme",value:u,children:h,nonce:d,scriptProps:g})=>{let[b,S]=I.useState(()=>GF(i,a)),[R,A]=I.useState(()=>b==="system"?tb():b),C=u?Object.values(u):s,k=I.useCallback($=>{let F=$;if(!F)return;$==="system"&&n&&(F=tb());let Z=u?u[F]:F,Q=e?JF(d):null,ue=document.documentElement,Y=K=>{K==="class"?(ue.classList.remove(...C),Z&&ue.classList.add(Z)):K.startsWith("data-")&&(Z?ue.setAttribute(K,Z):ue.removeAttribute(K))};if(Array.isArray(c)?c.forEach(Y):Y(c),r){let K=j2.includes(a)?a:null,ie=j2.includes(F)?F:K;ue.style.colorScheme=ie}Q==null||Q()},[d]),P=I.useCallback($=>{let F=typeof $=="function"?$(b):$;S(F);try{localStorage.setItem(i,F)}catch{}},[b]),M=I.useCallback($=>{let F=tb($);A(F),b==="system"&&n&&!t&&k("system")},[b,t]);I.useEffect(()=>{let $=window.matchMedia(OR);return $.addListener(M),M($),()=>$.removeListener(M)},[M]),I.useEffect(()=>{let $=F=>{F.key===i&&(F.newValue?S(F.newValue):P(a))};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)},[P]),I.useEffect(()=>{k(t??b)},[t,b]);let z=I.useMemo(()=>({theme:b,setTheme:P,forcedTheme:t,resolvedTheme:b==="system"?R:b,themes:n?[...s,"system"]:s,systemTheme:n?R:void 0}),[b,P,t,R,n,s]);return I.createElement(dv.Provider,{value:z},I.createElement(ZF,{forcedTheme:t,storageKey:i,attribute:c,enableSystem:n,enableColorScheme:r,defaultTheme:a,value:u,themes:s,nonce:d,scriptProps:g}),h)},ZF=I.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:a,themes:c,nonce:u,scriptProps:h})=>{let d=JSON.stringify([n,e,s,t,c,a,r,i]).slice(1,-1);return I.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${HF.toString()})(${d})`}})}),GF=(t,e)=>{if(WF)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},JF=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},tb=t=>(t||(t=window.matchMedia(OR)),t.matches?"dark":"light");function eB({children:t,...e}){return v.jsx(YF,{...e,children:t})}const tB=mg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-thin transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ht({className:t,variant:e,size:n,asChild:r=!1,...i}){const s=r?FA:"button";return v.jsx(s,{"data-slot":"button",className:Kt(tB({variant:e,size:n,className:t})),...i})}const nB=mg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-thin w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Nn({className:t,variant:e,asChild:n=!1,...r}){const i=n?FA:"span";return v.jsx(i,{"data-slot":"badge",className:Kt(nB({variant:e}),t),...r})}var rB=X0[" useId ".trim().toString()]||(()=>{}),iB=0;function qf(t){const[e,n]=I.useState(rB());return pr(()=>{n(r=>r??String(iB++))},[t]),e?`radix-${e}`:""}var sB=I.createContext(void 0);function pv(t){const e=I.useContext(sB);return t||e||"ltr"}var nb="rovingFocusGroup.onEntryFocus",oB={bubbles:!1,cancelable:!0},Xf="RovingFocusGroup",[O_,PR,aB]=G0(Xf),[lB,DR]=Ka(Xf,[aB]),[cB,uB]=lB(Xf),FR=I.forwardRef((t,e)=>v.jsx(O_.Provider,{scope:t.__scopeRovingFocusGroup,children:v.jsx(O_.Slot,{scope:t.__scopeRovingFocusGroup,children:v.jsx(fB,{...t,ref:e})})}));FR.displayName=Xf;var fB=I.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...g}=t,b=I.useRef(null),S=Fn(e,b),R=pv(s),[A,C]=kf({prop:a,defaultProp:c??null,onChange:u,caller:Xf}),[k,P]=I.useState(!1),M=Ti(h),z=PR(n),$=I.useRef(!1),[F,Z]=I.useState(0);return I.useEffect(()=>{const Q=b.current;if(Q)return Q.addEventListener(nb,M),()=>Q.removeEventListener(nb,M)},[M]),v.jsx(cB,{scope:n,orientation:r,dir:R,loop:i,currentTabStopId:A,onItemFocus:I.useCallback(Q=>C(Q),[C]),onItemShiftTab:I.useCallback(()=>P(!0),[]),onFocusableItemAdd:I.useCallback(()=>Z(Q=>Q+1),[]),onFocusableItemRemove:I.useCallback(()=>Z(Q=>Q-1),[]),children:v.jsx(Ot.div,{tabIndex:k||F===0?-1:0,"data-orientation":r,...g,ref:S,style:{outline:"none",...t.style},onMouseDown:Rt(t.onMouseDown,()=>{$.current=!0}),onFocus:Rt(t.onFocus,Q=>{const ue=!$.current;if(Q.target===Q.currentTarget&&ue&&!k){const Y=new CustomEvent(nb,oB);if(Q.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const K=z().filter(ne=>ne.focusable),ie=K.find(ne=>ne.active),_e=K.find(ne=>ne.id===A),Te=[ie,_e,...K].filter(Boolean).map(ne=>ne.ref.current);UR(Te,d)}}$.current=!1}),onBlur:Rt(t.onBlur,()=>P(!1))})})}),BR="RovingFocusGroupItem",jR=I.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...c}=t,u=qf(),h=s||u,d=uB(BR,n),g=d.currentTabStopId===h,b=PR(n),{onFocusableItemAdd:S,onFocusableItemRemove:R,currentTabStopId:A}=d;return I.useEffect(()=>{if(r)return S(),()=>R()},[r,S,R]),v.jsx(O_.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:v.jsx(Ot.span,{tabIndex:g?0:-1,"data-orientation":d.orientation,...c,ref:e,onMouseDown:Rt(t.onMouseDown,C=>{r?d.onItemFocus(h):C.preventDefault()}),onFocus:Rt(t.onFocus,()=>d.onItemFocus(h)),onKeyDown:Rt(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){d.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const k=pB(C,d.orientation,d.dir);if(k!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let M=b().filter(z=>z.focusable).map(z=>z.ref.current);if(k==="last")M.reverse();else if(k==="prev"||k==="next"){k==="prev"&&M.reverse();const z=M.indexOf(C.currentTarget);M=d.loop?gB(M,z+1):M.slice(z+1)}setTimeout(()=>UR(M))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:A!=null}):a})})});jR.displayName=BR;var hB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pB(t,e,n){const r=dB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hB[r]}function UR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function gB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var mB=FR,yB=jR,bg="Tabs",[bB,ere]=Ka(bg,[DR]),LR=DR(),[_B,gv]=bB(bg),zR=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:u="automatic",...h}=t,d=pv(c),[g,b]=kf({prop:r,onChange:i,defaultProp:s??"",caller:bg});return v.jsx(_B,{scope:n,baseId:qf(),value:g,onValueChange:b,orientation:a,dir:d,activationMode:u,children:v.jsx(Ot.div,{dir:d,"data-orientation":a,...h,ref:e})})});zR.displayName=bg;var VR="TabsList",$R=I.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=gv(VR,n),a=LR(n);return v.jsx(mB,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:v.jsx(Ot.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});$R.displayName=VR;var HR="TabsTrigger",WR=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=gv(HR,n),c=LR(n),u=YR(a.baseId,r),h=KR(a.baseId,r),d=r===a.value;return v.jsx(yB,{asChild:!0,...c,focusable:!i,active:d,children:v.jsx(Ot.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...s,ref:e,onMouseDown:Rt(t.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?a.onValueChange(r):g.preventDefault()}),onKeyDown:Rt(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(r)}),onFocus:Rt(t.onFocus,()=>{const g=a.activationMode!=="manual";!d&&!i&&g&&a.onValueChange(r)})})})});WR.displayName=HR;var qR="TabsContent",XR=I.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,c=gv(qR,n),u=YR(c.baseId,r),h=KR(c.baseId,r),d=r===c.value,g=I.useRef(d);return I.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),v.jsx(tv,{present:i||d,children:({present:b})=>v.jsx(Ot.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!b,id:h,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:b&&s})})});XR.displayName=qR;function YR(t,e){return`${t}-trigger-${e}`}function KR(t,e){return`${t}-content-${e}`}var vB=zR,xB=$R,wB=WR,SB=XR;function Qa({className:t,...e}){return v.jsx(vB,{"data-slot":"tabs",className:Kt("flex flex-col gap-2",t),...e})}function Za({className:t,...e}){return v.jsx(xB,{"data-slot":"tabs-list",className:Kt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function Dn({className:t,...e}){return v.jsx(wB,{"data-slot":"tabs-trigger",className:Kt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-thin whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Hn({className:t,...e}){return v.jsx(SB,{"data-slot":"tabs-content",className:Kt("flex-1 outline-none",t),...e})}const hn={success:(t,e)=>sf({variant:"success",title:t,description:e}),error:(t,e)=>sf({variant:"destructive",title:t,description:e}),info:(t,e)=>sf({variant:"info",title:t,description:e}),warning:(t,e,n)=>sf({variant:"warning",title:t,description:e,duration:n==null?void 0:n.duration})},TB=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]},EB=()=>{const{data:t={}}=$i({queryKey:["fileSizes"],queryFn:async()=>{const e=await fetch("http://localhost:3333/api/files");if(!e.ok)throw new Error("Failed to fetch files");const n=await e.json(),r={};return n.forEach(i=>{r[i.path]=i.size||0}),r},refetchInterval:3e4});return t};function on({className:t,...e}){return v.jsx("div",{"data-slot":"card",className:Kt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function er({className:t,...e}){return v.jsx("div",{"data-slot":"card-header",className:Kt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function or({className:t,...e}){return v.jsx("div",{"data-slot":"card-title",className:Kt("leading-none font-thin",t),...e})}function _n({className:t,...e}){return v.jsx("div",{"data-slot":"card-content",className:Kt("px-6",t),...e})}const AB=({bundle:t,isSelected:e,onSelect:n})=>{const r=t.name.startsWith("smart:"),i=r?t.name.replace("smart:",""):t.name;return v.jsxs(on,{className:`cursor-pointer transition-all border-vesper bg-vesper-card hover:border-vesper-accent ${e?"ring-1 ring-primary border-primary":""}`,onClick:()=>n(t.name),children:[v.jsx(er,{className:"pb-2",children:v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[r?v.jsx(yg,{className:"w-3 h-3 text-vesper-accent"}):v.jsx(UD,{className:"w-3 h-3 text-muted-foreground"}),v.jsx("h3",{className:"text-sm font-thin truncate color-vesper-fg",children:i})]}),v.jsx(Nn,{variant:"outline",className:"text-[10px] font-thin uppercase tracking-tighter border-vesper color-vesper-muted px-1 h-4",children:r?"Smart":"Manual"})]}),v.jsxs("div",{className:"flex items-center gap-1.5",children:[v.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.changed?"bg-vesper-warning animate-pulse":"bg-vesper-success"}`}),v.jsx("span",{className:"text-[10px] font-thin uppercase tracking-widest color-vesper-muted",children:t.changed?"Syncing":"In Context"})]})]})}),v.jsx(_n,{className:"pt-0",children:v.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[v.jsxs("div",{className:"flex items-center justify-between text-[11px] font-thin color-vesper-muted",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(uv,{className:"w-3 h-3"}),v.jsxs("span",{children:[t.fileCount," units"]})]}),v.jsx("span",{children:TB(t.size)})]}),t.generated&&v.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-thin color-vesper-muted mt-2 opacity-50",children:[v.jsx(C_,{className:"w-2.5 h-2.5"}),v.jsxs("span",{children:["Synced ",new Date(t.generated).toLocaleTimeString()]})]})]})})]})};function U2(t,[e,n]){return Math.min(n,Math.max(e,t))}var rb=0;function RB(){I.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??L2()),document.body.insertAdjacentElement("beforeend",t[1]??L2()),rb++,()=>{rb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),rb--}},[])}function L2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ib="focusScope.autoFocusOnMount",sb="focusScope.autoFocusOnUnmount",z2={bubbles:!1,cancelable:!0},CB="FocusScope",QR=I.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[c,u]=I.useState(null),h=Ti(i),d=Ti(s),g=I.useRef(null),b=Fn(e,A=>u(A)),S=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let A=function(M){if(S.paused||!c)return;const z=M.target;c.contains(z)?g.current=z:Eo(g.current,{select:!0})},C=function(M){if(S.paused||!c)return;const z=M.relatedTarget;z!==null&&(c.contains(z)||Eo(g.current,{select:!0}))},k=function(M){if(document.activeElement===document.body)for(const $ of M)$.removedNodes.length>0&&Eo(c)};document.addEventListener("focusin",A),document.addEventListener("focusout",C);const P=new MutationObserver(k);return c&&P.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",C),P.disconnect()}}},[r,c,S.paused]),I.useEffect(()=>{if(c){$2.add(S);const A=document.activeElement;if(!c.contains(A)){const k=new CustomEvent(ib,z2);c.addEventListener(ib,h),c.dispatchEvent(k),k.defaultPrevented||(kB(PB(ZR(c)),{select:!0}),document.activeElement===A&&Eo(c))}return()=>{c.removeEventListener(ib,h),setTimeout(()=>{const k=new CustomEvent(sb,z2);c.addEventListener(sb,d),c.dispatchEvent(k),k.defaultPrevented||Eo(A??document.body,{select:!0}),c.removeEventListener(sb,d),$2.remove(S)},0)}}},[c,h,d,S]);const R=I.useCallback(A=>{if(!n&&!r||S.paused)return;const C=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,k=document.activeElement;if(C&&k){const P=A.currentTarget,[M,z]=MB(P);M&&z?!A.shiftKey&&k===z?(A.preventDefault(),n&&Eo(M,{select:!0})):A.shiftKey&&k===M&&(A.preventDefault(),n&&Eo(z,{select:!0})):k===P&&A.preventDefault()}},[n,r,S.paused]);return v.jsx(Ot.div,{tabIndex:-1,...a,ref:b,onKeyDown:R})});QR.displayName=CB;function kB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Eo(r,{select:e}),document.activeElement!==n)return}function MB(t){const e=ZR(t),n=V2(e,t),r=V2(e.reverse(),t);return[n,r]}function ZR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function V2(t,e){for(const n of t)if(!NB(n,{upTo:e}))return n}function NB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function IB(t){return t instanceof HTMLInputElement&&"select"in t}function Eo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&IB(t)&&e&&t.select()}}var $2=OB();function OB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=H2(t,e),t.unshift(e)},remove(e){var n;t=H2(t,e),(n=t[0])==null||n.resume()}}}function H2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function PB(t){return t.filter(e=>e.tagName!=="A")}const DB=["top","right","bottom","left"],qo=Math.min,oi=Math.max,hp=Math.round,vd=Math.floor,fs=t=>({x:t,y:t}),FB={left:"right",right:"left",bottom:"top",top:"bottom"},BB={start:"end",end:"start"};function P_(t,e,n){return oi(t,qo(e,n))}function zs(t,e){return typeof t=="function"?t(e):t}function Vs(t){return t.split("-")[0]}function Hc(t){return t.split("-")[1]}function mv(t){return t==="x"?"y":"x"}function yv(t){return t==="y"?"height":"width"}function cs(t){return["top","bottom"].includes(Vs(t))?"y":"x"}function bv(t){return mv(cs(t))}function jB(t,e,n){n===void 0&&(n=!1);const r=Hc(t),i=bv(t),s=yv(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=dp(a)),[a,dp(a)]}function UB(t){const e=dp(t);return[D_(t),e,D_(e)]}function D_(t){return t.replace(/start|end/g,e=>BB[e])}function LB(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function zB(t,e,n,r){const i=Hc(t);let s=LB(Vs(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(D_)))),s}function dp(t){return t.replace(/left|right|bottom|top/g,e=>FB[e])}function VB(t){return{top:0,right:0,bottom:0,left:0,...t}}function GR(t){return typeof t!="number"?VB(t):{top:t,right:t,bottom:t,left:t}}function pp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function W2(t,e,n){let{reference:r,floating:i}=t;const s=cs(e),a=bv(e),c=yv(a),u=Vs(e),h=s==="y",d=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,b=r[c]/2-i[c]/2;let S;switch(u){case"top":S={x:d,y:r.y-i.height};break;case"bottom":S={x:d,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:g};break;case"left":S={x:r.x-i.width,y:g};break;default:S={x:r.x,y:r.y}}switch(Hc(e)){case"start":S[a]-=b*(n&&h?-1:1);break;case"end":S[a]+=b*(n&&h?-1:1);break}return S}const $B=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,c=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:g}=W2(h,r,u),b=r,S={},R=0;for(let A=0;A<c.length;A++){const{name:C,fn:k}=c[A],{x:P,y:M,data:z,reset:$}=await k({x:d,y:g,initialPlacement:r,placement:b,strategy:i,middlewareData:S,rects:h,platform:a,elements:{reference:t,floating:e}});d=P??d,g=M??g,S={...S,[C]:{...S[C],...z}},$&&R<=50&&(R++,typeof $=="object"&&($.placement&&(b=$.placement),$.rects&&(h=$.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):$.rects),{x:d,y:g}=W2(h,b,u)),A=-1)}return{x:d,y:g,placement:b,strategy:i,middlewareData:S}};async function Mf(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:c,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:b=!1,padding:S=0}=zs(e,t),R=GR(S),C=c[b?g==="floating"?"reference":"floating":g],k=pp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(C)))==null||n?C:C.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:h,rootBoundary:d,strategy:u})),P=g==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,M=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),z=await(s.isElement==null?void 0:s.isElement(M))?await(s.getScale==null?void 0:s.getScale(M))||{x:1,y:1}:{x:1,y:1},$=pp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:P,offsetParent:M,strategy:u}):P);return{top:(k.top-$.top+R.top)/z.y,bottom:($.bottom-k.bottom+R.bottom)/z.y,left:(k.left-$.left+R.left)/z.x,right:($.right-k.right+R.right)/z.x}}const HB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:c,middlewareData:u}=e,{element:h,padding:d=0}=zs(t,e)||{};if(h==null)return{};const g=GR(d),b={x:n,y:r},S=bv(i),R=yv(S),A=await a.getDimensions(h),C=S==="y",k=C?"top":"left",P=C?"bottom":"right",M=C?"clientHeight":"clientWidth",z=s.reference[R]+s.reference[S]-b[S]-s.floating[R],$=b[S]-s.reference[S],F=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let Z=F?F[M]:0;(!Z||!await(a.isElement==null?void 0:a.isElement(F)))&&(Z=c.floating[M]||s.floating[R]);const Q=z/2-$/2,ue=Z/2-A[R]/2-1,Y=qo(g[k],ue),K=qo(g[P],ue),ie=Y,_e=Z-A[R]-K,re=Z/2-A[R]/2+Q,Te=P_(ie,re,_e),ne=!u.arrow&&Hc(i)!=null&&re!==Te&&s.reference[R]/2-(re<ie?Y:K)-A[R]/2<0,Se=ne?re<ie?re-ie:re-_e:0;return{[S]:b[S]+Se,data:{[S]:Te,centerOffset:re-Te-Se,...ne&&{alignmentOffset:Se}},reset:ne}}}),WB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:c,platform:u,elements:h}=e,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:A=!0,...C}=zs(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const k=Vs(i),P=cs(c),M=Vs(c)===c,z=await(u.isRTL==null?void 0:u.isRTL(h.floating)),$=b||(M||!A?[dp(c)]:UB(c)),F=R!=="none";!b&&F&&$.push(...zB(c,A,R,z));const Z=[c,...$],Q=await Mf(e,C),ue=[];let Y=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&ue.push(Q[k]),g){const re=jB(i,a,z);ue.push(Q[re[0]],Q[re[1]])}if(Y=[...Y,{placement:i,overflows:ue}],!ue.every(re=>re<=0)){var K,ie;const re=(((K=s.flip)==null?void 0:K.index)||0)+1,Te=Z[re];if(Te&&(!(g==="alignment"?P!==cs(Te):!1)||Y.every(pe=>pe.overflows[0]>0&&cs(pe.placement)===P)))return{data:{index:re,overflows:Y},reset:{placement:Te}};let ne=(ie=Y.filter(Se=>Se.overflows[0]<=0).sort((Se,pe)=>Se.overflows[1]-pe.overflows[1])[0])==null?void 0:ie.placement;if(!ne)switch(S){case"bestFit":{var _e;const Se=(_e=Y.filter(pe=>{if(F){const Xe=cs(pe.placement);return Xe===P||Xe==="y"}return!0}).map(pe=>[pe.placement,pe.overflows.filter(Xe=>Xe>0).reduce((Xe,O)=>Xe+O,0)]).sort((pe,Xe)=>pe[1]-Xe[1])[0])==null?void 0:_e[0];Se&&(ne=Se);break}case"initialPlacement":ne=c;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function q2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function X2(t){return DB.some(e=>t[e]>=0)}const qB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=zs(t,e);switch(r){case"referenceHidden":{const s=await Mf(e,{...i,elementContext:"reference"}),a=q2(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:X2(a)}}}case"escaped":{const s=await Mf(e,{...i,altBoundary:!0}),a=q2(s,n.floating);return{data:{escapedOffsets:a,escaped:X2(a)}}}default:return{}}}}};async function XB(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Vs(n),c=Hc(n),u=cs(n)==="y",h=["left","top"].includes(a)?-1:1,d=s&&u?-1:1,g=zs(e,t);let{mainAxis:b,crossAxis:S,alignmentAxis:R}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof R=="number"&&(S=c==="end"?R*-1:R),u?{x:S*d,y:b*h}:{x:b*h,y:S*d}}const YB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:c}=e,u=await XB(e,t);return a===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:a}}}}},KB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:C=>{let{x:k,y:P}=C;return{x:k,y:P}}},...u}=zs(t,e),h={x:n,y:r},d=await Mf(e,u),g=cs(Vs(i)),b=mv(g);let S=h[b],R=h[g];if(s){const C=b==="y"?"top":"left",k=b==="y"?"bottom":"right",P=S+d[C],M=S-d[k];S=P_(P,S,M)}if(a){const C=g==="y"?"top":"left",k=g==="y"?"bottom":"right",P=R+d[C],M=R-d[k];R=P_(P,R,M)}const A=c.fn({...e,[b]:S,[g]:R});return{...A,data:{x:A.x-n,y:A.y-r,enabled:{[b]:s,[g]:a}}}}}},QB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=zs(t,e),d={x:n,y:r},g=cs(i),b=mv(g);let S=d[b],R=d[g];const A=zs(c,e),C=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(u){const M=b==="y"?"height":"width",z=s.reference[b]-s.floating[M]+C.mainAxis,$=s.reference[b]+s.reference[M]-C.mainAxis;S<z?S=z:S>$&&(S=$)}if(h){var k,P;const M=b==="y"?"width":"height",z=["top","left"].includes(Vs(i)),$=s.reference[g]-s.floating[M]+(z&&((k=a.offset)==null?void 0:k[g])||0)+(z?0:C.crossAxis),F=s.reference[g]+s.reference[M]+(z?0:((P=a.offset)==null?void 0:P[g])||0)-(z?C.crossAxis:0);R<$?R=$:R>F&&(R=F)}return{[b]:S,[g]:R}}}},ZB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:c}=e,{apply:u=()=>{},...h}=zs(t,e),d=await Mf(e,h),g=Vs(i),b=Hc(i),S=cs(i)==="y",{width:R,height:A}=s.floating;let C,k;g==="top"||g==="bottom"?(C=g,k=b===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(k=g,C=b==="end"?"top":"bottom");const P=A-d.top-d.bottom,M=R-d.left-d.right,z=qo(A-d[C],P),$=qo(R-d[k],M),F=!e.middlewareData.shift;let Z=z,Q=$;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(Q=M),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(Z=P),F&&!b){const Y=oi(d.left,0),K=oi(d.right,0),ie=oi(d.top,0),_e=oi(d.bottom,0);S?Q=R-2*(Y!==0||K!==0?Y+K:oi(d.left,d.right)):Z=A-2*(ie!==0||_e!==0?ie+_e:oi(d.top,d.bottom))}await u({...e,availableWidth:Q,availableHeight:Z});const ue=await a.getDimensions(c.floating);return R!==ue.width||A!==ue.height?{reset:{rects:!0}}:{}}}};function _g(){return typeof window<"u"}function Wc(t){return JR(t)?(t.nodeName||"").toLowerCase():"#document"}function ci(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gs(t){var e;return(e=(JR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function JR(t){return _g()?t instanceof Node||t instanceof ci(t).Node:!1}function Hi(t){return _g()?t instanceof Element||t instanceof ci(t).Element:!1}function hs(t){return _g()?t instanceof HTMLElement||t instanceof ci(t).HTMLElement:!1}function Y2(t){return!_g()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ci(t).ShadowRoot}function Yf(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Wi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function GB(t){return["table","td","th"].includes(Wc(t))}function vg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function _v(t){const e=vv(),n=Hi(t)?Wi(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function JB(t){let e=Xo(t);for(;hs(e)&&!Rc(e);){if(_v(e))return e;if(vg(e))return null;e=Xo(e)}return null}function vv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rc(t){return["html","body","#document"].includes(Wc(t))}function Wi(t){return ci(t).getComputedStyle(t)}function xg(t){return Hi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Xo(t){if(Wc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Y2(t)&&t.host||gs(t);return Y2(e)?e.host:e}function eC(t){const e=Xo(t);return Rc(e)?t.ownerDocument?t.ownerDocument.body:t.body:hs(e)&&Yf(e)?e:eC(e)}function Nf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=eC(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=ci(i);if(s){const c=F_(a);return e.concat(a,a.visualViewport||[],Yf(i)?i:[],c&&n?Nf(c):[])}return e.concat(i,Nf(i,[],n))}function F_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tC(t){const e=Wi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=hs(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,c=hp(n)!==s||hp(r)!==a;return c&&(n=s,r=a),{width:n,height:r,$:c}}function xv(t){return Hi(t)?t:t.contextElement}function ac(t){const e=xv(t);if(!hs(e))return fs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=tC(e);let a=(s?hp(n.width):n.width)/r,c=(s?hp(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const ej=fs(0);function nC(t){const e=ci(t);return!vv()||!e.visualViewport?ej:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function tj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ci(t)?!1:e}function za(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=xv(t);let a=fs(1);e&&(r?Hi(r)&&(a=ac(r)):a=ac(t));const c=tj(s,n,r)?nC(s):fs(0);let u=(i.left+c.x)/a.x,h=(i.top+c.y)/a.y,d=i.width/a.x,g=i.height/a.y;if(s){const b=ci(s),S=r&&Hi(r)?ci(r):r;let R=b,A=F_(R);for(;A&&r&&S!==R;){const C=ac(A),k=A.getBoundingClientRect(),P=Wi(A),M=k.left+(A.clientLeft+parseFloat(P.paddingLeft))*C.x,z=k.top+(A.clientTop+parseFloat(P.paddingTop))*C.y;u*=C.x,h*=C.y,d*=C.x,g*=C.y,u+=M,h+=z,R=ci(A),A=F_(R)}}return pp({width:d,height:g,x:u,y:h})}function wv(t,e){const n=xg(t).scrollLeft;return e?e.left+n:za(gs(t)).left+n}function rC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:wv(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function nj(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=gs(r),c=e?vg(e.floating):!1;if(r===a||c&&s)return n;let u={scrollLeft:0,scrollTop:0},h=fs(1);const d=fs(0),g=hs(r);if((g||!g&&!s)&&((Wc(r)!=="body"||Yf(a))&&(u=xg(r)),hs(r))){const S=za(r);h=ac(r),d.x=S.x+r.clientLeft,d.y=S.y+r.clientTop}const b=a&&!g&&!s?rC(a,u,!0):fs(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+d.x+b.x,y:n.y*h.y-u.scrollTop*h.y+d.y+b.y}}function rj(t){return Array.from(t.getClientRects())}function ij(t){const e=gs(t),n=xg(t),r=t.ownerDocument.body,i=oi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=oi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+wv(t);const c=-n.scrollTop;return Wi(r).direction==="rtl"&&(a+=oi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:c}}function sj(t,e){const n=ci(t),r=gs(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,u=0;if(i){s=i.width,a=i.height;const h=vv();(!h||h&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:c,y:u}}function oj(t,e){const n=za(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=hs(t)?ac(t):fs(1),a=t.clientWidth*s.x,c=t.clientHeight*s.y,u=i*s.x,h=r*s.y;return{width:a,height:c,x:u,y:h}}function K2(t,e,n){let r;if(e==="viewport")r=sj(t,n);else if(e==="document")r=ij(gs(t));else if(Hi(e))r=oj(e,n);else{const i=nC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pp(r)}function iC(t,e){const n=Xo(t);return n===e||!Hi(n)||Rc(n)?!1:Wi(n).position==="fixed"||iC(n,e)}function aj(t,e){const n=e.get(t);if(n)return n;let r=Nf(t,[],!1).filter(c=>Hi(c)&&Wc(c)!=="body"),i=null;const s=Wi(t).position==="fixed";let a=s?Xo(t):t;for(;Hi(a)&&!Rc(a);){const c=Wi(a),u=_v(a);!u&&c.position==="fixed"&&(i=null),(s?!u&&!i:!u&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Yf(a)&&!u&&iC(t,a))?r=r.filter(d=>d!==a):i=c,a=Xo(a)}return e.set(t,r),r}function lj(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?vg(e)?[]:aj(e,this._c):[].concat(n),r],c=a[0],u=a.reduce((h,d)=>{const g=K2(e,d,i);return h.top=oi(g.top,h.top),h.right=qo(g.right,h.right),h.bottom=qo(g.bottom,h.bottom),h.left=oi(g.left,h.left),h},K2(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function cj(t){const{width:e,height:n}=tC(t);return{width:e,height:n}}function uj(t,e,n){const r=hs(e),i=gs(e),s=n==="fixed",a=za(t,!0,s,e);let c={scrollLeft:0,scrollTop:0};const u=fs(0);function h(){u.x=wv(i)}if(r||!r&&!s)if((Wc(e)!=="body"||Yf(i))&&(c=xg(e)),r){const S=za(e,!0,s,e);u.x=S.x+e.clientLeft,u.y=S.y+e.clientTop}else i&&h();s&&!r&&i&&h();const d=i&&!r&&!s?rC(i,c):fs(0),g=a.left+c.scrollLeft-u.x-d.x,b=a.top+c.scrollTop-u.y-d.y;return{x:g,y:b,width:a.width,height:a.height}}function ob(t){return Wi(t).position==="static"}function Q2(t,e){if(!hs(t)||Wi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gs(t)===n&&(n=n.ownerDocument.body),n}function sC(t,e){const n=ci(t);if(vg(t))return n;if(!hs(t)){let i=Xo(t);for(;i&&!Rc(i);){if(Hi(i)&&!ob(i))return i;i=Xo(i)}return n}let r=Q2(t,e);for(;r&&GB(r)&&ob(r);)r=Q2(r,e);return r&&Rc(r)&&ob(r)&&!_v(r)?n:r||JB(t)||n}const fj=async function(t){const e=this.getOffsetParent||sC,n=this.getDimensions,r=await n(t.floating);return{reference:uj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hj(t){return Wi(t).direction==="rtl"}const dj={convertOffsetParentRelativeRectToViewportRelativeRect:nj,getDocumentElement:gs,getClippingRect:lj,getOffsetParent:sC,getElementRects:fj,getClientRects:rj,getDimensions:cj,getScale:ac,isElement:Hi,isRTL:hj};function oC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function pj(t,e){let n=null,r;const i=gs(t);function s(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),s();const h=t.getBoundingClientRect(),{left:d,top:g,width:b,height:S}=h;if(c||e(),!b||!S)return;const R=vd(g),A=vd(i.clientWidth-(d+b)),C=vd(i.clientHeight-(g+S)),k=vd(d),M={rootMargin:-R+"px "+-A+"px "+-C+"px "+-k+"px",threshold:oi(0,qo(1,u))||1};let z=!0;function $(F){const Z=F[0].intersectionRatio;if(Z!==u){if(!z)return a();Z?a(!1,Z):r=setTimeout(()=>{a(!1,1e-7)},1e3)}Z===1&&!oC(h,t.getBoundingClientRect())&&a(),z=!1}try{n=new IntersectionObserver($,{...M,root:i.ownerDocument})}catch{n=new IntersectionObserver($,M)}n.observe(t)}return a(!0),s}function gj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=xv(t),d=i||s?[...h?Nf(h):[],...Nf(e)]:[];d.forEach(k=>{i&&k.addEventListener("scroll",n,{passive:!0}),s&&k.addEventListener("resize",n)});const g=h&&c?pj(h,n):null;let b=-1,S=null;a&&(S=new ResizeObserver(k=>{let[P]=k;P&&P.target===h&&S&&(S.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var M;(M=S)==null||M.observe(e)})),n()}),h&&!u&&S.observe(h),S.observe(e));let R,A=u?za(t):null;u&&C();function C(){const k=za(t);A&&!oC(A,k)&&n(),A=k,R=requestAnimationFrame(C)}return n(),()=>{var k;d.forEach(P=>{i&&P.removeEventListener("scroll",n),s&&P.removeEventListener("resize",n)}),g==null||g(),(k=S)==null||k.disconnect(),S=null,u&&cancelAnimationFrame(R)}}const mj=YB,yj=KB,bj=WB,_j=ZB,vj=qB,Z2=HB,xj=QB,wj=(t,e,n)=>{const r=new Map,i={platform:dj,...n},s={...i.platform,_c:r};return $B(t,e,{...i,platform:s})};var Sj=typeof document<"u",Tj=function(){},Kd=Sj?I.useLayoutEffect:Tj;function gp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!gp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function aC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function G2(t,e){const n=aC(t);return Math.round(e*n)/n}function ab(t){const e=I.useRef(t);return Kd(()=>{e.current=t}),e}function Ej(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:u,open:h}=t,[d,g]=I.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,S]=I.useState(r);gp(b,r)||S(r);const[R,A]=I.useState(null),[C,k]=I.useState(null),P=I.useCallback(pe=>{pe!==F.current&&(F.current=pe,A(pe))},[]),M=I.useCallback(pe=>{pe!==Z.current&&(Z.current=pe,k(pe))},[]),z=s||R,$=a||C,F=I.useRef(null),Z=I.useRef(null),Q=I.useRef(d),ue=u!=null,Y=ab(u),K=ab(i),ie=ab(h),_e=I.useCallback(()=>{if(!F.current||!Z.current)return;const pe={placement:e,strategy:n,middleware:b};K.current&&(pe.platform=K.current),wj(F.current,Z.current,pe).then(Xe=>{const O={...Xe,isPositioned:ie.current!==!1};re.current&&!gp(Q.current,O)&&(Q.current=O,zc.flushSync(()=>{g(O)}))})},[b,e,n,K,ie]);Kd(()=>{h===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,g(pe=>({...pe,isPositioned:!1})))},[h]);const re=I.useRef(!1);Kd(()=>(re.current=!0,()=>{re.current=!1}),[]),Kd(()=>{if(z&&(F.current=z),$&&(Z.current=$),z&&$){if(Y.current)return Y.current(z,$,_e);_e()}},[z,$,_e,Y,ue]);const Te=I.useMemo(()=>({reference:F,floating:Z,setReference:P,setFloating:M}),[P,M]),ne=I.useMemo(()=>({reference:z,floating:$}),[z,$]),Se=I.useMemo(()=>{const pe={position:n,left:0,top:0};if(!ne.floating)return pe;const Xe=G2(ne.floating,d.x),O=G2(ne.floating,d.y);return c?{...pe,transform:"translate("+Xe+"px, "+O+"px)",...aC(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Xe,top:O}},[n,c,ne.floating,d.x,d.y]);return I.useMemo(()=>({...d,update:_e,refs:Te,elements:ne,floatingStyles:Se}),[d,_e,Te,ne,Se])}const Aj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Z2({element:r.current,padding:i}).fn(n):{}:r?Z2({element:r,padding:i}).fn(n):{}}}},Rj=(t,e)=>({...mj(t),options:[t,e]}),Cj=(t,e)=>({...yj(t),options:[t,e]}),kj=(t,e)=>({...xj(t),options:[t,e]}),Mj=(t,e)=>({...bj(t),options:[t,e]}),Nj=(t,e)=>({..._j(t),options:[t,e]}),Ij=(t,e)=>({...vj(t),options:[t,e]}),Oj=(t,e)=>({...Aj(t),options:[t,e]});var Pj="Arrow",lC=I.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return v.jsx(Ot.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});lC.displayName=Pj;var Dj=lC;function Fj(t){const[e,n]=I.useState(void 0);return pr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,c;if("borderBoxSize"in s){const u=s.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,c=h.blockSize}else a=t.offsetWidth,c=t.offsetHeight;n({width:a,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Sv="Popper",[cC,uC]=Ka(Sv),[Bj,fC]=cC(Sv),hC=t=>{const{__scopePopper:e,children:n}=t,[r,i]=I.useState(null);return v.jsx(Bj,{scope:e,anchor:r,onAnchorChange:i,children:n})};hC.displayName=Sv;var dC="PopperAnchor",pC=I.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=fC(dC,n),a=I.useRef(null),c=Fn(e,a);return I.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:v.jsx(Ot.div,{...i,ref:c})});pC.displayName=dC;var Tv="PopperContent",[jj,Uj]=cC(Tv),gC=I.forwardRef((t,e)=>{var ke,je,tt,Ze,it,ct;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:d=0,sticky:g="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:R,...A}=t,C=fC(Tv,n),[k,P]=I.useState(null),M=Fn(e,bt=>P(bt)),[z,$]=I.useState(null),F=Fj(z),Z=(F==null?void 0:F.width)??0,Q=(F==null?void 0:F.height)??0,ue=r+(s!=="center"?"-"+s:""),Y=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},K=Array.isArray(h)?h:[h],ie=K.length>0,_e={padding:Y,boundary:K.filter(zj),altBoundary:ie},{refs:re,floatingStyles:Te,placement:ne,isPositioned:Se,middlewareData:pe}=Ej({strategy:"fixed",placement:ue,whileElementsMounted:(...bt)=>gj(...bt,{animationFrame:S==="always"}),elements:{reference:C.anchor},middleware:[Rj({mainAxis:i+Q,alignmentAxis:a}),u&&Cj({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?kj():void 0,..._e}),u&&Mj({..._e}),Nj({..._e,apply:({elements:bt,rects:qt,availableWidth:In,availableHeight:ar})=>{const{width:bn,height:Sn}=qt.reference,ln=bt.floating.style;ln.setProperty("--radix-popper-available-width",`${In}px`),ln.setProperty("--radix-popper-available-height",`${ar}px`),ln.setProperty("--radix-popper-anchor-width",`${bn}px`),ln.setProperty("--radix-popper-anchor-height",`${Sn}px`)}}),z&&Oj({element:z,padding:c}),Vj({arrowWidth:Z,arrowHeight:Q}),b&&Ij({strategy:"referenceHidden",..._e})]}),[Xe,O]=bC(ne),Ee=Ti(R);pr(()=>{Se&&(Ee==null||Ee())},[Se,Ee]);const Ae=(ke=pe.arrow)==null?void 0:ke.x,B=(je=pe.arrow)==null?void 0:je.y,Ce=((tt=pe.arrow)==null?void 0:tt.centerOffset)!==0,[ge,Oe]=I.useState();return pr(()=>{k&&Oe(window.getComputedStyle(k).zIndex)},[k]),v.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...Te,transform:Se?Te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Ze=pe.transformOrigin)==null?void 0:Ze.x,(it=pe.transformOrigin)==null?void 0:it.y].join(" "),...((ct=pe.hide)==null?void 0:ct.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:v.jsx(jj,{scope:n,placedSide:Xe,onArrowChange:$,arrowX:Ae,arrowY:B,shouldHideArrow:Ce,children:v.jsx(Ot.div,{"data-side":Xe,"data-align":O,...A,ref:M,style:{...A.style,animation:Se?void 0:"none"}})})})});gC.displayName=Tv;var mC="PopperArrow",Lj={top:"bottom",right:"left",bottom:"top",left:"right"},yC=I.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Uj(mC,r),a=Lj[s.placedSide];return v.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:v.jsx(Dj,{...i,ref:n,style:{...i.style,display:"block"}})})});yC.displayName=mC;function zj(t){return t!==null}var Vj=t=>({name:"transformOrigin",options:t,fn(e){var C,k,P;const{placement:n,rects:r,middlewareData:i}=e,a=((C=i.arrow)==null?void 0:C.centerOffset)!==0,c=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[h,d]=bC(n),g={start:"0%",center:"50%",end:"100%"}[d],b=(((k=i.arrow)==null?void 0:k.x)??0)+c/2,S=(((P=i.arrow)==null?void 0:P.y)??0)+u/2;let R="",A="";return h==="bottom"?(R=a?g:`${b}px`,A=`${-u}px`):h==="top"?(R=a?g:`${b}px`,A=`${r.floating.height+u}px`):h==="right"?(R=`${-u}px`,A=a?g:`${S}px`):h==="left"&&(R=`${r.floating.width+u}px`,A=a?g:`${S}px`),{data:{x:R,y:A}}}});function bC(t){const[e,n="center"]=t.split("-");return[e,n]}var $j=hC,Hj=pC,Wj=gC,qj=yC;function Xj(t){const e=I.useRef({value:t,previous:t});return I.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Yj=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fl=new WeakMap,xd=new WeakMap,wd={},lb=0,_C=function(t){return t&&(t.host||_C(t.parentNode))},Kj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_C(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Qj=function(t,e,n,r){var i=Kj(e,Array.isArray(t)?t:[t]);wd[n]||(wd[n]=new WeakMap);var s=wd[n],a=[],c=new Set,u=new Set(i),h=function(g){!g||c.has(g)||(c.add(g),h(g.parentNode))};i.forEach(h);var d=function(g){!g||u.has(g)||Array.prototype.forEach.call(g.children,function(b){if(c.has(b))d(b);else try{var S=b.getAttribute(r),R=S!==null&&S!=="false",A=(Fl.get(b)||0)+1,C=(s.get(b)||0)+1;Fl.set(b,A),s.set(b,C),a.push(b),A===1&&R&&xd.set(b,!0),C===1&&b.setAttribute(n,"true"),R||b.setAttribute(r,"true")}catch(k){console.error("aria-hidden: cannot operate on ",b,k)}})};return d(e),c.clear(),lb++,function(){a.forEach(function(g){var b=Fl.get(g)-1,S=s.get(g)-1;Fl.set(g,b),s.set(g,S),b||(xd.has(g)||g.removeAttribute(r),xd.delete(g)),S||g.removeAttribute(n)}),lb--,lb||(Fl=new WeakMap,Fl=new WeakMap,xd=new WeakMap,wd={})}},Zj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Yj(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Qj(r,i,n,"aria-hidden")):function(){return null}},as=function(){return as=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},as.apply(this,arguments)};function vC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Gj(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Qd="right-scroll-bar-position",Zd="width-before-scroll-bar",Jj="with-scroll-bars-hidden",eU="--removed-body-scroll-bar-size";function cb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function tU(t,e){var n=I.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var nU=typeof window<"u"?I.useLayoutEffect:I.useEffect,J2=new WeakMap;function rU(t,e){var n=tU(null,function(r){return t.forEach(function(i){return cb(i,r)})});return nU(function(){var r=J2.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(c){s.has(c)||cb(c,null)}),s.forEach(function(c){i.has(c)||cb(c,a)})}J2.set(n,t)},[t]),n}function iU(t){return t}function sU(t,e){e===void 0&&(e=iU);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(c){return s(c)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(s),a=n}var u=function(){var d=a;a=[],d.forEach(s)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(d){a.push(d),h()},filter:function(d){return a=a.filter(d),n}}}};return i}function oU(t){t===void 0&&(t={});var e=sU(null);return e.options=as({async:!0,ssr:!1},t),e}var xC=function(t){var e=t.sideCar,n=vC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,as({},n))};xC.isSideCarExport=!0;function aU(t,e){return t.useMedium(e),xC}var wC=oU(),ub=function(){},wg=I.forwardRef(function(t,e){var n=I.useRef(null),r=I.useState({onScrollCapture:ub,onWheelCapture:ub,onTouchMoveCapture:ub}),i=r[0],s=r[1],a=t.forwardProps,c=t.children,u=t.className,h=t.removeScrollBar,d=t.enabled,g=t.shards,b=t.sideCar,S=t.noRelative,R=t.noIsolation,A=t.inert,C=t.allowPinchZoom,k=t.as,P=k===void 0?"div":k,M=t.gapMode,z=vC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=b,F=rU([n,e]),Z=as(as({},z),i);return I.createElement(I.Fragment,null,d&&I.createElement($,{sideCar:wC,removeScrollBar:h,shards:g,noRelative:S,noIsolation:R,inert:A,setCallbacks:s,allowPinchZoom:!!C,lockRef:n,gapMode:M}),a?I.cloneElement(I.Children.only(c),as(as({},Z),{ref:F})):I.createElement(P,as({},Z,{className:u,ref:F}),c))});wg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wg.classNames={fullWidth:Zd,zeroRight:Qd};var lU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lU();return e&&t.setAttribute("nonce",e),t}function uU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=cU())&&(uU(e,n),fU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},dU=function(){var t=hU();return function(e,n){I.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},SC=function(){var t=dU(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},pU={left:0,top:0,right:0,gap:0},fb=function(t){return parseInt(t||"",10)||0},gU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[fb(n),fb(r),fb(i)]},mU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return pU;var e=gU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},yU=SC(),lc="data-scroll-locked",bU=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Jj,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(lc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qd,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Zd,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Qd," .").concat(Qd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zd," .").concat(Zd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lc,`] {
    `).concat(eU,": ").concat(c,`px;
  }
`)},eT=function(){var t=parseInt(document.body.getAttribute(lc)||"0",10);return isFinite(t)?t:0},_U=function(){I.useEffect(function(){return document.body.setAttribute(lc,(eT()+1).toString()),function(){var t=eT()-1;t<=0?document.body.removeAttribute(lc):document.body.setAttribute(lc,t.toString())}},[])},vU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;_U();var s=I.useMemo(function(){return mU(i)},[i]);return I.createElement(yU,{styles:bU(s,!e,i,n?"":"!important")})},B_=!1;if(typeof window<"u")try{var Sd=Object.defineProperty({},"passive",{get:function(){return B_=!0,!0}});window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{B_=!1}var Bl=B_?{passive:!1}:!1,xU=function(t){return t.tagName==="TEXTAREA"},TC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!xU(t)&&n[e]==="visible")},wU=function(t){return TC(t,"overflowY")},SU=function(t){return TC(t,"overflowX")},tT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=EC(t,r);if(i){var s=AC(t,r),a=s[1],c=s[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},EU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},EC=function(t,e){return t==="v"?wU(e):SU(e)},AC=function(t,e){return t==="v"?TU(e):EU(e)},AU=function(t,e){return t==="h"&&e==="rtl"?-1:1},RU=function(t,e,n,r,i){var s=AU(t,window.getComputedStyle(e).direction),a=s*r,c=n.target,u=e.contains(c),h=!1,d=a>0,g=0,b=0;do{if(!c)break;var S=AC(t,c),R=S[0],A=S[1],C=S[2],k=A-C-s*R;(R||k)&&EC(t,c)&&(g+=k,b+=R);var P=c.parentNode;c=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(d&&Math.abs(g)<1||!d&&Math.abs(b)<1)&&(h=!0),h},Td=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},nT=function(t){return[t.deltaX,t.deltaY]},rT=function(t){return t&&"current"in t?t.current:t},CU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},kU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},MU=0,jl=[];function NU(t){var e=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(MU++)[0],s=I.useState(SC)[0],a=I.useRef(t);I.useEffect(function(){a.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var A=Gj([t.lockRef.current],(t.shards||[]).map(rT),!0).filter(Boolean);return A.forEach(function(C){return C.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=I.useCallback(function(A,C){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var k=Td(A),P=n.current,M="deltaX"in A?A.deltaX:P[0]-k[0],z="deltaY"in A?A.deltaY:P[1]-k[1],$,F=A.target,Z=Math.abs(M)>Math.abs(z)?"h":"v";if("touches"in A&&Z==="h"&&F.type==="range")return!1;var Q=tT(Z,F);if(!Q)return!0;if(Q?$=Z:($=Z==="v"?"h":"v",Q=tT(Z,F)),!Q)return!1;if(!r.current&&"changedTouches"in A&&(M||z)&&(r.current=$),!$)return!0;var ue=r.current||$;return RU(ue,C,A,ue==="h"?M:z)},[]),u=I.useCallback(function(A){var C=A;if(!(!jl.length||jl[jl.length-1]!==s)){var k="deltaY"in C?nT(C):Td(C),P=e.current.filter(function($){return $.name===C.type&&($.target===C.target||C.target===$.shadowParent)&&CU($.delta,k)})[0];if(P&&P.should){C.cancelable&&C.preventDefault();return}if(!P){var M=(a.current.shards||[]).map(rT).filter(Boolean).filter(function($){return $.contains(C.target)}),z=M.length>0?c(C,M[0]):!a.current.noIsolation;z&&C.cancelable&&C.preventDefault()}}},[]),h=I.useCallback(function(A,C,k,P){var M={name:A,delta:C,target:k,should:P,shadowParent:IU(k)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(z){return z!==M})},1)},[]),d=I.useCallback(function(A){n.current=Td(A),r.current=void 0},[]),g=I.useCallback(function(A){h(A.type,nT(A),A.target,c(A,t.lockRef.current))},[]),b=I.useCallback(function(A){h(A.type,Td(A),A.target,c(A,t.lockRef.current))},[]);I.useEffect(function(){return jl.push(s),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:b}),document.addEventListener("wheel",u,Bl),document.addEventListener("touchmove",u,Bl),document.addEventListener("touchstart",d,Bl),function(){jl=jl.filter(function(A){return A!==s}),document.removeEventListener("wheel",u,Bl),document.removeEventListener("touchmove",u,Bl),document.removeEventListener("touchstart",d,Bl)}},[]);var S=t.removeScrollBar,R=t.inert;return I.createElement(I.Fragment,null,R?I.createElement(s,{styles:kU(i)}):null,S?I.createElement(vU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function IU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const OU=aU(wC,NU);var RC=I.forwardRef(function(t,e){return I.createElement(wg,as({},t,{ref:e,sideCar:OU}))});RC.classNames=wg.classNames;var PU=[" ","Enter","ArrowUp","ArrowDown"],DU=[" ","Enter"],Va="Select",[Sg,Tg,FU]=G0(Va),[qc,tre]=Ka(Va,[FU,uC]),Eg=uC(),[BU,Ko]=qc(Va),[jU,UU]=qc(Va),CC=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:c,onValueChange:u,dir:h,name:d,autoComplete:g,disabled:b,required:S,form:R}=t,A=Eg(e),[C,k]=I.useState(null),[P,M]=I.useState(null),[z,$]=I.useState(!1),F=pv(h),[Z,Q]=kf({prop:r,defaultProp:i??!1,onChange:s,caller:Va}),[ue,Y]=kf({prop:a,defaultProp:c,onChange:u,caller:Va}),K=I.useRef(null),ie=C?R||!!C.closest("form"):!0,[_e,re]=I.useState(new Set),Te=Array.from(_e).map(ne=>ne.props.value).join(";");return v.jsx($j,{...A,children:v.jsxs(BU,{required:S,scope:e,trigger:C,onTriggerChange:k,valueNode:P,onValueNodeChange:M,valueNodeHasChildren:z,onValueNodeHasChildrenChange:$,contentId:qf(),value:ue,onValueChange:Y,open:Z,onOpenChange:Q,dir:F,triggerPointerDownPosRef:K,disabled:b,children:[v.jsx(Sg.Provider,{scope:e,children:v.jsx(jU,{scope:t.__scopeSelect,onNativeOptionAdd:I.useCallback(ne=>{re(Se=>new Set(Se).add(ne))},[]),onNativeOptionRemove:I.useCallback(ne=>{re(Se=>{const pe=new Set(Se);return pe.delete(ne),pe})},[]),children:n})}),ie?v.jsxs(QC,{"aria-hidden":!0,required:S,tabIndex:-1,name:d,autoComplete:g,value:ue,onChange:ne=>Y(ne.target.value),disabled:b,form:R,children:[ue===void 0?v.jsx("option",{value:""}):null,Array.from(_e)]},Te):null]})})};CC.displayName=Va;var kC="SelectTrigger",MC=I.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Eg(n),a=Ko(kC,n),c=a.disabled||r,u=Fn(e,a.onTriggerChange),h=Tg(n),d=I.useRef("touch"),[g,b,S]=GC(A=>{const C=h().filter(M=>!M.disabled),k=C.find(M=>M.value===a.value),P=JC(C,A,k);P!==void 0&&a.onValueChange(P.value)}),R=A=>{c||(a.onOpenChange(!0),S()),A&&(a.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return v.jsx(Hj,{asChild:!0,...s,children:v.jsx(Ot.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":ZC(a.value)?"":void 0,...i,ref:u,onClick:Rt(i.onClick,A=>{A.currentTarget.focus(),d.current!=="mouse"&&R(A)}),onPointerDown:Rt(i.onPointerDown,A=>{d.current=A.pointerType;const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(R(A),A.preventDefault())}),onKeyDown:Rt(i.onKeyDown,A=>{const C=g.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&b(A.key),!(C&&A.key===" ")&&PU.includes(A.key)&&(R(),A.preventDefault())})})})});MC.displayName=kC;var NC="SelectValue",IC=I.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...c}=t,u=Ko(NC,n),{onValueNodeHasChildrenChange:h}=u,d=s!==void 0,g=Fn(e,u.onValueNodeChange);return pr(()=>{h(d)},[h,d]),v.jsx(Ot.span,{...c,ref:g,style:{pointerEvents:"none"},children:ZC(u.value)?v.jsx(v.Fragment,{children:a}):s})});IC.displayName=NC;var LU="SelectIcon",OC=I.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return v.jsx(Ot.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});OC.displayName=LU;var zU="SelectPortal",PC=t=>v.jsx(ev,{asChild:!0,...t});PC.displayName=zU;var $a="SelectContent",DC=I.forwardRef((t,e)=>{const n=Ko($a,t.__scopeSelect),[r,i]=I.useState();if(pr(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?zc.createPortal(v.jsx(FC,{scope:t.__scopeSelect,children:v.jsx(Sg.Slot,{scope:t.__scopeSelect,children:v.jsx("div",{children:t.children})})}),s):null}return v.jsx(BC,{...t,ref:e})});DC.displayName=$a;var Di=10,[FC,Qo]=qc($a),VU="SelectContentImpl",$U=Cf("SelectContent.RemoveScroll"),BC=I.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:c,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:S,sticky:R,hideWhenDetached:A,avoidCollisions:C,...k}=t,P=Ko($a,n),[M,z]=I.useState(null),[$,F]=I.useState(null),Z=Fn(e,ke=>z(ke)),[Q,ue]=I.useState(null),[Y,K]=I.useState(null),ie=Tg(n),[_e,re]=I.useState(!1),Te=I.useRef(!1);I.useEffect(()=>{if(M)return Zj(M)},[M]),RB();const ne=I.useCallback(ke=>{const[je,...tt]=ie().map(ct=>ct.ref.current),[Ze]=tt.slice(-1),it=document.activeElement;for(const ct of ke)if(ct===it||(ct==null||ct.scrollIntoView({block:"nearest"}),ct===je&&$&&($.scrollTop=0),ct===Ze&&$&&($.scrollTop=$.scrollHeight),ct==null||ct.focus(),document.activeElement!==it))return},[ie,$]),Se=I.useCallback(()=>ne([Q,M]),[ne,Q,M]);I.useEffect(()=>{_e&&Se()},[_e,Se]);const{onOpenChange:pe,triggerPointerDownPosRef:Xe}=P;I.useEffect(()=>{if(M){let ke={x:0,y:0};const je=Ze=>{var it,ct;ke={x:Math.abs(Math.round(Ze.pageX)-(((it=Xe.current)==null?void 0:it.x)??0)),y:Math.abs(Math.round(Ze.pageY)-(((ct=Xe.current)==null?void 0:ct.y)??0))}},tt=Ze=>{ke.x<=10&&ke.y<=10?Ze.preventDefault():M.contains(Ze.target)||pe(!1),document.removeEventListener("pointermove",je),Xe.current=null};return Xe.current!==null&&(document.addEventListener("pointermove",je),document.addEventListener("pointerup",tt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",je),document.removeEventListener("pointerup",tt,{capture:!0})}}},[M,pe,Xe]),I.useEffect(()=>{const ke=()=>pe(!1);return window.addEventListener("blur",ke),window.addEventListener("resize",ke),()=>{window.removeEventListener("blur",ke),window.removeEventListener("resize",ke)}},[pe]);const[O,Ee]=GC(ke=>{const je=ie().filter(it=>!it.disabled),tt=je.find(it=>it.ref.current===document.activeElement),Ze=JC(je,ke,tt);Ze&&setTimeout(()=>Ze.ref.current.focus())}),Ae=I.useCallback((ke,je,tt)=>{const Ze=!Te.current&&!tt;(P.value!==void 0&&P.value===je||Ze)&&(ue(ke),Ze&&(Te.current=!0))},[P.value]),B=I.useCallback(()=>M==null?void 0:M.focus(),[M]),Ce=I.useCallback((ke,je,tt)=>{const Ze=!Te.current&&!tt;(P.value!==void 0&&P.value===je||Ze)&&K(ke)},[P.value]),ge=r==="popper"?j_:jC,Oe=ge===j_?{side:c,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:S,sticky:R,hideWhenDetached:A,avoidCollisions:C}:{};return v.jsx(FC,{scope:n,content:M,viewport:$,onViewportChange:F,itemRefCallback:Ae,selectedItem:Q,onItemLeave:B,itemTextRefCallback:Ce,focusSelectedItem:Se,selectedItemText:Y,position:r,isPositioned:_e,searchRef:O,children:v.jsx(RC,{as:$U,allowPinchZoom:!0,children:v.jsx(QR,{asChild:!0,trapped:P.open,onMountAutoFocus:ke=>{ke.preventDefault()},onUnmountAutoFocus:Rt(i,ke=>{var je;(je=P.trigger)==null||je.focus({preventScroll:!0}),ke.preventDefault()}),children:v.jsx(J0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ke=>ke.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:v.jsx(ge,{role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:ke=>ke.preventDefault(),...k,...Oe,onPlaced:()=>re(!0),ref:Z,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:Rt(k.onKeyDown,ke=>{const je=ke.ctrlKey||ke.altKey||ke.metaKey;if(ke.key==="Tab"&&ke.preventDefault(),!je&&ke.key.length===1&&Ee(ke.key),["ArrowUp","ArrowDown","Home","End"].includes(ke.key)){let Ze=ie().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(ke.key)&&(Ze=Ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(ke.key)){const it=ke.target,ct=Ze.indexOf(it);Ze=Ze.slice(ct+1)}setTimeout(()=>ne(Ze)),ke.preventDefault()}})})})})})})});BC.displayName=VU;var HU="SelectItemAlignedPosition",jC=I.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Ko($a,n),a=Qo($a,n),[c,u]=I.useState(null),[h,d]=I.useState(null),g=Fn(e,Z=>d(Z)),b=Tg(n),S=I.useRef(!1),R=I.useRef(!0),{viewport:A,selectedItem:C,selectedItemText:k,focusSelectedItem:P}=a,M=I.useCallback(()=>{if(s.trigger&&s.valueNode&&c&&h&&A&&C&&k){const Z=s.trigger.getBoundingClientRect(),Q=h.getBoundingClientRect(),ue=s.valueNode.getBoundingClientRect(),Y=k.getBoundingClientRect();if(s.dir!=="rtl"){const it=Y.left-Q.left,ct=ue.left-it,bt=Z.left-ct,qt=Z.width+bt,In=Math.max(qt,Q.width),ar=window.innerWidth-Di,bn=U2(ct,[Di,Math.max(Di,ar-In)]);c.style.minWidth=qt+"px",c.style.left=bn+"px"}else{const it=Q.right-Y.right,ct=window.innerWidth-ue.right-it,bt=window.innerWidth-Z.right-ct,qt=Z.width+bt,In=Math.max(qt,Q.width),ar=window.innerWidth-Di,bn=U2(ct,[Di,Math.max(Di,ar-In)]);c.style.minWidth=qt+"px",c.style.right=bn+"px"}const K=b(),ie=window.innerHeight-Di*2,_e=A.scrollHeight,re=window.getComputedStyle(h),Te=parseInt(re.borderTopWidth,10),ne=parseInt(re.paddingTop,10),Se=parseInt(re.borderBottomWidth,10),pe=parseInt(re.paddingBottom,10),Xe=Te+ne+_e+pe+Se,O=Math.min(C.offsetHeight*5,Xe),Ee=window.getComputedStyle(A),Ae=parseInt(Ee.paddingTop,10),B=parseInt(Ee.paddingBottom,10),Ce=Z.top+Z.height/2-Di,ge=ie-Ce,Oe=C.offsetHeight/2,ke=C.offsetTop+Oe,je=Te+ne+ke,tt=Xe-je;if(je<=Ce){const it=K.length>0&&C===K[K.length-1].ref.current;c.style.bottom="0px";const ct=h.clientHeight-A.offsetTop-A.offsetHeight,bt=Math.max(ge,Oe+(it?B:0)+ct+Se),qt=je+bt;c.style.height=qt+"px"}else{const it=K.length>0&&C===K[0].ref.current;c.style.top="0px";const bt=Math.max(Ce,Te+A.offsetTop+(it?Ae:0)+Oe)+tt;c.style.height=bt+"px",A.scrollTop=je-Ce+A.offsetTop}c.style.margin=`${Di}px 0`,c.style.minHeight=O+"px",c.style.maxHeight=ie+"px",r==null||r(),requestAnimationFrame(()=>S.current=!0)}},[b,s.trigger,s.valueNode,c,h,A,C,k,s.dir,r]);pr(()=>M(),[M]);const[z,$]=I.useState();pr(()=>{h&&$(window.getComputedStyle(h).zIndex)},[h]);const F=I.useCallback(Z=>{Z&&R.current===!0&&(M(),P==null||P(),R.current=!1)},[M,P]);return v.jsx(qU,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:S,onScrollButtonChange:F,children:v.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:z},children:v.jsx(Ot.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});jC.displayName=HU;var WU="SelectPopperPosition",j_=I.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Di,...s}=t,a=Eg(n);return v.jsx(Wj,{...a,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});j_.displayName=WU;var[qU,Ev]=qc($a,{}),U_="SelectViewport",UC=I.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Qo(U_,n),a=Ev(U_,n),c=Fn(e,s.onViewportChange),u=I.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),v.jsx(Sg.Slot,{scope:n,children:v.jsx(Ot.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Rt(i.onScroll,h=>{const d=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:b}=a;if(b!=null&&b.current&&g){const S=Math.abs(u.current-d.scrollTop);if(S>0){const R=window.innerHeight-Di*2,A=parseFloat(g.style.minHeight),C=parseFloat(g.style.height),k=Math.max(A,C);if(k<R){const P=k+S,M=Math.min(R,P),z=P-M;g.style.height=M+"px",g.style.bottom==="0px"&&(d.scrollTop=z>0?z:0,g.style.justifyContent="flex-end")}}}u.current=d.scrollTop})})})]})});UC.displayName=U_;var LC="SelectGroup",[XU,YU]=qc(LC),KU=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=qf();return v.jsx(XU,{scope:n,id:i,children:v.jsx(Ot.div,{role:"group","aria-labelledby":i,...r,ref:e})})});KU.displayName=LC;var zC="SelectLabel",VC=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=YU(zC,n);return v.jsx(Ot.div,{id:i.id,...r,ref:e})});VC.displayName=zC;var mp="SelectItem",[QU,$C]=qc(mp),HC=I.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=t,c=Ko(mp,n),u=Qo(mp,n),h=c.value===r,[d,g]=I.useState(s??""),[b,S]=I.useState(!1),R=Fn(e,P=>{var M;return(M=u.itemRefCallback)==null?void 0:M.call(u,P,r,i)}),A=qf(),C=I.useRef("touch"),k=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(QU,{scope:n,value:r,disabled:i,textId:A,isSelected:h,onItemTextChange:I.useCallback(P=>{g(M=>M||((P==null?void 0:P.textContent)??"").trim())},[]),children:v.jsx(Sg.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:v.jsx(Ot.div,{role:"option","aria-labelledby":A,"data-highlighted":b?"":void 0,"aria-selected":h&&b,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:R,onFocus:Rt(a.onFocus,()=>S(!0)),onBlur:Rt(a.onBlur,()=>S(!1)),onClick:Rt(a.onClick,()=>{C.current!=="mouse"&&k()}),onPointerUp:Rt(a.onPointerUp,()=>{C.current==="mouse"&&k()}),onPointerDown:Rt(a.onPointerDown,P=>{C.current=P.pointerType}),onPointerMove:Rt(a.onPointerMove,P=>{var M;C.current=P.pointerType,i?(M=u.onItemLeave)==null||M.call(u):C.current==="mouse"&&P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Rt(a.onPointerLeave,P=>{var M;P.currentTarget===document.activeElement&&((M=u.onItemLeave)==null||M.call(u))}),onKeyDown:Rt(a.onKeyDown,P=>{var z;((z=u.searchRef)==null?void 0:z.current)!==""&&P.key===" "||(DU.includes(P.key)&&k(),P.key===" "&&P.preventDefault())})})})})});HC.displayName=mp;var of="SelectItemText",WC=I.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,a=Ko(of,n),c=Qo(of,n),u=$C(of,n),h=UU(of,n),[d,g]=I.useState(null),b=Fn(e,k=>g(k),u.onItemTextChange,k=>{var P;return(P=c.itemTextRefCallback)==null?void 0:P.call(c,k,u.value,u.disabled)}),S=d==null?void 0:d.textContent,R=I.useMemo(()=>v.jsx("option",{value:u.value,disabled:u.disabled,children:S},u.value),[u.disabled,u.value,S]),{onNativeOptionAdd:A,onNativeOptionRemove:C}=h;return pr(()=>(A(R),()=>C(R)),[A,C,R]),v.jsxs(v.Fragment,{children:[v.jsx(Ot.span,{id:u.textId,...s,ref:b}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?zc.createPortal(s.children,a.valueNode):null]})});WC.displayName=of;var qC="SelectItemIndicator",XC=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return $C(qC,n).isSelected?v.jsx(Ot.span,{"aria-hidden":!0,...r,ref:e}):null});XC.displayName=qC;var L_="SelectScrollUpButton",ZU=I.forwardRef((t,e)=>{const n=Qo(L_,t.__scopeSelect),r=Ev(L_,t.__scopeSelect),[i,s]=I.useState(!1),a=Fn(e,r.onScrollButtonChange);return pr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollTop>0;s(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?v.jsx(YC,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});ZU.displayName=L_;var z_="SelectScrollDownButton",GU=I.forwardRef((t,e)=>{const n=Qo(z_,t.__scopeSelect),r=Ev(z_,t.__scopeSelect),[i,s]=I.useState(!1),a=Fn(e,r.onScrollButtonChange);return pr(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,d=Math.ceil(u.scrollTop)<h;s(d)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?v.jsx(YC,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});GU.displayName=z_;var YC=I.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Qo("SelectScrollButton",n),a=I.useRef(null),c=Tg(n),u=I.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return I.useEffect(()=>()=>u(),[u]),pr(()=>{var d;const h=c().find(g=>g.ref.current===document.activeElement);(d=h==null?void 0:h.ref.current)==null||d.scrollIntoView({block:"nearest"})},[c]),v.jsx(Ot.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Rt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Rt(i.onPointerMove,()=>{var h;(h=s.onItemLeave)==null||h.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Rt(i.onPointerLeave,()=>{u()})})}),JU="SelectSeparator",KC=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return v.jsx(Ot.div,{"aria-hidden":!0,...r,ref:e})});KC.displayName=JU;var V_="SelectArrow",eL=I.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Eg(n),s=Ko(V_,n),a=Qo(V_,n);return s.open&&a.position==="popper"?v.jsx(qj,{...i,...r,ref:e}):null});eL.displayName=V_;var tL="SelectBubbleInput",QC=I.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=I.useRef(null),s=Fn(r,i),a=Xj(e);return I.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&d){const g=new Event("change",{bubbles:!0});d.call(c,e),c.dispatchEvent(g)}},[a,e]),v.jsx(Ot.select,{...n,style:{...zA,...n.style},ref:s,defaultValue:e})});QC.displayName=tL;function ZC(t){return t===""||t===void 0}function GC(t){const e=Ti(t),n=I.useRef(""),r=I.useRef(0),i=I.useCallback(a=>{const c=n.current+a;e(c),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),s=I.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function JC(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=nL(t,Math.max(s,0));i.length===1&&(a=a.filter(h=>h!==n));const u=a.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function nL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rL=CC,ek=MC,iL=IC,sL=OC,oL=PC,tk=DC,aL=UC,nk=VC,rk=HC,lL=WC,cL=XC,ik=KC;const sk=rL,ok=iL,Av=I.forwardRef(({className:t,children:e,...n},r)=>v.jsxs(ek,{ref:r,className:Kt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,v.jsx(sL,{asChild:!0,children:v.jsx(ov,{className:"h-4 w-4 opacity-50"})})]}));Av.displayName=ek.displayName;const Rv=I.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>v.jsx(oL,{children:v.jsx(tk,{ref:i,className:Kt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:v.jsx(aL,{className:Kt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Rv.displayName=tk.displayName;const uL=I.forwardRef(({className:t,...e},n)=>v.jsx(nk,{ref:n,className:Kt("py-1.5 pl-8 pr-2 text-sm font-thin",t),...e}));uL.displayName=nk.displayName;const Jl=I.forwardRef(({className:t,children:e,...n},r)=>v.jsxs(rk,{ref:r,className:Kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(cL,{children:v.jsx(XD,{className:"h-4 w-4"})})}),v.jsx(lL,{children:e})]}));Jl.displayName=rk.displayName;const fL=I.forwardRef(({className:t,...e},n)=>v.jsx(ik,{ref:n,className:Kt("-mx-1 my-1 h-px bg-muted",t),...e}));fL.displayName=ik.displayName;const Cv=I.createContext(null);Cv.displayName="PanelGroupContext";const li={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandleId:"data-panel-resize-handle-id"},kv=10,cc=I.useLayoutEffect,iT=X0.useId,hL=typeof iT=="function"?iT:()=>null;let dL=0;function ak(t=null){const e=hL(),n=I.useRef(t||e||null);return n.current===null&&(n.current=""+dL++),t??n.current}function lk({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:a,maxSize:c,minSize:u,onCollapse:h,onExpand:d,onResize:g,order:b,style:S,tagName:R="div",...A}){const C=I.useContext(Cv);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:k,expandPanel:P,getPanelSize:M,getPanelStyle:z,groupId:$,isPanelCollapsed:F,reevaluatePanelConstraints:Z,registerPanel:Q,resizePanel:ue,unregisterPanel:Y}=C,K=ak(a),ie=I.useRef({callbacks:{onCollapse:h,onExpand:d,onResize:g},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:c,minSize:u},id:K,idIsFromProps:a!==void 0,order:b});I.useRef({didLogMissingDefaultSizeWarning:!1}),cc(()=>{const{callbacks:re,constraints:Te}=ie.current,ne={...Te};ie.current.id=K,ie.current.idIsFromProps=a!==void 0,ie.current.order=b,re.onCollapse=h,re.onExpand=d,re.onResize=g,Te.collapsedSize=n,Te.collapsible=r,Te.defaultSize=i,Te.maxSize=c,Te.minSize=u,(ne.collapsedSize!==Te.collapsedSize||ne.collapsible!==Te.collapsible||ne.maxSize!==Te.maxSize||ne.minSize!==Te.minSize)&&Z(ie.current,ne)}),cc(()=>{const re=ie.current;return Q(re),()=>{Y(re)}},[b,K,Q,Y]),I.useImperativeHandle(s,()=>({collapse:()=>{k(ie.current)},expand:re=>{P(ie.current,re)},getId(){return K},getSize(){return M(ie.current)},isCollapsed(){return F(ie.current)},isExpanded(){return!F(ie.current)},resize:re=>{ue(ie.current,re)}}),[k,P,M,F,K,ue]);const _e=z(ie.current,i);return I.createElement(R,{...A,children:t,className:e,id:K,style:{..._e,...S},[li.groupId]:$,[li.panel]:"",[li.panelCollapsible]:r||void 0,[li.panelId]:K,[li.panelSize]:parseFloat(""+_e.flexGrow).toFixed(1)})}const pL=I.forwardRef((t,e)=>I.createElement(lk,{...t,forwardedRef:e}));lk.displayName="Panel";pL.displayName="forwardRef(Panel)";function ck(t){return t.type==="keydown"}function uk(t){return t.type.startsWith("pointer")}function fk(t){return t.type.startsWith("mouse")}function gL(t){if(uk(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(fk(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function mL(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}const yL=1,bL=2,_L=4,vL=8;mL();let xL=new Map;function hb(t,e){xL.set(t,e)}function wL(){const[t,e]=I.useState(0);return I.useCallback(()=>e(n=>n+1),[])}function Bt(t,e){if(!t)throw console.error(e),Error(e)}function Ha(t,e,n=kv){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function js(t,e,n=kv){return Ha(t,e,n)===0}function ii(t,e,n){return Ha(t,e,n)===0}function SL(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!ii(i,s,n))return!1}return!0}function ec({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Bt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:a=100,minSize:c=0}=r;if(Ha(n,c)<0)if(s){const u=(i+c)/2;Ha(n,u)<0?n=i:n=c}else n=c;return n=Math.min(a,n),n=parseFloat(n.toFixed(kv)),n}function af({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(ii(t,0))return e;const a=[...e],[c,u]=r;Bt(c!=null,"Invalid first pivot index"),Bt(u!=null,"Invalid second pivot index");let h=0;if(s==="keyboard"){{const g=t<0?u:c,b=n[g];Bt(b,`Panel constraints not found for index ${g}`);const{collapsedSize:S=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Bt(C!=null,`Previous layout not found for panel index ${g}`),ii(C,S)){const k=A-C;Ha(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}{const g=t<0?c:u,b=n[g];Bt(b,`No panel constraints found for index ${g}`);const{collapsedSize:S=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Bt(C!=null,`Previous layout not found for panel index ${g}`),ii(C,A)){const k=C-S;Ha(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}}{const g=t<0?1:-1;let b=t<0?u:c,S=0;for(;;){const A=e[b];Bt(A!=null,`Previous layout not found for panel index ${b}`);const k=ec({panelConstraints:n,panelIndex:b,size:100})-A;if(S+=k,b+=g,b<0||b>=n.length)break}const R=Math.min(Math.abs(t),Math.abs(S));t=t<0?0-R:R}{let b=t<0?c:u;for(;b>=0&&b<n.length;){const S=Math.abs(t)-Math.abs(h),R=e[b];Bt(R!=null,`Previous layout not found for panel index ${b}`);const A=R-S,C=ec({panelConstraints:n,panelIndex:b,size:A});if(!ii(R,C)&&(h+=R-C,a[b]=C,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(SL(i,a))return i;{const g=t<0?u:c,b=e[g];Bt(b!=null,`Previous layout not found for panel index ${g}`);const S=b+h,R=ec({panelConstraints:n,panelIndex:g,size:S});if(a[g]=R,!ii(R,S)){let A=S-R,k=t<0?u:c;for(;k>=0&&k<n.length;){const P=a[k];Bt(P!=null,`Previous layout not found for panel index ${k}`);const M=P+A,z=ec({panelConstraints:n,panelIndex:k,size:M});if(ii(P,z)||(A-=z-P,a[k]=z),ii(A,0))break;t>0?k--:k++}}}const d=a.reduce((g,b)=>b+g,0);return ii(d,100)?a:i}function TL({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,a=0;const c=n[0];Bt(c!=null,"No pivot index found"),e.forEach((g,b)=>{const{constraints:S}=g,{maxSize:R=100,minSize:A=0}=S;b===c?(r=A,i=R):(s+=A,a+=R)});const u=Math.min(i,100-s),h=Math.max(r,100-a),d=t[c];return{valueMax:u,valueMin:h,valueNow:d}}function yp(t,e=document){return Array.from(e.querySelectorAll(`[${li.resizeHandleId}][data-panel-group-id="${t}"]`))}function EL(t,e,n=document){const i=yp(t,n).findIndex(s=>s.getAttribute(li.resizeHandleId)===e);return i??null}function hk(t,e,n){const r=EL(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function AL(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function dk(t,e=document){if(AL(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Mv(t,e=document){const n=e.querySelector(`[${li.resizeHandleId}="${t}"]`);return n||null}function RL(t,e,n,r=document){var i,s,a,c;const u=Mv(e,r),h=yp(t,r),d=u?h.indexOf(u):-1,g=(i=(s=n[d])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,b=(a=(c=n[d+1])===null||c===void 0?void 0:c.id)!==null&&a!==void 0?a:null;return[g,b]}function CL({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:a}){I.useRef({didWarnAboutMissingResizeHandle:!1}),cc(()=>{if(!s)return;const c=yp(n,s);for(let u=0;u<i.length-1;u++){const{valueMax:h,valueMin:d,valueNow:g}=TL({layout:r,panelsArray:i,pivotIndices:[u,u+1]}),b=c[u];if(b!=null){const S=i[u];Bt(S,`No panel data found for index "${u}"`),b.setAttribute("aria-controls",S.id),b.setAttribute("aria-valuemax",""+Math.round(h)),b.setAttribute("aria-valuemin",""+Math.round(d)),b.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{c.forEach((u,h)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,i,s]),I.useEffect(()=>{if(!s)return;const c=e.current;Bt(c,"Eager values not found");const{panelDataArray:u}=c,h=dk(n,s);Bt(h!=null,`No group found for id "${n}"`);const d=yp(n,s);Bt(d,`No resize handles found for group id "${n}"`);const g=d.map(b=>{const S=b.getAttribute(li.resizeHandleId);Bt(S,"Resize handle element has no handle id attribute");const[R,A]=RL(n,S,u,s);if(R==null||A==null)return()=>{};const C=k=>{if(!k.defaultPrevented)switch(k.key){case"Enter":{k.preventDefault();const P=u.findIndex(M=>M.id===R);if(P>=0){const M=u[P];Bt(M,`No panel data found for index ${P}`);const z=r[P],{collapsedSize:$=0,collapsible:F,minSize:Z=0}=M.constraints;if(z!=null&&F){const Q=af({delta:ii(z,$)?Z-$:$-z,initialLayout:r,panelConstraints:u.map(ue=>ue.constraints),pivotIndices:hk(n,S,s),prevLayout:r,trigger:"keyboard"});r!==Q&&a(Q)}}break}}};return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}});return()=>{g.forEach(b=>b())}},[s,t,e,n,r,i,a])}function sT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function pk(t,e){const n=t==="horizontal",{x:r,y:i}=gL(e);return n?r:i}function kL(t,e,n,r,i){const s=n==="horizontal",a=Mv(e,i);Bt(a,`No resize handle element found for id "${e}"`);const c=a.getAttribute(li.groupId);Bt(c,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const h=pk(n,t),d=dk(c,i);Bt(d,`No group element found for id "${c}"`);const g=d.getBoundingClientRect(),b=s?g.width:g.height;return(h-u)/b*100}function ML(t,e,n,r,i,s){if(ck(t)){const a=n==="horizontal";let c=0;t.shiftKey?c=100:i!=null?c=i:c=10;let u=0;switch(t.key){case"ArrowDown":u=a?0:c;break;case"ArrowLeft":u=a?-c:0;break;case"ArrowRight":u=a?c:0;break;case"ArrowUp":u=a?0:-c;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:kL(t,e,n,r,s)}function NL({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const a=n[s];Bt(a,`Panel constraints not found for index ${s}`);const{defaultSize:c}=a;c!=null&&(r++,e[s]=c,i-=c)}for(let s=0;s<t.length;s++){const a=n[s];Bt(a,`Panel constraints not found for index ${s}`);const{defaultSize:c}=a;if(c!=null)continue;const u=t.length-r,h=i/u;r++,e[s]=h,i-=h}return e}function Ul(t,e,n){e.forEach((r,i)=>{const s=t[i];Bt(s,`Panel data not found for index ${i}`);const{callbacks:a,constraints:c,id:u}=s,{collapsedSize:h=0,collapsible:d}=c,g=n[u];if(g==null||r!==g){n[u]=r;const{onCollapse:b,onExpand:S,onResize:R}=a;R&&R(r,g),d&&(b||S)&&(S&&(g==null||js(g,h))&&!js(r,h)&&S(),b&&(g==null||!js(g,h))&&js(r,h)&&b())}})}function Ed(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function IL({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const a=n[i];let c;return a==null?c=t!=null?t.toPrecision(s):"1":r.length===1?c="1":c=a.toPrecision(s),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function OL(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function oT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function gk(t){return`react-resizable-panels:${t}`}function mk(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function yk(t,e){try{const n=gk(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function PL(t,e,n){var r,i;const s=(r=yk(t,n))!==null&&r!==void 0?r:{},a=mk(e);return(i=s[a])!==null&&i!==void 0?i:null}function DL(t,e,n,r,i){var s;const a=gk(t),c=mk(e),u=(s=yk(t,i))!==null&&s!==void 0?s:{};u[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(a,JSON.stringify(u))}catch(h){console.error(h)}}function aT({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,a)=>s+a,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!ii(r,100)&&n.length>0)for(let s=0;s<e.length;s++){const a=n[s];Bt(a!=null,`No layout data found for index ${s}`);const c=100/r*a;n[s]=c}let i=0;for(let s=0;s<e.length;s++){const a=n[s];Bt(a!=null,`No layout data found for index ${s}`);const c=ec({panelConstraints:e,panelIndex:s,size:a});a!=c&&(i+=a-c,n[s]=c)}if(!ii(i,0))for(let s=0;s<e.length;s++){const a=n[s];Bt(a!=null,`No layout data found for index ${s}`);const c=a+i,u=ec({panelConstraints:e,panelIndex:s,size:c});if(a!==u&&(i-=u-a,n[s]=u,ii(i,0)))break}return n}const FL=100,lf={getItem:t=>(oT(lf),lf.getItem(t)),setItem:(t,e)=>{oT(lf),lf.setItem(t,e)}},lT={};function bk({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:a=null,keyboardResizeBy:c=null,storage:u=lf,style:h,tagName:d="div",...g}){const b=ak(s),S=I.useRef(null),[R,A]=I.useState(null),[C,k]=I.useState([]),P=wL(),M=I.useRef({}),z=I.useRef(new Map),$=I.useRef(0),F=I.useRef({autoSaveId:t,direction:r,dragState:R,id:b,keyboardResizeBy:c,onLayout:a,storage:u}),Z=I.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1});I.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),I.useImperativeHandle(i,()=>({getId:()=>F.current.id,getLayout:()=>{const{layout:B}=Z.current;return B},setLayout:B=>{const{onLayout:Ce}=F.current,{layout:ge,panelDataArray:Oe}=Z.current,ke=aT({layout:B,panelConstraints:Oe.map(je=>je.constraints)});sT(ge,ke)||(k(ke),Z.current.layout=ke,Ce&&Ce(ke),Ul(Oe,ke,M.current))}}),[]),cc(()=>{F.current.autoSaveId=t,F.current.direction=r,F.current.dragState=R,F.current.id=b,F.current.onLayout=a,F.current.storage=u}),CL({committedValuesRef:F,eagerValuesRef:Z,groupId:b,layout:C,panelDataArray:Z.current.panelDataArray,setLayout:k,panelGroupElement:S.current}),I.useEffect(()=>{const{panelDataArray:B}=Z.current;if(t){if(C.length===0||C.length!==B.length)return;let Ce=lT[t];Ce==null&&(Ce=OL(DL,FL),lT[t]=Ce);const ge=[...B],Oe=new Map(z.current);Ce(t,ge,Oe,C,u)}},[t,C,u]),I.useEffect(()=>{});const Q=I.useCallback(B=>{const{onLayout:Ce}=F.current,{layout:ge,panelDataArray:Oe}=Z.current;if(B.constraints.collapsible){const ke=Oe.map(it=>it.constraints),{collapsedSize:je=0,panelSize:tt,pivotIndices:Ze}=ya(Oe,B,ge);if(Bt(tt!=null,`Panel size not found for panel "${B.id}"`),!js(tt,je)){z.current.set(B.id,tt);const ct=Ql(Oe,B)===Oe.length-1?tt-je:je-tt,bt=af({delta:ct,initialLayout:ge,panelConstraints:ke,pivotIndices:Ze,prevLayout:ge,trigger:"imperative-api"});Ed(ge,bt)||(k(bt),Z.current.layout=bt,Ce&&Ce(bt),Ul(Oe,bt,M.current))}}},[]),ue=I.useCallback((B,Ce)=>{const{onLayout:ge}=F.current,{layout:Oe,panelDataArray:ke}=Z.current;if(B.constraints.collapsible){const je=ke.map(qt=>qt.constraints),{collapsedSize:tt=0,panelSize:Ze=0,minSize:it=0,pivotIndices:ct}=ya(ke,B,Oe),bt=Ce??it;if(js(Ze,tt)){const qt=z.current.get(B.id),In=qt!=null&&qt>=bt?qt:bt,bn=Ql(ke,B)===ke.length-1?Ze-In:In-Ze,Sn=af({delta:bn,initialLayout:Oe,panelConstraints:je,pivotIndices:ct,prevLayout:Oe,trigger:"imperative-api"});Ed(Oe,Sn)||(k(Sn),Z.current.layout=Sn,ge&&ge(Sn),Ul(ke,Sn,M.current))}}},[]),Y=I.useCallback(B=>{const{layout:Ce,panelDataArray:ge}=Z.current,{panelSize:Oe}=ya(ge,B,Ce);return Bt(Oe!=null,`Panel size not found for panel "${B.id}"`),Oe},[]),K=I.useCallback((B,Ce)=>{const{panelDataArray:ge}=Z.current,Oe=Ql(ge,B);return IL({defaultSize:Ce,dragState:R,layout:C,panelData:ge,panelIndex:Oe})},[R,C]),ie=I.useCallback(B=>{const{layout:Ce,panelDataArray:ge}=Z.current,{collapsedSize:Oe=0,collapsible:ke,panelSize:je}=ya(ge,B,Ce);return Bt(je!=null,`Panel size not found for panel "${B.id}"`),ke===!0&&js(je,Oe)},[]),_e=I.useCallback(B=>{const{layout:Ce,panelDataArray:ge}=Z.current,{collapsedSize:Oe=0,collapsible:ke,panelSize:je}=ya(ge,B,Ce);return Bt(je!=null,`Panel size not found for panel "${B.id}"`),!ke||Ha(je,Oe)>0},[]),re=I.useCallback(B=>{const{panelDataArray:Ce}=Z.current;Ce.push(B),Ce.sort((ge,Oe)=>{const ke=ge.order,je=Oe.order;return ke==null&&je==null?0:ke==null?-1:je==null?1:ke-je}),Z.current.panelDataArrayChanged=!0,P()},[P]);cc(()=>{if(Z.current.panelDataArrayChanged){Z.current.panelDataArrayChanged=!1;const{autoSaveId:B,onLayout:Ce,storage:ge}=F.current,{layout:Oe,panelDataArray:ke}=Z.current;let je=null;if(B){const Ze=PL(B,ke,ge);Ze&&(z.current=new Map(Object.entries(Ze.expandToSizes)),je=Ze.layout)}je==null&&(je=NL({panelDataArray:ke}));const tt=aT({layout:je,panelConstraints:ke.map(Ze=>Ze.constraints)});sT(Oe,tt)||(k(tt),Z.current.layout=tt,Ce&&Ce(tt),Ul(ke,tt,M.current))}}),cc(()=>{const B=Z.current;return()=>{B.layout=[]}},[]);const Te=I.useCallback(B=>{let Ce=!1;const ge=S.current;return ge&&window.getComputedStyle(ge,null).getPropertyValue("direction")==="rtl"&&(Ce=!0),function(ke){ke.preventDefault();const je=S.current;if(!je)return()=>null;const{direction:tt,dragState:Ze,id:it,keyboardResizeBy:ct,onLayout:bt}=F.current,{layout:qt,panelDataArray:In}=Z.current,{initialLayout:ar}=Ze??{},bn=hk(it,B,je);let Sn=ML(ke,B,tt,Ze,ct,je);const ln=tt==="horizontal";ln&&Ce&&(Sn=-Sn);const ys=In.map(Xi=>Xi.constraints),lr=af({delta:Sn,initialLayout:ar??qt,panelConstraints:ys,pivotIndices:bn,prevLayout:qt,trigger:ck(ke)?"keyboard":"mouse-or-touch"}),gr=!Ed(qt,lr);(uk(ke)||fk(ke))&&$.current!=Sn&&($.current=Sn,!gr&&Sn!==0?ln?hb(B,Sn<0?yL:bL):hb(B,Sn<0?_L:vL):hb(B,0)),gr&&(k(lr),Z.current.layout=lr,bt&&bt(lr),Ul(In,lr,M.current))}},[]),ne=I.useCallback((B,Ce)=>{const{onLayout:ge}=F.current,{layout:Oe,panelDataArray:ke}=Z.current,je=ke.map(qt=>qt.constraints),{panelSize:tt,pivotIndices:Ze}=ya(ke,B,Oe);Bt(tt!=null,`Panel size not found for panel "${B.id}"`);const ct=Ql(ke,B)===ke.length-1?tt-Ce:Ce-tt,bt=af({delta:ct,initialLayout:Oe,panelConstraints:je,pivotIndices:Ze,prevLayout:Oe,trigger:"imperative-api"});Ed(Oe,bt)||(k(bt),Z.current.layout=bt,ge&&ge(bt),Ul(ke,bt,M.current))},[]),Se=I.useCallback((B,Ce)=>{const{layout:ge,panelDataArray:Oe}=Z.current,{collapsedSize:ke=0,collapsible:je}=Ce,{collapsedSize:tt=0,collapsible:Ze,maxSize:it=100,minSize:ct=0}=B.constraints,{panelSize:bt}=ya(Oe,B,ge);bt!=null&&(je&&Ze&&js(bt,ke)?js(ke,tt)||ne(B,tt):bt<ct?ne(B,ct):bt>it&&ne(B,it))},[ne]),pe=I.useCallback((B,Ce)=>{const{direction:ge}=F.current,{layout:Oe}=Z.current;if(!S.current)return;const ke=Mv(B,S.current);Bt(ke,`Drag handle element not found for id "${B}"`);const je=pk(ge,Ce);A({dragHandleId:B,dragHandleRect:ke.getBoundingClientRect(),initialCursorPosition:je,initialLayout:Oe})},[]),Xe=I.useCallback(()=>{A(null)},[]),O=I.useCallback(B=>{const{panelDataArray:Ce}=Z.current,ge=Ql(Ce,B);ge>=0&&(Ce.splice(ge,1),delete M.current[B.id],Z.current.panelDataArrayChanged=!0,P())},[P]),Ee=I.useMemo(()=>({collapsePanel:Q,direction:r,dragState:R,expandPanel:ue,getPanelSize:Y,getPanelStyle:K,groupId:b,isPanelCollapsed:ie,isPanelExpanded:_e,reevaluatePanelConstraints:Se,registerPanel:re,registerResizeHandle:Te,resizePanel:ne,startDragging:pe,stopDragging:Xe,unregisterPanel:O,panelGroupElement:S.current}),[Q,R,r,ue,Y,K,b,ie,_e,Se,re,Te,ne,pe,Xe,O]),Ae={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return I.createElement(Cv.Provider,{value:Ee},I.createElement(d,{...g,children:e,className:n,id:s,ref:S,style:{...Ae,...h},[li.group]:"",[li.groupDirection]:r,[li.groupId]:b}))}const BL=I.forwardRef((t,e)=>I.createElement(bk,{...t,forwardedRef:e}));bk.displayName="PanelGroup";BL.displayName="forwardRef(PanelGroup)";function Ql(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ya(t,e,n){const r=Ql(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],a=n[r];return{...e.constraints,panelSize:a,pivotIndices:s}}const jL=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},cT=t=>{const e={name:"",path:"",type:"directory",children:[]},n=new Set,r=new Map;t.forEach(s=>{s.files.forEach(a=>{n.add(a),r.has(a)||r.set(a,[]),r.get(a).push(s.name)})}),n.forEach(s=>{const a=s.split("/");let c=e;a.forEach((u,h)=>{const d=h===a.length-1,g=a.slice(0,h+1).join("/");c.children||(c.children=[]);let b=c.children.find(S=>S.name===u);b||(b={name:u,path:g,type:d?"file":"directory",children:d?void 0:[],bundles:d?r.get(s):void 0},c.children.push(b)),d||(c=b)})});const i=s=>{s.children&&(s.children.sort((a,c)=>a.type!==c.type?a.type==="directory"?-1:1:a.name.localeCompare(c.name)),s.children.forEach(i))};return i(e),e},UL=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]};function _k({node:t,level:e,expandedDirs:n,onToggleDir:r}){const i=n.has(t.path),s=e*16;if(t.type==="directory")return v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded cursor-pointer",style:{paddingLeft:`${s+8}px`},onClick:()=>r(t.path),children:[i?v.jsx(ov,{className:"w-4 h-4 text-muted-foreground"}):v.jsx(fR,{className:"w-4 h-4 text-muted-foreground"}),i?v.jsx(m6,{className:"w-4 h-4 text-[color:var(--color-info)]"}):v.jsx(b6,{className:"w-4 h-4 text-[color:var(--color-info)]"}),v.jsx("span",{className:"text-xs font-thin",children:t.name}),t.children&&v.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[t.children.length," items"]})]}),i&&t.children&&v.jsx("div",{children:t.children.map(c=>v.jsx(_k,{node:c,level:e+1,expandedDirs:n,onToggleDir:r},c.path))})]});const a=c=>{var d;const u=(d=c.split(".").pop())==null?void 0:d.toLowerCase(),h="w-4 h-4";switch(u){case"js":case"ts":case"jsx":case"tsx":return v.jsx(Pl,{className:`${h} text-[color:var(--color-warning)]`});case"json":return v.jsx(Pl,{className:`${h} text-[color:var(--color-success)]`});case"md":return v.jsx(Pl,{className:`${h} text-[color:var(--color-info)]/80`});case"css":case"scss":return v.jsx(Pl,{className:`${h} text-[color:var(--color-type-styles)]`});case"html":return v.jsx(Pl,{className:`${h} text-[color:var(--color-type-configuration)]`});default:return v.jsx(Pl,{className:`${h} text-muted-foreground`})}};return v.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded",style:{paddingLeft:`${s+24}px`},children:[a(t.name),v.jsx("span",{className:"text-xs font-mono",children:t.name}),t.bundles&&t.bundles.length>0&&v.jsx("div",{className:"flex gap-1 ml-2",children:t.bundles.map(c=>v.jsx(Nn,{variant:"outline",className:"text-xs px-1 py-0 h-4",children:c},c))}),t.size&&v.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:UL(t.size)})]})}function LL(){const[t,e]=I.useState(new Set([""])),{data:n,isLoading:r}=$i({queryKey:["bundles"],queryFn:jL,refetchInterval:5e3}),i=h=>{const d=new Set(t);d.has(h)?d.delete(h):d.add(h),e(d)},s=()=>{if(!n)return;const h=cT(n),d=new Set,g=b=>{var S;b.type==="directory"&&(d.add(b.path),(S=b.children)==null||S.forEach(g))};g(h),e(d)},a=()=>{e(new Set([""]))};if(r)return v.jsx("div",{children:"Loading file tree..."});if(!n)return v.jsx("div",{children:"No bundles found"});const c=cT(n),u=n.reduce((h,d)=>h+d.files.length,0);return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex gap-1",children:[v.jsx(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:s,children:"Expand All"}),v.jsx(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:a,children:"Collapse All"})]}),v.jsxs("div",{className:"text-xs text-muted-foreground font-thin",children:[u," files tracked"]})]}),v.jsx(on,{className:"p-4",children:v.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:c.children&&c.children.length>0?c.children.map(h=>v.jsx(_k,{node:h,level:0,expandedDirs:t,onToggleDir:i},h.path)):v.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No files found"})})}),v.jsxs(on,{className:"p-4",children:[v.jsx("h3",{className:"text-xs font-thin mb-2",children:"Bundle Legend"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(h=>v.jsxs(Nn,{variant:"outline",children:[h.name," (",h.files.length,")"]},h.name))})]})]})}const zL=()=>v.jsxs(on,{children:[v.jsxs(er,{children:[v.jsxs(or,{className:"flex items-center gap-2",children:[v.jsx(mR,{className:"w-4 h-4"}),"Project Files"]}),v.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse and explore all files in your project with bundle information."})]}),v.jsx(_n,{children:v.jsx(LL,{})})]});function vk({className:t,type:e,...n}){return v.jsx("input",{type:e,"data-slot":"input",className:Kt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-thin disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}const VL=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},$L=async()=>{const t=await fetch("http://localhost:3333/api/files");if(!t.ok)throw new Error("Failed to fetch files");return(await t.json()).map(n=>n.path)};function HL(){const t=Lc(),[e,n]=I.useState(null),[r,i]=I.useState(new Set),[s,a]=I.useState(new Set),[c,u]=I.useState(null),[h,d]=I.useState(new Map),[g,b]=I.useState(!1);EB();const{data:S=[],isLoading:R,isFetching:A,dataUpdatedAt:C}=$i({queryKey:["bundles"],queryFn:VL,refetchInterval:5e3,refetchOnWindowFocus:!0}),{data:k=[],isFetching:P,dataUpdatedAt:M}=$i({queryKey:["allFiles"],queryFn:$L,refetchInterval:3e4,refetchOnWindowFocus:!0});I.useEffect(()=>{const F=Math.max(C,M);F>0&&u(new Date(F))},[C,M]),I.useEffect(()=>{const F=new WebSocket("ws://localhost:3333");return F.onopen=()=>{console.log("Bundle updates WebSocket connected")},F.onmessage=Z=>{try{const Q=JSON.parse(Z.data);switch(console.log("WebSocket message received:",Q),Q.type){case"bundle-sync-started":d(ue=>new Map(ue).set(Q.bundleName,{changed:!0,lastSync:new Date(Q.timestamp)})),hn.info(`Syncing ${Q.bundleName}`);break;case"bundle-sync-completed":d(ue=>new Map(ue).set(Q.bundleName,{changed:!1,lastSync:new Date(Q.timestamp)})),hn.success(`Synced ${Q.bundleName}`),t.invalidateQueries({queryKey:["bundles"]});break;case"bundle-sync-failed":d(ue=>new Map(ue).set(Q.bundleName,{changed:!0,lastSync:new Date(Q.timestamp)})),hn.error(`Sync failed for ${Q.bundleName}`,Q.error);break;case"bundle-file-changed":d(ue=>new Map(ue).set(Q.bundleName,{changed:!0,lastSync:new Date(Q.timestamp)}));break}}catch(Q){console.error("Error parsing bundle update:",Q)}},F.onclose=()=>{console.log("Bundle updates WebSocket disconnected")},F.onerror=Z=>{console.error("Bundle updates WebSocket error:",Z)},()=>{F.close()}},[t]);const z=I.useCallback(F=>{n(e===F?null:F)},[e]),$=I.useMemo(()=>S.map(F=>{const Z=h.get(F.name);return{...F,changed:(Z==null?void 0:Z.changed)??F.changed,lastSync:Z==null?void 0:Z.lastSync}}),[S,h]);return R?v.jsx("div",{children:"Loading bundles..."}):S?v.jsxs("div",{className:"h-full flex flex-col relative",children:[v.jsxs(Qa,{defaultValue:"bundles",className:"w-full flex-1 flex flex-col min-h-0",children:[v.jsxs(Za,{className:"grid w-full grid-cols-3 bg-background",children:[v.jsxs(Dn,{value:"bundles",className:"flex items-center gap-2",children:[v.jsx(R_,{className:"w-4 h-4 text-muted-foreground/75"}),"Bundles"]}),v.jsxs(Dn,{value:"files",className:"flex items-center gap-2",children:[v.jsx(mR,{className:"w-4 h-4 text-muted-foreground/75"}),"Project Files"]}),v.jsxs(Dn,{value:"analysis",className:"flex items-center gap-2",children:[v.jsx(C2,{className:"w-4 h-4 text-muted-foreground/75"}),"File Analysis"]})]}),v.jsx(Hn,{value:"bundles",className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:$&&Array.isArray($)?$.map(F=>v.jsx(AB,{bundle:F,isSelected:e===F.name,onSelect:z,lastRefresh:c||void 0},F.name)):v.jsx("div",{children:"No bundles available"})})}),v.jsx(Hn,{value:"files",className:"space-y-4",children:v.jsx(zL,{})}),v.jsx(Hn,{value:"analysis",className:"space-y-4",children:v.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[v.jsx(C2,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),v.jsx("p",{className:"text-sm font-thin uppercase tracking-widest",children:"Semantic Analysis Active"}),v.jsx("p",{className:"text-xs mt-2 opacity-50",children:"Viewing automated context mapping..."})]})})]}),e&&(()=>{var Z;const F=S.find(Q=>Q.name===e);return F?v.jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-10 z-50 bg-background flex flex-col",children:[v.jsxs("div",{className:"sticky top-0 bg-background border-b p-4 flex justify-between items-center flex-shrink-0",children:[v.jsxs("h3",{className:"font-thin text-sm flex items-center gap-2",children:[v.jsx(R_,{className:"w-4 h-4 text-muted-foreground"}),e," Details"]}),v.jsx(Ht,{variant:"ghost",size:"sm",onClick:()=>n(null),children:v.jsx(fv,{className:"w-4 h-4"})})]}),v.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-6",children:v.jsxs("div",{className:"space-y-4",children:[v.jsx("h4",{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted",children:"Included Files"}),v.jsx("ul",{className:"list-none pl-0 space-y-1",children:(Z=F.files)==null?void 0:Z.map(Q=>v.jsx("li",{className:"text-xs font-thin mono py-1 border-b border-vesper/50",children:Q},Q))})]})})]}):null})()]}):v.jsx("div",{children:"No bundles found"})}function bp({className:t,...e}){return v.jsx("textarea",{"data-slot":"textarea",className:Kt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const WL=mg("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function _p({className:t,variant:e,...n}){return v.jsx("div",{"data-slot":"alert",role:"alert",className:Kt(WL({variant:e}),t),...n})}function vp({className:t,...e}){return v.jsx("div",{"data-slot":"alert-description",className:Kt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const qL=async()=>{const t=await fetch("http://localhost:3333/api/cursor-rules");if(!t.ok)throw new Error("Failed to fetch cursor rules");return t.text()},XL=async t=>{if(!(await fetch("http://localhost:3333/api/cursor-rules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save cursor rules")},YL=async()=>{const t=await fetch("http://localhost:3333/api/claude-md");if(!t.ok)throw new Error("Failed to fetch CLAUDE.md");return t.text()},KL=async t=>{if(!(await fetch("http://localhost:3333/api/claude-md",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save CLAUDE.md")};function QL(){const t=Lc(),[e,n]=I.useState(""),[r,i]=I.useState(""),[s,a]=I.useState("cursor"),{data:c,isLoading:u}=$i({queryKey:["cursor-rules"],queryFn:qL}),h=cp({mutationFn:XL,onSuccess:()=>{t.invalidateQueries({queryKey:["cursor-rules"]}),hn.success(".cursorrules saved successfully!")},onError:k=>{hn.error(`Failed to save .cursorrules: ${k.message}`)}}),{data:d,isLoading:g}=$i({queryKey:["claude-md"],queryFn:YL}),b=cp({mutationFn:KL,onSuccess:()=>{t.invalidateQueries({queryKey:["claude-md"]}),hn.success("CLAUDE.md saved successfully!")},onError:k=>{hn.error(`Failed to save CLAUDE.md: ${k.message}`)}});I.useEffect(()=>{c&&!e&&n(c)},[c]),I.useEffect(()=>{d&&!r&&i(d)},[d]);const S=()=>{h.mutate(e)},R=()=>{b.mutate(r)},A=(k,P)=>{navigator.clipboard.writeText(k),hn.success(`${P} copied to clipboard!`)},C=(k,P)=>{const M=new Blob([k],{type:"text/plain"}),z=URL.createObjectURL(M),$=document.createElement("a");$.href=z,$.download=P,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(z),hn.success(`${P} downloaded!`)};return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(k_,{className:"w-4 h-4"}),"AI Rules & Context"]})}),v.jsxs(_n,{children:[v.jsxs(_p,{className:"mb-4",children:[v.jsx(Ac,{className:"w-4 h-4"}),v.jsxs(vp,{children:["Configure AI context files for better assistance. ",v.jsx("strong",{children:".cursorrules"})," works with Cursor, while ",v.jsx("strong",{children:"CLAUDE.md"})," provides project context for Claude."]})]}),v.jsxs(Qa,{value:s,onValueChange:k=>a(k),className:"space-y-4",children:[v.jsxs(Za,{className:"grid w-full grid-cols-2",children:[v.jsxs(Dn,{value:"cursor",className:"flex items-center gap-2",children:[v.jsx(cv,{className:"w-4 h-4"}),".cursorrules"]}),v.jsxs(Dn,{value:"claude",className:"flex items-center gap-2",children:[v.jsx(k_,{className:"w-4 h-4"}),"CLAUDE.md"]})]}),v.jsxs(Hn,{value:"cursor",className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-thin",children:"Cursor AI Assistant Rules"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure how Cursor's AI understands your project"})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(e,".cursorrules"),children:[v.jsx(up,{className:"w-3 h-3 mr-1"}),"Copy"]}),v.jsxs(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(e,".cursorrules"),children:[v.jsx(k2,{className:"w-3 h-3 mr-1"}),"Download"]}),v.jsxs(Ht,{onClick:S,disabled:h.isPending,size:"sm",className:"h-7 text-xs",children:[v.jsx(fp,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),u?v.jsxs("div",{className:"flex items-center justify-center p-8",children:[v.jsx($o,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):v.jsx(bp,{value:e,onChange:k=>n(k.target.value),placeholder:"Enter your Cursor AI rules here...",className:"min-h-[300px] font-mono text-sm"})]}),v.jsxs(Hn,{value:"claude",className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-thin",children:"Claude Project Context"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Markdown file explaining your project structure and guidelines"})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(r,"CLAUDE.md"),children:[v.jsx(up,{className:"w-3 h-3 mr-1"}),"Copy"]}),v.jsxs(Ht,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(r,"CLAUDE.md"),children:[v.jsx(k2,{className:"w-3 h-3 mr-1"}),"Download"]}),v.jsxs(Ht,{onClick:R,disabled:b.isPending,size:"sm",className:"h-7 text-xs",children:[v.jsx(fp,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),g?v.jsxs("div",{className:"flex items-center justify-center p-8",children:[v.jsx($o,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):v.jsx(bp,{value:r,onChange:k=>i(k.target.value),placeholder:"Enter your Claude project context here...",className:"min-h-[300px] font-mono text-sm"}),v.jsxs(_p,{children:[v.jsx(Ac,{className:"w-4 h-4"}),v.jsx(vp,{children:"This file helps Claude understand your project. Include project structure, coding conventions, key concepts, and any important context."})]})]})]})]})]})}const uT=[{path:"/api/status",method:"GET",description:"Server status and health"},{path:"/api/bundles",method:"GET",description:"List all bundles"},{path:"/api/config",method:"GET",description:"Get bundle configuration"},{path:"/api/files",method:"GET",description:"Get file tree"},{path:"/api/semantic-chunks",method:"GET",description:"Get semantic analysis"},{path:"/api/vector-db/status",method:"GET",description:"Vector database status"},{path:"/api/cursor-rules",method:"GET",description:"Cursor rules configuration"},{path:"/api/claude-md",method:"GET",description:"Claude.md file content"},{path:"/api/activities",method:"GET",description:"Available activities"},{path:"/api/mcp-status",method:"GET",description:"MCP server status"}],Ll=[{name:"list_bundles",description:"List all available file bundles",group:"Bundle Management"},{name:"get_bundle",description:"Get the content of a specific bundle",group:"Bundle Management"},{name:"generate_bundle",description:"Regenerate a specific bundle",group:"Bundle Management"},{name:"create_bundle",description:"Create a new bundle with specified patterns",group:"Bundle Management"},{name:"update_bundle",description:"Update an existing bundle's patterns",group:"Bundle Management"},{name:"delete_bundle",description:"Delete an existing bundle",group:"Bundle Management"},{name:"get_file_tree",description:"Get the project file tree",group:"Project Exploration"},{name:"get_project_status",description:"Get current project status and bundle information",group:"Project Exploration"},{name:"update_cntxignore",description:"Update the .cntxignore file with new ignore patterns",group:"Project Exploration"},{name:"get_semantic_chunks",description:"Get function-level semantic chunks from the codebase",group:"Semantic Analysis"},{name:"get_semantic_chunks_filtered",description:"Get semantic chunks filtered by purpose, type, complexity, or bundle",group:"Semantic Analysis"},{name:"analyze_bundle_suggestions",description:"Analyze codebase and suggest optimal bundle organization",group:"Semantic Analysis"},{name:"agent_discover",description:"Agent Discovery Mode: Get comprehensive codebase overview",group:"Agent Modes"},{name:"agent_query",description:"Agent Query Mode: Answer specific questions about the codebase",group:"Agent Modes"},{name:"agent_investigate",description:"Agent Investigation Mode: Investigate existing implementations for a feature",group:"Agent Modes"},{name:"agent_discuss",description:"Agent Passive Mode: Engage in discussion about codebase architecture",group:"Agent Modes"},{name:"agent_organize",description:"Agent Project Organizer Mode: Setup and maintenance of project organization",group:"Agent Modes"},{name:"read_file",description:"Read contents of a specific file with bundle context and metadata",group:"File Operations"},{name:"write_file",description:"Write content to a file with validation and safety checks",group:"File Operations"},{name:"manage_activities",description:"CRUD operations for project activities",group:"Activities Management"}],ZL=async()=>{const t=await fetch("http://localhost:3333/api/status");if(!t.ok)throw new Error("Failed to fetch server status");return t.json()},GL=async t=>{const e=Date.now();try{const n=await fetch(`http://localhost:3333${t.path}`),r=Date.now()-e;return n.ok?{...t,status:"success",responseTime:r}:{...t,status:"error",responseTime:r,error:`HTTP ${n.status}`}}catch(n){const r=Date.now()-e;return{...t,status:"error",responseTime:r,error:n instanceof Error?n.message:"Unknown error"}}},JL=async t=>{try{const e=await fetch("http://localhost:3333/api/mcp-status");return e.ok?(await e.json()).enabled?{...t,status:"available"}:{...t,status:"error",error:"MCP server not enabled"}:{...t,status:"error",error:"MCP status unavailable"}}catch(e){return{...t,status:"error",error:e instanceof Error?e.message:"Unknown error"}}};function e8(){var $,F,Z,Q,ue,Y;const[t,e]=I.useState([]),[n,r]=I.useState([]),[i,s]=I.useState(!1),[a,c]=I.useState("All"),{data:u,isLoading:h,error:d,refetch:g}=$i({queryKey:["server-status"],queryFn:ZL,refetchInterval:5e3}),b=async()=>{s(!0);try{const K=await Promise.all(uT.map(ie=>GL(ie)));e(K)}catch(K){console.error("Failed to run endpoint tests:",K)}finally{s(!1)}},S=async()=>{s(!0);try{const K=await Promise.all(Ll.map(ie=>JL(ie)));r(K)}catch(K){console.error("Failed to run MCP tests:",K)}finally{s(!1)}},R=K=>{if(K<60)return`${Math.floor(K)}s`;if(K<3600)return`${Math.floor(K/60)}m ${Math.floor(K%60)}s`;const ie=Math.floor(K/3600),_e=Math.floor(K%3600/60);return`${ie}h ${_e}m`},A=K=>{const ie=K/1024/1024;return`${Math.round(ie)}MB`},C=()=>["All",...new Set(Ll.map(ie=>ie.group))],k=()=>a==="All"?Ll:Ll.filter(K=>K.group===a),P=()=>k().reduce((_e,re)=>(_e[re.group]||(_e[re.group]=[]),_e[re.group].push(re),_e),{}),M=(K,ie)=>{var _e,re,Te,ne,Se;if(typeof K=="string")return K.length>100?K.substring(0,100)+"...":K;if(Array.isArray(K))return`Array with ${K.length} items`;if(typeof K=="object"&&K!==null){const pe=Object.keys(K);if(ie.includes("/api/status"))return`Uptime: ${Math.floor(K.uptime||0)}s, Memory: ${Math.round((((_e=K.memory)==null?void 0:_e.heapUsed)||0)/1024/1024)}MB, Files: ${K.totalFiles||0}`;if(ie.includes("/api/bundles"))return`${K.length||pe.length} bundles found`;if(ie.includes("/api/semantic-chunks"))return`${((re=K.chunks)==null?void 0:re.length)||0} chunks, ${((Te=K.summary)==null?void 0:Te.totalFunctions)||0} functions`;if(ie.includes("/api/vector-db/status"))return`${((ne=K.stats)==null?void 0:ne.totalChunks)||0} chunks indexed with ${((Se=K.stats)==null?void 0:Se.modelName)||"unknown model"}`;if(ie.includes("/api/activities"))return`${K.length||pe.length} activities found`;const Xe=pe.slice(0,3).map(O=>{const Ee=K[O];return typeof Ee=="object"?`${O}: ${Array.isArray(Ee)?`[${Ee.length}]`:"{object}"}`:`${O}: ${String(Ee).substring(0,20)}`}).join(", ");return pe.length>3?`${Xe}... (+${pe.length-3} more)`:Xe}return String(K).substring(0,100)},z=async K=>{const ie=Date.now();try{const _e=await fetch(`http://localhost:3333${K.path}`),re=Date.now()-ie;if(_e.ok){const Te=await _e.json(),ne=M(Te,K.path);hn.success(`${K.path} (${re}ms)`,ne)}else hn.error(`${K.path} failed`,`HTTP ${_e.status} (${re}ms)`)}catch(_e){const re=Date.now()-ie;hn.error(`${K.path} error`,`${_e instanceof Error?_e.message:"Unknown error"} (${re}ms)`)}};return h?v.jsx(on,{children:v.jsx(_n,{className:"pt-6",children:v.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[v.jsx($o,{className:"w-4 h-4 animate-spin"}),"Checking system status..."]})})}):d?v.jsx(on,{children:v.jsx(_n,{className:"p-4",children:v.jsxs("div",{className:"text-center space-y-2",children:[v.jsx(Ta,{className:"h-6 w-6 mx-auto text-red-500"}),v.jsx("p",{className:"text-sm font-medium",children:"Failed to connect to server"}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running on localhost:3333"}),v.jsxs(Ht,{variant:"outline",size:"sm",onClick:()=>g(),children:[v.jsx($o,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):v.jsxs("div",{className:"space-y-4",children:[v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2",children:[v.jsx(U6,{className:"w-5 h-5"}),"Server Status",v.jsx(Sa,{className:"w-4 h-4 text-green-600"})]})}),v.jsxs(_n,{children:[v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-muted-foreground",children:"Uptime"}),v.jsx("div",{className:"font-medium",children:R((u==null?void 0:u.uptime)||0)})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-muted-foreground",children:"Memory"}),v.jsx("div",{className:"font-medium",children:A((($=u==null?void 0:u.memory)==null?void 0:$.heapUsed)||0)})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-muted-foreground",children:"Total Files"}),v.jsx("div",{className:"font-medium",children:(u==null?void 0:u.totalFiles)||0})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-muted-foreground",children:"Bundles"}),v.jsx("div",{className:"font-medium",children:((F=u==null?void 0:u.bundles)==null?void 0:F.length)||0})]})]}),v.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[v.jsx(Nn,{variant:u!=null&&u.scanning?"destructive":"secondary",children:u!=null&&u.scanning?"Scanning":"Idle"}),v.jsxs(Nn,{variant:(Z=u==null?void 0:u.mcp)!=null&&Z.enabled?"default":"secondary",children:["MCP: ",(Q=u==null?void 0:u.mcp)!=null&&Q.enabled?"Enabled":"Disabled"]})]})]})]}),v.jsxs(Qa,{defaultValue:"endpoints",className:"w-full",children:[v.jsxs(Za,{className:"grid w-full grid-cols-3",children:[v.jsxs(Dn,{value:"endpoints",className:"flex items-center gap-2",children:[v.jsx(av,{className:"w-4 h-4"}),"API Endpoints"]}),v.jsxs(Dn,{value:"mcp",className:"flex items-center gap-2",children:[v.jsx(yg,{className:"w-4 h-4"}),"MCP Tools"]}),v.jsxs(Dn,{value:"bundle-sync",className:"flex items-center gap-2",children:[v.jsx(Ac,{className:"w-4 h-4"}),"Bundle Sync"]})]}),v.jsx(Hn,{value:"endpoints",className:"space-y-4",children:v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx(or,{className:"text-lg",children:"API Endpoints"}),v.jsxs(Ht,{onClick:b,disabled:i,size:"sm",variant:"outline",children:[v.jsx(N2,{className:"w-4 h-4 mr-2"}),i?"Testing...":"Test All"]})]})}),v.jsx(_n,{children:v.jsx("div",{className:"space-y-2",children:uT.map(K=>{const ie=t.find(_e=>_e.path===K.path);return v.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Nn,{variant:"outline",className:"text-xs",children:K.method}),v.jsx("code",{className:"text-sm",children:K.path})]}),v.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:K.description})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Ht,{variant:"ghost",size:"sm",onClick:()=>z(K),className:"h-7 w-7 p-0",title:`Test ${K.path}`,children:v.jsx(pR,{className:"w-3 h-3"})}),ie&&v.jsxs(v.Fragment,{children:[v.jsxs("span",{className:"text-xs text-muted-foreground",children:[ie.responseTime,"ms"]}),ie.status==="success"?v.jsx(Sa,{className:"w-4 h-4 text-green-600"}):ie.status==="error"?v.jsx("div",{title:ie.error,children:v.jsx(Ta,{className:"w-4 h-4 text-red-600"})}):v.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})]})]})]},K.path)})})})]})}),v.jsx(Hn,{value:"mcp",className:"space-y-4",children:v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx(or,{className:"text-lg",children:"MCP Tools"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(sk,{value:a,onValueChange:c,children:[v.jsx(Av,{className:"w-48",children:v.jsx(ok,{placeholder:"Filter by group"})}),v.jsx(Rv,{children:C().map(K=>v.jsxs(Jl,{value:K,children:[K," ",K==="All"?`(${Ll.length})`:`(${Ll.filter(ie=>ie.group===K).length})`]},K))})]}),v.jsxs(Ht,{onClick:S,disabled:i||!((ue=u==null?void 0:u.mcp)!=null&&ue.enabled),size:"sm",variant:"outline",children:[v.jsx(N2,{className:"w-4 h-4 mr-2"}),i?"Testing...":"Test All"]})]})]})}),v.jsxs(_n,{children:[!((Y=u==null?void 0:u.mcp)!=null&&Y.enabled)&&v.jsxs(_p,{className:"mb-4",children:[v.jsx(Ac,{className:"w-4 h-4"}),v.jsx(vp,{children:"MCP server is not enabled. MCP tools will not be available."})]}),v.jsx("div",{className:"space-y-4",children:a==="All"?Object.entries(P()).map(([K,ie])=>v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[v.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:K}),v.jsxs(Nn,{variant:"outline",className:"text-xs",children:[ie.length," tools"]})]}),v.jsx("div",{className:"space-y-2",children:ie.map(_e=>{const re=n.find(Te=>Te.name===_e.name);return v.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-sm",children:_e.name}),v.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_e.description})]}),v.jsx("div",{className:"flex items-center gap-2",children:re?re.status==="available"?v.jsx(Sa,{className:"w-4 h-4 text-green-600"}):v.jsx("div",{title:re.error,children:v.jsx(Ta,{className:"w-4 h-4 text-red-600"})}):v.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},_e.name)})})]},K)):v.jsx("div",{className:"space-y-2",children:k().map(K=>{const ie=n.find(_e=>_e.name===K.name);return v.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-sm",children:K.name}),v.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:K.description})]}),v.jsx("div",{className:"flex items-center gap-2",children:ie?ie.status==="available"?v.jsx(Sa,{className:"w-4 h-4 text-green-600"}):v.jsx("div",{title:ie.error,children:v.jsx(Ta,{className:"w-4 h-4 text-red-600"})}):v.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},K.name)})})})]})]})})]})]})}function t8(){const[t,e]=I.useState(""),[n,r]=I.useState(null),[i,s]=I.useState(!1),{data:a,isLoading:c}=$i({queryKey:["initial-chunks"],queryFn:async()=>(await(await fetch("http://localhost:3333/api/semantic-chunks")).json()).chunks}),u=async g=>{if(g.preventDefault(),!t.trim()){r(null);return}s(!0);try{const b=await fetch("http://localhost:3333/api/semantic-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,limit:15})});if(b.ok){const S=await b.json();r(S.results)}}catch{hn.error("Semantic search failed")}finally{s(!1)}},h=n||a||[],d=async(g,b)=>{try{await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:g,line:b})}),hn.success(`Opening ${g}`)}catch{hn.error("Failed to open editor")}};return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("header",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-lg font-thin tracking-tight flex items-center gap-2",children:[v.jsx(i6,{className:"w-4 h-4 text-vesper-accent"}),"Repository Intelligence"]}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Surgical code chunks indexed for agents"})]}),v.jsxs(Nn,{variant:"outline",className:"border-vesper font-thin text-[10px] uppercase tracking-widest",children:[(a==null?void 0:a.length)||0," Chunks Indexed"]})]}),v.jsxs("form",{onSubmit:u,className:"relative max-w-2xl",children:[v.jsx(B6,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),v.jsx(vk,{value:t,onChange:g=>e(g.target.value),placeholder:"Search code by meaning (e.g. 'handle file exports' or 'react components')",className:"pl-10 bg-vesper-card border-vesper text-sm h-10"}),i&&v.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:v.jsx(yg,{className:"w-3 h-3 animate-pulse text-vesper-accent"})})]})]}),c?v.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[v.jsx(VD,{className:"w-10 h-10 animate-pulse mb-4 text-vesper-accent"}),v.jsx("span",{className:"text-xs font-thin tracking-widest uppercase",children:"Analyzing Codebase Intelligence..."})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(g=>{var b;return v.jsxs(on,{className:"border-vesper bg-vesper-card hover:border-vesper-accent transition-all group",children:[v.jsx(er,{className:"pb-3",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[v.jsx(uv,{className:"w-4 h-4 text-muted-foreground mt-1"}),v.jsxs("div",{className:"min-w-0",children:[v.jsx(or,{className:"text-sm font-bold truncate color-vesper-fg",children:g.name}),v.jsx("div",{className:"text-[10px] mono color-vesper-muted truncate mt-0.5",children:g.filePath})]})]}),v.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(Ht,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>d(g.filePath,g.startLine),children:v.jsx(lv,{className:"w-3 h-3"})})})]})}),v.jsxs(_n,{className:"space-y-3",children:[v.jsxs("p",{className:"text-[11px] color-vesper-fg line-clamp-2 italic leading-relaxed",children:['"',g.purpose,'"']}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx(Nn,{variant:"outline",className:"text-[9px] font-thin uppercase border-vesper color-vesper-muted px-1.5 h-4",children:g.subtype||g.type}),v.jsxs(Nn,{variant:"outline",className:"text-[9px] font-thin uppercase border-vesper color-vesper-muted px-1.5 h-4",children:["Complexity: ",((b=g.complexity)==null?void 0:b.score)||0]}),g.similarity&&v.jsxs(Nn,{variant:"outline",className:"text-[9px] font-thin uppercase border-vesper-accent color-vesper-accent px-1.5 h-4",children:["Match: ",Math.round(g.similarity*100),"%"]})]})]})]},g.id)})})]})}function fT(){const{theme:t,setTheme:e}=XF();return v.jsxs(Ht,{variant:"ghost",size:"sm",onClick:()=>e(t==="light"?"dark":"light"),className:"h-8 w-8 p-0",children:[v.jsx(W6,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),v.jsx(R6,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),v.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function xp(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Nv=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),hT=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);hT&&parseFloat(hT[1]);const Ad=globalThis,zl=globalThis.process||{},n8=globalThis.navigator||{};function xk(t){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function Ga(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||xk()}function r8(t){return Ga()?xk()?"Electron":(n8.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const wk="4.1.0";function i8(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class s8{constructor(e,n,r="sessionStorage"){this.storage=i8(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function o8(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function a8(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var wp;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(wp||(wp={}));const l8=10;function dT(t){return typeof t!="string"?t:(t=t.toUpperCase(),wp[t]||wp.WHITE)}function c8(t,e,n){return!Ga&&typeof t=="string"&&(e&&(t=`\x1B[${dT(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${dT(n)+l8}m${t}\x1B[49m`)),t}function u8(t,e=["constructor"]){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const a=i[s];typeof a=="function"&&(e.find(c=>s===c)||(i[s]=a.bind(t)))}}function Iv(t,e){if(!t)throw new Error("Assertion failed")}function Vl(){var e,n,r;let t;if(Ga()&&Ad.performance)t=(n=(e=Ad==null?void 0:Ad.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in zl){const i=(r=zl==null?void 0:zl.hrtime)==null?void 0:r.call(zl);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const $l={debug:Ga()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},f8={enabled:!0,level:0};function Hl(){}const pT={},gT={once:!0};class Kf{constructor({id:e}={id:""}){this.VERSION=wk,this._startTs=Vl(),this._deltaTs=Vl(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new s8(`__probe-${this.id}__`,f8),this.timeStamp(`${this.id} started`),u8(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Vl()-this._startTs).toPrecision(10))}getDelta(){return Number((Vl()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,$l.warn,arguments,gT)}error(e){return this._getLogFunction(0,e,$l.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,$l.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,$l.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,$l.debug||$l.info,arguments,gT)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Hl,r&&[r],{tag:d8(n)}):Hl}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Hl)}group(e,n,r={collapsed:!1}){const i=mT({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Hl)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Sk(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=mT({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Iv(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Vl();const a=s.tag||s.message;if(s.once&&a)if(!pT[a])pT[a]=Vl();else return Hl;return n=h8(this.id,s.message,s),r.bind(console,n,...s.args)}return Hl}}Kf.VERSION=wk;function Sk(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Iv(Number.isFinite(e)&&e>=0),e}function mT(t){const{logLevel:e,message:n}=t;t.logLevel=Sk(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Iv(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function h8(t,e,n){if(typeof e=="string"){const r=n.time?a8(o8(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=c8(e,n.color,n.background)}return e}function d8(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const db="4.3.3",p8=db[0]>="0"&&db[0]<="9"?`v${db}`:"";function g8(){const t=new Kf({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=p8,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const m8=g8();function y8(t,e){return Tk(t||{},e)}function Tk(t,e,n=0){if(n>3)return e;const r={...t};for(const[i,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?r[i]=Tk(r[i]||{},e[i],n+1):r[i]=e[i];return r}const b8="latest";function _8(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const v8=_8();function Yo(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Pa=typeof process!="object"||String(process)!=="[object process]"||process.browser,x8=typeof window<"u"&&typeof window.orientation<"u",yT=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);yT&&parseFloat(yT[1]);class w8{constructor(e,n){U(this,"name");U(this,"workerThread");U(this,"isRunning",!0);U(this,"result");U(this,"_resolve",()=>{});U(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Yo(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Yo(this.isRunning),this.isRunning=!1,this._reject(e)}}class pb{terminate(){}}const gb=new Map;function S8(t){Yo(t.source&&!t.url||!t.source&&t.url);let e=gb.get(t.source||t.url);return e||(t.url&&(e=T8(t.url),gb.set(t.url,e)),t.source&&(e=Ek(t.source),gb.set(t.source,e))),Yo(e),e}function T8(t){if(!t.startsWith("http"))return t;const e=E8(t);return Ek(e)}function Ek(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function E8(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function Ak(t,e=!0,n){const r=n||new Set;if(t){if(bT(t))r.add(t);else if(bT(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)Ak(t[i],e,r)}}return n===void 0?Array.from(r):[]}function bT(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const mb=()=>{};class $_{constructor(e){U(this,"name");U(this,"source");U(this,"url");U(this,"terminated",!1);U(this,"worker");U(this,"onMessage");U(this,"onError");U(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Yo(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=mb,this.onError=s=>console.log(s),this.worker=Pa?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Pa||typeof pb<"u"&&!Pa}destroy(){this.onMessage=mb,this.onError=mb,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||Ak(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=S8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new pb(r,{eval:!1})}else if(this.source)e=new pb(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class A8{constructor(e){U(this,"name","unnamed");U(this,"source");U(this,"url");U(this,"maxConcurrency",1);U(this,"maxMobileConcurrency",1);U(this,"onDebug",()=>{});U(this,"reuseWorkers",!0);U(this,"props",{});U(this,"jobQueue",[]);U(this,"idleQueue",[]);U(this,"count",0);U(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return $_.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,a)=>i.done(a),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new w8(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Pa||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new $_({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return x8?this.maxMobileConcurrency:this.maxConcurrency}}const R8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Ro=class Ro{constructor(e){U(this,"props");U(this,"workerPools",new Map);this.props={...R8},this.setProps(e),this.workerPools=new Map}static isSupported(){return $_.isSupported()}static getWorkerFarm(e={}){return Ro._workerFarm=Ro._workerFarm||new Ro({}),Ro._workerFarm.setProps(e),Ro._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new A8({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};U(Ro,"_workerFarm");let Sp=Ro;function C8(t,e={}){const n=e[t.id]||{},r=Pa?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(Pa?i=`modules/${t.module}/dist/${r}`:i=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!i){let s=t.version;s==="latest"&&(s=b8);const a=s?`@${s}`:"";i=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${r}`}return Yo(i),i}function k8(t,e=v8){Yo(t,"no worker provided");const n=t.version;return!(!e||!n)}function M8(t,e){return!Sp.isSupported()||!Pa&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function N8(t,e,n,r,i){const s=t.id,a=C8(t,n),u=Sp.getWorkerFarm(n).getWorkerPool({name:s,url:a});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const h=await u.startJob("process-on-worker",I8.bind(null,i));return h.postMessage("process",{input:e,options:n,context:r}),await(await h.result).result}async function I8(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:a}=r;try{const c=await t(s,a);e.postMessage("done",{id:i,result:c})}catch(c){const u=c instanceof Error?c.message:"unknown error";e.postMessage("error",{id:i,error:u})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function O8(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function P8(...t){return D8(t)}function D8(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,a)=>s+a.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}async function F8(t){const e=[];for await(const n of t)e.push(n);return P8(...e)}function _T(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class vT{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=_T(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(_T()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Ag{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let i=this.stats[n];return i||(e instanceof vT?i=e:i=new vT(n,r),this.stats[n]=i),i}}let B8="";const xT={};function j8(t){for(const e in xT)if(t.startsWith(e)){const n=xT[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${B8}${t}`),t}function U8(t){return t&&typeof t=="object"&&t.isBuffer}function Rk(t){if(U8(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Ck(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function L8(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const z8=t=>typeof t=="boolean",gf=t=>typeof t=="function",Qf=t=>t!==null&&typeof t=="object",wT=t=>Qf(t)&&t.constructor==={}.constructor,V8=t=>!!t&&typeof t[Symbol.iterator]=="function",$8=t=>t&&typeof t[Symbol.asyncIterator]=="function",Ja=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,el=t=>typeof Blob<"u"&&t instanceof Blob,H8=t=>t&&typeof t=="object"&&t.isBuffer,W8=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Qf(t)&&gf(t.tee)&&gf(t.cancel)&&gf(t.getReader),q8=t=>Qf(t)&&gf(t.read)&&gf(t.pipe)&&z8(t.readable),kk=t=>W8(t)||q8(t);class X8 extends Error{constructor(n,r){super(n);U(this,"reason");U(this,"url");U(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const Y8=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,K8=/^([-\w.]+\/[-\w.+]+)/;function ST(t,e){return t.toLowerCase()===e.toLowerCase()}function Q8(t){const e=K8.exec(t);return e?e[1]:t}function TT(t){const e=Y8.exec(t);return e?e[1]:""}const Mk=/\?.*/;function Z8(t){const e=t.match(Mk);return e&&e[0]}function Ov(t){return t.replace(Mk,"")}function G8(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Rg(t){return Ja(t)?t.url:el(t)?t.name||"":typeof t=="string"?t:""}function Pv(t){if(Ja(t)){const e=t,n=e.headers.get("content-type")||"",r=Ov(e.url);return Q8(n)||TT(r)}return el(t)?t.type||"":typeof t=="string"?TT(t):""}function J8(t){return Ja(t)?t.headers["content-length"]||-1:el(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function Nk(t){if(Ja(t))return t;const e={},n=J8(t);n>=0&&(e["content-length"]=String(n));const r=Rg(t),i=Pv(t);i&&(e["content-type"]=i);const s=await n5(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:r}),a}async function e5(t){if(!t.ok)throw await t5(t)}async function t5(t){const e=G8(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:t.statusText,url:t.url,response:t};try{const i=t.headers.get("Content-Type");r.reason=!t.bodyUsed&&(i!=null&&i.includes("application/json"))?await t.json():await t.text()}catch{}return new X8(n,r)}async function n5(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var a;return r((a=s==null?void 0:s.target)==null?void 0:a.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${r5(n)}`}return null}function r5(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function i5(t){return!s5(t)&&!o5(t)}function s5(t){return t.startsWith("http:")||t.startsWith("https:")}function o5(t){return t.startsWith("data:")}async function ET(t,e){var n,r;if(typeof t=="string"){const i=j8(t);return i5(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,e):await fetch(i,e)}return await Nk(t)}const AT=new Kf({id:"loaders.gl"});class a5{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class l5{constructor(){U(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const Ik={fetch:null,mimeType:void 0,nothrow:!1,log:new l5,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Nv,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},c5={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Ok(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function Pk(){const t=Ok();return t.globalOptions=t.globalOptions||{...Ik},t.globalOptions}function u5(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],f5(t,n),d5(e,t,r)}function f5(t,e){RT(t,null,Ik,c5,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};RT(r,n.id,i,s,e)}}function RT(t,e,n,r,i){const s=e||"Top level",a=e?`${e}.`:"";for(const c in t){const u=!e&&Qf(t[c]),h=c==="baseUri"&&!e,d=c==="workerUrl"&&e;if(!(c in n)&&!h&&!d){if(c in r)AT.warn(`${s} loader option '${a}${c}' no longer supported, use '${r[c]}'`)();else if(!u){const g=h5(c,i);AT.warn(`${s} loader option '${a}${c}' not recognized. ${g}`)()}}}}function h5(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return`Did you mean '${i.id}.${s}'?`;const a=s.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(r=r||`Did you mean '${i.id}.${s}'?`)}return r}function d5(t,e,n){const i={...t.options||{}};return p5(i,n),i.log===null&&(i.log=new a5),CT(i,Pk()),CT(i,e),i}function CT(t,e){for(const n in e)if(n in e){const r=e[n];wT(r)&&wT(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function p5(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Dv(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function Fv(t){xp(t,"null loader"),xp(Dv(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Dk=()=>{const t=Ok();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function g5(t){const e=Dk();t=Array.isArray(t)?t:[t];for(const n of t){const r=Fv(n);e.find(i=>r===i)||e.unshift(r)}}function m5(){return Dk()}const y5=/\.([^.]+)$/;async function b5(t,e=[],n,r){if(!Fk(t))return null;let i=kT(t,e,{...n,nothrow:!0},r);if(i)return i;if(el(t)&&(t=await t.slice(0,10).arrayBuffer(),i=kT(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(Bk(t));return i}function kT(t,e=[],n,r){if(!Fk(t))return null;if(e&&!Array.isArray(e))return Fv(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...m5()),v5(i);const s=_5(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(Bk(t));return s}function _5(t,e,n,r){const i=Rg(t),s=Pv(t),a=Ov(i)||(r==null?void 0:r.url);let c=null,u="";return n!=null&&n.mimeType&&(c=yb(e,n==null?void 0:n.mimeType),u=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),c=c||x5(e,a),u=u||(c?`matched url ${a}`:""),c=c||yb(e,s),u=u||(c?`matched MIME type ${s}`:""),c=c||S5(e,t),u=u||(c?`matched initial data ${jk(t)}`:""),n!=null&&n.fallbackMimeType&&(c=c||yb(e,n==null?void 0:n.fallbackMimeType),u=u||(c?`matched fallback MIME type ${s}`:"")),u&&m8.log(1,`selectLoader selected ${c==null?void 0:c.name}: ${u}.`),c}function Fk(t){return!(t instanceof Response&&t.status===204)}function Bk(t){const e=Rg(t),n=Pv(t);let r="No valid loader found (";r+=e?`${Ck(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=t?jk(t):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function v5(t){for(const e of t)Fv(e)}function x5(t,e){const n=e&&y5.exec(e),r=n&&n[1];return r?w5(t,r):null}function w5(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function yb(t,e){var n;for(const r of t)if((n=r.mimeTypes)!=null&&n.some(i=>ST(e,i))||ST(e,`application/x.${r.id}`))return r;return null}function S5(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(T5(e,n))return n}else if(ArrayBuffer.isView(e)){if(MT(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&MT(e,0,n))return n;return null}function T5(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function MT(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>E5(t,e,n,i))}function E5(t,e,n,r){if(r instanceof ArrayBuffer)return O8(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const i=H_(t,e,r.length);return r===i;default:return!1}}function jk(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?H_(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?H_(t,0,e):""}function H_(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const A5=256*1024;function*R5(t,e){const n=(e==null?void 0:e.chunkSize)||A5;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),a=t.slice(r,r+s);r+=s,yield i.encode(a)}}const C5=256*1024;function*k5(t,e={}){const{chunkSize:n=C5}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),a=new Uint8Array(t,r,i);new Uint8Array(s).set(a),r+=i,yield s}}const M5=1024*1024;async function*N5(t,e){const n=(e==null?void 0:e.chunkSize)||M5;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function NT(t,e){return Nv?I5(t,e):O5(t)}async function*I5(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:a}=await i;if(s)return;yield Rk(a)}}catch{n.releaseLock()}}async function*O5(t,e){for await(const n of t)yield Rk(n)}function P5(t,e){if(typeof t=="string")return R5(t,e);if(t instanceof ArrayBuffer)return k5(t,e);if(el(t))return N5(t,e);if(kk(t))return NT(t,e);if(Ja(t))return NT(t.body,e);throw new Error("makeIterator")}const Uk="Cannot convert supplied data type";function D5(t,e,n){if(e.text&&typeof t=="string")return t;if(H8(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(Uk)}async function F5(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return D5(t,e);if(el(t)&&(t=await Nk(t)),Ja(t)){const i=t;return await e5(i),e.binary?await i.arrayBuffer():await i.text()}if(kk(t)&&(t=P5(t,n)),V8(t)||$8(t))return F8(t);throw new Error(Uk)}function Lk(t,e){const n=Pk(),r=t||n;return typeof r.fetch=="function"?r.fetch:Qf(r.fetch)?i=>ET(i,r.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:ET}function B5(t,e,n){if(n)return n;const r={fetch:Lk(e,t),...t};if(r.url){const i=Ov(r.url);r.baseUrl=i,r.queryString=Z8(r.url),r.filename=Ck(i),r.baseUrl=L8(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function j5(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function Tp(t,e,n,r){e&&!Array.isArray(e)&&!Dv(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=Rg(t),a=j5(e,r),c=await b5(t,a,n);return c?(n=u5(n,c,a,i),r=B5({url:i,_parse:Tp,loaders:a},n,r||null),await U5(c,t,n,r)):null}async function U5(t,e,n,r){if(k8(t),n=y8(t.options,n),Ja(e)){const s=e,{ok:a,redirected:c,status:u,statusText:h,type:d,url:g}=s,b=Object.fromEntries(s.headers.entries());r.response={headers:b,ok:a,redirected:c,status:u,statusText:h,type:d,url:g}}e=await F5(e,t,n);const i=t;if(i.parseTextSync&&typeof e=="string")return i.parseTextSync(e,n,r);if(M8(t,n))return await N8(t,e,n,r,Tp);if(i.parseText&&typeof e=="string")return await i.parseText(e,n,r);if(i.parse)return await i.parse(e,n,r);throw Yo(!i.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function W_(t,e,n,r){let i,s;!Array.isArray(e)&&!Dv(e)?(i=[],s=e):(i=e,s=n);const a=Lk(s);let c=t;return typeof t=="string"&&(c=await a(t)),el(t)&&(c=await a(t)),Array.isArray(i)?await Tp(c,i,s):await Tp(c,i,s)}const L5="4.3.3";var yA;const z5=(yA=globalThis.loaders)==null?void 0:yA.parseImageNode,q_=typeof Image<"u",X_=typeof ImageBitmap<"u",V5=!!z5,Y_=Nv?!0:V5;function $5(t){switch(t){case"auto":return X_||q_||Y_;case"imagebitmap":return X_;case"image":return q_;case"data":return Y_;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function H5(){if(X_)return"imagebitmap";if(q_)return"image";if(Y_)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function W5(t){const e=X5(t);if(!e)throw new Error("Not an image");return e}function q5(t){switch(W5(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function X5(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const Y5=/^data:image\/svg\+xml/,K5=/\.svg((\?|#).*)?$/;function Bv(t){return t&&(Y5.test(t)||K5.test(t))}function Q5(t,e){if(Bv(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return zk(t,e)}function zk(t,e){if(Bv(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Vk(t,e,n){const r=Q5(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await Z5(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function Z5(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>{const a=s instanceof Error?s.message:"error";i(new Error(a))}}catch(s){i(s)}})}const G5={};let IT=!0;async function J5(t,e,n){let r;Bv(n)?r=await Vk(t,e,n):r=zk(t,n);const i=e&&e.imagebitmap;return await ez(r,i)}async function ez(t,e=null){if((tz(e)||!IT)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),IT=!1}return await createImageBitmap(t)}function tz(t){for(const e in t||G5)return!1;return!0}function nz(t){return!oz(t,"ftyp",4)||(t[8]&96)===0?null:rz(t)}function rz(t){switch(iz(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function iz(t,e,n){return String.fromCharCode(...t.slice(e,n))}function sz(t){return[...t].map(e=>e.charCodeAt(0))}function oz(t,e,n=0){const r=sz(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const ls=!1,mf=!0;function $k(t){const e=Zf(t);return lz(e)||fz(e)||cz(e)||uz(e)||az(e)}function az(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=nz(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function lz(t){const e=Zf(t);return e.byteLength>=24&&e.getUint32(0,ls)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ls),height:e.getUint32(20,ls)}:null}function cz(t){const e=Zf(t);return e.byteLength>=10&&e.getUint32(0,ls)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,mf),height:e.getUint16(8,mf)}:null}function uz(t){const e=Zf(t);return e.byteLength>=14&&e.getUint16(0,ls)===16973&&e.getUint32(2,mf)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,mf),height:e.getUint32(22,mf)}:null}function fz(t){const e=Zf(t);if(!(e.byteLength>=3&&e.getUint16(0,ls)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=hz();let s=2;for(;s+9<e.byteLength;){const a=e.getUint16(s,ls);if(i.has(a))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ls),width:e.getUint16(s+7,ls)};if(!r.has(a))return null;s+=2,s+=e.getUint16(s,ls)}return null}function hz(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Zf(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function dz(t,e){var i;const{mimeType:n}=$k(t)||{},r=(i=globalThis.loaders)==null?void 0:i.parseImageNode;return xp(r),await r(t,n)}async function pz(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},a=gz(i);let c;switch(a){case"imagebitmap":c=await J5(t,e,s);break;case"image":c=await Vk(t,e,s);break;case"data":c=await dz(t);break;default:xp(!1)}return i==="data"&&(c=q5(c)),c}function gz(t){switch(t){case"auto":case"data":return H5();default:return $5(t),t}}const mz=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],yz=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],bz={image:{type:"auto",decode:!0}},_z={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:L5,mimeTypes:yz,extensions:mz,parse:pz,tests:[t=>!!$k(new DataView(t))],options:bz},yn=new Kf({id:"deck"});let K_={};function vz(t){K_=t}function Pr(t,e,n,r){yn.level>0&&K_[t]&&K_[t].call(null,e,n,r)}function xz(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const wz={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:xz,parseTextSync:JSON.parse};function Sz(){const t="9.1.12",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(yn.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:yn,_registerLoggers:vz},g5([wz,[_z,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const Tz=Sz();function jv(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const bb={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function Ez(t){const e={};for(const[n,r]of Object.entries(t))e[n]=Az(r);return e}function Az(t){let e=OT(t);if(e!=="object")return{value:t,...bb[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...bb[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=OT(t.value),{...t,...bb[e],type:e}):{type:"object",value:null};throw new Error("props")}function OT(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const Rz=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Cz=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,kz={vertex:Rz,fragment:Cz},PT=/void\s+main\s*\([^)]*\)\s*\{\n?/,DT=/}\n?[^{}]*$/,_b=[],Gd="__LUMA_INJECT_DECLARATIONS__";function Mz(t){const e={vertex:{},fragment:{}};for(const n in t){let r=t[n];const i=Nz(n);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function Nz(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Ep(t,e,n,r=!1){const i=e==="vertex";for(const s in n){const a=n[s];a.sort((u,h)=>u.order-h.order),_b.length=a.length;for(let u=0,h=a.length;u<h;++u)_b[u]=a[u].injection;const c=`${_b.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(Gd,c));break;case"vs:#main-start":i&&(t=t.replace(PT,u=>u+c));break;case"vs:#main-end":i&&(t=t.replace(DT,u=>c+u));break;case"fs:#decl":i||(t=t.replace(Gd,c));break;case"fs:#main-start":i||(t=t.replace(PT,u=>u+c));break;case"fs:#main-end":i||(t=t.replace(DT,u=>c+u));break;default:t=t.replace(s,u=>u+c)}}return t=t.replace(Gd,""),r&&(t=t.replace(/\}\s*$/,s=>s+kz[e])),t}function Ap(t){t.map(e=>Iz(e))}function Iz(t){if(t.instance)return;Ap(t.dependencies||[]);const{propTypes:e={},deprecations:n=[],inject:r={}}=t,i={normalizedInjections:Mz(r),parsedDeprecations:Oz(n)};e&&(i.propValidators=Ez(e)),t.instance=i;let s={};e&&(s=Object.entries(e).reduce((a,[c,u])=>{const h=u==null?void 0:u.value;return h&&(a[c]=h),a},{})),t.defaultUniforms={...t.defaultUniforms,...s}}function Hk(t,e,n){var r;(r=t.deprecations)==null||r.forEach(i=>{var s;(s=i.regex)!=null&&s.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}function Oz(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function Uv(t){Ap(t);const e={},n={};Wk({modules:t,level:0,moduleMap:e,moduleDepth:n});const r=Object.keys(n).sort((i,s)=>n[s]-n[i]).map(i=>e[i]);return Ap(r),r}function Wk(t){const{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&Wk({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function Pz(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function Dz(t,e){var r;if(Number(((r=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:r[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=FT(t,Fz),t;case"fragment":return t=FT(t,Bz),t;default:throw new Error(e)}}const qk=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Fz=[...qk,[Q_("attribute"),"in $1"],[Q_("varying"),"out $1"]],Bz=[...qk,[Q_("varying"),"in $1"]];function FT(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function Q_(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function Xk(t,e){let n="";for(const r in t){const i=t[r];if(n+=`void ${i.signature} {
`,i.header&&(n+=`  ${i.header}`),e[r]){const s=e[r];s.sort((a,c)=>a.order-c.order);for(const a of s)n+=`  ${a.injection}
`}i.footer&&(n+=`  ${i.footer}`),n+=`}
`}return n}function Yk(t){const e={vertex:{},fragment:{}};for(const n of t){let r,i;typeof n!="string"?(r=n,i=r.hook):(r={},i=n),i=i.trim();const[s,a]=i.split(":"),c=i.replace(/\(.+/,""),u=Object.assign(r,{signature:a});switch(s){case"vs":e.vertex[c]=u;break;case"fs":e.fragment[c]=u;break;default:throw new Error(s)}}return e}function jz(t,e){return{name:Uz(t,e),language:"glsl",version:Lz(t)}}function Uz(t,e="unnamed"){const r=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return r?r[1]:e}function Lz(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const Kk=`

${Gd}
`,zz=`precision highp float;
`;function Vz(t){const e=Uv(t.modules||[]);return{source:Hz(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:Qk(e)}}function $z(t){const{vs:e,fs:n}=t,r=Uv(t.modules||[]);return{vs:BT(t.platformInfo,{...t,source:e,stage:"vertex",modules:r}),fs:BT(t.platformInfo,{...t,source:n,stage:"fragment",modules:r}),getUniforms:Qk(r)}}function Hz(t,e){var A;const{source:n,stage:r,modules:i,hookFunctions:s=[],inject:a={},log:c}=e;jv(typeof n=="string","shader source must be a string");const u=n;let h="";const d=Yk(s),g={},b={},S={};for(const C in a){const k=typeof a[C]=="string"?{injection:a[C],order:0}:a[C],P=/^(v|f)s:(#)?([\w-]+)$/.exec(C);if(P){const M=P[2],z=P[3];M?z==="decl"?b[C]=[k]:S[C]=[k]:g[C]=[k]}else S[C]=[k]}const R=i;for(const C of R){c&&Hk(C,u,c);const k=Zk(C,"wgsl");h+=k;const P=((A=C.injections)==null?void 0:A[r])||{};for(const M in P){const z=/^(v|f)s:#([\w-]+)$/.exec(M);if(z){const F=z[2]==="decl"?b:S;F[M]=F[M]||[],F[M].push(P[M])}else g[M]=g[M]||[],g[M].push(P[M])}}return h+=Kk,h=Ep(h,r,b),h+=Xk(d[r],g),h+=u,h=Ep(h,r,S),h}function BT(t,e){var Z;const{id:n,source:r,stage:i,language:s="glsl",modules:a,defines:c={},hookFunctions:u=[],inject:h={},prologue:d=!0,log:g}=e;jv(typeof r=="string","shader source must be a string");const b=s==="glsl"?jz(r).version:-1,S=t.shaderLanguageVersion,R=b===100?"#version 100":"#version 300 es",C=r.split(`
`).slice(1).join(`
`),k={};a.forEach(Q=>{Object.assign(k,Q.defines)}),Object.assign(k,c);let P="";switch(s){case"wgsl":break;case"glsl":P=d?`${R}

// ----- PROLOGUE -------------------------
${Wz({id:n,source:r,stage:i})}
${`#define SHADER_TYPE_${i.toUpperCase()}`}

${Pz(t)}
${i==="fragment"?zz:""}

// ----- APPLICATION DEFINES -------------------------

${qz(k)}

`:`${R}
`;break}const M=Yk(u),z={},$={},F={};for(const Q in h){const ue=typeof h[Q]=="string"?{injection:h[Q],order:0}:h[Q],Y=/^(v|f)s:(#)?([\w-]+)$/.exec(Q);if(Y){const K=Y[2],ie=Y[3];K?ie==="decl"?$[Q]=[ue]:F[Q]=[ue]:z[Q]=[ue]}else F[Q]=[ue]}for(const Q of a){g&&Hk(Q,C,g);const ue=Zk(Q,i);P+=ue;const Y=((Z=Q.instance)==null?void 0:Z.normalizedInjections[i])||{};for(const K in Y){const ie=/^(v|f)s:#([\w-]+)$/.exec(K);if(ie){const re=ie[2]==="decl"?$:F;re[K]=re[K]||[],re[K].push(Y[K])}else z[K]=z[K]||[],z[K].push(Y[K])}}return P+="// ----- MAIN SHADER SOURCE -------------------------",P+=Kk,P=Ep(P,i,$),P+=Xk(M[i],z),P+=C,P=Ep(P,i,F),s==="glsl"&&b!==S&&(P=Dz(P,i)),P.trim()}function Qk(t){return function(n){var i;const r={};for(const s of t){const a=(i=s.getUniforms)==null?void 0:i.call(s,n,r);Object.assign(r,a)}return r}}function Wz(t){const{id:e,source:n,stage:r}=t;return e&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${r}`:""}function qz(t={}){let e="";for(const n in t){const r=t[n];(r||Number.isFinite(r))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}function Zk(t,e){let n;switch(e){case"vertex":n=t.vs||"";break;case"fragment":n=t.fs||"";break;case"wgsl":n=t.source||"";break;default:jv(!1)}if(!t.name)throw new Error("Shader module must have a name");const r=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let i=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(i+=`#define MODULE_${r}
`),i+=`${n}
`,i}const Xz=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,Yz=/^\s*\#\s*endif\s*$/;function Kz(t,e){var a;const n=t.split(`
`),r=[];let i=!0,s=null;for(const c of n){const u=c.match(Xz),h=c.match(Yz);u?(s=u[1],i=!!((a=e==null?void 0:e.defines)!=null&&a[s])):h?i=!0:i&&r.push(c)}return r.join(`
`)}const wa=class wa{constructor(){U(this,"_hookFunctions",[]);U(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return wa.defaultShaderAssembler=wa.defaultShaderAssembler||new wa,wa.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const n=this._getModuleList(e.modules),r=this._hookFunctions,{source:i,getUniforms:s}=Vz({...e,source:e.source,modules:n,hookFunctions:r});return{source:e.platformInfo.shaderLanguage==="wgsl"?Kz(i):i,getUniforms:s,modules:n}}assembleGLSLShaderPair(e){const n=this._getModuleList(e.modules),r=this._hookFunctions;return{...$z({...e,vs:e.vs,fs:e.fs,modules:n,hookFunctions:r}),modules:n}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,a=this._defaultModules.length;s<a;++s){const c=this._defaultModules[s],u=c.name;n[i++]=c,r[u]=!0}for(let s=0,a=e.length;s<a;++s){const c=e[s],u=c.name;r[u]||(n[i++]=c,r[u]=!0)}return n.length=i,Ap(n),n}};U(wa,"defaultShaderAssembler");let Rp=wa;const Qz=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,Zz=`#version 300 es
${Qz}`;function Gz(t){const{input:e,inputChannels:n,output:r}={};if(!e)return Zz;if(!n)throw new Error("inputChannels");const i=Jz(n),s=eV(e,n);return`#version 300 es
in ${i} ${e};
out vec4 ${r};
void main() {
  ${r} = ${s};
}`}function Jz(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function eV(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class tV{constructor(){U(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Ag({id:e})),this.stats.get(e)}}const Gk=new tV,$e=new Kf({id:"luma.gl"}),vb={};function Cg(t="id"){vb[t]=vb[t]||1;const e=vb[t]++;return`${t}-${e}`}var c_;let an=(c_=class{constructor(e,n,r){U(this,"id");U(this,"props");U(this,"userData",{});U(this,"_device");U(this,"destroyed",!1);U(this,"allocatedBytes",0);U(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=nV(n,r);const i=this.props.id!=="undefined"?this.props.id:Cg(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},U(c_,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),c_);function nV(t,e){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}const hr=class hr extends an{constructor(n,r){const i={...r};(r.usage||0)&hr.INDEX&&!r.indexType&&(r.data instanceof Uint32Array?i.indexType="uint32":r.data instanceof Uint16Array&&(i.indexType="uint16")),delete i.data;super(n,i,hr.defaultProps);U(this,"usage");U(this,"indexType");U(this,"updateTimestamp");U(this,"debugData",new ArrayBuffer(0));this.usage=i.usage||0,this.indexType=i.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(n){return this.device.createBuffer({...this.props,...n})}readSyncWebGL(n,r){throw new Error("not implemented")}_setDebugData(n,r,i){const s=ArrayBuffer.isView(n)?n.buffer:n,a=Math.min(n?n.byteLength:i,hr.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(a):r===0&&i===s.byteLength?this.debugData=s.slice(0,a):this.debugData=s.slice(r,r+a)}};U(hr,"defaultProps",{...an.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),U(hr,"MAP_READ",1),U(hr,"MAP_WRITE",2),U(hr,"COPY_SRC",4),U(hr,"COPY_DST",8),U(hr,"INDEX",16),U(hr,"VERTEX",32),U(hr,"UNIFORM",64),U(hr,"STORAGE",128),U(hr,"INDIRECT",256),U(hr,"QUERY_RESOLVE",512),U(hr,"DEBUG_DATA_MAX_LENGTH",32);let xn=hr;function Jk(t){const e=jT[t],n=rV(e),r=t.includes("norm"),i=!r&&!t.startsWith("float"),s=t.startsWith("s");return{dataType:jT[t],byteLength:n,integer:i,signed:s,normalized:r}}function rV(t){return iV[t]}const jT={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},iV={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},_r="texture-compression-bc",sn="texture-compression-astc",es="texture-compression-etc2",sV="texture-compression-etc1-webgl",Rd="texture-compression-pvrtc-webgl",xb="texture-compression-atc-webgl",Cd="float32-renderable-webgl",wb="float16-renderable-webgl",oV="rgb9e5ufloat-renderable-webgl",Sb="snorm8-renderable-webgl",Ku="norm16-renderable-webgl",Tb="snorm16-renderable-webgl",kd="float32-filterable",UT="float16-filterable-webgl";function eM(t){const e=aV[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const aV={r8unorm:{},r8snorm:{render:Sb},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:Sb},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:wb,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:Ku},"r16snorm-webgl":{f:Tb},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:Sb},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:wb,filter:UT},"rg16unorm-webgl":{render:Ku},"rg16snorm-webgl":{render:Tb},r32uint:{},r32sint:{},r32float:{render:Cd,filter:kd},rgb9e5ufloat:{channels:"rgb",packed:!0,render:oV},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Cd},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:Ku},"rgb16snorm-webgl":{f:Ku},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:kd},rgba16uint:{},rgba16sint:{},rgba16float:{render:wb,filter:UT},"rgba16unorm-webgl":{render:Ku},"rgba16snorm-webgl":{render:Tb},"rgb32float-webgl":{render:Cd,filter:kd},rgba32uint:{},rgba32sint:{},rgba32float:{render:Cd,filter:kd},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:_r},"bc1-rgb-unorm-srgb-webgl":{f:_r},"bc1-rgba-unorm":{f:_r},"bc1-rgba-unorm-srgb":{f:_r},"bc2-rgba-unorm":{f:_r},"bc2-rgba-unorm-srgb":{f:_r},"bc3-rgba-unorm":{f:_r},"bc3-rgba-unorm-srgb":{f:_r},"bc4-r-unorm":{f:_r},"bc4-r-snorm":{f:_r},"bc5-rg-unorm":{f:_r},"bc5-rg-snorm":{f:_r},"bc6h-rgb-ufloat":{f:_r},"bc6h-rgb-float":{f:_r},"bc7-rgba-unorm":{f:_r},"bc7-rgba-unorm-srgb":{f:_r},"etc2-rgb8unorm":{f:es},"etc2-rgb8unorm-srgb":{f:es},"etc2-rgb8a1unorm":{f:es},"etc2-rgb8a1unorm-srgb":{f:es},"etc2-rgba8unorm":{f:es},"etc2-rgba8unorm-srgb":{f:es},"eac-r11unorm":{f:es},"eac-r11snorm":{f:es},"eac-rg11unorm":{f:es},"eac-rg11snorm":{f:es},"astc-4x4-unorm":{f:sn},"astc-4x4-unorm-srgb":{f:sn},"astc-5x4-unorm":{f:sn},"astc-5x4-unorm-srgb":{f:sn},"astc-5x5-unorm":{f:sn},"astc-5x5-unorm-srgb":{f:sn},"astc-6x5-unorm":{f:sn},"astc-6x5-unorm-srgb":{f:sn},"astc-6x6-unorm":{f:sn},"astc-6x6-unorm-srgb":{f:sn},"astc-8x5-unorm":{f:sn},"astc-8x5-unorm-srgb":{f:sn},"astc-8x6-unorm":{f:sn},"astc-8x6-unorm-srgb":{f:sn},"astc-8x8-unorm":{f:sn},"astc-8x8-unorm-srgb":{f:sn},"astc-10x5-unorm":{f:sn},"astc-10x5-unorm-srgb":{f:sn},"astc-10x6-unorm":{f:sn},"astc-10x6-unorm-srgb":{f:sn},"astc-10x8-unorm":{f:sn},"astc-10x8-unorm-srgb":{f:sn},"astc-10x10-unorm":{f:sn},"astc-10x10-unorm-srgb":{f:sn},"astc-12x10-unorm":{f:sn},"astc-12x10-unorm-srgb":{f:sn},"astc-12x12-unorm":{f:sn},"astc-12x12-unorm-srgb":{f:sn},"pvrtc-rgb4unorm-webgl":{f:Rd},"pvrtc-rgba4unorm-webgl":{f:Rd},"pvrtc-rbg2unorm-webgl":{f:Rd},"pvrtc-rgba2unorm-webgl":{f:Rd},"etc1-rbg-unorm-webgl":{f:sV},"atc-rgb-unorm-webgl":{f:xb},"atc-rgba-unorm-webgl":{f:xb},"atc-rgbai-unorm-webgl":{f:xb}},lV=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],cV=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function tM(t){return lV.some(e=>t.startsWith(e))}function Lv(t){let e=uV(t);if(tM(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const r=fV(t);r&&(e.blockWidth=r.blockWidth,e.blockHeight=r.blockHeight)}const n=cV.exec(t);if(n){const[,r,i,s,a,c]=n,u=`${s}${i}`,h=Jk(u),d=h.byteLength*8,g=r.length,b=[d,g>=2?d:0,g>=3?d:0,g>=4?d:0];e={format:t,attachment:e.attachment,dataType:h.dataType,components:g,channels:r,integer:h.integer,signed:h.signed,normalized:h.normalized,bitsPerChannel:b,bytesPerPixel:h.byteLength*r.length,packed:e.packed,srgb:e.srgb},c==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function uV(t){var s;const e=eM(t),n=e.bytesPerPixel||1,r=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((s=e.channels)==null?void 0:s.length)||1,bytesPerPixel:n,bitsPerChannel:r,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function fV(t){const n=/.*-(\d+)x(\d+)-.*/.exec(t);if(n){const[,r,i]=n;return{blockWidth:Number(r),blockHeight:Number(i)}}return null}function hV(t){const e=eM(t),n={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},r=Lv(t),i=t.startsWith("depth")||t.startsWith("stencil"),s=r==null?void 0:r.signed,a=r==null?void 0:r.integer,c=r==null?void 0:r.webgl;return n.render&&(n.render=!s),n.filter&&(n.filter=!i&&!s&&!a&&!c),n}class dV{}class pV{constructor(e=[],n){U(this,"features");U(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){var n;return!((n=this.disabledFeatures)!=null&&n[e])&&this.features.has(e)}}const eg=class eg{constructor(e){U(this,"id");U(this,"props");U(this,"userData",{});U(this,"statsManager",Gk);U(this,"timestamp",0);U(this,"_reused",!1);U(this,"_lumaData",{});this.props={...eg.defaultProps,...e},this.id=this.props.id||Cg(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const n=hV(e),r=a=>(typeof a=="string"?this.features.has(a):a)??!0,i=r(n.create),s={format:e,create:i,render:i&&r(n.render),filter:i&&r(n.filter),blend:i&&r(n.blend),store:i&&r(n.store)};return this._getDeviceSpecificTextureFormatCapabilities(s)}isTextureFormatSupported(e,n){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return tM(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};return(e.usage||0)&xn.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array?n.indexType="uint16":$e.warn("indices buffer content must be of integer type")()),n}};U(eg,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>$e.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:$e.get("debug")||void 0,debugShaders:$e.get("debug-shaders")||void 0,debugFramebuffers:!!$e.get("debug-framebuffers"),debugWebGL:!!$e.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let Ho=eg;const gV=Ga()&&typeof document<"u",mV=()=>gV&&document.readyState==="complete",yV="set luma.log.level=1 (or higher) to trace rendering",LT="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",Co=class Co{constructor(){U(this,"stats",Gk);U(this,"log",$e);U(this,"VERSION","9.1.9");U(this,"spector");U(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw $e.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),$e.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");$e.error("This version of luma.gl has already been initialized")()}$e.log(1,`${this.VERSION} - ${yV}`)(),globalThis.luma=this}registerAdapters(e){for(const n of e)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(e=[]){const n=this.getAdapterMap(e);return Array.from(n).map(([,r])=>r).filter(r=>{var i;return(i=r.isSupported)==null?void 0:i.call(r)}).map(r=>r.type)}getBestAvailableAdapter(e=[]){var r,i,s,a;const n=this.getAdapterMap(e);return(i=(r=n.get("webgpu"))==null?void 0:r.isSupported)!=null&&i.call(r)?"webgpu":(a=(s=n.get("webgl"))==null?void 0:s.isSupported)!=null&&a.call(s)?"webgl":null}setDefaultDeviceProps(e){Object.assign(Co.defaultProps,e)}async createDevice(e={}){var c;e={...Co.defaultProps,...e},e.waitForPageLoad&&await Co.pageLoaded;const n=this.getAdapterMap(e.adapters);let r=e.type||"";r==="best-available"&&(r=this.getBestAvailableAdapter(e.adapters)||r);const s=(this.getAdapterMap(e.adapters)||n).get(r),a=await((c=s==null?void 0:s.create)==null?void 0:c.call(s,e));if(a)return a;throw new Error(LT)}async attachDevice(e){var a;const n=this.getAdapterMap(e.adapters);let r="";e.handle instanceof WebGL2RenderingContext&&(r="webgl"),e.createCanvasContext&&await Co.pageLoaded,e.handle===null&&(r="unknown");const i=n.get(r),s=await((a=i==null?void 0:i.attach)==null?void 0:a.call(i,null));if(s)return s;throw new Error(LT)}enforceWebGL2(e=!0,n=[]){var s;const i=this.getAdapterMap(n).get("webgl");i||$e.warn("enforceWebGL2: webgl adapter not found")(),(s=i==null?void 0:i.enforceWebGL2)==null||s.call(i,e)}getAdapterMap(e=[]){const n=new Map(this.preregisteredAdapters);for(const r of e)n.set(r.type,r);return n}registerDevices(e){$e.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const n of e){const r=n.adapter;r&&this.preregisteredAdapters.set(r.type,r)}}};U(Co,"defaultProps",{...Ho.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),U(Co,"pageLoaded",bV().then(()=>{$e.probe(2,"DOM is loaded")()}));let Z_=Co;const G_=new Z_;function bV(){return mV()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class _V{}const tg=class tg{constructor(e){U(this,"id");U(this,"props");U(this,"canvas");U(this,"htmlCanvas");U(this,"offscreenCanvas");U(this,"type");U(this,"width",1);U(this,"height",1);U(this,"resizeObserver");U(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...tg.defaultProps,...e},e=this.props,!Ga()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=xV(e.canvas):this.canvas=e.canvas;else{const n=wV(e),r=vV((e==null?void 0:e.container)||null);r.insertBefore(n,r.firstChild),this.canvas=n,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const r of n)r.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*e,n.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,n]=this.getPixelSize();return e/n}cssToDeviceRatio(){var e;try{const[n]=this.getDrawingBufferSize(),r=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return r?n/r:1}catch{return 1}}cssToDevicePixels(e,n=!0){const r=this.cssToDeviceRatio(),[i,s]=this.getDrawingBufferSize();return SV(e,r,i,s,n)}setDevicePixelRatio(e,n={}){if(!this.htmlCanvas)return;let r="width"in n?n.width:this.htmlCanvas.clientWidth,i="height"in n?n.height:this.htmlCanvas.clientHeight;(!r||!i)&&($e.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const s=this._canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let a=e;const c=Math.floor(r*a),u=Math.floor(i*a);if(this.htmlCanvas.width=c,this.htmlCanvas.height=u,this.device.gl){const[d,g]=this.getDrawingBufferSize();(d!==c||g!==u)&&(a=Math.min(d/r,g/i),this.htmlCanvas.width=Math.floor(r*a),this.htmlCanvas.height=Math.floor(i*a),$e.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=r,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};U(tg,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let J_=tg;function vV(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function xV(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function wV(t){const{width:e,height:n}=t,r=document.createElement("canvas");return r.id=Cg("lumagl-auto-created-canvas"),r.width=e||1,r.height=n||1,r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}function SV(t,e,n,r,i){const s=t,a=zT(s[0],e,n);let c=VT(s[1],e,r,i),u=zT(s[0]+1,e,n);const h=u===n-1?u:u-1;u=VT(s[1]+1,e,r,i);let d;return i?(u=u===0?u:u+1,d=c,c=u):d=u===r-1?u:u-1,{x:a,y:c,width:Math.max(h-a+1,1),height:Math.max(d-c+1,1)}}function zT(t,e,n){return Math.min(Math.round(t*e),n-1)}function VT(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const dr=class dr extends an{constructor(n,r){r=dr.normalizeProps(n,r);super(n,r,dr.defaultProps);U(this,"dimension");U(this,"format");U(this,"width");U(this,"height");U(this,"depth");U(this,"mipLevels");U(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const i=dr.getTextureDataSize(this.props.data);this.width=(i==null?void 0:i.width)||1,this.height=(i==null?void 0:i.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?dr.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(n){return this.device.createTexture({...this.props,...n})}static isExternalImage(n){return typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement||typeof VideoFrame<"u"&&n instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}static getExternalImageSize(n){if(typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height};if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return{width:n.naturalWidth,height:n.naturalHeight};if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return{width:n.videoWidth,height:n.videoHeight};if(typeof VideoFrame<"u"&&n instanceof VideoFrame)return{width:n.displayWidth,height:n.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(n){const r=n==null?void 0:n.data;return ArrayBuffer.isView(r)}static getTextureDataSize(n){if(!n||ArrayBuffer.isView(n))return null;if(Array.isArray(n))return dr.getTextureDataSize(n[0]);if(dr.isExternalImage(n))return dr.getExternalImageSize(n);if(n&&typeof n=="object"&&n.constructor===Object){const i=Object.values(n)[0];return{width:i.width,height:i.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(n,r){let i;return ArrayBuffer.isView(n)?i=[{data:n,width:r.width,height:r.height}]:Array.isArray(n)?i=n:i=[n],i}static getMipLevelCount(n,r){return Math.floor(Math.log2(Math.max(n,r)))+1}static getCubeFaceDepth(n){switch(n){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(n)}}static normalizeProps(n,r){var u,h;const i={...r},s=((h=(u=n==null?void 0:n.props)==null?void 0:u._resourceDefaults)==null?void 0:h.texture)||{};Object.assign(i,s);const{width:a,height:c}=i;return typeof a=="number"&&(i.width=Math.max(1,Math.ceil(a))),typeof c=="number"&&(i.height=Math.max(1,Math.ceil(c))),i}};U(dr,"COPY_SRC",1),U(dr,"COPY_DST",2),U(dr,"TEXTURE",4),U(dr,"STORAGE",8),U(dr,"RENDER_ATTACHMENT",16),U(dr,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),U(dr,"defaultProps",{...an.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),U(dr,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let kn=dr;const ng=class ng extends an{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,ng.defaultProps)}};U(ng,"defaultProps",{...an.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let Cp=ng;function TV(t,e,n){let r="";const i=e.split(/\r?\n/),s=t.slice().sort((a,c)=>a.lineNum-c.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let a=0;for(let c=1;c<=i.length;c++)for(r+=nM(i[c-1],c,n);s.length>a&&s[a].lineNum===c;){const u=s[a++];r+=$T(u,i,u.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const c of t)r+=$T(c,i,c.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return r}}function $T(t,e,n,r){if(r!=null&&r.inlineSource){const s=EV(e,n),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${s}${a}${t.type.toUpperCase()}: ${t.message}

`}const i=t.type==="error"?"red":"#8B4000";return r!=null&&r.html?`<div class='luma-compiler-log-error' style="color:${i};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function EV(t,e,n){let r="";for(let i=e-2;i<=e;i++){const s=t[i-1];s!==void 0&&(r+=nM(s,e,n))}return r}function nM(t,e,n){const r=n!=null&&n.html?RV(t):t;return`${AV(String(e),4)}: ${r}${n!=null&&n.html?"<br/>":`
`}`}function AV(t,e){let n="";for(let r=t.length;r<e;++r)n+=" ";return n+t}function RV(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const rg=class rg extends an{constructor(n,r){r={...r,debugShaders:r.debugShaders||n.props.debugShaders||"errors"};super(n,{id:CV(r),...r},rg.defaultProps);U(this,"stage");U(this,"source");U(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const n=this.props.debugShaders;switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const r=await this.getCompilationInfo();n==="warnings"&&(r==null?void 0:r.length)===0||this._displayShaderLog(r)}_displayShaderLog(n){var h;if(typeof document>"u"||!(document!=null&&document.createElement))return;const r=rM(this.source),i=`${this.stage} ${r}`;let s=TV(n,this.source,{showSourceCode:"all",html:!0});const a=this.getTranslatedSource();a&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${a}</pre></code>`);const c=document.createElement("Button");c.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,c.style.top="10px",c.style.left="10px",c.style.position="absolute",c.style.zIndex="9999",c.style.width="100%",c.style.textAlign="left",document.body.appendChild(c),(h=document.getElementsByClassName("luma-compiler-log-error")[0])==null||h.scrollIntoView(),c.onclick=()=>{const d=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(d)}}};U(rg,"defaultProps",{...an.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let kp=rg;function CV(t){return rM(t.source)||t.id||Cg(`unnamed ${t.stage}-shader`)}function rM(t,e="unnamed"){const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return r?r[1]:e}const Ef=class Ef extends an{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){n=Ef.normalizeProps(e,n),super(e,n,Ef.defaultProps)}static normalizeProps(e,n){var s,a;const r=((a=(s=e==null?void 0:e.props)==null?void 0:s._resourceDefaults)==null?void 0:a.sampler)||{};return{...n,...r}}};U(Ef,"defaultProps",{...an.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let Mp=Ef;const ig=class ig extends an{constructor(n,r={}){super(n,r,ig.defaultProps);U(this,"width");U(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(n){const r=this.colorAttachments.map(s=>s.texture.clone(n)),i=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(n);return this.device.createFramebuffer({...this.props,colorAttachments:r,depthStencilAttachment:i})}resize(n){let r=!n;if(n){const[i,s]=Array.isArray(n)?n:[n.width,n.height];r=r||s!==this.height||i!==this.width,this.width=i,this.height=s}r&&($e.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((r,i)=>{if(typeof r=="string"){const s=this.createColorTexture(r,i);return this.attachResource(s),s.view}return r instanceof kn?r.view:r});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const r=this.createDepthStencilTexture(n);this.attachResource(r),this.depthStencilAttachment=r.view}else n instanceof kn?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n,r){return this.device.createTexture({id:`${this.id}-color-attachment-${r}`,usage:kn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(n){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:kn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(n,r){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const s=this.colorAttachments[i].texture.clone({width:n,height:r});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const i=this.depthStencilAttachment.texture.clone({width:n,height:r});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}this.updateAttachments()}};U(ig,"defaultProps",{...an.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Np=ig;const sg=class sg extends an{constructor(n,r){super(n,r,sg.defaultProps);U(this,"shaderLayout");U(this,"bufferLayout");U(this,"linkStatus","pending");U(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(n){throw new Error("Use uniform blocks")}};U(sg,"defaultProps",{...an.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let Cc=sg;const Fi=class Fi extends an{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){n=Fi.normalizeProps(e,n),super(e,n,Fi.defaultProps)}static normalizeProps(e,n){var s;return{...(s=e.props._resourceDefaults)==null?void 0:s.renderPass,...n}}};U(Fi,"defaultClearColor",[0,0,0,1]),U(Fi,"defaultClearDepth",1),U(Fi,"defaultClearStencil",0),U(Fi,"defaultProps",{...an.defaultProps,framebuffer:null,parameters:void 0,clearColor:Fi.defaultClearColor,clearColors:void 0,clearDepth:Fi.defaultClearDepth,clearStencil:Fi.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let e0=Fi;const og=class og extends an{constructor(n,r){super(n,r,og.defaultProps);U(this,"hash","");U(this,"shaderLayout");this.shaderLayout=r.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};U(og,"defaultProps",{...an.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let Ip=og;const ag=class ag extends an{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,ag.defaultProps)}};U(ag,"defaultProps",{...an.defaultProps,measureExecutionTime:void 0});let t0=ag;const lg=class lg extends an{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,lg.defaultProps)}};U(lg,"defaultProps",{...an.defaultProps});let n0=lg;function kV(t){const[e,n]=NV[t],r=e==="i32"||e==="u32",i=e!=="u32",s=IV[e]*n,a=MV(e,n);return{dataType:e,components:n,defaultVertexFormat:a,byteLength:s,integer:r,signed:i}}function MV(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?n:`${n}x${e}`}const NV={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},IV={f32:4,f16:2,i32:4,u32:4};function iM(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,r]=t.split("x"),i=n,s=r?parseInt(r):1,a=Jk(i),c={type:i,components:s,byteLength:a.byteLength*s,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(c.webglOnly=!0),c}function sM(t,e){const n={};for(const r of t.attributes){const i=PV(t,e,r.name);i&&(n[r.name]=i)}return n}function OV(t,e,n=16){const r=sM(t,e),i=new Array(n).fill(null);for(const s of Object.values(r))i[s.location]=s;return i}function PV(t,e,n){const r=DV(t,n),i=FV(e,n);if(!r)return null;const s=kV(r.type),a=(i==null?void 0:i.vertexFormat)||s.defaultVertexFormat,c=iM(a);return{attributeName:(i==null?void 0:i.attributeName)||r.name,bufferName:(i==null?void 0:i.bufferName)||r.name,location:r.location,shaderType:r.type,shaderDataType:s.dataType,shaderComponents:s.components,vertexFormat:a,bufferDataType:c.type,bufferComponents:c.components,normalized:c.normalized,integer:s.integer,stepMode:(i==null?void 0:i.stepMode)||r.stepMode||"vertex",byteOffset:(i==null?void 0:i.byteOffset)||0,byteStride:(i==null?void 0:i.byteStride)||0}}function DV(t,e){const n=t.attributes.find(r=>r.name===e);return n||$e.warn(`shader layout attribute "${e}" not present in shader`),n||null}function FV(t,e){BV(t);let n=jV(t,e);return n||(n=UV(t,e),n)?n:($e.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function BV(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&$e.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function jV(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function UV(t,e){var n;for(const r of t){let i=r.byteStride;if(typeof r.byteStride!="number")for(const a of r.attributes||[]){const c=iM(a.format);i+=c.byteLength}const s=(n=r.attributes)==null?void 0:n.find(a=>a.attribute===e);if(s)return{attributeName:s.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:i}}return null}const cg=class cg extends an{constructor(n,r){super(n,r,cg.defaultProps);U(this,"maxVertexAttributes");U(this,"attributeInfos");U(this,"indexBuffer",null);U(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:i,bufferLayout:s}=r.renderPipeline||{};if(!i||!s)throw new Error("VertexArray");this.attributeInfos=OV(i,s,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,r){this.device.reportError(new Error("constant attributes not supported"))}};U(cg,"defaultProps",{...an.defaultProps,renderPipeline:null});let r0=cg;const ug=class ug extends an{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,ug.defaultProps)}};U(ug,"defaultProps",{...an.defaultProps,layout:void 0,buffers:{}});let i0=ug;const fg=class fg extends an{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,fg.defaultProps)}};U(fg,"defaultProps",{...an.defaultProps,type:void 0,count:void 0});let s0=fg;const LV={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function zV(t){return LV[t]}function VV(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Md;function oM(t){return(!Md||Md.byteLength<t)&&(Md=new ArrayBuffer(t)),Md}function $V(t,e){const n=oM(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function HV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Op(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":HV(t)}const HT=1024;class WV{constructor(e){U(this,"layout",{});U(this,"byteLength");let n=0;for(const[i,s]of Object.entries(e)){const a=zV(s),{type:c,components:u}=a;n=VV(n,u);const h=n;n+=u,this.layout[i]={type:c,size:u,offset:h}}n+=(4-n%4)%4;const r=n*4;this.byteLength=Math.max(r,HT)}getData(e){const n=Math.max(this.byteLength,HT),r=oM(n),i={i32:new Int32Array(r),u32:new Uint32Array(r),f32:new Float32Array(r),f16:new Uint16Array(r)};for(const[s,a]of Object.entries(e)){const c=this.layout[s];if(!c){$e.warn(`Supplied uniform value ${s} not present in uniform block layout`)();continue}const{type:u,size:h,offset:d}=c,g=i[u];if(h===1){if(typeof a!="number"&&typeof a!="boolean"){$e.warn(`Supplied value for single component uniform ${s} is not a number: ${a}`)();continue}g[d]=Number(a)}else{if(!Op(a)){$e.warn(`Supplied value for multi component / array uniform ${s} is not a numeric array: ${a}`)();continue}g.set(a,d)}}return new Uint8Array(r)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function qV(t,e,n=16){if(t!==e)return!1;const r=t,i=e;if(!Op(r))return!1;if(Op(i)&&r.length===i.length){for(let s=0;s<r.length;++s)if(i[s]!==r[s])return!1}return!0}function XV(t){return Op(t)?t.slice():t}class YV{constructor(e){U(this,"name");U(this,"uniforms",{});U(this,"modifiedUniforms",{});U(this,"modified",!0);U(this,"bindingLayout",{});U(this,"needsRedraw","initialized");var n;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const r=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!r)throw new Error(e==null?void 0:e.name);const i=r;for(const s of i.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[n,r]of Object.entries(e))this._setUniform(n,r),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${r}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){qV(this.uniforms[e],n)||(this.uniforms[e]=XV(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class KV{constructor(e){U(this,"uniformBlocks",new Map);U(this,"uniformBufferLayouts",new Map);U(this,"uniformBuffers",new Map);for(const[n,r]of Object.entries(e)){const i=n,s=new WV(r.uniformTypes||{});this.uniformBufferLayouts.set(i,s);const a=new YV({name:n});a.setUniforms(r.defaultUniforms||{}),this.uniformBlocks.set(i,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var n;for(const[r,i]of Object.entries(e))(n=this.uniformBlocks.get(r))==null||n.setUniforms(i);this.updateUniformBuffers()}getUniformBufferByteLength(e){var n;return((n=this.uniformBufferLayouts.get(e))==null?void 0:n.byteLength)||0}getUniformBufferData(e){var r,i;const n=((r=this.uniformBlocks.get(e))==null?void 0:r.getAllUniforms())||{};return(i=this.uniformBufferLayouts.get(e))==null?void 0:i.getData(n)}createUniformBuffer(e,n,r){r&&this.setUniforms(r);const i=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:xn.UNIFORM|xn.COPY_DST,byteLength:i}),a=this.getUniformBufferData(n);return s.write(a),s}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const r=this.getUniformBufferByteLength(n),i=e.createBuffer({usage:xn.UNIFORM|xn.COPY_DST,byteLength:r});this.uniformBuffers.set(n,i)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const r=this.updateUniformBuffer(n);e||(e=r)}return e&&$e.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var s;const n=this.uniformBlocks.get(e);let r=this.uniformBuffers.get(e),i=!1;if(r&&(n!=null&&n.needsRedraw)){i||(i=n.needsRedraw);const a=this.getUniformBufferData(e);r=this.uniformBuffers.get(e),r==null||r.write(a);const c=(s=this.uniformBlocks.get(e))==null?void 0:s.getAllUniforms();$e.log(4,`Writing to uniform buffer ${String(e)}`,a,c)()}return i}}function aM(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function lM(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function QV(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const r=e;let i=aM(t);if(i==="uint8"&&n&&r===1)return"unorm8-webgl";if(i==="uint8"&&n&&r===3)return"unorm8x3-webgl";if(i==="uint8"||i==="sint8"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}if(i==="uint16"||i==="sint16"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}return r===1?i:`${i}x${r}`}class Eb{constructor(e){U(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(n=>n.name===e)||null}getAttributeNamesForBuffer(e){var n;return e.attributes?(n=e.attributes)==null?void 0:n.map(r=>r.attribute):[e.name]}mergeBufferLayouts(e,n){const r=[...e];for(const i of n){const s=r.findIndex(a=>a.name===i.name);s<0?r.push(i):r[s]=i}return r}getBufferIndex(e){const n=this.bufferLayouts.findIndex(r=>r.name===e);return n===-1&&$e.warn(`BufferLayout: Missing buffer for "${e}".`)(),n}}function ZV(t,e){const n=Object.fromEntries(t.attributes.map(i=>[i.name,i.location])),r=e.slice();return r.sort((i,s)=>{const a=i.attributes?i.attributes.map(d=>d.attribute):[i.name],c=s.attributes?s.attributes.map(d=>d.attribute):[s.name],u=Math.min(...a.map(d=>n[d])),h=Math.min(...c.map(d=>n[d]));return u-h}),r}class xi{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class WT{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Uo extends xi{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Wo extends xi{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class o0 extends xi{constructor(e,n,r){super(e,r),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class Wa extends xi{constructor(e,n,r,i){super(e,r),this.format=n,this.access=i}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}var Ao;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(Ao||(Ao={}));class Nd{constructor(e,n,r,i,s,a,c){this.name=e,this.type=n,this.group=r,this.binding=i,this.attributes=s,this.resourceType=a,this.access=c}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class GV{constructor(e,n){this.name=e,this.type=n}}class JV{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i,this.interpolation=null}}class qT{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i}}class e9{constructor(e,n,r,i){this.name=e,this.type=n,this.attributes=r,this.id=i}}class t9{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r}}class n9{constructor(e,n=null,r){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n,this.attributes=r}}class r9{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}const cM=new Float32Array(1),i9=new Int32Array(cM.buffer),vr=new Uint16Array(1);function s9(t){cM[0]=t;const e=i9[0],n=e>>31&1;let r=e>>23&255,i=8388607&e;if(r===255)return vr[0]=n<<15|31744|(i!==0?512:0),vr[0];if(r===0){if(i===0)return vr[0]=n<<15,vr[0];i|=8388608;let s=113;for(;!(8388608&i);)i<<=1,s--;return r=127-s,i&=8388607,r>0?(i=(i>>126-r)+(i>>127-r&1),vr[0]=n<<15|r<<10|i>>13,vr[0]):(vr[0]=n<<15,vr[0])}return r=r-127+15,r>=31?(vr[0]=n<<15|31744,vr[0]):r<=0?r<-10?(vr[0]=n<<15,vr[0]):(i=(8388608|i)>>1-r,vr[0]=n<<15|i>>13,vr[0]):(i>>=13,vr[0]=n<<15|r<<10|i,vr[0])}const zv=new Uint32Array(1),uM=new Float32Array(zv.buffer,0,1);function XT(t){const e=112+(t>>6&31)<<23|(63&t)<<17;return zv[0]=e,uM[0]}function o9(t,e,n,r,i,s,a,c,u){const h=r*(a>>=i)*(s>>=i)+n*a+e*c;switch(u){case"r8unorm":return[$t(t,h,"8unorm",1)[0]];case"r8snorm":return[$t(t,h,"8snorm",1)[0]];case"r8uint":return[$t(t,h,"8uint",1)[0]];case"r8sint":return[$t(t,h,"8sint",1)[0]];case"rg8unorm":{const d=$t(t,h,"8unorm",2);return[d[0],d[1]]}case"rg8snorm":{const d=$t(t,h,"8snorm",2);return[d[0],d[1]]}case"rg8uint":{const d=$t(t,h,"8uint",2);return[d[0],d[1]]}case"rg8sint":{const d=$t(t,h,"8sint",2);return[d[0],d[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const d=$t(t,h,"8unorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8snorm":{const d=$t(t,h,"8snorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8uint":{const d=$t(t,h,"8uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba8sint":{const d=$t(t,h,"8sint",4);return[d[0],d[1],d[2],d[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const d=$t(t,h,"8unorm",4);return[d[2],d[1],d[0],d[3]]}case"r16uint":return[$t(t,h,"16uint",1)[0]];case"r16sint":return[$t(t,h,"16sint",1)[0]];case"r16float":return[$t(t,h,"16float",1)[0]];case"rg16uint":{const d=$t(t,h,"16uint",2);return[d[0],d[1]]}case"rg16sint":{const d=$t(t,h,"16sint",2);return[d[0],d[1]]}case"rg16float":{const d=$t(t,h,"16float",2);return[d[0],d[1]]}case"rgba16uint":{const d=$t(t,h,"16uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16sint":{const d=$t(t,h,"16sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16float":{const d=$t(t,h,"16float",4);return[d[0],d[1],d[2],d[3]]}case"r32uint":return[$t(t,h,"32uint",1)[0]];case"r32sint":return[$t(t,h,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[$t(t,h,"32float",1)[0]];case"rg32uint":{const d=$t(t,h,"32uint",2);return[d[0],d[1]]}case"rg32sint":{const d=$t(t,h,"32sint",2);return[d[0],d[1]]}case"rg32float":{const d=$t(t,h,"32float",2);return[d[0],d[1]]}case"rgba32uint":{const d=$t(t,h,"32uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32sint":{const d=$t(t,h,"32sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32float":{const d=$t(t,h,"32float",4);return[d[0],d[1],d[2],d[3]]}case"rg11b10ufloat":{const d=new Uint32Array(t.buffer,h,1)[0],g=(4192256&d)>>11,b=(4290772992&d)>>22;return[XT(2047&d),XT(g),function(S){const R=112+(S>>5&31)<<23|(31&S)<<18;return zv[0]=R,uM[0]}(b),1]}}return null}function $t(t,e,n,r){const i=[0,0,0,0];for(let h=0;h<r;++h)switch(n){case"8unorm":i[h]=t[e]/255,e++;break;case"8snorm":i[h]=t[e]/255*2-1,e++;break;case"8uint":i[h]=t[e],e++;break;case"8sint":i[h]=t[e]-127,e++;break;case"16uint":i[h]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":i[h]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":i[h]=(s=t[e]|t[e+1]<<8,a=void 0,c=void 0,u=void 0,a=(32768&s)>>15,u=1023&s,(c=(31744&s)>>10)==0?(a?-1:1)*Math.pow(2,-14)*(u/Math.pow(2,10)):c==31?u?NaN:1/0*(a?-1:1):(a?-1:1)*Math.pow(2,c-15)*(1+u/Math.pow(2,10))),e+=2;break;case"32uint":case"32sint":i[h]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":i[h]=new Float32Array(t.buffer,e,1)[0],e+=4}var s,a,c,u;return i}function Xt(t,e,n,r,i){for(let s=0;s<r;++s)switch(n){case"8unorm":t[e]=255*i[s],e++;break;case"8snorm":t[e]=.5*(i[s]+1)*255,e++;break;case"8uint":t[e]=i[s],e++;break;case"8sint":t[e]=i[s]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=i[s],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=i[s],e+=2;break;case"16float":{const a=s9(i[s]);new Uint16Array(t.buffer,e,1)[0]=a,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=i[s],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=i[s],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=i[s],e+=4}return i}const Ab={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Ai{constructor(){this.id=Ai._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,n){if(e){n(Pp.instance);for(const r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(Dp.instance)}}constEvaluate(e,n){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Ai._id=0;class Pp extends Ai{}Pp.instance=new Pp;class Dp extends Ai{}Dp.instance=new Dp;const fM=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class wn extends Ai{constructor(){super()}}class If extends wn{constructor(e,n,r,i,s,a){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=i,this.startLine=s,this.endLine=a}get astNodeType(){return"function"}search(e){if(this.attributes)for(const n of this.attributes)e(n);e(this);for(const n of this.args)e(n);this.searchBlock(this.body,e)}}class a9 extends wn{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class hM extends wn{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class a0 extends wn{constructor(e,n){super(),this.body=e,this.loopId=n}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class dM extends wn{constructor(e,n,r,i){super(),this.init=e,this.condition=n,this.increment=r,this.body=i}get astNodeType(){return"for"}search(e){var n,r,i;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(i=this.increment)===null||i===void 0||i.search(e),this.searchBlock(this.body,e)}}class Us extends wn{constructor(e,n,r,i,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class Vv extends wn{constructor(e,n,r){super(),this.attributes=null,this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class yf extends wn{constructor(e,n,r,i,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class Jd extends wn{constructor(e,n,r,i,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"const"}constEvaluate(e,n){return this.value.constEvaluate(e,n)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var tc,cf,me,le;(t=>{t.increment="++",t.decrement="--"})(tc||(tc={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}})(tc||(tc={}));class pM extends wn{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(cf||(cf={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(cf||(cf={}));class gM extends wn{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class $v extends wn{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}isBuiltin(){return fM.has(this.name)}search(e){for(const n of this.args)n.search(e);e(this)}}class mM extends wn{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class yM extends wn{constructor(e,n){super(),this.condition=e,this.cases=n}get astNodeType(){return"switch"}search(e){e(this);for(const n of this.cases)n.search(e)}}class bM extends wn{constructor(e,n,r,i){super(),this.condition=e,this.body=n,this.elseif=r,this.else=i}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class _M extends wn{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class l9 extends wn{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class c9 extends wn{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class vM extends wn{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class Hv extends wn{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class u9 extends wn{constructor(){super()}get astNodeType(){return"discard"}}class xM extends wn{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class wM extends wn{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}let Fe=class ep extends wn{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const i=ep._priority.get(n.name);ep._priority.get(e[r].name)<i&&(n=e[r])}return n.name==="x32"?ep.i32:n}getTypeName(){return this.name}};Fe.x32=new Fe("x32"),Fe.f32=new Fe("f32"),Fe.i32=new Fe("i32"),Fe.u32=new Fe("u32"),Fe.f16=new Fe("f16"),Fe.bool=new Fe("bool"),Fe.void=new Fe("void"),Fe._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class YT extends Fe{constructor(e){super(e)}}class Ps extends Fe{constructor(e,n,r,i){super(e),this.members=n,this.startLine=r,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}search(e){for(const n of this.members)e(n)}}class de extends Fe{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}de.vec2f=new de("vec2",Fe.f32,null),de.vec3f=new de("vec3",Fe.f32,null),de.vec4f=new de("vec4",Fe.f32,null),de.vec2i=new de("vec2",Fe.i32,null),de.vec3i=new de("vec3",Fe.i32,null),de.vec4i=new de("vec4",Fe.i32,null),de.vec2u=new de("vec2",Fe.u32,null),de.vec3u=new de("vec3",Fe.u32,null),de.vec4u=new de("vec4",Fe.u32,null),de.vec2h=new de("vec2",Fe.f16,null),de.vec3h=new de("vec3",Fe.f16,null),de.vec4h=new de("vec4",Fe.f16,null),de.vec2b=new de("vec2",Fe.bool,null),de.vec3b=new de("vec3",Fe.bool,null),de.vec4b=new de("vec4",Fe.bool,null),de.mat2x2f=new de("mat2x2",Fe.f32,null),de.mat2x3f=new de("mat2x3",Fe.f32,null),de.mat2x4f=new de("mat2x4",Fe.f32,null),de.mat3x2f=new de("mat3x2",Fe.f32,null),de.mat3x3f=new de("mat3x3",Fe.f32,null),de.mat3x4f=new de("mat3x4",Fe.f32,null),de.mat4x2f=new de("mat4x2",Fe.f32,null),de.mat4x3f=new de("mat4x3",Fe.f32,null),de.mat4x4f=new de("mat4x4",Fe.f32,null),de.mat2x2h=new de("mat2x2",Fe.f16,null),de.mat2x3h=new de("mat2x3",Fe.f16,null),de.mat2x4h=new de("mat2x4",Fe.f16,null),de.mat3x2h=new de("mat3x2",Fe.f16,null),de.mat3x3h=new de("mat3x3",Fe.f16,null),de.mat3x4h=new de("mat3x4",Fe.f16,null),de.mat4x2h=new de("mat4x2",Fe.f16,null),de.mat4x3h=new de("mat4x3",Fe.f16,null),de.mat4x4h=new de("mat4x4",Fe.f16,null),de.mat2x2i=new de("mat2x2",Fe.i32,null),de.mat2x3i=new de("mat2x3",Fe.i32,null),de.mat2x4i=new de("mat2x4",Fe.i32,null),de.mat3x2i=new de("mat3x2",Fe.i32,null),de.mat3x3i=new de("mat3x3",Fe.i32,null),de.mat3x4i=new de("mat3x4",Fe.i32,null),de.mat4x2i=new de("mat4x2",Fe.i32,null),de.mat4x3i=new de("mat4x3",Fe.i32,null),de.mat4x4i=new de("mat4x4",Fe.i32,null),de.mat2x2u=new de("mat2x2",Fe.u32,null),de.mat2x3u=new de("mat2x3",Fe.u32,null),de.mat2x4u=new de("mat2x4",Fe.u32,null),de.mat3x2u=new de("mat3x2",Fe.u32,null),de.mat3x3u=new de("mat3x3",Fe.u32,null),de.mat3x4u=new de("mat3x4",Fe.u32,null),de.mat4x2u=new de("mat4x2",Fe.u32,null),de.mat4x3u=new de("mat4x3",Fe.u32,null),de.mat4x4u=new de("mat4x4",Fe.u32,null);class tp extends Fe{constructor(e,n,r,i){super(e),this.storage=n,this.type=r,this.access=i}get astNodeType(){return"pointer"}}class bf extends Fe{constructor(e,n,r,i){super(e),this.attributes=n,this.format=r,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class uf extends Fe{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class qi extends Ai{constructor(){super(),this.postfix=null}}class qa extends qi{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class rs extends qi{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const n of this.args)n.search(e)}constEvaluate(e,n){return n&&(n[0]=this.type),e.evalExpression(this,e.context)}}class Wv extends qi{constructor(e,n){super(),this.cachedReturnValue=null,this.name=e,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return fM.has(this.name)}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){for(const n of this.args)n.search(e);e(this)}}class ai extends qi{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,n){return e.evalExpression(this,e.context)}}class SM extends qi{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(e,n){if(this.initializer){const r=e.evalExpression(this.initializer,e.context);return r!==null&&this.postfix?r.getSubData(e,this.postfix,e.context):r}return null}search(e){this.initializer.search(e)}}class Zn extends qi{constructor(e,n){super(),this.value=e,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(e,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof ae}get isVector(){return this.value instanceof X||this.value instanceof gt}get scalarValue(){return this.value instanceof ae?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof X||this.value instanceof gt?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class TM extends qi{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class kc extends qi{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class EM extends qi{constructor(){super()}}class $n extends EM{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Pi extends EM{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}_getPromotedType(e,n){return e.name===n.name?e:e.name==="f32"||n.name==="f32"?Fe.f32:e.name==="u32"||n.name==="u32"?Fe.u32:Fe.i32}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class AM extends Ai{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class np extends qi{constructor(){super()}get astNodeType(){return"default"}}class RM extends AM{constructor(e,n){super(n),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class CM extends AM{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class KT extends Ai{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class f9 extends Ai{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class QT extends Ai{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}class kM extends Ai{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}class Ei{constructor(e,n){this.parent=null,this.typeInfo=e,this.parent=n,this.id=Ei._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,n,r,i){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,n,r){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Ei._id=0;class l0 extends Ei{constructor(){super(new xi("void",null),null)}toString(){return"void"}}l0.void=new l0;class Wl extends Ei{constructor(e){super(new o0("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,n,r,i){this.reference.setDataValue(e,n,r,i)}getSubData(e,n,r){return n?this.reference.getSubData(e,n,r):this}toString(){return`&${this.reference.toString()}`}}class ae extends Ei{constructor(e,n,r=null){super(n,r),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!=0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new ae(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new ae(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new ae(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,n,r,i){if(r)return void console.error("SetDataValue: Scalar data does not support postfix",r);if(!(n instanceof ae))return void console.error("SetDataValue: Invalid value",n);let s=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?s=Math.floor(s):this.typeInfo.name==="bool"&&(s=s?1:0),this.data[0]=s}getSubData(e,n,r){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}}function h9(t,e,n){const r=e.length;return r===2?n==="f32"?new X(new Float32Array(e),t.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new X(new Int32Array(e),t.getTypeInfo("vec2i")):n==="u32"?new X(new Uint32Array(e),t.getTypeInfo("vec2u")):n==="f16"?new X(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):r===3?n==="f32"?new X(new Float32Array(e),t.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new X(new Int32Array(e),t.getTypeInfo("vec3i")):n==="u32"?new X(new Uint32Array(e),t.getTypeInfo("vec3u")):n==="f16"?new X(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):r===4?n==="f32"?new X(new Float32Array(e),t.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new X(new Int32Array(e),t.getTypeInfo("vec4i")):n==="u32"?new X(new Uint32Array(e),t.getTypeInfo("vec4u")):n==="f16"?new X(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}class X extends Ei{constructor(e,n,r=null){if(super(n,r),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const i=this.typeInfo.name;i==="vec2f"||i==="vec3f"||i==="vec4f"?this.data=new Float32Array(e):i==="vec2i"||i==="vec3i"||i==="vec4i"?this.data=new Int32Array(e):i==="vec2u"||i==="vec3u"||i==="vec4u"?this.data=new Uint32Array(e):i==="vec2h"||i==="vec3h"||i==="vec4h"?this.data=new Float32Array(e):i==="vec2b"||i==="vec3b"||i==="vec4b"?this.data=new Int32Array(e):i==="vec2"||i==="vec3"||i==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${i}`)}}clone(){if(this.data instanceof Float32Array)return new X(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new X(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new X(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,n,r,i){r instanceof qa?console.error("TODO: Set vector postfix"):n instanceof X?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;let i=e.getTypeInfo("f32");if(this.typeInfo instanceof Wa)i=this.typeInfo.format||i;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?i=e.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?i=e.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?i=e.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?i=e.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?i=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let s=this;for(;n!==null&&s!==null;){if(n instanceof kc){const a=n.index;let c=-1;if(a instanceof Zn){if(!(a.value instanceof ae))return console.error(`GetSubData: Invalid array index ${a.value}`),null;c=a.value.value}else{const u=e.evalExpression(a,r);if(!(u instanceof ae))return console.error("GetSubData: Unknown index type",a),null;c=u.value}if(c<0||c>=s.data.length)return console.error("GetSubData: Index out of range",c),null;if(s.data instanceof Float32Array){const u=new Float32Array(s.data.buffer,s.data.byteOffset+4*c,1);return new ae(u,i)}if(s.data instanceof Int32Array){const u=new Int32Array(s.data.buffer,s.data.byteOffset+4*c,1);return new ae(u,i)}if(s.data instanceof Uint32Array){const u=new Uint32Array(s.data.buffer,s.data.byteOffset+4*c,1);return new ae(u,i)}throw"GetSubData: Invalid data type"}if(!(n instanceof qa))return console.error("GetSubData: Unknown postfix",n),null;{const a=n.value.toLowerCase();if(a.length===1){let u=0;if(a==="x"||a==="r")u=0;else if(a==="y"||a==="g")u=1;else if(a==="z"||a==="b")u=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;u=3}if(this.data instanceof Float32Array){let h=new Float32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new ae(h,i,this)}if(this.data instanceof Int32Array){let h=new Int32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new ae(h,i,this)}if(this.data instanceof Uint32Array){let h=new Uint32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new ae(h,i,this)}}const c=[];for(const u of a)u==="x"||u==="r"?c.push(this.data[0]):u==="y"||u==="g"?c.push(this.data[1]):u==="z"||u==="b"?c.push(this.data[2]):u==="w"||u==="a"?c.push(this.data[3]):console.error(`GetDataValue: Unknown member ${u}`);s=h9(e,c,i.name)}n=n.postfix}return s}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class gt extends Ei{constructor(e,n,r=null){super(n,r),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new gt(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,n,r,i){r instanceof qa?console.error("TODO: Set matrix postfix"):n instanceof gt?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;const i=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof Wa)this.typeInfo.format;else if(i.endsWith("f"))e.getTypeInfo("f32");else if(i.endsWith("i"))e.getTypeInfo("i32");else if(i.endsWith("u"))e.getTypeInfo("u32");else{if(!i.endsWith("h"))return console.error(`GetDataValue: Unknown type ${i}`),null;e.getTypeInfo("f16")}if(n instanceof kc){const s=n.index;let a=-1;if(s instanceof Zn){if(!(s.value instanceof ae))return console.error(`GetDataValue: Invalid array index ${s.value}`),null;a=s.value.value}else{const h=e.evalExpression(s,r);if(!(h instanceof ae))return console.error("GetDataValue: Unknown index type",s),null;a=h.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const c=i.endsWith("h")?"h":"f";let u;if(i==="mat2x2"||i==="mat2x2f"||i==="mat2x2h"||i==="mat3x2"||i==="mat3x2f"||i==="mat3x2h"||i==="mat4x2"||i==="mat4x2f"||i==="mat4x2h")u=new X(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${c}`));else if(i==="mat2x3"||i==="mat2x3f"||i==="mat2x3h"||i==="mat3x3"||i==="mat3x3f"||i==="mat3x3h"||i==="mat4x3"||i==="mat4x3f"||i==="mat4x3h")u=new X(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${c}`));else{if(i!=="mat2x4"&&i!=="mat2x4f"&&i!=="mat2x4h"&&i!=="mat3x4"&&i!=="mat3x4f"&&i!=="mat3x4h"&&i!=="mat4x4"&&i!=="mat4x4f"&&i!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${i}`),null;u=new X(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${c}`))}return n.postfix?u.getSubData(e,n.postfix,r):u}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class Mn extends Ei{constructor(e,n,r=0,i=null){super(n,i),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=r}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Mn(e.buffer,this.typeInfo,0,null)}setDataValue(e,n,r,i){if(n===null)return void console.log("setDataValue: NULL data.");let s=this.offset,a=this.typeInfo;for(;r;){if(r instanceof kc)if(a instanceof Wo){const c=r.index;if(c instanceof Zn){if(!(c.value instanceof ae))return void console.error(`SetDataValue: Invalid index type ${c.value}`);s+=c.value.value*a.stride}else{const u=e.evalExpression(c,i);if(!(u instanceof ae))return void console.error("SetDataValue: Unknown index type",c);s+=u.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(r instanceof qa))return void console.error("SetDataValue: Unknown postfix type",r);{const c=r.value;if(a instanceof Uo){let u=!1;for(const h of a.members)if(h.name===c){s+=h.offset,a=h.type,u=!0;break}if(!u)return void console.error(`SetDataValue: Member ${c} not found`)}else if(a instanceof xi){const u=a.getTypeName();let h=0;if(c==="x"||c==="r")h=0;else if(c==="y"||c==="g")h=1;else if(c==="z"||c==="b")h=2;else{if(c!=="w"&&c!=="a")return void console.error(`SetDataValue: Unknown member ${c}`);h=3}if(!(n instanceof ae))return void console.error("SetDataValue: Invalid value",n);const d=n.value;return u==="vec2f"?void(new Float32Array(this.buffer,s,2)[h]=d):u==="vec3f"?void(new Float32Array(this.buffer,s,3)[h]=d):u==="vec4f"?void(new Float32Array(this.buffer,s,4)[h]=d):u==="vec2i"?void(new Int32Array(this.buffer,s,2)[h]=d):u==="vec3i"?void(new Int32Array(this.buffer,s,3)[h]=d):u==="vec4i"?void(new Int32Array(this.buffer,s,4)[h]=d):u==="vec2u"?void(new Uint32Array(this.buffer,s,2)[h]=d):u==="vec3u"?void(new Uint32Array(this.buffer,s,3)[h]=d):u==="vec4u"?void(new Uint32Array(this.buffer,s,4)[h]=d):void console.error(`SetDataValue: Type ${u} is not a struct`)}}}r=r.postfix}this.setData(e,n,a,s,i)}setData(e,n,r,i,s){const a=r.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool")if(a!=="vec2f"&&a!=="vec2h")if(a!=="vec3f"&&a!=="vec3h")if(a!=="vec4f"&&a!=="vec4h")if(a!=="vec2i")if(a!=="vec3i")if(a!=="vec4i")if(a!=="vec2u")if(a!=="vec3u")if(a!=="vec4u")if(a!=="vec2b")if(a!=="vec3b")if(a!=="vec4b")if(a!=="mat2x2f"&&a!=="mat2x2h")if(a!=="mat2x3f"&&a!=="mat2x3h")if(a!=="mat2x4f"&&a!=="mat2x4h")if(a!=="mat3x2f"&&a!=="mat3x2h")if(a!=="mat3x3f"&&a!=="mat3x3h")if(a!=="mat3x4f"&&a!=="mat3x4h")if(a!=="mat4x2f"&&a!=="mat4x2h")if(a!=="mat4x3f"&&a!=="mat4x3h")if(a!=="mat4x4f"&&a!=="mat4x4h")if(n instanceof Mn){if(r===n.typeInfo)return void new Uint8Array(this.buffer,i,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",a,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`);else{const c=new Float32Array(this.buffer,i,16);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7],c[8]=n.data[8],c[9]=n.data[9],c[10]=n.data[10],c[11]=n.data[11],c[12]=n.data[12],c[13]=n.data[13],c[14]=n.data[14],c[15]=n.data[15]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15])}else{const c=new Float32Array(this.buffer,i,12);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7],c[8]=n.data[8],c[9]=n.data[9],c[10]=n.data[10],c[11]=n.data[11]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11])}else{const c=new Float32Array(this.buffer,i,8);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7])}else{const c=new Float32Array(this.buffer,i,12);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7],c[8]=n.data[8],c[9]=n.data[9],c[10]=n.data[10],c[11]=n.data[11]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11])}else{const c=new Float32Array(this.buffer,i,9);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7],c[8]=n.data[8]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[8]=n[8])}else{const c=new Float32Array(this.buffer,i,6);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5])}else{const c=new Float32Array(this.buffer,i,8);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5],c[6]=n.data[6],c[7]=n.data[7]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7])}else{const c=new Float32Array(this.buffer,i,6);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3],c[4]=n.data[4],c[5]=n.data[5]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[4]=n[4],c[5]=n[5])}else{const c=new Float32Array(this.buffer,i,4);n instanceof gt?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3])}else{const c=new Uint32Array(this.buffer,i,4);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3])}else{const c=new Uint32Array(this.buffer,i,3);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2]):(c[0]=n[0],c[1]=n[1],c[2]=n[2])}else{const c=new Uint32Array(this.buffer,i,2);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1]):(c[0]=n[0],c[1]=n[1])}else{const c=new Uint32Array(this.buffer,i,4);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3])}else{const c=new Uint32Array(this.buffer,i,3);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2]):(c[0]=n[0],c[1]=n[1],c[2]=n[2])}else{const c=new Uint32Array(this.buffer,i,2);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1]):(c[0]=n[0],c[1]=n[1])}else{const c=new Int32Array(this.buffer,i,4);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3])}else{const c=new Int32Array(this.buffer,i,3);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2]):(c[0]=n[0],c[1]=n[1],c[2]=n[2])}else{const c=new Int32Array(this.buffer,i,2);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1]):(c[0]=n[0],c[1]=n[1])}else{const c=new Float32Array(this.buffer,i,4);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2],c[3]=n.data[3]):(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3])}else{const c=new Float32Array(this.buffer,i,3);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1],c[2]=n.data[2]):(c[0]=n[0],c[1]=n[1],c[2]=n[2])}else{const c=new Float32Array(this.buffer,i,2);n instanceof X?(c[0]=n.data[0],c[1]=n.data[1]):(c[0]=n[0],c[1]=n[1])}else n instanceof ae&&(new Int32Array(this.buffer,i,1)[0]=n.value);else n instanceof ae&&(new Uint32Array(this.buffer,i,1)[0]=n.value);else n instanceof ae&&(new Int32Array(this.buffer,i,1)[0]=n.value);else n instanceof ae&&(new Float32Array(this.buffer,i,1)[0]=n.value)}getSubData(e,n,r){var i,s,a;if(n===null)return this;let c=this.offset,u=this.typeInfo;for(;n;){if(n instanceof kc){const d=n.index,g=d instanceof qi?e.evalExpression(d,r):d;let b=0;if(g instanceof ae?b=g.value:typeof g=="number"?b=g:console.error("GetDataValue: Invalid index type",d),u instanceof Wo)c+=b*u.stride,u=u.format;else{const S=u.getTypeName();S==="mat4x4"||S==="mat4x4f"||S==="mat4x4h"?(c+=16*b,u=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${u.getTypeName()} is not an array`)}}else{if(!(n instanceof qa))return console.error("GetDataValue: Unknown postfix type",n),null;{const d=n.value;if(u instanceof Uo){let g=!1;for(const b of u.members)if(b.name===d){c+=b.offset,u=b.type,g=!0;break}if(!g)return console.error(`GetDataValue: Member ${d} not found`),null}else if(u instanceof xi){const g=u.getTypeName();if(g==="vec2f"||g==="vec3f"||g==="vec4f"||g==="vec2i"||g==="vec3i"||g==="vec4i"||g==="vec2u"||g==="vec3u"||g==="vec4u"||g==="vec2b"||g==="vec3b"||g==="vec4b"||g==="vec2h"||g==="vec3h"||g==="vec4h"||g==="vec2"||g==="vec3"||g==="vec4"){if(d.length>0&&d.length<5){let b="f";const S=[];for(let R=0;R<d.length;++R){const A=d[R].toLowerCase();let C=0;if(A==="x"||A==="r")C=0;else if(A==="y"||A==="g")C=1;else if(A==="z"||A==="b")C=2;else{if(A!=="w"&&A!=="a")return console.error(`Unknown member ${d}`),null;C=3}if(d.length===1){if(g.endsWith("f"))return this.buffer.byteLength<c+4*C+4?(console.log("Insufficient buffer data"),null):new ae(new Float32Array(this.buffer,c+4*C,1),e.getTypeInfo("f32"),this);if(g.endsWith("h"))return new ae(new Float32Array(this.buffer,c+4*C,1),e.getTypeInfo("f16"),this);if(g.endsWith("i"))return new ae(new Int32Array(this.buffer,c+4*C,1),e.getTypeInfo("i32"),this);if(g.endsWith("b"))return new ae(new Int32Array(this.buffer,c+4*C,1),e.getTypeInfo("bool"),this);if(g.endsWith("u"))return new ae(new Uint32Array(this.buffer,c+4*C,1),e.getTypeInfo("i32"),this)}if(g==="vec2f")S.push(new Float32Array(this.buffer,c,2)[C]);else if(g==="vec3f"){if(c+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const k=new Float32Array(this.buffer,c,3);S.push(k[C])}else if(g==="vec4f")S.push(new Float32Array(this.buffer,c,4)[C]);else if(g==="vec2i")b="i",S.push(new Int32Array(this.buffer,c,2)[C]);else if(g==="vec3i")b="i",S.push(new Int32Array(this.buffer,c,3)[C]);else if(g==="vec4i")b="i",S.push(new Int32Array(this.buffer,c,4)[C]);else if(g==="vec2u"){b="u";const k=new Uint32Array(this.buffer,c,2);S.push(k[C])}else g==="vec3u"?(b="u",S.push(new Uint32Array(this.buffer,c,3)[C])):g==="vec4u"&&(b="u",S.push(new Uint32Array(this.buffer,c,4)[C]))}return S.length===2?u=e.getTypeInfo(`vec2${b}`):S.length===3?u=e.getTypeInfo(`vec3${b}`):S.length===4?u=e.getTypeInfo(`vec4${b}`):console.error(`GetDataValue: Invalid vector length ${S.length}`),new X(S,u,null)}return console.error(`GetDataValue: Unknown member ${d}`),null}return console.error(`GetDataValue: Type ${g} is not a struct`),null}}}n=n.postfix}const h=u.getTypeName();return h==="f32"?new ae(new Float32Array(this.buffer,c,1),u,this):h==="i32"?new ae(new Int32Array(this.buffer,c,1),u,this):h==="u32"?new ae(new Uint32Array(this.buffer,c,1),u,this):h==="vec2f"?new X(new Float32Array(this.buffer,c,2),u,this):h==="vec3f"?new X(new Float32Array(this.buffer,c,3),u,this):h==="vec4f"?new X(new Float32Array(this.buffer,c,4),u,this):h==="vec2i"?new X(new Int32Array(this.buffer,c,2),u,this):h==="vec3i"?new X(new Int32Array(this.buffer,c,3),u,this):h==="vec4i"?new X(new Int32Array(this.buffer,c,4),u,this):h==="vec2u"?new X(new Uint32Array(this.buffer,c,2),u,this):h==="vec3u"?new X(new Uint32Array(this.buffer,c,3),u,this):h==="vec4u"?new X(new Uint32Array(this.buffer,c,4),u,this):u instanceof Wa&&u.name==="atomic"?((i=u.format)===null||i===void 0?void 0:i.name)==="u32"?new ae(new Uint32Array(this.buffer,c,1)[0],u.format,this):((s=u.format)===null||s===void 0?void 0:s.name)==="i32"?new ae(new Int32Array(this.buffer,c,1)[0],u.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=u.format)===null||a===void 0?void 0:a.name}`),null):new Mn(this.buffer,u,c,this)}toString(){let e="";if(this.typeInfo instanceof Wo)if(this.typeInfo.format.name==="f32"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="i32"){const n=new Int32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="u32"){const n=new Uint32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="vec2f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}]`;for(let r=1;r<n.length/2;++r)e+=`, [${n[2*r]}, ${n[2*r+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}, ${n[r+3]}]`}else e="[...]";else this.typeInfo instanceof Uo?e+="{...}":e="[...]";return e}}class Ds extends Ei{constructor(e,n,r,i){super(n,null),this.data=e,this.descriptor=r,this.view=i}clone(){return new Ds(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>0?(e=r[0])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.width)!==null&&n!==void 0?n:0}get height(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>1?(e=r[1])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>2?(e=r[2])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const n=[this.width,this.height,this.depthOrArrayLayers];for(let r=0;r<n.length;++r)n[r]=Math.max(1,n[r]>>e);return n}get texelByteSize(){const e=this.format,n=Ab[e];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,n=Ab[e];return!!n&&n.isDepthStencil}getGpuSize(){const e=this.format,n=Ab[e],r=this.width;if(!e||r<=0||!n)return-1;const i=this.height,s=this.depthOrArrayLayers,a=this.dimension;return r/n.blockWidth*(a==="1d"?1:i/n.blockHeight)*n.bytesPerBlock*s}getPixel(e,n,r=0,i=0){const s=this.texelByteSize,a=this.bytesPerRow,c=this.height,u=this.data[i];return o9(new Uint8Array(u),e,n,r,i,c,a,s,this.format)}setPixel(e,n,r,i,s){const a=this.texelByteSize,c=this.bytesPerRow,u=this.height,h=this.data[i];(function(d,g,b,S,R,A,C,k,P,M){const z=S*(C>>=R)*(A>>=R)+b*C+g*k;switch(P){case"r8unorm":return void Xt(d,z,"8unorm",1,M);case"r8snorm":return void Xt(d,z,"8snorm",1,M);case"r8uint":return void Xt(d,z,"8uint",1,M);case"r8sint":return void Xt(d,z,"8sint",1,M);case"rg8unorm":return void Xt(d,z,"8unorm",2,M);case"rg8snorm":return void Xt(d,z,"8snorm",2,M);case"rg8uint":return void Xt(d,z,"8uint",2,M);case"rg8sint":return void Xt(d,z,"8sint",2,M);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void Xt(d,z,"8unorm",4,M);case"rgba8snorm":return void Xt(d,z,"8snorm",4,M);case"rgba8uint":return void Xt(d,z,"8uint",4,M);case"rgba8sint":return void Xt(d,z,"8sint",4,M);case"r16uint":return void Xt(d,z,"16uint",1,M);case"r16sint":return void Xt(d,z,"16sint",1,M);case"r16float":return void Xt(d,z,"16float",1,M);case"rg16uint":return void Xt(d,z,"16uint",2,M);case"rg16sint":return void Xt(d,z,"16sint",2,M);case"rg16float":return void Xt(d,z,"16float",2,M);case"rgba16uint":return void Xt(d,z,"16uint",4,M);case"rgba16sint":return void Xt(d,z,"16sint",4,M);case"rgba16float":return void Xt(d,z,"16float",4,M);case"r32uint":return void Xt(d,z,"32uint",1,M);case"r32sint":return void Xt(d,z,"32sint",1,M);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void Xt(d,z,"32float",1,M);case"rg32uint":return void Xt(d,z,"32uint",2,M);case"rg32sint":return void Xt(d,z,"32sint",2,M);case"rg32float":return void Xt(d,z,"32float",2,M);case"rgba32uint":return void Xt(d,z,"32uint",4,M);case"rgba32sint":return void Xt(d,z,"32sint",4,M);case"rgba32float":return void Xt(d,z,"32float",4,M);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(h),e,n,r,i,u,c,a,this.format,s)}}(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(le||(le={}));class ce{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class W{}me=W,W.none=new ce("",le.reserved,""),W.eof=new ce("EOF",le.token,""),W.reserved={asm:new ce("asm",le.reserved,"asm"),bf16:new ce("bf16",le.reserved,"bf16"),do:new ce("do",le.reserved,"do"),enum:new ce("enum",le.reserved,"enum"),f16:new ce("f16",le.reserved,"f16"),f64:new ce("f64",le.reserved,"f64"),handle:new ce("handle",le.reserved,"handle"),i8:new ce("i8",le.reserved,"i8"),i16:new ce("i16",le.reserved,"i16"),i64:new ce("i64",le.reserved,"i64"),mat:new ce("mat",le.reserved,"mat"),premerge:new ce("premerge",le.reserved,"premerge"),regardless:new ce("regardless",le.reserved,"regardless"),typedef:new ce("typedef",le.reserved,"typedef"),u8:new ce("u8",le.reserved,"u8"),u16:new ce("u16",le.reserved,"u16"),u64:new ce("u64",le.reserved,"u64"),unless:new ce("unless",le.reserved,"unless"),using:new ce("using",le.reserved,"using"),vec:new ce("vec",le.reserved,"vec"),void:new ce("void",le.reserved,"void")},W.keywords={array:new ce("array",le.keyword,"array"),atomic:new ce("atomic",le.keyword,"atomic"),bool:new ce("bool",le.keyword,"bool"),f32:new ce("f32",le.keyword,"f32"),i32:new ce("i32",le.keyword,"i32"),mat2x2:new ce("mat2x2",le.keyword,"mat2x2"),mat2x3:new ce("mat2x3",le.keyword,"mat2x3"),mat2x4:new ce("mat2x4",le.keyword,"mat2x4"),mat3x2:new ce("mat3x2",le.keyword,"mat3x2"),mat3x3:new ce("mat3x3",le.keyword,"mat3x3"),mat3x4:new ce("mat3x4",le.keyword,"mat3x4"),mat4x2:new ce("mat4x2",le.keyword,"mat4x2"),mat4x3:new ce("mat4x3",le.keyword,"mat4x3"),mat4x4:new ce("mat4x4",le.keyword,"mat4x4"),ptr:new ce("ptr",le.keyword,"ptr"),sampler:new ce("sampler",le.keyword,"sampler"),sampler_comparison:new ce("sampler_comparison",le.keyword,"sampler_comparison"),struct:new ce("struct",le.keyword,"struct"),texture_1d:new ce("texture_1d",le.keyword,"texture_1d"),texture_2d:new ce("texture_2d",le.keyword,"texture_2d"),texture_2d_array:new ce("texture_2d_array",le.keyword,"texture_2d_array"),texture_3d:new ce("texture_3d",le.keyword,"texture_3d"),texture_cube:new ce("texture_cube",le.keyword,"texture_cube"),texture_cube_array:new ce("texture_cube_array",le.keyword,"texture_cube_array"),texture_multisampled_2d:new ce("texture_multisampled_2d",le.keyword,"texture_multisampled_2d"),texture_storage_1d:new ce("texture_storage_1d",le.keyword,"texture_storage_1d"),texture_storage_2d:new ce("texture_storage_2d",le.keyword,"texture_storage_2d"),texture_storage_2d_array:new ce("texture_storage_2d_array",le.keyword,"texture_storage_2d_array"),texture_storage_3d:new ce("texture_storage_3d",le.keyword,"texture_storage_3d"),texture_depth_2d:new ce("texture_depth_2d",le.keyword,"texture_depth_2d"),texture_depth_2d_array:new ce("texture_depth_2d_array",le.keyword,"texture_depth_2d_array"),texture_depth_cube:new ce("texture_depth_cube",le.keyword,"texture_depth_cube"),texture_depth_cube_array:new ce("texture_depth_cube_array",le.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new ce("texture_depth_multisampled_2d",le.keyword,"texture_depth_multisampled_2d"),texture_external:new ce("texture_external",le.keyword,"texture_external"),u32:new ce("u32",le.keyword,"u32"),vec2:new ce("vec2",le.keyword,"vec2"),vec3:new ce("vec3",le.keyword,"vec3"),vec4:new ce("vec4",le.keyword,"vec4"),bitcast:new ce("bitcast",le.keyword,"bitcast"),block:new ce("block",le.keyword,"block"),break:new ce("break",le.keyword,"break"),case:new ce("case",le.keyword,"case"),continue:new ce("continue",le.keyword,"continue"),continuing:new ce("continuing",le.keyword,"continuing"),default:new ce("default",le.keyword,"default"),diagnostic:new ce("diagnostic",le.keyword,"diagnostic"),discard:new ce("discard",le.keyword,"discard"),else:new ce("else",le.keyword,"else"),enable:new ce("enable",le.keyword,"enable"),fallthrough:new ce("fallthrough",le.keyword,"fallthrough"),false:new ce("false",le.keyword,"false"),fn:new ce("fn",le.keyword,"fn"),for:new ce("for",le.keyword,"for"),function:new ce("function",le.keyword,"function"),if:new ce("if",le.keyword,"if"),let:new ce("let",le.keyword,"let"),const:new ce("const",le.keyword,"const"),loop:new ce("loop",le.keyword,"loop"),while:new ce("while",le.keyword,"while"),private:new ce("private",le.keyword,"private"),read:new ce("read",le.keyword,"read"),read_write:new ce("read_write",le.keyword,"read_write"),return:new ce("return",le.keyword,"return"),requires:new ce("requires",le.keyword,"requires"),storage:new ce("storage",le.keyword,"storage"),switch:new ce("switch",le.keyword,"switch"),true:new ce("true",le.keyword,"true"),alias:new ce("alias",le.keyword,"alias"),type:new ce("type",le.keyword,"type"),uniform:new ce("uniform",le.keyword,"uniform"),var:new ce("var",le.keyword,"var"),override:new ce("override",le.keyword,"override"),workgroup:new ce("workgroup",le.keyword,"workgroup"),write:new ce("write",le.keyword,"write"),r8unorm:new ce("r8unorm",le.keyword,"r8unorm"),r8snorm:new ce("r8snorm",le.keyword,"r8snorm"),r8uint:new ce("r8uint",le.keyword,"r8uint"),r8sint:new ce("r8sint",le.keyword,"r8sint"),r16uint:new ce("r16uint",le.keyword,"r16uint"),r16sint:new ce("r16sint",le.keyword,"r16sint"),r16float:new ce("r16float",le.keyword,"r16float"),rg8unorm:new ce("rg8unorm",le.keyword,"rg8unorm"),rg8snorm:new ce("rg8snorm",le.keyword,"rg8snorm"),rg8uint:new ce("rg8uint",le.keyword,"rg8uint"),rg8sint:new ce("rg8sint",le.keyword,"rg8sint"),r32uint:new ce("r32uint",le.keyword,"r32uint"),r32sint:new ce("r32sint",le.keyword,"r32sint"),r32float:new ce("r32float",le.keyword,"r32float"),rg16uint:new ce("rg16uint",le.keyword,"rg16uint"),rg16sint:new ce("rg16sint",le.keyword,"rg16sint"),rg16float:new ce("rg16float",le.keyword,"rg16float"),rgba8unorm:new ce("rgba8unorm",le.keyword,"rgba8unorm"),rgba8unorm_srgb:new ce("rgba8unorm_srgb",le.keyword,"rgba8unorm_srgb"),rgba8snorm:new ce("rgba8snorm",le.keyword,"rgba8snorm"),rgba8uint:new ce("rgba8uint",le.keyword,"rgba8uint"),rgba8sint:new ce("rgba8sint",le.keyword,"rgba8sint"),bgra8unorm:new ce("bgra8unorm",le.keyword,"bgra8unorm"),bgra8unorm_srgb:new ce("bgra8unorm_srgb",le.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new ce("rgb10a2unorm",le.keyword,"rgb10a2unorm"),rg11b10float:new ce("rg11b10float",le.keyword,"rg11b10float"),rg32uint:new ce("rg32uint",le.keyword,"rg32uint"),rg32sint:new ce("rg32sint",le.keyword,"rg32sint"),rg32float:new ce("rg32float",le.keyword,"rg32float"),rgba16uint:new ce("rgba16uint",le.keyword,"rgba16uint"),rgba16sint:new ce("rgba16sint",le.keyword,"rgba16sint"),rgba16float:new ce("rgba16float",le.keyword,"rgba16float"),rgba32uint:new ce("rgba32uint",le.keyword,"rgba32uint"),rgba32sint:new ce("rgba32sint",le.keyword,"rgba32sint"),rgba32float:new ce("rgba32float",le.keyword,"rgba32float"),static_assert:new ce("static_assert",le.keyword,"static_assert")},W.tokens={decimal_float_literal:new ce("decimal_float_literal",le.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new ce("hex_float_literal",le.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new ce("int_literal",le.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new ce("uint_literal",le.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new ce("name",le.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new ce("ident",le.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new ce("and",le.token,"&"),and_and:new ce("and_and",le.token,"&&"),arrow:new ce("arrow ",le.token,"->"),attr:new ce("attr",le.token,"@"),forward_slash:new ce("forward_slash",le.token,"/"),bang:new ce("bang",le.token,"!"),bracket_left:new ce("bracket_left",le.token,"["),bracket_right:new ce("bracket_right",le.token,"]"),brace_left:new ce("brace_left",le.token,"{"),brace_right:new ce("brace_right",le.token,"}"),colon:new ce("colon",le.token,":"),comma:new ce("comma",le.token,","),equal:new ce("equal",le.token,"="),equal_equal:new ce("equal_equal",le.token,"=="),not_equal:new ce("not_equal",le.token,"!="),greater_than:new ce("greater_than",le.token,">"),greater_than_equal:new ce("greater_than_equal",le.token,">="),shift_right:new ce("shift_right",le.token,">>"),less_than:new ce("less_than",le.token,"<"),less_than_equal:new ce("less_than_equal",le.token,"<="),shift_left:new ce("shift_left",le.token,"<<"),modulo:new ce("modulo",le.token,"%"),minus:new ce("minus",le.token,"-"),minus_minus:new ce("minus_minus",le.token,"--"),period:new ce("period",le.token,"."),plus:new ce("plus",le.token,"+"),plus_plus:new ce("plus_plus",le.token,"++"),or:new ce("or",le.token,"|"),or_or:new ce("or_or",le.token,"||"),paren_left:new ce("paren_left",le.token,"("),paren_right:new ce("paren_right",le.token,")"),semicolon:new ce("semicolon",le.token,";"),star:new ce("star",le.token,"*"),tilde:new ce("tilde",le.token,"~"),underscore:new ce("underscore",le.token,"_"),xor:new ce("xor",le.token,"^"),plus_equal:new ce("plus_equal",le.token,"+="),minus_equal:new ce("minus_equal",le.token,"-="),times_equal:new ce("times_equal",le.token,"*="),division_equal:new ce("division_equal",le.token,"/="),modulo_equal:new ce("modulo_equal",le.token,"%="),and_equal:new ce("and_equal",le.token,"&="),or_equal:new ce("or_equal",le.token,"|="),xor_equal:new ce("xor_equal",le.token,"^="),shift_right_equal:new ce("shift_right_equal",le.token,">>="),shift_left_equal:new ce("shift_left_equal",le.token,"<<=")},W.simpleTokens={"@":me.tokens.attr,"{":me.tokens.brace_left,"}":me.tokens.brace_right,":":me.tokens.colon,",":me.tokens.comma,"(":me.tokens.paren_left,")":me.tokens.paren_right,";":me.tokens.semicolon},W.literalTokens={"&":me.tokens.and,"&&":me.tokens.and_and,"->":me.tokens.arrow,"/":me.tokens.forward_slash,"!":me.tokens.bang,"[":me.tokens.bracket_left,"]":me.tokens.bracket_right,"=":me.tokens.equal,"==":me.tokens.equal_equal,"!=":me.tokens.not_equal,">":me.tokens.greater_than,">=":me.tokens.greater_than_equal,">>":me.tokens.shift_right,"<":me.tokens.less_than,"<=":me.tokens.less_than_equal,"<<":me.tokens.shift_left,"%":me.tokens.modulo,"-":me.tokens.minus,"--":me.tokens.minus_minus,".":me.tokens.period,"+":me.tokens.plus,"++":me.tokens.plus_plus,"|":me.tokens.or,"||":me.tokens.or_or,"*":me.tokens.star,"~":me.tokens.tilde,_:me.tokens.underscore,"^":me.tokens.xor,"+=":me.tokens.plus_equal,"-=":me.tokens.minus_equal,"*=":me.tokens.times_equal,"/=":me.tokens.division_equal,"%=":me.tokens.modulo_equal,"&=":me.tokens.and_equal,"|=":me.tokens.or_equal,"^=":me.tokens.xor_equal,">>=":me.tokens.shift_right_equal,"<<=":me.tokens.shift_left_equal},W.regexTokens={decimal_float_literal:me.tokens.decimal_float_literal,hex_float_literal:me.tokens.hex_float_literal,int_literal:me.tokens.int_literal,uint_literal:me.tokens.uint_literal,ident:me.tokens.ident},W.storage_class=[me.keywords.function,me.keywords.private,me.keywords.workgroup,me.keywords.uniform,me.keywords.storage],W.access_mode=[me.keywords.read,me.keywords.write,me.keywords.read_write],W.sampler_type=[me.keywords.sampler,me.keywords.sampler_comparison],W.sampled_texture_type=[me.keywords.texture_1d,me.keywords.texture_2d,me.keywords.texture_2d_array,me.keywords.texture_3d,me.keywords.texture_cube,me.keywords.texture_cube_array],W.multisampled_texture_type=[me.keywords.texture_multisampled_2d],W.storage_texture_type=[me.keywords.texture_storage_1d,me.keywords.texture_storage_2d,me.keywords.texture_storage_2d_array,me.keywords.texture_storage_3d],W.depth_texture_type=[me.keywords.texture_depth_2d,me.keywords.texture_depth_2d_array,me.keywords.texture_depth_cube,me.keywords.texture_depth_cube_array,me.keywords.texture_depth_multisampled_2d],W.texture_external_type=[me.keywords.texture_external],W.any_texture_type=[...me.sampled_texture_type,...me.multisampled_texture_type,...me.storage_texture_type,...me.depth_texture_type,...me.texture_external_type],W.texel_format=[me.keywords.r8unorm,me.keywords.r8snorm,me.keywords.r8uint,me.keywords.r8sint,me.keywords.r16uint,me.keywords.r16sint,me.keywords.r16float,me.keywords.rg8unorm,me.keywords.rg8snorm,me.keywords.rg8uint,me.keywords.rg8sint,me.keywords.r32uint,me.keywords.r32sint,me.keywords.r32float,me.keywords.rg16uint,me.keywords.rg16sint,me.keywords.rg16float,me.keywords.rgba8unorm,me.keywords.rgba8unorm_srgb,me.keywords.rgba8snorm,me.keywords.rgba8uint,me.keywords.rgba8sint,me.keywords.bgra8unorm,me.keywords.bgra8unorm_srgb,me.keywords.rgb10a2unorm,me.keywords.rg11b10float,me.keywords.rg32uint,me.keywords.rg32sint,me.keywords.rg32float,me.keywords.rgba16uint,me.keywords.rgba16sint,me.keywords.rgba16float,me.keywords.rgba32uint,me.keywords.rgba32sint,me.keywords.rgba32float],W.const_literal=[me.tokens.int_literal,me.tokens.uint_literal,me.tokens.decimal_float_literal,me.tokens.hex_float_literal,me.keywords.true,me.keywords.false],W.literal_or_ident=[me.tokens.ident,me.tokens.int_literal,me.tokens.uint_literal,me.tokens.decimal_float_literal,me.tokens.hex_float_literal,me.tokens.name],W.element_count_expression=[me.tokens.int_literal,me.tokens.uint_literal,me.tokens.ident],W.template_types=[me.keywords.vec2,me.keywords.vec3,me.keywords.vec4,me.keywords.mat2x2,me.keywords.mat2x3,me.keywords.mat2x4,me.keywords.mat3x2,me.keywords.mat3x3,me.keywords.mat3x4,me.keywords.mat4x2,me.keywords.mat4x3,me.keywords.mat4x4,me.keywords.atomic,me.keywords.bitcast,...me.any_texture_type],W.attribute_name=[me.tokens.ident,me.keywords.block,me.keywords.diagnostic],W.assignment_operators=[me.tokens.equal,me.tokens.plus_equal,me.tokens.minus_equal,me.tokens.times_equal,me.tokens.division_equal,me.tokens.modulo_equal,me.tokens.and_equal,me.tokens.or_equal,me.tokens.xor_equal,me.tokens.shift_right_equal,me.tokens.shift_left_equal],W.increment_operators=[me.tokens.plus_plus,me.tokens.minus_minus];class ZT{constructor(e,n,r,i,s){this.type=e,this.lexeme=n,this.line=r,this.start=i,this.end=s}toString(){return this.lexeme}isTemplateType(){return W.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==W.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class d9{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new ZT(W.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=W.simpleTokens[e];if(n)return this._addToken(n),!0;let r=W.none;const i=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(i){const a=W.keywords[e];if(a)return this._addToken(a),!0}if(i||s)return this._addToken(W.tokens.ident),!0;for(;;){let a=this._findType(e);const c=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(c=="=")return this._current++,e+=c,this._addToken(W.tokens.minus_equal),!0;if(c=="-")return this._current++,e+=c,this._addToken(W.tokens.minus_minus),!0;const u=this._tokens.length-1;if((W.literal_or_ident.indexOf(this._tokens[u].type)!=-1||this._tokens[u].type==W.tokens.paren_right)&&c!=">")return this._addToken(a),!0}if(e==">"&&(c==">"||c=="=")){let u=!1,h=this._tokens.length-1;for(let d=0;d<5&&h>=0&&W.assignment_operators.indexOf(this._tokens[h].type)===-1;++d,--h)if(this._tokens[h].type===W.tokens.less_than){h>0&&this._tokens[h-1].isArrayOrTemplateType()&&(u=!0);break}if(u)return this._addToken(a),!0}if(a===W.none){let u=e,h=0;const d=2;for(let g=0;g<d;++g)if(u+=this._peekAhead(g),a=this._findType(u),a!==W.none){h=g;break}if(a===W.none)return r!==W.none&&(this._current--,this._addToken(r),!0);e=u,this._current+=h+1}if(r=a,this._isAtEnd())break;e+=this._advance()}return r!==W.none&&(this._addToken(r),!0)}_findType(e){for(const r in W.regexTokens){const i=W.regexTokens[r];if(this._match(e,i.rule))return i}return W.literalTokens[e]||W.none}_match(e,n){const r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new ZT(e,n,this._line,this._start,this._current))}}function Ye(t){return Array.isArray(t)||(t==null?void 0:t.buffer)instanceof ArrayBuffer}const Fp=new Float32Array(1),p9=new Uint32Array(Fp.buffer),g9=new Uint32Array(Fp.buffer),Bp=new Int32Array(1),m9=new Float32Array(Bp.buffer),y9=new Uint32Array(Bp.buffer),jp=new Uint32Array(1),b9=new Float32Array(jp.buffer),_9=new Int32Array(jp.buffer);function GT(t,e,n){if(e===n)return t;if(e==="f32"){if(n==="i32"||n==="x32")return Fp[0]=t,p9[0];if(n==="u32")return Fp[0]=t,g9[0]}else if(e==="i32"||e==="x32"){if(n==="f32")return Bp[0]=t,m9[0];if(n==="u32")return Bp[0]=t,y9[0]}else if(e==="u32"){if(n==="f32")return jp[0]=t,b9[0];if(n==="i32"||n==="x32")return jp[0]=t,_9[0]}return console.error(`Unsupported cast from ${e} to ${n}`),t}class v9{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class Id{constructor(e,n){this.align=e,this.size=n}}class us{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new r9,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(const n of e)n instanceof If&&this._functions.set(n.name,new v9(n));for(const n of e)if(n instanceof Ps){const r=this.getTypeInfo(n,null);r instanceof Uo&&this.structs.push(r)}for(const n of e)if(n instanceof Hv)this.aliases.push(this._getAliasInfo(n));else if(n instanceof Vv){const r=n,i=this._getAttributeNum(r.attributes,"id",0),s=r.type!=null?this.getTypeInfo(r.type,r.attributes):null;this.overrides.push(new e9(r.name,s,r.attributes,i))}else if(this._isUniformVar(n)){const r=n,i=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),c=new Nd(r.name,a,i,s,r.attributes,Ao.Uniform,r.access);c.access||(c.access="read"),this.uniforms.push(c)}else if(this._isStorageVar(n)){const r=n,i=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),c=this._isStorageTexture(a),u=new Nd(r.name,a,i,s,r.attributes,c?Ao.StorageTexture:Ao.Storage,r.access);u.access||(u.access="read"),this.storage.push(u)}else if(this._isTextureVar(n)){const r=n,i=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),c=this._isStorageTexture(a),u=new Nd(r.name,a,i,s,r.attributes,c?Ao.StorageTexture:Ao.Texture,r.access);u.access||(u.access="read"),c?this.storage.push(u):this.textures.push(u)}else if(this._isSamplerVar(n)){const r=n,i=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),c=new Nd(r.name,a,i,s,r.attributes,Ao.Sampler,r.access);this.samplers.push(c)}for(const n of e)if(n instanceof If){const r=this._getAttribute(n,"vertex"),i=this._getAttribute(n,"fragment"),s=this._getAttribute(n,"compute"),a=r||i||s,c=new n9(n.name,a==null?void 0:a.name,n.attributes);c.attributes=n.attributes,c.startLine=n.startLine,c.endLine=n.endLine,this.functions.push(c),this._functions.get(n.name).info=c,a&&(this._functions.get(n.name).inUse=!0,c.inUse=!0,c.resources=this._findResources(n,!!a),c.inputs=this._getInputs(n.args),c.outputs=this._getOutputs(n.returnType),this.entry[a.name].push(c)),c.arguments=n.args.map(u=>new t9(u.name,this.getTypeInfo(u.type,u.attributes),u.attributes)),c.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null}for(const n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(const n of this._functions.values())n.node.search(r=>{var i,s,a;if(r instanceof kM){if(r.value)if(Ye(r.value))for(const c of r.value)for(const u of this.overrides)c===u.name&&((i=n.info)===null||i===void 0||i.overrides.push(u));else for(const c of this.overrides)r.value===c.name&&((s=n.info)===null||s===void 0||s.overrides.push(c))}else if(r instanceof ai)for(const c of this.overrides)r.name===c.name&&((a=n.info)===null||a===void 0||a.overrides.push(c))});for(const n of this.uniforms)this._markStructsInUse(n.type);for(const n of this.storage)this._markStructsInUse(n.type)}getStructInfo(e){for(const n of this.structs)if(n.name==e)return n;return null}getOverrideInfo(e){for(const n of this.overrides)if(n.name==e)return n;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(const i of e.calls){const s=(r=this._functions.get(i.name))===null||r===void 0?void 0:r.info;s&&n.add(s)}}findResource(e,n,r){if(r){for(const i of this.entry.compute)if(i.name===r){for(const s of i.resources)if(s.group==e&&s.binding==n)return s}for(const i of this.entry.vertex)if(i.name===r){for(const s of i.resources)if(s.group==e&&s.binding==n)return s}for(const i of this.entry.fragment)if(i.name===r){for(const s of i.resources)if(s.group==e&&s.binding==n)return s}}for(const i of this.uniforms)if(i.group==e&&i.binding==n)return i;for(const i of this.storage)if(i.group==e&&i.binding==n)return i;for(const i of this.textures)if(i.group==e&&i.binding==n)return i;for(const i of this.samplers)if(i.group==e&&i.binding==n)return i;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this.getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const r=[],i=this,s=[];return e.search(a=>{if(a instanceof Pp)s.push({});else if(a instanceof Dp)s.pop();else if(a instanceof Us){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type),s.length>0&&(s[s.length-1][c.name]=c)}else if(a instanceof rs){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type)}else if(a instanceof yf){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type),s.length>0&&(s[s.length-1][c.name]=c)}else if(a instanceof ai){const c=a;if(s.length>0&&s[s.length-1][c.name])return;const u=i._findResource(c.name);u&&r.push(u)}else if(a instanceof Wv){const c=a,u=i._functions.get(c.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=i._findResources(u.node,n)),r.push(...u.resources))}else if(a instanceof $v){const c=a,u=i._functions.get(c.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=i._findResources(u.node,n)),r.push(...u.resources))}}),[...new Map(r.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function n(r,i){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),i>=e[r].length&&(e[r].length=i+1)}for(const r of this.uniforms)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.storage)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.textures)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.samplers)n(r.group,r.binding),e[r.group][r.binding]=r;return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof Ps)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof Ps)this._getStructOutputs(r.type,n);else{const i=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(i!==null){const s=this.getTypeInfo(r.type,r.type.attributes),a=this._parseInt(i.value),c=new qT(r.name,s,i.name,a);n.push(c)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this.getTypeInfo(e,e.attributes),i=this._parseInt(n.value);return new qT("",r,n.name,i)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof Ps)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof Ps)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),i=this.getTypeInfo(e.type,e.attributes),s=this._parseInt(n.value),a=new JV(e.name,i,n.name,s);return r!==null&&(a.interpolation=this._parseString(r.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new GV(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const n of this.structs)if(n.name==e)return n;for(const n of this.aliases)if(n.name==e)return n.type;return null}getTypeInfo(e,n=null){if(this._types.has(e))return this._types.get(e);if(e instanceof tp){const i=e.type?this.getTypeInfo(e.type,e.attributes):null,s=new o0(e.name,i,n);return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof bf){const i=e,s=i.format?this.getTypeInfo(i.format,i.attributes):null,a=new Wo(i.name,n);return a.format=s,a.count=i.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof Ps){const i=e,s=new Uo(i.name,n);s.startLine=i.startLine,s.endLine=i.endLine;for(const a of i.members){const c=this.getTypeInfo(a.type,a.attributes);s.members.push(new WT(a.name,c,a.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof uf){const i=e,s=i.format instanceof Fe,a=i.format?s?this.getTypeInfo(i.format,null):new xi(i.format,null):null,c=new Wa(i.name,a,n,i.access);return this._types.set(e,c),this._updateTypeInfo(c),c}if(e instanceof de){const i=e,s=i.format?this.getTypeInfo(i.format,null):null,a=new Wa(i.name,s,n,i.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const r=new xi(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r,i;const s=this._getTypeSize(e);if(e.size=(n=s==null?void 0:s.size)!==null&&n!==void 0?n:0,e instanceof Wo&&e.format){const a=this._getTypeSize(e.format);e.stride=Math.max((r=a==null?void 0:a.size)!==null&&r!==void 0?r:0,(i=a==null?void 0:a.align)!==null&&i!==void 0?i:0),this._updateTypeInfo(e.format)}e instanceof o0&&this._updateTypeInfo(e.format),e instanceof Uo&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,i=0,s=0,a=0;for(let c=0,u=e.members.length;c<u;++c){const h=e.members[c],d=this._getTypeSize(h);if(!d)continue;(n=this._getAlias(h.type.name))!==null&&n!==void 0||h.type;const g=d.align,b=d.size;r=this._roundUp(g,r+i),i=b,s=r,a=Math.max(a,g),h.offset=r,h.size=b,this._updateTypeInfo(h.type)}e.size=this._roundUp(a,s+i),e.align=a}_getTypeSize(e){var n,r;if(e==null)return null;const i=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof WT&&(e=e.type),e instanceof xi){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=us._typeInfo[e.name];if(a!==void 0){const c=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new Id(Math.max(s,a.align/c),Math.max(i,a.size/c))}}{const a=us._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const c=e.name[e.name.length-1]==="h"?2:1;return new Id(Math.max(s,a.align/c),Math.max(i,a.size/c))}}if(e instanceof Wo){let a=e,c=8,u=8;const h=this._getTypeSize(a.format);return h!==null&&(u=h.size,c=h.align),u=a.count*this._getAttributeNum((r=e==null?void 0:e.attributes)!==null&&r!==void 0?r:null,"stride",this._roundUp(c,u)),i&&(u=i),new Id(Math.max(s,c),Math.max(i,u))}if(e instanceof Uo){let a=0,c=0,u=0,h=0,d=0;for(const g of e.members){const b=this._getTypeSize(g.type);b!==null&&(a=Math.max(b.align,a),u=this._roundUp(b.align,u+h),h=b.size,d=u)}return c=this._roundUp(a,d+h),new Id(Math.max(s,a),Math.max(i,c))}return null}_isUniformVar(e){return e instanceof Us&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Us&&e.storage=="storage"}_isTextureVar(e){return e instanceof Us&&e.type!==null&&us._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Us&&e.type!==null&&us._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const i=r.attributes;for(let s of i)if(s.name==n)return s;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let i of e)if(i.name==n){let s=i!==null&&i.value!==null?i.value:r;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}us._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},us._textureTypes=W.any_texture_type.map(t=>t.name),us._samplerTypes=W.sampler_type.map(t=>t.name);let qv=0;class Xv{constructor(e,n,r){this.id=qv++,this.name=e,this.value=n,this.node=r}clone(){return new Xv(this.name,this.value,this.node)}}class Yv{constructor(e){this.id=qv++,this.name=e.name,this.node=e}clone(){return new Yv(this.node)}}class Kv{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=qv++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var n;return this.variables.has(e)?(n=this.variables.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var n;return this.functions.has(e)?(n=this.functions.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(e):null}createVariable(e,n,r){this.variables.set(e,new Xv(e,n,r??null))}setVariable(e,n,r){const i=this.getVariable(e);i!==null?i.value=n:this.createVariable(e,n,r)}getVariableValue(e){var n;const r=this.getVariable(e);return(n=r==null?void 0:r.value)!==null&&n!==void 0?n:null}clone(){return new Kv(this)}}class x9{evalExpression(e,n){return null}getTypeInfo(e){return null}getVariableName(e,n){return""}}class w9{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,n){const r=this.exec.evalExpression(e.args[0],n);let i=!0;if(r instanceof X)return r.data.forEach(s=>{s||(i=!1)}),new ae(i?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X){const i=r.data.some(s=>s);return new ae(i?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,n){const r=this.exec.evalExpression(e.args[2],n);if(!(r instanceof ae))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return r.value?this.exec.evalExpression(e.args[1],n):this.exec.evalExpression(e.args[0],n)}ArrayLength(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.evalExpression(r,n);if(i instanceof Mn&&i.typeInfo.size===0){const s=i.typeInfo,a=i.buffer.byteLength/s.stride;return new ae(a,this.getTypeInfo("u32"))}return new ae(i.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.abs(s)),r.typeInfo);const i=r;return new ae(Math.abs(i.value),i.typeInfo)}Acos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.acos(s)),r.typeInfo);const i=r;return new ae(Math.acos(i.value),r.typeInfo)}Acosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.acosh(s)),r.typeInfo);const i=r;return new ae(Math.acosh(i.value),r.typeInfo)}Asin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.asin(s)),r.typeInfo);const i=r;return new ae(Math.asin(i.value),r.typeInfo)}Asinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.asinh(s)),r.typeInfo);const i=r;return new ae(Math.asinh(i.value),r.typeInfo)}Atan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.atan(s)),r.typeInfo);const i=r;return new ae(Math.atan(i.value),r.typeInfo)}Atanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.atanh(s)),r.typeInfo);const i=r;return new ae(Math.atanh(i.value),r.typeInfo)}Atan2(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X)return new X(r.data.map((c,u)=>Math.atan2(c,i.data[u])),r.typeInfo);const s=r,a=i;return new ae(Math.atan2(s.value,a.value),r.typeInfo)}Ceil(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.ceil(s)),r.typeInfo);const i=r;return new ae(Math.ceil(i.value),r.typeInfo)}_clamp(e,n,r){return Math.min(Math.max(e,n),r)}Clamp(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof X&&i instanceof X&&s instanceof X)return new X(r.data.map((h,d)=>this._clamp(h,i.data[d],s.data[d])),r.typeInfo);const a=r,c=i,u=s;return new ae(this._clamp(a.value,c.value,u.value),r.typeInfo)}Cos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.cos(s)),r.typeInfo);const i=r;return new ae(Math.cos(i.value),r.typeInfo)}Cosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.cosh(s)),r.typeInfo);const i=r;return new ae(Math.cos(i.value),r.typeInfo)}CountLeadingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.clz32(s)),r.typeInfo);const i=r;return new ae(Math.clz32(i.value),r.typeInfo)}_countOneBits(e){let n=0;for(;e!==0;)1&e&&n++,e>>=1;return n}CountOneBits(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>this._countOneBits(s)),r.typeInfo);const i=r;return new ae(this._countOneBits(i.value),r.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let n=0;for(;!(1&e);)e>>=1,n++;return n}CountTrailingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>this._countTrailingZeros(s)),r.typeInfo);const i=r;return new ae(this._countTrailingZeros(i.value),r.typeInfo)}Cross(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X){if(r.data.length!==3||i.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const s=r.data,a=i.data;return new X([s[1]*a[2]-a[1]*s[2],s[2]*a[0]-a[2]*s[0],s[0]*a[1]-a[0]*s[1]],r.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,n){const r=this.exec.evalExpression(e.args[0],n),i=180/Math.PI;return r instanceof X?new X(r.data.map(s=>s*i),r.typeInfo):new ae(r.value*i,this.getTypeInfo("f32"))}Determinant(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof gt){const i=r.data,s=r.typeInfo.getTypeName(),a=s.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h")return new ae(i[0]*i[3]-i[1]*i[2],a);if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h")return new ae(i[0]*(i[4]*i[8]-i[5]*i[7])-i[1]*(i[3]*i[8]-i[5]*i[6])+i[2]*(i[3]*i[7]-i[4]*i[6]),a);if(s==="mat2x4"||s==="mat2x4f"||s==="mat2x4h")console.error(`TODO: Determinant for ${s}`);else if(s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h")console.error(`TODO: Determinant for ${s}`);else{if(s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h")return new ae(i[0]*(i[4]*i[8]-i[5]*i[7])-i[1]*(i[3]*i[8]-i[5]*i[6])+i[2]*(i[3]*i[7]-i[4]*i[6]),a);s==="mat3x4"||s==="mat3x4f"||s==="mat3x4h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h"?console.error(`TODO: Determinant for ${s}`):s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h"||console.error(`TODO: Determinant for ${s}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X){let c=0;for(let u=0;u<r.data.length;++u)c+=(r.data[u]-i.data[u])*(r.data[u]-i.data[u]);return new ae(Math.sqrt(c),this.getTypeInfo("f32"))}const s=r,a=i;return new ae(Math.abs(s.value-a.value),r.typeInfo)}_dot(e,n){let r=0;for(let i=0;i<e.length;++i)r+=n[i]*e[i];return r}Dot(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);return r instanceof X&&i instanceof X?new ae(this._dot(r.data,i.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,n){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,n){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.exp(s)),r.typeInfo);const i=r;return new ae(Math.exp(i.value),r.typeInfo)}Exp2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.pow(2,s)),r.typeInfo);const i=r;return new ae(Math.pow(2,i.value),r.typeInfo)}ExtractBits(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i.typeInfo.name!=="u32"&&i.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=i.value,c=s.value;if(r instanceof X)return new X(r.data.map(h=>h>>a&(1<<c)-1),r.typeInfo);if(r.typeInfo.name!=="i32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const u=r.value;return new ae(u>>a&(1<<c)-1,this.getTypeInfo("i32"))}FaceForward(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof X&&i instanceof X&&s instanceof X){const a=this._dot(i.data,s.data);return new X(a<0?Array.from(r.data):r.data.map(c=>-c),r.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>this._firstLeadingBit(s)),r.typeInfo);const i=r;return new ae(this._firstLeadingBit(i.value),r.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>this._firstTrailingBit(s)),r.typeInfo);const i=r;return new ae(this._firstTrailingBit(i.value),r.typeInfo)}Floor(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.floor(s)),r.typeInfo);const i=r;return new ae(Math.floor(i.value),r.typeInfo)}Fma(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof X&&i instanceof X&&s instanceof X)return r.data.length!==i.data.length||r.data.length!==s.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new X(r.data.map((h,d)=>h*i.data[d]+s.data[d]),r.typeInfo);const a=r,c=i,u=s;return new ae(a.value*c.value+u.value,a.typeInfo)}Fract(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>s-Math.floor(s)),r.typeInfo);const i=r;return new ae(i.value-Math.floor(i.value),r.typeInfo)}Frexp(e,n){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n),a=this.exec.evalExpression(e.args[3],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const c=s.value,u=(1<<a.value)-1<<c,h=~u;if(r instanceof X&&i instanceof X)return new X(r.data.map((b,S)=>b&h|i.data[S]<<c&u),r.typeInfo);const d=r.value,g=i.value;return new ae(d&h|g<<c&u,r.typeInfo)}InverseSqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>1/Math.sqrt(s)),r.typeInfo);const i=r;return new ae(1/Math.sqrt(i.value),r.typeInfo)}Ldexp(e,n){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X){let s=0;return r.data.forEach(a=>{s+=a*a}),new ae(Math.sqrt(s),this.getTypeInfo("f32"))}const i=r;return new ae(Math.abs(i.value),r.typeInfo)}Log(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.log(s)),r.typeInfo);const i=r;return new ae(Math.log(i.value),r.typeInfo)}Log2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.log2(s)),r.typeInfo);const i=r;return new ae(Math.log2(i.value),r.typeInfo)}Max(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X)return new X(r.data.map((c,u)=>Math.max(c,i.data[u])),r.typeInfo);const s=r,a=i;return new ae(Math.max(s.value,a.value),r.typeInfo)}Min(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X)return new X(r.data.map((c,u)=>Math.min(c,i.data[u])),r.typeInfo);const s=r,a=i;return new ae(Math.min(s.value,a.value),r.typeInfo)}Mix(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof X&&i instanceof X&&s instanceof X)return new X(r.data.map((u,h)=>r.data[h]*(1-s.data[h])+i.data[h]*s.data[h]),r.typeInfo);const a=i,c=s;return new ae(r.value*(1-c.value)+a.value*c.value,r.typeInfo)}Modf(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X)return new X(r.data.map((a,c)=>a%i.data[c]),r.typeInfo);const s=i;return new ae(r.value%s.value,r.typeInfo)}Normalize(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X){const i=this.Length(e,n).value;return new X(r.data.map(s=>s/i),r.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X)return new X(r.data.map((c,u)=>Math.pow(c,i.data[u])),r.typeInfo);const s=r,a=i;return new ae(Math.pow(s.value,a.value),r.typeInfo)}QuantizeToF16(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof X?new X(r.data.map(i=>i),r.typeInfo):new ae(r.value,r.typeInfo)}Radians(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof X?new X(r.data.map(i=>i*Math.PI/180),r.typeInfo):new ae(r.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,n){let r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(r instanceof X&&i instanceof X){const s=this._dot(r.data,i.data);return new X(r.data.map((a,c)=>a-2*s*i.data[c]),r.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,n){let r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof X&&i instanceof X&&s instanceof ae){const a=this._dot(i.data,r.data);return new X(r.data.map((c,u)=>{const h=1-s.value*s.value*(1-a*a);if(h<0)return 0;const d=Math.sqrt(h);return s.value*c-(s.value*a+d)*i.data[u]}),r.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,n){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.round(s)),r.typeInfo);const i=r;return new ae(Math.round(i.value),r.typeInfo)}Saturate(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.min(Math.max(s,0),1)),r.typeInfo);const i=r;return new ae(Math.min(Math.max(i.value,0),1),r.typeInfo)}Sign(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.sign(s)),r.typeInfo);const i=r;return new ae(Math.sign(i.value),r.typeInfo)}Sin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.sin(s)),r.typeInfo);const i=r;return new ae(Math.sin(i.value),r.typeInfo)}Sinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.sinh(s)),r.typeInfo);const i=r;return new ae(Math.sinh(i.value),r.typeInfo)}_smoothstep(e,n,r){const i=Math.min(Math.max((r-e)/(n-e),0),1);return i*i*(3-2*i)}SmoothStep(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(s instanceof X&&r instanceof X&&i instanceof X)return new X(s.data.map((h,d)=>this._smoothstep(r.data[d],i.data[d],h)),s.typeInfo);const a=r,c=i,u=s;return new ae(this._smoothstep(a.value,c.value,u.value),s.typeInfo)}Sqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.sqrt(s)),r.typeInfo);const i=r;return new ae(Math.sqrt(i.value),r.typeInfo)}Step(e,n){const r=this.exec.evalExpression(e.args[0],n),i=this.exec.evalExpression(e.args[1],n);if(i instanceof X&&r instanceof X)return new X(i.data.map((a,c)=>a<r.data[c]?0:1),i.typeInfo);const s=r;return new ae(i.value<s.value?0:1,s.typeInfo)}Tan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.tan(s)),r.typeInfo);const i=r;return new ae(Math.tan(i.value),r.typeInfo)}Tanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.tanh(s)),r.typeInfo);const i=r;return new ae(Math.tanh(i.value),r.typeInfo)}_getTransposeType(e){const n=e.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?e:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?e:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),e)}Transpose(e,n){const r=this.exec.evalExpression(e.args[0],n);if(!(r instanceof gt))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const i=this._getTransposeType(r.typeInfo);if(r.typeInfo.name==="mat2x2"||r.typeInfo.name==="mat2x2f"||r.typeInfo.name==="mat2x2h"){const s=r.data;return new gt([s[0],s[2],s[1],s[3]],i)}if(r.typeInfo.name==="mat2x3"||r.typeInfo.name==="mat2x3f"||r.typeInfo.name==="mat2x3h"){const s=r.data;return new gt([s[0],s[3],s[6],s[1],s[4],s[7]],i)}if(r.typeInfo.name==="mat2x4"||r.typeInfo.name==="mat2x4f"||r.typeInfo.name==="mat2x4h"){const s=r.data;return new gt([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13]],i)}if(r.typeInfo.name==="mat3x2"||r.typeInfo.name==="mat3x2f"||r.typeInfo.name==="mat3x2h"){const s=r.data;return new gt([s[0],s[3],s[1],s[4],s[2],s[5]],i)}if(r.typeInfo.name==="mat3x3"||r.typeInfo.name==="mat3x3f"||r.typeInfo.name==="mat3x3h"){const s=r.data;return new gt([s[0],s[3],s[6],s[1],s[4],s[7],s[2],s[5],s[8]],i)}if(r.typeInfo.name==="mat3x4"||r.typeInfo.name==="mat3x4f"||r.typeInfo.name==="mat3x4h"){const s=r.data;return new gt([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14]],i)}if(r.typeInfo.name==="mat4x2"||r.typeInfo.name==="mat4x2f"||r.typeInfo.name==="mat4x2h"){const s=r.data;return new gt([s[0],s[4],s[1],s[5],s[2],s[6]],i)}if(r.typeInfo.name==="mat4x3"||r.typeInfo.name==="mat4x3f"||r.typeInfo.name==="mat4x3h"){const s=r.data;return new gt([s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]],i)}if(r.typeInfo.name==="mat4x4"||r.typeInfo.name==="mat4x4f"||r.typeInfo.name==="mat4x4h"){const s=r.data;return new gt([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]],i)}return console.error(`Invalid matrix type ${r.typeInfo.name}`),null}Trunc(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof X)return new X(r.data.map(s=>Math.trunc(s)),r.typeInfo);const i=r;return new ae(Math.trunc(i.value),r.typeInfo)}Dpdx(e,n){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,n){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,n){return console.error("TODO: dpdxFine"),null}Dpdy(e,n){return console.error("TODO: dpdy"),null}DpdyCoarse(e,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,n){return console.error("TODO: dpdyFine"),null}Fwidth(e,n){return console.error("TODO: fwidth"),null}FwidthCoarse(e,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,n){const r=e.args[0],i=e.args.length>1?this.exec.evalExpression(e.args[1],n).value:0;if(r instanceof ai){const s=r.name,a=n.getVariableValue(s);if(a instanceof Ds){if(i<0||i>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const c=a.getMipLevelSize(i),u=a.dimension;return u==="1d"?new ae(c[0],this.getTypeInfo("u32")):u==="3d"?new X(c,this.getTypeInfo("vec3u")):u==="2d"?new X(c.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${u} not found. Line ${e.line}`),null)}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,n){const r=e.args[0],i=this.exec.evalExpression(e.args[1],n),s=e.args.length>2?this.exec.evalExpression(e.args[2],n).value:0;if(!(i instanceof X)||i.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(r instanceof ai){const a=r.name,c=n.getVariableValue(a);if(c instanceof Ds){const u=Math.floor(i.data[0]),h=Math.floor(i.data[1]);if(u<0||u>=c.width||h<0||h>=c.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const d=c.getPixel(u,h,0,s);return d===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new X(d,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,n){const r=e.args[0];if(r instanceof ai){const i=r.name,s=n.getVariableValue(i);return s instanceof Ds?new ae(s.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,n){const r=e.args[0];if(r instanceof ai){const i=r.name,s=n.getVariableValue(i);return s instanceof Ds?new ae(s.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,n){const r=e.args[0];if(r instanceof ai){const i=r.name,s=n.getVariableValue(i);return s instanceof Ds?new ae(s.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,n){return console.error("TODO: textureSample"),null}TextureSampleBias(e,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,n){const r=e.args[0],i=this.exec.evalExpression(e.args[1],n),s=e.args.length===4?this.exec.evalExpression(e.args[2],n).value:0,a=e.args.length===4?this.exec.evalExpression(e.args[3],n).data:this.exec.evalExpression(e.args[2],n).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(i instanceof X)||i.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(r instanceof ai){const c=r.name,u=n.getVariableValue(c);if(u instanceof Ds){const h=u.getMipLevelSize(0),d=Math.floor(i.data[0]),g=Math.floor(i.data[1]);return d<0||d>=h[0]||g<0||g>=h[1]?(console.error(`Texture ${c} out of bounds. Line ${e.line}`),null):(u.setPixel(d,g,0,s,Array.from(a)),null)}return console.error(`Texture ${c} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n);return n.getVariable(i).value.getSubData(this.exec,r.postfix,n)}AtomicStore(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n);return u instanceof ae&&c instanceof ae&&(u.value=c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),null}AtomicAdd(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value+=c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicSub(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value-=c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMax(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=Math.max(u.value,c.value)),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMin(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=Math.min(u.value,c.value)),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicAnd(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=u.value&c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicOr(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=u.value|c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicXor(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=u.value^c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicExchange(e,n){let r=e.args[0];r instanceof $n&&(r=r.right);const i=this.exec.getVariableName(r,n),s=n.getVariable(i);let a=e.args[1];const c=this.exec.evalExpression(a,n),u=s.value.getSubData(this.exec,r.postfix,n),h=new ae(u.value,u.typeInfo);return u instanceof ae&&c instanceof ae&&(u.value=c.value),s.value instanceof Mn&&s.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicCompareExchangeWeak(e,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,n){return null}TextureBarrier(e,n){return null}WorkgroupBarrier(e,n){return null}WorkgroupUniformLoad(e,n){return null}SubgroupAdd(e,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,n){return console.error("TODO: quadSwapY"),null}}const Rb={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Mr={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class wr extends x9{constructor(e,n){var r;super(),this.ast=e??[],this.reflection=new us,this.reflection.updateAST(this.ast),this.context=(r=n==null?void 0:n.clone())!==null&&r!==void 0?r:new Kv,this.builtins=new w9(this),this.typeInfo={bool:this.getTypeInfo(Fe.bool),i32:this.getTypeInfo(Fe.i32),u32:this.getTypeInfo(Fe.u32),f32:this.getTypeInfo(Fe.f32),f16:this.getTypeInfo(Fe.f16),vec2f:this.getTypeInfo(de.vec2f),vec2u:this.getTypeInfo(de.vec2u),vec2i:this.getTypeInfo(de.vec2i),vec2h:this.getTypeInfo(de.vec2h),vec3f:this.getTypeInfo(de.vec3f),vec3u:this.getTypeInfo(de.vec3u),vec3i:this.getTypeInfo(de.vec3i),vec3h:this.getTypeInfo(de.vec3h),vec4f:this.getTypeInfo(de.vec4f),vec4u:this.getTypeInfo(de.vec4u),vec4i:this.getTypeInfo(de.vec4i),vec4h:this.getTypeInfo(de.vec4h),mat2x2f:this.getTypeInfo(de.mat2x2f),mat2x3f:this.getTypeInfo(de.mat2x3f),mat2x4f:this.getTypeInfo(de.mat2x4f),mat3x2f:this.getTypeInfo(de.mat3x2f),mat3x3f:this.getTypeInfo(de.mat3x3f),mat3x4f:this.getTypeInfo(de.mat3x4f),mat4x2f:this.getTypeInfo(de.mat4x2f),mat4x3f:this.getTypeInfo(de.mat4x3f),mat4x4f:this.getTypeInfo(de.mat4x4f)}}getVariableValue(e){var n,r;const i=(r=(n=this.context.getVariable(e))===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:null;if(i===null)return null;if(i instanceof ae)return i.value;if(i instanceof X||i instanceof gt)return Array.from(i.data);if(i instanceof Mn&&i.typeInfo instanceof Wo){if(i.typeInfo.format.name==="u32")return Array.from(new Uint32Array(i.buffer,i.offset,i.typeInfo.count));if(i.typeInfo.format.name==="i32")return Array.from(new Int32Array(i.buffer,i.offset,i.typeInfo.count));if(i.typeInfo.format.name==="f32")return Array.from(new Float32Array(i.buffer,i.offset,i.typeInfo.count))}return console.error(`Unsupported return variable type ${i.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,n,r,i){const s=this.context.clone();(i=i??{}).constants&&this._setOverrides(i.constants,s),this._execStatements(this.ast,s);const a=s.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const c=n[0],u=n[1],h=n[2],d=this.getTypeInfo("vec3u");s.setVariable("@num_workgroups",new X(n,d));for(const g in r)for(const b in r[g]){const S=r[g][b];s.variables.forEach(R=>{var A;const C=R.node;if(C!=null&&C.attributes){let k=null,P=null;for(const M of C.attributes)M.name==="binding"?k=M.value:M.name==="group"&&(P=M.value);if(b==k&&g==P)if(S.texture!==void 0&&S.descriptor!==void 0){const M=new Ds(S.texture,this.getTypeInfo(C.type),S.descriptor,(A=S.texture.view)!==null&&A!==void 0?A:null);R.value=M}else S.uniform!==void 0?R.value=new Mn(S.uniform,this.getTypeInfo(C.type)):R.value=new Mn(S,this.getTypeInfo(C.type))}})}for(let g=0;g<h;++g)for(let b=0;b<u;++b)for(let S=0;S<c;++S)s.setVariable("@workgroup_id",new X([S,b,g],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[S,b,g],s)}execStatement(e,n){if(e instanceof _M)return this.evalExpression(e.value,n);if(e instanceof xM){if(e.condition){const r=this.evalExpression(e.condition,n);if(!(r instanceof ae))throw new Error("Invalid break-if condition");if(!r.value)return null}return wr._breakObj}if(e instanceof wM)return wr._continueObj;if(e instanceof yf)this._let(e,n);else if(e instanceof Us)this._var(e,n);else if(e instanceof Jd)this._const(e,n);else if(e instanceof If)this._function(e,n);else{if(e instanceof bM)return this._if(e,n);if(e instanceof yM)return this._switch(e,n);if(e instanceof dM)return this._for(e,n);if(e instanceof hM)return this._while(e,n);if(e instanceof mM)return this._loop(e,n);if(e instanceof a0){const r=n.clone();return r.currentFunctionName=n.currentFunctionName,this._execStatements(e.body,r)}if(e instanceof gM)this._assign(e,n);else if(e instanceof pM)this._increment(e,n);else{if(e instanceof Ps)return null;if(e instanceof Vv){const r=e.name;n.getVariable(r)===null&&n.setVariable(r,new ae(0,this.getTypeInfo("u32")))}else if(e instanceof $v)this._call(e,n);else{if(e instanceof vM||e instanceof Hv)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,n){return e instanceof Pi?this._evalBinaryOp(e,n):e instanceof Zn?this._evalLiteral(e,n):e instanceof ai?this._evalVariable(e,n):e instanceof Wv?this._evalCall(e,n):e instanceof rs?this._evalCreate(e,n):e instanceof SM?this._evalConst(e,n):e instanceof TM?this._evalBitcast(e,n):e instanceof $n?this._evalUnaryOp(e,n):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var n;if(e instanceof Fe){const i=this.reflection.getTypeInfo(e);if(i!==null)return i}let r=(n=this.typeInfo[e])!==null&&n!==void 0?n:null;return r!==null||(r=this.reflection.getTypeInfoByName(e)),r}_setOverrides(e,n){for(const r in e){const i=e[r],s=this.reflection.getOverrideInfo(r);s!==null?(s.type===null&&(s.type=this.getTypeInfo("u32")),s.type.name==="u32"||s.type.name==="i32"||s.type.name==="f32"||s.type.name==="f16"?n.setVariable(r,new ae(i,s.type)):s.type.name==="bool"?n.setVariable(r,new ae(i?1:0,s.type)):s.type.name==="vec2"||s.type.name==="vec3"||s.type.name==="vec4"||s.type.name==="vec2f"||s.type.name==="vec3f"||s.type.name==="vec4f"||s.type.name==="vec2i"||s.type.name==="vec3i"||s.type.name==="vec4i"||s.type.name==="vec2u"||s.type.name==="vec3u"||s.type.name==="vec4u"||s.type.name==="vec2h"||s.type.name==="vec3h"||s.type.name==="vec4h"?n.setVariable(r,new X(i,s.type)):console.error(`Invalid constant type for ${r}`)):console.error(`Override ${r} does not exist in the shader.`)}}_dispatchWorkgroup(e,n,r){const i=[1,1,1];for(const d of e.node.attributes)if(d.name==="workgroup_size"){if(d.value.length>0){const g=r.getVariableValue(d.value[0]);i[0]=g instanceof ae?g.value:parseInt(d.value[0])}if(d.value.length>1){const g=r.getVariableValue(d.value[1]);i[1]=g instanceof ae?g.value:parseInt(d.value[1])}if(d.value.length>2){const g=r.getVariableValue(d.value[2]);i[2]=g instanceof ae?g.value:parseInt(d.value[2])}}const s=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");r.setVariable("@workgroup_size",new X(i,s));const c=i[0],u=i[1],h=i[2];for(let d=0,g=0;d<h;++d)for(let b=0;b<u;++b)for(let S=0;S<c;++S,++g){const R=[S,b,d],A=[S+n[0]*i[0],b+n[1]*i[1],d+n[2]*i[2]];r.setVariable("@local_invocation_id",new X(R,s)),r.setVariable("@global_invocation_id",new X(A,s)),r.setVariable("@local_invocation_index",new ae(g,a)),this._dispatchExec(e,r)}}_dispatchExec(e,n){for(const r of e.node.args)for(const i of r.attributes)if(i.name==="builtin"){const s=`@${i.value}`,a=n.getVariable(s);a!==void 0&&n.variables.set(r.name,a)}this._execStatements(e.node.body,n)}getVariableName(e,n){for(;e instanceof $n;)e=e.right;return e instanceof ai?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,n){for(const r of e){if(r instanceof Array){const s=n.clone(),a=this._execStatements(r,s);if(a)return a;continue}const i=this.execStatement(r,n);if(i)return i}return null}_call(e,n){const r=n.clone();r.currentFunctionName=e.name;const i=n.getFunction(e.name);if(i){for(let s=0;s<i.node.args.length;++s){const a=i.node.args[s],c=this.evalExpression(e.args[s],r);r.setVariable(a.name,c,a)}this._execStatements(i.node.body,r)}else e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)&&this._evalCreate(e,n)}_increment(e,n){const r=this.getVariableName(e.variable,n),i=n.getVariable(r);i?e.operator==="++"?i.value instanceof ae?i.value.value++:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):e.operator==="--"?i.value instanceof ae?i.value.value--:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${r} not found. Line ${e.line}`)}_getVariableData(e,n){if(e instanceof ai){const r=this.getVariableName(e,n),i=n.getVariable(r);return i===null?(console.error(`Variable ${r} not found. Line ${e.line}`),null):i.value.getSubData(this,e.postfix,n)}if(e instanceof $n){if(e.operator==="*"){const r=this._getVariableData(e.right,n);return r instanceof Wl?r.reference.getSubData(this,e.postfix,n):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){const r=this._getVariableData(e.right,n);return new Wl(r)}}return null}_assign(e,n){let r=null,i="<var>",s=null;if(e.variable instanceof $n){const u=this._getVariableData(e.variable,n),h=this.evalExpression(e.value,n),d=e.operator;if(d==="="){if(u instanceof ae||u instanceof X||u instanceof gt){if(h instanceof ae||h instanceof X||h instanceof gt&&u.data.length===h.data.length)return void u.data.set(h.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(u instanceof Mn&&h instanceof Mn&&u.buffer.byteLength-u.offset>=h.buffer.byteLength-h.offset)return void(u.buffer.byteLength%4==0?new Uint32Array(u.buffer,u.offset,u.typeInfo.size/4).set(new Uint32Array(h.buffer,h.offset,h.typeInfo.size/4)):new Uint8Array(u.buffer,u.offset,u.typeInfo.size).set(new Uint8Array(h.buffer,h.offset,h.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(d==="+=")return u instanceof ae||u instanceof X||u instanceof gt?h instanceof ae||h instanceof X||h instanceof gt?void u.data.set(h.data.map((g,b)=>u.data[b]+g)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(d==="-=")return(u instanceof ae||u instanceof X||u instanceof gt)&&(h instanceof ae||h instanceof X||h instanceof gt)?void u.data.set(h.data.map((g,b)=>u.data[b]-g)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof $n){if(e.variable.operator==="*"){i=this.getVariableName(e.variable.right,n);const u=n.getVariable(i);if(!(u&&u.value instanceof Wl))return void console.error(`Variable ${i} is not a pointer. Line ${e.line}`);r=u.value.reference;let h=e.variable.postfix;if(!h){let d=e.variable.right;for(;d instanceof $n;){if(d.postfix){h=d.postfix;break}d=d.right}}h&&(r=r.getSubData(this,h,n))}}else{s=e.variable.postfix,i=this.getVariableName(e.variable,n);const u=n.getVariable(i);if(u===null)return void console.error(`Variable ${i} not found. Line ${e.line}`);r=u.value}if(r instanceof Wl&&(r=r.reference),r===null)return void console.error(`Variable ${i} not found. Line ${e.line}`);const a=this.evalExpression(e.value,n),c=e.operator;if(c==="=")if(r instanceof Mn)r.setDataValue(this,a,s,n);else if(s){if(!(r instanceof X||r instanceof gt))return void console.error(`Variable ${i} is not a vector or matrix. Line ${e.line}`);if(s instanceof kc){const u=this.evalExpression(s.index,n).value;if(r instanceof X){if(!(a instanceof ae))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[u]=a.value}else{if(!(r instanceof gt))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);{const h=this.evalExpression(s.index,n).value;if(h<0)return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(!(a instanceof X))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);{const d=r.typeInfo.getTypeName();if(d==="mat2x2"||d==="mat2x2f"||d==="mat2x2h"){if(!(h<2&&a.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat2x3"||d==="mat2x3f"||d==="mat2x3h"){if(!(h<2&&a.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat2x4"||d==="mat2x4f"||d==="mat2x4h"){if(!(h<2&&a.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat3x2"||d==="mat3x2f"||d==="mat3x2h"){if(!(h<3&&a.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat3x3"||d==="mat3x3f"||d==="mat3x3h"){if(!(h<3&&a.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat3x4"||d==="mat3x4f"||d==="mat3x4h"){if(!(h<3&&a.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat4x2"||d==="mat4x2f"||d==="mat4x2h"){if(!(h<4&&a.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat4x3"||d==="mat4x3f"||d==="mat4x3h"){if(!(h<4&&a.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else{if(d!=="mat4x4"&&d!=="mat4x4f"&&d!=="mat4x4h")return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(!(h<4&&a.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}}}}}else if(s instanceof qa){const u=s.value;if(!(r instanceof X))return void console.error(`Invalid assignment to ${u}. Variable ${i} is not a vector. Line ${e.line}`);if(a instanceof ae){if(u.length>1)return void console.error(`Invalid assignment to ${u} for variable ${i}. Line ${e.line}`);if(u==="x")r.data[0]=a.value;else if(u==="y"){if(r.data.length<2)return void console.error(`Invalid assignment to ${u} for variable ${i}. Line ${e.line}`);r.data[1]=a.value}else if(u==="z"){if(r.data.length<3)return void console.error(`Invalid assignment to ${u} for variable ${i}. Line ${e.line}`);r.data[2]=a.value}else if(u==="w"){if(r.data.length<4)return void console.error(`Invalid assignment to ${u} for variable ${i}. Line ${e.line}`);r.data[3]=a.value}}else{if(!(a instanceof X))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(u.length!==a.data.length)return void console.error(`Invalid assignment to ${u} for variable ${i}. Line ${e.line}`);for(let h=0;h<u.length;++h){const d=u[h];if(d==="x"||d==="r")r.data[0]=a.data[h];else if(d==="y"||d==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);r.data[1]=a.data[h]}else if(d==="z"||d==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);r.data[2]=a.data[h]}else{if(d!=="w"&&d!=="a")return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);r.data[3]=a.data[h]}}}}}else r instanceof ae&&a instanceof ae?r.value=a.value:r instanceof X&&a instanceof X||r instanceof gt&&a instanceof gt?r.data.set(a.data):console.error(`Invalid assignment to ${i}. Line ${e.line}`);else{const u=r.getSubData(this,s,n);if(u instanceof X&&a instanceof ae){const h=u.data,d=a.value;if(c==="+=")for(let g=0;g<h.length;++g)h[g]+=d;else if(c==="-=")for(let g=0;g<h.length;++g)h[g]-=d;else if(c==="*=")for(let g=0;g<h.length;++g)h[g]*=d;else if(c==="/=")for(let g=0;g<h.length;++g)h[g]/=d;else if(c==="%=")for(let g=0;g<h.length;++g)h[g]%=d;else if(c==="&=")for(let g=0;g<h.length;++g)h[g]&=d;else if(c==="|=")for(let g=0;g<h.length;++g)h[g]|=d;else if(c==="^=")for(let g=0;g<h.length;++g)h[g]^=d;else if(c==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d;else if(c===">>=")for(let g=0;g<h.length;++g)h[g]>>=d;else console.error(`Invalid operator ${c}. Line ${e.line}`)}else if(u instanceof X&&a instanceof X){const h=u.data,d=a.data;if(h.length!==d.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(c==="+=")for(let g=0;g<h.length;++g)h[g]+=d[g];else if(c==="-=")for(let g=0;g<h.length;++g)h[g]-=d[g];else if(c==="*=")for(let g=0;g<h.length;++g)h[g]*=d[g];else if(c==="/=")for(let g=0;g<h.length;++g)h[g]/=d[g];else if(c==="%=")for(let g=0;g<h.length;++g)h[g]%=d[g];else if(c==="&=")for(let g=0;g<h.length;++g)h[g]&=d[g];else if(c==="|=")for(let g=0;g<h.length;++g)h[g]|=d[g];else if(c==="^=")for(let g=0;g<h.length;++g)h[g]^=d[g];else if(c==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d[g];else if(c===">>=")for(let g=0;g<h.length;++g)h[g]>>=d[g];else console.error(`Invalid operator ${c}. Line ${e.line}`)}else{if(!(u instanceof ae&&a instanceof ae))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);c==="+="?u.value+=a.value:c==="-="?u.value-=a.value:c==="*="?u.value*=a.value:c==="/="?u.value/=a.value:c==="%="?u.value%=a.value:c==="&="?u.value&=a.value:c==="|="?u.value|=a.value:c==="^="?u.value^=a.value:c==="<<="?u.value<<=a.value:c===">>="?u.value>>=a.value:console.error(`Invalid operator ${c}. Line ${e.line}`)}r instanceof Mn&&r.setDataValue(this,u,s,n)}}_function(e,n){const r=new Yv(e);n.functions.set(e.name,r)}_const(e,n){let r=null;e.value!==null&&(r=this.evalExpression(e.value,n)),n.createVariable(e.name,r,e)}_let(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof $n||(r=r.clone())}else{const i=e.type.name;if(i==="f32"||i==="i32"||i==="u32"||i==="bool"||i==="f16"||i==="vec2"||i==="vec3"||i==="vec4"||i==="vec2f"||i==="vec3f"||i==="vec4f"||i==="vec2i"||i==="vec3i"||i==="vec4i"||i==="vec2u"||i==="vec3u"||i==="vec4u"||i==="vec2h"||i==="vec3h"||i==="vec4h"||i==="vec2b"||i==="vec3b"||i==="vec4b"||i==="mat2x2"||i==="mat2x3"||i==="mat2x4"||i==="mat3x2"||i==="mat3x3"||i==="mat3x4"||i==="mat4x2"||i==="mat4x3"||i==="mat4x4"||i==="mat2x2f"||i==="mat2x3f"||i==="mat2x4f"||i==="mat3x2f"||i==="mat3x3f"||i==="mat3x4f"||i==="mat4x2f"||i==="mat4x3f"||i==="mat4x4f"||i==="mat2x2h"||i==="mat2x3h"||i==="mat2x4h"||i==="mat3x2h"||i==="mat3x3h"||i==="mat3x4h"||i==="mat4x2h"||i==="mat4x3h"||i==="mat4x4h"||i==="array"){const s=new rs(e.type,[]);r=this._evalCreate(s,n)}}n.createVariable(e.name,r,e)}_var(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof $n||(r=r.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const i=e.type.name;if(i==="f32"||i==="i32"||i==="u32"||i==="bool"||i==="f16"||i==="vec2"||i==="vec3"||i==="vec4"||i==="vec2f"||i==="vec3f"||i==="vec4f"||i==="vec2i"||i==="vec3i"||i==="vec4i"||i==="vec2u"||i==="vec3u"||i==="vec4u"||i==="vec2h"||i==="vec3h"||i==="vec4h"||i==="vec2b"||i==="vec3b"||i==="vec4b"||i==="mat2x2"||i==="mat2x3"||i==="mat2x4"||i==="mat3x2"||i==="mat3x3"||i==="mat3x4"||i==="mat4x2"||i==="mat4x3"||i==="mat4x4"||i==="mat2x2f"||i==="mat2x3f"||i==="mat2x4f"||i==="mat3x2f"||i==="mat3x3f"||i==="mat3x4f"||i==="mat4x2f"||i==="mat4x3f"||i==="mat4x4f"||i==="mat2x2h"||i==="mat2x3h"||i==="mat2x4h"||i==="mat3x2h"||i==="mat3x3h"||i==="mat3x4h"||i==="mat4x2h"||i==="mat4x3h"||i==="mat4x4h"||e.type instanceof bf||e.type instanceof Ps||e.type instanceof de){const s=new rs(e.type,[]);r=this._evalCreate(s,n)}}n.createVariable(e.name,r,e)}_switch(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof ae))return console.error(`Invalid if condition. Line ${e.line}`),null;let i=null;for(const s of e.cases)if(s instanceof RM)for(const a of s.selectors){if(a instanceof np){i=s;continue}const c=this.evalExpression(a,n);if(!(c instanceof ae))return console.error(`Invalid case selector. Line ${e.line}`),null;if(c.value===r.value)return this._execStatements(s.body,n)}else s instanceof CM&&(i=s);return i?this._execStatements(i.body,n):null}_if(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof ae))return console.error(`Invalid if condition. Line ${e.line}`),null;if(r.value)return this._execStatements(e.body,n);for(const i of e.elseif){const s=this.evalExpression(i.condition,n);if(!(s instanceof ae))return console.error(`Invalid if condition. Line ${e.line}`),null;if(s.value)return this._execStatements(i.body,n)}return e.else?this._execStatements(e.else,n):null}_getScalarValue(e){return e instanceof ae?e.value:(console.error("Expected scalar value.",e),0)}_for(e,n){for(n=n.clone(),this.execStatement(e.init,n);this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===wr._breakObj)break;if(r!==null&&r!==wr._continueObj)return r;this.execStatement(e.increment,n)}return null}_loop(e,n){for(n=n.clone();;){const r=this._execStatements(e.body,n);if(r===wr._breakObj)break;if(r===wr._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,n)===wr._breakObj)break}else if(r!==null)return r}return null}_while(e,n){for(n=n.clone();this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===wr._breakObj)break;if(r!==wr._continueObj&&r!==null)return r}return null}_evalBitcast(e,n){const r=this.evalExpression(e.value,n),i=e.type;if(r instanceof ae){const s=GT(r.value,r.typeInfo.name,i.name);return new ae(s,this.getTypeInfo(i))}if(r instanceof X){const s=r.typeInfo.getTypeName();let a="";if(s.endsWith("f"))a="f32";else if(s.endsWith("i"))a="i32";else if(s.endsWith("u"))a="u32";else if(s.endsWith("b"))a="bool";else{if(!s.endsWith("h"))return console.error(`Unknown vector type ${s}. Line ${e.line}`),null;a="f16"}const c=i.getTypeName();let u="";if(c.endsWith("f"))u="f32";else if(c.endsWith("i"))u="i32";else if(c.endsWith("u"))u="u32";else if(c.endsWith("b"))u="bool";else{if(!c.endsWith("h"))return console.error(`Unknown vector type ${u}. Line ${e.line}`),null;u="f16"}const h=function(d,g,b){if(g===b)return d;const S=new Array(d.length);for(let R=0;R<d.length;R++)S[R]=GT(d[R],g,b);return S}(Array.from(r.data),a,u);return new X(h,this.getTypeInfo(i))}return console.error(`TODO: bitcast for ${r.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,n){return n.getVariableValue(e.name).clone().getSubData(this,e.postfix,n)}_evalCreate(e,n){var r;if(e instanceof rs){if(e.type===null)return l0.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,n)}}const i=e instanceof rs?e.type.name:e.name,s=e instanceof rs?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(s===null)return console.error(`Unknown type ${i}. Line ${e.line}`),null;if(s.size===0)return null;const a=new Mn(new ArrayBuffer(s.size),s,0);if(s instanceof Uo){if(e.args)for(let c=0;c<e.args.length;++c){const u=s.members[c],h=e.args[c],d=this.evalExpression(h,n);a.setData(this,d,u.type,u.offset,n)}}else if(s instanceof Wo){let c=0;if(e.args)for(let u=0;u<e.args.length;++u){const h=e.args[u],d=this.evalExpression(h,n);s.format===null&&(((r=d.typeInfo)===null||r===void 0?void 0:r.name)==="x32"?s.format=this.getTypeInfo("i32"):s.format=d.typeInfo),a.setData(this,d,s.format,c,n),c+=s.stride}}else console.error(`Unknown type "${i}". Line ${e.line}`);return e instanceof rs?a.getSubData(this,e.postfix,n):a}_evalLiteral(e,n){const r=this.getTypeInfo(e.type),i=r.name;return i==="x32"||i==="u32"||i==="f32"||i==="f16"||i==="i32"||i==="bool"?new ae(e.scalarValue,r):i==="vec2"||i==="vec3"||i==="vec4"||i==="vec2f"||i==="vec3f"||i==="vec4f"||i==="vec2h"||i==="vec3h"||i==="vec4h"||i==="vec2i"||i==="vec3i"||i==="vec4i"||i==="vec2u"||i==="vec3u"||i==="vec4u"?this._callConstructorVec(e,n):i==="mat2x2"||i==="mat2x3"||i==="mat2x4"||i==="mat3x2"||i==="mat3x3"||i==="mat3x4"||i==="mat4x2"||i==="mat4x3"||i==="mat4x4"||i==="mat2x2f"||i==="mat2x3f"||i==="mat2x4f"||i==="mat3x2f"||i==="mat3x3f"||i==="mat3x4f"||i==="mat4x2f"||i==="mat4x3f"||i==="mat4x4f"||i==="mat2x2h"||i==="mat2x3h"||i==="mat2x4h"||i==="mat3x2h"||i==="mat3x3h"||i==="mat3x4h"||i==="mat4x2h"||i==="mat4x3h"||i==="mat4x4h"?this._callConstructorMatrix(e,n):e.value}_evalVariable(e,n){const r=n.getVariableValue(e.name);return r===null?r:r.getSubData(this,e.postfix,n)}_maxFormatTypeInfo(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const i=wr._priority.get(n.name);wr._priority.get(e[r].name)<i&&(n=e[r])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(e,n){const r=this.evalExpression(e.right,n);if(e.operator==="&")return new Wl(r);if(e.operator==="*")return r instanceof Wl?r.reference.getSubData(this,e.postfix,n):(console.error(`Invalid dereference. Line ${e.line}`),null);const i=r instanceof ae?r.value:r instanceof X?Array.from(r.data):null;switch(e.operator){case"+":{if(Ye(i)){const c=i.map((u,h)=>+u);return new X(c,r.typeInfo)}const s=i,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new ae(+s,a)}case"-":{if(Ye(i)){const c=i.map((u,h)=>-u);return new X(c,r.typeInfo)}const s=i,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new ae(-s,a)}case"!":{if(Ye(i)){const c=i.map((u,h)=>u?0:1);return new X(c,r.typeInfo)}const s=i,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new ae(s?0:1,a)}case"~":{if(Ye(i)){const c=i.map((u,h)=>~u);return new X(c,r.typeInfo)}const s=i,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new ae(~s,a)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,n){const r=this.evalExpression(e.left,n),i=this.evalExpression(e.right,n),s=r instanceof ae?r.value:r instanceof X||r instanceof gt?Array.from(r.data):null,a=i instanceof ae?i.value:i instanceof X||i instanceof gt?Array.from(i.data):null;switch(e.operator){case"+":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S+g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b+d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d+b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c+u,h)}case"-":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S-g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b-d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d-b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c-u,h)}case"*":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(r instanceof gt&&i instanceof gt){const b=function(C,k,P,M){if(Mr[k.name]===void 0||Mr[M.name]===void 0)return null;const z=Mr[k.name][0],$=Mr[k.name][1],F=Mr[M.name][0];if(z!==Mr[M.name][1])return null;const Z=new Array(F*$);for(let Q=0;Q<$;Q++)for(let ue=0;ue<F;ue++){let Y=0;for(let K=0;K<z;K++)Y+=C[K*$+Q]*P[ue*z+K];Z[Q*F+ue]=Y}return Z}(d,r.typeInfo,g,i.typeInfo);if(b===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const S=Mr[i.typeInfo.name][0],R=Mr[r.typeInfo.name][1],A=this.getTypeInfo(`mat${S}x${R}f`);return new gt(b,A)}if(r instanceof gt&&i instanceof X){const b=function(S,R,A,C){if(Mr[R.name]===void 0||Rb[C.name]===void 0)return null;const k=Mr[R.name][0],P=Mr[R.name][1];if(k!==A.length)return null;const M=new Array(P);for(let z=0;z<P;z++){let $=0;for(let F=0;F<k;F++)$+=S[F*P+z]*A[F];M[z]=$}return M}(d,r.typeInfo,g,i.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new X(b,i.typeInfo)}if(r instanceof X&&i instanceof gt){const b=function(S,R,A,C){if(Rb[R.name]===void 0||Mr[C.name]===void 0)return null;const k=Mr[C.name][0],P=Mr[C.name][1];if(P!==S.length)return null;const M=[];for(let z=0;z<k;z++){let $=0;for(let F=0;F<P;F++)$+=S[F]*A[F*k+z];M[z]=$}return M}(d,r.typeInfo,g,i.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new X(b,r.typeInfo)}{if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S*g[R]);return new X(b,r.typeInfo)}}if(Ye(s)){const d=a,g=s.map((b,S)=>b*d);return r instanceof gt?new gt(g,r.typeInfo):new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d*b);return i instanceof gt?new gt(g,i.typeInfo):new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c*u,h)}case"%":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S%g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b%d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d%b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c%u,h)}case"/":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S/g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b/d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d/b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c/u,h)}case"&":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S&g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b&d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d&b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c&u,h)}case"|":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S|g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b|d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d|b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c|u,h)}case"^":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S^g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b^d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d^b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c^u,h)}case"<<":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S<<g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b<<d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d<<b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c<<u,h)}case">>":{if(Ye(s)&&Ye(a)){const d=s,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((S,R)=>S>>g[R]);return new X(b,r.typeInfo)}if(Ye(s)){const d=a,g=s.map((b,S)=>b>>d);return new X(g,r.typeInfo)}if(Ye(a)){const d=s,g=a.map((b,S)=>d>>b);return new X(g,i.typeInfo)}const c=s,u=a,h=this._maxFormatTypeInfo([r.typeInfo,i.typeInfo]);return new ae(c>>u,h)}case">":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d>u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h>c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c>h?1:0);return new X(u,i.typeInfo)}return new ae(s>a?1:0,this.getTypeInfo("bool"));case"<":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d<u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h<c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c<h?1:0);return new X(u,i.typeInfo)}return new ae(s<a?1:0,this.getTypeInfo("bool"));case"==":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d===u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h==c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c==h?1:0);return new X(u,i.typeInfo)}return new ae(s===a?1:0,this.getTypeInfo("bool"));case"!=":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d!==u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h!==c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c!==h?1:0);return new X(u,i.typeInfo)}return new ae(s!==a?1:0,this.getTypeInfo("bool"));case">=":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d>=u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h>=c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c>=h?1:0);return new X(u,i.typeInfo)}return new ae(s>=a?1:0,this.getTypeInfo("bool"));case"<=":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d<=u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h<=c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c<=h?1:0);return new X(u,i.typeInfo)}return new ae(s<=a?1:0,this.getTypeInfo("bool"));case"&&":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d&&u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h&&c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c&&h?1:0);return new X(u,i.typeInfo)}return new ae(s&&a?1:0,this.getTypeInfo("bool"));case"||":if(Ye(s)&&Ye(a)){const c=s,u=a;if(c.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=c.map((d,g)=>d||u[g]?1:0);return new X(h,r.typeInfo)}if(Ye(s)){const c=a,u=s.map((h,d)=>h||c?1:0);return new X(u,r.typeInfo)}if(Ye(a)){const c=s,u=a.map((h,d)=>c||h?1:0);return new X(u,i.typeInfo)}return new ae(s||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,n){if(e.cachedReturnValue!==null)return e.cachedReturnValue;const r=n.clone();r.currentFunctionName=e.name;const i=n.getFunction(e.name);if(!i)return e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)?this._evalCreate(e,n):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let s=0;s<i.node.args.length;++s){const a=i.node.args[s],c=this.evalExpression(e.args[s],r);r.createVariable(a.name,c,a)}return this._execStatements(i.node.body,r)}_callBuiltinFunction(e,n){switch(e.name){case"all":return this.builtins.All(e,n);case"any":return this.builtins.Any(e,n);case"select":return this.builtins.Select(e,n);case"arrayLength":return this.builtins.ArrayLength(e,n);case"abs":return this.builtins.Abs(e,n);case"acos":return this.builtins.Acos(e,n);case"acosh":return this.builtins.Acosh(e,n);case"asin":return this.builtins.Asin(e,n);case"asinh":return this.builtins.Asinh(e,n);case"atan":return this.builtins.Atan(e,n);case"atanh":return this.builtins.Atanh(e,n);case"atan2":return this.builtins.Atan2(e,n);case"ceil":return this.builtins.Ceil(e,n);case"clamp":return this.builtins.Clamp(e,n);case"cos":return this.builtins.Cos(e,n);case"cosh":return this.builtins.Cosh(e,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,n);case"countOneBits":return this.builtins.CountOneBits(e,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,n);case"cross":return this.builtins.Cross(e,n);case"degrees":return this.builtins.Degrees(e,n);case"determinant":return this.builtins.Determinant(e,n);case"distance":return this.builtins.Distance(e,n);case"dot":return this.builtins.Dot(e,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,n);case"exp":return this.builtins.Exp(e,n);case"exp2":return this.builtins.Exp2(e,n);case"extractBits":return this.builtins.ExtractBits(e,n);case"faceForward":return this.builtins.FaceForward(e,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,n);case"floor":return this.builtins.Floor(e,n);case"fma":return this.builtins.Fma(e,n);case"fract":return this.builtins.Fract(e,n);case"frexp":return this.builtins.Frexp(e,n);case"insertBits":return this.builtins.InsertBits(e,n);case"inverseSqrt":return this.builtins.InverseSqrt(e,n);case"ldexp":return this.builtins.Ldexp(e,n);case"length":return this.builtins.Length(e,n);case"log":return this.builtins.Log(e,n);case"log2":return this.builtins.Log2(e,n);case"max":return this.builtins.Max(e,n);case"min":return this.builtins.Min(e,n);case"mix":return this.builtins.Mix(e,n);case"modf":return this.builtins.Modf(e,n);case"normalize":return this.builtins.Normalize(e,n);case"pow":return this.builtins.Pow(e,n);case"quantizeToF16":return this.builtins.QuantizeToF16(e,n);case"radians":return this.builtins.Radians(e,n);case"reflect":return this.builtins.Reflect(e,n);case"refract":return this.builtins.Refract(e,n);case"reverseBits":return this.builtins.ReverseBits(e,n);case"round":return this.builtins.Round(e,n);case"saturate":return this.builtins.Saturate(e,n);case"sign":return this.builtins.Sign(e,n);case"sin":return this.builtins.Sin(e,n);case"sinh":return this.builtins.Sinh(e,n);case"smoothStep":return this.builtins.SmoothStep(e,n);case"sqrt":return this.builtins.Sqrt(e,n);case"step":return this.builtins.Step(e,n);case"tan":return this.builtins.Tan(e,n);case"tanh":return this.builtins.Tanh(e,n);case"transpose":return this.builtins.Transpose(e,n);case"trunc":return this.builtins.Trunc(e,n);case"dpdx":return this.builtins.Dpdx(e,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,n);case"dpdxFine":return this.builtins.DpdxFine(e,n);case"dpdy":return this.builtins.Dpdy(e,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,n);case"dpdyFine":return this.builtins.DpdyFine(e,n);case"fwidth":return this.builtins.Fwidth(e,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,n);case"fwidthFine":return this.builtins.FwidthFine(e,n);case"textureDimensions":return this.builtins.TextureDimensions(e,n);case"textureGather":return this.builtins.TextureGather(e,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,n);case"textureLoad":return this.builtins.TextureLoad(e,n);case"textureNumLayers":return this.builtins.TextureNumLayers(e,n);case"textureNumLevels":return this.builtins.TextureNumLevels(e,n);case"textureNumSamples":return this.builtins.TextureNumSamples(e,n);case"textureSample":return this.builtins.TextureSample(e,n);case"textureSampleBias":return this.builtins.TextureSampleBias(e,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,n);case"textureStore":return this.builtins.TextureStore(e,n);case"atomicLoad":return this.builtins.AtomicLoad(e,n);case"atomicStore":return this.builtins.AtomicStore(e,n);case"atomicAdd":return this.builtins.AtomicAdd(e,n);case"atomicSub":return this.builtins.AtomicSub(e,n);case"atomicMax":return this.builtins.AtomicMax(e,n);case"atomicMin":return this.builtins.AtomicMin(e,n);case"atomicAnd":return this.builtins.AtomicAnd(e,n);case"atomicOr":return this.builtins.AtomicOr(e,n);case"atomicXor":return this.builtins.AtomicXor(e,n);case"atomicExchange":return this.builtins.AtomicExchange(e,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,n);case"pack4xI8":return this.builtins.Pack4xI8(e,n);case"pack4xU8":return this.builtins.Pack4xU8(e,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,n);case"pack2x16float":return this.builtins.Pack2x16float(e,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,n);case"unpack4xI8":return this.builtins.Unpack4xI8(e,n);case"unpack4xU8":return this.builtins.Unpack4xU8(e,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,n);case"unpack2x16float":return this.builtins.Unpack2x16float(e,n);case"storageBarrier":return this.builtins.StorageBarrier(e,n);case"textureBarrier":return this.builtins.TextureBarrier(e,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,n);case"subgroupAdd":return this.builtins.SubgroupAdd(e,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,n);case"subgroupAll":return this.builtins.SubgroupAll(e,n);case"subgroupAnd":return this.builtins.SubgroupAnd(e,n);case"subgroupAny":return this.builtins.SubgroupAny(e,n);case"subgroupBallot":return this.builtins.SubgroupBallot(e,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,n);case"subgroupElect":return this.builtins.SubgroupElect(e,n);case"subgroupMax":return this.builtins.SubgroupMax(e,n);case"subgroupMin":return this.builtins.SubgroupMin(e,n);case"subgroupMul":return this.builtins.SubgroupMul(e,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,n);case"subgroupOr":return this.builtins.SubgroupOr(e,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,n);case"subgroupXor":return this.builtins.SubgroupXor(e,n);case"quadBroadcast":return this.builtins.QuadBroadcast(e,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,n);case"quadSwapX":return this.builtins.QuadSwapX(e,n);case"quadSwapY":return this.builtins.QuadSwapY(e,n)}const r=n.getFunction(e.name);if(r){const i=n.clone();for(let s=0;s<r.node.args.length;++s){const a=r.node.args[s],c=this.evalExpression(e.args[s],i);i.setVariable(a.name,c,a)}return this._execStatements(r.node.body,i)}return null}_callConstructorValue(e,n){if(!e.args||e.args.length===0)return new ae(0,this.getTypeInfo(e.type));const r=this.evalExpression(e.args[0],n);return r.typeInfo=this.getTypeInfo(e.type),r.getSubData(this,e.postfix,n).clone()}_callConstructorVec(e,n){const r=this.getTypeInfo(e.type),i=e.type.getTypeName(),s=Rb[i];if(s===void 0)return console.error(`Invalid vec constructor ${i}. Line ${e.line}`),null;const a=[];if(e instanceof Zn)if(e.isVector){const c=e.vectorValue;for(const u of c)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const c of e.args){const u=this.evalExpression(c,n);if(u instanceof X){const h=u.data;for(let d=0;d<h.length;++d){let g=h[d];a.push(g)}}else if(u instanceof ae){let h=u.value;a.push(h)}}if(e.type instanceof de&&e.type.format===null&&(e.type.format=de.f32),a.length===0){const c=new Array(s).fill(0);return new X(c,r).getSubData(this,e.postfix,n)}if(a.length===1)for(;a.length<s;)a.push(a[0]);return a.length<s?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new X(a.length>s?a.slice(0,s):a,r).getSubData(this,e.postfix,n)}_callConstructorMatrix(e,n){const r=this.getTypeInfo(e.type),i=e.type.getTypeName(),s=Mr[i];if(s===void 0)return console.error(`Invalid matrix constructor ${i}. Line ${e.line}`),null;const a=[];if(e instanceof Zn)if(e.isVector){const c=e.vectorValue;for(const u of c)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const c of e.args){const u=this.evalExpression(c,n);u instanceof X?a.push(...u.data):u instanceof ae?a.push(u.value):u instanceof gt&&a.push(...u.data)}if(r instanceof Wa&&r.format===null&&(r.format=this.getTypeInfo("f32")),a.length===0){const c=new Array(s[2]).fill(0);return new gt(c,r).getSubData(this,e.postfix,n)}return a.length!==s[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new gt(a,r).getSubData(this,e.postfix,n)}}wr._breakObj=new Ei(new xi("BREAK",null),null),wr._continueObj=new Ei(new xi("CONTINUE",null),null),wr._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class S9{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class T9{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new S9,this._exec=new wr,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(const r of this._deferArrayCountEval){const i=r.arrayType,s=r.countNode;if(s instanceof ai){const a=s.name,c=this._context.constants.get(a);if(c)try{const u=c.constEvaluate(this._exec);i.count=u}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const r of n)r.search(i=>{i instanceof QT||i instanceof tp?i.type=this._forwardType(i.type):i instanceof bf?i.format=this._forwardType(i.format):i instanceof Us||i instanceof yf||i instanceof Jd?i.type=this._forwardType(i.type):i instanceof If?i.returnType=this._forwardType(i.returnType):i instanceof KT&&(i.type=this._forwardType(i.type))});return n}_forwardType(e){if(e instanceof YT){const n=this._getType(e.name);if(n)return n}else e instanceof tp?e.type=this._forwardType(e.type):e instanceof bf&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){const n=new d9(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,n){return e.line=n??this._currentLine,e}_error(e,n){return{token:e,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==W.eof}_match(e){if(e instanceof ce)return!!this._check(e)&&(this._advance(),!0);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this._check(i))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const r=n.type;let i=!1;for(const s of e){if(r===s)return!0;s===W.tokens.name&&(i=!0)}if(i){const s=W.tokens.name.rule.exec(n.lexeme);if(s&&s.index==0&&s[0]==n.lexeme)return!0}return!1}if(n.type===e)return!0;if(e===W.tokens.name){const r=W.tokens.name.rule.exec(n.lexeme);return r&&r.index==0&&r[0]==n.lexeme}return!1}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(W.tokens.semicolon)&&!this._isAtEnd(););if(this._match(W.keywords.alias)){const n=this._type_alias();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.diagnostic)){const n=this._diagnostic();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.requires)){const n=this._requires_directive();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(W.keywords.enable)){const n=this._enable_directive();return this._consume(W.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}const e=this._attribute();if(this._check(W.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(W.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}if(this._check(W.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(W.keywords.fn))return null;const e=this._currentLine,n=this._consume(W.tokens.ident,"Expected function name.").toString();this._consume(W.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(W.tokens.paren_right))do{if(this._check(W.tokens.paren_right))break;const c=this._attribute(),u=this._consume(W.tokens.name,"Expected argument name.").toString();this._consume(W.tokens.colon,"Expected ':' for argument type.");const h=this._attribute(),d=this._type_decl();d!=null&&(d.attributes=h,r.push(this._updateNode(new KT(u,d,c))))}while(this._match(W.tokens.comma));this._consume(W.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(W.tokens.arrow)){const c=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=c)}const s=this._compound_statement(),a=this._currentLine;return this._updateNode(new If(n,r,i,s,e,a),e)}_compound_statement(){const e=[];for(this._consume(W.tokens.brace_left,"Expected '{' for block.");!this._check(W.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(W.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(W.tokens.semicolon)&&!this._isAtEnd(););if(this._check(W.tokens.attr)&&this._attribute(),this._check(W.keywords.if))return this._if_statement();if(this._check(W.keywords.switch))return this._switch_statement();if(this._check(W.keywords.loop))return this._loop_statement();if(this._check(W.keywords.for))return this._for_statement();if(this._check(W.keywords.while))return this._while_statement();if(this._check(W.keywords.continuing))return this._continuing_statement();if(this._check(W.keywords.static_assert))return this._static_assert_statement();if(this._check(W.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(W.keywords.return))e=this._return_statement();else if(this._check([W.keywords.var,W.keywords.let,W.keywords.const]))e=this._variable_statement();else if(this._match(W.keywords.discard))e=this._updateNode(new u9);else if(this._match(W.keywords.break)){const n=this._updateNode(new xM);if(this._currentLoop.length>0){const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n,this._check(W.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(W.keywords.continue)){const n=this._updateNode(new wM);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(W.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(W.keywords.static_assert))return null;const e=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new a9(n),e)}_while_statement(){if(!this._match(W.keywords.while))return null;const e=this._updateNode(new hM(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(W.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(W.keywords.continuing))return null;const n=this._currentLine,r=this._compound_statement();return this._updateNode(new a0(r,e),n)}_for_statement(){if(!this._match(W.keywords.for))return null;this._consume(W.tokens.paren_left,"Expected '('.");const e=this._updateNode(new dM(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(W.tokens.semicolon)?null:this._for_init(),this._consume(W.tokens.semicolon,"Expected ';'."),e.condition=this._check(W.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(W.tokens.semicolon,"Expected ';'."),e.increment=this._check(W.tokens.paren_right)?null:this._for_increment(),this._consume(W.tokens.paren_right,"Expected ')'."),this._check(W.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(W.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(W.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new Us(e.name,e.type,e.storage,e.access,n),e.line)}if(this._match(W.keywords.let)){const e=this._currentLine,n=this._consume(W.tokens.name,"Expected name for let.").toString();let r=null;if(this._match(W.tokens.colon)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}this._consume(W.tokens.equal,"Expected '=' for let.");const i=this._short_circuit_or_expression();return this._updateNode(new yf(n,r,null,null,i),e)}if(this._match(W.keywords.const)){const e=this._currentLine,n=this._consume(W.tokens.name,"Expected name for const.").toString();let r=null;if(this._match(W.tokens.colon)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}this._consume(W.tokens.equal,"Expected '=' for const.");const i=this._short_circuit_or_expression();return r===null&&i instanceof Zn&&(r=i.type),this._updateNode(new Jd(n,r,null,null,i),e)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(W.increment_operators))return this._current=e,null;const r=this._consume(W.increment_operators,"Expected increment operator");return this._updateNode(new pM(r.type===W.tokens.plus_plus?tc.increment:tc.decrement,n))}_assignment_statement(){let e=null;const n=this._currentLine;if(this._check(W.tokens.brace_right))return null;let r=this._match(W.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;const i=this._consume(W.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return this._updateNode(new gM(cf.parse(i.lexeme),e,s),n)}_func_call_statement(){if(!this._check(W.tokens.ident))return null;const e=this._currentLine,n=this._current,r=this._consume(W.tokens.ident,"Expected function name."),i=this._argument_expression_list();return i===null?(this._current=n,null):this._updateNode(new $v(r.lexeme,i),e)}_loop_statement(){if(!this._match(W.keywords.loop))return null;this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new mM([],null));this._currentLoop.push(e);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let r of n)e.body.push(r);else e.body.push(n);if(n instanceof a0){e.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(W.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(W.keywords.switch))return null;const e=this._updateNode(new yM(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(W.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let n=!1;for(;this._check([W.keywords.default,W.keywords.case]);){if(this._match(W.keywords.case)){const r=this._case_selectors();for(const s of r)if(s instanceof np){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(W.tokens.colon),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Exected '{' for switch case.");const i=this._case_body();this._consume(W.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new RM(r,i)))}if(this._match(W.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(W.tokens.colon),this._check(W.tokens.attr)&&this._attribute(),this._consume(W.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(W.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new CM(r)))}}return e}_case_selectors(){const e=[];for(this._match(W.keywords.default)?e.push(this._updateNode(new np)):e.push(this._shift_expression());this._match(W.tokens.comma);)this._match(W.keywords.default)?e.push(this._updateNode(new np)):e.push(this._shift_expression());return e}_case_body(){if(this._match(W.keywords.fallthrough))return this._consume(W.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(W.keywords.if))return null;const e=this._currentLine,n=this._optional_paren_expression();this._check(W.tokens.attr)&&this._attribute();const r=this._compound_statement();let i=[];this._match_elseif()&&(this._check(W.tokens.attr)&&this._attribute(),i=this._elseif_statement(i));let s=null;return this._match(W.keywords.else)&&(this._check(W.tokens.attr)&&this._attribute(),s=this._compound_statement()),this._updateNode(new bM(n,r,i,s),e)}_match_elseif(){return this._tokens[this._current].type===W.keywords.else&&this._tokens[this._current+1].type===W.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(this._updateNode(new f9(n,r))),this._match_elseif()&&(this._check(W.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(W.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new _M(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(W.tokens.or_or);)e=this._updateNode(new Pi(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(W.tokens.and_and);)e=this._updateNode(new Pi(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(W.tokens.or);)e=this._updateNode(new Pi(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(W.tokens.xor);)e=this._updateNode(new Pi(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(W.tokens.and);)e=this._updateNode(new Pi(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([W.tokens.equal_equal,W.tokens.not_equal])?this._updateNode(new Pi(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([W.tokens.less_than,W.tokens.greater_than,W.tokens.less_than_equal,W.tokens.greater_than_equal]);)e=this._updateNode(new Pi(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([W.tokens.shift_left,W.tokens.shift_right]);)e=this._updateNode(new Pi(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([W.tokens.plus,W.tokens.minus]);)e=this._updateNode(new Pi(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([W.tokens.star,W.tokens.forward_slash,W.tokens.modulo]);)e=this._updateNode(new Pi(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([W.tokens.minus,W.tokens.bang,W.tokens.tilde,W.tokens.star,W.tokens.and])?this._updateNode(new $n(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(W.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(W.tokens.bracket_right,"Expected ']'.");const n=this._updateNode(new kc(e)),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(W.tokens.period)){const e=this._consume(W.tokens.name,"Expected member name."),n=this._postfix_expression(),r=this._updateNode(new qa(e.lexeme));return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const n=this._getStruct(e);if(n!==null)return n;switch(e){case"void":return Fe.void;case"bool":return Fe.bool;case"i32":return Fe.i32;case"u32":return Fe.u32;case"f32":return Fe.f32;case"f16":return Fe.f16;case"vec2f":return de.vec2f;case"vec3f":return de.vec3f;case"vec4f":return de.vec4f;case"vec2i":return de.vec2i;case"vec3i":return de.vec3i;case"vec4i":return de.vec4i;case"vec2u":return de.vec2u;case"vec3u":return de.vec3u;case"vec4u":return de.vec4u;case"vec2h":return de.vec2h;case"vec3h":return de.vec3h;case"vec4h":return de.vec4h;case"mat2x2f":return de.mat2x2f;case"mat2x3f":return de.mat2x3f;case"mat2x4f":return de.mat2x4f;case"mat3x2f":return de.mat3x2f;case"mat3x3f":return de.mat3x3f;case"mat3x4f":return de.mat3x4f;case"mat4x2f":return de.mat4x2f;case"mat4x3f":return de.mat4x3f;case"mat4x4f":return de.mat4x4f;case"mat2x2h":return de.mat2x2h;case"mat2x3h":return de.mat2x3h;case"mat2x4h":return de.mat2x4h;case"mat3x2h":return de.mat3x2h;case"mat3x3h":return de.mat3x3h;case"mat3x4h":return de.mat3x4h;case"mat4x2h":return de.mat4x2h;case"mat4x3h":return de.mat4x3h;case"mat4x4h":return de.mat4x4h;case"mat2x2i":return de.mat2x2i;case"mat2x3i":return de.mat2x3i;case"mat2x4i":return de.mat2x4i;case"mat3x2i":return de.mat3x2i;case"mat3x3i":return de.mat3x3i;case"mat3x4i":return de.mat3x4i;case"mat4x2i":return de.mat4x2i;case"mat4x3i":return de.mat4x3i;case"mat4x4i":return de.mat4x4i;case"mat2x2u":return de.mat2x2u;case"mat2x3u":return de.mat2x3u;case"mat2x4u":return de.mat2x4u;case"mat3x2u":return de.mat3x2u;case"mat3x3u":return de.mat3x3u;case"mat3x4u":return de.mat3x4u;case"mat4x2u":return de.mat4x2u;case"mat4x3u":return de.mat4x3u;case"mat4x4u":return de.mat4x4u}return null}_validateTypeRange(e,n){if(n.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(W.tokens.ident)){const r=this._previous().toString();if(this._check(W.tokens.paren_left)){const i=this._argument_expression_list(),s=this._getType(r);return s!==null?this._updateNode(new rs(s,i)):this._updateNode(new Wv(r,i))}if(this._context.constants.has(r)){const i=this._context.constants.get(r);return this._updateNode(new SM(r,i.value))}return this._updateNode(new ai(r))}if(this._match(W.tokens.int_literal)){const r=this._previous().toString();let i=r.endsWith("i")||r.endsWith("i")?Fe.i32:r.endsWith("u")||r.endsWith("U")?Fe.u32:Fe.x32;const s=parseInt(r);return this._validateTypeRange(s,i),this._updateNode(new Zn(new ae(s,this._exec.getTypeInfo(i)),i))}if(this._match(W.tokens.uint_literal)){const r=parseInt(this._previous().toString());return this._validateTypeRange(r,Fe.u32),this._updateNode(new Zn(new ae(r,this._exec.getTypeInfo(Fe.u32)),Fe.u32))}if(this._match([W.tokens.decimal_float_literal,W.tokens.hex_float_literal])){let r=this._previous().toString(),i=r.endsWith("h");i&&(r=r.substring(0,r.length-1));const s=parseFloat(r);this._validateTypeRange(s,i?Fe.f16:Fe.f32);const a=i?Fe.f16:Fe.f32;return this._updateNode(new Zn(new ae(s,this._exec.getTypeInfo(a)),a))}if(this._match([W.keywords.true,W.keywords.false])){let r=this._previous().toString()===W.keywords.true.rule;return this._updateNode(new Zn(new ae(r?1:0,this._exec.getTypeInfo(Fe.bool)),Fe.bool))}if(this._check(W.tokens.paren_left))return this._paren_expression();if(this._match(W.keywords.bitcast)){this._consume(W.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(W.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return this._updateNode(new TM(r,i))}const e=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new rs(e,n))}_argument_expression_list(){if(!this._match(W.tokens.paren_left))return null;const e=[];do{if(this._check(W.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(W.tokens.comma));return this._consume(W.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(W.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(W.tokens.paren_right),e}_paren_expression(){this._consume(W.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(W.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(W.keywords.struct))return null;const e=this._currentLine,n=this._consume(W.tokens.ident,"Expected name for struct.").toString();this._consume(W.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(W.tokens.brace_right);){const a=this._attribute(),c=this._consume(W.tokens.name,"Expected variable name.").toString();this._consume(W.tokens.colon,"Expected ':' for struct member type.");const u=this._attribute(),h=this._type_decl();h!=null&&(h.attributes=u),this._check(W.tokens.brace_right)?this._match(W.tokens.comma):this._consume(W.tokens.comma,"Expected ',' for struct member."),r.push(this._updateNode(new QT(c,h,a)))}this._consume(W.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,s=this._updateNode(new Ps(n,r,e,i),e);return this._context.structs.set(n,s),s}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(W.tokens.equal)){const n=this._const_expression();e.value=n}if(e.type!==null&&e.value instanceof Zn){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof Zn&&(e.type=e.value.type.name==="x32"?Fe.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(W.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(W.keywords.const))return null;const n=this._consume(W.tokens.name,"Expected variable name"),r=this._currentLine;let i=null;if(this._match(W.tokens.colon)){const u=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=u)}let s=null;this._consume(W.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let u=[Fe.f32],h=a.constEvaluate(this._exec,u);h instanceof ae&&this._validateTypeRange(h.value,u[0]),u[0]instanceof de&&u[0].format===null&&h.typeInfo instanceof Wa&&h.typeInfo.format!==null&&(h.typeInfo.format.name==="f16"?u[0].format=Fe.f16:h.typeInfo.format.name==="f32"?u[0].format=Fe.f32:h.typeInfo.format.name==="i32"?u[0].format=Fe.i32:h.typeInfo.format.name==="u32"?u[0].format=Fe.u32:h.typeInfo.format.name==="bool"?u[0].format=Fe.bool:console.error(`TODO: impelement template format type ${h.typeInfo.format.name}`)),s=this._updateNode(new Zn(h,u[0])),this._exec.context.setVariable(n.toString(),h)}catch{s=a}if(i!==null&&s instanceof Zn){if(s.type.name!=="x32"&&i.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${i.name}. Line:${this._currentLine}`);s.type=i,s.isScalar&&this._validateTypeRange(s.scalarValue,s.type)}else i===null&&s instanceof Zn&&(i=(e=s==null?void 0:s.type)!==null&&e!==void 0?e:Fe.f32,i===Fe.x32&&(i=Fe.i32));const c=this._updateNode(new Jd(n.toString(),i,"","",s),r);return this._context.constants.set(c.name,c),c}_global_let_decl(){if(!this._match(W.keywords.let))return null;const e=this._currentLine,n=this._consume(W.tokens.name,"Expected variable name");let r=null;if(this._match(W.tokens.colon)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}let i=null;if(this._match(W.tokens.equal)&&(i=this._const_expression()),r!==null&&i instanceof Zn){if(i.type.name!=="x32"&&r.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${r.name}. Line:${this._currentLine}`);i.type=r}else r===null&&i instanceof Zn&&(r=i.type.name==="x32"?Fe.i32:i.type);return i instanceof Zn&&i.isScalar&&this._validateTypeRange(i.scalarValue,r),this._updateNode(new yf(n.toString(),r,"","",i),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(W.keywords.var))return null;const e=this._currentLine;let n="",r="";this._match(W.tokens.less_than)&&(n=this._consume(W.storage_class,"Expected storage_class.").toString(),this._match(W.tokens.comma)&&(r=this._consume(W.access_mode,"Expected access_mode.").toString()),this._consume(W.tokens.greater_than,"Expected '>'."));const i=this._consume(W.tokens.name,"Expected variable name");let s=null;if(this._match(W.tokens.colon)){const a=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=a)}return this._updateNode(new Us(i.toString(),s,n,r,null),e)}_override_decl(){if(!this._match(W.keywords.override))return null;const e=this._consume(W.tokens.name,"Expected variable name");let n=null;if(this._match(W.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return this._updateNode(new Vv(e.toString(),n,null))}_diagnostic(){this._consume(W.tokens.paren_left,"Expected '('");const e=this._consume(W.tokens.ident,"Expected severity control name.");this._consume(W.tokens.comma,"Expected ','");let n=this._consume(W.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(W.tokens.period)&&(n+=`.${this._consume(W.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(W.tokens.paren_right,"Expected ')'"),this._updateNode(new vM(e.toString(),n))}_enable_directive(){const e=this._consume(W.tokens.ident,"identity expected.");return this._updateNode(new l9(e.toString()))}_requires_directive(){const e=[this._consume(W.tokens.ident,"identity expected.").toString()];for(;this._match(W.tokens.comma);){const n=this._consume(W.tokens.ident,"identity expected.");e.push(n.toString())}return this._updateNode(new c9(e))}_type_alias(){const e=this._consume(W.tokens.ident,"identity expected.");this._consume(W.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=this._updateNode(new Hv(e.toString(),n));return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([W.tokens.ident,...W.texel_format,W.keywords.bool,W.keywords.f32,W.keywords.i32,W.keywords.u32])){const r=this._advance().toString();if(this._context.structs.has(r))return this._context.structs.get(r);if(this._context.aliases.has(r))return this._context.aliases.get(r).type;if(!this._getType(r)){const i=this._updateNode(new YT(r));return this._forwardTypeCount++,i}return this._updateNode(new Fe(r))}let e=this._texture_sampler_types();if(e)return e;if(this._check(W.template_types)){let r=this._advance().toString(),i=null,s=null;return this._match(W.tokens.less_than)&&(i=this._type_decl(),s=null,this._match(W.tokens.comma)&&(s=this._consume(W.access_mode,"Expected access_mode for pointer").toString()),this._consume(W.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new de(r,i,s))}if(this._match(W.keywords.ptr)){let r=this._previous().toString();this._consume(W.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(W.storage_class,"Expected storage_class for pointer");this._consume(W.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let a=null;return this._match(W.tokens.comma)&&(a=this._consume(W.access_mode,"Expected access_mode for pointer").toString()),this._consume(W.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new tp(r,i.toString(),s,a))}const n=this._attribute();if(this._match(W.keywords.array)){let r=null,i=-1;const s=this._previous();let a=null;if(this._match(W.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let u="";if(this._match(W.tokens.comma)){a=this._shift_expression();try{u=a.constEvaluate(this._exec).toString(),a=null}catch{u="1"}}this._consume(W.tokens.greater_than,"Expected '>' for array."),i=u?parseInt(u):0}const c=this._updateNode(new bf(s.toString(),n,r,i));return a&&this._deferArrayCountEval.push({arrayType:c,countNode:a}),c}return null}_texture_sampler_types(){if(this._match(W.sampler_type))return this._updateNode(new uf(this._previous().toString(),null,null));if(this._match(W.depth_texture_type))return this._updateNode(new uf(this._previous().toString(),null,null));if(this._match(W.sampled_texture_type)||this._match(W.multisampled_texture_type)){const e=this._previous();this._consume(W.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(W.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new uf(e.toString(),n,null))}if(this._match(W.storage_texture_type)){const e=this._previous();this._consume(W.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(W.texel_format,"Invalid texel format.").toString();this._consume(W.tokens.comma,"Expected ',' after texel format.");const r=this._consume(W.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(W.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new uf(e.toString(),n,r))}return null}_attribute(){let e=[];for(;this._match(W.tokens.attr);){const n=this._consume(W.attribute_name,"Expected attribute name"),r=this._updateNode(new kM(n.toString(),null));if(this._match(W.tokens.paren_left)){if(r.value=this._consume(W.literal_or_ident,"Expected attribute value").toString(),this._check(W.tokens.comma)){this._advance();do{const i=this._consume(W.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(i)}while(this._match(W.tokens.comma))}this._consume(W.tokens.paren_right,"Expected ')'")}e.push(r)}return e.length==0?null:e}}class E9 extends us{constructor(e){super(),e&&this.update(e)}update(e){const n=new T9().parse(e);this.updateAST(n)}}function A9(t){var s;const e={attributes:[],bindings:[]};let n;try{n=R9(t)}catch(a){return $e.error(a.message)(),e}for(const a of n.uniforms){const c=[];for(const u of((s=a.type)==null?void 0:s.members)||[])c.push({name:u.name,type:JT(u.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:c})}for(const a of n.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of n.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const r=n.entry.vertex[0],i=(r==null?void 0:r.inputs.length)||0;for(let a=0;a<i;a++){const c=r.inputs[a];if(c.locationType==="location"){const u=JT(c.type);e.attributes.push({name:c.name,location:Number(c.location),type:u})}}return e}function JT(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function R9(t){try{return new E9(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const C9={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...C9}};const wi=globalThis.mathgl.config;function k9(t,{precision:e=wi.precision}={}){return t=M9(t),`${parseFloat(t.toPrecision(e))}`}function Mc(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lo(t,e,n){return I9(t,r=>Math.max(e,Math.min(n,r)))}function Up(t,e,n){return Mc(t)?t.map((r,i)=>Up(r,e[i],n)):n*e+(1-n)*t}function Of(t,e,n){const r=wi.EPSILON;try{if(t===e)return!0;if(Mc(t)&&Mc(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Of(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=wi.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{wi.EPSILON=r}}function M9(t){return Math.round(t/wi.EPSILON)*wi.EPSILON}function N9(t){return t.clone?t.clone():new Array(t.length)}function I9(t,e,n){if(Mc(t)){const r=t;n=n||N9(r);for(let i=0;i<n.length&&i<r.length;++i){const s=typeof t=="number"?t:t[i];n[i]=e(s,i,n)}return n}return e(t)}class MM extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Mc(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(wi)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+k9(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Of(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i],a=typeof n=="number"?n:n[i];this[i]=s+r*(a-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(wi.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function O9(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function si(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Cb(t,e,n=""){if(wi.debug&&!O9(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function eE(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class P9 extends MM{get x(){return this[0]}set x(e){this[0]=si(e)}get y(){return this[1]}set y(e){this[1]=si(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return si(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return si(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return eE(e>=0&&e<this.ELEMENTS,"index is out of range"),si(this[e])}setComponent(e,n){return eE(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}const rp=1e-6;let Nc=typeof Float32Array<"u"?Float32Array:Array;function D9(){const t=new Nc(2);return Nc!=Float32Array&&(t[0]=0,t[1]=0),t}function tE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function F9(t,e){return t[0]=-e[0],t[1]=-e[1],t}function NM(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function B9(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){const t=D9();return function(e,n,r,i,s,a){let c,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],s(t,t,a),e[c]=t[0],e[c+1]=t[1];return e}})();function j9(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function IM(t,e,n){const r=e[0],i=e[1],s=e[2],a=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/a,t[1]=(n[1]*r+n[5]*i+n[9]*s)/a,t[2]=(n[2]*r+n[6]*i+n[10]*s)/a,t}function U9(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function L9(){const t=new Nc(3);return Nc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function z9(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function V9(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function $9(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function H9(t,e,n){const r=e[0],i=e[1],s=e[2],a=n[0],c=n[1],u=n[2];return t[0]=i*u-s*c,t[1]=s*a-r*u,t[2]=r*c-i*a,t}function OM(t,e,n){const r=e[0],i=e[1],s=e[2];let a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,t}function W9(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function q9(t,e,n){const r=n[0],i=n[1],s=n[2],a=n[3],c=e[0],u=e[1],h=e[2];let d=i*h-s*u,g=s*c-r*h,b=r*u-i*c,S=i*b-s*g,R=s*d-r*b,A=r*g-i*d;const C=a*2;return d*=C,g*=C,b*=C,S*=2,R*=2,A*=2,t[0]=c+d+S,t[1]=u+g+R,t[2]=h+b+A,t}function X9(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Y9(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function K9(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Q9(t,e){const n=t[0],r=t[1],i=t[2],s=e[0],a=e[1],c=e[2],u=Math.sqrt((n*n+r*r+i*i)*(s*s+a*a+c*c)),h=u&&$9(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}const Z9=z9;(function(){const t=L9();return function(e,n,r,i,s,a){let c,u;for(n||(n=3),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],s(t,t,a),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();const kb=[0,0,0];let Od;class ds extends P9{static get ZERO(){return Od||(Od=new ds(0,0,0),Object.freeze(Od)),Od}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Mc(e)?this.copy(e):(wi.debug&&(si(e),si(n),si(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return wi.debug&&(si(e.x),si(e.y),si(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=si(e)}angle(e){return Q9(this,e)}cross(e){return H9(this,this,e),this.check()}rotateX({radians:e,origin:n=kb}){return X9(this,this,n,e),this.check()}rotateY({radians:e,origin:n=kb}){return Y9(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=kb}){return K9(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return OM(this,this,e),this.check()}transformAsVector(e){return IM(this,this,e),this.check()}transformByMatrix3(e){return W9(this,this,e),this.check()}transformByMatrix2(e){return U9(this,this,e),this.check()}transformByQuaternion(e){return q9(this,this,e),this.check()}}let G9=class extends MM{toString(){let e="[";if(wi.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=si(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}};function J9(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e7(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],a=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=a,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c0(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],d=e[8],g=e[9],b=e[10],S=e[11],R=e[12],A=e[13],C=e[14],k=e[15],P=n*c-r*a,M=n*u-i*a,z=n*h-s*a,$=r*u-i*c,F=r*h-s*c,Z=i*h-s*u,Q=d*A-g*R,ue=d*C-b*R,Y=d*k-S*R,K=g*C-b*A,ie=g*k-S*A,_e=b*k-S*C;let re=P*_e-M*ie+z*K+$*Y-F*ue+Z*Q;return re?(re=1/re,t[0]=(c*_e-u*ie+h*K)*re,t[1]=(i*ie-r*_e-s*K)*re,t[2]=(A*Z-C*F+k*$)*re,t[3]=(b*F-g*Z-S*$)*re,t[4]=(u*Y-a*_e-h*ue)*re,t[5]=(n*_e-i*Y+s*ue)*re,t[6]=(C*z-R*Z-k*M)*re,t[7]=(d*Z-b*z+S*M)*re,t[8]=(a*ie-c*Y+h*Q)*re,t[9]=(r*Y-n*ie-s*Q)*re,t[10]=(R*F-A*z+k*P)*re,t[11]=(g*z-d*F-S*P)*re,t[12]=(c*ue-a*K-u*Q)*re,t[13]=(n*K-r*ue+i*Q)*re,t[14]=(A*M-R*$-C*P)*re,t[15]=(d*$-g*M+b*P)*re,t):null}function t7(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],h=t[8],d=t[9],g=t[10],b=t[11],S=t[12],R=t[13],A=t[14],C=t[15],k=e*a-n*s,P=e*c-r*s,M=n*c-r*a,z=h*R-d*S,$=h*A-g*S,F=d*A-g*R,Z=e*F-n*$+r*z,Q=s*F-a*$+c*z,ue=h*M-d*P+g*k,Y=S*M-R*P+A*k;return u*Z-i*Q+C*ue-b*Y}function Da(t,e,n){const r=e[0],i=e[1],s=e[2],a=e[3],c=e[4],u=e[5],h=e[6],d=e[7],g=e[8],b=e[9],S=e[10],R=e[11],A=e[12],C=e[13],k=e[14],P=e[15];let M=n[0],z=n[1],$=n[2],F=n[3];return t[0]=M*r+z*c+$*g+F*A,t[1]=M*i+z*u+$*b+F*C,t[2]=M*s+z*h+$*S+F*k,t[3]=M*a+z*d+$*R+F*P,M=n[4],z=n[5],$=n[6],F=n[7],t[4]=M*r+z*c+$*g+F*A,t[5]=M*i+z*u+$*b+F*C,t[6]=M*s+z*h+$*S+F*k,t[7]=M*a+z*d+$*R+F*P,M=n[8],z=n[9],$=n[10],F=n[11],t[8]=M*r+z*c+$*g+F*A,t[9]=M*i+z*u+$*b+F*C,t[10]=M*s+z*h+$*S+F*k,t[11]=M*a+z*d+$*R+F*P,M=n[12],z=n[13],$=n[14],F=n[15],t[12]=M*r+z*c+$*g+F*A,t[13]=M*i+z*u+$*b+F*C,t[14]=M*s+z*h+$*S+F*k,t[15]=M*a+z*d+$*R+F*P,t}function Lp(t,e,n){const r=n[0],i=n[1],s=n[2];let a,c,u,h,d,g,b,S,R,A,C,k;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(a=e[0],c=e[1],u=e[2],h=e[3],d=e[4],g=e[5],b=e[6],S=e[7],R=e[8],A=e[9],C=e[10],k=e[11],t[0]=a,t[1]=c,t[2]=u,t[3]=h,t[4]=d,t[5]=g,t[6]=b,t[7]=S,t[8]=R,t[9]=A,t[10]=C,t[11]=k,t[12]=a*r+d*i+R*s+e[12],t[13]=c*r+g*i+A*s+e[13],t[14]=u*r+b*i+C*s+e[14],t[15]=h*r+S*i+k*s+e[15]),t}function Qv(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function n7(t,e,n,r){let i=r[0],s=r[1],a=r[2],c=Math.sqrt(i*i+s*s+a*a),u,h,d,g,b,S,R,A,C,k,P,M,z,$,F,Z,Q,ue,Y,K,ie,_e,re,Te;return c<rp?null:(c=1/c,i*=c,s*=c,a*=c,h=Math.sin(n),u=Math.cos(n),d=1-u,g=e[0],b=e[1],S=e[2],R=e[3],A=e[4],C=e[5],k=e[6],P=e[7],M=e[8],z=e[9],$=e[10],F=e[11],Z=i*i*d+u,Q=s*i*d+a*h,ue=a*i*d-s*h,Y=i*s*d-a*h,K=s*s*d+u,ie=a*s*d+i*h,_e=i*a*d+s*h,re=s*a*d-i*h,Te=a*a*d+u,t[0]=g*Z+A*Q+M*ue,t[1]=b*Z+C*Q+z*ue,t[2]=S*Z+k*Q+$*ue,t[3]=R*Z+P*Q+F*ue,t[4]=g*Y+A*K+M*ie,t[5]=b*Y+C*K+z*ie,t[6]=S*Y+k*K+$*ie,t[7]=R*Y+P*K+F*ie,t[8]=g*_e+A*re+M*Te,t[9]=b*_e+C*re+z*Te,t[10]=S*_e+k*re+$*Te,t[11]=R*_e+P*re+F*Te,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function PM(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+h*r,t[5]=a*i+d*r,t[6]=c*i+g*r,t[7]=u*i+b*r,t[8]=h*i-s*r,t[9]=d*i-a*r,t[10]=g*i-c*r,t[11]=b*i-u*r,t}function r7(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],a=e[1],c=e[2],u=e[3],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-h*r,t[1]=a*i-d*r,t[2]=c*i-g*r,t[3]=u*i-b*r,t[8]=s*r+h*i,t[9]=a*r+d*i,t[10]=c*r+g*i,t[11]=u*r+b*i,t}function DM(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],a=e[1],c=e[2],u=e[3],h=e[4],d=e[5],g=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+h*r,t[1]=a*i+d*r,t[2]=c*i+g*r,t[3]=u*i+b*r,t[4]=h*i-s*r,t[5]=d*i-a*r,t[6]=g*i-c*r,t[7]=b*i-u*r,t}function i7(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],a=n+n,c=r+r,u=i+i,h=n*a,d=r*a,g=r*c,b=i*a,S=i*c,R=i*u,A=s*a,C=s*c,k=s*u;return t[0]=1-g-R,t[1]=d+k,t[2]=b-C,t[3]=0,t[4]=d-k,t[5]=1-h-R,t[6]=S+A,t[7]=0,t[8]=b+C,t[9]=S-A,t[10]=1-h-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s7(t,e,n,r,i,s,a){const c=1/(n-e),u=1/(i-r),h=1/(s-a);return t[0]=s*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(i+r)*u,t[10]=(a+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*h,t[15]=0,t}function o7(t,e,n,r,i){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){const a=1/(r-i);t[10]=(i+r)*a,t[14]=2*i*r*a}else t[10]=-1,t[14]=-2*r;return t}const a7=o7;function l7(t,e,n,r,i,s,a){const c=1/(e-n),u=1/(r-i),h=1/(s-a);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*c,t[13]=(i+r)*u,t[14]=(a+s)*h,t[15]=1,t}const c7=l7;function u7(t,e,n,r){let i,s,a,c,u,h,d,g,b,S;const R=e[0],A=e[1],C=e[2],k=r[0],P=r[1],M=r[2],z=n[0],$=n[1],F=n[2];return Math.abs(R-z)<rp&&Math.abs(A-$)<rp&&Math.abs(C-F)<rp?J9(t):(g=R-z,b=A-$,S=C-F,i=1/Math.sqrt(g*g+b*b+S*S),g*=i,b*=i,S*=i,s=P*S-M*b,a=M*g-k*S,c=k*b-P*g,i=Math.sqrt(s*s+a*a+c*c),i?(i=1/i,s*=i,a*=i,c*=i):(s=0,a=0,c=0),u=b*c-S*a,h=S*s-g*c,d=g*a-b*s,i=Math.sqrt(u*u+h*h+d*d),i?(i=1/i,u*=i,h*=i,d*=i):(u=0,h=0,d=0),t[0]=s,t[1]=u,t[2]=g,t[3]=0,t[4]=a,t[5]=h,t[6]=b,t[7]=0,t[8]=c,t[9]=d,t[10]=S,t[11]=0,t[12]=-(s*R+a*A+c*C),t[13]=-(u*R+h*A+d*C),t[14]=-(g*R+b*A+S*C),t[15]=1,t)}function f7(){const t=new Nc(4);return Nc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function h7(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Gf(t,e,n){const r=e[0],i=e[1],s=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*a,t}(function(){const t=f7();return function(e,n,r,i,s,a){let c,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,c=r;c<u;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],s(t,t,a),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();var u0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(u0||(u0={}));const d7=45*Math.PI/180,p7=1,Mb=.1,Nb=500,g7=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class ps extends G9{static get IDENTITY(){return y7()}static get ZERO(){return m7()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return u0}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,a,c,u,h,d,g,b,S,R,A,C){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=a,this[6]=c,this[7]=u,this[8]=h,this[9]=d,this[10]=g,this[11]=b,this[12]=S,this[13]=R,this[14]=A,this[15]=C,this.check()}setRowMajor(e,n,r,i,s,a,c,u,h,d,g,b,S,R,A,C){return this[0]=e,this[1]=s,this[2]=h,this[3]=S,this[4]=n,this[5]=a,this[6]=d,this[7]=R,this[8]=r,this[9]=c,this[10]=g,this[11]=A,this[12]=i,this[13]=u,this[14]=b,this[15]=C,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(g7)}fromObject(e){return this.check()}fromQuaternion(e){return i7(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:a=Mb,far:c=Nb}=e;return c===1/0?b7(this,n,r,i,s,a):s7(this,n,r,i,s,a,c),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return u7(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:a=Mb,far:c=Nb}=e;return c7(this,n,r,i,s,a,c),this.check()}orthographic(e){const{fovy:n=d7,aspect:r=p7,focalDistance:i=1,near:s=Mb,far:a=Nb}=e;nE(n);const c=n/2,u=i*Math.tan(c),h=u*r;return this.ortho({left:-h,right:h,bottom:-u,top:u,near:s,far:a})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return nE(n),a7(this,n,r,i,s),this.check()}determinant(){return t7(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],a=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],a=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*a,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*a,e}transpose(){return e7(this,this),this.check()}invert(){return c0(this,this),this.check()}multiplyLeft(e){return Da(this,e,this),this.check()}multiplyRight(e){return Da(this,this,e),this.check()}rotateX(e){return PM(this,this,e),this.check()}rotateY(e){return r7(this,this,e),this.check()}rotateZ(e){return DM(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return n7(this,this,e,n),this.check()}scale(e){return Qv(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Lp(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Gf(n||[-0,-0,-0,-0],e,this),Cb(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=B9(n||[-0,-0],e,this);break;case 3:i=OM(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Cb(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=j9(n||[-0,-0],e,this);break;case 3:r=IM(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Cb(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Pd,Dd;function m7(){return Pd||(Pd=new ps([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Pd)),Pd}function y7(){return Dd||(Dd=new ps,Object.freeze(Dd)),Dd}function nE(t){if(t>Math.PI*2)throw Error("expected radians")}function b7(t,e,n,r,i,s){const a=2*s/(n-e),c=2*s/(i-r),u=(n+e)/(n-e),h=(i+r)/(i-r),d=-1,g=-1,b=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=g,t[12]=0,t[13]=0,t[14]=b,t[15]=0,t}function FM(t,e=[],n=0){const r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function _7(t){return t-Math.fround(t)}function v7(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=n*4+r;FM(t[r*4+n],e,i*2)}return e}const x7=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,w7={name:"fp32",vs:x7},S7=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,T7={ONE:1},E7={name:"fp64arithmetic",vs:S7,defaultUniforms:T7,uniformTypes:{ONE:"f32"},fp64ify:FM,fp64LowPart:_7,fp64ifyMatrix4:v7},A7=[0,1,1,1],R7=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,C7=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,rE={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:A7},vs:R7,fs:C7,getUniforms:k7};function k7(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const r=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=r}if(t.highlightColor){const r=Array.from(t.highlightColor,i=>i/255);Number.isFinite(r[3])||(r[3]=1),n.highlightColor=r}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}const iE=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,M7={name:"layer",vs:iE,fs:iE,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},N7=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,BM="#define SMOOTH_EDGE_RADIUS 0.5",I7=`${BM}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,O7=`${BM}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,jM={name:"geometry",source:N7,vs:I7,fs:O7},P7=25;var Wn;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(Wn||(Wn={}));var Gn;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(Gn||(Gn={}));var _t;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(_t||(_t={}));const D7="compute",F7="auto",f0="manipulation",ip="none",h0="pan-x",d0="pan-y";function B7(t){if(t.includes(ip))return ip;const e=t.includes(h0),n=t.includes(d0);return e&&n?ip:e||n?e?h0:d0:t.includes(f0)?f0:F7}class j7{constructor(e,n){this.actions="",this.manager=e,this.set(n)}set(e){e===D7&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const n of this.manager.recognizers)n.options.enable&&(e=e.concat(n.getTouchAction()));return B7(e.join(" "))}}function zp(t){return t.trim().split(/\s+/g)}function Ib(t,e,n){if(t)for(const r of zp(e))t.addEventListener(r,n,!1)}function Ob(t,e,n){if(t)for(const r of zp(e))t.removeEventListener(r,n,!1)}function sE(t){return(t.ownerDocument||t).defaultView}function U7(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function UM(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let n=0,r=0,i=0;for(;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:Math.round(n/e),y:Math.round(r/e)}}function oE(t){const e=[];let n=0;for(;n<t.pointers.length;)e[n]={clientX:Math.round(t.pointers[n].clientX),clientY:Math.round(t.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:e,center:UM(e),deltaX:t.deltaX,deltaY:t.deltaY}}function LM(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function aE(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function L7(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)*180/Math.PI}function lE(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.atan2(r,n)*180/Math.PI}function zM(t,e){return t===e?Gn.None:Math.abs(t)>=Math.abs(e)?t<0?Gn.Left:Gn.Right:e<0?Gn.Up:Gn.Down}function z7(t,e){const n=e.center;let r=t.offsetDelta,i=t.prevDelta;const s=t.prevInput;return(e.eventType===Wn.Start||(s==null?void 0:s.eventType)===Wn.End)&&(i=t.prevDelta={x:(s==null?void 0:s.deltaX)||0,y:(s==null?void 0:s.deltaY)||0},r=t.offsetDelta={x:n.x,y:n.y}),{deltaX:i.x+(n.x-r.x),deltaY:i.y+(n.y-r.y)}}function VM(t,e,n){return{x:e/t||0,y:n/t||0}}function V7(t,e){return aE(e[0],e[1])/aE(t[0],t[1])}function $7(t,e){return lE(e[1],e[0])-lE(t[1],t[0])}function H7(t,e){const n=t.lastInterval||e,r=e.timeStamp-n.timeStamp;let i,s,a,c;if(e.eventType!==Wn.Cancel&&(r>P7||n.velocity===void 0)){const u=e.deltaX-n.deltaX,h=e.deltaY-n.deltaY,d=VM(r,u,h);s=d.x,a=d.y,i=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,c=zM(u,h),t.lastInterval=e}else i=n.velocity,s=n.velocityX,a=n.velocityY,c=n.direction;e.velocity=i,e.velocityX=s,e.velocityY=a,e.direction=c}function W7(t,e){const{session:n}=t,{pointers:r}=e,{length:i}=r;n.firstInput||(n.firstInput=oE(e)),i>1&&!n.firstMultiple?n.firstMultiple=oE(e):i===1&&(n.firstMultiple=!1);const{firstInput:s,firstMultiple:a}=n,c=a?a.center:s.center,u=e.center=UM(r);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=L7(c,u),e.distance=LM(c,u);const{deltaX:h,deltaY:d}=z7(n,e);e.deltaX=h,e.deltaY=d,e.offsetDirection=zM(e.deltaX,e.deltaY);const g=VM(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=g.x,e.overallVelocityY=g.y,e.overallVelocity=Math.abs(g.x)>Math.abs(g.y)?g.x:g.y,e.scale=a?V7(a.pointers,r):1,e.rotation=a?$7(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;let b=t.element;return U7(e.srcEvent.target,b)&&(b=e.srcEvent.target),e.target=b,H7(n,e),e}function q7(t,e,n){const r=n.pointers.length,i=n.changedPointers.length,s=e&Wn.Start&&r-i===0,a=e&(Wn.End|Wn.Cancel)&&r-i===0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e;const c=W7(t,n);t.emit("hammer.input",c),t.recognize(c),t.session.prevInput=c}let X7=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,n){q7(this.manager,e,n)}init(){Ib(this.element,this.evEl,this.domHandler),Ib(this.target,this.evTarget,this.domHandler),Ib(sE(this.element),this.evWin,this.domHandler)}destroy(){Ob(this.element,this.evEl,this.domHandler),Ob(this.target,this.evTarget,this.domHandler),Ob(sE(this.element),this.evWin,this.domHandler)}};const Y7={pointerdown:Wn.Start,pointermove:Wn.Move,pointerup:Wn.End,pointercancel:Wn.Cancel,pointerout:Wn.Cancel},K7="pointerdown",Q7="pointermove pointerup pointercancel";class Z7 extends X7{constructor(e){super(e),this.evEl=K7,this.evWin=Q7,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:n}=this;let r=!1;const i=Y7[e.type],s=e.pointerType,a=s==="touch";let c=n.findIndex(u=>u.pointerId===e.pointerId);i&Wn.Start&&(e.buttons||a)?c<0&&(n.push(e),c=n.length-1):i&(Wn.End|Wn.Cancel)&&(r=!0),!(c<0)&&(n[c]=e,this.callback(i,{pointers:n,changedPointers:[e],eventType:i,pointerType:s,srcEvent:e}),r&&n.splice(c,1))}}const G7=["","webkit","Moz","MS","ms","o"];function J7(t,e){const n=e[0].toUpperCase()+e.slice(1);for(const r of G7){const i=r?r+n:e;if(i in t)return i}}const e$=1,cE=2,uE={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class t${constructor(e,n){this.options={...uE,...n,cssProps:{...uE.cssProps,...n.cssProps},inputTarget:n.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new Z7(this),this.touchAction=new j7(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?cE:e$}recognize(e){const{session:n}=this;if(n.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let r;const{recognizers:i}=this;let{curRecognizer:s}=n;(!s||s&&s.state&_t.Recognized)&&(s=n.curRecognizer=null);let a=0;for(;a<i.length;)r=i[a],n.stopped!==cE&&(!s||r===s||r.canRecognizeWith(s))?r.recognize(e):r.reset(),!s&&r.state&(_t.Began|_t.Changed|_t.Ended)&&(s=n.curRecognizer=r),a++}get(e){const{recognizers:n}=this;for(let r=0;r<n.length;r++)if(n[r].options.event===e)return n[r];return null}add(e){if(Array.isArray(e)){for(const r of e)this.add(r);return this}const n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const r of e)this.remove(r);return this}const n=typeof e=="string"?this.get(e):e;if(n){const{recognizers:r}=this,i=r.indexOf(n);i!==-1&&(r.splice(i,1),this.touchAction.update())}return this}on(e,n){if(!e||!n)return;const{handlers:r}=this;for(const i of zp(e))r[i]=r[i]||[],r[i].push(n)}off(e,n){if(!e)return;const{handlers:r}=this;for(const i of zp(e))n?r[i]&&r[i].splice(r[i].indexOf(n),1):delete r[i]}emit(e,n){const r=this.handlers[e]&&this.handlers[e].slice();if(!r||!r.length)return;const i=n;i.type=e,i.preventDefault=function(){n.srcEvent.preventDefault()};let s=0;for(;s<r.length;)r[s](i),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:n}=this;if(n){for(const[r,i]of Object.entries(this.options.cssProps)){const s=J7(n.style,r);e?(this.oldCssProps[s]=n.style[s],n.style[s]=i):n.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let n$=1;function r$(){return n$++}function fE(t){return t&_t.Cancelled?"cancel":t&_t.Ended?"end":t&_t.Changed?"move":t&_t.Began?"start":""}class $M{constructor(e){this.options=e,this.id=r$(),this.state=_t.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const i of e)this.recognizeWith(i);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{simultaneous:r}=this;return r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const r of e)this.dropRecognizeWith(r);return this}let n;return typeof e=="string"?n=this.manager.get(e):n=e,n&&delete this.simultaneous[n.id],this}requireFailure(e){if(Array.isArray(e)){for(const i of e)this.requireFailure(i);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{requireFail:r}=this;return r.indexOf(n)===-1&&(r.push(n),n.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const r of e)this.dropRequireFailure(r);return this}let n;if(typeof e=="string"?n=this.manager.get(e):n=e,n){const r=this.requireFail.indexOf(n);r>-1&&this.requireFail.splice(r,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:n}=this;n<_t.Ended&&this.manager.emit(this.options.event+fE(n),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),n>=_t.Ended&&this.manager.emit(this.options.event+fE(n),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=_t.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(_t.Failed|_t.Possible)))return!1;e++}return!0}recognize(e){const n={...e};if(!this.options.enable){this.reset(),this.state=_t.Failed;return}this.state&(_t.Recognized|_t.Cancelled|_t.Failed)&&(this.state=_t.Possible),this.state=this.process(n),this.state&(_t.Began|_t.Changed|_t.Ended|_t.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class HM extends $M{attrTest(e){const n=this.options.pointers;return n===0||e.pointers.length===n}process(e){const{state:n}=this,{eventType:r}=e,i=n&(_t.Began|_t.Changed),s=this.attrTest(e);return i&&(r&Wn.Cancel||!s)?n|_t.Cancelled:i||s?r&Wn.End?n|_t.Ended:n&_t.Began?n|_t.Changed:_t.Began:_t.Failed}}class hE extends $M{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[f0]}process(e){const{options:n}=this,r=e.pointers.length===n.pointers,i=e.distance<n.threshold,s=e.deltaTime<n.time;if(this.reset(),e.eventType&Wn.Start&&this.count===0)return this.failTimeout();if(i&&s&&r){if(e.eventType!==Wn.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<n.interval:!0,c=!this.pCenter||LM(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!c||!a?this.count=1:this.count+=1,this._input=e,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=_t.Recognized,this.tryEmit(this._input)},n.interval),_t.Began):_t.Recognized}return _t.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=_t.Failed},this.options.interval),_t.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===_t.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const i$=["","start","move","end","cancel","up","down","left","right"];class dE extends HM{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:Gn.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,n=[];return e&Gn.Horizontal&&n.push(d0),e&Gn.Vertical&&n.push(h0),n}getEventNames(){return i$.map(e=>this.options.event+e)}directionTest(e){const{options:n}=this;let r=!0,{distance:i}=e,{direction:s}=e;const a=e.deltaX,c=e.deltaY;return s&n.direction||(n.direction&Gn.Horizontal?(s=a===0?Gn.None:a<0?Gn.Left:Gn.Right,r=a!==this.pX,i=Math.abs(e.deltaX)):(s=c===0?Gn.None:c<0?Gn.Up:Gn.Down,r=c!==this.pY,i=Math.abs(e.deltaY))),e.direction=s,r&&i>n.threshold&&!!(s&n.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&_t.Began)||!(this.state&_t.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const n=Gn[e.direction].toLowerCase();n&&(e.additionalEvent=this.options.event+n),super.emit(e)}}const s$=["","start","move","end","cancel","in","out"];class o$ extends HM{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[ip]}getEventNames(){return s$.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&_t.Began))}emit(e){if(e.scale!==1){const n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}super.emit(e)}}class kg{constructor(e,n,r){this.element=e,this.callback=n,this.options=r}}const a$=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",l$=a$.indexOf("firefox")!==-1,pE=4.000244140625,c$=40,u$=.25;class f$ extends kg{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;globalThis.WheelEvent&&(l$&&i.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(s/=globalThis.devicePixelRatio),i.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(s*=c$)),s!==0&&s%pE===0&&(s=Math.floor(s/pE)),i.shiftKey&&s&&(s=s*u$),this.callback({type:"wheel",center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,n){e==="wheel"&&(this.options.enable=n)}}const gE=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class h$ extends kg{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,gE.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){gE.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){switch(e){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const mE=["keydown","keyup"];class d$ extends kg{constructor(e,n,r){super(e,n,{enable:!0,tabIndex:0,...r}),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:"keydown",srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:"keyup",srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",mE.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){mE.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e==="keydown"&&(this.enableDownEvent=n),e==="keyup"&&(this.enableUpEvent=n)}}class p$ extends kg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e==="contextmenu"&&(this.options.enable=n)}}const yE=1,p0=2,bE=4,g$={pointerdown:yE,pointermove:p0,pointerup:bE,mousedown:yE,mousemove:p0,mouseup:bE},m$=0,y$=1,b$=2,_$=1,v$=2,x$=4;function w$(t){const e=g$[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let i=!1,s=!1,a=!1;return e===p0?(i=!!(n&_$),s=!!(n&x$),a=!!(n&v$)):(i=r===m$,s=r===y$,a=r===b$),{leftButton:i,middleButton:s,rightButton:a}}function S$(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,a={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:a}}const T$={srcElement:"root",priority:0};class E${constructor(e,n){this.handleEvent=r=>{if(this.isEmpty())return;const i=this._normalizeEvent(r);let s=r.srcEvent.target;for(;s&&s!==i.rootElement;){if(this._emit(i,s),i.handled)return;s=s.parentNode}this._emit(i,"root")},this.eventManager=e,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:a,handlersByElement:c}=this,u={...T$,...r};let h=c.get(u.srcElement);h||(h=[],c.set(u.srcElement,h));const d={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};i&&(d.once=!0),s&&(d.passive=!0),a.push(d),this._active=this._active||!d.passive;let g=h.length-1;for(;g>=0&&!(h[g].priority>=d.priority);)g--;h.splice(g+1,0,d)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.type===e&&a.handler===n){r.splice(s,1);const c=i.get(a.srcElement);c.splice(c.indexOf(a),1),c.length===0&&i.delete(a.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},a=()=>{e.handled=!0,i=!0},c=[];for(let u=0;u<r.length;u++){const{type:h,handler:d,once:g}=r[u];if(d({...e,type:h,stopPropagation:s,stopImmediatePropagation:a}),g&&c.push(r[u]),i)break}for(let u=0;u<c.length;u++){const{type:h,handler:d}=c[u];this.remove(h,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...w$(e),...S$(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function A$(t){if("recognizer"in t)return t;let e;const n=Array.isArray(t)?[...t]:[t];if(typeof n[0]=="function"){const r=n.shift(),i=n.shift()||{};e=new r(i)}else e=n.shift();return{recognizer:e,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class R${constructor(e=null,n={}){if(this._onBasicInput=r=>{this.manager.emit(r.srcEvent.type,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=e,!!e){this.manager=new t$(e,this.options);for(const r of this.options.recognizers){const{recognizer:i,recognizeWith:s,requireFailure:a}=A$(r);this.manager.add(i),s&&i.recognizeWith(s),a&&i.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new f$(e,this._onOtherEvent,{enable:!1}),this.moveInput=new h$(e,this._onOtherEvent,{enable:!1}),this.keyInput=new d$(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new p$(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){var s,a,c,u;const{manager:r}=this;if(!r)return;const i=r.get(e);i&&(i.set({enable:n}),r.touchAction.update()),(s=this.wheelInput)==null||s.enableEventType(e,n),(a=this.moveInput)==null||a.enableEventType(e,n),(c=this.keyInput)==null||c.enableEventType(e,n),(u=this.contextmenuInput)==null||u.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const[h,d]of Object.entries(e))this._addEventHandler(h,d,r,i,s);return}const{manager:a,events:c}=this;if(!a)return;let u=c.get(e);if(!u){const h=this._getRecognizerName(e)||e;u=new E$(this,h),c.set(e,u),a&&a.on(e,u.handleEvent)}u.add(e,n,r,i,s),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const[s,a]of Object.entries(e))this._removeEventHandler(s,a);return}const{events:r}=this,i=r.get(e);if(i&&(i.remove(e,n),i.isEmpty())){const{recognizerName:s}=i;let a=!1;for(const c of r.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}_getRecognizerName(e){var n;return(n=this.manager.recognizers.find(r=>r.getEventNames().includes(e)))==null?void 0:n.options.event}}const Wt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Wt,"IDENTITY",{get:()=>(yn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const vi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ic={common:0,meters:1,pixels:2},g0={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},_E={multipan:[dE,{threshold:10,direction:Gn.Vertical,pointers:2}],pinch:[o$,{},null,["multipan"]],pan:[dE,{threshold:1},["pinch"],["multipan"]],dblclick:[hE,{event:"dblclick",taps:2}],click:[hE,{event:"click"},null,["dblclick"]]};function C$(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Jf(t){let e={},n;return r=>{for(const i in r)if(!C$(r[i],e[i])){n=t(r),e=r;break}return n}}const vE=[0,0,0,0],k$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],WM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M$=[0,0,0],qM=[0,0,0],N$=Jf(P$);function XM(t,e,n=qM){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===Wt.LNGLAT_OFFSETS||e===Wt.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case vi.WEB_MERCATOR:(e===Wt.LNGLAT||e===Wt.CARTESIAN)&&(i=[0,0,0],s=!1);break;case vi.WEB_MERCATOR_AUTO_OFFSET:e===Wt.LNGLAT?r=i:e===Wt.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case vi.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case vi.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function I$(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:a}=t,c=vE,u=vE,h=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:g,offsetMode:b}=XM(t,e,n);return b&&(u=t.projectPosition(d||g),h=[h[0]-u[0],h[1]-u[1],h[2]-u[2]],u[3]=1,c=Gf([],u,a),s=r||s,a=Da([],i,s),a=Da([],a,k$)),{viewMatrix:s,viewProjectionMatrix:a,projectionCenter:c,originCommon:u,cameraPosCommon:h,shaderCoordinateOrigin:g,geospatialOrigin:d}}function O$({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=Wt.DEFAULT,coordinateOrigin:i=qM,autoWrapLongitude:s=!1}){r===Wt.DEFAULT&&(r=t.isGeospatial?Wt.LNGLAT:Wt.CARTESIAN);const a=N$({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return a.wrapLongitude=s,a.modelMatrix=n||WM,a}function P$({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:c,shaderCoordinateOrigin:u,geospatialOrigin:h}=I$(t,n,r),d=t.getDistanceScales(),g=[t.width*e,t.height*e],b=Gf([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,S={coordinateSystem:n,projectionMode:t.projectionMode,coordinateOrigin:u,commonOrigin:a.slice(0,3),center:i,pseudoMeters:!!t._pseudoMeters,viewportSize:g,devicePixelRatio:e,focalDistance:b,commonUnitsPerMeter:d.unitsPerMeter,commonUnitsPerWorldUnit:d.unitsPerMeter,commonUnitsPerWorldUnit2:M$,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:WM,cameraPosition:c};if(h){const R=t.getDistanceScales(h);switch(n){case Wt.METER_OFFSETS:S.commonUnitsPerWorldUnit=R.unitsPerMeter,S.commonUnitsPerWorldUnit2=R.unitsPerMeter2;break;case Wt.LNGLAT:case Wt.LNGLAT_OFFSETS:t._pseudoMeters||(S.commonUnitsPerMeter=R.unitsPerMeter),S.commonUnitsPerWorldUnit=R.unitsPerDegree,S.commonUnitsPerWorldUnit2=R.unitsPerDegree2;break;case Wt.CARTESIAN:S.commonUnitsPerWorldUnit=[1,1,R.unitsPerMeter[2]],S.commonUnitsPerWorldUnit2=[0,0,R.unitsPerMeter2[2]];break}}return S}const D$=Object.keys(Wt).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${Wt[t]};`).join(""),F$=Object.keys(vi).map(t=>`const PROJECTION_MODE_${t}: i32 = ${vi[t]};`).join(""),B$=Object.keys(Ic).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${Ic[t]};`).join(""),j$=`${D$}
${F$}
${B$}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,U$=`${j$}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,L$=Object.keys(Wt).map(t=>`const int COORDINATE_SYSTEM_${t} = ${Wt[t]};`).join(""),z$=Object.keys(vi).map(t=>`const int PROJECTION_MODE_${t} = ${vi[t]};`).join(""),V$=Object.keys(Ic).map(t=>`const int UNIT_${t.toUpperCase()} = ${Ic[t]};`).join(""),$$=`${L$}
${z$}
${V$}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,H$={};function W$(t=H$){return"viewport"in t?O$(t):{}}const Zv={name:"project",dependencies:[w7,jM],source:U$,vs:$$,getUniforms:W$,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},q$=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,X$=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Y$={name:"project32",dependencies:[Zv],source:q$,vs:X$};function K$(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function uc(t,e){const n=Gf([],e,t);return h7(n,n,1/n[3]),n}function xE(t,e){const n=t%e;return n<0?e+n:n}function m0(t,e,n){return t<e?e:t>n?n:t}function Q$(t){return Math.log(t)*Math.LOG2E}const Gv=Math.log2||Q$;function $s(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Li=Math.PI,YM=Li/4,Si=Li/180,y0=180/Li,Oc=512,Vp=4003e4,Fd=85.051129,Z$=1.5;function G$(t){return Gv(t)}function $p(t){const[e,n]=t;$s(Number.isFinite(e)),$s(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Si,i=n*Si,s=Oc*(r+Li)/(2*Li),a=Oc*(Li+Math.log(Math.tan(YM+i*.5)))/(2*Li);return[s,a]}function Pc(t){const[e,n]=t,r=e/Oc*(2*Li)-Li,i=2*(Math.atan(Math.exp(n/Oc*(2*Li)-Li))-YM);return[r*y0,i*y0]}function J$(t){const{latitude:e}=t;$s(Number.isFinite(e));const n=Math.cos(e*Si);return G$(Vp*n)-9}function Pb(t){const e=Math.cos(t*Si);return Oc/Vp/e}function b0(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;$s(Number.isFinite(e)&&Number.isFinite(n));const i=Oc,s=Math.cos(e*Si),a=i/360,c=a/s,u=i/Vp/s,h={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[a,c,u],degreesPerUnit:[1/a,1/c,1/u]};if(r){const d=Si*Math.tan(e*Si)/s,g=a*d/2,b=i/Vp*d,S=b/c*u;h.unitsPerDegree2=[0,g,b],h.unitsPerMeter2=[S,0,S]}return h}function KM(t,e){const[n,r,i]=t,[s,a,c]=e,{unitsPerMeter:u,unitsPerMeter2:h}=b0({longitude:n,latitude:r,highPrecision:!0}),d=$p(t);d[0]+=s*(u[0]+h[0]*a),d[1]+=a*(u[1]+h[1]*a);const g=Pc(d),b=(i||0)+(c||0);return Number.isFinite(i)||Number.isFinite(c)?[g[0],g[1],b]:g}function eH(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:a}=t,c=K$();Lp(c,c,[0,0,-i]),PM(c,c,-n*Si),DM(c,c,r*Si);const u=s/e;return Qv(c,c,[u,u,u]),a&&Lp(c,c,V9([],a)),c}function tH(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:a,scale:c,nearZMultiplier:u=1,farZMultiplier:h=1}=t;let{fovy:d=Hp(Z$)}=t;r!==void 0&&(d=Hp(r));const g=d*Si,b=i*Si,S=QM(d);let R=S;a&&(R+=a[2]*c/Math.cos(b)/n);const A=g*(.5+(s?s[1]:0)/n),C=Math.sin(A)*R/Math.sin(m0(Math.PI/2-b-A,.01,Math.PI-.01)),k=Math.sin(b)*C+R,P=R*10,M=Math.min(k*h,P);return{fov:g,aspect:e/n,focalDistance:S,near:u,far:M}}function Hp(t){return 2*Math.atan(.5/t)*y0}function QM(t){return .5/Math.tan(.5*t*Si)}function ZM(t,e){const[n,r,i=0]=t;return $s(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),uc(e,[n,r,i,1])}function Jv(t,e,n=0){const[r,i,s]=t;if($s(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return uc(e,[r,i,s,1]);const a=uc(e,[r,i,0,1]),c=uc(e,[r,i,1,1]),u=a[2],h=c[2],d=u===h?0:((n||0)-u)/(h-u);return NM([],a,c,d)}function nH(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:a=[0,0]}=t,[[c,u],[h,d]]=r,g=rH(t.padding),b=$p([c,m0(d,-Fd,Fd)]),S=$p([h,m0(u,-Fd,Fd)]),R=[Math.max(Math.abs(S[0]-b[0]),i),Math.max(Math.abs(S[1]-b[1]),i)],A=[e-g.left-g.right-Math.abs(a[0])*2,n-g.top-g.bottom-Math.abs(a[1])*2];$s(A[0]>0&&A[1]>0);const C=A[0]/R[0],k=A[1]/R[1],P=(g.right-g.left)/2/C,M=(g.top-g.bottom)/2/k,z=[(S[0]+b[0])/2+P,(S[1]+b[1])/2+M],$=Pc(z),F=Math.min(s,Gv(Math.abs(Math.min(C,k))));return $s(Number.isFinite(F)),{longitude:$[0],latitude:$[1],zoom:F}}function rH(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:($s(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const wE=Math.PI/180;function iH(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},a=i([0,r],s),c=i([n,r],s);let u,h;const d=t.fovy?.5*t.fovy*wE:Math.atan(.5/t.altitude),g=(90-t.pitch)*wE;return d>g-.01?(u=SE(t,0,e),h=SE(t,n,e)):(u=i([0,0],s),h=i([n,0],s)),[a,c,h,u]}function SE(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=uc(r,[e,0,1,1]),s=uc(r,[e,t.height,1,1]),c=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),u=NM([],i,s,c),h=Pc(u);return h.push(n),h}const TE=512;function sH(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:a,bearing:c=0}=t;(i<-180||i>180)&&(i=xE(i+180,360)-180),(c<-180||c>180)&&(c=xE(c+180,360)-180);const u=Gv(n/TE);if(a<=u)a=u,s=0;else{const h=n/2/Math.pow(2,a),d=Pc([0,h])[1];if(s<d)s=d;else{const g=Pc([0,TE-h])[1];s>g&&(s=g)}}return{width:e,height:n,longitude:i,latitude:s,zoom:a,pitch:r,bearing:c}}const GM=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,oH=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,aH=`
${GM}
${oH}
`,lH=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,cH=`
${GM}
${lH}
`,uH=Jf(gH),fH=Jf(mH),hH=[0,0,0,1],dH=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function pH(t,e){const[n,r,i]=t,s=Jv([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function gH({viewport:t,center:e}){return new ps(t.viewProjectionMatrix).invert().transform(e)}function mH({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>pH(a,r));for(const a of e){const c=a.clone().translate(new ds(t.center).negate()),u=s.map(d=>c.transform(d)),h=new ps().ortho({left:Math.min(...u.map(d=>d[0])),right:Math.max(...u.map(d=>d[0])),bottom:Math.min(...u.map(d=>d[1])),top:Math.max(...u.map(d=>d[1])),near:Math.min(...u.map(d=>-d[2])),far:Math.max(...u.map(d=>-d[2]))});n.push(h.multiplyRight(a))}return n}function yH(t){const{shadowEnabled:e=!0,project:n}=t;if(!e||!n||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const r=Zv.getUniforms(n),i=uH({viewport:n.viewport,center:r.center}),s=[],a=fH({shadowMatrices:t.shadowMatrices,viewport:n.viewport}).slice();for(let u=0;u<t.shadowMatrices.length;u++){const h=a[u],d=h.clone().translate(new ds(n.viewport.center).negate());r.coordinateSystem===Wt.LNGLAT&&r.projectionMode===vi.WEB_MERCATOR?(a[u]=d,s[u]=i):(a[u]=h.clone().multiplyRight(dH),s[u]=d.transform(i))}const c={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||hH,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let u=0;u<a.length;u++)c[`viewProjectionMatrix${u}`]=a[u],c[`projectCenter${u}`]=s[u];for(let u=0;u<2;u++)c[`shadow_uShadowMap${u}`]=t.shadowMaps&&t.shadowMaps[u]||t.dummyShadowMap;return c}const EE={name:"shadow",dependencies:[Zv],vs:aH,fs:cH,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:yH,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},bH={...rE,defaultUniforms:{...rE.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},_H=[jM],vH=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],xH=[];function wH(t){const e=Rp.getDefaultShaderAssembler();for(const r of _H)e.addDefaultModule(r);const n=t==="glsl"?vH:xH;for(const r of n)e.addShaderHook(r);return e}const SH=[255,255,255],TH=1;let EH=0;class AH{constructor(e={}){this.type="ambient";const{color:n=SH}=e,{intensity:r=TH}=e;this.id=e.id||`ambient-${EH++}`,this.color=n,this.intensity=r}}const RH=[255,255,255],CH=1,kH=[0,0,-1];let MH=0;class AE{constructor(e={}){this.type="directional";const{color:n=RH}=e,{intensity:r=CH}=e,{direction:i=kH}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${MH++}`,this.color=n,this.intensity=r,this.type="directional",this.direction=new ds(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class NH{constructor(e,n={id:"pass"}){const{id:r}=n;this.id=r,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class ex extends NH{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,r]=this.device.canvasContext.getDrawingBufferSize(),i=e.clearCanvas??!0,s=e.clearColor??(i?[0,0,0,0]:!1),a=i?1:!1,c=i?0:!1,u=e.colorMask??15,h={viewport:[0,0,n,r]};e.colorMask&&(h.colorMask=u),e.scissorRect&&(h.scissorRect=e.scissorRect);const d=this.device.beginRenderPass({framebuffer:e.target,parameters:h,clearColor:s,clearDepth:a,clearStencil:c});try{return this._drawLayers(d,e)}finally{d.end(),this.device.submit()}}_drawLayers(e,n){const{target:r,shaderModuleProps:i,viewports:s,views:a,onViewportActive:c,clearStack:u=!0}=n;n.pass=n.pass||"unknown",u&&(this._lastRenderIndex=-1);const h=[];for(const d of s){const g=a&&a[d.id];c==null||c(d);const b=this._getDrawLayerParams(d,n),S=d.subViewports||[d];for(const R of S){const A=this._drawLayersInViewport(e,{target:r,shaderModuleProps:i,viewport:R,view:g,pass:n.pass,layers:n.layers},b);h.push(A)}}return h}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:a,effects:c,shaderModuleProps:u},h=!1){var R;const d=[],g=JM(this._lastRenderIndex+1),b={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:a},S={};for(let A=0;A<n.length;A++){const C=n[A],k=this._shouldDrawLayer(C,b,s,S),P={shouldDrawLayer:k};k&&!h&&(P.shouldDrawLayer=!0,P.layerRenderIndex=g(C,k),P.shaderModuleProps=this._getShaderModuleProps(C,c,r,u),P.layerParameters={...(R=C.context.deck)==null?void 0:R.props.parameters,...this.getLayerParameters(C,A,e)}),d[A]=P}return d}_drawLayersInViewport(e,{layers:n,shaderModuleProps:r,pass:i,target:s,viewport:a,view:c},u){const h=IH(this.device,{shaderModuleProps:r,target:s,viewport:a});if(c&&c.props.clear){const g=c.props.clear===!0?{color:!0,depth:!0}:c.props.clear;this.device.beginRenderPass({framebuffer:s,parameters:{viewport:h,scissorRect:h},clearColor:g.color?[0,0,0,0]:!1,clearDepth:g.depth?1:!1}).end()}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:h});for(let g=0;g<n.length;g++){const b=n[g],S=u[g],{shouldDrawLayer:R}=S;if(R&&b.props.pickable&&d.pickableCount++,b.isComposite&&d.compositeCount++,b.isDrawable&&S.shouldDrawLayer){const{layerRenderIndex:A,shaderModuleProps:C,layerParameters:k}=S;d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,A),C.project&&(C.project.viewport=a),b.context.renderPass=e;try{b._drawLayer({renderPass:e,shaderModuleProps:C,uniforms:{layerIndex:A},parameters:k})}catch(P){b.raiseError(P,`drawing ${b} to ${i}`)}}}return d}shouldDrawLayer(e){return!0}getShaderModuleProps(e,n,r){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(r){const c=n.layer.id;if(c in i||(i[c]=r(n)),!i[c])return!1}return e.activateViewport(n.viewport),!0}_getShaderModuleProps(e,n,r,i){var u,h;const s=this.device.canvasContext.cssToDeviceRatio(),a=((u=e.internalState)==null?void 0:u.propsInTransition)||e.props,c={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:s,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(n)for(const d of n)RE(c,(h=d.getShaderModuleProps)==null?void 0:h.call(d,e,c));return RE(c,this.getShaderModuleProps(e,n,c),i)}}function JM(t=0,e={}){const n={},r=(i,s)=>{const a=i.props._offset,c=i.id,u=i.parent&&i.parent.id;let h;if(u&&!(u in e)&&r(i.parent,!1),u in n){const d=n[u]=n[u]||JM(e[u],e);h=d(i,s),n[c]=d}else Number.isFinite(a)?(h=a+(e[u]||0),n[c]=null):h=t;return s&&h>=t&&(t=h+1),e[c]=h,h};return r}function IH(t,{shaderModuleProps:e,target:n,viewport:r}){var u;const i=((u=e==null?void 0:e.project)==null?void 0:u.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:s,c=r;return[c.x*i,a-(c.y+c.height)*i,c.width*i,c.height*i]}function RE(t,...e){for(const n of e)if(n)for(const r in n)t[r]?Object.assign(t[r],n[r]):t[r]=n[r];return t}class OH extends ex{constructor(e,n){super(e,n);const r=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),i=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[r],depthStencilAttachment:i})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const n=this.fbo,r=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],s=i.width*r,a=i.height*r,c=[1,1,1,1];(s!==n.width||a!==n.height)&&n.resize({width:s,height:a}),super.render({...e,clearColor:c,target:n,pass:"shadow"})}getLayerParameters(e,n,r){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,n,r){return{shadow:{project:r.project,drawToShadowMap:!0}}}}const PH={color:[255,255,255],intensity:1},CE=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],DH=[0,0,0,200/255];class eN{constructor(e={}){this.id="lighting-effect",this.shadowColor=DH,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:r}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),r._addDefaultShaderModule(EE),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,n){const r=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},i={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},s=e.props.material;return{shadow:r,lighting:i,phongMaterial:s,gouraudMaterial:s}}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(EE))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new ps().lookAt({eye:new ds(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new OH(e);this.shadowPasses[n]=r}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new AH(PH),this.directionalLights.push(new AE(CE[0]),new AE(CE[1])))}}class FH{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:a=!1,initialize:c=!1,maxCount:u}){const h=i||e&&e.constructor||Float32Array,d=n*r+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new h(e.buffer,0,d)}let g=1/0;u&&(g=u*r+s);const b=this._allocate(h,d,c,g);return e&&a?b.set(e):c||b.fill(0,0,4),this._release(e),b}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const a=this._pool,c=e.BYTES_PER_ELEMENT*s,u=a.findIndex(h=>h.byteLength>=c);if(u>=0){const h=new e(a.splice(u,1)[0],0,s);return r&&h.fill(0),h}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(a=>a.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const Pf=new FH;function ff(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function BH(t){return[t[12],t[13],t[14]]}function jH(t){return{left:ql(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:ql(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:ql(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:ql(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:ql(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:ql(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const kE=new ds;function ql(t,e,n,r){kE.set(t,e,n);const i=kE.len();return{distance:r/i,normal:new ds(-t/i,-e/i,-n/i)}}function UH(t){return t-Math.fround(t)}let Qu;function Db(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;Qu=Pf.allocate(Qu,s,{type:Float32Array,size:n*2});let a=r,c=0;for(;a<i;){for(let u=0;u<n;u++){const h=t[a++];Qu[c+u]=h,Qu[c+u+n]=UH(h)}c+=n*2}return Qu.subarray(0,s*n*2)}function LH(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const zH=Math.PI/180,VH=ff(),ME=[0,0,0],$H={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function HH({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:a,far:c}){const u=t/e,h=n?new ps().orthographic({fovy:r,aspect:u,focalDistance:i,near:a,far:c}):new ps().perspective({fovy:r,aspect:u,near:a,far:c});if(s){const{left:d=0,right:g=0,top:b=0,bottom:S=0}=s,R=Lo((d+t-g)/2,0,t)-t/2,A=Lo((b+e-S)/2,0,e)-e/2;h[8]-=R*2/t,h[9]+=A*2/e}return h}class eh{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||$H,this.focalDistance=e.focalDistance||1,this.position=e.position||ME,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?vi.WEB_MERCATOR:vi.WEB_MERCATOR_AUTO_OFFSET:vi.IDENTITY}equals(e){return e instanceof eh?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Of(e.projectionMatrix,this.projectionMatrix)&&Of(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=ZM(r,this.pixelProjectionMatrix),[s,a]=i,c=n?a:this.height-a;return e.length===2?[s,c]:[s,c,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,a]=e,c=n?s:this.height-s,u=r&&r*this.distanceScales.unitsPerMeter[2],h=Jv([i,c,a],this.pixelUnprojectionMatrix,u),[d,g,b]=this.unprojectPosition(h);return Number.isFinite(a)?[d,g,b]:Number.isFinite(r)?[d,g,r]:[d,g]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=$p(e);return n[1]=Lo(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Pc(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],a[0]),Math.min(r[1],i[1],s[1],a[1]),Math.max(r[0],i[0],s[0],a[0]),Math.max(r[1],i[1],s[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?b0({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,jH(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=J$({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||b0({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:a}=e;let c=ME;if(s&&(c=a?new ps(a).transformAsVector(s,[]):s),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new ds(c).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(c)}_initMatrices(e){const{viewMatrix:n=VH,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:a=75,near:c=.1,far:u=1e3,padding:h=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new ps().multiplyRight(n).translate(new ds(this.center).negate()),this.projectionMatrix=r||HH({width:this.width,height:this.height,orthographic:i,fovyRadians:s||a*zH,focalDistance:d,padding:h,near:c,far:u});const g=ff();Da(g,g,this.projectionMatrix),Da(g,g,this.viewMatrix),this.viewProjectionMatrix=g,this.viewMatrixInverse=c0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=BH(this.viewMatrixInverse);const b=ff(),S=ff();Qv(b,b,[this.width/2,-this.height/2,1]),Lp(b,b,[1,-1,0]),Da(S,b,this.viewProjectionMatrix),this.pixelProjectionMatrix=S,this.pixelUnprojectionMatrix=c0(ff(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||yn.warn("Pixel project matrix not invertible")()}}eh.displayName="Viewport";class Dc extends eh{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:a=0,nearZMultiplier:c=.1,farZMultiplier:u=1.01,nearZ:h,farZ:d,orthographic:g=!1,projectionMatrix:b,repeat:S=!1,worldOffset:R=0,position:A,padding:C,legacyMeterSizes:k=!1}=e;let{width:P,height:M,altitude:z=1.5}=e;const $=Math.pow(2,i);P=P||1,M=M||1;let F,Z=null;if(b)z=b[5]/2,F=Hp(z);else{e.fovy?(F=e.fovy,z=QM(F)):F=Hp(z);let ue;if(C){const{top:Y=0,bottom:K=0}=C;ue=[0,Lo((Y+M-K)/2,0,M)-M/2]}Z=tH({width:P,height:M,scale:$,center:A&&[0,0,A[2]*Pb(n)],offset:ue,pitch:s,fovy:F,nearZMultiplier:c,farZMultiplier:u}),Number.isFinite(h)&&(Z.near=h),Number.isFinite(d)&&(Z.far=d)}let Q=eH({height:M,pitch:s,bearing:a,scale:$,altitude:z});R&&(Q=new ps().translate([512*R,0,0]).multiplyLeft(Q)),super({...e,width:P,height:M,viewMatrix:Q,longitude:r,latitude:n,zoom:i,...Z,fovy:F,focalDistance:z}),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=a,this.altitude=z,this.fovy=F,this.orthographic=g,this._subViewports=S?[]:null,this._pseudoMeters=k,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new Dc({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*Pb(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/Pb(r);return[n,r,i]}addMetersToLngLat(e,n){return KM(e,n)}panByPosition(e,n){const r=Jv(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=tE([],i,F9([],r)),a=tE([],this.center,s),[c,u]=this.unprojectFlat(a);return{longitude:c,latitude:u}}getBounds(e={}){const n=iH(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:a,zoom:c}=nH({width:r,height:i,bounds:e,...n});return new Dc({width:r,height:i,longitude:s,latitude:a,zoom:c})}}Dc.displayName="WebMercatorViewport";const NE=[0,0,0];function Fb(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Dc){const[i,s,a=0]=t,c=e.getDistanceScales([i,s]);r[2]=a*c.unitsPerMeter[2]}return r}function WH(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return i===Wt.DEFAULT&&(i=e.isGeospatial?Wt.LNGLAT:Wt.CARTESIAN),s===void 0&&(s=i),a===void 0&&(a=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function tN(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[a,c,u=0]=t;switch(n&&([a,c,u]=Gf([],[a,c,u,1],n)),r){case Wt.LNGLAT:return Fb([a,c,u],e,s);case Wt.LNGLAT_OFFSETS:return Fb([a+i[0],c+i[1],u+(i[2]||0)],e,s);case Wt.METER_OFFSETS:return Fb(KM(i,[a,c,u]),e,s);case Wt.CARTESIAN:default:return e.isGeospatial?[a+i[0],c+i[1],u+i[2]]:e.projectPosition([a,c,u])}}function qH(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:a,fromCoordinateOrigin:c}=WH(e),{autoOffset:u=!0}=e,{geospatialOrigin:h=NE,shaderCoordinateOrigin:d=NE,offsetMode:g=!1}=u?XM(n,r,i):{},b=tN(t,{viewport:n,modelMatrix:s,coordinateSystem:a,coordinateOrigin:c,offsetMode:g});if(g){const S=n.projectPosition(h||d);Z9(b,b,S)}return b}let XH=1,YH=1;class nN{constructor(){U(this,"time",0);U(this,"channels",new Map);U(this,"animations",new Map);U(this,"playing",!1);U(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,a=XH++,c={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(c,this.time),this.channels.set(a,c),a}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:a}=i;s.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=YH++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}function KH(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function QH(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let ZH=0;const GH={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:G_.stats.get(`animation-loop-${ZH++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class JH{constructor(e){U(this,"device",null);U(this,"canvas",null);U(this,"props");U(this,"animationProps",null);U(this,"timeline",null);U(this,"stats");U(this,"cpuTime");U(this,"gpuTime");U(this,"frameRate");U(this,"display");U(this,"needsRedraw","initialized");U(this,"_initialized",!1);U(this,"_running",!1);U(this,"_animationFrameId",null);U(this,"_nextFramePromise",null);U(this,"_resolveNextFrame",null);U(this,"_cpuStartTime",0);U(this,"_error",null);if(this.props={...GH,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=e.stats||new Ag({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var r,i;if(this.props.onError(e),this._error=Error(),((i=(r=this.device)==null?void 0:r.canvasContext)==null?void 0:i.canvas)instanceof HTMLCanvasElement){const s=document.createElement("h1");s.innerHTML=e.message,s.style.position="absolute",s.style.top="20%",s.style.left="10px",s.style.color="black",s.style.backgroundColor="red",document.body.appendChild(s)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=KH(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(QH(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var n;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(n=this.device)==null||n.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var n,r;const e=(r=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:r.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){var s,a,c,u;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((a=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:a.getPixelSize())||[1,1];let r=1;const i=(u=(c=this.device)==null?void 0:c.canvasContext)==null?void 0:u.canvas;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,n;this.props.autoResizeDrawingBuffer&&((n=(e=this.device)==null?void 0:e.canvasContext)==null||n.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const Bb={};function Mg(t="id"){Bb[t]=Bb[t]||1;const e=Bb[t]++;return`${t}-${e}`}class IE{constructor(e){U(this,"id");U(this,"userData",{});U(this,"topology");U(this,"bufferLayout",[]);U(this,"vertexCount");U(this,"indices");U(this,"attributes");if(this.id=e.id||Mg("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&xn.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function eW(t,e){if(e instanceof IE)return e;const n=tW(t,e),{attributes:r,bufferLayout:i}=nW(t,e);return new IE({topology:e.topology||"triangle-list",bufferLayout:i,vertexCount:e.vertexCount,indices:n,attributes:r})}function tW(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:xn.INDEX,data:n})}function nW(t,e){const n=[],r={};for(const[s,a]of Object.entries(e.attributes)){let c=s;switch(s){case"POSITION":c="positions";break;case"NORMAL":c="normals";break;case"TEXCOORD_0":c="texCoords";break;case"COLOR_0":c="colors";break}if(a){r[c]=t.createBuffer({data:a.value,id:`${s}-buffer`});const{value:u,size:h,normalized:d}=a;n.push({name:c,format:QV(u,h,d)})}}const i=e._calculateVertexCount(e.attributes,e.indices);return{attributes:r,bufferLayout:n,vertexCount:i}}const hg=class hg{constructor(e){U(this,"device");U(this,"destroyPolicy");U(this,"_hashCounter",0);U(this,"_hashes",{});U(this,"_renderPipelineCache",{});U(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new hg(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const n={...Cc.defaultProps,...e},r=this._hashRenderPipeline(n);if(!this._renderPipelineCache[r]){const i=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});i.hash=r,this._renderPipelineCache[r]={pipeline:i,useCount:0}}return this._renderPipelineCache[r].useCount++,this._renderPipelineCache[r].pipeline}createComputePipeline(e){const n={...Ip.defaultProps,...e},r=this._hashComputePipeline(n);if(!this._computePipelineCache[r]){const i=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});i.hash=r,this._computePipelineCache[r]={pipeline:i,useCount:0}}return this._computePipelineCache[r].useCount++,this._computePipelineCache[r].pipeline}release(e){const n=e.hash,r=e instanceof Ip?this._computePipelineCache:this._renderPipelineCache;r[n].useCount--,r[n].useCount===0&&this.destroyPolicy==="unused"&&(r[n].pipeline.destroy(),delete r[n])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const n=e.vs?this._getHash(e.vs.source):0,r=e.fs?this._getHash(e.fs.source):0,i="-",s=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${r}V${i}BL${s}`;default:const a=this._getHash(JSON.stringify(e.parameters));return`${n}/${r}V${i}T${e.topology}P${a}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};U(hg,"defaultProps",{...Cc.defaultProps});let _0=hg;const dg=class dg{constructor(e){U(this,"device");U(this,"destroyPolicy");U(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new dg(e)),e._lumaData.defaultShaderFactory}createShader(e){const n=this._hashShader(e);let r=this._cache[n];if(!r){const i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=r={shader:i,useCount:0}}return r.useCount++,r.shader}release(e){const n=this._hashShader(e),r=this._cache[n];r&&(r.useCount--,r.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[n],r.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};U(dg,"defaultProps",{...kp.defaultProps});let v0=dg;function rW(t,e){var i;const n={},r="Values";if(t.attributes.length===0&&!((i=t.varyings)!=null&&i.length))return{"No attributes or varyings":{[r]:"N/A"}};for(const s of t.attributes)if(s){const a=`${s.location} ${s.name}: ${s.type}`;n[`in ${a}`]={[r]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const a=`${s.location} ${s.name}`;n[`out ${a}`]={[r]:JSON.stringify(s)}}return n}let sr=null,ba=null;function iW(t,{id:e,minimap:n,opaque:r,top:i="0",left:s="0",rgbaScale:a=1}){sr||(sr=document.createElement("canvas"),sr.id=e,sr.title=e,sr.style.zIndex="100",sr.style.position="absolute",sr.style.top=i,sr.style.left=s,sr.style.border="blue 5px solid",sr.style.transform="scaleY(-1)",document.body.appendChild(sr),ba=sr.getContext("2d")),(sr.width!==t.width||sr.height!==t.height)&&(sr.width=t.width/2,sr.height=t.height/2,sr.style.width="400px",sr.style.height="400px");const c=t.device.readPixelsToArrayWebGL(t),u=ba==null?void 0:ba.createImageData(t.width,t.height);if(u){for(let d=0;d<c.length;d+=4)u.data[0+d+0]=c[d+0]*a,u.data[0+d+1]=c[d+1]*a,u.data[0+d+2]=c[d+2]*a,u.data[0+d+3]=r?255:c[d+3]*a;ba==null||ba.putImageData(u,0,0)}}function x0(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!x0(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!x0(t[s],e[s],n-1))return!1;return!0}return!1}function sW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oW(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function rN(t){return sW(t)||oW(t)}function aW(t){return rN(t)||typeof t=="number"||typeof t=="boolean"}function iN(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];aW(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}class lW{constructor(e,n){U(this,"options",{disableWarnings:!1});U(this,"modules");U(this,"moduleUniforms");U(this,"moduleBindings");Object.assign(this.options,n);const r=Uv(Object.values(e).filter(i=>i.dependencies));for(const i of r)e[i.name]=i;$e.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[i,s]of Object.entries(e))this._addModule(s),s.name&&i!==s.name&&!this.options.disableWarnings&&$e.warn(`Module name: ${i} vs ${s.name}`)()}destroy(){}setProps(e){var n;for(const r of Object.keys(e)){const i=r,s=e[i]||{},a=this.modules[i];if(!a){this.options.disableWarnings||$e.warn(`Module ${r} not found`)();continue}const c=this.moduleUniforms[i],u=this.moduleBindings[i],h=((n=a.getUniforms)==null?void 0:n.call(a,s,c))||s,{uniforms:d,bindings:g}=iN(h);this.moduleUniforms[i]={...c,...d},this.moduleBindings[i]={...u,...g}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[r,i]of Object.entries(this.moduleUniforms))for(const[s,a]of Object.entries(i))e[`${r}.${s}`]={type:(n=this.modules[r].uniformTypes)==null?void 0:n[s],value:String(a)};return e}_addModule(e){const n=e.name;this.moduleUniforms[n]=e.defaultUniforms||{},this.moduleBindings[n]={}}}let cW="";async function uW(t,e){const n=new Image;return n.crossOrigin="anonymous",n.src=t.startsWith("http")?t:cW+t,await n.decode(),e?await createImageBitmap(n,e):await createImageBitmap(n)}class jb{constructor(e,n){U(this,"device");U(this,"id");U(this,"texture");U(this,"sampler");U(this,"view");U(this,"ready");U(this,"isReady",!1);U(this,"destroyed",!1);U(this,"resolveReady",()=>{});U(this,"rejectReady",()=>{});this.device=e,this.id=n.id||Mg("async-texture"),typeof(n==null?void 0:n.data)=="string"&&n.dimension==="2d"&&(n={...n,data:uW(n.data)}),this.ready=new Promise((r,i)=>{this.resolveReady=()=>{this.isReady=!0,r()},this.rejectReady=i}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const n=e.data;let r;try{r=await sN(n)}catch(s){this.rejectReady(s)}if(this.destroyed)return;const i={...e,data:r};this.texture=this.device.createTexture(i),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(e),n.destroy()}return!0}}async function sN(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(sN));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,n=await Promise.all(Object.values(e)),r=Object.keys(e),i={};for(let s=0;s<r.length;s++)i[r[s]]=n[s];return i}return t}const _a=2,fW=1e4,pg=class pg{constructor(e,n){U(this,"device");U(this,"id");U(this,"source");U(this,"vs");U(this,"fs");U(this,"pipelineFactory");U(this,"shaderFactory");U(this,"userData",{});U(this,"parameters");U(this,"topology");U(this,"bufferLayout");U(this,"isInstanced");U(this,"instanceCount",0);U(this,"vertexCount");U(this,"indexBuffer",null);U(this,"bufferAttributes",{});U(this,"constantAttributes",{});U(this,"bindings",{});U(this,"uniforms",{});U(this,"vertexArray");U(this,"transformFeedback",null);U(this,"pipeline");U(this,"shaderInputs");U(this,"_uniformStore");U(this,"_attributeInfos",{});U(this,"_gpuGeometry",null);U(this,"_getModuleUniforms");U(this,"props");U(this,"_pipelineNeedsUpdate","newly created");U(this,"_needsRedraw","initializing");U(this,"_destroyed",!1);U(this,"_lastDrawTimestamp",-1);U(this,"_lastLogTime",0);U(this,"_logOpen",!1);U(this,"_drawCount",0);var u,h,d,g;this.props={...pg.defaultProps,...n},n=this.props,this.id=n.id||Mg("model"),this.device=e,Object.assign(this.userData,n.userData);const r=Object.fromEntries(((u=this.props.modules)==null?void 0:u.map(b=>[b.name,b]))||[]),i=n.shaderInputs||new lW(r,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(i);const s=dW(e),a=(((h=this.props.modules)==null?void 0:h.length)>0?this.props.modules:(d=this.shaderInputs)==null?void 0:d.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:b,getUniforms:S}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:s,...this.props,modules:a});this.source=b,this._getModuleUniforms=S,(g=this.props).shaderLayout||(g.shaderLayout=A9(this.source))}else{const{vs:b,fs:S,getUniforms:R}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:s,...this.props,modules:a});this.vs=b,this.fs=S,this._getModuleUniforms=R}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||_0.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||v0.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniformsWebGL(n.uniforms),n.moduleSettings&&this.updateModuleSettingsWebGL(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const n=this._areBindingsLoading();if(n)return $e.info(_a,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let r;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const i=this._getBindings();this.pipeline.setBindings(i,{disableWarnings:this.props.disableWarnings}),w0(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:s}=this.vertexArray,a=s?s.byteLength/(s.indexType==="uint32"?4:2):void 0;r=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),r?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",r}setGeometry(e){var r;(r=this._gpuGeometry)==null||r.destroy();const n=e&&eW(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const i=new Eb(this.bufferLayout);this.bufferLayout=i.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const n=new Eb(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){x0(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new KV(this.shaderInputs.modules);for(const[n,r]of Object.entries(this.shaderInputs.modules))if(hW(r)){const i=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=i}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){const r=(n==null?void 0:n.disableWarnings)??this.props.disableWarnings;e.indices&&$e.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=ZV(this.pipeline.shaderLayout,this.bufferLayout);const i=new Eb(this.bufferLayout);for(const[s,a]of Object.entries(e)){const c=i.getBufferLayout(s);if(!c){r||$e.warn(`Model(${this.id}): Missing layout for buffer "${s}".`)();continue}const u=i.getAttributeNamesForBuffer(c);let h=!1;for(const d of u){const g=this._attributeInfos[d];if(g){const b=this.device.type==="webgpu"?i.getBufferIndex(g.bufferName):g.location;this.vertexArray.setBuffer(b,a),h=!0}}!h&&!r&&$e.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${s}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[r,i]of Object.entries(e)){const s=this._attributeInfos[r];s?this.vertexArray.setConstantWebGL(s.location,i):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||$e.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${r}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){w0(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:n,uniforms:r}=iN(this._getModuleUniforms(e));Object.assign(this.bindings,n),Object.assign(this.uniforms,r),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof jb&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[n,r]of Object.entries(this.bindings))r instanceof jb?r.isReady&&(e[n]=r.texture):e[n]=r;return e}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof Cp?e=Math.max(e,n.texture.updateTimestamp):n instanceof xn||n instanceof kn?e=Math.max(e,n.updateTimestamp):n instanceof jb?e=n.texture?Math.max(e,n.texture.updateTimestamp):1/0:n instanceof Mp||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[r]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(i=>i.name===r)&&r!=="positions"&&delete n[r];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&($e.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const r=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let i=null;this.source?i=r:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:r,fs:i}),this._attributeInfos=sM(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=$e.level>3?0:fW;$e.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,$e.group(_a,`>>> DRAWING MODEL ${this.id}`,{collapsed:$e.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=rW(this.pipeline.shaderLayout,this.id);$e.table(_a,e)();const n=this.shaderInputs.getDebugTable();for(const[i,s]of Object.entries(this.uniforms))n[i]={value:s};$e.table(_a,n)();const r=this._getAttributeDebugTable();$e.table(_a,this._attributeInfos)(),$e.table(_a,r)(),$e.groupEnd(_a)(),this._logOpen=!1}}_logFramebuffer(e){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const r=e.props.framebuffer;r&&iW(r,{id:r.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,r]of Object.entries(this._attributeInfos)){const i=this.vertexArray.attributes[r.location];e[r.location]={name:n,type:r.shaderType,values:i?this._getBufferOrConstantValues(i,r.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,r=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:r.toString()}}return e}_getBufferOrConstantValues(e,n){const r=lM(n);return(e instanceof xn?new r(e.debugData):e).toString()}};U(pg,"defaultProps",{...Cc.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:Rp.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Df=pg;function hW(t){return!!(t.uniformTypes&&!w0(t.uniformTypes))}function dW(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function w0(t){for(const e in t)return!1;return!0}const Af=class Af{constructor(e,n=Af.defaultProps){U(this,"device");U(this,"model");U(this,"transformFeedback");if(!Af.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new Df(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||Gz(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof xn)return n.readAsync();const{buffer:r,byteOffset:i=0,byteLength:s=r.byteLength}=n;return r.readAsync(i,s)}};U(Af,"defaultProps",{...Df.defaultProps,outputs:void 0,feedbackBuffers:void 0});let Ff=Af;class pW{constructor(e){U(this,"id");U(this,"topology");U(this,"vertexCount");U(this,"indices");U(this,"attributes");U(this,"userData",{});const{attributes:n={},indices:r=null,vertexCount:i=null}=e;this.id=e.id||Mg("geometry"),this.topology=e.topology,r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r),this.attributes={};for(const[s,a]of Object.entries(n)){const c=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(c.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!c.size&&(c.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=c}else this.attributes[s]=c}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i of Object.values(e)){const{value:s,size:a,constant:c}=i;!c&&s&&a!==void 0&&a>=1&&(r=Math.min(r,s.length/a))}return r}}const gW={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class oN extends ex{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:a,deviceRect:{x:c,y:u,width:h,height:d},cullRect:g,effects:b,pass:S="picking",pickZ:R,shaderModuleProps:A}){this.pickZ=R;const C=this._resetColorEncoder(R),k=[c,u,h,d],P=super.render({target:a,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:g,effects:b==null?void 0:b.filter(z=>z.useInPicking),pass:S,isPicking:!0,shaderModuleProps:A,clearColor:[0,0,0,0],colorMask:15,scissorRect:k});return this._colorEncoderState=null,{decodePickingColor:C&&yW.bind(null,C),stats:P}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getShaderModuleProps(e,n,r){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?i.blend=!1:s&&a.includes("draw")&&(Object.assign(i,gW),i.blend=!0,i.blendColor=mW(this._colorEncoderState,e,r)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function mW(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,a=r.get(e);return a?(a.viewports.push(n),s=a.a):(s=r.size+1,s<=255?(a={a:s,layer:e,viewports:[n]},r.set(e,a),i[s]=a):(yn.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function yW(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Zl={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Wp=Symbol.for("component"),Fa=Symbol.for("propTypes"),Ub=Symbol.for("deprecatedProps"),fc=Symbol.for("asyncPropDefaults"),Xa=Symbol.for("asyncPropOriginal"),zo=Symbol.for("asyncPropResolved");function aN(t,e=()=>!0){return Array.isArray(t)?lN(t,e,[]):e(t)?[t]:[]}function lN(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?lN(i,e,n):e(i)&&n.push(i)}return n}function bW({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let a=0;for(let c=n;a<i;a++)t[c++]=e[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}class _W{constructor(e,n,r){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=W_(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class vW{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new _W(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const c=s[e];if(this._track(r,i,c,n),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,a=s[e]=s[e]||{};let c=a[n];const u=c&&c.resourceId&&this._resources[c.resourceId];u&&(u.unsubscribe(c),this.prune()),r&&(c?(c.onChange=i,c.resourceId=r.id):c={onChange:i,resourceId:r.id},a[n]=c,r.subscribe(c))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const xW="layerManager.setLayers",wW="layerManager.activateViewport";class SW{constructor(e,n){var c;this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=u=>{Pr(wW,this,u),u&&(this.context.viewport=u)};const{deck:r,stats:i,viewport:s,timeline:a}=n||{};this.layers=[],this.resourceManager=new vW({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:r,shaderAssembler:wH(((c=e==null?void 0:e.info)==null?void 0:c.shadingLanguage)||"glsl"),defaultShaderModules:[M7],renderPass:void 0,stats:i||new Ag({id:"deck.gl"}),viewport:s||new eh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new nN,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Pr(xW,this,n,e),this._lastRenderedLayers=e;const r=aN(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(r=>r.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,r=n.findIndex(i=>i.name===e.name);r>=0&&(n.splice(r,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,r){r.raiseError(n,`${e} of ${r}`)}_updateLayers(e,n){const r={};for(const a of e)r[a.id]?yn.warn(`Multiple old layers with same id ${a.id}`)():r[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const a of i)if(a.hasUniformTransition()){s=`Uniform transition in ${a}`;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&yn.warn(`Multiple new layers with same id ${i.id}`)(),n[i.id]=null;let a=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),a=i.isComposite?i.getSubLayers():null}catch(c){this._handleError("matching",c,i)}a&&this._updateSublayersRecursively(a,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Zl.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Zl.MATCHED,n!==e&&(e.lifecycle=Zl.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Zl.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Zl.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function zi(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!zi(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!zi(t[s],e[s],n-1))return!1;return!0}return!1}class TW{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const a=r[s];if(a.containsPixel(i)){const c=e.slice();return c[0]-=a.x,c[1]-=a.y,a.unproject(c,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=aN(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!zi(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):yn.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const a={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],a=this.getViewState(s),c=s.makeViewport({viewState:a,width:this.width,height:this.height});let u=n[s.id];const h=!!s.controller;h&&!u&&(r=!0),(r||!h)&&u&&(u.finalize(),u=null),this.controllers[s.id]=this._updateController(s,a,c,u),c&&this._viewports.unshift(c)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const EW=/([0-9]+\.?[0-9]*)(%|px)/;function bo(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=EW.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function _o(t,e){return t.relative?Math.round(t.position*e):t.position}class Fc{constructor(e){const{id:n,x:r=0,y:i=0,width:s="100%",height:a="100%",padding:c=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=bo(r),this._y=bo(i),this._width=bo(s),this._height=bo(a),this._padding=c&&{left:bo(c.left||0),right:bo(c.right||0),top:bo(c.top||0),bottom:bo(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&zi(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});if(!i.height||!i.width)return null;const s=this.getViewportType(r);return new s({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:_o(this._x,e),y:_o(this._y,n),width:_o(this._width,e),height:_o(this._height,n)};return this._padding&&(r.padding={left:_o(this._padding.left,e),top:_o(this._padding.top,n),right:_o(this._padding.right,e),bottom:_o(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Ng{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(r=(n=this.settings).onStart)==null||r.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const OE=()=>{},S0={BREAK:1,SNAP_TO_END:2,IGNORE:3},AW=t=>t,RW=S0.BREAK;class CW{constructor(e){this._onTransitionUpdate=n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:a,duration:c,easing:u}}=n,h=u(r/c),d=i.interpolateProps(s,a,h);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ng(e.timeline),this.onViewStateChange=e.onViewStateChange||OE,this.onStateChange=e.onStateChange||OE}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:a}=this.transition.settings;i={...r,...s===S0.SNAP_TO_END?a:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===S0.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,a=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(a===0)return;const c=s.initializeProps(e,i);this.propsInTransition={};const u={duration:a,easing:n.transitionEasing||AW,interpolator:s,interruption:n.transitionInterruption||RW,startProps:c.start,endProps:c.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function Sr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class kW{constructor(e){const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Of(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Sr(Number.isFinite(r)||Array.isArray(r),`${n} is required for transition`)})}}const MW=["longitude","latitude","zoom","bearing","pitch"],NW=["longitude","latitude","zoom"];class cN extends kW{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:MW,required:NW},super(r.transitionProps),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const a=i(e),c=i(n),u=a.unproject(s);r.start.around=s,Object.assign(r.end,{around:c.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=Up(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,Up(e.around,n.around,r)))}return i}}const vo={transitionDuration:0},IW=300,Bd=t=>1-(1-t)*(1-t),Xl={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},va={};class OW{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new CW({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return n?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?IW:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:a=!0,touchZoom:c=!0,touchRotate:u=!1,keyboard:h=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Xl.WHEEL,d&&r),this.toggleEvents(Xl.PAN,d),this.toggleEvents(Xl.PINCH,d&&(c||u)),this.toggleEvents(Xl.MULTI_PAN,d&&u),this.toggleEvents(Xl.DOUBLE_CLICK,d&&a),this.toggleEvents(Xl.KEYBOARD,d&&h),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=a,this.touchZoom=c,this.touchRotate=u,this.keyboard=h}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,vo,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,vo,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Bd},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,vo,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Bd},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let a=2/(1+Math.exp(-Math.abs(s*r)));s<0&&a!==0&&(a=1/a);const c=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(c,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,vo,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,vo,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Bd},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return va._startPinchRotation=e.rotation,va._lastPinchEvent=e,this.updateViewport(r,vo,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:va._startPinchRotation-r})}return this.updateViewport(n,vo,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),va._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=va;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const a=Math.log2(e.scale),c=(a-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,a+c*n/2);s=s.zoom({pos:i,scale:u}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Bd},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return va._startPinchRotation=null,va._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:c}=this;let u;const h={};switch(e.srcEvent.code){case"Minus":u=n?c.zoomOut(r).zoomOut(r):c.zoomOut(r),h.isZooming=!0;break;case"Equal":u=n?c.zoomIn(r).zoomIn(r):c.zoomIn(r),h.isZooming=!0;break;case"ArrowLeft":n?(u=c.rotateLeft(s),h.isRotating=!0):(u=c.moveLeft(i),h.isPanning=!0);break;case"ArrowRight":n?(u=c.rotateRight(s),h.isRotating=!0):(u=c.moveRight(i),h.isPanning=!0);break;case"ArrowUp":n?(u=c.rotateUp(a),h.isRotating=!0):(u=c.moveUp(i),h.isPanning=!0);break;case"ArrowDown":n?(u=c.rotateDown(a),h.isRotating=!0):(u=c.moveDown(i),h.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),h),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?vo:e?{...n,transitionInterpolator:new cN({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class PW{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const PE=5,DW=1.2;class FW extends PW{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:a,bearing:c=0,pitch:u=0,altitude:h=1.5,position:d=[0,0,0],maxZoom:g=20,minZoom:b=0,maxPitch:S=60,minPitch:R=0,startPanLngLat:A,startZoomLngLat:C,startRotatePos:k,startBearing:P,startPitch:M,startZoom:z,normalize:$=!0}=e;Sr(Number.isFinite(s)),Sr(Number.isFinite(i)),Sr(Number.isFinite(a)),super({width:n,height:r,latitude:i,longitude:s,zoom:a,bearing:c,pitch:u,altitude:h,maxZoom:g,minZoom:b,maxPitch:S,minPitch:R,normalize:$,position:d},{startPanLngLat:A,startZoomLngLat:C,startRotatePos:k,startBearing:P,startPitch:M,startZoom:z}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:a}=this.getState();if(!i||s===void 0||a===void 0)return this;let c;return e?c=this._getNewRotation(e,i,a,s):c={bearing:s+n,pitch:a+r},this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:a,minZoom:c}=this.getViewportProps();let u=i+Math.log2(r);u=Lo(u,c,a);const h=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...h.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Lo(i,r,n);const{maxPitch:s,minPitch:a,pitch:c}=e;e.pitch=Lo(c,a,s);const{normalize:u=!0}=e;return u&&Object.assign(e,sH(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],a=e[1]-n[1],c=e[1],u=n[1],{width:h,height:d}=this.getViewportProps(),g=s/h;let b=0;a>0?Math.abs(d-u)>PE&&(b=a/(u-d)*DW):a<0&&u>PE&&(b=1-c/u),b=Lo(b,-1,1);const{minPitch:S,maxPitch:R}=this.getViewportProps(),A=i+180*g;let C=r;return b>0?C=r+b*(R-r):b<0&&(C=r-b*(S-r)),{pitch:C,bearing:A}}}class BW extends OW{constructor(){super(...arguments),this.ControllerState=FW,this.transition={transitionDuration:300,transitionInterpolator:new cN({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class uN extends Fc{constructor(e={}){super(e)}getViewportType(){return Dc}get ControllerType(){return BW}}uN.displayName="MapView";const jW=new eN;function UW(t,e){const n=t.order??1/0,r=e.order??1/0;return n-r}class LW{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>UW(i,e)>0);r<0?n.push(e):n.splice(r,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(zi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];let a=i;s&&s!==i?s.setProps?(s.setProps(i.props),a=s):s.cleanup(this._context):s||i.setup(this._context),r.push(a),delete n[i.id]}for(const i in n)n[i].cleanup(this._context);this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof eN)||this._resolvedEffects.push(jW),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class zW extends ex{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const VW="deckRenderer.renderLayers";class $W{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new zW(e),this.pickLayersPass=new oN(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target;this.lastPostProcessEffect&&(r.clearColor=[0,0,0,0],r.clearCanvas=!0);const s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Pr(VW,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(r=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${r}`,colorAttachments:[i]}))});for(const r of e)r.resize(n)}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1]};for(const s of e)if(s.postRender){i.target=s.id===this.lastPostProcessEffect?n.target:void 0;const a=s.postRender(i);i.inputBuffer=a,i.swapBuffer=a===r[0]?r[1]:r[0]}}}const HW={pickedColor:null,pickedObjectIndex:-1};function WW({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:a,y:c,width:u,height:h}=s;let d=i*i,g=-1,b=0;for(let S=0;S<h;S++){const R=S+c-r,A=R*R;if(A>d)b+=4*u;else for(let C=0;C<u;C++){if(t[b+3]-1>=0){const P=C+a-n,M=P*P+A;M<=d&&(d=M,g=b)}b+=4}}if(g>=0){const S=t.slice(g,g+4),R=e(S);if(R){const A=Math.floor(g/4/u),C=g/4-A*u;return{...R,pickedColor:S,pickedX:a+C,pickedY:c+A}}yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}return HW}function qW({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),a=s.join(",");if(!n.has(a)){const c=e(s);c?n.set(a,{...c,color:s}):yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function fN({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let a=e[0];e.length>1&&(a=YW((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let c;if(a){const u=[r-a.x,i-a.y];s!==void 0&&(u[2]=s),c=a.unproject(u)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:c,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function XW(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:a,pickedObjectIndex:c}=e,u=a?[a]:[];if(r==="hover"){const g=n.index,b=n.layerId,S=a?a.props.id:null;if(S!==b||c!==g){if(S!==b){const R=i.find(A=>A.props.id===b);R&&u.unshift(R)}n.layerId=S,n.index=c,n.info=null}}const h=fN(t),d=new Map;return d.set(null,h),u.forEach(g=>{let b={...h};g===a&&(b.color=s,b.index=c,b.picked=!0),b=hN({layer:g,info:b,mode:r});const S=b.layer;g===a&&r==="hover"&&(n.info=b),d.set(S.id,b),r==="hover"&&S.updateAutoHighlight(b)}),d}function hN({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function YW(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class KW{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new oN(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const a=s&&s.layer&&s.layer.id,c=s&&s.viewport&&s.viewport.id,u=a?r.find(b=>b.id===a):null,h=c&&i.find(b=>b.id===c)||i[0],d=h&&h.unproject([e-h.x,n-h.y]);return{...s,...{x:e,y:n,viewport:h,coordinate:d,layer:u}}}_resizeBuffer(){var n,r;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const i=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=i}const{canvas:e}=this.device.getDefaultCanvasContext();(n=this.pickingFBO)==null||n.resize({width:e.width,height:e.height}),(r=this.depthFBO)==null||r.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:a=0,depth:c=1,mode:u="query",unproject3D:h,onViewportActive:d,effects:g}){const b=this.device.canvasContext.cssToDeviceRatio(),S=this._getPickable(e);if(!S||r.length===0)return{result:[],emptyInfo:fN({viewports:r,x:i,y:s,pixelRatio:b})};this._resizeBuffer();const R=this.device.canvasContext.cssToDevicePixels([i,s],!0),A=[R.x+Math.floor(R.width/2),R.y+Math.floor(R.height/2)],C=Math.round(a*b),{width:k,height:P}=this.pickingFBO,M=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceWidth:k,deviceHeight:P}),z={x:i-a,y:s-a,width:a*2+1,height:a*2+1};let $;const F=[],Z=new Set;for(let Q=0;Q<c;Q++){let ue;if(M){const K=this._drawAndSample({layers:S,views:n,viewports:r,onViewportActive:d,deviceRect:M,cullRect:z,effects:g,pass:`picking:${u}`});ue=WW({...K,deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceRect:M})}else ue={pickedColor:null,pickedObjectIndex:-1};let Y;if(ue.pickedLayer&&h&&this.depthFBO){const{pickedColors:K}=this._drawAndSample({layers:[ue.pickedLayer],views:n,viewports:r,onViewportActive:d,deviceRect:{x:ue.pickedX,y:ue.pickedY,width:1,height:1},cullRect:z,effects:g,pass:`picking:${u}:z`},!0);K[3]&&(Y=K[0])}ue.pickedLayer&&Q+1<c&&(Z.add(ue.pickedLayer),ue.pickedLayer.disablePickingIndex(ue.pickedObjectIndex)),$=XW({pickInfo:ue,lastPickedInfo:this.lastPickedInfo,mode:u,layers:S,viewports:r,x:i,y:s,z:Y,pixelRatio:b});for(const K of $.values())K.layer&&F.push(K);if(!ue.pickedColor)break}for(const Q of Z)Q.restorePickingColors();return{result:F,emptyInfo:$.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:a=1,height:c=1,mode:u="query",maxObjects:h=null,onViewportActive:d,effects:g}){const b=this._getPickable(e);if(!b||r.length===0)return[];this._resizeBuffer();const S=this.device.canvasContext.cssToDeviceRatio(),R=this.device.canvasContext.cssToDevicePixels([i,s],!0),A=R.x,C=R.y+R.height,k=this.device.canvasContext.cssToDevicePixels([i+a,s+c],!0),P=k.x+k.width,M=k.y,z={x:A,y:M,width:P-A,height:C-M},$=this._drawAndSample({layers:b,views:n,viewports:r,onViewportActive:d,deviceRect:z,cullRect:{x:i,y:s,width:a,height:c},effects:g,pass:`picking:${u}`}),F=qW($),Z=new Map,Q=[],ue=Number.isFinite(h);for(let Y=0;Y<F.length&&!(ue&&Q.length>=h);Y++){const K=F[Y];let ie={color:K.pickedColor,layer:null,index:K.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:S};ie=hN({layer:K.pickedLayer,info:ie,mode:u});const _e=ie.layer.id;Z.has(_e)||Z.set(_e,new Set);const re=Z.get(_e),Te=ie.object??ie.index;re.has(Te)||(re.add(Te),Q.push(ie))}return Q}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:a,effects:c,pass:u},h=!1){const d=h?this.depthFBO:this.pickingFBO,g={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:d,deviceRect:s,cullRect:a,effects:c,pass:u,pickZ:h,preRenderStats:{},isPicking:!0};for(const P of c)P.useInPicking&&(g.preRenderStats[P.id]=P.preRender(g));const{decodePickingColor:b}=this.pickLayersPass.render(g),{x:S,y:R,width:A,height:C}=s,k=new(h?Float32Array:Uint8Array)(A*C*4);return this.device.readPixelsToArrayWebGL(d,{sourceX:S,sourceY:R,sourceWidth:A,sourceHeight:C,target:k}),{pickedColors:k,decodePickingColor:b}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const a=Math.max(0,e-r),c=Math.max(0,n-r),u=Math.min(i,e+r+1)-a,h=Math.min(s,n+r+1)-c;return u<=0||h<=0?null:{x:a,y:c,width:u,height:h}}}const QW={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},ZW="top-left",DE="__root";class GW{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!zi(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const n={};for(const r of this.resolvedWidgets)n[r.id]=r;this.resolvedWidgets.length=0;for(const r of this.defaultWidgets)n[r.id]=null,this.resolvedWidgets.push(r);for(let r of e){const i=n[r.id];i?i.viewId!==r.viewId||i.placement!==r.placement?(this._remove(i),this._add(r)):r!==i&&(i.setProps(r.props),r=i):this._add(r),n[r.id]=null,this.resolvedWidgets.push(r)}for(const r in n){const i=n[r];i&&this._remove(i)}this.widgets=e}_add(e){const{viewId:n=null,placement:r=ZW}=e,i=e.onAdd({deck:this.deck,viewId:n});i&&this._getContainer(n,r).append(i),e._element=i}_remove(e){var n;(n=e.onRemove)==null||n.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,n){var a;const r=e||DE;let i=this.containers[r];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",(a=this.parentElement)==null||a.append(i),this.containers[r]=i);let s=i.querySelector(`.${n}`);return s||(s=document.createElement("div"),s.className=n,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,QW[n]),i.append(s)),s}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const r in this.containers){const i=this.lastViewports[r]||null,s=r===DE||i,a=this.containers[r];s?(a.style.display="block",a.style.left=`${i?i.x:0}px`,a.style.top=`${i?i.y:0}px`,a.style.width=`${i?i.width:e}px`,a.style.height=`${i?i.height:n}px`):a.style.display="none"}}onRedraw({viewports:e,layers:n}){var i,s;const r=e.reduce((a,c)=>(a[c.id]=c,a),{});for(const a of this.getWidgets()){const{viewId:c}=a;if(c){const u=r[c];u&&(a.onViewportChange&&a.onViewportChange(u),(i=a.onRedraw)==null||i.call(a,{viewports:[u],layers:n}))}else{if(a.onViewportChange)for(const u of e)a.onViewportChange(u);(s=a.onRedraw)==null||s.call(a,{viewports:e,layers:n})}}this.lastViewports=r,this._updateContainers()}onHover(e,n){var r,i;for(const s of this.getWidgets()){const{viewId:a}=s;(!a||a===((r=e.viewport)==null?void 0:r.id))&&((i=s.onHover)==null||i.call(s,e,n))}}onEvent(e,n){var i,s;const r=g0[n.type];if(r)for(const a of this.getWidgets()){const{viewId:c}=a;(!c||c===((i=e.viewport)==null?void 0:i.id))&&((s=a[r])==null||s.call(a,e,n))}}}const JW={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class eq{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,JW),this.deck=e,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:n}=this,r=n&&n.props.getTooltip;if(!r)return;const i=r(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,n,r){const i=this.element;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${n}px, ${r}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}}var nc;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(nc||(nc={}));const tx={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},zn=(t,e,n)=>e?t.enable(n):t.disable(n),FE=(t,e,n)=>t.hint(n,e),ni=(t,e,n)=>t.pixelStorei(n,e),BE=(t,e,n)=>{const r=n===36006?36009:36008;return t.bindFramebuffer(r,e)},Zu=(t,e,n)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(i,e)};function Lb(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const tq={3042:zn,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:zn,2885:(t,e)=>t.cullFace(e),2929:zn,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:zn,35723:FE,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:BE,36010:BE,34964:Zu,36662:Zu,36663:Zu,35053:Zu,35055:Zu,2886:(t,e)=>t.frontFace(e),33170:FE,2849:(t,e)=>t.lineWidth(e),32823:zn,32824:"polygonOffset",10752:"polygonOffset",35977:zn,32926:zn,32928:zn,32938:"sampleCoverage",32939:"sampleCoverage",3089:zn,3088:(t,e)=>t.scissor(...e),2960:zn,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:zn,10754:zn,12288:zn,12289:zn,12290:zn,12291:zn,12292:zn,12293:zn,12294:zn,12295:zn,3333:ni,3317:ni,37440:ni,37441:ni,37443:ni,3330:ni,3332:ni,3331:ni,3314:ni,32878:ni,3316:ni,3315:ni,32877:ni,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Lb(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Lb(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,a,c]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,a,c)},stencilOp:(t,e)=>{e=Lb(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,a,c]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,a,c)},viewport:(t,e)=>t.viewport(...e)};function Rn(t,e,n){return e[t]!==void 0?e[t]:n[t]}const nq={blendEquation:(t,e,n)=>t.blendEquationSeparate(Rn(32777,e,n),Rn(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Rn(32969,e,n),Rn(32968,e,n),Rn(32971,e,n),Rn(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Rn(32824,e,n),Rn(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Rn(32938,e,n),Rn(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Rn(2962,e,n),Rn(2967,e,n),Rn(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Rn(34816,e,n),Rn(36003,e,n),Rn(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Rn(2964,e,n),Rn(2965,e,n),Rn(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Rn(34817,e,n),Rn(34818,e,n),Rn(34819,e,n))},jE={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return r?t({[r]:n}):{valueChanged:!0}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},ts=(t,e)=>t.isEnabled(e),UE={3042:ts,2884:ts,2929:ts,3024:ts,32823:ts,32926:ts,32928:ts,3089:ts,2960:ts,35977:ts},rq=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Xc(t,e){if(sq(e))return;const n={};for(const i in e){const s=Number(i),a=tq[i];a&&(typeof a=="string"?n[a]=!0:a(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=nq[i];s(t,e,r)}}function dN(t,e=tx){if(typeof e=="number"){const i=e,s=UE[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=UE[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function iq(t){Xc(t,tx)}function sq(t){for(const e in t)return!1;return!0}function oq(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}class Ba{constructor(e,n){U(this,"gl");U(this,"program",null);U(this,"stateStack",[]);U(this,"enable",!0);U(this,"cache",null);U(this,"log");U(this,"initialized",!1);this.gl=e,this.log=(n==null?void 0:n.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];Xc(this.gl,e),this.stateStack.pop()}trackState(e,n){if(this.cache=n.copyState?dN(e):Object.assign({},tx),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,lq(e);for(const r in jE){const i=jE[r];aq(e,r,i)}LE(e,"getParameter"),LE(e,"isEnabled")}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){const a=e[s],c=this.cache[s];oq(a,c)||(n=!0,r=c,i&&!(s in i)&&(i[s]=c),this.cache[s]=a)}return{valueChanged:n,oldValue:r}}}function LE(t,e){const n=t[e].bind(t);t[e]=function(i){if(i===void 0||rq.has(i))return n(i);const s=Ba.get(t);return i in s.cache||(s.cache[i]=n(i)),s.enable?s.cache[i]:n(i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function aq(t,e,n){if(!t[e])return;const r=t[e].bind(t);t[e]=function(...s){const a=Ba.get(t),{valueChanged:c,oldValue:u}=n(a._updateCache,...s);return c&&r(...s),u},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function lq(t){const e=t.useProgram.bind(t);t.useProgram=function(r){const i=Ba.get(t);i.program!==r&&(e(r),i.program=r)}}function cq(t,e,n){let r="";const i={preserveDrawingBuffer:!0,...n};let s=null;if(s||(s=t.getContext("webgl2",i)),i.failIfMajorPerformanceCaveat&&(r||(r="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!s&&!n.failIfMajorPerformanceCaveat&&(i.failIfMajorPerformanceCaveat=!1,s=t.getContext("webgl2",i),s.luma||(s.luma={}),s.luma.softwareRenderer=!0),s||(s=t.getContext("webgl",{}),s&&(s=null,r||(r="Your browser only supports WebGL1"))),!s)throw r||(r="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${r}`);const{onContextLost:a,onContextRestored:c}=e;return t.addEventListener("webglcontextlost",u=>a(u),!1),t.addEventListener("webglcontextrestored",u=>c(u),!1),s.luma||(s.luma={}),s}function Bc(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function uq(t,e){const n=t.getParameter(7936),r=t.getParameter(7937);Bc(t,"WEBGL_debug_renderer_info",e);const i=e.WEBGL_debug_renderer_info,s=t.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),c=s||n,u=a||r,h=t.getParameter(7938),d=pN(c,u),g=fq(c,u),b=hq(c,u);return{type:"webgl",gpu:d,gpuType:b,gpuBackend:g,vendor:c,renderer:u,version:h,shadingLanguage:"glsl",shadingLanguageVersion:300}}function pN(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function fq(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function hq(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(pN(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function gN(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const hf="WEBGL_compressed_texture_s3tc",df="WEBGL_compressed_texture_s3tc_srgb",rc="EXT_texture_compression_rgtc",ic="EXT_texture_compression_bptc",dq="WEBGL_compressed_texture_etc",pq="WEBGL_compressed_texture_astc",gq="WEBGL_compressed_texture_etc1",mq="WEBGL_compressed_texture_pvrtc",yq="WEBGL_compressed_texture_atc",zE="EXT_texture_norm16",VE="EXT_render_snorm",bq="EXT_color_buffer_float",nx={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[VE],"norm16-renderable-webgl":[zE],"snorm16-renderable-webgl":[zE,VE],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[hf,df,rc,ic],"texture-compression-bc5-webgl":[rc],"texture-compression-bc7-webgl":[ic],"texture-compression-etc2":[dq],"texture-compression-astc":[pq],"texture-compression-etc1-webgl":[gq],"texture-compression-pvrtc-webgl":[mq],"texture-compression-atc-webgl":[yq]};function _q(t){return t in nx}function vq(t,e,n){return(nx[e]||[]).every(i=>Bc(t,i,n))}const rx={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:bq,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:hf},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:df},"bc1-rgba-unorm":{gl:33777,x:hf},"bc1-rgba-unorm-srgb":{gl:35916,x:df},"bc2-rgba-unorm":{gl:33778,x:hf},"bc2-rgba-unorm-srgb":{gl:35918,x:df},"bc3-rgba-unorm":{gl:33779,x:hf},"bc3-rgba-unorm-srgb":{gl:35919,x:df},"bc4-r-unorm":{gl:36283,x:rc},"bc4-r-snorm":{gl:36284,x:rc},"bc5-rg-unorm":{gl:36285,x:rc},"bc5-rg-snorm":{gl:36286,x:rc},"bc6h-rgb-ufloat":{gl:36495,x:ic},"bc6h-rgb-float":{gl:36494,x:ic},"bc7-rgba-unorm":{gl:36492,x:ic},"bc7-rgba-unorm-srgb":{gl:36493,x:ic},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function xq(t,e,n){let r=e.create;const i=rx[e.format];return(i==null?void 0:i.gl)===void 0&&(r=!1),i!=null&&i.x&&(r=r&&!!Bc(t,i.x,n)),{format:e.format,create:r&&e.create,render:r&&e.render,filter:r&&e.filter,blend:r&&e.blend,store:r&&e.store}}function mN(t){var i;const e=rx[t],n=Tq(t),r=Lv(t);return{internalFormat:n,format:(e==null?void 0:e.dataFormat)||Sq(r.channels,r.integer,r.normalized,n),type:r.dataType?gN(r.dataType):((i=e==null?void 0:e.types)==null?void 0:i[0])||5121,compressed:r.compressed||!1}}function wq(t){switch(Lv(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function Sq(t,e,n,r){if(r===6408||r===6407)return r;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function Tq(t){const e=rx[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}const $E={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Eq extends pV{constructor(n,r,i){super([],i);U(this,"gl");U(this,"extensions");U(this,"testedFeatures",new Set);this.gl=n,this.extensions=r,Bc(n,"EXT_color_buffer_float",r)}*[Symbol.iterator](){const n=this.getFeatures();for(const r of n)this.has(r)&&(yield r);return[]}has(n){var r;return(r=this.disabledFeatures)!=null&&r[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),_q(n)&&vq(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(r=>r!=="polygon-mode-webgl");for(const r of n)this.has(r)}getFeatures(){return[...Object.keys($E),...Object.keys(nx)]}getWebGLFeature(n){const r=$E[n];return typeof r=="string"?!!Bc(this.gl,r,this.extensions):!!r}}class Aq extends dV{constructor(n){super();U(this,"gl");U(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]||0}}class _f extends Np{constructor(n,r){super(n,r);U(this,"device");U(this,"gl");U(this,"handle");U(this,"colorAttachments",[]);U(this,"depthStencilAttachment",null);const i=r.handle===null;this.device=n,this.gl=n.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),i||(n.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const n=this.gl.bindFramebuffer(36160,this.handle);for(let r=0;r<this.colorAttachments.length;++r){const i=this.colorAttachments[r];if(i){const s=36064+r;this._attachTextureView(s,i)}}if(this.depthStencilAttachment){const r=wq(this.depthStencilAttachment.props.format);this._attachTextureView(r,this.depthStencilAttachment)}if(this.device.props.debug){const r=this.gl.checkFramebufferStatus(36160);if(r!==36053)throw new Error(`Framebuffer ${Cq(r)}`)}this.gl.bindFramebuffer(36160,n)}_attachTextureView(n,r){const{gl:i}=this.device,{texture:s}=r,a=r.props.baseMipLevel,c=r.props.baseArrayLayer;switch(i.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:i.framebufferTextureLayer(36160,n,s.handle,a,c);break;case 34067:const u=Rq(c);i.framebufferTexture2D(36160,n,u,s.handle,a);break;case 3553:i.framebufferTexture2D(36160,n,3553,s.handle,a);break;default:throw new Error("Illegal texture type")}i.bindTexture(s.glTarget,null)}}function Rq(t){return t<34069?t+34069:t}function Cq(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class kq extends J_{constructor(n,r){super(r);U(this,"device");U(this,"format","rgba8unorm");U(this,"depthStencilFormat","depth24plus");U(this,"presentationSize");U(this,"_framebuffer",null);this.device=n,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new _f(this.device,{handle:null}),this._framebuffer}update(){const n=this.getPixelSize();(n[0]!==this.presentationSize[0]||n[1]!==this.presentationSize[1])&&(this.presentationSize=n,this.resize())}resize(n){if(this.device.gl&&this.canvas){const r=this.getDevicePixelRatio(n==null?void 0:n.useDevicePixels);this.setDevicePixelRatio(r,n);return}}commit(){}}async function yN(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",t),new Promise((i,s)=>{r.onload=i,r.onerror=a=>s(new Error(`Unable to load script '${t}': ${a}`)),n.appendChild(r)})}const Mq=1;let fn=null,HE=!1;const ix={debugSpectorJS:$e.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function Nq(t){if(!globalThis.SPECTOR)try{await yN(t.debugSpectorJSUrl||ix.debugSpectorJSUrl)}catch(e){$e.warn(String(e))}}function Iq(t){var e;if(t={...ix,...t},!t.debugSpectorJS)return null;if(!fn&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){$e.probe(Mq,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:n}=globalThis.SPECTOR;fn=new n,globalThis.luma&&(globalThis.luma.spector=fn)}if(!fn)return null;if(HE||(HE=!0,fn.spyCanvases(),fn==null||fn.onCaptureStarted.add(n=>$e.info("Spector capture started:",n)()),fn==null||fn.onCapture.add(n=>{$e.info("Spector capture complete:",n)(),fn==null||fn.getResultUI(),fn==null||fn.resultView.display(),fn==null||fn.resultView.addCapture(n)})),t.gl){const n=t.gl,r=n.device;fn==null||fn.startCapture(t.gl,500),n.device=r,new Promise(i=>setTimeout(i,2e3)).then(i=>{$e.info("Spector capture stopped after 2 seconds")(),fn==null||fn.stopCapture()})}return fn}const Oq="https://unpkg.com/webgl-debug@2.0.1/index.js";function bN(t){return t.luma=t.luma||{},t.luma}async function Pq(){Ga()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await yN(Oq))}function Dq(t,e={}){return e.debugWebGL||e.traceWebGL?Bq(t,e):Fq(t)}function Fq(t){const e=bN(t);return e.realContext?e.realContext:t}function Bq(t,e){if(!globalThis.WebGLDebugUtils)return $e.warn("webgl-debug not loaded")(),t;const n=bN(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...nc,...t});const r=globalThis.WebGLDebugUtils.makeDebugContext(t,jq.bind(null,e),Uq.bind(null,e));for(const a in nc)!(a in r)&&typeof nc[a]=="number"&&(r[a]=nc[a]);class i{}Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.setPrototypeOf(i,r);const s=Object.create(i);return n.realContext=t,n.debugContext=s,s.debug=!0,s}function WE(t,e){e=Array.from(e).map(r=>r===void 0?"undefined":r);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function jq(t,e,n,r){r=Array.from(r).map(c=>c===void 0?"undefined":c);const i=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r),a=`${i} in gl.${n}(${s})`;$e.error(a)();debugger}function Uq(t,e,n){let r="";$e.level>=1&&(r=WE(e,n),t.traceWebGL&&$e.log(1,r)());for(const i of n)if(i===void 0){r=r||WE(e,n);debugger}}const zb={};function Lq(t="id"){zb[t]=zb[t]||1;const e=zb[t]++;return`${t}-${e}`}class vf extends xn{constructor(n,r={}){super(n,r);U(this,"device");U(this,"gl");U(this,"handle");U(this,"glTarget");U(this,"glUsage");U(this,"glIndexType",5123);U(this,"byteLength");U(this,"bytesUsed");this.device=n,this.gl=this.device.gl;const i=typeof r=="object"?r.handle:void 0;this.handle=i||this.gl.createBuffer(),n.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=zq(this.props.usage),this.glUsage=Vq(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,r.data?this._initWithData(r.data,r.byteOffset,r.byteLength):this._initWithByteLength(r.byteLength||0)}_initWithData(n,r=0,i=n.byteLength+r){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,this.glUsage),this.gl.bufferSubData(s,r,n),this.gl.bindBuffer(s,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(n,r,i),this.trackAllocatedMemory(i)}_initWithByteLength(n){let r=n;n===0&&(r=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(n,r=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,r,n),this.gl.bindBuffer(36663,null),this._setDebugData(n,r,n.byteLength)}async readAsync(n=0,r){return this.readSyncWebGL(n,r)}readSyncWebGL(n=0,r){r=r??this.byteLength-n;const i=new Uint8Array(r),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,i,s,r),this.gl.bindBuffer(36662,null),this._setDebugData(i,n,r),i}}function zq(t){return t&xn.INDEX?34963:t&xn.VERTEX?34962:t&xn.UNIFORM?35345:34962}function Vq(t){return t&xn.INDEX||t&xn.VERTEX?35044:t&xn.UNIFORM?35048:35044}function $q(t){const e=t.split(/\r?\n/),n=[];for(const r of e){if(r.length<=1)continue;const i=r.split(":");if(i.length===2){const[g,b]=i;n.push({message:b.trim(),type:qE(g),lineNum:0,linePos:0});continue}const[s,a,c,...u]=i;let h=parseInt(c,10);isNaN(h)&&(h=0);let d=parseInt(a,10);isNaN(d)&&(d=0),n.push({message:u.join(":").trim(),type:qE(s),lineNum:h,linePos:d})}return n}function qE(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class Hq extends kp{constructor(n,r){super(n,r);U(this,"device");U(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return n?$q(n):[]}getTranslatedSource(){const r=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(r==null?void 0:r.getTranslatedShaderSource(this.handle))||null}async _compile(n){n=n.startsWith("#version ")?n:`#version 300 es
${n}`;const{gl:r}=this.device;if(r.shaderSource(this.handle,n),r.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}$e.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),$e.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function Wq(t,e,n,r){if(Kq(e))return r(t);const i=t;i.pushState();try{return qq(t,e),Xc(i.gl,n),r(t)}finally{i.popState()}}function qq(t,e){const n=t,{gl:r}=n;if(e.cullMode)switch(e.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029);break}if(e.frontFace&&r.frontFace(ja("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&r.enable(34383),e.depthBias!==void 0&&(r.enable(32823),r.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=ja("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=ja("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,a),s==null||s.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&r.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&r.enable(12288),e.clipDistance1&&r.enable(12289),e.clipDistance2&&r.enable(12290),e.clipDistance3&&r.enable(12291),e.clipDistance4&&r.enable(12292),e.clipDistance5&&r.enable(12293),e.clipDistance6&&r.enable(12294),e.clipDistance7&&r.enable(12295)),e.depthWriteEnabled!==void 0&&r.depthMask(Yq("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?r.enable(2929):r.disable(2929),r.depthFunc(T0("depthCompare",e.depthCompare))),e.stencilWriteMask){const i=e.stencilWriteMask;r.stencilMaskSeparate(1028,i),r.stencilMaskSeparate(1029,i)}if(e.stencilReadMask&&$e.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const i=e.stencilReadMask||4294967295,s=T0("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,s,0,i),r.stencilFuncSeparate(1029,s,0,i)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const i=Vb("stencilPassOperation",e.stencilPassOperation),s=Vb("stencilFailOperation",e.stencilFailOperation),a=Vb("stencilDepthFailOperation",e.stencilDepthFailOperation);r.stencilOpSeparate(1028,s,a,i),r.stencilOpSeparate(1029,s,a,i)}switch(e.blend){case!0:r.enable(3042);break;case!1:r.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const i=XE("blendColorOperation",e.blendColorOperation||"add"),s=XE("blendAlphaOperation",e.blendAlphaOperation||"add");r.blendEquationSeparate(i,s);const a=jd("blendColorSrcFactor",e.blendColorSrcFactor||"one"),c=jd("blendColorDstFactor",e.blendColorDstFactor||"zero"),u=jd("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),h=jd("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");r.blendFuncSeparate(a,c,u,h)}}function T0(t,e){return ja(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Vb(t,e){return ja(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function XE(t,e){return ja(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function jd(t,e){return ja(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Xq(t,e){return`Illegal parameter ${e} for ${t}`}function ja(t,e,n){if(!(e in n))throw new Error(Xq(t,e));return n[e]}function Yq(t,e){return e}function Kq(t){let e=!0;for(const n in t){e=!1;break}return e}function _N(t){const e={};return t.addressModeU&&(e[10242]=$b(t.addressModeU)),t.addressModeV&&(e[10243]=$b(t.addressModeV)),t.addressModeW&&(e[32882]=$b(t.addressModeW)),t.magFilter&&(e[10240]=E0(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=Qq(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=T0("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function $b(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function E0(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function Qq(t,e="none"){if(!e)return E0(t);switch(e){case"none":return E0(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class A0 extends Mp{constructor(n,r){super(n,r);U(this,"device");U(this,"handle");U(this,"parameters");this.device=n,this.parameters=_N(r),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[r,i]of Object.entries(n)){const s=Number(r);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,i);break;default:this.device.gl.samplerParameteri(this.handle,s,i);break}}}}class sc extends Cp{constructor(n,r){super(n,{...kn.defaultProps,...r});U(this,"device");U(this,"gl");U(this,"handle");U(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=r.texture}}const Zq="Failed to deduce GL constant from typed array";function Gq(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Zq)}}function Jq(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function vN(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function eX(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function qp(t,e,n){if(tX(e))return n(t);const{nocatch:r=!0}=e,i=Ba.get(t);i.push(),Xc(t,e);let s;if(r)s=n(t),i.pop();else try{s=n(t)}finally{i.pop()}return s}function tX(t){for(const e in t)return!1;return!0}function nX(t,e,n){const{dimension:r,width:i,height:s,depth:a=0}=n,{glInternalFormat:c}=n,u=n.glTarget;switch(r){case"2d-array":case"3d":t.texStorage3D(u,e,c,i,s,a);break;default:t.texStorage2D(u,e,c,i,s)}}function YE(t,e,n,r){const{width:i,height:s}=r,{dimension:a,depth:c=0,mipLevel:u=0}=r,{x:h=0,y:d=0,z:g=0}=r,{glFormat:b,glType:S}=r,R=xN(r.glTarget,a,c),A=r.flipY?{37440:!0}:{};qp(t,A,()=>{switch(a){case"2d-array":case"3d":t.bindTexture(R,e),t.texSubImage3D(R,u,h,d,g,i,s,c,b,S,n),t.bindTexture(R,null);break;case"2d":case"cube":t.bindTexture(R,e),t.texSubImage2D(R,u,h,d,i,s,b,S,n),t.bindTexture(R,null);break;default:throw new Error(a)}})}function KE(t,e,n){const{dimension:r,width:i,height:s,depth:a=0,mipLevel:c=0,byteOffset:u=0}=n,{x:h=0,y:d=0,z:g=0}=n,{glFormat:b,glType:S,compressed:R}=n,A=xN(n.glTarget,r,a);switch(r){case"2d-array":case"3d":R?t.compressedTexSubImage3D(A,c,h,d,g,i,s,a,b,e,u):t.texSubImage3D(A,c,h,d,g,i,s,a,b,S,e,u);break;case"2d":case"cube":R?t.compressedTexSubImage2D(A,c,h,d,i,s,b,e,u):t.texSubImage2D(A,c,h,d,i,s,b,S,e,u);break;default:throw new Error(r)}}function rX(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function xN(t,e,n){return e==="cube"?34069+n:t}function iX(t,e){var k;const{sourceX:n=0,sourceY:r=0,sourceAttachment:i=0}=e||{};let{target:s=null,sourceWidth:a,sourceHeight:c,sourceDepth:u,sourceFormat:h,sourceType:d}=e||{};const{framebuffer:g,deleteFramebuffer:b}=wN(t),{gl:S,handle:R}=g;a||(a=g.width),c||(c=g.height);const A=(k=g.colorAttachments[i])==null?void 0:k.texture;if(!A)throw new Error(`Invalid framebuffer attachment ${i}`);u=(A==null?void 0:A.depth)||1,h||(h=(A==null?void 0:A.glFormat)||6408),d||(d=(A==null?void 0:A.glType)||5121),s=aX(s,d,h,a,c),d=d||Gq(s);const C=S.bindFramebuffer(36160,R);return S.readBuffer(36064+i),S.readPixels(n,r,a,c,h,d,s),S.readBuffer(36064),S.bindFramebuffer(36160,C||null),b&&g.destroy(),s}function sX(t,e){const{target:n,sourceX:r=0,sourceY:i=0,sourceFormat:s=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:c,sourceHeight:u,sourceType:h}=e||{};const{framebuffer:d,deleteFramebuffer:g}=wN(t);c=c||d.width,u=u||d.height;const b=d;h=h||5121;let S=n;if(!S){const A=vN(s),C=eX(h),k=a+c*u*A*C;S=b.device.createBuffer({byteLength:k})}const R=t.device.createCommandEncoder();return R.copyTextureToBuffer({sourceTexture:t,width:c,height:u,origin:[r,i],destinationBuffer:S,byteOffset:a}),R.destroy(),g&&d.destroy(),S}function wN(t){return t instanceof Np?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:oX(t),deleteFramebuffer:!0}}function oX(t,e){const{device:n,width:r,height:i,id:s}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:r,height:i,colorAttachments:[t]})}function aX(t,e,n,r,i,s){if(t)return t;e||(e=5121);const a=Jq(e,{clamped:!1}),c=vN(n);return new a(r*i*c)}class xf extends kn{constructor(n,r){super(n,r);U(this,"device");U(this,"gl");U(this,"handle");U(this,"sampler");U(this,"view");U(this,"mipmaps");U(this,"compressed");U(this,"glTarget");U(this,"glFormat");U(this,"glType");U(this,"glInternalFormat");U(this,"textureUnit",0);const i={...this.props};i.data=r.data,this.device=n,this.gl=this.device.gl,this.glTarget=rX(this.props.dimension);const s=mN(this.props.format);this.glInternalFormat=s.internalFormat,this.glFormat=s.format,this.glType=s.type,this.compressed=s.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(i),Object.seal(this)}_initialize(n){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:n.data});let{width:r,height:i}=n;if(!r||!i){const s=kn.getTextureDataSize(n.data);r=(s==null?void 0:s.width)||1,i=(s==null?void 0:s.height)||1}if(this.width=r,this.height=i,this.depth=n.depth,this.setSampler(n.sampler),this.view=new sc(this.device,{...this.props,texture:this}),this.bind(),nX(this.gl,this.mipLevels,this),n.data)switch(n.dimension){case"1d":this.setTexture1DData(n.data);break;case"2d":this.setTexture2DData(n.data);break;case"3d":this.setTexture3DData(n.data);break;case"cube":this.setTextureCubeData(n.data);break;case"2d-array":this.setTextureArrayData(n.data);break;case"cube-array":this.setTextureCubeArrayData(n.data);break;default:throw new Error(n.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(n){return new sc(this.device,{...n,texture:this})}setSampler(n={}){let r;n instanceof A0?(this.sampler=n,r=n.props):(this.sampler=new A0(this.device,n),r=n);const i=_N(r);this._setSamplerParameters(i)}generateMipmap(n){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&($e.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(n!=null&&n.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(i){$e.warn(`Error generating mipmap for ${this}: ${i.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(n){const r=kn.getExternalImageSize(n.image),i={...kn.defaultCopyExternalImageOptions,...r,...n},{image:s,depth:a,mipLevel:c,x:u,y:h,z:d,flipY:g}=i;let{width:b,height:S}=i;const{dimension:R,glTarget:A,glFormat:C,glInternalFormat:k,glType:P}=this;if(b=Math.min(b,this.width-u),S=Math.min(S,this.height-h),n.sourceX||n.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return YE(this.device.gl,this.handle,s,{dimension:R,mipLevel:c,x:u,y:h,z:d,width:b,height:S,depth:a,glFormat:C,glType:P,glTarget:A,flipY:g}),{width:i.width,height:i.height}}setTexture1DData(n){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(n,r=0){this.bind();const i=kn.normalizeTextureData(n,this);i.length>1&&this.props.mipmaps!==!1&&$e.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let s=0;s<i.length;s++){const a=i[s];this._setMipLevel(r,s,a)}this.unbind()}setTexture3DData(n){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(n)&&(this.bind(),KE(this.device.gl,n,this),this.unbind())}setTextureCubeData(n,r=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const i of kn.CubeFaces)this.setTextureCubeFaceData(n[i],i)}setTextureArrayData(n){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(n){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(n,r,i=0){Array.isArray(n)&&n.length>1&&this.props.mipmaps!==!1&&$e.warn(`${this.id} has mipmap and multiple LODs.`)();const s=kn.CubeFaces.indexOf(r);this.setTexture2DData(n,s)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(n){const{face:r,width:i,height:s,pixels:a,data:c,format:u=6408,type:h=5121}=n,{gl:d}=this,g=a||c;this.bind(),g instanceof Promise?g.then(b=>this.setImageDataForFace(Object.assign({},n,{face:r,data:b,pixels:b}))):this.width||this.height?d.texImage2D(r,0,u,i,s,0,u,h,g):d.texImage2D(r,0,u,u,h,g)}_getImageDataMap(n){for(let r=0;r<kn.CubeFaces.length;++r){const i=kn.CubeFaces[r];n[i]&&(n[34069+r]=n[i],delete n[i])}return n}_setSamplerParameters(n){$e.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(n))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[r,i]of Object.entries(n)){const s=Number(r),a=i;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,a);break;case 10241:this.gl.texParameteri(this.glTarget,s,a);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,s,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,a);break;default:this.gl.texParameteri(this.glTarget,s,a);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(n,r,i,s=this.glTarget){if(kn.isExternalImage(i)){YE(this.device.gl,this.handle,i,{...this,depth:n,mipLevel:r,glTarget:s,flipY:this.props.flipY});return}if(kn.isTextureLevelData(i)){KE(this.device.gl,i.data,{...this,depth:n,mipLevel:r,glTarget:s});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,this.handle),n}unbind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,null),n}}const lX=[1,2,4,8];class cX extends e0{constructor(n,r){var a;super(n,r);U(this,"device");U(this,"glParameters");this.device=n;let i;if(!((a=r==null?void 0:r.parameters)!=null&&a.viewport))if(r!=null&&r.framebuffer){const{width:c,height:u}=r.framebuffer;i=[0,0,c,u]}else{const[c,u]=n.getCanvasContext().getDrawingBufferSize();i=[0,0,c,u]}this.device.pushState(),this.setParameters({viewport:i,...this.props.parameters});const s=this.props.framebuffer;if(s!=null&&s.handle)if(this.props.framebuffer){const c=this.props.framebuffer.colorAttachments.map((u,h)=>36064+h);this.device.gl.drawBuffers(c)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const r={...this.glParameters};r.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(r.depthMask=!this.props.depthReadOnly),r.stencilMask=this.props.stencilReadOnly?0:1,r[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(r.viewport=n.viewport.slice(0,4),r.depthRange=[n.viewport[4],n.viewport[5]]):r.viewport=n.viewport),n.scissorRect&&(r.scissorTest=!0,r.scissor=n.scissorRect),n.blendConstant&&(r.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),n[2967]=n.stencilReference),n.colorMask&&(r.colorMask=lX.map(i=>!!(i&n.colorMask))),this.glParameters=r,Xc(this.device.gl,r)}beginOcclusionQuery(n){const r=this.props.occlusionQuerySet;r==null||r.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let r=0;this.props.clearColors&&this.props.clearColors.forEach((i,s)=>{i&&this.clearColorBuffer(s,i)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(r|=16384,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(r|=256,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(r|=1024,n.clearStencil=this.props.clearStencil),r!==0&&qp(this.device.gl,n,()=>{this.device.gl.clear(r)})}clearColorBuffer(n=0,r=[0,0,0,0]){qp(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(r.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,n,r);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,n,r);break;case Float32Array:this.device.gl.clearBufferfv(6144,n,r);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function uX(t){return fX.includes(t)}const fX=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],SN={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function TN(t){const e=SN[t];if(!e)throw new Error("uniform");const[n,r,,i]=e;return{format:i,components:r,glType:n}}function hX(t){const e=SN[t];if(!e)throw new Error("attribute");const[,n,,r,i]=e;return{attributeType:r,vertexFormat:i,components:n}}function dX(t,e){const n={attributes:[],bindings:[]};n.attributes=pX(t,e);const r=yX(t,e);for(const c of r){const u=c.uniforms.map(h=>({name:h.name,format:h.format,byteOffset:h.byteOffset,byteStride:h.byteStride,arrayLength:h.arrayLength}));n.bindings.push({type:"uniform",name:c.name,group:0,location:c.location,visibility:(c.vertex?1:0)&(c.fragment?2:0),minBindingSize:c.byteLength,uniforms:u})}const i=mX(t,e);let s=0;for(const c of i)if(uX(c.type)){const{viewDimension:u,sampleType:h}=_X(c.type);n.bindings.push({type:"texture",name:c.name,group:0,location:s,viewDimension:u,sampleType:h}),c.textureUnit=s,s+=1}i.length&&(n.uniforms=i);const a=gX(t,e);return a!=null&&a.length&&(n.varyings=a),n}function pX(t,e){const n=[],r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i);if(!s)throw new Error("activeInfo");const{name:a,type:c}=s,u=t.getAttribLocation(e,a);if(u>=0){const{attributeType:h}=hX(c),d=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:u,stepMode:d,type:h})}}return n.sort((i,s)=>i.location-s.location),n}function gX(t,e){const n=[],r=t.getProgramParameter(e,35971);for(let i=0;i<r;i++){const s=t.getTransformFeedbackVarying(e,i);if(!s)throw new Error("activeInfo");const{name:a,type:c,size:u}=s,{glType:h,components:d}=TN(c),g={location:i,name:a,type:h,size:u*d};n.push(g)}return n.sort((i,s)=>i.location-s.location),n}function mX(t,e){const n=[],r=t.getProgramParameter(e,35718);for(let i=0;i<r;i++){const s=t.getActiveUniform(e,i);if(!s)throw new Error("activeInfo");const{name:a,size:c,type:u}=s,{name:h,isArray:d}=vX(a);let g=t.getUniformLocation(e,h);const b={location:g,name:h,size:c,type:u,isArray:d};if(n.push(b),b.size>1)for(let S=0;S<b.size;S++){const R=`${h}[${S}]`;g=t.getUniformLocation(e,R);const A={...b,name:R,location:g};n.push(A)}}return n}function yX(t,e){const n=(s,a)=>t.getActiveUniformBlockParameter(e,s,a),r=[],i=t.getProgramParameter(e,35382);for(let s=0;s<i;s++){const a={name:t.getActiveUniformBlockName(e,s)||"",location:n(s,35391),byteLength:n(s,35392),vertex:n(s,35396),fragment:n(s,35398),uniformCount:n(s,35394),uniforms:[]},c=n(s,35395)||[],u=t.getActiveUniforms(e,c,35383),h=t.getActiveUniforms(e,c,35384),d=t.getActiveUniforms(e,c,35387),g=t.getActiveUniforms(e,c,35388);for(let b=0;b<a.uniformCount;++b){const S=t.getActiveUniform(e,c[b]);if(!S)throw new Error("activeInfo");a.uniforms.push({name:S.name,format:TN(u[b]).format,type:u[b],arrayLength:h[b],byteOffset:d[b],byteStride:g[b]})}r.push(a)}return r.sort((s,a)=>s.location-a.location),r}const bX={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function _X(t){const e=bX[t];if(!e)throw new Error("sampler");const[n,r]=e;return{viewDimension:n,sampleType:r}}function vX(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function xX(t,e,n,r){const i=t;let s=r;s===!0&&(s=1),s===!1&&(s=0);const a=typeof s=="number"?[s]:s;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof r!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,r);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return i.uniform1uiv(e,a,1);case 36294:return i.uniform2uiv(e,a,2);case 36295:return i.uniform3uiv(e,a,3);case 36296:return i.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return i.uniformMatrix2x3fv(e,!1,a);case 35686:return i.uniformMatrix2x4fv(e,!1,a);case 35687:return i.uniformMatrix3x2fv(e,!1,a);case 35688:return i.uniformMatrix3x4fv(e,!1,a);case 35689:return i.uniformMatrix4x2fv(e,!1,a);case 35690:return i.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function wX(t){return rN(t)!==null||typeof t=="number"||typeof t=="boolean"}function SX(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];wX(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}function TX(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function EX(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const QE=4;class AX extends Cc{constructor(n,r){super(n,r);U(this,"device");U(this,"handle");U(this,"vs");U(this,"fs");U(this,"introspectedLayout");U(this,"uniforms",{});U(this,"bindings",{});U(this,"varyings",null);U(this,"_uniformCount",0);U(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=r.vs,this.fs=r.fs;const{varyings:i,bufferMode:s=35981}=r;i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,s)),this._linkShaders(),$e.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=dX(this.device.gl,this.handle),$e.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=RX(this.introspectedLayout,r.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(n,r){for(const[i,s]of Object.entries(n)){const a=this.shaderLayout.bindings.find(c=>c.name===i)||this.shaderLayout.bindings.find(c=>c.name===`${i}Uniforms`);if(!a){const c=this.shaderLayout.bindings.map(u=>`"${u.name}"`).join(", ");r!=null&&r.disableWarnings||$e.warn(`No binding "${i}" in render pipeline "${this.id}", expected one of ${c}`,s)();continue}switch(s||$e.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(s instanceof vf)&&!(s.buffer instanceof vf))throw new Error("buffer value");break;case"texture":if(!(s instanceof sc||s instanceof xf||s instanceof _f))throw new Error("texture value");break;case"sampler":$e.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(a.type)}this.bindings[i]=s}}draw(n){var C;const{renderPass:r,parameters:i=this.props.parameters,topology:s=this.props.topology,vertexArray:a,vertexCount:c,instanceCount:u,isInstanced:h=!1,firstVertex:d=0,transformFeedback:g}=n,b=TX(s),S=!!a.indexBuffer,R=(C=a.indexBuffer)==null?void 0:C.glIndexType;if(this.linkStatus!=="success")return $e.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return $e.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(r),g&&g.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const A=r;return Wq(this.device,i,A.glParameters,()=>{S&&h?this.device.gl.drawElementsInstanced(b,c||0,R,d,u||0):S?this.device.gl.drawElements(b,c||0,R,d):h?this.device.gl.drawArraysInstanced(b,d,c||0,u||0):this.device.gl.drawArrays(b,d,c||0),g&&g.end()}),a.unbindAfterRender(r),!0}setUniformsWebGL(n){const{bindings:r}=SX(n);Object.keys(r).forEach(i=>{$e.warn(`Unsupported value "${JSON.stringify(r[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,n)}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),$e.time(QE,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),$e.timeEnd(QE,`linkProgram for ${this.id}`)(),$e.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}$e.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),$e.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const r=this._getLinkStatus();this._reportLinkStatus(r)}async _reportLinkStatus(n){var r;switch(n){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((r=this.fs)==null?void 0:r.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const i=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${n}: ${i}`)}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const r of this.shaderLayout.bindings)!this.bindings[r.name]&&!this.bindings[r.name.replace(/Uniforms$/,"")]&&($e.warn(`Binding ${r.name} not found in ${this.id}`)(),n=!1);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let r=0,i=0;for(const s of this.shaderLayout.bindings){const a=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:c}=s,u=n.getUniformBlockIndex(this.handle,c);if(u===4294967295)throw new Error(`Invalid uniform block name ${c}`);n.uniformBlockBinding(this.handle,i,u),a instanceof vf?n.bindBufferBase(35345,i,a.handle):n.bindBufferRange(35345,i,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),i+=1;break;case"texture":if(!(a instanceof sc||a instanceof xf||a instanceof _f))throw new Error("texture");let h;if(a instanceof sc)h=a.texture;else if(a instanceof xf)h=a;else if(a instanceof _f&&a.colorAttachments[0]instanceof sc)$e.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),h=a.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+r),n.bindTexture(h.glTarget,h.handle),r+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:r,location:i,type:s,textureUnit:a}=n,c=this.uniforms[r]??a;c!==void 0&&xX(this.device.gl,i,s,c)}}}function RX(t,e){const n={...t,attributes:t.attributes.map(r=>({...r}))};for(const r of(e==null?void 0:e.attributes)||[]){const i=n.attributes.find(s=>s.name===r.name);i?(i.type=r.type||i.type,i.stepMode=r.stepMode||i.stepMode):$e.warn(`shader layout attribute ${r.name} not present in shader`)}return n}class CX extends n0{constructor(n){super(n,{});U(this,"device");U(this,"commands",[]);this.device=n}submitCommands(n=this.commands){for(const r of n)switch(r.name){case"copy-buffer-to-buffer":kX(this.device,r.options);break;case"copy-buffer-to-texture":MX(this.device,r.options);break;case"copy-texture-to-buffer":NX(this.device,r.options);break;case"copy-texture-to-texture":IX(this.device,r.options);break;default:throw new Error(r.name)}}}function kX(t,e){const n=e.sourceBuffer,r=e.destinationBuffer;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,r.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function MX(t,e){throw new Error("Not implemented")}function NX(t,e){const{sourceTexture:n,mipLevel:r=0,aspect:i="all",width:s=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:c=0,origin:u=[0,0],destinationBuffer:h,byteOffset:d=0,bytesPerRow:g,rowsPerImage:b}=e;if(i!=="all")throw new Error("aspect not supported in WebGL");if(r!==0||c!==0||g||b)throw new Error("not implemented");const{framebuffer:S,destroyFramebuffer:R}=EN(n);let A;try{const C=h,k=s||S.width,P=a||S.height,M=mN(S.colorAttachments[0].texture.props.format),z=M.format,$=M.type;t.gl.bindBuffer(35051,C.handle),A=t.gl.bindFramebuffer(36160,S.handle),t.gl.readPixels(u[0],u[1],k,P,z,$,d)}finally{t.gl.bindBuffer(35051,null),A!==void 0&&t.gl.bindFramebuffer(36160,A),R&&S.destroy()}}function IX(t,e){const{sourceTexture:n,destinationMipLevel:r=0,origin:i=[0,0],destinationOrigin:s=[0,0],destinationTexture:a}=e;let{width:c=e.destinationTexture.width,height:u=e.destinationTexture.height}=e;const{framebuffer:h,destroyFramebuffer:d}=EN(n),[g,b]=i,[S,R,A]=s,C=t.gl.bindFramebuffer(36160,h.handle);let k=null,P;if(a instanceof xf)k=a,c=Number.isFinite(c)?c:k.width,u=Number.isFinite(u)?u:k.height,k.bind(0),P=k.glTarget;else throw new Error("invalid destination");switch(P){case 3553:case 34067:t.gl.copyTexSubImage2D(P,r,S,R,g,b,c,u);break;case 35866:case 32879:t.gl.copyTexSubImage3D(P,r,S,R,A,g,b,c,u);break}k&&k.unbind(),t.gl.bindFramebuffer(36160,C),d&&h.destroy()}function EN(t){if(t instanceof kn){const{width:e,height:n,id:r}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${r}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class OX extends t0{constructor(n,r){super(n,r);U(this,"device");U(this,"commandBuffer");this.device=n,this.commandBuffer=new CX(n)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,r,i){}}function PX(t){const{target:e,source:n,start:r=0,count:i=1}=t,s=n.length,a=i*s;let c=0;for(let u=r;c<s;c++)e[u++]=n[c];for(;c<a;)c<a-c?(e.copyWithin(r+c,r,r+c),c*=2):(e.copyWithin(r+c,r,r+a-c),c=a);return t.target}class sx extends r0{constructor(n,r){super(n,r);U(this,"device");U(this,"handle");U(this,"buffer",null);U(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return r8()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const r=n;if(r&&r.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,r?r.handle:null),this.indexBuffer=r,this.device.gl.bindVertexArray(null)}setBuffer(n,r){const i=r;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:a,stride:c,offset:u,normalized:h,integer:d,divisor:g}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),d?this.device.gl.vertexAttribIPointer(n,s,a,c,u):this.device.gl.vertexAttribPointer(n,s,a,h,c,u),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,g||0),this.attributes[n]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,r){this._enable(n,!1),this.attributes[n]=r}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const r=this.attributes[n];ArrayBuffer.isView(r)&&this.device.setConstantAttributeWebGL(n,r)}}_getAccessor(n){const r=this.attributeInfos[n];if(!r)throw new Error(`Unknown attribute location ${n}`);const i=gN(r.bufferDataType);return{size:r.bufferComponents,type:i,stride:r.byteStride,offset:r.byteOffset,normalized:r.normalized,integer:r.integer,divisor:r.stepMode==="instance"?1:0}}_enable(n,r=!0){const s=sx.isConstantAttributeZeroSupported(this.device)||n!==0;(r||s)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),r?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,r){const i=DX(r),s=i.byteLength*n,a=i.length*n;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let c=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),c=c||!FX(i,this.bufferValue),c){const u=$V(r.constructor,a);PX({target:u,source:i,start:0,count:a}),this.buffer.write(u),this.bufferValue=r}return this.buffer}}function DX(t){return Array.isArray(t)?new Float32Array(t):t}function FX(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class BX extends i0{constructor(n,r){super(n,r);U(this,"device");U(this,"gl");U(this,"handle");U(this,"layout");U(this,"buffers",{});U(this,"unusedBuffers",{});U(this,"bindOnUse",!0);U(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,r.buffers&&this.setBuffers(r.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(EX(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const r in n)this.setBuffer(r,n[r])})}setBuffer(n,r){const i=this._getVaryingIndex(n),{buffer:s,byteLength:a,byteOffset:c}=this._getBufferRange(r);if(i<0){this.unusedBuffers[n]=s,$e.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[i]={buffer:s,byteLength:a,byteOffset:c},this.bindOnUse||this._bindBuffer(i,s,c,a)}getBuffer(n){if(ZE(n))return this.buffers[n]||null;const r=this._getVaryingIndex(n);return r>=0?this.buffers[r]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let r;return this._bound?r=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,r=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),r}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof vf)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:r,byteOffset:i=0,byteLength:s=n.buffer.byteLength}=n;return{buffer:r,byteOffset:i,byteLength:s}}_getVaryingIndex(n){if(ZE(n))return Number(n);for(const r of this.layout.varyings)if(n===r.name)return r.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:r,byteLength:i,byteOffset:s}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),r,s,i)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,r,i=0,s){const a=r&&r.handle;!a||s===void 0?this.gl.bindBufferBase(35982,n,a):this.gl.bindBufferRange(35982,n,a,i,s)}}function ZE(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class jX extends s0{constructor(n,r){super(n,r);U(this,"device");U(this,"handle");U(this,"target",null);U(this,"_queryPending",!1);U(this,"_pollingPromise",null);if(this.device=n,r.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((i,s)=>{const a=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):r++>n?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}class oc extends Ho{constructor(n){var g,b;super({...n,id:n.id||Lq("webgl-device")});U(this,"type","webgl");U(this,"handle");U(this,"features");U(this,"limits");U(this,"info");U(this,"canvasContext");U(this,"lost");U(this,"_resolveContextLost");U(this,"gl");U(this,"debug",!1);U(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});U(this,"_extensions",{});U(this,"_polyfilled",!1);U(this,"spectorJS");U(this,"renderPass",null);U(this,"_constants");const r=Ho._getCanvasContextProps(n);if(!r)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let i=(b=(g=r.canvas)==null?void 0:g.gl)==null?void 0:b.device;if(i)throw new Error(`WebGL context already attached to device ${i.id}`);this.canvasContext=new kq(this,r),this.lost=new Promise(S=>{this._resolveContextLost=S});const s={...n.webgl};r.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),n.powerPreference!==void 0&&(s.powerPreference=n.powerPreference);const c=this.props._handle||cq(this.canvasContext.canvas,{onContextLost:S=>{var R;return(R=this._resolveContextLost)==null?void 0:R.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:S=>console.log("WebGL context restored")},s);if(!c)throw new Error("WebGL context creation failed");if(i=c.device,i){if(n._reuseDevices)return $e.log(1,`Not creating a new Device, instead returning a reference to Device ${i.id} already attached to WebGL context`,i)(),i._reused=!0,i;throw new Error(`WebGL context already attached to device ${i.id}`)}this.handle=c,this.gl=c,this.spectorJS=Iq({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=uq(this.gl,this._extensions),this.limits=new Aq(this.gl),this.features=new Eq(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),r.autoResize!==!1&&this.canvasContext.resize(),new Ba(this.gl,{log:(...S)=>$e.log(1,...S)()}).trackState(this.gl,{copyState:!1});const h=n.debugWebGL||n.debug,d=n.debugWebGL;h&&(this.gl=Dq(this.gl,{debugWebGL:h,traceWebGL:d}),$e.warn("WebGL debug mode activated. Performance reduced.")(),n.debugWebGL&&($e.level=Math.max($e.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const r=this._normalizeBufferProps(n);return new vf(this,r)}createTexture(n){return new xf(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new A0(this,n)}createShader(n){return new Hq(this,n)}createFramebuffer(n){return new _f(this,n)}createVertexArray(n){return new sx(this,n)}createTransformFeedback(n){return new BX(this,n)}createQuerySet(n){return new jX(this,n)}createRenderPipeline(n){return new AX(this,n)}beginRenderPass(n){return new cX(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(n={}){return new OX(this,n)}submit(){var n;(n=this.renderPass)==null||n.end(),this.renderPass=null}readPixelsToArrayWebGL(n,r){return iX(n,r)}readPixelsToBufferWebGL(n,r){return sX(n,r)}setParametersWebGL(n){Xc(this.gl,n)}getParametersWebGL(n){return dN(this.gl,n)}withParametersWebGL(n,r){return qp(this.gl,n,r)}resetWebGL(){$e.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),iq(this.gl)}_getDeviceSpecificTextureFormatCapabilities(n){return xq(this.gl,n,this._extensions)}loseDevice(){var s;let n=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(n=!0,i.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){Ba.get(this.gl).push()}popState(){Ba.get(this.gl).pop()}setSpectorMetadata(n,r){n.__SPECTOR_Metadata=r}getGLKey(n,r){const i=Number(n);for(const s in this.gl)if(this.gl[s]===i)return`GL.${s}`;return r!=null&&r.emptyIfUnknown?"":String(n)}getGLKeys(n){const r={emptyIfUnknown:!0};return Object.entries(n).reduce((i,[s,a])=>(i[`${s}:${this.getGLKey(s,r)}`]=`${a}:${this.getGLKey(a,r)}`,i),{})}setConstantAttributeWebGL(n,r){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const s=this._constants[n];switch(s&&VX(s,r)&&$e.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=r,r.constructor){case Float32Array:UX(this,n,r);break;case Int32Array:LX(this,n,r);break;case Uint32Array:zX(this,n,r);break;default:throw new Error("constant")}}getExtension(n){return Bc(this.gl,n,this._extensions),this._extensions}}function UX(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break}}function LX(t,e,n){t.gl.vertexAttribI4iv(e,n)}function zX(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function VX(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const $X={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},HX=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),WX=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),qX=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function XX(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(n,r){if(n==="webgl"||n==="experimental-webgl"){const i=this.originalGetContext("webgl2",r);return i instanceof HTMLElement&&YX(i),i}return this.originalGetContext(n,r)}}function YX(t){t.getExtension("EXT_color_buffer_float");const e={...$X,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:HX(t),OES_vertex_array_object:WX(t),ANGLE_instanced_arrays:qX(t)},n=t.getExtension;t.getExtension=function(i){const s=n.call(t,i);return s||(i in e?e[i]:null)};const r=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=r.apply(t)||[];return i==null?void 0:i.concat(Object.keys(e))}}const Ud=1;class KX extends _V{constructor(){super();U(this,"type","webgl");Ho.defaultProps={...Ho.defaultProps,...ix},oc.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(n){XX(n)}async attach(n){if(n instanceof oc)return n;if((n==null?void 0:n.device)instanceof Ho)return n.device;if(!QX(n))throw new Error("Invalid WebGL2RenderingContext");return new oc({_handle:n,createCanvasContext:{canvas:n.canvas,autoResize:!1}})}async create(n={}){$e.groupCollapsed(Ud,"WebGLDevice created")();const r=[];(n.debugWebGL||n.debug)&&r.push(Pq()),n.debugSpectorJS&&r.push(Nq(n));const i=await Promise.allSettled(r);for(const c of i)c.status==="rejected"&&$e.error(`Failed to initialize debug libraries ${c.reason}`)();const s=new oc(n),a=`${s._reused?"Reusing":"Created"} device with WebGL2 ${s.debug?"debug ":""}context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return $e.probe(Ud,a)(),$e.table(Ud,s.info)(),$e.groupEnd(Ud)(),s}}function QX(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const GE=new KX;function xo(){}const ZX=({isDragging:t})=>t?"grabbing":"grab",AN={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:xo,onWebGLInitialized:xo,onResize:xo,onViewStateChange:xo,onInteractionStateChange:xo,onBeforeRender:xo,onAfterRender:xo,onLoad:xo,onError:t=>yn.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ZX,getTooltip:null,debug:!1,drawPickingColors:!1};class ox{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Ag({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=r=>{const{_pickRequest:i}=this;if(r.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(r.leftButton||r.rightButton)return;{const s=r.offsetCenter;if(!s)return;i.x=s.x,i.y=s.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=r},this._onEvent=r=>{const i=g0[r.type],s=r.offsetCenter;if(!i||!s||!this.layerManager)return;const a=this.layerManager.getLayers(),c=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:a,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:u}=c,h=u&&(u[i]||u.props[i]),d=this.props[i];let g=!1;h&&(g=h.call(u,c,r)),g||(d==null||d(c,r),this.widgetManager.onEvent(c,r))},this._onPointerDown=r=>{var a;if(((a=this.device)==null?void 0:a.type)==="webgpu")return;const i=r.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo},this.props={...AN,...e},e=this.props,e.viewState&&e.initialViewState&&yn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let n=this.device;!n&&e.gl&&(e.gl instanceof WebGLRenderingContext&&yn.error("WebGL1 context not supported.")(),n=GE.attach(e.gl)),n||(n=G_.createDevice({type:"best-available",_reuseDevices:!0,adapters:[GE],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&Pf.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,a,c,u,h,d;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(r=this.layerManager)==null||r.finalize(),this.layerManager=null,(i=this.viewManager)==null||i.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(c=this.deckPicker)==null||c.finalize(),this.deckPicker=null,(u=this.eventManager)==null||u.destroy(),this.eventManager=null,(h=this.widgetManager)==null||h.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((d=this.canvas.parentElement)==null||d.removeChild(this.canvas),this.canvas=null)}setProps(e){var r;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&yn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&yn.removed("onLayerClick","onClick")(),e.initialViewState&&!zi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(r=this.animationLoop)==null||r.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||a,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Sr(this.viewManager),this.viewManager.views}getViewports(e){return Sr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,r){Sr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Sr(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var i;if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=s}if(r||r===0){const s=Number.isFinite(r)?`${r}px`:r;this.canvas.style.position=((i=e.style)==null?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var i,s;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,r=e.clientHeight??e.height;(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,(i=this.viewManager)==null||i.setProps({width:n,height:r}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:r}))}_createAnimationLoop(e,n){const{gl:r,onError:i,useDevicePixels:s}=n;return new JH({device:e,useDevicePixels:s,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new uN({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,r,i,s;if(((n=this.device)==null?void 0:n.type)==="webgpu")return;const{_pickRequest:e}=this;if(e.event){const{result:a,emptyInfo:c}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=a.length>0;let u=c,h=!1;for(const d of a)u=d,h=((r=d.layer)==null?void 0:r.onHover(d,e.event))||h;h||((s=(i=this.props).onHover)==null||s.call(i,u,e.event),this.widgetManager.onHover(u,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var i,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(i=this.device.canvasContext)==null?void 0:i.canvas),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const n=new nN;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new R$(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(_E).map(a=>{var S;const[c,u,h,d]=_E[a],g=(S=this.props.eventRecognizerOptions)==null?void 0:S[a],b={...u,...g,event:a};return{recognizer:new c(b),recognizeWith:h,requestFailure:d}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in g0)this.eventManager.on(a,this._onEvent);this.viewManager=new TW({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new SW(this.device,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new LW({deck:this,device:this.device}),this.deckRenderer=new $W(this.device),this.deckPicker=new KW(this.device),this.widgetManager=new GW({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new eq),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var a;const{device:r,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:r,gl:i});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(a=this.deckRenderer)==null||a.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:r,gl:i})}_onRenderFrame(){var e;this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),yn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),((e=this.device)==null?void 0:e.type)!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=G_.stats.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}ox.defaultProps=AN;ox.VERSION=Tz;function GX(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return lM(t)}}const JX=aM;function Ld(t,e,n){const r=n==="webgpu"&&e.type==="uint8"?"unorm8":e.type;return{attribute:t,format:e.size>1?`${r}x${e.size}`:e.type,byteOffset:e.offset||0}}function Ea(t){return t.stride||t.size*t.bytesPerElement}function eY(t,e){return t.type===e.type&&t.size===e.size&&Ea(t)===Ea(e)&&(t.offset||0)===(e.offset||0)}function R0(t,e){e.offset&&yn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Ea(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function tY(t,e){const n=R0(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class nY{constructor(e,n,r){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let c;s?c="float32":!i&&n.isIndexed?c="uint32":c=i||"float32";let u=GX(i||c);this.doublePrecision=s,s&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:a,logicalType:i,type:c,normalized:c.includes("norm"),size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ea(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Pf.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const r={};if(this.state.constant){const i=this.value;if(n){const s=R0(this.getAccessor(),n),a=s.offset/i.BYTES_PER_ELEMENT,c=s.size||this.size;r[e]=i.subarray(a,a+c)}else r[e]=i}else r[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?r[`${e}64Low`]=r[e]:r[`${e}64Low`]=new Float32Array(this.size)),r}_getBufferLayout(e=this.id,n=null){const r=this.getAccessor(),i=[],s={name:this.id,byteStride:Ea(r),attributes:i};if(this.doublePrecision){const a=tY(r,n||{});i.push(Ld(e,{...r,...a.high},this.device.type),Ld(`${e}64Low`,{...r,...a.low},this.device.type))}else if(n){const a=R0(r,n);i.push(Ld(e,{...r,...a},this.device.type))}else i.push(Ld(e,r,this.device.type));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const a=new Array(i).fill(1/0),c=new Array(i).fill(-1/0);for(let u=0;u<s;)for(let h=0;h<i;h++){const d=n[u++];d<a[h]&&(a[h]=d),d>c[h]&&(c[h]=d)}e=[a,c]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof xn?r={buffer:e}:r=e;const i={...this.settings,...r};if(ArrayBuffer.isView(r.value)){if(!r.type)if(this.doublePrecision&&r.value instanceof Float64Array)i.type="float32";else{const a=JX(r.value);i.type=i.normalized?a.replace("int","norm"):a}i.bytesPerElement=r.value.BYTES_PER_ELEMENT,i.stride=Ea(i)}if(n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s;let{buffer:a}=this;const c=Ea(i),u=(i.vertexOffset||0)*c;if(this.doublePrecision&&s instanceof Float64Array&&(s=Db(s,i)),this.settings.isIndexed){const d=this.settings.defaultType;s.constructor!==d&&(s=new d(s))}const h=s.byteLength+u+c*2;(!a||a.byteLength<h)&&(a=this._createBuffer(h)),a.write(s,u)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?Db(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),r*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=Pf.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{byteOffset:a}=this;let{buffer:c}=this;return(!c||c.byteLength<s.byteLength+a)&&(c=this._createBuffer(s.byteLength+a),n&&i&&c.write(i instanceof Float64Array?Db(i,this):i,a)),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&yn.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let a=s;for(;--a>=0;)n[r+a]=i[a];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let a=s;for(;--a>=0;)n[r+a]=Number.isFinite(e[a])?e[a]:i[a]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}_createBuffer(e){var i;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:r}=this.settings;return this._buffer=this.device.createBuffer({...(i=this._buffer)==null?void 0:i.props,id:this.id,usage:(n?xn.INDEX:xn.VERTEX)|xn.COPY_DST,indexType:n?r:void 0,byteLength:e}),this._buffer}}const JE=[],e3=[];function rY(t,e=0,n=1/0){let r=JE;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(e3.length=t.length,r=e3):r=JE,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function RN(t){return t&&t[Symbol.asyncIterator]}function iY(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:a}=e,c=t.BYTES_PER_ELEMENT,u=r?r/c:n,h=i?i/c:0,d=Math.floor((t.length-h)/u);return(g,{index:b,target:S})=>{if(!s){const k=b*u+h;for(let P=0;P<n;P++)S[P]=t[k+P];return S}const R=s[b],A=s[b+1]||d;let C;if(a){C=new Array(A-R);for(let k=R;k<A;k++){const P=k*u+h;S=new Array(n);for(let M=0;M<n;M++)S[M]=t[P+M];C[k-R]=S}}else if(u===n)C=t.subarray(R*n+h,A*n+h);else{C=new t.constructor((A-R)*n);let k=0;for(let P=R;P<A;P++){const M=P*u+h;for(let z=0;z<n;z++)C[k++]=t[M+z]}}return C}}const sY=[],sp=[[0,1/0]];function oY(t,e){if(t===sp||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const a=t[s];a[1]<e[0]?(n.push(a),i=s+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(i,0,e),n}const aY={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function CN(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...aY[n],...e,...t,type:n}}class kN extends nY{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:sp}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!eY(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return CN(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=oY(this.state.updateRanges,[r,i])}else this.state.updateRanges=sp}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=sY}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==sp),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:a,noAlloc:c}}=this;let u=!0;if(a){for(const[h,d]of s)a.call(i,this,{data:n,startRow:h,endRow:d,props:r,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[h,d]of s){const g=Number.isFinite(h)?this.getVertexOffset(h):0,b=Number.isFinite(d)?this.getVertexOffset(d):c||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:g,endOffset:b})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return this.device.type==="webgpu"||e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;Sr(ArrayBuffer.isView(a.value),`invalid ${i.accessor}`);const c=!!a.size&&a.size!==this.size;return r.binaryAccessor=iY(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const r in e)Object.assign(n,super.getValue(r,e[r]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,r=super._getBufferLayout(),{stepMode:i}=this.settings;if(i==="dynamic"?r.stepMode=e?e.isInstanced?"instance":"vertex":"instance":r.stepMode=i??"vertex",!n)return r;for(const s in n){const a=super._getBufferLayout(s,n[s]);r.attributes.push(...a.attributes)}return r}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:a}){if(e.constant&&this.context.device.type!=="webgpu")return;const{settings:c,state:u,value:h,size:d,startIndices:g}=e,{accessor:b,transform:S}=c;let R=u.binaryAccessor||(typeof b=="function"?b:s[b]);typeof R!="function"&&(R=()=>R),Sr(typeof R=="function",`accessor "${b}" is not a function`);let A=e.getVertexOffset(r);const{iterable:C,objectInfo:k}=rY(n,r,i);for(const P of C){k.index++;let M=R(P,k);if(S&&(M=S.call(this,M)),g){const z=(k.index<g.length-1?g[k.index+1]:a)-g[k.index];if(M&&Array.isArray(M[0])){let $=A;for(const F of M)e._normalizeValue(F,h,$),$+=d}else M&&M.length>d?h.set(M,A):(e._normalizeValue(M,k.target,0),bW({target:h,source:k.target,start:A,count:z}));A+=z*d}else e._normalizeValue(M,h,A),A+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Hb(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,a=t.end||n.length,c=e.length,u=a-r;if(c>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!s)return;let h=c;for(;h<u;){const d=s(h,e);for(let g=0;g<i;g++)n[r+h]=d[g]||0,h++}}function lY({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!i||!s)return Hb({source:t,target:e,size:n,getData:r}),e;let a=0,c=0;const u=r&&((d,g)=>r(d+c,g)),h=Math.min(i.length,s.length);for(let d=1;d<h;d++){const g=i[d]*n,b=s[d]*n;Hb({source:t.subarray(a,g),target:e,start:c,end:b,size:n,getData:u}),a=g,c=b}return c<e.length&&Hb({source:[],target:e,start:c,size:n,getData:u}),e}function cY(t){const{device:e,settings:n,value:r}=t,i=new kN(e,n);return i.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),i}function MN(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function NN(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function IN(t){t.push(t.shift())}function uY(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,a=n&&i instanceof Float64Array?2:1;let c=0;const{shaderAttributes:u}=t.settings;if(u)for(const h of Object.values(u))c=Math.max(c,h.vertexOffset??0);return(r.noAlloc?i.length:(e+c)*s)*a}function ON({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function PN({device:t,buffer:e,attribute:n,fromLength:r,toLength:i,fromStartIndices:s,getData:a=c=>c}){const c=n.doublePrecision&&n.value instanceof Float64Array?2:1,u=n.size*c,h=n.byteOffset,d=n.settings.bytesPerElement<4?h/n.settings.bytesPerElement*4:h,g=n.startIndices,b=s&&g,S=n.isConstant;if(!b&&e&&r>=i)return e;const R=n.value instanceof Float64Array?Float32Array:n.value.constructor,A=S?n.value:new R(n.getBuffer().readSyncWebGL(h,i*R.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!S){const M=a;a=(z,$)=>n.normalizeConstant(M(z,$))}const C=S?(M,z)=>a(A,z):(M,z)=>a(A.subarray(M+h,M+h+u),z),k=e?new Float32Array(e.readSyncWebGL(d,r*4).buffer):new Float32Array(0),P=new Float32Array(i);return lY({source:k,target:P,sourceStartIndices:s,targetStartIndices:g,size:u,getData:C}),(!e||e.byteLength<P.byteLength+d)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:P.byteLength+d,usage:35050})),e.write(P,d),e}class DN{constructor({device:e,attribute:n,timeline:r}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Ng(r),this.attribute=n,this.attributeInTransition=cY(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,r=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=uY(this.attribute,n),this.transition.start({...e,duration:r})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class fY extends DN{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="interpolation",this.transform=gY(e,n)}start(e,n){const r=this.currentLength,i=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:a}=this;IN(s),s[0]=PN({device:this.device,buffer:s[0],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),s[1]=ON({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:c}=this,u=c.model;let h=Math.floor(this.currentLength/a.size);FN(a)&&(h/=2),u.setVertexCount(h),a.isConstant?(u.setAttributes({aFrom:s[0]}),u.setConstantAttributes({aTo:a.value})):u.setAttributes({aFrom:s[0],aTo:a.getBuffer()}),c.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:r}=this.transition;let i=r/e;n&&(i=n(i));const{model:s}=this.transform,a={time:i};s.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const hY=`uniform interpolationUniforms {
  float time;
} interpolation;
`,t3={name:"interpolation",vs:hY,uniformTypes:{time:"f32"}},dY=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,pY=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function FN(t){return t.doublePrecision&&t.value instanceof Float64Array}function gY(t,e){const n=e.size,r=MN(n),i=NN(n),s=e.getBufferLayout();return FN(e)?new Ff(t,{vs:pY,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*n}]}],modules:[E7,t3],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new Ff(t,{vs:dY,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:s.attributes[0].format}],modules:[t3],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}class mY extends DN{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="spring",this.texture=wY(e),this.framebuffer=SY(e,this.texture),this.transform=xY(e,n)}start(e,n){const r=this.currentLength,i=this.currentStartIndices;super.start(e,n);const{buffers:s,attribute:a}=this;for(let u=0;u<2;u++)s[u]=PN({device:this.device,buffer:s[u],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});s[2]=ON({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:c}=this.transform;c.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?c.setConstantAttributes({aTo:a.value}):c.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this,s=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:s.stiffness,damping:s.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:r,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),IN(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(r)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const yY=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,bY={name:"spring",vs:yY,uniformTypes:{damping:"f32",stiffness:"f32"}},_Y=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,vY=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function xY(t,e){const n=MN(e.size),r=NN(e.size);return new Ff(t,{vs:_Y,fs:vY,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[bY],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function wY(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function SY(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const TY={interpolation:fY,spring:mY};class EY{constructor(e,{id:n,timeline:r}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],a=s.getTransitionSetting(n);a&&this._updateAttribute(i,s,a)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){i&&this._removeTransition(e);const a=TY[r.type];a?this.transitions[e]=new a({attribute:n,timeline:this.timeline,device:this.device}):(yn.error(`unsupported transition type '${r.type}'`)(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const n3="attributeManager.invalidate",AY="attributeManager.updateStart",RY="attributeManager.updateEnd",CY="attribute.updateStart",kY="attribute.allocate",MY="attribute.updateEnd";class NY{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){this.mergeBoundsMemoized=Jf(LH),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new EY(e,{id:`${n}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Pr(n3,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Pr(n3,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:a={},context:c={}}){let u=!1;Pr(AY,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const h in this.attributes){const d=this.attributes[h],g=d.settings.accessor;d.startIndices=r,d.numInstances=n,s[h]&&yn.removed(`props.${h}`,`data.attributes.${h}`)(),d.setExternalBuffer(a[h])||d.setBinaryValue(typeof g=="string"?a[g]:void 0,e.startIndices)||typeof g=="string"&&!a[g]&&d.setConstantValue(s[g])||d.needsUpdate()&&(u=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:c})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}u&&Pr(RY,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])==null?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const a=n[s];a.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=a)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const r in e){const i=e[r],s={...i,id:r,size:i.isIndexed&&1||i.size||1,...n};this.attributes[r]=new kN(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(a=>{const c=r[a];c&&c.setNeedsUpdate(c.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Pr(CY,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Pr(kY,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Pr(MY,n,r))}}class IY extends Ng{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,a=s(e/i);this._value=Up(n,r,a)}}const r3=1e-5;function i3(t,e,n,r,i){const s=e-t,c=(n-e)*i,u=-s*r;return c+u+s+e}function OY(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let a=0;a<n.length;a++)s[a]=i3(t[a],e[a],n[a],r,i);return s}return i3(t,e,n,r,i)}function s3(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class PY extends Ng{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:a=e}=this;let c=OY(s,a,n,r,i);const u=s3(c,n),h=s3(c,a);u<r3&&h<r3&&(c=n,this.end()),this._prevValue=a,this._currValue=c}}const DY={interpolation:IY,spring:PY};class FY{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const u=s.get(e),{value:h=u.settings.fromValue}=u;n=h,this.remove(e)}if(i=CN(i),!i)return;const a=DY[i.type];if(!a){yn.error(`unsupported transition type '${i.type}'`)();return}const c=new a(this.timeline);c.start({...i,fromValue:n,toValue:r}),s.set(e,c)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function BY(t){const e=t[Fa];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function jY(t,e){const n=BN({newProps:t,oldProps:e,propTypes:t[Fa],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=LY(t,e);let i=!1;return r||(i=zY(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:VY(t,e),transitionsChanged:UY(t,e)}}function UY(t,e){if(!t.transitions)return!1;const n={},r=t[Fa];let i=!1;for(const s in t.transitions){const a=r[s],c=a&&a.type;(c==="number"||c==="color"||c==="array")&&C0(t[s],e[s],a)&&(n[s]=!0,i=!0)}return i?n:!1}function BN({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${i} changed shallowly`;if(typeof e!="object"||e===null)return`${i} changed shallowly`;for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return`${i}.${s} added`;const a=C0(t[s],e[s],r[s]);if(a)return`${i}.${s} ${a}`}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return`${i}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const a=C0(t[s],e[s],r[s]);if(a)return`${i}.${s} ${a}`}}return!1}function C0(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function LY(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function zY(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&o3(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&o3(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function VY(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function o3(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},BN({oldProps:i,newProps:r,triggerName:n})}const $Y="count(): argument not an object",HY="count(): argument not a container";function WY(t){if(!XY(t))throw new Error($Y);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(qY(t))return Object.keys(t).length;throw new Error(HY)}function qY(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function XY(t){return t!==null&&typeof t=="object"}function a3(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const YY={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},k0={};function KY(t,e,n,r){if(n instanceof kn)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const s=e.createTexture({...n,sampler:{...YY,...i,...r},mipmaps:!0});return k0[s.id]=t,s}function QY(t,e){!e||!(e instanceof kn)||k0[e.id]===t&&(e.delete(),delete k0[e.id])}const ZY={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||M0(t)&&(t.length===3||t.length===4)},equal(t,e,n){return zi(t,e,1)}},accessor:{validate(t,e){const n=Xp(t);return n==="function"||n===Xp(e.value)},equal(t,e,n){return typeof e=="function"?!0:zi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||M0(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?zi(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?zi(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:r}=n.props;return r?r(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.device?null:KY(n.id,r.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{QY(n.id,t)}}};function GY(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const a=s==null?void 0:s.deprecatedFor;if(a)r[i]=Array.isArray(a)?a:[a];else{const c=JY(i,s);e[i]=c,n[i]=c.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function JY(t,e){switch(Xp(e)){case"object":return Gu(t,e);case"array":return Gu(t,{type:"array",value:e,compare:!1});case"boolean":return Gu(t,{type:"boolean",value:e});case"number":return Gu(t,{type:"number",value:e});case"function":return Gu(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Gu(t,e){return"type"in e?{name:t,...ZY[e.type],...e}:"value"in e?{name:t,type:Xp(e.value),...e}:{name:t,type:"object",value:e}}function M0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Xp(t){return M0(t)?"array":t===null?"null":typeof t}function eK(t,e){let n;for(let s=e.length-1;s>=0;s--){const a=e[s];"extensions"in a&&(n=a.extensions)}const r=N0(t.constructor,n),i=Object.create(r);i[Wp]=t,i[Xa]={},i[zo]={};for(let s=0;s<e.length;++s){const a=e[s];for(const c in a)i[c]=a[c]}return Object.freeze(i),i}const tK="_mergedDefaultProps";function N0(t,e){if(!(t instanceof Ig.constructor))return{};let n=tK;if(e)for(const i of e){const s=i.constructor;s&&(n+=`:${s.extensionName||s.name}`)}const r=jN(t,n);return r||(t[n]=nK(t,e||[]))}function nK(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=N0(r),s=jN(t,"defaultProps")||{},a=GY(s),c=Object.assign(Object.create(null),i,a.defaultProps),u=Object.assign(Object.create(null),i==null?void 0:i[Fa],a.propTypes),h=Object.assign(Object.create(null),i==null?void 0:i[Ub],a.deprecatedProps);for(const d of e){const g=N0(d.constructor);g&&(Object.assign(c,g),Object.assign(u,g[Fa]),Object.assign(h,g[Ub]))}return rK(c,t),sK(c,u),iK(c,h),c[Fa]=u,c[Ub]=h,e.length===0&&!ax(t,"_propTypes")&&(t._propTypes=u),c}function rK(t,e){const n=aK(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function iK(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i=`${this.id}: ${n}`;for(const s of e[n])ax(this,s)||(this[s]=r);yn.deprecated(i,e[n].join("/"))()}})}function sK(t,e){const n={},r={};for(const i in e){const s=e[i],{name:a,value:c}=s;s.async&&(n[a]=c,r[a]=oK(a))}t[fc]=n,t[Xa]={},Object.defineProperties(t,r)}function oK(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||RN(e)?this[Xa][t]=e:this[zo][t]=e},get(){if(this[zo]){if(t in this[zo])return this[zo][t]||this[fc][t];if(t in this[Xa]){const e=this[Wp]&&this[Wp].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[fc][t]}}return this[fc][t]}}}function ax(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jN(t,e){return ax(t,e)&&t[e]}function aK(t){const e=t.componentName;return e||yn.warn(`${t.name}.componentName not specified`)(),e||t.name}let lK=0;class Ig{constructor(...e){this.props=eK(this,e),this.id=this.props.id,this.count=lK++}clone(e){const{props:n}=this,r={};for(const i in n[fc])i in n[zo]?r[i]=n[zo][i]:i in n[Xa]&&(r[i]=n[Xa][i]);return new this.constructor({...n,...r,...e})}}Ig.componentName="Component";Ig.defaultProps={};const cK=Object.freeze({});class uK{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||cK}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Wp]||this.component;const n=e[zo]||{},r=e[Xa]||e,i=e[fc]||{};for(const s in n){const a=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,a),n[s]=this.getAsyncProp(s)}for(const s in r){const a=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,a)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(RN(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],a=0;for await(const c of n){if(!this.component)return;const{dataTransform:u}=this.component.props;u?s=u(c,s):s=s.concat(c),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Fa];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class fK extends uK{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,`loading ${e} of ${this.layer}`)}}const hK="layer.changeFlag",dK="layer.initialize",pK="layer.update",gK="layer.finalize",mK="layer.matched",l3=2**24-1,yK=Object.freeze([]),bK=Jf(({oldViewport:t,viewport:e})=>t.equals(e));let Oi=new Uint8ClampedArray(0);const _K={data:{type:"data",value:yK,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:a}=n.context;i=i||n.getLoadOptions(),r=r||n.props.loaders,s&&(i={...i,fetch:{...i==null?void 0:i.fetch,signal:s}});let c=a.contains(t);return!c&&!i&&(a.add({resourceId:t,data:W_(t,r),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:u=>{var h;return(h=n.internalState)==null?void 0:h.reloadAsyncProp(e,u)},consumerId:n.id,requestId:e}):W_(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Wt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Og extends Ig{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Zl.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){Sr(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=tN(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,a]=ZM(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,a]}unproject(e){return Sr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Sr(this.internalState);const r=this.internalState.viewport||this.context.viewport;return qH(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Wt.DEFAULT||e===Wt.LNGLAT||e===Wt.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Sr(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:WY(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=a3(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=a3(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(c=>c.getNeedsPickingBuffer.call(this,c));if(s!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:c,instancePickingColors:u}=n.attributes,h=c||u;h&&(a&&h.constant&&(h.constant=!1,n.invalidate(h.id)),!h.value&&!a&&(h.constant=!0,h.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e.renderPass)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i,s,a;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(i=(r=this.props).onError)!=null&&i.call(r,e)||(a=(s=this.context)==null?void 0:s.onError)==null||a.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!bK({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const r in e)e[r].layoutChanged()&&(n=!0);for(const r of this.getModels())this._setModelAttributes(r,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Oi.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>l3&&yn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Oi=Pf.allocate(Oi,n,{size:4,copy:!0,maxCount:Math.max(n,l3)});const i=Math.floor(Oi.length/4),s=[0,0,0];for(let a=r;a<i;a++)this.encodePickingColor(a,s),Oi[a*4+0]=s[0],Oi[a*4+1]=s[1],Oi[a*4+2]=s[2],Oi[a*4+3]=0}e.value=Oi.subarray(0,n*4)}_setModelAttributes(e,n,r=!1){var c;if(!Object.keys(n).length)return;if(r){const u=this.getAttributeManager();e.setBufferLayout(u.getBufferLayouts(e)),n=u.getAttributes()}const i=((c=e.userData)==null?void 0:c.excludeAttributes)||{},s={},a={};for(const u in n){if(i[u])continue;const h=n[u].getValue();for(const d in h){const g=h[d];g instanceof xn?n[u].settings.isIndexed?e.setIndexBuffer(g):s[d]=g:g&&(a[d]=g)}}e.setAttributes(s),e.setConstantAttributes(a)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,a=s&&n.attributes&&n.attributes[s.id];if(a&&a.value){const c=a.value,u=this.encodePickingColor(e);for(let h=0;h<n.length;h++){const d=s.getVertexOffset(h);c[d]===u[0]&&c[d+1]===u[1]&&c[d+2]===u[2]&&this._disablePickingIndex(h)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),a=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(a-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Oi.buffer&&(r.value=Oi.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Sr(!this.internalState),Sr(Number.isFinite(this.props.coordinateSystem)),Pr(dK,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new fK({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(yn.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new FY(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Pr(mK,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Pr(pK,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,a=this._updateUniformTransition();i.propsInTransition=a,r.viewport=i.viewport||s,this.props=a;try{const c=this._getUpdateParams(),u=this.getModels();if(r.device)this.updateState(c);else try{this.updateState(c)}catch{}for(const d of this.props.extensions)d.updateState.call(this,c,d);this.setNeedsRedraw(),this._updateAttributes();const h=this.getModels()[0]!==u[0];this._postUpdate(c,h)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Pr(gK,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:n=null,uniforms:r={},parameters:i={}}){this._updateAttributeTransition();const s=this.props,a=this.context;this.props=this.internalState.propsInTransition||s;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:c}=this.props,u=c&&c(r)||[0,0];a.device instanceof oc&&a.device.setParametersWebGL({polygonOffset:u});for(const h of this.getModels())h.device.type==="webgpu"?h.setParameters({...h.parameters,...i}):h.setParameters(i);if(a.device instanceof oc)a.device.withParametersWebGL(i,()=>{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:i,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)});else{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:i,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)}}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const a=e[i],c=n[i];a&&Array.isArray(c)&&(n.dataChanged=Array.isArray(a)?c.concat(a):a,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Pr(hK,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var i;const r=jY(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)==null?void 0:i[s]);return this.setChangeFlags(r)}validateProps(){BY(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.highlightColor=r(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new NY(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e,s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:c,highlightColor:u}=r;if(n||i.autoHighlight!==a||i.highlightedObjectIndex!==c||i.highlightColor!==u){const h={};Array.isArray(u)&&(h.highlightColor=u),(n||i.autoHighlight!==a||c!==i.highlightedObjectIndex)&&(h.highlightedObjectColor=Number.isFinite(c)&&c>=0?this.encodePickingColor(c):null),this.setShaderModuleProps({picking:h})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Og.defaultProps=_K;Og.layerName="Layer";const vK=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Yp(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const xK={position:"absolute",zIndex:-1};function UN(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>UN(n,e));if(Pg(t)){if(wK(t))return e.style=xK,I.cloneElement(t,e);if(SK(t))return I.cloneElement(t,e)}return t}function Pg(t){return t&&typeof t=="object"&&"type"in t||!1}function wK(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function SK(t){const e=t.type;return e&&e.deckGLViewProps}function I0(t){if(typeof t=="function")return I.createElement(Fc,{},t);if(Array.isArray(t))return t.map(I0);if(Pg(t)){if(t.type===I.Fragment)return I0(t.props.children);if(Yp(t.type,Fc))return t}return t}function TK({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return I.Children.forEach(I0(t),a=>{if(Pg(a)){const c=a.type;if(Yp(c,Og)){const u=EK(c,a.props);i.push(u)}else r.push(a);if(Yp(c,Fc)&&c!==Fc&&a.props.id){const u=new c(a.props);s[u.id]=u}}else a&&r.push(a)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(a=>{s[a.id]=a}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function EK(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}const AK=I.createContext();function RK({children:t,deck:e,ContextProvider:n=AK.Provider}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const a of t){let c=s,u=a;Pg(a)&&Yp(a.type,Fc)&&(c=a.props.id||s,u=a.props.children);const h=r.getViewport(c),d=r.getViewState(c);if(h){d.padding=h.padding;const{x:g,y:b,width:S,height:R}=h;u=UN(u,{x:g,y:b,width:S,height:R,viewport:h,viewState:d}),i[c]||(i[c]={viewport:h,children:[]}),i[c].children.push(u)}}return Object.keys(i).map(a=>{const{viewport:c,children:u}=i[a],{x:h,y:d,width:g,height:b}=c,S={position:"absolute",left:h,top:d,width:g,height:b},R=`view-${a}`,A=I.createElement("div",{key:R,id:R,style:S},...u),C={deck:e,viewport:c,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:P=>{P.viewId=a,e._onViewStateChange(P)},widgets:[]},k=`view-${a}-context`;return I.createElement(n,{key:k,value:C},A)})}const CK={mixBlendMode:null};function kK({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in CK?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function MK(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function LN(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function NK(t,e,n){var i,s,a;const r=new e({...n,_customRender:((a=(s=(i=n.deviceProps)==null?void 0:i.adapters)==null?void 0:s[0])==null?void 0:a.type)==="webgpu"?void 0:c=>{t.redrawReason=c;const u=r.getViewports();t.lastRenderedViewports!==u?t.forceUpdate():LN(t)}});return r}function IK(t,e){const[n,r]=I.useState(0),s=I.useRef({control:null,version:n,forceUpdate:()=>r($=>$+1)}).current,a=I.useRef(null),c=I.useRef(null),u=I.useMemo(()=>TK(t),[t.layers,t.views,t.children]);let h=!0;const d=$=>{var F;return h&&t.viewState?(s.viewStateUpdateRequested=$,null):(s.viewStateUpdateRequested=null,(F=t.onViewStateChange)==null?void 0:F.call(t,$))},g=$=>{var F;h?s.interactionStateUpdateRequested=$:(s.interactionStateUpdateRequested=null,(F=t.onInteractionStateChange)==null||F.call(t,$))},b=I.useMemo(()=>{const $={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:c.current,layers:u.layers,views:u.views,onViewStateChange:d,onInteractionStateChange:g};return delete $._customRender,s.deck&&s.deck.setProps($),$},[t]);I.useEffect(()=>{const $=t.Deck||ox;return s.deck=NK(s,$,{...b,parent:a.current,canvas:c.current}),()=>{var F;return(F=s.deck)==null?void 0:F.finalize()}},[]),vK(()=>{LN(s);const{viewStateUpdateRequested:$,interactionStateUpdateRequested:F}=s;$&&d($),F&&g(F)}),I.useImperativeHandle(e,()=>MK(s),[]);const S=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:R,width:A="100%",height:C="100%",id:k,style:P}=t,{containerStyle:M,canvasStyle:z}=I.useMemo(()=>kK({width:A,height:C,style:P}),[A,C,P]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===S||s.version!==n){s.lastRenderedViewports=S,s.version=n;const $=RK({children:u.children,deck:s.deck,ContextProvider:R}),F=I.createElement("canvas",{key:"canvas",id:k||"deckgl-overlay",ref:c,style:z});s.control=I.createElement("div",{id:`${k||"deckgl"}-wrapper`,ref:a,style:M},[F,$])}return h=!1,s.control}const OK=I.forwardRef(IK),c3=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,PK={name:"scatterplot",vs:c3,fs:c3,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},DK=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,FK=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,BK=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)

struct LayerUniforms {
  opacity: f32,
};

var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    // discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        // discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    // discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,u3=[0,0,0,255],jK={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:u3},getLineColor:{type:"accessor",value:u3},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class lx extends Og{getShaders(){return super.getShaders({vs:DK,fs:FK,source:BK,modules:[Y$,bH,PK]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:a,filled:c,billboard:u,antialiasing:h,lineWidthUnits:d,lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:S}=this.props,R={stroked:a,filled:c,billboard:u,antialiasing:h,radiusUnits:Ic[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Ic[d],lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:S},A=this.state.model;A.shaderInputs.setProps({scatterplot:R}),A.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Df(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pW({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}lx.defaultProps=jK;lx.layerName="ScatterplotLayer";var Et={};const UK=Object.prototype.toString;function Bf(t){const e=UK.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const LK=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:Bf},Symbol.toStringTag,{value:"Module"})),zK=bA(LK);function VK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Bf(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,s=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],c=r+1;c<s;c++)t[c]>a&&(a=t[c]);return a}function $K(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Bf(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,s=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],c=r+1;c<s;c++)t[c]<a&&(a=t[c]);return a}function HK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Bf(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!Bf(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=$K(t),i=VK(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,a=s===void 0?e.autoMinMax?r:0:s,c=e.max,u=c===void 0?e.autoMinMax?i:1:c;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-a)/(i-r),d=0;d<t.length;d++)n[d]=(t[d]-r)*h+a;return n}const WK=Object.freeze(Object.defineProperty({__proto__:null,default:HK},Symbol.toStringTag,{value:"Module"})),qK=bA(WK);var f3;function XK(){var Ci,O0,qn;if(f3)return Et;f3=1,Object.defineProperty(Et,"__esModule",{value:!0});var t=zK,e=qK;const n=" ".repeat(2),r=" ".repeat(4);function i(){return s(this)}function s(D,w={}){const{maxRows:_=15,maxColumns:m=10,maxNumSize:x=8,padMinus:E="auto"}=w;return`${D.constructor.name} {
${n}[
${r}${a(D,_,m,x,E)}
${n}]
${n}rows: ${D.rows}
${n}columns: ${D.columns}
}`}function a(D,w,_,m,x){const{rows:E,columns:j}=D,V=Math.min(E,w),H=Math.min(j,_),q=[];if(x==="auto"){x=!1;e:for(let fe=0;fe<V;fe++)for(let J=0;J<H;J++)if(D.get(fe,J)<0){x=!0;break e}}for(let fe=0;fe<V;fe++){let J=[];for(let Re=0;Re<H;Re++)J.push(c(D.get(fe,Re),m,x));q.push(`${J.join(" ")}`)}return H!==j&&(q[q.length-1]+=` ... ${j-_} more columns`),V!==E&&q.push(`... ${E-w} more rows`),q.join(`
${r}`)}function c(D,w,_){return(D>=0&&_?` ${u(D,w-1)}`:u(D,w)).padEnd(w)}function u(D,w){let _=D.toString();if(_.length<=w)return _;let m=D.toFixed(w);if(m.length>w&&(m=D.toFixed(Math.max(0,w-(m.length-w)))),m.length<=w&&!m.startsWith("0.000")&&!m.startsWith("-0.000"))return m;let x=D.toExponential(w);return x.length>w&&(x=D.toExponential(Math.max(0,w-(x.length-w)))),x.slice(0)}function h(D,w){D.prototype.add=function(m){return typeof m=="number"?this.addS(m):this.addM(m)},D.prototype.addS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)+m);return this},D.prototype.addM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)+m.get(x,E));return this},D.add=function(m,x){return new w(m).add(x)},D.prototype.sub=function(m){return typeof m=="number"?this.subS(m):this.subM(m)},D.prototype.subS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)-m);return this},D.prototype.subM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)-m.get(x,E));return this},D.sub=function(m,x){return new w(m).sub(x)},D.prototype.subtract=D.prototype.sub,D.prototype.subtractS=D.prototype.subS,D.prototype.subtractM=D.prototype.subM,D.subtract=D.sub,D.prototype.mul=function(m){return typeof m=="number"?this.mulS(m):this.mulM(m)},D.prototype.mulS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)*m);return this},D.prototype.mulM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)*m.get(x,E));return this},D.mul=function(m,x){return new w(m).mul(x)},D.prototype.multiply=D.prototype.mul,D.prototype.multiplyS=D.prototype.mulS,D.prototype.multiplyM=D.prototype.mulM,D.multiply=D.mul,D.prototype.div=function(m){return typeof m=="number"?this.divS(m):this.divM(m)},D.prototype.divS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)/m);return this},D.prototype.divM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)/m.get(x,E));return this},D.div=function(m,x){return new w(m).div(x)},D.prototype.divide=D.prototype.div,D.prototype.divideS=D.prototype.divS,D.prototype.divideM=D.prototype.divM,D.divide=D.div,D.prototype.mod=function(m){return typeof m=="number"?this.modS(m):this.modM(m)},D.prototype.modS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)%m);return this},D.prototype.modM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)%m.get(x,E));return this},D.mod=function(m,x){return new w(m).mod(x)},D.prototype.modulus=D.prototype.mod,D.prototype.modulusS=D.prototype.modS,D.prototype.modulusM=D.prototype.modM,D.modulus=D.mod,D.prototype.and=function(m){return typeof m=="number"?this.andS(m):this.andM(m)},D.prototype.andS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)&m);return this},D.prototype.andM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)&m.get(x,E));return this},D.and=function(m,x){return new w(m).and(x)},D.prototype.or=function(m){return typeof m=="number"?this.orS(m):this.orM(m)},D.prototype.orS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)|m);return this},D.prototype.orM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)|m.get(x,E));return this},D.or=function(m,x){return new w(m).or(x)},D.prototype.xor=function(m){return typeof m=="number"?this.xorS(m):this.xorM(m)},D.prototype.xorS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)^m);return this},D.prototype.xorM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)^m.get(x,E));return this},D.xor=function(m,x){return new w(m).xor(x)},D.prototype.leftShift=function(m){return typeof m=="number"?this.leftShiftS(m):this.leftShiftM(m)},D.prototype.leftShiftS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)<<m);return this},D.prototype.leftShiftM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)<<m.get(x,E));return this},D.leftShift=function(m,x){return new w(m).leftShift(x)},D.prototype.signPropagatingRightShift=function(m){return typeof m=="number"?this.signPropagatingRightShiftS(m):this.signPropagatingRightShiftM(m)},D.prototype.signPropagatingRightShiftS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)>>m);return this},D.prototype.signPropagatingRightShiftM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)>>m.get(x,E));return this},D.signPropagatingRightShift=function(m,x){return new w(m).signPropagatingRightShift(x)},D.prototype.rightShift=function(m){return typeof m=="number"?this.rightShiftS(m):this.rightShiftM(m)},D.prototype.rightShiftS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)>>>m);return this},D.prototype.rightShiftM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)>>>m.get(x,E));return this},D.rightShift=function(m,x){return new w(m).rightShift(x)},D.prototype.zeroFillRightShift=D.prototype.rightShift,D.prototype.zeroFillRightShiftS=D.prototype.rightShiftS,D.prototype.zeroFillRightShiftM=D.prototype.rightShiftM,D.zeroFillRightShift=D.rightShift,D.prototype.not=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,~this.get(m,x));return this},D.not=function(m){return new w(m).not()},D.prototype.abs=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.abs(this.get(m,x)));return this},D.abs=function(m){return new w(m).abs()},D.prototype.acos=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.acos(this.get(m,x)));return this},D.acos=function(m){return new w(m).acos()},D.prototype.acosh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.acosh(this.get(m,x)));return this},D.acosh=function(m){return new w(m).acosh()},D.prototype.asin=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.asin(this.get(m,x)));return this},D.asin=function(m){return new w(m).asin()},D.prototype.asinh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.asinh(this.get(m,x)));return this},D.asinh=function(m){return new w(m).asinh()},D.prototype.atan=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.atan(this.get(m,x)));return this},D.atan=function(m){return new w(m).atan()},D.prototype.atanh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.atanh(this.get(m,x)));return this},D.atanh=function(m){return new w(m).atanh()},D.prototype.cbrt=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.cbrt(this.get(m,x)));return this},D.cbrt=function(m){return new w(m).cbrt()},D.prototype.ceil=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.ceil(this.get(m,x)));return this},D.ceil=function(m){return new w(m).ceil()},D.prototype.clz32=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.clz32(this.get(m,x)));return this},D.clz32=function(m){return new w(m).clz32()},D.prototype.cos=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.cos(this.get(m,x)));return this},D.cos=function(m){return new w(m).cos()},D.prototype.cosh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.cosh(this.get(m,x)));return this},D.cosh=function(m){return new w(m).cosh()},D.prototype.exp=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.exp(this.get(m,x)));return this},D.exp=function(m){return new w(m).exp()},D.prototype.expm1=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.expm1(this.get(m,x)));return this},D.expm1=function(m){return new w(m).expm1()},D.prototype.floor=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.floor(this.get(m,x)));return this},D.floor=function(m){return new w(m).floor()},D.prototype.fround=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.fround(this.get(m,x)));return this},D.fround=function(m){return new w(m).fround()},D.prototype.log=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.log(this.get(m,x)));return this},D.log=function(m){return new w(m).log()},D.prototype.log1p=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.log1p(this.get(m,x)));return this},D.log1p=function(m){return new w(m).log1p()},D.prototype.log10=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.log10(this.get(m,x)));return this},D.log10=function(m){return new w(m).log10()},D.prototype.log2=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.log2(this.get(m,x)));return this},D.log2=function(m){return new w(m).log2()},D.prototype.round=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.round(this.get(m,x)));return this},D.round=function(m){return new w(m).round()},D.prototype.sign=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.sign(this.get(m,x)));return this},D.sign=function(m){return new w(m).sign()},D.prototype.sin=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.sin(this.get(m,x)));return this},D.sin=function(m){return new w(m).sin()},D.prototype.sinh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.sinh(this.get(m,x)));return this},D.sinh=function(m){return new w(m).sinh()},D.prototype.sqrt=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.sqrt(this.get(m,x)));return this},D.sqrt=function(m){return new w(m).sqrt()},D.prototype.tan=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.tan(this.get(m,x)));return this},D.tan=function(m){return new w(m).tan()},D.prototype.tanh=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.tanh(this.get(m,x)));return this},D.tanh=function(m){return new w(m).tanh()},D.prototype.trunc=function(){for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.set(m,x,Math.trunc(this.get(m,x)));return this},D.trunc=function(m){return new w(m).trunc()},D.pow=function(m,x){return new w(m).pow(x)},D.prototype.pow=function(m){return typeof m=="number"?this.powS(m):this.powM(m)},D.prototype.powS=function(m){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)**m);return this},D.prototype.powM=function(m){if(m=w.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)**m.get(x,E));return this}}function d(D,w,_){let m=_?D.rows:D.rows-1;if(w<0||w>m)throw new RangeError("Row index out of range")}function g(D,w,_){let m=_?D.columns:D.columns-1;if(w<0||w>m)throw new RangeError("Column index out of range")}function b(D,w){if(w.to1DArray&&(w=w.to1DArray()),w.length!==D.columns)throw new RangeError("vector size must be the same as the number of columns");return w}function S(D,w){if(w.to1DArray&&(w=w.to1DArray()),w.length!==D.rows)throw new RangeError("vector size must be the same as the number of rows");return w}function R(D,w){if(!t.isAnyArray(w))throw new TypeError("row indices must be an array");for(let _=0;_<w.length;_++)if(w[_]<0||w[_]>=D.rows)throw new RangeError("row indices are out of range")}function A(D,w){if(!t.isAnyArray(w))throw new TypeError("column indices must be an array");for(let _=0;_<w.length;_++)if(w[_]<0||w[_]>=D.columns)throw new RangeError("column indices are out of range")}function C(D,w,_,m,x){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(P("startRow",w),P("endRow",_),P("startColumn",m),P("endColumn",x),w>_||m>x||w<0||w>=D.rows||_<0||_>=D.rows||m<0||m>=D.columns||x<0||x>=D.columns)throw new RangeError("Submatrix indices are out of range")}function k(D,w=0){let _=[];for(let m=0;m<D;m++)_.push(w);return _}function P(D,w){if(typeof w!="number")throw new TypeError(`${D} must be a number`)}function M(D){if(D.isEmpty())throw new Error("Empty matrix has no elements to index")}function z(D){let w=k(D.rows);for(let _=0;_<D.rows;++_)for(let m=0;m<D.columns;++m)w[_]+=D.get(_,m);return w}function $(D){let w=k(D.columns);for(let _=0;_<D.rows;++_)for(let m=0;m<D.columns;++m)w[m]+=D.get(_,m);return w}function F(D){let w=0;for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)w+=D.get(_,m);return w}function Z(D){let w=k(D.rows,1);for(let _=0;_<D.rows;++_)for(let m=0;m<D.columns;++m)w[_]*=D.get(_,m);return w}function Q(D){let w=k(D.columns,1);for(let _=0;_<D.rows;++_)for(let m=0;m<D.columns;++m)w[m]*=D.get(_,m);return w}function ue(D){let w=1;for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)w*=D.get(_,m);return w}function Y(D,w,_){const m=D.rows,x=D.columns,E=[];for(let j=0;j<m;j++){let V=0,H=0,q=0;for(let fe=0;fe<x;fe++)q=D.get(j,fe)-_[j],V+=q,H+=q*q;w?E.push((H-V*V/x)/(x-1)):E.push((H-V*V/x)/x)}return E}function K(D,w,_){const m=D.rows,x=D.columns,E=[];for(let j=0;j<x;j++){let V=0,H=0,q=0;for(let fe=0;fe<m;fe++)q=D.get(fe,j)-_[j],V+=q,H+=q*q;w?E.push((H-V*V/m)/(m-1)):E.push((H-V*V/m)/m)}return E}function ie(D,w,_){const m=D.rows,x=D.columns,E=m*x;let j=0,V=0,H=0;for(let q=0;q<m;q++)for(let fe=0;fe<x;fe++)H=D.get(q,fe)-_,j+=H,V+=H*H;return w?(V-j*j/E)/(E-1):(V-j*j/E)/E}function _e(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)-w[_])}function re(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)-w[m])}function Te(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)-w)}function ne(D){const w=[];for(let _=0;_<D.rows;_++){let m=0;for(let x=0;x<D.columns;x++)m+=D.get(_,x)**2/(D.columns-1);w.push(Math.sqrt(m))}return w}function Se(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)/w[_])}function pe(D){const w=[];for(let _=0;_<D.columns;_++){let m=0;for(let x=0;x<D.rows;x++)m+=D.get(x,_)**2/(D.rows-1);w.push(Math.sqrt(m))}return w}function Xe(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)/w[m])}function O(D){const w=D.size-1;let _=0;for(let m=0;m<D.columns;m++)for(let x=0;x<D.rows;x++)_+=D.get(x,m)**2/w;return Math.sqrt(_)}function Ee(D,w){for(let _=0;_<D.rows;_++)for(let m=0;m<D.columns;m++)D.set(_,m,D.get(_,m)/w)}class Ae{static from1DArray(w,_,m){if(w*_!==m.length)throw new RangeError("data length does not match given dimensions");let E=new ge(w,_);for(let j=0;j<w;j++)for(let V=0;V<_;V++)E.set(j,V,m[j*_+V]);return E}static rowVector(w){let _=new ge(1,w.length);for(let m=0;m<w.length;m++)_.set(0,m,w[m]);return _}static columnVector(w){let _=new ge(w.length,1);for(let m=0;m<w.length;m++)_.set(m,0,w[m]);return _}static zeros(w,_){return new ge(w,_)}static ones(w,_){return new ge(w,_).fill(1)}static rand(w,_,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{random:x=Math.random}=m;let E=new ge(w,_);for(let j=0;j<w;j++)for(let V=0;V<_;V++)E.set(j,V,x());return E}static randInt(w,_,m={}){if(typeof m!="object")throw new TypeError("options must be an object");const{min:x=0,max:E=1e3,random:j=Math.random}=m;if(!Number.isInteger(x))throw new TypeError("min must be an integer");if(!Number.isInteger(E))throw new TypeError("max must be an integer");if(x>=E)throw new RangeError("min must be smaller than max");let V=E-x,H=new ge(w,_);for(let q=0;q<w;q++)for(let fe=0;fe<_;fe++){let J=x+Math.round(j()*V);H.set(q,fe,J)}return H}static eye(w,_,m){_===void 0&&(_=w),m===void 0&&(m=1);let x=Math.min(w,_),E=this.zeros(w,_);for(let j=0;j<x;j++)E.set(j,j,m);return E}static diag(w,_,m){let x=w.length;_===void 0&&(_=x),m===void 0&&(m=_);let E=Math.min(x,_,m),j=this.zeros(_,m);for(let V=0;V<E;V++)j.set(V,V,w[V]);return j}static min(w,_){w=this.checkMatrix(w),_=this.checkMatrix(_);let m=w.rows,x=w.columns,E=new ge(m,x);for(let j=0;j<m;j++)for(let V=0;V<x;V++)E.set(j,V,Math.min(w.get(j,V),_.get(j,V)));return E}static max(w,_){w=this.checkMatrix(w),_=this.checkMatrix(_);let m=w.rows,x=w.columns,E=new this(m,x);for(let j=0;j<m;j++)for(let V=0;V<x;V++)E.set(j,V,Math.max(w.get(j,V),_.get(j,V)));return E}static checkMatrix(w){return Ae.isMatrix(w)?w:new ge(w)}static isMatrix(w){return w!=null&&w.klass==="Matrix"}get size(){return this.rows*this.columns}apply(w){if(typeof w!="function")throw new TypeError("callback must be a function");for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)w.call(this,_,m);return this}to1DArray(){let w=[];for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)w.push(this.get(_,m));return w}to2DArray(){let w=[];for(let _=0;_<this.rows;_++){w.push([]);for(let m=0;m<this.columns;m++)w[_].push(this.get(_,m))}return w}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let w=0;w<this.rows;w++)for(let _=0;_<=w;_++)if(this.get(w,_)!==this.get(_,w))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let w=0;w<this.rows;w++)if(this.get(w,w)!==0)return!1;return!0}isEchelonForm(){let w=0,_=0,m=-1,x=!0,E=!1;for(;w<this.rows&&x;){for(_=0,E=!1;_<this.columns&&E===!1;)this.get(w,_)===0?_++:this.get(w,_)===1&&_>m?(E=!0,m=_):(x=!1,E=!0);w++}return x}isReducedEchelonForm(){let w=0,_=0,m=-1,x=!0,E=!1;for(;w<this.rows&&x;){for(_=0,E=!1;_<this.columns&&E===!1;)this.get(w,_)===0?_++:this.get(w,_)===1&&_>m?(E=!0,m=_):(x=!1,E=!0);for(let j=_+1;j<this.rows;j++)this.get(w,j)!==0&&(x=!1);w++}return x}echelonForm(){let w=this.clone(),_=0,m=0;for(;_<w.rows&&m<w.columns;){let x=_;for(let E=_;E<w.rows;E++)w.get(E,m)>w.get(x,m)&&(x=E);if(w.get(x,m)===0)m++;else{w.swapRows(_,x);let E=w.get(_,m);for(let j=m;j<w.columns;j++)w.set(_,j,w.get(_,j)/E);for(let j=_+1;j<w.rows;j++){let V=w.get(j,m)/w.get(_,m);w.set(j,m,0);for(let H=m+1;H<w.columns;H++)w.set(j,H,w.get(j,H)-w.get(_,H)*V)}_++,m++}}return w}reducedEchelonForm(){let w=this.echelonForm(),_=w.columns,m=w.rows,x=m-1;for(;x>=0;)if(w.maxRow(x)===0)x--;else{let E=0,j=!1;for(;E<m&&j===!1;)w.get(x,E)===1?j=!0:E++;for(let V=0;V<x;V++){let H=w.get(V,E);for(let q=E;q<_;q++){let fe=w.get(V,q)-H*w.get(x,q);w.set(V,q,fe)}}x--}return w}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(w={}){if(typeof w!="object")throw new TypeError("options must be an object");const{rows:_=1,columns:m=1}=w;if(!Number.isInteger(_)||_<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(m)||m<=0)throw new TypeError("columns must be a positive integer");let x=new ge(this.rows*_,this.columns*m);for(let E=0;E<_;E++)for(let j=0;j<m;j++)x.setSubMatrix(this,this.rows*E,this.columns*j);return x}fill(w){for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,w);return this}neg(){return this.mulS(-1)}getRow(w){d(this,w);let _=[];for(let m=0;m<this.columns;m++)_.push(this.get(w,m));return _}getRowVector(w){return ge.rowVector(this.getRow(w))}setRow(w,_){d(this,w),_=b(this,_);for(let m=0;m<this.columns;m++)this.set(w,m,_[m]);return this}swapRows(w,_){d(this,w),d(this,_);for(let m=0;m<this.columns;m++){let x=this.get(w,m);this.set(w,m,this.get(_,m)),this.set(_,m,x)}return this}getColumn(w){g(this,w);let _=[];for(let m=0;m<this.rows;m++)_.push(this.get(m,w));return _}getColumnVector(w){return ge.columnVector(this.getColumn(w))}setColumn(w,_){g(this,w),_=S(this,_);for(let m=0;m<this.rows;m++)this.set(m,w,_[m]);return this}swapColumns(w,_){g(this,w),g(this,_);for(let m=0;m<this.rows;m++){let x=this.get(m,w);this.set(m,w,this.get(m,_)),this.set(m,_,x)}return this}addRowVector(w){w=b(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)+w[m]);return this}subRowVector(w){w=b(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)-w[m]);return this}mulRowVector(w){w=b(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)*w[m]);return this}divRowVector(w){w=b(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)/w[m]);return this}addColumnVector(w){w=S(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)+w[_]);return this}subColumnVector(w){w=S(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)-w[_]);return this}mulColumnVector(w){w=S(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)*w[_]);return this}divColumnVector(w){w=S(this,w);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)this.set(_,m,this.get(_,m)/w[_]);return this}mulRow(w,_){d(this,w);for(let m=0;m<this.columns;m++)this.set(w,m,this.get(w,m)*_);return this}mulColumn(w,_){g(this,w);for(let m=0;m<this.rows;m++)this.set(m,w,this.get(m,w)*_);return this}max(w){if(this.isEmpty())return NaN;switch(w){case"row":{const _=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)>_[m]&&(_[m]=this.get(m,x));return _}case"column":{const _=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)>_[x]&&(_[x]=this.get(m,x));return _}case void 0:{let _=this.get(0,0);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)>_&&(_=this.get(m,x));return _}default:throw new Error(`invalid option: ${w}`)}}maxIndex(){M(this);let w=this.get(0,0),_=[0,0];for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)>w&&(w=this.get(m,x),_[0]=m,_[1]=x);return _}min(w){if(this.isEmpty())return NaN;switch(w){case"row":{const _=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)<_[m]&&(_[m]=this.get(m,x));return _}case"column":{const _=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)<_[x]&&(_[x]=this.get(m,x));return _}case void 0:{let _=this.get(0,0);for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)<_&&(_=this.get(m,x));return _}default:throw new Error(`invalid option: ${w}`)}}minIndex(){M(this);let w=this.get(0,0),_=[0,0];for(let m=0;m<this.rows;m++)for(let x=0;x<this.columns;x++)this.get(m,x)<w&&(w=this.get(m,x),_[0]=m,_[1]=x);return _}maxRow(w){if(d(this,w),this.isEmpty())return NaN;let _=this.get(w,0);for(let m=1;m<this.columns;m++)this.get(w,m)>_&&(_=this.get(w,m));return _}maxRowIndex(w){d(this,w),M(this);let _=this.get(w,0),m=[w,0];for(let x=1;x<this.columns;x++)this.get(w,x)>_&&(_=this.get(w,x),m[1]=x);return m}minRow(w){if(d(this,w),this.isEmpty())return NaN;let _=this.get(w,0);for(let m=1;m<this.columns;m++)this.get(w,m)<_&&(_=this.get(w,m));return _}minRowIndex(w){d(this,w),M(this);let _=this.get(w,0),m=[w,0];for(let x=1;x<this.columns;x++)this.get(w,x)<_&&(_=this.get(w,x),m[1]=x);return m}maxColumn(w){if(g(this,w),this.isEmpty())return NaN;let _=this.get(0,w);for(let m=1;m<this.rows;m++)this.get(m,w)>_&&(_=this.get(m,w));return _}maxColumnIndex(w){g(this,w),M(this);let _=this.get(0,w),m=[0,w];for(let x=1;x<this.rows;x++)this.get(x,w)>_&&(_=this.get(x,w),m[0]=x);return m}minColumn(w){if(g(this,w),this.isEmpty())return NaN;let _=this.get(0,w);for(let m=1;m<this.rows;m++)this.get(m,w)<_&&(_=this.get(m,w));return _}minColumnIndex(w){g(this,w),M(this);let _=this.get(0,w),m=[0,w];for(let x=1;x<this.rows;x++)this.get(x,w)<_&&(_=this.get(x,w),m[0]=x);return m}diag(){let w=Math.min(this.rows,this.columns),_=[];for(let m=0;m<w;m++)_.push(this.get(m,m));return _}norm(w="frobenius"){switch(w){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${w}`)}}cumulativeSum(){let w=0;for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)w+=this.get(_,m),this.set(_,m,w);return this}dot(w){Ae.isMatrix(w)&&(w=w.to1DArray());let _=this.to1DArray();if(_.length!==w.length)throw new RangeError("vectors do not have the same size");let m=0;for(let x=0;x<_.length;x++)m+=_[x]*w[x];return m}mmul(w){w=ge.checkMatrix(w);let _=this.rows,m=this.columns,x=w.columns,E=new ge(_,x),j=new Float64Array(m);for(let V=0;V<x;V++){for(let H=0;H<m;H++)j[H]=w.get(H,V);for(let H=0;H<_;H++){let q=0;for(let fe=0;fe<m;fe++)q+=this.get(H,fe)*j[fe];E.set(H,V,q)}}return E}mpow(w){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(w)||w<0)throw new RangeError("Exponent must be a non-negative integer");let _=ge.eye(this.rows),m=this;for(let x=w;x>=1;x/=2)(x&1)!==0&&(_=_.mmul(m)),m=m.mmul(m);return _}strassen2x2(w){w=ge.checkMatrix(w);let _=new ge(2,2);const m=this.get(0,0),x=w.get(0,0),E=this.get(0,1),j=w.get(0,1),V=this.get(1,0),H=w.get(1,0),q=this.get(1,1),fe=w.get(1,1),J=(m+q)*(x+fe),Re=(V+q)*x,ze=m*(j-fe),xe=q*(H-x),Ne=(m+E)*fe,qe=(V-m)*(x+j),ee=(E-q)*(H+fe),Ve=J+xe-Ne+ee,Ke=ze+Ne,st=Re+xe,ut=J-Re+ze+qe;return _.set(0,0,Ve),_.set(0,1,Ke),_.set(1,0,st),_.set(1,1,ut),_}strassen3x3(w){w=ge.checkMatrix(w);let _=new ge(3,3);const m=this.get(0,0),x=this.get(0,1),E=this.get(0,2),j=this.get(1,0),V=this.get(1,1),H=this.get(1,2),q=this.get(2,0),fe=this.get(2,1),J=this.get(2,2),Re=w.get(0,0),ze=w.get(0,1),xe=w.get(0,2),Ne=w.get(1,0),qe=w.get(1,1),ee=w.get(1,2),Ve=w.get(2,0),Ke=w.get(2,1),st=w.get(2,2),ut=(m+x+E-j-V-fe-J)*qe,pn=(m-j)*(-ze+qe),nt=V*(-Re+ze+Ne-qe-ee-Ve+st),ot=(-m+j+V)*(Re-ze+qe),Qt=(j+V)*(-Re+ze),oe=m*Re,Be=(-m+q+fe)*(Re-xe+ee),We=(-m+q)*(xe-ee),Ue=(q+fe)*(-Re+xe),cn=(m+x+E-V-H-q-fe)*ee,It=fe*(-Re+xe+Ne-qe-ee-Ve+Ke),Zt=(-E+fe+J)*(qe+Ve-Ke),en=(E-J)*(qe-Ke),Xn=E*Ve,Br=(fe+J)*(-Ve+Ke),jt=(-E+V+H)*(ee+Ve-st),Yr=(E-H)*(ee-st),ki=(V+H)*(-Ve+st),xt=x*Ne,jn=H*Ke,tr=j*xe,Cr=q*ze,Ut=J*st,Gc=oe+Xn+xt,ih=ut+ot+Qt+oe+Zt+Xn+Br,Jc=oe+Be+Ue+cn+Xn+jt+ki,qs=pn+nt+ot+oe+Xn+jt+Yr,sh=pn+ot+Qt+oe+jn,oh=Xn+jt+Yr+ki+tr,Xs=oe+Be+We+It+Zt+en+Xn,Lg=Zt+en+Xn+Br+Cr,ah=oe+Be+We+Ue+Ut;return _.set(0,0,Gc),_.set(0,1,ih),_.set(0,2,Jc),_.set(1,0,qs),_.set(1,1,sh),_.set(1,2,oh),_.set(2,0,Xs),_.set(2,1,Lg),_.set(2,2,ah),_}mmulStrassen(w){w=ge.checkMatrix(w);let _=this.clone(),m=_.rows,x=_.columns,E=w.rows,j=w.columns;x!==E&&console.warn(`Multiplying ${m} x ${x} and ${E} x ${j} matrix: dimensions do not match.`);function V(J,Re,ze){let xe=J.rows,Ne=J.columns;if(xe===Re&&Ne===ze)return J;{let qe=Ae.zeros(Re,ze);return qe=qe.setSubMatrix(J,0,0),qe}}let H=Math.max(m,E),q=Math.max(x,j);_=V(_,H,q),w=V(w,H,q);function fe(J,Re,ze,xe){if(ze<=512||xe<=512)return J.mmul(Re);ze%2===1&&xe%2===1?(J=V(J,ze+1,xe+1),Re=V(Re,ze+1,xe+1)):ze%2===1?(J=V(J,ze+1,xe),Re=V(Re,ze+1,xe)):xe%2===1&&(J=V(J,ze,xe+1),Re=V(Re,ze,xe+1));let Ne=parseInt(J.rows/2,10),qe=parseInt(J.columns/2,10),ee=J.subMatrix(0,Ne-1,0,qe-1),Ve=Re.subMatrix(0,Ne-1,0,qe-1),Ke=J.subMatrix(0,Ne-1,qe,J.columns-1),st=Re.subMatrix(0,Ne-1,qe,Re.columns-1),ut=J.subMatrix(Ne,J.rows-1,0,qe-1),pn=Re.subMatrix(Ne,Re.rows-1,0,qe-1),nt=J.subMatrix(Ne,J.rows-1,qe,J.columns-1),ot=Re.subMatrix(Ne,Re.rows-1,qe,Re.columns-1),Qt=fe(Ae.add(ee,nt),Ae.add(Ve,ot),Ne,qe),oe=fe(Ae.add(ut,nt),Ve,Ne,qe),Be=fe(ee,Ae.sub(st,ot),Ne,qe),We=fe(nt,Ae.sub(pn,Ve),Ne,qe),Ue=fe(Ae.add(ee,Ke),ot,Ne,qe),cn=fe(Ae.sub(ut,ee),Ae.add(Ve,st),Ne,qe),It=fe(Ae.sub(Ke,nt),Ae.add(pn,ot),Ne,qe),Zt=Ae.add(Qt,We);Zt.sub(Ue),Zt.add(It);let en=Ae.add(Be,Ue),Xn=Ae.add(oe,We),Br=Ae.sub(Qt,oe);Br.add(Be),Br.add(cn);let jt=Ae.zeros(2*Zt.rows,2*Zt.columns);return jt=jt.setSubMatrix(Zt,0,0),jt=jt.setSubMatrix(en,Zt.rows,0),jt=jt.setSubMatrix(Xn,0,Zt.columns),jt=jt.setSubMatrix(Br,Zt.rows,Zt.columns),jt.subMatrix(0,ze-1,0,xe-1)}return fe(_,w,H,q)}scaleRows(w={}){if(typeof w!="object")throw new TypeError("options must be an object");const{min:_=0,max:m=1}=w;if(!Number.isFinite(_))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(_>=m)throw new RangeError("min must be smaller than max");let x=new ge(this.rows,this.columns);for(let E=0;E<this.rows;E++){const j=this.getRow(E);j.length>0&&e(j,{min:_,max:m,output:j}),x.setRow(E,j)}return x}scaleColumns(w={}){if(typeof w!="object")throw new TypeError("options must be an object");const{min:_=0,max:m=1}=w;if(!Number.isFinite(_))throw new TypeError("min must be a number");if(!Number.isFinite(m))throw new TypeError("max must be a number");if(_>=m)throw new RangeError("min must be smaller than max");let x=new ge(this.rows,this.columns);for(let E=0;E<this.columns;E++){const j=this.getColumn(E);j.length&&e(j,{min:_,max:m,output:j}),x.setColumn(E,j)}return x}flipRows(){const w=Math.ceil(this.columns/2);for(let _=0;_<this.rows;_++)for(let m=0;m<w;m++){let x=this.get(_,m),E=this.get(_,this.columns-1-m);this.set(_,m,E),this.set(_,this.columns-1-m,x)}return this}flipColumns(){const w=Math.ceil(this.rows/2);for(let _=0;_<this.columns;_++)for(let m=0;m<w;m++){let x=this.get(m,_),E=this.get(this.rows-1-m,_);this.set(m,_,E),this.set(this.rows-1-m,_,x)}return this}kroneckerProduct(w){w=ge.checkMatrix(w);let _=this.rows,m=this.columns,x=w.rows,E=w.columns,j=new ge(_*x,m*E);for(let V=0;V<_;V++)for(let H=0;H<m;H++)for(let q=0;q<x;q++)for(let fe=0;fe<E;fe++)j.set(x*V+q,E*H+fe,this.get(V,H)*w.get(q,fe));return j}kroneckerSum(w){if(w=ge.checkMatrix(w),!this.isSquare()||!w.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let _=this.rows,m=w.rows,x=this.kroneckerProduct(ge.eye(m,m)),E=ge.eye(_,_).kroneckerProduct(w);return x.add(E)}transpose(){let w=new ge(this.columns,this.rows);for(let _=0;_<this.rows;_++)for(let m=0;m<this.columns;m++)w.set(m,_,this.get(_,m));return w}sortRows(w=B){for(let _=0;_<this.rows;_++)this.setRow(_,this.getRow(_).sort(w));return this}sortColumns(w=B){for(let _=0;_<this.columns;_++)this.setColumn(_,this.getColumn(_).sort(w));return this}subMatrix(w,_,m,x){C(this,w,_,m,x);let E=new ge(_-w+1,x-m+1);for(let j=w;j<=_;j++)for(let V=m;V<=x;V++)E.set(j-w,V-m,this.get(j,V));return E}subMatrixRow(w,_,m){if(_===void 0&&(_=0),m===void 0&&(m=this.columns-1),_>m||_<0||_>=this.columns||m<0||m>=this.columns)throw new RangeError("Argument out of range");let x=new ge(w.length,m-_+1);for(let E=0;E<w.length;E++)for(let j=_;j<=m;j++){if(w[E]<0||w[E]>=this.rows)throw new RangeError(`Row index out of range: ${w[E]}`);x.set(E,j-_,this.get(w[E],j))}return x}subMatrixColumn(w,_,m){if(_===void 0&&(_=0),m===void 0&&(m=this.rows-1),_>m||_<0||_>=this.rows||m<0||m>=this.rows)throw new RangeError("Argument out of range");let x=new ge(m-_+1,w.length);for(let E=0;E<w.length;E++)for(let j=_;j<=m;j++){if(w[E]<0||w[E]>=this.columns)throw new RangeError(`Column index out of range: ${w[E]}`);x.set(j-_,E,this.get(j,w[E]))}return x}setSubMatrix(w,_,m){if(w=ge.checkMatrix(w),w.isEmpty())return this;let x=_+w.rows-1,E=m+w.columns-1;C(this,_,x,m,E);for(let j=0;j<w.rows;j++)for(let V=0;V<w.columns;V++)this.set(_+j,m+V,w.get(j,V));return this}selection(w,_){R(this,w),A(this,_);let m=new ge(w.length,_.length);for(let x=0;x<w.length;x++){let E=w[x];for(let j=0;j<_.length;j++){let V=_[j];m.set(x,j,this.get(E,V))}}return m}trace(){let w=Math.min(this.rows,this.columns),_=0;for(let m=0;m<w;m++)_+=this.get(m,m);return _}clone(){return this.constructor.copy(this,new ge(this.rows,this.columns))}static copy(w,_){for(const[m,x,E]of w.entries())_.set(m,x,E);return _}sum(w){switch(w){case"row":return z(this);case"column":return $(this);case void 0:return F(this);default:throw new Error(`invalid option: ${w}`)}}product(w){switch(w){case"row":return Z(this);case"column":return Q(this);case void 0:return ue(this);default:throw new Error(`invalid option: ${w}`)}}mean(w){const _=this.sum(w);switch(w){case"row":{for(let m=0;m<this.rows;m++)_[m]/=this.columns;return _}case"column":{for(let m=0;m<this.columns;m++)_[m]/=this.rows;return _}case void 0:return _/this.size;default:throw new Error(`invalid option: ${w}`)}}variance(w,_={}){if(typeof w=="object"&&(_=w,w=void 0),typeof _!="object")throw new TypeError("options must be an object");const{unbiased:m=!0,mean:x=this.mean(w)}=_;if(typeof m!="boolean")throw new TypeError("unbiased must be a boolean");switch(w){case"row":{if(!t.isAnyArray(x))throw new TypeError("mean must be an array");return Y(this,m,x)}case"column":{if(!t.isAnyArray(x))throw new TypeError("mean must be an array");return K(this,m,x)}case void 0:{if(typeof x!="number")throw new TypeError("mean must be a number");return ie(this,m,x)}default:throw new Error(`invalid option: ${w}`)}}standardDeviation(w,_){typeof w=="object"&&(_=w,w=void 0);const m=this.variance(w,_);if(w===void 0)return Math.sqrt(m);for(let x=0;x<m.length;x++)m[x]=Math.sqrt(m[x]);return m}center(w,_={}){if(typeof w=="object"&&(_=w,w=void 0),typeof _!="object")throw new TypeError("options must be an object");const{center:m=this.mean(w)}=_;switch(w){case"row":{if(!t.isAnyArray(m))throw new TypeError("center must be an array");return _e(this,m),this}case"column":{if(!t.isAnyArray(m))throw new TypeError("center must be an array");return re(this,m),this}case void 0:{if(typeof m!="number")throw new TypeError("center must be a number");return Te(this,m),this}default:throw new Error(`invalid option: ${w}`)}}scale(w,_={}){if(typeof w=="object"&&(_=w,w=void 0),typeof _!="object")throw new TypeError("options must be an object");let m=_.scale;switch(w){case"row":{if(m===void 0)m=ne(this);else if(!t.isAnyArray(m))throw new TypeError("scale must be an array");return Se(this,m),this}case"column":{if(m===void 0)m=pe(this);else if(!t.isAnyArray(m))throw new TypeError("scale must be an array");return Xe(this,m),this}case void 0:{if(m===void 0)m=O(this);else if(typeof m!="number")throw new TypeError("scale must be a number");return Ee(this,m),this}default:throw new Error(`invalid option: ${w}`)}}toString(w){return s(this,w)}[Symbol.iterator](){return this.entries()}*entries(){for(let w=0;w<this.rows;w++)for(let _=0;_<this.columns;_++)yield[w,_,this.get(w,_)]}*values(){for(let w=0;w<this.rows;w++)for(let _=0;_<this.columns;_++)yield this.get(w,_)}}Ae.prototype.klass="Matrix",typeof Symbol<"u"&&(Ae.prototype[Symbol.for("nodejs.util.inspect.custom")]=i);function B(D,w){return D-w}function Ce(D){return D.every(w=>typeof w=="number")}Ae.random=Ae.rand,Ae.randomInt=Ae.randInt,Ae.diagonal=Ae.diag,Ae.prototype.diagonal=Ae.prototype.diag,Ae.identity=Ae.eye,Ae.prototype.negate=Ae.prototype.neg,Ae.prototype.tensorProduct=Ae.prototype.kroneckerProduct;const Jo=class Jo extends Ae{constructor(_,m){super();at(this,Ci);U(this,"data");if(Jo.isMatrix(_))vt(this,Ci,O0).call(this,_.rows,_.columns),Jo.copy(_,this);else if(Number.isInteger(_)&&_>=0)vt(this,Ci,O0).call(this,_,m);else if(t.isAnyArray(_)){const x=_;if(_=x.length,m=_?x[0].length:0,typeof m!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let E=0;E<_;E++){if(x[E].length!==m)throw new RangeError("Inconsistent array dimensions");if(!Ce(x[E]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(x[E]))}this.rows=_,this.columns=m}else throw new TypeError("First argument must be a positive number or an array")}set(_,m,x){return this.data[_][m]=x,this}get(_,m){return this.data[_][m]}removeRow(_){return d(this,_),this.data.splice(_,1),this.rows-=1,this}addRow(_,m){return m===void 0&&(m=_,_=this.rows),d(this,_,!0),m=Float64Array.from(b(this,m)),this.data.splice(_,0,m),this.rows+=1,this}removeColumn(_){g(this,_);for(let m=0;m<this.rows;m++){const x=new Float64Array(this.columns-1);for(let E=0;E<_;E++)x[E]=this.data[m][E];for(let E=_+1;E<this.columns;E++)x[E-1]=this.data[m][E];this.data[m]=x}return this.columns-=1,this}addColumn(_,m){typeof m>"u"&&(m=_,_=this.columns),g(this,_,!0),m=S(this,m);for(let x=0;x<this.rows;x++){const E=new Float64Array(this.columns+1);let j=0;for(;j<_;j++)E[j]=this.data[x][j];for(E[j++]=m[x];j<this.columns+1;j++)E[j]=this.data[x][j-1];this.data[x]=E}return this.columns+=1,this}};Ci=new WeakSet,O0=function(_,m){if(this.data=[],Number.isInteger(m)&&m>=0)for(let x=0;x<_;x++)this.data.push(new Float64Array(m));else throw new TypeError("nColumns must be a positive integer");this.rows=_,this.columns=m};let ge=Jo;h(Ae,ge);const Ws=class Ws extends Ae{constructor(_){super();at(this,qn);if(ge.isMatrix(_)){if(!_.isSymmetric())throw new TypeError("not symmetric data");Qe(this,qn,ge.copy(_,new ge(_.rows,_.rows)))}else if(Number.isInteger(_)&&_>=0)Qe(this,qn,new ge(_,_));else if(Qe(this,qn,new ge(_)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return te(this,qn).size}get rows(){return te(this,qn).rows}get columns(){return te(this,qn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(_){return ge.isMatrix(_)&&_.klassType==="SymmetricMatrix"}static zeros(_){return new this(_)}static ones(_){return new this(_).fill(1)}clone(){const _=new Ws(this.diagonalSize);for(const[m,x,E]of this.upperRightEntries())_.set(m,x,E);return _}toMatrix(){return new ge(this)}get(_,m){return te(this,qn).get(_,m)}set(_,m,x){return te(this,qn).set(_,m,x),te(this,qn).set(m,_,x),this}removeCross(_){return te(this,qn).removeRow(_),te(this,qn).removeColumn(_),this}addCross(_,m){m===void 0&&(m=_,_=this.diagonalSize);const x=m.slice();return x.splice(_,1),te(this,qn).addRow(_,x),te(this,qn).addColumn(_,m),this}applyMask(_){if(_.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const m=[];for(const[x,E]of _.entries())E||m.push(x);m.reverse();for(const x of m)this.removeCross(x);return this}toCompact(){const{diagonalSize:_}=this,m=new Array(_*(_+1)/2);for(let x=0,E=0,j=0;j<m.length;j++)m[j]=this.get(E,x),++x>=_&&(x=++E);return m}static fromCompact(_){const m=_.length,x=(Math.sqrt(8*m+1)-1)/2;if(!Number.isInteger(x))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(_)}`);const E=new Ws(x);for(let j=0,V=0,H=0;H<m;H++)E.set(j,V,_[H]),++j>=x&&(j=++V);return E}*upperRightEntries(){for(let _=0,m=0;_<this.diagonalSize;void 0){const x=this.get(_,m);yield[_,m,x],++m>=this.diagonalSize&&(m=++_)}}*upperRightValues(){for(let _=0,m=0;_<this.diagonalSize;void 0)yield this.get(_,m),++m>=this.diagonalSize&&(m=++_)}};qn=new WeakMap;let Oe=Ws;Oe.prototype.klassType="SymmetricMatrix";class ke extends Oe{static isDistanceMatrix(w){return Oe.isSymmetricMatrix(w)&&w.klassSubType==="DistanceMatrix"}constructor(w){if(super(w),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(w,_,m){return w===_&&(m=0),super.set(w,_,m)}addCross(w,_){return _===void 0&&(_=w,w=this.diagonalSize),_=_.slice(),_[w]=0,super.addCross(w,_)}toSymmetricMatrix(){return new Oe(this)}clone(){const w=new ke(this.diagonalSize);for(const[_,m,x]of this.upperRightEntries())_!==m&&w.set(_,m,x);return w}toCompact(){const{diagonalSize:w}=this,_=(w-1)*w/2,m=new Array(_);for(let x=1,E=0,j=0;j<m.length;j++)m[j]=this.get(E,x),++x>=w&&(x=++E+1);return m}static fromCompact(w){const _=w.length;if(_===0)return new this(0);const m=(Math.sqrt(8*_+1)+1)/2;if(!Number.isInteger(m))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(w)}`);const x=new this(m);for(let E=1,j=0,V=0;V<_;V++)x.set(E,j,w[V]),++E>=m&&(E=++j+1);return x}}ke.prototype.klassSubType="DistanceMatrix";class je extends Ae{constructor(w,_,m){super(),this.matrix=w,this.rows=_,this.columns=m}}class tt extends je{constructor(w,_){g(w,_),super(w,w.rows,1),this.column=_}set(w,_,m){return this.matrix.set(w,this.column,m),this}get(w){return this.matrix.get(w,this.column)}}class Ze extends je{constructor(w,_){A(w,_),super(w,w.rows,_.length),this.columnIndices=_}set(w,_,m){return this.matrix.set(w,this.columnIndices[_],m),this}get(w,_){return this.matrix.get(w,this.columnIndices[_])}}class it extends je{constructor(w){super(w,w.rows,w.columns)}set(w,_,m){return this.matrix.set(w,this.columns-_-1,m),this}get(w,_){return this.matrix.get(w,this.columns-_-1)}}class ct extends je{constructor(w){super(w,w.rows,w.columns)}set(w,_,m){return this.matrix.set(this.rows-w-1,_,m),this}get(w,_){return this.matrix.get(this.rows-w-1,_)}}class bt extends je{constructor(w,_){d(w,_),super(w,1,w.columns),this.row=_}set(w,_,m){return this.matrix.set(this.row,_,m),this}get(w,_){return this.matrix.get(this.row,_)}}class qt extends je{constructor(w,_){R(w,_),super(w,_.length,w.columns),this.rowIndices=_}set(w,_,m){return this.matrix.set(this.rowIndices[w],_,m),this}get(w,_){return this.matrix.get(this.rowIndices[w],_)}}class In extends je{constructor(w,_,m){R(w,_),A(w,m),super(w,_.length,m.length),this.rowIndices=_,this.columnIndices=m}set(w,_,m){return this.matrix.set(this.rowIndices[w],this.columnIndices[_],m),this}get(w,_){return this.matrix.get(this.rowIndices[w],this.columnIndices[_])}}class ar extends je{constructor(w,_,m,x,E){C(w,_,m,x,E),super(w,m-_+1,E-x+1),this.startRow=_,this.startColumn=x}set(w,_,m){return this.matrix.set(this.startRow+w,this.startColumn+_,m),this}get(w,_){return this.matrix.get(this.startRow+w,this.startColumn+_)}}class bn extends je{constructor(w){super(w,w.columns,w.rows)}set(w,_,m){return this.matrix.set(_,w,m),this}get(w,_){return this.matrix.get(_,w)}}class Sn extends Ae{constructor(w,_={}){const{rows:m=1}=_;if(w.length%m!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=m,this.columns=w.length/m,this.data=w}set(w,_,m){let x=this._calculateIndex(w,_);return this.data[x]=m,this}get(w,_){let m=this._calculateIndex(w,_);return this.data[m]}_calculateIndex(w,_){return w*this.columns+_}}class ln extends Ae{constructor(w){super(),this.data=w,this.rows=w.length,this.columns=w[0].length}set(w,_,m){return this.data[w][_]=m,this}get(w,_){return this.data[w][_]}}function ys(D,w){if(t.isAnyArray(D))return D[0]&&t.isAnyArray(D[0])?new ln(D):new Sn(D,w);throw new Error("the argument is not an array")}class lr{constructor(w){w=ln.checkMatrix(w);let _=w.clone(),m=_.rows,x=_.columns,E=new Float64Array(m),j=1,V,H,q,fe,J,Re,ze,xe,Ne;for(V=0;V<m;V++)E[V]=V;for(xe=new Float64Array(m),H=0;H<x;H++){for(V=0;V<m;V++)xe[V]=_.get(V,H);for(V=0;V<m;V++){for(Ne=Math.min(V,H),J=0,q=0;q<Ne;q++)J+=_.get(V,q)*xe[q];xe[V]-=J,_.set(V,H,xe[V])}for(fe=H,V=H+1;V<m;V++)Math.abs(xe[V])>Math.abs(xe[fe])&&(fe=V);if(fe!==H){for(q=0;q<x;q++)Re=_.get(fe,q),_.set(fe,q,_.get(H,q)),_.set(H,q,Re);ze=E[fe],E[fe]=E[H],E[H]=ze,j=-j}if(H<m&&_.get(H,H)!==0)for(V=H+1;V<m;V++)_.set(V,H,_.get(V,H)/_.get(H,H))}this.LU=_,this.pivotVector=E,this.pivotSign=j}isSingular(){let w=this.LU,_=w.columns;for(let m=0;m<_;m++)if(w.get(m,m)===0)return!0;return!1}solve(w){w=ge.checkMatrix(w);let _=this.LU;if(_.rows!==w.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let x=w.columns,E=w.subMatrixRow(this.pivotVector,0,x-1),j=_.columns,V,H,q;for(q=0;q<j;q++)for(V=q+1;V<j;V++)for(H=0;H<x;H++)E.set(V,H,E.get(V,H)-E.get(q,H)*_.get(V,q));for(q=j-1;q>=0;q--){for(H=0;H<x;H++)E.set(q,H,E.get(q,H)/_.get(q,q));for(V=0;V<q;V++)for(H=0;H<x;H++)E.set(V,H,E.get(V,H)-E.get(q,H)*_.get(V,q))}return E}get determinant(){let w=this.LU;if(!w.isSquare())throw new Error("Matrix must be square");let _=this.pivotSign,m=w.columns;for(let x=0;x<m;x++)_*=w.get(x,x);return _}get lowerTriangularMatrix(){let w=this.LU,_=w.rows,m=w.columns,x=new ge(_,m);for(let E=0;E<_;E++)for(let j=0;j<m;j++)E>j?x.set(E,j,w.get(E,j)):E===j?x.set(E,j,1):x.set(E,j,0);return x}get upperTriangularMatrix(){let w=this.LU,_=w.rows,m=w.columns,x=new ge(_,m);for(let E=0;E<_;E++)for(let j=0;j<m;j++)E<=j?x.set(E,j,w.get(E,j)):x.set(E,j,0);return x}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function gr(D,w){let _=0;return Math.abs(D)>Math.abs(w)?(_=w/D,Math.abs(D)*Math.sqrt(1+_*_)):w!==0?(_=D/w,Math.abs(w)*Math.sqrt(1+_*_)):0}class Xi{constructor(w){w=ln.checkMatrix(w);let _=w.clone(),m=w.rows,x=w.columns,E=new Float64Array(x),j,V,H,q;for(H=0;H<x;H++){let fe=0;for(j=H;j<m;j++)fe=gr(fe,_.get(j,H));if(fe!==0){for(_.get(H,H)<0&&(fe=-fe),j=H;j<m;j++)_.set(j,H,_.get(j,H)/fe);for(_.set(H,H,_.get(H,H)+1),V=H+1;V<x;V++){for(q=0,j=H;j<m;j++)q+=_.get(j,H)*_.get(j,V);for(q=-q/_.get(H,H),j=H;j<m;j++)_.set(j,V,_.get(j,V)+q*_.get(j,H))}}E[H]=-fe}this.QR=_,this.Rdiag=E}solve(w){w=ge.checkMatrix(w);let _=this.QR,m=_.rows;if(w.rows!==m)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let x=w.columns,E=w.clone(),j=_.columns,V,H,q,fe;for(q=0;q<j;q++)for(H=0;H<x;H++){for(fe=0,V=q;V<m;V++)fe+=_.get(V,q)*E.get(V,H);for(fe=-fe/_.get(q,q),V=q;V<m;V++)E.set(V,H,E.get(V,H)+fe*_.get(V,q))}for(q=j-1;q>=0;q--){for(H=0;H<x;H++)E.set(q,H,E.get(q,H)/this.Rdiag[q]);for(V=0;V<q;V++)for(H=0;H<x;H++)E.set(V,H,E.get(V,H)-E.get(q,H)*_.get(V,q))}return E.subMatrix(0,j-1,0,x-1)}isFullRank(){let w=this.QR.columns;for(let _=0;_<w;_++)if(this.Rdiag[_]===0)return!1;return!0}get upperTriangularMatrix(){let w=this.QR,_=w.columns,m=new ge(_,_),x,E;for(x=0;x<_;x++)for(E=0;E<_;E++)x<E?m.set(x,E,w.get(x,E)):x===E?m.set(x,E,this.Rdiag[x]):m.set(x,E,0);return m}get orthogonalMatrix(){let w=this.QR,_=w.rows,m=w.columns,x=new ge(_,m),E,j,V,H;for(V=m-1;V>=0;V--){for(E=0;E<_;E++)x.set(E,V,0);for(x.set(V,V,1),j=V;j<m;j++)if(w.get(V,V)!==0){for(H=0,E=V;E<_;E++)H+=w.get(E,V)*x.get(E,j);for(H=-H/w.get(V,V),E=V;E<_;E++)x.set(E,j,x.get(E,j)+H*w.get(E,V))}}return x}}class Yi{constructor(w,_={}){if(w=ln.checkMatrix(w),w.isEmpty())throw new Error("Matrix must be non-empty");let m=w.rows,x=w.columns;const{computeLeftSingularVectors:E=!0,computeRightSingularVectors:j=!0,autoTranspose:V=!1}=_;let H=!!E,q=!!j,fe=!1,J;if(m<x)if(!V)J=w.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{J=w.transpose(),m=J.rows,x=J.columns,fe=!0;let oe=H;H=q,q=oe}else J=w.clone();let Re=Math.min(m,x),ze=Math.min(m+1,x),xe=new Float64Array(ze),Ne=new ge(m,Re),qe=new ge(x,x),ee=new Float64Array(x),Ve=new Float64Array(m),Ke=new Float64Array(ze);for(let oe=0;oe<ze;oe++)Ke[oe]=oe;let st=Math.min(m-1,x),ut=Math.max(0,Math.min(x-2,m)),pn=Math.max(st,ut);for(let oe=0;oe<pn;oe++){if(oe<st){xe[oe]=0;for(let Be=oe;Be<m;Be++)xe[oe]=gr(xe[oe],J.get(Be,oe));if(xe[oe]!==0){J.get(oe,oe)<0&&(xe[oe]=-xe[oe]);for(let Be=oe;Be<m;Be++)J.set(Be,oe,J.get(Be,oe)/xe[oe]);J.set(oe,oe,J.get(oe,oe)+1)}xe[oe]=-xe[oe]}for(let Be=oe+1;Be<x;Be++){if(oe<st&&xe[oe]!==0){let We=0;for(let Ue=oe;Ue<m;Ue++)We+=J.get(Ue,oe)*J.get(Ue,Be);We=-We/J.get(oe,oe);for(let Ue=oe;Ue<m;Ue++)J.set(Ue,Be,J.get(Ue,Be)+We*J.get(Ue,oe))}ee[Be]=J.get(oe,Be)}if(H&&oe<st)for(let Be=oe;Be<m;Be++)Ne.set(Be,oe,J.get(Be,oe));if(oe<ut){ee[oe]=0;for(let Be=oe+1;Be<x;Be++)ee[oe]=gr(ee[oe],ee[Be]);if(ee[oe]!==0){ee[oe+1]<0&&(ee[oe]=0-ee[oe]);for(let Be=oe+1;Be<x;Be++)ee[Be]/=ee[oe];ee[oe+1]+=1}if(ee[oe]=-ee[oe],oe+1<m&&ee[oe]!==0){for(let Be=oe+1;Be<m;Be++)Ve[Be]=0;for(let Be=oe+1;Be<m;Be++)for(let We=oe+1;We<x;We++)Ve[Be]+=ee[We]*J.get(Be,We);for(let Be=oe+1;Be<x;Be++){let We=-ee[Be]/ee[oe+1];for(let Ue=oe+1;Ue<m;Ue++)J.set(Ue,Be,J.get(Ue,Be)+We*Ve[Ue])}}if(q)for(let Be=oe+1;Be<x;Be++)qe.set(Be,oe,ee[Be])}}let nt=Math.min(x,m+1);if(st<x&&(xe[st]=J.get(st,st)),m<nt&&(xe[nt-1]=0),ut+1<nt&&(ee[ut]=J.get(ut,nt-1)),ee[nt-1]=0,H){for(let oe=st;oe<Re;oe++){for(let Be=0;Be<m;Be++)Ne.set(Be,oe,0);Ne.set(oe,oe,1)}for(let oe=st-1;oe>=0;oe--)if(xe[oe]!==0){for(let Be=oe+1;Be<Re;Be++){let We=0;for(let Ue=oe;Ue<m;Ue++)We+=Ne.get(Ue,oe)*Ne.get(Ue,Be);We=-We/Ne.get(oe,oe);for(let Ue=oe;Ue<m;Ue++)Ne.set(Ue,Be,Ne.get(Ue,Be)+We*Ne.get(Ue,oe))}for(let Be=oe;Be<m;Be++)Ne.set(Be,oe,-Ne.get(Be,oe));Ne.set(oe,oe,1+Ne.get(oe,oe));for(let Be=0;Be<oe-1;Be++)Ne.set(Be,oe,0)}else{for(let Be=0;Be<m;Be++)Ne.set(Be,oe,0);Ne.set(oe,oe,1)}}if(q)for(let oe=x-1;oe>=0;oe--){if(oe<ut&&ee[oe]!==0)for(let Be=oe+1;Be<x;Be++){let We=0;for(let Ue=oe+1;Ue<x;Ue++)We+=qe.get(Ue,oe)*qe.get(Ue,Be);We=-We/qe.get(oe+1,oe);for(let Ue=oe+1;Ue<x;Ue++)qe.set(Ue,Be,qe.get(Ue,Be)+We*qe.get(Ue,oe))}for(let Be=0;Be<x;Be++)qe.set(Be,oe,0);qe.set(oe,oe,1)}let ot=nt-1,Qt=Number.EPSILON;for(;nt>0;){let oe,Be;for(oe=nt-2;oe>=-1&&oe!==-1;oe--){const We=Number.MIN_VALUE+Qt*Math.abs(xe[oe]+Math.abs(xe[oe+1]));if(Math.abs(ee[oe])<=We||Number.isNaN(ee[oe])){ee[oe]=0;break}}if(oe===nt-2)Be=4;else{let We;for(We=nt-1;We>=oe&&We!==oe;We--){let Ue=(We!==nt?Math.abs(ee[We]):0)+(We!==oe+1?Math.abs(ee[We-1]):0);if(Math.abs(xe[We])<=Qt*Ue){xe[We]=0;break}}We===oe?Be=3:We===nt-1?Be=1:(Be=2,oe=We)}switch(oe++,Be){case 1:{let We=ee[nt-2];ee[nt-2]=0;for(let Ue=nt-2;Ue>=oe;Ue--){let cn=gr(xe[Ue],We),It=xe[Ue]/cn,Zt=We/cn;if(xe[Ue]=cn,Ue!==oe&&(We=-Zt*ee[Ue-1],ee[Ue-1]=It*ee[Ue-1]),q)for(let en=0;en<x;en++)cn=It*qe.get(en,Ue)+Zt*qe.get(en,nt-1),qe.set(en,nt-1,-Zt*qe.get(en,Ue)+It*qe.get(en,nt-1)),qe.set(en,Ue,cn)}break}case 2:{let We=ee[oe-1];ee[oe-1]=0;for(let Ue=oe;Ue<nt;Ue++){let cn=gr(xe[Ue],We),It=xe[Ue]/cn,Zt=We/cn;if(xe[Ue]=cn,We=-Zt*ee[Ue],ee[Ue]=It*ee[Ue],H)for(let en=0;en<m;en++)cn=It*Ne.get(en,Ue)+Zt*Ne.get(en,oe-1),Ne.set(en,oe-1,-Zt*Ne.get(en,Ue)+It*Ne.get(en,oe-1)),Ne.set(en,Ue,cn)}break}case 3:{const We=Math.max(Math.abs(xe[nt-1]),Math.abs(xe[nt-2]),Math.abs(ee[nt-2]),Math.abs(xe[oe]),Math.abs(ee[oe])),Ue=xe[nt-1]/We,cn=xe[nt-2]/We,It=ee[nt-2]/We,Zt=xe[oe]/We,en=ee[oe]/We,Xn=((cn+Ue)*(cn-Ue)+It*It)/2,Br=Ue*It*(Ue*It);let jt=0;(Xn!==0||Br!==0)&&(Xn<0?jt=0-Math.sqrt(Xn*Xn+Br):jt=Math.sqrt(Xn*Xn+Br),jt=Br/(Xn+jt));let Yr=(Zt+Ue)*(Zt-Ue)+jt,ki=Zt*en;for(let xt=oe;xt<nt-1;xt++){let jn=gr(Yr,ki);jn===0&&(jn=Number.MIN_VALUE);let tr=Yr/jn,Cr=ki/jn;if(xt!==oe&&(ee[xt-1]=jn),Yr=tr*xe[xt]+Cr*ee[xt],ee[xt]=tr*ee[xt]-Cr*xe[xt],ki=Cr*xe[xt+1],xe[xt+1]=tr*xe[xt+1],q)for(let Ut=0;Ut<x;Ut++)jn=tr*qe.get(Ut,xt)+Cr*qe.get(Ut,xt+1),qe.set(Ut,xt+1,-Cr*qe.get(Ut,xt)+tr*qe.get(Ut,xt+1)),qe.set(Ut,xt,jn);if(jn=gr(Yr,ki),jn===0&&(jn=Number.MIN_VALUE),tr=Yr/jn,Cr=ki/jn,xe[xt]=jn,Yr=tr*ee[xt]+Cr*xe[xt+1],xe[xt+1]=-Cr*ee[xt]+tr*xe[xt+1],ki=Cr*ee[xt+1],ee[xt+1]=tr*ee[xt+1],H&&xt<m-1)for(let Ut=0;Ut<m;Ut++)jn=tr*Ne.get(Ut,xt)+Cr*Ne.get(Ut,xt+1),Ne.set(Ut,xt+1,-Cr*Ne.get(Ut,xt)+tr*Ne.get(Ut,xt+1)),Ne.set(Ut,xt,jn)}ee[nt-2]=Yr;break}case 4:{if(xe[oe]<=0&&(xe[oe]=xe[oe]<0?-xe[oe]:0,q))for(let We=0;We<=ot;We++)qe.set(We,oe,-qe.get(We,oe));for(;oe<ot&&!(xe[oe]>=xe[oe+1]);){let We=xe[oe];if(xe[oe]=xe[oe+1],xe[oe+1]=We,q&&oe<x-1)for(let Ue=0;Ue<x;Ue++)We=qe.get(Ue,oe+1),qe.set(Ue,oe+1,qe.get(Ue,oe)),qe.set(Ue,oe,We);if(H&&oe<m-1)for(let Ue=0;Ue<m;Ue++)We=Ne.get(Ue,oe+1),Ne.set(Ue,oe+1,Ne.get(Ue,oe)),Ne.set(Ue,oe,We);oe++}nt--;break}}}if(fe){let oe=qe;qe=Ne,Ne=oe}this.m=m,this.n=x,this.s=xe,this.U=Ne,this.V=qe}solve(w){let _=w,m=this.threshold,x=this.s.length,E=ge.zeros(x,x);for(let Re=0;Re<x;Re++)Math.abs(this.s[Re])<=m?E.set(Re,Re,0):E.set(Re,Re,1/this.s[Re]);let j=this.U,V=this.rightSingularVectors,H=V.mmul(E),q=V.rows,fe=j.rows,J=ge.zeros(q,fe);for(let Re=0;Re<q;Re++)for(let ze=0;ze<fe;ze++){let xe=0;for(let Ne=0;Ne<x;Ne++)xe+=H.get(Re,Ne)*j.get(ze,Ne);J.set(Re,ze,xe)}return J.mmul(_)}solveForDiagonal(w){return this.solve(ge.diag(w))}inverse(){let w=this.V,_=this.threshold,m=w.rows,x=w.columns,E=new ge(m,this.s.length);for(let fe=0;fe<m;fe++)for(let J=0;J<x;J++)Math.abs(this.s[J])>_&&E.set(fe,J,w.get(fe,J)/this.s[J]);let j=this.U,V=j.rows,H=j.columns,q=new ge(m,V);for(let fe=0;fe<m;fe++)for(let J=0;J<V;J++){let Re=0;for(let ze=0;ze<H;ze++)Re+=E.get(fe,ze)*j.get(J,ze);q.set(fe,J,Re)}return q}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let w=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,_=0,m=this.s;for(let x=0,E=m.length;x<E;x++)m[x]>w&&_++;return _}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ge.diag(this.s)}}function Qc(D,w=!1){return D=ln.checkMatrix(D),w?new Yi(D).inverse():Me(D,ge.eye(D.rows))}function Me(D,w,_=!1){return D=ln.checkMatrix(D),w=ln.checkMatrix(w),_?new Yi(D).solve(w):D.isSquare()?new lr(D).solve(w):new Xi(D).solve(w)}function Le(D){if(D=ge.checkMatrix(D),D.isSquare()){if(D.columns===0)return 1;let w,_,m,x;if(D.columns===2)return w=D.get(0,0),_=D.get(0,1),m=D.get(1,0),x=D.get(1,1),w*x-_*m;if(D.columns===3){let E,j,V;return E=new In(D,[1,2],[1,2]),j=new In(D,[1,2],[0,2]),V=new In(D,[1,2],[0,1]),w=D.get(0,0),_=D.get(0,1),m=D.get(0,2),w*Le(E)-_*Le(j)+m*Le(V)}else return new lr(D).determinant}else throw Error("determinant can only be calculated for a square matrix")}function lt(D,w){let _=[];for(let m=0;m<D;m++)m!==w&&_.push(m);return _}function ht(D,w,_,m=1e-9,x=1e-9){if(D>x)return new Array(w.rows+1).fill(0);{let E=w.addRow(_,[0]);for(let j=0;j<E.rows;j++)Math.abs(E.get(j,0))<m&&E.set(j,0,0);return E.to1DArray()}}function zt(D,w={}){const{thresholdValue:_=1e-9,thresholdError:m=1e-9}=w;D=ge.checkMatrix(D);let x=D.rows,E=new ge(x,x);for(let j=0;j<x;j++){let V=ge.columnVector(D.getRow(j)),H=D.subMatrixRow(lt(x,j)).transpose(),fe=new Yi(H).solve(V),J=ge.sub(V,H.mmul(fe)).abs().max();E.setRow(j,ht(J,fe,j,_,m))}return E}function Ar(D,w=Number.EPSILON){if(D=ge.checkMatrix(D),D.isEmpty())return D.transpose();let _=new Yi(D,{autoTranspose:!0}),m=_.leftSingularVectors,x=_.rightSingularVectors,E=_.diagonal;for(let j=0;j<E.length;j++)Math.abs(E[j])>w?E[j]=1/E[j]:E[j]=0;return x.mmul(ge.diag(E).mmul(m.transpose()))}function Ri(D,w=D,_={}){D=new ge(D);let m=!1;if(typeof w=="object"&&!ge.isMatrix(w)&&!t.isAnyArray(w)?(_=w,w=D,m=!0):w=new ge(w),D.rows!==w.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:x=!0}=_;x&&(D=D.center("column"),m||(w=w.center("column")));const E=D.transpose().mmul(w);for(let j=0;j<E.rows;j++)for(let V=0;V<E.columns;V++)E.set(j,V,E.get(j,V)*(1/(D.rows-1)));return E}function mr(D,w=D,_={}){D=new ge(D);let m=!1;if(typeof w=="object"&&!ge.isMatrix(w)&&!t.isAnyArray(w)?(_=w,w=D,m=!0):w=new ge(w),D.rows!==w.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:x=!0,scale:E=!0}=_;x&&(D.center("column"),m||w.center("column")),E&&(D.scale("column"),m||w.scale("column"));const j=D.standardDeviation("column",{unbiased:!0}),V=m?j:w.standardDeviation("column",{unbiased:!0}),H=D.transpose().mmul(w);for(let q=0;q<H.rows;q++)for(let fe=0;fe<H.columns;fe++)H.set(q,fe,H.get(q,fe)*(1/(j[q]*V[fe]))*(1/(D.rows-1)));return H}class qr{constructor(w,_={}){const{assumeSymmetric:m=!1}=_;if(w=ln.checkMatrix(w),!w.isSquare())throw new Error("Matrix is not a square matrix");if(w.isEmpty())throw new Error("Matrix must be non-empty");let x=w.columns,E=new ge(x,x),j=new Float64Array(x),V=new Float64Array(x),H=w,q,fe,J=!1;if(m?J=!0:J=w.isSymmetric(),J){for(q=0;q<x;q++)for(fe=0;fe<x;fe++)E.set(q,fe,H.get(q,fe));Rr(x,V,j,E),Bn(x,V,j,E)}else{let Re=new ge(x,x),ze=new Float64Array(x);for(fe=0;fe<x;fe++)for(q=0;q<x;q++)Re.set(q,fe,H.get(q,fe));Fr(x,Re,ze,E),Xr(x,V,j,E,Re)}this.n=x,this.e=V,this.d=j,this.V=E}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let w=this.n,_=this.e,m=this.d,x=new ge(w,w),E,j;for(E=0;E<w;E++){for(j=0;j<w;j++)x.set(E,j,0);x.set(E,E,m[E]),_[E]>0?x.set(E,E+1,_[E]):_[E]<0&&x.set(E,E-1,_[E])}return x}}function Rr(D,w,_,m){let x,E,j,V,H,q,fe,J;for(H=0;H<D;H++)_[H]=m.get(D-1,H);for(V=D-1;V>0;V--){for(J=0,j=0,q=0;q<V;q++)J=J+Math.abs(_[q]);if(J===0)for(w[V]=_[V-1],H=0;H<V;H++)_[H]=m.get(V-1,H),m.set(V,H,0),m.set(H,V,0);else{for(q=0;q<V;q++)_[q]/=J,j+=_[q]*_[q];for(x=_[V-1],E=Math.sqrt(j),x>0&&(E=-E),w[V]=J*E,j=j-x*E,_[V-1]=x-E,H=0;H<V;H++)w[H]=0;for(H=0;H<V;H++){for(x=_[H],m.set(H,V,x),E=w[H]+m.get(H,H)*x,q=H+1;q<=V-1;q++)E+=m.get(q,H)*_[q],w[q]+=m.get(q,H)*x;w[H]=E}for(x=0,H=0;H<V;H++)w[H]/=j,x+=w[H]*_[H];for(fe=x/(j+j),H=0;H<V;H++)w[H]-=fe*_[H];for(H=0;H<V;H++){for(x=_[H],E=w[H],q=H;q<=V-1;q++)m.set(q,H,m.get(q,H)-(x*w[q]+E*_[q]));_[H]=m.get(V-1,H),m.set(V,H,0)}}_[V]=j}for(V=0;V<D-1;V++){if(m.set(D-1,V,m.get(V,V)),m.set(V,V,1),j=_[V+1],j!==0){for(q=0;q<=V;q++)_[q]=m.get(q,V+1)/j;for(H=0;H<=V;H++){for(E=0,q=0;q<=V;q++)E+=m.get(q,V+1)*m.get(q,H);for(q=0;q<=V;q++)m.set(q,H,m.get(q,H)-E*_[q])}}for(q=0;q<=V;q++)m.set(q,V+1,0)}for(H=0;H<D;H++)_[H]=m.get(D-1,H),m.set(D-1,H,0);m.set(D-1,D-1,1),w[0]=0}function Bn(D,w,_,m){let x,E,j,V,H,q,fe,J,Re,ze,xe,Ne,qe,ee,Ve,Ke;for(j=1;j<D;j++)w[j-1]=w[j];w[D-1]=0;let st=0,ut=0,pn=Number.EPSILON;for(q=0;q<D;q++){for(ut=Math.max(ut,Math.abs(_[q])+Math.abs(w[q])),fe=q;fe<D&&!(Math.abs(w[fe])<=pn*ut);)fe++;if(fe>q)do{for(x=_[q],J=(_[q+1]-x)/(2*w[q]),Re=gr(J,1),J<0&&(Re=-Re),_[q]=w[q]/(J+Re),_[q+1]=w[q]*(J+Re),ze=_[q+1],E=x-_[q],j=q+2;j<D;j++)_[j]-=E;for(st=st+E,J=_[fe],xe=1,Ne=xe,qe=xe,ee=w[q+1],Ve=0,Ke=0,j=fe-1;j>=q;j--)for(qe=Ne,Ne=xe,Ke=Ve,x=xe*w[j],E=xe*J,Re=gr(J,w[j]),w[j+1]=Ve*Re,Ve=w[j]/Re,xe=J/Re,J=xe*_[j]-Ve*x,_[j+1]=E+Ve*(xe*x+Ve*_[j]),H=0;H<D;H++)E=m.get(H,j+1),m.set(H,j+1,Ve*m.get(H,j)+xe*E),m.set(H,j,xe*m.get(H,j)-Ve*E);J=-Ve*Ke*qe*ee*w[q]/ze,w[q]=Ve*J,_[q]=xe*J}while(Math.abs(w[q])>pn*ut);_[q]=_[q]+st,w[q]=0}for(j=0;j<D-1;j++){for(H=j,J=_[j],V=j+1;V<D;V++)_[V]<J&&(H=V,J=_[V]);if(H!==j)for(_[H]=_[j],_[j]=J,V=0;V<D;V++)J=m.get(V,j),m.set(V,j,m.get(V,H)),m.set(V,H,J)}}function Fr(D,w,_,m){let x=0,E=D-1,j,V,H,q,fe,J,Re;for(J=x+1;J<=E-1;J++){for(Re=0,q=J;q<=E;q++)Re=Re+Math.abs(w.get(q,J-1));if(Re!==0){for(H=0,q=E;q>=J;q--)_[q]=w.get(q,J-1)/Re,H+=_[q]*_[q];for(V=Math.sqrt(H),_[J]>0&&(V=-V),H=H-_[J]*V,_[J]=_[J]-V,fe=J;fe<D;fe++){for(j=0,q=E;q>=J;q--)j+=_[q]*w.get(q,fe);for(j=j/H,q=J;q<=E;q++)w.set(q,fe,w.get(q,fe)-j*_[q])}for(q=0;q<=E;q++){for(j=0,fe=E;fe>=J;fe--)j+=_[fe]*w.get(q,fe);for(j=j/H,fe=J;fe<=E;fe++)w.set(q,fe,w.get(q,fe)-j*_[fe])}_[J]=Re*_[J],w.set(J,J-1,Re*V)}}for(q=0;q<D;q++)for(fe=0;fe<D;fe++)m.set(q,fe,q===fe?1:0);for(J=E-1;J>=x+1;J--)if(w.get(J,J-1)!==0){for(q=J+1;q<=E;q++)_[q]=w.get(q,J-1);for(fe=J;fe<=E;fe++){for(V=0,q=J;q<=E;q++)V+=_[q]*m.get(q,fe);for(V=V/_[J]/w.get(J,J-1),q=J;q<=E;q++)m.set(q,fe,m.get(q,fe)+V*_[q])}}}function Xr(D,w,_,m,x){let E=D-1,j=0,V=D-1,H=Number.EPSILON,q=0,fe=0,J=0,Re=0,ze=0,xe=0,Ne=0,qe=0,ee,Ve,Ke,st,ut,pn,nt,ot,Qt,oe,Be,We,Ue,cn,It;for(ee=0;ee<D;ee++)for((ee<j||ee>V)&&(_[ee]=x.get(ee,ee),w[ee]=0),Ve=Math.max(ee-1,0);Ve<D;Ve++)fe=fe+Math.abs(x.get(ee,Ve));for(;E>=j;){for(st=E;st>j&&(xe=Math.abs(x.get(st-1,st-1))+Math.abs(x.get(st,st)),xe===0&&(xe=fe),!(Math.abs(x.get(st,st-1))<H*xe));)st--;if(st===E)x.set(E,E,x.get(E,E)+q),_[E]=x.get(E,E),w[E]=0,E--,qe=0;else if(st===E-1){if(nt=x.get(E,E-1)*x.get(E-1,E),J=(x.get(E-1,E-1)-x.get(E,E))/2,Re=J*J+nt,Ne=Math.sqrt(Math.abs(Re)),x.set(E,E,x.get(E,E)+q),x.set(E-1,E-1,x.get(E-1,E-1)+q),ot=x.get(E,E),Re>=0){for(Ne=J>=0?J+Ne:J-Ne,_[E-1]=ot+Ne,_[E]=_[E-1],Ne!==0&&(_[E]=ot-nt/Ne),w[E-1]=0,w[E]=0,ot=x.get(E,E-1),xe=Math.abs(ot)+Math.abs(Ne),J=ot/xe,Re=Ne/xe,ze=Math.sqrt(J*J+Re*Re),J=J/ze,Re=Re/ze,Ve=E-1;Ve<D;Ve++)Ne=x.get(E-1,Ve),x.set(E-1,Ve,Re*Ne+J*x.get(E,Ve)),x.set(E,Ve,Re*x.get(E,Ve)-J*Ne);for(ee=0;ee<=E;ee++)Ne=x.get(ee,E-1),x.set(ee,E-1,Re*Ne+J*x.get(ee,E)),x.set(ee,E,Re*x.get(ee,E)-J*Ne);for(ee=j;ee<=V;ee++)Ne=m.get(ee,E-1),m.set(ee,E-1,Re*Ne+J*m.get(ee,E)),m.set(ee,E,Re*m.get(ee,E)-J*Ne)}else _[E-1]=ot+J,_[E]=ot+J,w[E-1]=Ne,w[E]=-Ne;E=E-2,qe=0}else{if(ot=x.get(E,E),Qt=0,nt=0,st<E&&(Qt=x.get(E-1,E-1),nt=x.get(E,E-1)*x.get(E-1,E)),qe===10){for(q+=ot,ee=j;ee<=E;ee++)x.set(ee,ee,x.get(ee,ee)-ot);xe=Math.abs(x.get(E,E-1))+Math.abs(x.get(E-1,E-2)),ot=Qt=.75*xe,nt=-.4375*xe*xe}if(qe===30&&(xe=(Qt-ot)/2,xe=xe*xe+nt,xe>0)){for(xe=Math.sqrt(xe),Qt<ot&&(xe=-xe),xe=ot-nt/((Qt-ot)/2+xe),ee=j;ee<=E;ee++)x.set(ee,ee,x.get(ee,ee)-xe);q+=xe,ot=Qt=nt=.964}for(qe=qe+1,ut=E-2;ut>=st&&(Ne=x.get(ut,ut),ze=ot-Ne,xe=Qt-Ne,J=(ze*xe-nt)/x.get(ut+1,ut)+x.get(ut,ut+1),Re=x.get(ut+1,ut+1)-Ne-ze-xe,ze=x.get(ut+2,ut+1),xe=Math.abs(J)+Math.abs(Re)+Math.abs(ze),J=J/xe,Re=Re/xe,ze=ze/xe,!(ut===st||Math.abs(x.get(ut,ut-1))*(Math.abs(Re)+Math.abs(ze))<H*(Math.abs(J)*(Math.abs(x.get(ut-1,ut-1))+Math.abs(Ne)+Math.abs(x.get(ut+1,ut+1))))));)ut--;for(ee=ut+2;ee<=E;ee++)x.set(ee,ee-2,0),ee>ut+2&&x.set(ee,ee-3,0);for(Ke=ut;Ke<=E-1&&(cn=Ke!==E-1,Ke!==ut&&(J=x.get(Ke,Ke-1),Re=x.get(Ke+1,Ke-1),ze=cn?x.get(Ke+2,Ke-1):0,ot=Math.abs(J)+Math.abs(Re)+Math.abs(ze),ot!==0&&(J=J/ot,Re=Re/ot,ze=ze/ot)),ot!==0);Ke++)if(xe=Math.sqrt(J*J+Re*Re+ze*ze),J<0&&(xe=-xe),xe!==0){for(Ke!==ut?x.set(Ke,Ke-1,-xe*ot):st!==ut&&x.set(Ke,Ke-1,-x.get(Ke,Ke-1)),J=J+xe,ot=J/xe,Qt=Re/xe,Ne=ze/xe,Re=Re/J,ze=ze/J,Ve=Ke;Ve<D;Ve++)J=x.get(Ke,Ve)+Re*x.get(Ke+1,Ve),cn&&(J=J+ze*x.get(Ke+2,Ve),x.set(Ke+2,Ve,x.get(Ke+2,Ve)-J*Ne)),x.set(Ke,Ve,x.get(Ke,Ve)-J*ot),x.set(Ke+1,Ve,x.get(Ke+1,Ve)-J*Qt);for(ee=0;ee<=Math.min(E,Ke+3);ee++)J=ot*x.get(ee,Ke)+Qt*x.get(ee,Ke+1),cn&&(J=J+Ne*x.get(ee,Ke+2),x.set(ee,Ke+2,x.get(ee,Ke+2)-J*ze)),x.set(ee,Ke,x.get(ee,Ke)-J),x.set(ee,Ke+1,x.get(ee,Ke+1)-J*Re);for(ee=j;ee<=V;ee++)J=ot*m.get(ee,Ke)+Qt*m.get(ee,Ke+1),cn&&(J=J+Ne*m.get(ee,Ke+2),m.set(ee,Ke+2,m.get(ee,Ke+2)-J*ze)),m.set(ee,Ke,m.get(ee,Ke)-J),m.set(ee,Ke+1,m.get(ee,Ke+1)-J*Re)}}}if(fe!==0){for(E=D-1;E>=0;E--)if(J=_[E],Re=w[E],Re===0)for(st=E,x.set(E,E,1),ee=E-1;ee>=0;ee--){for(nt=x.get(ee,ee)-J,ze=0,Ve=st;Ve<=E;Ve++)ze=ze+x.get(ee,Ve)*x.get(Ve,E);if(w[ee]<0)Ne=nt,xe=ze;else if(st=ee,w[ee]===0?x.set(ee,E,nt!==0?-ze/nt:-ze/(H*fe)):(ot=x.get(ee,ee+1),Qt=x.get(ee+1,ee),Re=(_[ee]-J)*(_[ee]-J)+w[ee]*w[ee],pn=(ot*xe-Ne*ze)/Re,x.set(ee,E,pn),x.set(ee+1,E,Math.abs(ot)>Math.abs(Ne)?(-ze-nt*pn)/ot:(-xe-Qt*pn)/Ne)),pn=Math.abs(x.get(ee,E)),H*pn*pn>1)for(Ve=ee;Ve<=E;Ve++)x.set(Ve,E,x.get(Ve,E)/pn)}else if(Re<0)for(st=E-1,Math.abs(x.get(E,E-1))>Math.abs(x.get(E-1,E))?(x.set(E-1,E-1,Re/x.get(E,E-1)),x.set(E-1,E,-(x.get(E,E)-J)/x.get(E,E-1))):(It=Go(0,-x.get(E-1,E),x.get(E-1,E-1)-J,Re),x.set(E-1,E-1,It[0]),x.set(E-1,E,It[1])),x.set(E,E-1,0),x.set(E,E,1),ee=E-2;ee>=0;ee--){for(oe=0,Be=0,Ve=st;Ve<=E;Ve++)oe=oe+x.get(ee,Ve)*x.get(Ve,E-1),Be=Be+x.get(ee,Ve)*x.get(Ve,E);if(nt=x.get(ee,ee)-J,w[ee]<0)Ne=nt,ze=oe,xe=Be;else if(st=ee,w[ee]===0?(It=Go(-oe,-Be,nt,Re),x.set(ee,E-1,It[0]),x.set(ee,E,It[1])):(ot=x.get(ee,ee+1),Qt=x.get(ee+1,ee),We=(_[ee]-J)*(_[ee]-J)+w[ee]*w[ee]-Re*Re,Ue=(_[ee]-J)*2*Re,We===0&&Ue===0&&(We=H*fe*(Math.abs(nt)+Math.abs(Re)+Math.abs(ot)+Math.abs(Qt)+Math.abs(Ne))),It=Go(ot*ze-Ne*oe+Re*Be,ot*xe-Ne*Be-Re*oe,We,Ue),x.set(ee,E-1,It[0]),x.set(ee,E,It[1]),Math.abs(ot)>Math.abs(Ne)+Math.abs(Re)?(x.set(ee+1,E-1,(-oe-nt*x.get(ee,E-1)+Re*x.get(ee,E))/ot),x.set(ee+1,E,(-Be-nt*x.get(ee,E)-Re*x.get(ee,E-1))/ot)):(It=Go(-ze-Qt*x.get(ee,E-1),-xe-Qt*x.get(ee,E),Ne,Re),x.set(ee+1,E-1,It[0]),x.set(ee+1,E,It[1]))),pn=Math.max(Math.abs(x.get(ee,E-1)),Math.abs(x.get(ee,E))),H*pn*pn>1)for(Ve=ee;Ve<=E;Ve++)x.set(Ve,E-1,x.get(Ve,E-1)/pn),x.set(Ve,E,x.get(Ve,E)/pn)}for(ee=0;ee<D;ee++)if(ee<j||ee>V)for(Ve=ee;Ve<D;Ve++)m.set(ee,Ve,x.get(ee,Ve));for(Ve=D-1;Ve>=j;Ve--)for(ee=j;ee<=V;ee++){for(Ne=0,Ke=j;Ke<=Math.min(Ve,V);Ke++)Ne=Ne+m.get(ee,Ke)*x.get(Ke,Ve);m.set(ee,Ve,Ne)}}}function Go(D,w,_,m){let x,E;return Math.abs(_)>Math.abs(m)?(x=m/_,E=_+x*m,[(D+x*w)/E,(w-x*D)/E]):(x=_/m,E=m+x*_,[(x*D+w)/E,(x*w-D)/E])}class Zc{constructor(w){if(w=ln.checkMatrix(w),!w.isSymmetric())throw new Error("Matrix is not symmetric");let _=w,m=_.rows,x=new ge(m,m),E=!0,j,V,H;for(V=0;V<m;V++){let q=0;for(H=0;H<V;H++){let fe=0;for(j=0;j<H;j++)fe+=x.get(H,j)*x.get(V,j);fe=(_.get(V,H)-fe)/x.get(H,H),x.set(V,H,fe),q=q+fe*fe}for(q=_.get(V,V)-q,E&&(E=q>0),x.set(V,V,Math.sqrt(Math.max(q,0))),H=V+1;H<m;H++)x.set(V,H,0)}this.L=x,this.positiveDefinite=E}isPositiveDefinite(){return this.positiveDefinite}solve(w){w=ln.checkMatrix(w);let _=this.L,m=_.rows;if(w.rows!==m)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let x=w.columns,E=w.clone(),j,V,H;for(H=0;H<m;H++)for(V=0;V<x;V++){for(j=0;j<H;j++)E.set(H,V,E.get(H,V)-E.get(j,V)*_.get(H,j));E.set(H,V,E.get(H,V)/_.get(H,H))}for(H=m-1;H>=0;H--)for(V=0;V<x;V++){for(j=H+1;j<m;j++)E.set(H,V,E.get(H,V)-E.get(j,V)*_.get(j,H));E.set(H,V,E.get(H,V)/_.get(H,H))}return E}get lowerTriangularMatrix(){return this.L}}class nl{constructor(w,_={}){w=ln.checkMatrix(w);let{Y:m}=_;const{scaleScores:x=!1,maxIterations:E=1e3,terminationCriteria:j=1e-10}=_;let V;if(m){if(t.isAnyArray(m)&&typeof m[0]=="number"?m=ge.columnVector(m):m=ln.checkMatrix(m),m.rows!==w.rows)throw new Error("Y should have the same number of rows as X");V=m.getColumnVector(0)}else V=w.getColumnVector(0);let H=1,q,fe,J,Re;for(let ze=0;ze<E&&H>j;ze++)J=w.transpose().mmul(V).div(V.transpose().mmul(V).get(0,0)),J=J.div(J.norm()),q=w.mmul(J).div(J.transpose().mmul(J).get(0,0)),ze>0&&(H=q.clone().sub(Re).pow(2).sum()),Re=q.clone(),m?(fe=m.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0)),fe=fe.div(fe.norm()),V=m.mmul(fe).div(fe.transpose().mmul(fe).get(0,0))):V=q;if(m){let ze=w.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0));ze=ze.div(ze.norm());let xe=w.clone().sub(q.clone().mmul(ze.transpose())),Ne=V.transpose().mmul(q).div(q.transpose().mmul(q).get(0,0)),qe=m.clone().sub(q.clone().mulS(Ne.get(0,0)).mmul(fe.transpose()));this.t=q,this.p=ze.transpose(),this.w=J.transpose(),this.q=fe,this.u=V,this.s=q.transpose().mmul(q),this.xResidual=xe,this.yResidual=qe,this.betas=Ne}else this.w=J.transpose(),this.s=q.transpose().mmul(q).sqrt(),x?this.t=q.clone().div(this.s.get(0,0)):this.t=q,this.xResidual=w.sub(q.mmul(J.transpose()))}}return Et.AbstractMatrix=Ae,Et.CHO=Zc,Et.CholeskyDecomposition=Zc,Et.DistanceMatrix=ke,Et.EVD=qr,Et.EigenvalueDecomposition=qr,Et.LU=lr,Et.LuDecomposition=lr,Et.Matrix=ge,Et.MatrixColumnSelectionView=Ze,Et.MatrixColumnView=tt,Et.MatrixFlipColumnView=it,Et.MatrixFlipRowView=ct,Et.MatrixRowSelectionView=qt,Et.MatrixRowView=bt,Et.MatrixSelectionView=In,Et.MatrixSubView=ar,Et.MatrixTransposeView=bn,Et.NIPALS=nl,Et.Nipals=nl,Et.QR=Xi,Et.QrDecomposition=Xi,Et.SVD=Yi,Et.SingularValueDecomposition=Yi,Et.SymmetricMatrix=Oe,Et.WrapperMatrix1D=Sn,Et.WrapperMatrix2D=ln,Et.correlation=mr,Et.covariance=Ri,Et.default=ge,Et.determinant=Le,Et.inverse=Qc,Et.linearDependencies=zt,Et.pseudoInverse=Ar,Et.solve=Me,Et.wrap=ys,Et}var cx=XK();const h3=Hf(cx),YK=cx.Matrix;h3.Matrix?h3.Matrix:cx.Matrix;const Wb={function:[59,130,246],method_definition:[16,185,129],arrow_function:[245,158,11],react_component:[236,72,153],unknown:[156,163,175]};function KK(){var d;const[t,e]=I.useState(!0),[n,r]=I.useState([]),[i,s]=I.useState({nodes:[],edges:[]}),[a,c]=I.useState(null),u=async()=>{e(!0);try{const[g,b]=await Promise.all([fetch("http://localhost:3333/api/semantic-chunks"),fetch("http://localhost:3333/api/vector-db/network")]);if(g.ok&&b.ok){const S=await g.json(),R=await b.json(),A=S.chunks.filter(C=>C.embedding);if(A.length>1){const C=new YK(A.map(M=>M.embedding)),{V:k}=C.subRowVector(C.mean("column")).svd(),P=C.mmul(k.getColumn(0).augment(k.getColumn(1)));r(A.map((M,z)=>({...M,x:P.get(z,0),y:P.get(z,1)})))}s(R)}}catch(g){console.error("Failed to fetch semantic data:",g)}finally{e(!1)}};I.useEffect(()=>{u()},[]);const h=()=>[new lx({id:"semantic-points",data:n,getPosition:g=>[g.x*10,g.y*10],getRadius:g=>{var b;return Math.max(2,(((b=g.complexity)==null?void 0:b.score)||1)*.5)},getFillColor:g=>Wb[g.semanticType]||Wb.unknown,pickable:!0,onHover:g=>c(g.object?{object:g.object,x:g.x,y:g.y}:null)})];return v.jsxs("div",{className:"w-full space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-lg font-thin tracking-tight flex items-center gap-2",children:[v.jsx(M2,{className:"w-4 h-4 text-vesper-accent"}),"Semantic Landscape"]}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Visualizing the code's conceptual clusters"})]}),v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs(Nn,{variant:"outline",className:"border-vesper font-thin text-[10px] uppercase tracking-widest",children:[v.jsx(dR,{className:"w-3 h-3 mr-1"}),"SQLite Persistence Active"]})})]}),v.jsx(on,{className:"border-vesper bg-vesper-card overflow-hidden",children:v.jsxs("div",{className:"relative w-full h-[500px]",children:[v.jsx(OK,{initialViewState:{longitude:0,latitude:0,zoom:5},controller:!0,layers:h(),width:"100%",height:"100%"}),a&&v.jsxs("div",{className:"absolute z-50 bg-background/95 border border-vesper p-3 rounded shadow-xl pointer-events-none",style:{left:a.x+10,top:a.y+10},children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx(uv,{className:"w-3 h-3 text-vesper-accent"}),v.jsx("span",{className:"text-xs font-bold color-vesper-fg",children:a.object.name})]}),v.jsx("div",{className:"text-[10px] color-vesper-muted mono mb-2",children:a.object.filePath}),v.jsx("div",{className:"text-[11px] color-vesper-fg line-clamp-2 max-w-[250px]",children:a.object.purpose}),v.jsxs("div",{className:"mt-2 flex gap-2",children:[v.jsx(Nn,{variant:"outline",className:"text-[9px] border-vesper",children:a.object.semanticType}),v.jsxs(Nn,{variant:"outline",className:"text-[9px] border-vesper",children:["Complexity: ",(d=a.object.complexity)==null?void 0:d.score]})]})]}),t&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 backdrop-blur-sm",children:v.jsxs("div",{className:"flex flex-col items-center gap-2",children:[v.jsx(M2,{className:"w-8 h-8 animate-pulse text-vesper-accent"}),v.jsx("span",{className:"text-xs font-thin tracking-widest uppercase",children:"Projecting Intelligence..."})]})})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(Wb).map(([g,b])=>v.jsxs("div",{className:"flex items-center gap-2 p-2 border border-vesper rounded bg-vesper-card/50",children:[v.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:`rgb(${b.join(",")})`}}),v.jsx("span",{className:"text-[10px] uppercase tracking-widest font-thin",children:g.replace("_"," ")})]},g))})]})}var ux="Progress",fx=100,[QK,sre]=Ka(ux),[ZK,GK]=QK(ux),zN=I.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=JK,...a}=t;(i||i===0)&&!d3(i)&&console.error(eQ(`${i}`,"Progress"));const c=d3(i)?i:fx;r!==null&&!p3(r,c)&&console.error(tQ(`${r}`,"Progress"));const u=p3(r,c)?r:null,h=Kp(u)?s(u,c):void 0;return v.jsx(ZK,{scope:n,value:u,max:c,children:v.jsx(Ot.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Kp(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":HN(u,c),"data-value":u??void 0,"data-max":c,...a,ref:e})})});zN.displayName=ux;var VN="ProgressIndicator",$N=I.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=GK(VN,n);return v.jsx(Ot.div,{"data-state":HN(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});$N.displayName=VN;function JK(t,e){return`${Math.round(t/e*100)}%`}function HN(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Kp(t){return typeof t=="number"}function d3(t){return Kp(t)&&!isNaN(t)&&t>0}function p3(t,e){return Kp(t)&&!isNaN(t)&&t<=e&&t>=0}function eQ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fx}\`.`}function tQ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var WN=zN,nQ=$N;const P0=I.forwardRef(({className:t,value:e,...n},r)=>v.jsx(WN,{ref:r,className:Kt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:v.jsx(nQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));P0.displayName=WN.displayName;function rQ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const iQ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sQ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oQ={};function g3(t,e){return(oQ.jsx?sQ:iQ).test(t)}const aQ=/[ \t\n\f\r]/g;function lQ(t){return typeof t=="object"?t.type==="text"?m3(t.value):!1:m3(t)}function m3(t){return t.replace(aQ,"")===""}class th{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}th.prototype.normal={};th.prototype.property={};th.prototype.space=void 0;function qN(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new th(n,r,e)}function D0(t){return t.toLowerCase()}class Wr{constructor(e,n){this.attribute=n,this.property=e}}Wr.prototype.attribute="";Wr.prototype.booleanish=!1;Wr.prototype.boolean=!1;Wr.prototype.commaOrSpaceSeparated=!1;Wr.prototype.commaSeparated=!1;Wr.prototype.defined=!1;Wr.prototype.mustUseProperty=!1;Wr.prototype.number=!1;Wr.prototype.overloadedBoolean=!1;Wr.prototype.property="";Wr.prototype.spaceSeparated=!1;Wr.prototype.space=void 0;let cQ=0;const St=tl(),Vn=tl(),F0=tl(),He=tl(),mn=tl(),hc=tl(),ri=tl();function tl(){return 2**++cQ}const B0=Object.freeze(Object.defineProperty({__proto__:null,boolean:St,booleanish:Vn,commaOrSpaceSeparated:ri,commaSeparated:hc,number:He,overloadedBoolean:F0,spaceSeparated:mn},Symbol.toStringTag,{value:"Module"})),qb=Object.keys(B0);class hx extends Wr{constructor(e,n,r,i){let s=-1;if(super(e,n),y3(this,"space",i),typeof r=="number")for(;++s<qb.length;){const a=qb[s];y3(this,qb[s],(r&B0[a])===B0[a])}}}hx.prototype.defined=!0;function y3(t,e,n){n&&(t[e]=n)}function Yc(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new hx(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[D0(r)]=r,n[D0(s.attribute)]=r}return new th(e,n,t.space)}const XN=Yc({properties:{ariaActiveDescendant:null,ariaAtomic:Vn,ariaAutoComplete:null,ariaBusy:Vn,ariaChecked:Vn,ariaColCount:He,ariaColIndex:He,ariaColSpan:He,ariaControls:mn,ariaCurrent:null,ariaDescribedBy:mn,ariaDetails:null,ariaDisabled:Vn,ariaDropEffect:mn,ariaErrorMessage:null,ariaExpanded:Vn,ariaFlowTo:mn,ariaGrabbed:Vn,ariaHasPopup:null,ariaHidden:Vn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mn,ariaLevel:He,ariaLive:null,ariaModal:Vn,ariaMultiLine:Vn,ariaMultiSelectable:Vn,ariaOrientation:null,ariaOwns:mn,ariaPlaceholder:null,ariaPosInSet:He,ariaPressed:Vn,ariaReadOnly:Vn,ariaRelevant:null,ariaRequired:Vn,ariaRoleDescription:mn,ariaRowCount:He,ariaRowIndex:He,ariaRowSpan:He,ariaSelected:Vn,ariaSetSize:He,ariaSort:null,ariaValueMax:He,ariaValueMin:He,ariaValueNow:He,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function YN(t,e){return e in t?t[e]:e}function KN(t,e){return YN(t,e.toLowerCase())}const uQ=Yc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:hc,acceptCharset:mn,accessKey:mn,action:null,allow:null,allowFullScreen:St,allowPaymentRequest:St,allowUserMedia:St,alt:null,as:null,async:St,autoCapitalize:null,autoComplete:mn,autoFocus:St,autoPlay:St,blocking:mn,capture:null,charSet:null,checked:St,cite:null,className:mn,cols:He,colSpan:null,content:null,contentEditable:Vn,controls:St,controlsList:mn,coords:He|hc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:St,defer:St,dir:null,dirName:null,disabled:St,download:F0,draggable:Vn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:St,formTarget:null,headers:mn,height:He,hidden:F0,high:He,href:null,hrefLang:null,htmlFor:mn,httpEquiv:mn,id:null,imageSizes:null,imageSrcSet:null,inert:St,inputMode:null,integrity:null,is:null,isMap:St,itemId:null,itemProp:mn,itemRef:mn,itemScope:St,itemType:mn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:St,low:He,manifest:null,max:null,maxLength:He,media:null,method:null,min:null,minLength:He,multiple:St,muted:St,name:null,nonce:null,noModule:St,noValidate:St,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:St,optimum:He,pattern:null,ping:mn,placeholder:null,playsInline:St,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:St,referrerPolicy:null,rel:mn,required:St,reversed:St,rows:He,rowSpan:He,sandbox:mn,scope:null,scoped:St,seamless:St,selected:St,shadowRootClonable:St,shadowRootDelegatesFocus:St,shadowRootMode:null,shape:null,size:He,sizes:null,slot:null,span:He,spellCheck:Vn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:He,step:null,style:null,tabIndex:He,target:null,title:null,translate:null,type:null,typeMustMatch:St,useMap:null,value:Vn,width:He,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mn,axis:null,background:null,bgColor:null,border:He,borderColor:null,bottomMargin:He,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:St,declare:St,event:null,face:null,frame:null,frameBorder:null,hSpace:He,leftMargin:He,link:null,longDesc:null,lowSrc:null,marginHeight:He,marginWidth:He,noResize:St,noHref:St,noShade:St,noWrap:St,object:null,profile:null,prompt:null,rev:null,rightMargin:He,rules:null,scheme:null,scrolling:Vn,standby:null,summary:null,text:null,topMargin:He,valueType:null,version:null,vAlign:null,vLink:null,vSpace:He,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:St,disableRemotePlayback:St,prefix:null,property:null,results:He,security:null,unselectable:null},space:"html",transform:KN}),fQ=Yc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ri,accentHeight:He,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:He,amplitude:He,arabicForm:null,ascent:He,attributeName:null,attributeType:null,azimuth:He,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:He,by:null,calcMode:null,capHeight:He,className:mn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:He,diffuseConstant:He,direction:null,display:null,dur:null,divisor:He,dominantBaseline:null,download:St,dx:null,dy:null,edgeMode:null,editable:null,elevation:He,enableBackground:null,end:null,event:null,exponent:He,externalResourcesRequired:null,fill:null,fillOpacity:He,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:hc,g2:hc,glyphName:hc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:He,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:He,horizOriginX:He,horizOriginY:He,id:null,ideographic:He,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:He,k:He,k1:He,k2:He,k3:He,k4:He,kernelMatrix:ri,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:He,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:He,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:He,overlineThickness:He,paintOrder:null,panose1:null,path:null,pathLength:He,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:He,pointsAtY:He,pointsAtZ:He,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ri,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ri,rev:ri,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ri,requiredFeatures:ri,requiredFonts:ri,requiredFormats:ri,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:He,specularExponent:He,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:He,strikethroughThickness:He,string:null,stroke:null,strokeDashArray:ri,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:He,strokeOpacity:He,strokeWidth:null,style:null,surfaceScale:He,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ri,tabIndex:He,tableValues:null,target:null,targetX:He,targetY:He,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ri,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:He,underlineThickness:He,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:He,values:null,vAlphabetic:He,vMathematical:He,vectorEffect:null,vHanging:He,vIdeographic:He,version:null,vertAdvY:He,vertOriginX:He,vertOriginY:He,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:He,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:YN}),QN=Yc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),ZN=Yc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:KN}),GN=Yc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),hQ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dQ=/[A-Z]/g,b3=/-[a-z]/g,pQ=/^data[-\w.:]+$/i;function gQ(t,e){const n=D0(e);let r=e,i=Wr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pQ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(b3,yQ);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!b3.test(s)){let a=s.replace(dQ,mQ);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=hx}return new i(r,e)}function mQ(t){return"-"+t.toLowerCase()}function yQ(t){return t.charAt(1).toUpperCase()}const bQ=qN([XN,uQ,QN,ZN,GN],"html"),dx=qN([XN,fQ,QN,ZN,GN],"svg");function _Q(t){return t.join(" ").trim()}var Yl={},Xb,_3;function vQ(){if(_3)return Xb;_3=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,c=/^\s+|\s+$/g,u=`
`,h="/",d="*",g="",b="comment",S="declaration";Xb=function(A,C){if(typeof A!="string")throw new TypeError("First argument must be a string");if(!A)return[];C=C||{};var k=1,P=1;function M(_e){var re=_e.match(e);re&&(k+=re.length);var Te=_e.lastIndexOf(u);P=~Te?_e.length-Te:P+_e.length}function z(){var _e={line:k,column:P};return function(re){return re.position=new $(_e),Q(),re}}function $(_e){this.start=_e,this.end={line:k,column:P},this.source=C.source}$.prototype.content=A;function F(_e){var re=new Error(C.source+":"+k+":"+P+": "+_e);if(re.reason=_e,re.filename=C.source,re.line=k,re.column=P,re.source=A,!C.silent)throw re}function Z(_e){var re=_e.exec(A);if(re){var Te=re[0];return M(Te),A=A.slice(Te.length),re}}function Q(){Z(n)}function ue(_e){var re;for(_e=_e||[];re=Y();)re!==!1&&_e.push(re);return _e}function Y(){var _e=z();if(!(h!=A.charAt(0)||d!=A.charAt(1))){for(var re=2;g!=A.charAt(re)&&(d!=A.charAt(re)||h!=A.charAt(re+1));)++re;if(re+=2,g===A.charAt(re-1))return F("End of comment missing");var Te=A.slice(2,re-2);return P+=2,M(Te),A=A.slice(re),P+=2,_e({type:b,comment:Te})}}function K(){var _e=z(),re=Z(r);if(re){if(Y(),!Z(i))return F("property missing ':'");var Te=Z(s),ne=_e({type:S,property:R(re[0].replace(t,g)),value:Te?R(Te[0].replace(t,g)):g});return Z(a),ne}}function ie(){var _e=[];ue(_e);for(var re;re=K();)re!==!1&&(_e.push(re),ue(_e));return _e}return Q(),ie()};function R(A){return A?A.replace(c,g):g}return Xb}var v3;function xQ(){if(v3)return Yl;v3=1;var t=Yl&&Yl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.default=n;var e=t(vQ());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var a=(0,e.default)(r),c=typeof i=="function";return a.forEach(function(u){if(u.type==="declaration"){var h=u.property,d=u.value;c?i(h,d,u):d&&(s=s||{},s[h]=d)}}),s}return Yl}var Ju={},x3;function wQ(){if(x3)return Ju;x3=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(h){return!h||n.test(h)||t.test(h)},a=function(h,d){return d.toUpperCase()},c=function(h,d){return"".concat(d,"-")},u=function(h,d){return d===void 0&&(d={}),s(h)?h:(h=h.toLowerCase(),d.reactCompat?h=h.replace(i,c):h=h.replace(r,c),h.replace(e,a))};return Ju.camelCase=u,Ju}var ef,w3;function SQ(){if(w3)return ef;w3=1;var t=ef&&ef.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(xQ()),n=wQ();function r(i,s){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(c,u){c&&u&&(a[(0,n.camelCase)(c,s)]=u)}),a}return r.default=r,ef=r,ef}var TQ=SQ();const EQ=Hf(TQ),JN=eI("end"),px=eI("start");function eI(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function AQ(t){const e=px(t),n=JN(t);if(e&&n)return{start:e,end:n}}function wf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?S3(t.position):"start"in t||"end"in t?S3(t):"line"in t||"column"in t?j0(t):""}function j0(t){return T3(t&&t.line)+":"+T3(t&&t.column)}function S3(t){return j0(t&&t.start)+"-"+j0(t&&t.end)}function T3(t){return t&&typeof t=="number"?t:1}class Er extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=c?c.line:void 0,this.name=wf(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Er.prototype.file="";Er.prototype.name="";Er.prototype.reason="";Er.prototype.message="";Er.prototype.stack="";Er.prototype.column=void 0;Er.prototype.line=void 0;Er.prototype.ancestors=void 0;Er.prototype.cause=void 0;Er.prototype.fatal=void 0;Er.prototype.place=void 0;Er.prototype.ruleId=void 0;Er.prototype.source=void 0;const gx={}.hasOwnProperty,RQ=new Map,CQ=/[A-Z]/g,kQ=new Set(["table","tbody","thead","tfoot","tr"]),MQ=new Set(["td","th"]),tI="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function NQ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=UQ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=jQ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?dx:bQ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=nI(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function nI(t,e,n){if(e.type==="element")return IQ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return OQ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return DQ(t,e,n);if(e.type==="mdxjsEsm")return PQ(t,e);if(e.type==="root")return FQ(t,e,n);if(e.type==="text")return BQ(t,e)}function IQ(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=dx,t.schema=i),t.ancestors.push(e);const s=iI(t,e.tagName,!1),a=LQ(t,e);let c=yx(t,e);return kQ.has(e.tagName)&&(c=c.filter(function(u){return typeof u=="string"?!lQ(u):!0})),rI(t,a,s,e),mx(a,c),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function OQ(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}jf(t,e.position)}function PQ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);jf(t,e.position)}function DQ(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=dx,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:iI(t,e.name,!0),a=zQ(t,e),c=yx(t,e);return rI(t,a,s,e),mx(a,c),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function FQ(t,e,n){const r={};return mx(r,yx(t,e)),t.create(e,t.Fragment,r,n)}function BQ(t,e){return e.value}function rI(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function mx(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function jQ(t,e,n){return r;function r(i,s,a,c){const h=Array.isArray(a.children)?n:e;return c?h(s,a,c):h(s,a)}}function UQ(t,e){return n;function n(r,i,s,a){const c=Array.isArray(s.children),u=px(r);return e(i,s,a,c,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function LQ(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&gx.call(e.properties,i)){const s=VQ(t,i,e.properties[i]);if(s){const[a,c]=s;t.tableCellAlignToStyle&&a==="align"&&typeof c=="string"&&MQ.has(e.tagName)?r=c:n[a]=c}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function zQ(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const c=a.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else jf(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,s=t.evaluater.evaluateExpression(c.expression)}else jf(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function yx(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:RQ;for(;++r<e.children.length;){const s=e.children[r];let a;if(t.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const h=i.get(u)||0;a=u+"-"+h,i.set(u,h+1)}}const c=nI(t,s,a);c!==void 0&&n.push(c)}return n}function VQ(t,e,n){const r=gQ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?rQ(n):_Q(n)),r.property==="style"){let i=typeof n=="object"?n:$Q(t,String(n));return t.stylePropertyNameCase==="css"&&(i=HQ(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?hQ[r.property]||r.property:r.attribute,n]}}function $Q(t,e){try{return EQ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Er("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=tI+"#cannot-parse-style-attribute",i}}function iI(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,a;for(;++s<i.length;){const c=g3(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:c,computed:!!(s&&c.type==="Literal"),optional:!1}:c}r=a}else r=g3(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return gx.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);jf(t)}function jf(t,e){const n=new Er("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=tI+"#cannot-handle-mdx-estrees-without-createevaluater",n}function HQ(t){const e={};let n;for(n in t)gx.call(t,n)&&(e[WQ(n)]=t[n]);return e}function WQ(t){let e=t.replace(CQ,qQ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function qQ(t){return"-"+t.toLowerCase()}const Yb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},XQ={};function bx(t,e){const n=XQ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sI(t,r,i)}function sI(t,e,n){if(YQ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return E3(t.children,e,n)}return Array.isArray(t)?E3(t,e,n):""}function E3(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=sI(t[i],e,n);return r.join("")}function YQ(t){return!!(t&&typeof t=="object")}const A3=document.createElement("i");function _x(t){const e="&"+t+";";A3.innerHTML=e;const n=A3.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ui(t,e,n,r){const i=t.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function _i(t,e){return t.length>0?(ui(t,t.length,0,e),t):e}const R3={}.hasOwnProperty;function oI(t){const e={};let n=-1;for(;++n<t.length;)KQ(e,t[n]);return e}function KQ(t,e){let n;for(n in e){const i=(R3.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){R3.call(i,a)||(i[a]=[]);const c=s[a];QQ(i[a],Array.isArray(c)?c:c?[c]:[])}}}function QQ(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ui(t,0,0,r)}function aI(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Vi(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Dr=Zo(/[A-Za-z]/),Tr=Zo(/[\dA-Za-z]/),ZQ=Zo(/[#-'*+\--9=?A-Z^-~]/);function Qp(t){return t!==null&&(t<32||t===127)}const U0=Zo(/\d/),GQ=Zo(/[\dA-Fa-f]/),JQ=Zo(/[!-/:-@[-`{-~]/);function ft(t){return t!==null&&t<-2}function dn(t){return t!==null&&(t<0||t===32)}function Nt(t){return t===-2||t===-1||t===32}const Dg=Zo(new RegExp("\\p{P}|\\p{S}","u")),Ya=Zo(/\s/);function Zo(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Kc(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&Tr(t.charCodeAt(n+1))&&Tr(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const c=t.charCodeAt(n+1);s<56320&&c>56319&&c<57344?(a=String.fromCharCode(s,c),i=1):a=""}else a=String.fromCharCode(s);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Ft(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(u){return Nt(u)?(t.enter(n),c(u)):e(u)}function c(u){return Nt(u)&&s++<i?(t.consume(u),c):(t.exit(n),e(u))}}const eZ={tokenize:tZ};function tZ(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Ft(t,e,"linePrefix")}function i(c){return t.enter("paragraph"),s(c)}function s(c){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(c)}function a(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return ft(c)?(t.consume(c),t.exit("chunkText"),s):(t.consume(c),a)}}const nZ={tokenize:rZ},C3={tokenize:iZ};function rZ(t){const e=this,n=[];let r=0,i,s,a;return c;function c(M){if(r<n.length){const z=n[r];return e.containerState=z[1],t.attempt(z[0].continuation,u,h)(M)}return h(M)}function u(M){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&P();const z=e.events.length;let $=z,F;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){F=e.events[$][1].end;break}k(r);let Z=z;for(;Z<e.events.length;)e.events[Z][1].end={...F},Z++;return ui(e.events,$+1,0,e.events.slice(z)),e.events.length=Z,h(M)}return c(M)}function h(M){if(r===n.length){if(!i)return b(M);if(i.currentConstruct&&i.currentConstruct.concrete)return R(M);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(C3,d,g)(M)}function d(M){return i&&P(),k(r),b(M)}function g(M){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,R(M)}function b(M){return e.containerState={},t.attempt(C3,S,R)(M)}function S(M){return r++,n.push([e.currentConstruct,e.containerState]),b(M)}function R(M){if(M===null){i&&P(),k(0),t.consume(M);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),A(M)}function A(M){if(M===null){C(t.exit("chunkFlow"),!0),k(0),t.consume(M);return}return ft(M)?(t.consume(M),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(M),A)}function C(M,z){const $=e.sliceStream(M);if(z&&$.push(null),M.previous=s,s&&(s.next=M),s=M,i.defineSkip(M.start),i.write($),e.parser.lazy[M.start.line]){let F=i.events.length;for(;F--;)if(i.events[F][1].start.offset<a&&(!i.events[F][1].end||i.events[F][1].end.offset>a))return;const Z=e.events.length;let Q=Z,ue,Y;for(;Q--;)if(e.events[Q][0]==="exit"&&e.events[Q][1].type==="chunkFlow"){if(ue){Y=e.events[Q][1].end;break}ue=!0}for(k(r),F=Z;F<e.events.length;)e.events[F][1].end={...Y},F++;ui(e.events,Q+1,0,e.events.slice(Z)),e.events.length=F}}function k(M){let z=n.length;for(;z-- >M;){const $=n[z];e.containerState=$[1],$[0].exit.call(e,t)}n.length=M}function P(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function iZ(t,e,n){return Ft(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function jc(t){if(t===null||dn(t)||Ya(t))return 1;if(Dg(t))return 2}function Fg(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const L0={name:"attention",resolveAll:sZ,tokenize:oZ};function sZ(t,e){let n=-1,r,i,s,a,c,u,h,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[r][1].end},b={...t[n][1].start};k3(g,-u),k3(b,u),a={type:u>1?"strongSequence":"emphasisSequence",start:g,end:{...t[r][1].end}},c={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},s={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...a.start},end:{...c.end}},t[r][1].end={...a.start},t[n][1].start={...c.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=_i(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=_i(h,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),h=_i(h,Fg(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=_i(h,[["exit",s,e],["enter",c,e],["exit",c,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,h=_i(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,ui(t,r-1,n-r+3,h),n=r+h.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function oZ(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=jc(r);let s;return a;function a(u){return s=u,t.enter("attentionSequence"),c(u)}function c(u){if(u===s)return t.consume(u),c;const h=t.exit("attentionSequence"),d=jc(u),g=!d||d===2&&i||n.includes(u),b=!i||i===2&&d||n.includes(r);return h._open=!!(s===42?g:g&&(i||!b)),h._close=!!(s===42?b:b&&(d||!g)),e(u)}}function k3(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const aZ={name:"autolink",tokenize:lZ};function lZ(t,e,n){let r=0;return i;function i(S){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(S){return Dr(S)?(t.consume(S),a):S===64?n(S):h(S)}function a(S){return S===43||S===45||S===46||Tr(S)?(r=1,c(S)):h(S)}function c(S){return S===58?(t.consume(S),r=0,u):(S===43||S===45||S===46||Tr(S))&&r++<32?(t.consume(S),c):(r=0,h(S))}function u(S){return S===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):S===null||S===32||S===60||Qp(S)?n(S):(t.consume(S),u)}function h(S){return S===64?(t.consume(S),d):ZQ(S)?(t.consume(S),h):n(S)}function d(S){return Tr(S)?g(S):n(S)}function g(S){return S===46?(t.consume(S),r=0,d):S===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):b(S)}function b(S){if((S===45||Tr(S))&&r++<63){const R=S===45?b:g;return t.consume(S),R}return n(S)}}const nh={partial:!0,tokenize:cZ};function cZ(t,e,n){return r;function r(s){return Nt(s)?Ft(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ft(s)?e(s):n(s)}}const lI={continuation:{tokenize:fZ},exit:hZ,name:"blockQuote",tokenize:uZ};function uZ(t,e,n){const r=this;return i;function i(a){if(a===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Nt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function fZ(t,e,n){const r=this;return i;function i(a){return Nt(a)?Ft(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(lI,e,n)(a)}}function hZ(t){t.exit("blockQuote")}const cI={name:"characterEscape",tokenize:dZ};function dZ(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return JQ(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const uI={name:"characterReference",tokenize:pZ};function pZ(t,e,n){const r=this;let i=0,s,a;return c;function c(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),u}function u(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,a=Tr,d(g))}function h(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=GQ,d):(t.enter("characterReferenceValue"),s=7,a=U0,d(g))}function d(g){if(g===59&&i){const b=t.exit("characterReferenceValue");return a===Tr&&!_x(r.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(g)&&i++<s?(t.consume(g),d):n(g)}}const M3={partial:!0,tokenize:mZ},N3={concrete:!0,name:"codeFenced",tokenize:gZ};function gZ(t,e,n){const r=this,i={partial:!0,tokenize:$};let s=0,a=0,c;return u;function u(F){return h(F)}function h(F){const Z=r.events[r.events.length-1];return s=Z&&Z[1].type==="linePrefix"?Z[2].sliceSerialize(Z[1],!0).length:0,c=F,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(F)}function d(F){return F===c?(a++,t.consume(F),d):a<3?n(F):(t.exit("codeFencedFenceSequence"),Nt(F)?Ft(t,g,"whitespace")(F):g(F))}function g(F){return F===null||ft(F)?(t.exit("codeFencedFence"),r.interrupt?e(F):t.check(M3,A,z)(F)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(F))}function b(F){return F===null||ft(F)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(F)):Nt(F)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ft(t,S,"whitespace")(F)):F===96&&F===c?n(F):(t.consume(F),b)}function S(F){return F===null||ft(F)?g(F):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),R(F))}function R(F){return F===null||ft(F)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(F)):F===96&&F===c?n(F):(t.consume(F),R)}function A(F){return t.attempt(i,z,C)(F)}function C(F){return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),k}function k(F){return s>0&&Nt(F)?Ft(t,P,"linePrefix",s+1)(F):P(F)}function P(F){return F===null||ft(F)?t.check(M3,A,z)(F):(t.enter("codeFlowValue"),M(F))}function M(F){return F===null||ft(F)?(t.exit("codeFlowValue"),P(F)):(t.consume(F),M)}function z(F){return t.exit("codeFenced"),e(F)}function $(F,Z,Q){let ue=0;return Y;function Y(Te){return F.enter("lineEnding"),F.consume(Te),F.exit("lineEnding"),K}function K(Te){return F.enter("codeFencedFence"),Nt(Te)?Ft(F,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Te):ie(Te)}function ie(Te){return Te===c?(F.enter("codeFencedFenceSequence"),_e(Te)):Q(Te)}function _e(Te){return Te===c?(ue++,F.consume(Te),_e):ue>=a?(F.exit("codeFencedFenceSequence"),Nt(Te)?Ft(F,re,"whitespace")(Te):re(Te)):Q(Te)}function re(Te){return Te===null||ft(Te)?(F.exit("codeFencedFence"),Z(Te)):Q(Te)}}}function mZ(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Kb={name:"codeIndented",tokenize:bZ},yZ={partial:!0,tokenize:_Z};function bZ(t,e,n){const r=this;return i;function i(h){return t.enter("codeIndented"),Ft(t,s,"linePrefix",5)(h)}function s(h){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(h):n(h)}function a(h){return h===null?u(h):ft(h)?t.attempt(yZ,a,u)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||ft(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),c)}function u(h){return t.exit("codeIndented"),e(h)}}function _Z(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):ft(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):Ft(t,s,"linePrefix",5)(a)}function s(a){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(a):ft(a)?i(a):n(a)}}const vZ={name:"codeText",previous:wZ,resolve:xZ,tokenize:SZ};function xZ(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function wZ(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SZ(t,e,n){let r=0,i,s;return a;function a(g){return t.enter("codeText"),t.enter("codeTextSequence"),c(g)}function c(g){return g===96?(t.consume(g),r++,c):(t.exit("codeTextSequence"),u(g))}function u(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),u):g===96?(s=t.enter("codeTextSequence"),i=0,d(g)):ft(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||ft(g)?(t.exit("codeTextData"),u(g)):(t.consume(g),h)}function d(g){return g===96?(t.consume(g),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(g)):(s.type="codeTextData",h(g))}}class TZ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&tf(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),tf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),tf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);tf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);tf(this.left,n.reverse())}}}function tf(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function fI(t){const e={};let n=-1,r,i,s,a,c,u,h;const d=new TZ(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,EZ(d,n)),n=e[n],h=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},c=d.slice(i,n),c.unshift(r),d.splice(i,n-i+1,c))}}return ui(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function EZ(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const c=a.events,u=[],h={};let d,g,b=-1,S=n,R=0,A=0;const C=[A];for(;S;){for(;t.get(++i)[1]!==S;);s.push(i),S._tokenizer||(d=r.sliceStream(S),S.next||d.push(null),g&&a.defineSkip(S.start),S._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),S._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),g=S,S=S.next}for(S=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(A=b+1,C.push(A),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(a.events=[],S?(S._tokenizer=void 0,S.previous=void 0):C.pop(),b=C.length;b--;){const k=c.slice(C[b],C[b+1]),P=s.pop();u.push([P,P+k.length-1]),t.splice(P,2,k)}for(u.reverse(),b=-1;++b<u.length;)h[R+u[b][0]]=R+u[b][1],R+=u[b][1]-u[b][0]-1;return h}const AZ={resolve:CZ,tokenize:kZ},RZ={partial:!0,tokenize:MZ};function CZ(t){return fI(t),t}function kZ(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(c)}function i(c){return c===null?s(c):ft(c)?t.check(RZ,a,s)(c):(t.consume(c),i)}function s(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function a(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function MZ(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ft(t,s,"linePrefix")}function s(a){if(a===null||ft(a))return n(a);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function hI(t,e,n,r,i,s,a,c,u){const h=u||Number.POSITIVE_INFINITY;let d=0;return g;function g(k){return k===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(k),t.exit(s),b):k===null||k===32||k===41||Qp(k)?n(k):(t.enter(r),t.enter(a),t.enter(c),t.enter("chunkString",{contentType:"string"}),A(k))}function b(k){return k===62?(t.enter(s),t.consume(k),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),S(k))}function S(k){return k===62?(t.exit("chunkString"),t.exit(c),b(k)):k===null||k===60||ft(k)?n(k):(t.consume(k),k===92?R:S)}function R(k){return k===60||k===62||k===92?(t.consume(k),S):S(k)}function A(k){return!d&&(k===null||k===41||dn(k))?(t.exit("chunkString"),t.exit(c),t.exit(a),t.exit(r),e(k)):d<h&&k===40?(t.consume(k),d++,A):k===41?(t.consume(k),d--,A):k===null||k===32||k===40||Qp(k)?n(k):(t.consume(k),k===92?C:A)}function C(k){return k===40||k===41||k===92?(t.consume(k),A):A(k)}}function dI(t,e,n,r,i,s){const a=this;let c=0,u;return h;function h(S){return t.enter(r),t.enter(i),t.consume(S),t.exit(i),t.enter(s),d}function d(S){return c>999||S===null||S===91||S===93&&!u||S===94&&!c&&"_hiddenFootnoteSupport"in a.parser.constructs?n(S):S===93?(t.exit(s),t.enter(i),t.consume(S),t.exit(i),t.exit(r),e):ft(S)?(t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||S===91||S===93||ft(S)||c++>999?(t.exit("chunkString"),d(S)):(t.consume(S),u||(u=!Nt(S)),S===92?b:g)}function b(S){return S===91||S===92||S===93?(t.consume(S),c++,g):g(S)}}function pI(t,e,n,r,i,s){let a;return c;function c(b){return b===34||b===39||b===40?(t.enter(r),t.enter(i),t.consume(b),t.exit(i),a=b===40?41:b,u):n(b)}function u(b){return b===a?(t.enter(i),t.consume(b),t.exit(i),t.exit(r),e):(t.enter(s),h(b))}function h(b){return b===a?(t.exit(s),u(a)):b===null?n(b):ft(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),Ft(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(b))}function d(b){return b===a||b===null||ft(b)?(t.exit("chunkString"),h(b)):(t.consume(b),b===92?g:d)}function g(b){return b===a||b===92?(t.consume(b),d):d(b)}}function Sf(t,e){let n;return r;function r(i){return ft(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Nt(i)?Ft(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const NZ={name:"definition",tokenize:OZ},IZ={partial:!0,tokenize:PZ};function OZ(t,e,n){const r=this;let i;return s;function s(S){return t.enter("definition"),a(S)}function a(S){return dI.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function c(S){return i=Vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),u):n(S)}function u(S){return dn(S)?Sf(t,h)(S):h(S)}function h(S){return hI(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function d(S){return t.attempt(IZ,g,g)(S)}function g(S){return Nt(S)?Ft(t,b,"whitespace")(S):b(S)}function b(S){return S===null||ft(S)?(t.exit("definition"),r.parser.defined.push(i),e(S)):n(S)}}function PZ(t,e,n){return r;function r(c){return dn(c)?Sf(t,i)(c):n(c)}function i(c){return pI(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return Nt(c)?Ft(t,a,"whitespace")(c):a(c)}function a(c){return c===null||ft(c)?e(c):n(c)}}const DZ={name:"hardBreakEscape",tokenize:FZ};function FZ(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ft(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const BZ={name:"headingAtx",resolve:jZ,tokenize:UZ};function jZ(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ui(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function UZ(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(t.consume(d),a):d===null||dn(d)?(t.exit("atxHeadingSequence"),c(d)):n(d)}function c(d){return d===35?(t.enter("atxHeadingSequence"),u(d)):d===null||ft(d)?(t.exit("atxHeading"),e(d)):Nt(d)?Ft(t,c,"whitespace")(d):(t.enter("atxHeadingText"),h(d))}function u(d){return d===35?(t.consume(d),u):(t.exit("atxHeadingSequence"),c(d))}function h(d){return d===null||d===35||dn(d)?(t.exit("atxHeadingText"),c(d)):(t.consume(d),h)}}const LZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],I3=["pre","script","style","textarea"],zZ={concrete:!0,name:"htmlFlow",resolveTo:HZ,tokenize:WZ},VZ={partial:!0,tokenize:XZ},$Z={partial:!0,tokenize:qZ};function HZ(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function WZ(t,e,n){const r=this;let i,s,a,c,u;return h;function h(B){return d(B)}function d(B){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(B),g}function g(B){return B===33?(t.consume(B),b):B===47?(t.consume(B),s=!0,A):B===63?(t.consume(B),i=3,r.interrupt?e:O):Dr(B)?(t.consume(B),a=String.fromCharCode(B),C):n(B)}function b(B){return B===45?(t.consume(B),i=2,S):B===91?(t.consume(B),i=5,c=0,R):Dr(B)?(t.consume(B),i=4,r.interrupt?e:O):n(B)}function S(B){return B===45?(t.consume(B),r.interrupt?e:O):n(B)}function R(B){const Ce="CDATA[";return B===Ce.charCodeAt(c++)?(t.consume(B),c===Ce.length?r.interrupt?e:ie:R):n(B)}function A(B){return Dr(B)?(t.consume(B),a=String.fromCharCode(B),C):n(B)}function C(B){if(B===null||B===47||B===62||dn(B)){const Ce=B===47,ge=a.toLowerCase();return!Ce&&!s&&I3.includes(ge)?(i=1,r.interrupt?e(B):ie(B)):LZ.includes(a.toLowerCase())?(i=6,Ce?(t.consume(B),k):r.interrupt?e(B):ie(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?P(B):M(B))}return B===45||Tr(B)?(t.consume(B),a+=String.fromCharCode(B),C):n(B)}function k(B){return B===62?(t.consume(B),r.interrupt?e:ie):n(B)}function P(B){return Nt(B)?(t.consume(B),P):Y(B)}function M(B){return B===47?(t.consume(B),Y):B===58||B===95||Dr(B)?(t.consume(B),z):Nt(B)?(t.consume(B),M):Y(B)}function z(B){return B===45||B===46||B===58||B===95||Tr(B)?(t.consume(B),z):$(B)}function $(B){return B===61?(t.consume(B),F):Nt(B)?(t.consume(B),$):M(B)}function F(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),u=B,Z):Nt(B)?(t.consume(B),F):Q(B)}function Z(B){return B===u?(t.consume(B),u=null,ue):B===null||ft(B)?n(B):(t.consume(B),Z)}function Q(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||dn(B)?$(B):(t.consume(B),Q)}function ue(B){return B===47||B===62||Nt(B)?M(B):n(B)}function Y(B){return B===62?(t.consume(B),K):n(B)}function K(B){return B===null||ft(B)?ie(B):Nt(B)?(t.consume(B),K):n(B)}function ie(B){return B===45&&i===2?(t.consume(B),ne):B===60&&i===1?(t.consume(B),Se):B===62&&i===4?(t.consume(B),Ee):B===63&&i===3?(t.consume(B),O):B===93&&i===5?(t.consume(B),Xe):ft(B)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(VZ,Ae,_e)(B)):B===null||ft(B)?(t.exit("htmlFlowData"),_e(B)):(t.consume(B),ie)}function _e(B){return t.check($Z,re,Ae)(B)}function re(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),Te}function Te(B){return B===null||ft(B)?_e(B):(t.enter("htmlFlowData"),ie(B))}function ne(B){return B===45?(t.consume(B),O):ie(B)}function Se(B){return B===47?(t.consume(B),a="",pe):ie(B)}function pe(B){if(B===62){const Ce=a.toLowerCase();return I3.includes(Ce)?(t.consume(B),Ee):ie(B)}return Dr(B)&&a.length<8?(t.consume(B),a+=String.fromCharCode(B),pe):ie(B)}function Xe(B){return B===93?(t.consume(B),O):ie(B)}function O(B){return B===62?(t.consume(B),Ee):B===45&&i===2?(t.consume(B),O):ie(B)}function Ee(B){return B===null||ft(B)?(t.exit("htmlFlowData"),Ae(B)):(t.consume(B),Ee)}function Ae(B){return t.exit("htmlFlow"),e(B)}}function qZ(t,e,n){const r=this;return i;function i(a){return ft(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function XZ(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(nh,e,n)}}const YZ={name:"htmlText",tokenize:KZ};function KZ(t,e,n){const r=this;let i,s,a;return c;function c(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),u}function u(O){return O===33?(t.consume(O),h):O===47?(t.consume(O),$):O===63?(t.consume(O),M):Dr(O)?(t.consume(O),Q):n(O)}function h(O){return O===45?(t.consume(O),d):O===91?(t.consume(O),s=0,R):Dr(O)?(t.consume(O),P):n(O)}function d(O){return O===45?(t.consume(O),S):n(O)}function g(O){return O===null?n(O):O===45?(t.consume(O),b):ft(O)?(a=g,Se(O)):(t.consume(O),g)}function b(O){return O===45?(t.consume(O),S):g(O)}function S(O){return O===62?ne(O):O===45?b(O):g(O)}function R(O){const Ee="CDATA[";return O===Ee.charCodeAt(s++)?(t.consume(O),s===Ee.length?A:R):n(O)}function A(O){return O===null?n(O):O===93?(t.consume(O),C):ft(O)?(a=A,Se(O)):(t.consume(O),A)}function C(O){return O===93?(t.consume(O),k):A(O)}function k(O){return O===62?ne(O):O===93?(t.consume(O),k):A(O)}function P(O){return O===null||O===62?ne(O):ft(O)?(a=P,Se(O)):(t.consume(O),P)}function M(O){return O===null?n(O):O===63?(t.consume(O),z):ft(O)?(a=M,Se(O)):(t.consume(O),M)}function z(O){return O===62?ne(O):M(O)}function $(O){return Dr(O)?(t.consume(O),F):n(O)}function F(O){return O===45||Tr(O)?(t.consume(O),F):Z(O)}function Z(O){return ft(O)?(a=Z,Se(O)):Nt(O)?(t.consume(O),Z):ne(O)}function Q(O){return O===45||Tr(O)?(t.consume(O),Q):O===47||O===62||dn(O)?ue(O):n(O)}function ue(O){return O===47?(t.consume(O),ne):O===58||O===95||Dr(O)?(t.consume(O),Y):ft(O)?(a=ue,Se(O)):Nt(O)?(t.consume(O),ue):ne(O)}function Y(O){return O===45||O===46||O===58||O===95||Tr(O)?(t.consume(O),Y):K(O)}function K(O){return O===61?(t.consume(O),ie):ft(O)?(a=K,Se(O)):Nt(O)?(t.consume(O),K):ue(O)}function ie(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),i=O,_e):ft(O)?(a=ie,Se(O)):Nt(O)?(t.consume(O),ie):(t.consume(O),re)}function _e(O){return O===i?(t.consume(O),i=void 0,Te):O===null?n(O):ft(O)?(a=_e,Se(O)):(t.consume(O),_e)}function re(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||dn(O)?ue(O):(t.consume(O),re)}function Te(O){return O===47||O===62||dn(O)?ue(O):n(O)}function ne(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function Se(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),pe}function pe(O){return Nt(O)?Ft(t,Xe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):Xe(O)}function Xe(O){return t.enter("htmlTextData"),a(O)}}const vx={name:"labelEnd",resolveAll:JZ,resolveTo:eG,tokenize:tG},QZ={tokenize:nG},ZZ={tokenize:rG},GZ={tokenize:iG};function JZ(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ui(t,0,t.length,n),t}function eG(t,e){let n=t.length,r=0,i,s,a,c;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[a-2][1].start}};return c=[["enter",u,e],["enter",h,e]],c=_i(c,t.slice(s+1,s+r+3)),c=_i(c,[["enter",d,e]]),c=_i(c,Fg(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),c=_i(c,[["exit",d,e],t[a-2],t[a-1],["exit",h,e]]),c=_i(c,t.slice(a+1)),c=_i(c,[["exit",u,e]]),ui(t,s,t.length,c),t}function tG(t,e,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return c;function c(b){return s?s._inactive?g(b):(a=r.parser.defined.includes(Vi(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),u):n(b)}function u(b){return b===40?t.attempt(QZ,d,a?d:g)(b):b===91?t.attempt(ZZ,d,a?h:g)(b):a?d(b):g(b)}function h(b){return t.attempt(GZ,d,g)(b)}function d(b){return e(b)}function g(b){return s._balanced=!0,n(b)}}function nG(t,e,n){return r;function r(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),i}function i(g){return dn(g)?Sf(t,s)(g):s(g)}function s(g){return g===41?d(g):hI(t,a,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function a(g){return dn(g)?Sf(t,u)(g):d(g)}function c(g){return n(g)}function u(g){return g===34||g===39||g===40?pI(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):d(g)}function h(g){return dn(g)?Sf(t,d)(g):d(g)}function d(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),e):n(g)}}function rG(t,e,n){const r=this;return i;function i(c){return dI.call(r,t,s,a,"reference","referenceMarker","referenceString")(c)}function s(c){return r.parser.defined.includes(Vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function a(c){return n(c)}}function iG(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const sG={name:"labelStartImage",resolveAll:vx.resolveAll,tokenize:oG};function oG(t,e,n){const r=this;return i;function i(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),s}function s(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),a):n(c)}function a(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const aG={name:"labelStartLink",resolveAll:vx.resolveAll,tokenize:lG};function lG(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Qb={name:"lineEnding",tokenize:cG};function cG(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ft(t,e,"linePrefix")}}const op={name:"thematicBreak",tokenize:uG};function uG(t,e,n){let r=0,i;return s;function s(h){return t.enter("thematicBreak"),a(h)}function a(h){return i=h,c(h)}function c(h){return h===i?(t.enter("thematicBreakSequence"),u(h)):r>=3&&(h===null||ft(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===i?(t.consume(h),r++,u):(t.exit("thematicBreakSequence"),Nt(h)?Ft(t,c,"whitespace")(h):c(h))}}const Vr={continuation:{tokenize:pG},exit:mG,name:"list",tokenize:dG},fG={partial:!0,tokenize:yG},hG={partial:!0,tokenize:gG};function dG(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return c;function c(S){const R=r.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(R==="listUnordered"?!r.containerState.marker||S===r.containerState.marker:U0(S)){if(r.containerState.type||(r.containerState.type=R,t.enter(R,{_container:!0})),R==="listUnordered")return t.enter("listItemPrefix"),S===42||S===45?t.check(op,n,h)(S):h(S);if(!r.interrupt||S===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(S)}return n(S)}function u(S){return U0(S)&&++a<10?(t.consume(S),u):(!r.interrupt||a<2)&&(r.containerState.marker?S===r.containerState.marker:S===41||S===46)?(t.exit("listItemValue"),h(S)):n(S)}function h(S){return t.enter("listItemMarker"),t.consume(S),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||S,t.check(nh,r.interrupt?n:d,t.attempt(fG,b,g))}function d(S){return r.containerState.initialBlankLine=!0,s++,b(S)}function g(S){return Nt(S)?(t.enter("listItemPrefixWhitespace"),t.consume(S),t.exit("listItemPrefixWhitespace"),b):n(S)}function b(S){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(S)}}function pG(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(nh,i,s);function i(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ft(t,e,"listItemIndent",r.containerState.size+1)(c)}function s(c){return r.containerState.furtherBlankLines||!Nt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(hG,e,a)(c))}function a(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ft(t,t.attempt(Vr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function gG(t,e,n){const r=this;return Ft(t,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):n(s)}}function mG(t){t.exit(this.containerState.type)}function yG(t,e,n){const r=this;return Ft(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Nt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const O3={name:"setextUnderline",resolveTo:bG,tokenize:_G};function bG(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function _G(t,e,n){const r=this;let i;return s;function s(h){let d=r.events.length,g;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){g=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(t.enter("setextHeadingLine"),i=h,a(h)):n(h)}function a(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===i?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),Nt(h)?Ft(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||ft(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const vG={tokenize:xG};function xG(t){const e=this,n=t.attempt(nh,r,t.attempt(this.parser.constructs.flowInitial,i,Ft(t,t.attempt(this.parser.constructs.flow,i,t.attempt(AZ,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const wG={resolveAll:mI()},SG=gI("string"),TG=gI("text");function gI(t){return{resolveAll:mI(t==="text"?EG:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,a,c);return a;function a(d){return h(d)?s(d):c(d)}function c(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return h(d)?(n.exit("data"),s(d)):(n.consume(d),u)}function h(d){if(d===null)return!0;const g=i[d];let b=-1;if(g)for(;++b<g.length;){const S=g[b];if(!S.previous||S.previous.call(r,r.previous))return!0}return!1}}}function mI(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function EG(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,a=-1,c=0,u;for(;s--;){const h=i[s];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)c++,a--;if(a)break;a=-1}else if(h===-2)u=!0,c++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const AG={42:Vr,43:Vr,45:Vr,48:Vr,49:Vr,50:Vr,51:Vr,52:Vr,53:Vr,54:Vr,55:Vr,56:Vr,57:Vr,62:lI},RG={91:NZ},CG={[-2]:Kb,[-1]:Kb,32:Kb},kG={35:BZ,42:op,45:[O3,op],60:zZ,61:O3,95:op,96:N3,126:N3},MG={38:uI,92:cI},NG={[-5]:Qb,[-4]:Qb,[-3]:Qb,33:sG,38:uI,42:L0,60:[aZ,YZ],91:aG,92:[DZ,cI],93:vx,95:L0,96:vZ},IG={null:[L0,wG]},OG={null:[42,95]},PG={null:[]},DG=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:OG,contentInitial:RG,disable:PG,document:AG,flow:kG,flowInitial:CG,insideSpan:IG,string:MG,text:NG},Symbol.toStringTag,{value:"Module"}));function FG(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],c=[];const u={attempt:Z($),check:Z(F),consume:P,enter:M,exit:z,interrupt:Z(F,{interrupt:!0})},h={code:null,containerState:{},defineSkip:A,events:[],now:R,parser:t,previous:null,sliceSerialize:b,sliceStream:S,write:g};let d=e.tokenize.call(h,u);return e.resolveAll&&s.push(e),h;function g(K){return a=_i(a,K),C(),a[a.length-1]!==null?[]:(Q(e,0),h.events=Fg(s,h.events,h),h.events)}function b(K,ie){return jG(S(K),ie)}function S(K){return BG(a,K)}function R(){const{_bufferIndex:K,_index:ie,line:_e,column:re,offset:Te}=r;return{_bufferIndex:K,_index:ie,line:_e,column:re,offset:Te}}function A(K){i[K.line]=K.column,Y()}function C(){let K;for(;r._index<a.length;){const ie=a[r._index];if(typeof ie=="string")for(K=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===K&&r._bufferIndex<ie.length;)k(ie.charCodeAt(r._bufferIndex));else k(ie)}}function k(K){d=d(K)}function P(K){ft(K)?(r.line++,r.column=1,r.offset+=K===-3?2:1,Y()):K!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=K}function M(K,ie){const _e=ie||{};return _e.type=K,_e.start=R(),h.events.push(["enter",_e,h]),c.push(_e),_e}function z(K){const ie=c.pop();return ie.end=R(),h.events.push(["exit",ie,h]),ie}function $(K,ie){Q(K,ie.from)}function F(K,ie){ie.restore()}function Z(K,ie){return _e;function _e(re,Te,ne){let Se,pe,Xe,O;return Array.isArray(re)?Ae(re):"tokenize"in re?Ae([re]):Ee(re);function Ee(Oe){return ke;function ke(je){const tt=je!==null&&Oe[je],Ze=je!==null&&Oe.null,it=[...Array.isArray(tt)?tt:tt?[tt]:[],...Array.isArray(Ze)?Ze:Ze?[Ze]:[]];return Ae(it)(je)}}function Ae(Oe){return Se=Oe,pe=0,Oe.length===0?ne:B(Oe[pe])}function B(Oe){return ke;function ke(je){return O=ue(),Xe=Oe,Oe.partial||(h.currentConstruct=Oe),Oe.name&&h.parser.constructs.disable.null.includes(Oe.name)?ge():Oe.tokenize.call(ie?Object.assign(Object.create(h),ie):h,u,Ce,ge)(je)}}function Ce(Oe){return K(Xe,O),Te}function ge(Oe){return O.restore(),++pe<Se.length?B(Se[pe]):ne}}}function Q(K,ie){K.resolveAll&&!s.includes(K)&&s.push(K),K.resolve&&ui(h.events,ie,h.events.length-ie,K.resolve(h.events.slice(ie),h)),K.resolveTo&&(h.events=K.resolveTo(h.events,h))}function ue(){const K=R(),ie=h.previous,_e=h.currentConstruct,re=h.events.length,Te=Array.from(c);return{from:re,restore:ne};function ne(){r=K,h.previous=ie,h.currentConstruct=_e,h.events.length=re,c=Te,Y()}}function Y(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function BG(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,s)];else{if(a=t.slice(n,i),r>-1){const c=a[0];typeof c=="string"?a[0]=c.slice(r):a.shift()}s>0&&a.push(t[i].slice(0,s))}return a}function jG(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function UG(t){const r={constructs:oI([DG,...(t||{}).extensions||[]]),content:i(eZ),defined:[],document:i(nZ),flow:i(vG),lazy:{},string:i(SG),text:i(TG)};return r;function i(s){return a;function a(c){return FG(r,s,c)}}}function LG(t){for(;!fI(t););return t}const P3=/[\0\t\n\r]/g;function zG(){let t=1,e="",n=!0,r;return i;function i(s,a,c){const u=[];let h,d,g,b,S;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),g=0,e="",n&&(s.charCodeAt(0)===65279&&g++,n=void 0);g<s.length;){if(P3.lastIndex=g,h=P3.exec(s),b=h&&h.index!==void 0?h.index:s.length,S=s.charCodeAt(b),!h){e=s.slice(g);break}if(S===10&&g===b&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),g<b&&(u.push(s.slice(g,b)),t+=b-g),S){case 0:{u.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,u.push(-2);t++<d;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}g=b+1}return c&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const VG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $G(t){return t.replace(VG,HG)}function HG(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return aI(n.slice(s?2:1),s?16:10)}return _x(n)||t}const yI={}.hasOwnProperty;function WG(t,e,n){return typeof e!="string"&&(n=e,e=void 0),qG(n)(LG(UG(n).document().write(zG()(t,e,!0))))}function qG(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ln),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:s(In),blockQuote:s(Ze),characterEscape:ue,characterReference:ue,codeFenced:s(it),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(it,a),codeText:s(ct,a),codeTextData:ue,data:ue,codeFlowValue:ue,definition:s(bt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(qt),hardBreakEscape:s(ar),hardBreakTrailing:s(ar),htmlFlow:s(bn,a),htmlFlowData:ue,htmlText:s(bn,a),htmlTextData:ue,image:s(Sn),label:a,link:s(ln),listItem:s(lr),listItemValue:b,listOrdered:s(ys,g),listUnordered:s(ys),paragraph:s(gr),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(In),strong:s(Xi),thematicBreak:s(Qc)},exit:{atxHeading:u(),atxHeadingSequence:$,autolink:u(),autolinkEmail:tt,autolinkProtocol:je,blockQuote:u(),characterEscapeValue:Y,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Oe,characterReference:ke,codeFenced:u(C),codeFencedFence:A,codeFencedFenceInfo:S,codeFencedFenceMeta:R,codeFlowValue:Y,codeIndented:u(k),codeText:u(Te),codeTextData:Y,data:Y,definition:u(),definitionDestinationString:z,definitionLabelString:P,definitionTitleString:M,emphasis:u(),hardBreakEscape:u(ie),hardBreakTrailing:u(ie),htmlFlow:u(_e),htmlFlowData:Y,htmlText:u(re),htmlTextData:Y,image:u(Se),label:Xe,labelText:pe,lineEnding:K,link:u(ne),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Ce,resourceDestinationString:O,resourceTitleString:Ee,resource:Ae,setextHeading:u(Q),setextHeadingLineSequence:Z,setextHeadingText:F,strong:u(),thematicBreak:u()}};bI(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Me){let Le={type:"root",children:[]};const lt={stack:[Le],tokenStack:[],config:e,enter:c,exit:h,buffer:a,resume:d,data:n},ht=[];let zt=-1;for(;++zt<Me.length;)if(Me[zt][1].type==="listOrdered"||Me[zt][1].type==="listUnordered")if(Me[zt][0]==="enter")ht.push(zt);else{const Ar=ht.pop();zt=i(Me,Ar,zt)}for(zt=-1;++zt<Me.length;){const Ar=e[Me[zt][0]];yI.call(Ar,Me[zt][1].type)&&Ar[Me[zt][1].type].call(Object.assign({sliceSerialize:Me[zt][2].sliceSerialize},lt),Me[zt][1])}if(lt.tokenStack.length>0){const Ar=lt.tokenStack[lt.tokenStack.length-1];(Ar[1]||D3).call(lt,void 0,Ar[0])}for(Le.position={start:wo(Me.length>0?Me[0][1].start:{line:1,column:1,offset:0}),end:wo(Me.length>0?Me[Me.length-2][1].end:{line:1,column:1,offset:0})},zt=-1;++zt<e.transforms.length;)Le=e.transforms[zt](Le)||Le;return Le}function i(Me,Le,lt){let ht=Le-1,zt=-1,Ar=!1,Ri,mr,qr,Rr;for(;++ht<=lt;){const Bn=Me[ht];switch(Bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bn[0]==="enter"?zt++:zt--,Rr=void 0;break}case"lineEndingBlank":{Bn[0]==="enter"&&(Ri&&!Rr&&!zt&&!qr&&(qr=ht),Rr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Rr=void 0}if(!zt&&Bn[0]==="enter"&&Bn[1].type==="listItemPrefix"||zt===-1&&Bn[0]==="exit"&&(Bn[1].type==="listUnordered"||Bn[1].type==="listOrdered")){if(Ri){let Fr=ht;for(mr=void 0;Fr--;){const Xr=Me[Fr];if(Xr[1].type==="lineEnding"||Xr[1].type==="lineEndingBlank"){if(Xr[0]==="exit")continue;mr&&(Me[mr][1].type="lineEndingBlank",Ar=!0),Xr[1].type="lineEnding",mr=Fr}else if(!(Xr[1].type==="linePrefix"||Xr[1].type==="blockQuotePrefix"||Xr[1].type==="blockQuotePrefixWhitespace"||Xr[1].type==="blockQuoteMarker"||Xr[1].type==="listItemIndent"))break}qr&&(!mr||qr<mr)&&(Ri._spread=!0),Ri.end=Object.assign({},mr?Me[mr][1].start:Bn[1].end),Me.splice(mr||ht,0,["exit",Ri,Bn[2]]),ht++,lt++}if(Bn[1].type==="listItemPrefix"){const Fr={type:"listItem",_spread:!1,start:Object.assign({},Bn[1].start),end:void 0};Ri=Fr,Me.splice(ht,0,["enter",Fr,Bn[2]]),ht++,lt++,qr=void 0,Rr=!0}}}return Me[Le][1]._spread=Ar,lt}function s(Me,Le){return lt;function lt(ht){c.call(this,Me(ht),ht),Le&&Le.call(this,ht)}}function a(){this.stack.push({type:"fragment",children:[]})}function c(Me,Le,lt){this.stack[this.stack.length-1].children.push(Me),this.stack.push(Me),this.tokenStack.push([Le,lt||void 0]),Me.position={start:wo(Le.start),end:void 0}}function u(Me){return Le;function Le(lt){Me&&Me.call(this,lt),h.call(this,lt)}}function h(Me,Le){const lt=this.stack.pop(),ht=this.tokenStack.pop();if(ht)ht[0].type!==Me.type&&(Le?Le.call(this,Me,ht[0]):(ht[1]||D3).call(this,Me,ht[0]));else throw new Error("Cannot close `"+Me.type+"` ("+wf({start:Me.start,end:Me.end})+"): its not open");lt.position.end=wo(Me.end)}function d(){return bx(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(Me){if(this.data.expectingFirstListItemValue){const Le=this.stack[this.stack.length-2];Le.start=Number.parseInt(this.sliceSerialize(Me),10),this.data.expectingFirstListItemValue=void 0}}function S(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.lang=Me}function R(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.meta=Me}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me.replace(/(\r?\n|\r)$/g,"")}function P(Me){const Le=this.resume(),lt=this.stack[this.stack.length-1];lt.label=Le,lt.identifier=Vi(this.sliceSerialize(Me)).toLowerCase()}function M(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Me}function z(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Me}function $(Me){const Le=this.stack[this.stack.length-1];if(!Le.depth){const lt=this.sliceSerialize(Me).length;Le.depth=lt}}function F(){this.data.setextHeadingSlurpLineEnding=!0}function Z(Me){const Le=this.stack[this.stack.length-1];Le.depth=this.sliceSerialize(Me).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(Me){const lt=this.stack[this.stack.length-1].children;let ht=lt[lt.length-1];(!ht||ht.type!=="text")&&(ht=Yi(),ht.position={start:wo(Me.start),end:void 0},lt.push(ht)),this.stack.push(ht)}function Y(Me){const Le=this.stack.pop();Le.value+=this.sliceSerialize(Me),Le.position.end=wo(Me.end)}function K(Me){const Le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const lt=Le.children[Le.children.length-1];lt.position.end=wo(Me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Le.type)&&(ue.call(this,Me),Y.call(this,Me))}function ie(){this.data.atHardBreak=!0}function _e(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function re(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function Te(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Me}function ne(){const Me=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Me.type+="Reference",Me.referenceType=Le,delete Me.url,delete Me.title}else delete Me.identifier,delete Me.label;this.data.referenceType=void 0}function Se(){const Me=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Me.type+="Reference",Me.referenceType=Le,delete Me.url,delete Me.title}else delete Me.identifier,delete Me.label;this.data.referenceType=void 0}function pe(Me){const Le=this.sliceSerialize(Me),lt=this.stack[this.stack.length-2];lt.label=$G(Le),lt.identifier=Vi(Le).toLowerCase()}function Xe(){const Me=this.stack[this.stack.length-1],Le=this.resume(),lt=this.stack[this.stack.length-1];if(this.data.inReference=!0,lt.type==="link"){const ht=Me.children;lt.children=ht}else lt.alt=Le}function O(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Me}function Ee(){const Me=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Me}function Ae(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function Ce(Me){const Le=this.resume(),lt=this.stack[this.stack.length-1];lt.label=Le,lt.identifier=Vi(this.sliceSerialize(Me)).toLowerCase(),this.data.referenceType="full"}function ge(Me){this.data.characterReferenceType=Me.type}function Oe(Me){const Le=this.sliceSerialize(Me),lt=this.data.characterReferenceType;let ht;lt?(ht=aI(Le,lt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ht=_x(Le);const zt=this.stack[this.stack.length-1];zt.value+=ht}function ke(Me){const Le=this.stack.pop();Le.position.end=wo(Me.end)}function je(Me){Y.call(this,Me);const Le=this.stack[this.stack.length-1];Le.url=this.sliceSerialize(Me)}function tt(Me){Y.call(this,Me);const Le=this.stack[this.stack.length-1];Le.url="mailto:"+this.sliceSerialize(Me)}function Ze(){return{type:"blockquote",children:[]}}function it(){return{type:"code",lang:null,meta:null,value:""}}function ct(){return{type:"inlineCode",value:""}}function bt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function qt(){return{type:"emphasis",children:[]}}function In(){return{type:"heading",depth:0,children:[]}}function ar(){return{type:"break"}}function bn(){return{type:"html",value:""}}function Sn(){return{type:"image",title:null,url:"",alt:null}}function ln(){return{type:"link",title:null,url:"",children:[]}}function ys(Me){return{type:"list",ordered:Me.type==="listOrdered",start:null,spread:Me._spread,children:[]}}function lr(Me){return{type:"listItem",spread:Me._spread,checked:null,children:[]}}function gr(){return{type:"paragraph",children:[]}}function Xi(){return{type:"strong",children:[]}}function Yi(){return{type:"text",value:""}}function Qc(){return{type:"thematicBreak"}}}function wo(t){return{line:t.line,column:t.column,offset:t.offset}}function bI(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?bI(t,r):XG(t,r)}}function XG(t,e){let n;for(n in e)if(yI.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function D3(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+wf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+wf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+wf({start:e.start,end:e.end})+") is still open")}function YG(t){const e=this;e.parser=n;function n(r){return WG(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function KG(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function QG(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function ZG(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function GG(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function JG(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function eJ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Kc(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let a,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=s+1,c+=1,t.footnoteCounts.set(r,c);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function tJ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nJ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _I(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function rJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _I(t,e);const i={src:Kc(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function iJ(t,e){const n={src:Kc(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function sJ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function oJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _I(t,e);const i={href:Kc(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function aJ(t,e){const n={href:Kc(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function lJ(t,e,n){const r=t.all(e),i=n?cJ(n):vI(e),s={},a=[];if(typeof e.checked=="boolean"){const d=r[0];let g;d&&d.type==="element"&&d.tagName==="p"?g=d:(g={type:"element",tagName:"p",properties:{},children:[]},r.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const d=r[c];(i||c!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?a.push(...d.children):a.push(d)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,h),t.applyData(e,h)}function cJ(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=vI(n[r])}return e}function vI(t){const e=t.spread;return e??t.children.length>1}function uJ(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function fJ(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hJ(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function dJ(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pJ(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=px(e.children[1]),u=JN(e.children[e.children.length-1]);c&&u&&(a.position={start:c,end:u}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function gJ(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,c=a?a.length:e.children.length;let u=-1;const h=[];for(;++u<c;){const g=e.children[u],b={},S=a?a[u]:void 0;S&&(b.align=S);let R={type:"element",tagName:s,properties:b,children:[]};g&&(R.children=t.all(g),t.patch(g,R),R=t.applyData(g,R)),h.push(R)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,d),t.applyData(e,d)}function mJ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const F3=9,B3=32;function yJ(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(j3(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(j3(e.slice(i),i>0,!1)),s.join("")}function j3(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===F3||s===B3;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===F3||s===B3;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function bJ(t,e){const n={type:"text",value:yJ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function _J(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vJ={blockquote:KG,break:QG,code:ZG,delete:GG,emphasis:JG,footnoteReference:eJ,heading:tJ,html:nJ,imageReference:rJ,image:iJ,inlineCode:sJ,linkReference:oJ,link:aJ,listItem:lJ,list:uJ,paragraph:fJ,root:hJ,strong:dJ,table:pJ,tableCell:mJ,tableRow:gJ,text:bJ,thematicBreak:_J,toml:zd,yaml:zd,definition:zd,footnoteDefinition:zd};function zd(){}const xI=-1,Bg=0,Tf=1,Zp=2,xx=3,wx=4,Sx=5,Tx=6,wI=7,SI=8,U3=typeof self=="object"?self:globalThis,xJ=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,a]=e[i];switch(s){case Bg:case xI:return n(a,i);case Tf:{const c=n([],i);for(const u of a)c.push(r(u));return c}case Zp:{const c=n({},i);for(const[u,h]of a)c[r(u)]=r(h);return c}case xx:return n(new Date(a),i);case wx:{const{source:c,flags:u}=a;return n(new RegExp(c,u),i)}case Sx:{const c=n(new Map,i);for(const[u,h]of a)c.set(r(u),r(h));return c}case Tx:{const c=n(new Set,i);for(const u of a)c.add(r(u));return c}case wI:{const{name:c,message:u}=a;return n(new U3[c](u),i)}case SI:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:c}=new Uint8Array(a);return n(new DataView(c),a)}}return n(new U3[s](a),i)};return r},L3=t=>xJ(new Map,t)(0),Kl="",{toString:wJ}={},{keys:SJ}=Object,nf=t=>{const e=typeof t;if(e!=="object"||!t)return[Bg,e];const n=wJ.call(t).slice(8,-1);switch(n){case"Array":return[Tf,Kl];case"Object":return[Zp,Kl];case"Date":return[xx,Kl];case"RegExp":return[wx,Kl];case"Map":return[Sx,Kl];case"Set":return[Tx,Kl];case"DataView":return[Tf,n]}return n.includes("Array")?[Tf,n]:n.includes("Error")?[wI,n]:[Zp,n]},Vd=([t,e])=>t===Bg&&(e==="function"||e==="symbol"),TJ=(t,e,n,r)=>{const i=(a,c)=>{const u=r.push(a)-1;return n.set(c,u),u},s=a=>{if(n.has(a))return n.get(a);let[c,u]=nf(a);switch(c){case Bg:{let d=a;switch(u){case"bigint":c=SI,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return i([xI],a)}return i([c,d],a)}case Tf:{if(u){let b=a;return u==="DataView"?b=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(b=new Uint8Array(a)),i([u,[...b]],a)}const d=[],g=i([c,d],a);for(const b of a)d.push(s(b));return g}case Zp:{if(u)switch(u){case"BigInt":return i([u,a.toString()],a);case"Boolean":case"Number":case"String":return i([u,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const d=[],g=i([c,d],a);for(const b of SJ(a))(t||!Vd(nf(a[b])))&&d.push([s(b),s(a[b])]);return g}case xx:return i([c,a.toISOString()],a);case wx:{const{source:d,flags:g}=a;return i([c,{source:d,flags:g}],a)}case Sx:{const d=[],g=i([c,d],a);for(const[b,S]of a)(t||!(Vd(nf(b))||Vd(nf(S))))&&d.push([s(b),s(S)]);return g}case Tx:{const d=[],g=i([c,d],a);for(const b of a)(t||!Vd(nf(b)))&&d.push(s(b));return g}}const{message:h}=a;return i([c,{name:u,message:h}],a)};return s},z3=(t,{json:e,lossy:n}={})=>{const r=[];return TJ(!(e||n),!!e,new Map,r)(t),r},Gp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?L3(z3(t,e)):structuredClone(t):(t,e)=>L3(z3(t,e));function EJ(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function AJ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function RJ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||EJ,r=t.options.footnoteBackLabel||AJ,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const d=t.all(h),g=String(h.identifier).toUpperCase(),b=Kc(g.toLowerCase());let S=0;const R=[],A=t.footnoteCounts.get(g);for(;A!==void 0&&++S<=A;){R.length>0&&R.push({type:"text",value:" "});let P=typeof n=="string"?n:n(u,S);typeof P=="string"&&(P={type:"text",value:P}),R.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(S>1?"-"+S:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,S),className:["data-footnote-backref"]},children:Array.isArray(P)?P:[P]})}const C=d[d.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const P=C.children[C.children.length-1];P&&P.type==="text"?P.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...R)}else d.push(...R);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(d,!0)};t.patch(h,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Gp(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const jg=function(t){if(t==null)return NJ;if(typeof t=="function")return Ug(t);if(typeof t=="object")return Array.isArray(t)?CJ(t):kJ(t);if(typeof t=="string")return MJ(t);throw new Error("Expected function, string, or object as test")};function CJ(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=jg(t[n]);return Ug(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function kJ(t){const e=t;return Ug(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function MJ(t){return Ug(e);function e(n){return n&&n.type===t}}function Ug(t){return e;function e(n,r,i){return!!(IJ(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function NJ(){return!0}function IJ(t){return t!==null&&typeof t=="object"&&"type"in t}const TI=[],OJ=!0,z0=!1,PJ="skip";function EI(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=jg(i),a=r?-1:1;c(t,void 0,[])();function c(u,h,d){const g=u&&typeof u=="object"?u:{};if(typeof g.type=="string"){const S=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(u.type+(S?"<"+S+">":""))+")"})}return b;function b(){let S=TI,R,A,C;if((!e||s(u,h,d[d.length-1]||void 0))&&(S=DJ(n(u,d)),S[0]===z0))return S;if("children"in u&&u.children){const k=u;if(k.children&&S[0]!==PJ)for(A=(r?k.children.length:-1)+a,C=d.concat(k);A>-1&&A<k.children.length;){const P=k.children[A];if(R=c(P,A,C)(),R[0]===z0)return R;A=typeof R[1]=="number"?R[1]:A+a}}return S}}}function DJ(t){return Array.isArray(t)?t:typeof t=="number"?[OJ,t]:t==null?TI:[t]}function Ex(t,e,n,r){let i,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,i=n):(s=e,a=n,i=r),EI(t,s,c,i);function c(u,h){const d=h[h.length-1],g=d?d.children.indexOf(u):void 0;return a(u,g,d)}}const V0={}.hasOwnProperty,FJ={};function BJ(t,e){const n=e||FJ,r=new Map,i=new Map,s=new Map,a={...vJ,...n.handlers},c={all:h,applyData:UJ,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:u,options:n,patch:jJ,wrap:zJ};return Ex(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const g=d.type==="definition"?r:i,b=String(d.identifier).toUpperCase();g.has(b)||g.set(b,d)}}),c;function u(d,g){const b=d.type,S=c.handlers[b];if(V0.call(c.handlers,b)&&S)return S(c,d,g);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in d){const{children:A,...C}=d,k=Gp(C);return k.children=c.all(d),k}return Gp(d)}return(c.options.unknownHandler||LJ)(c,d,g)}function h(d){const g=[];if("children"in d){const b=d.children;let S=-1;for(;++S<b.length;){const R=c.one(b[S],d);if(R){if(S&&b[S-1].type==="break"&&(!Array.isArray(R)&&R.type==="text"&&(R.value=V3(R.value)),!Array.isArray(R)&&R.type==="element")){const A=R.children[0];A&&A.type==="text"&&(A.value=V3(A.value))}Array.isArray(R)?g.push(...R):g.push(R)}}}return g}}function jJ(t,e){t.position&&(e.position=AQ(t))}function UJ(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Gp(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function LJ(t,e){const n=e.data||{},r="value"in e&&!(V0.call(n,"hProperties")||V0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function zJ(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function V3(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function $3(t,e){const n=BJ(t,e),r=n.one(t,void 0),i=RJ(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function VJ(t,e){return t&&"run"in t?async function(n,r){const i=$3(n,{file:r,...e});await t.run(i,r)}:function(n,r){return $3(n,{file:r,...t||e})}}function H3(t){if(t)throw t}var Zb,W3;function $J(){if(W3)return Zb;W3=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var d=t.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!d&&!g)return!1;var b;for(b in h);return typeof b>"u"||t.call(h,b)},a=function(h,d){n&&d.name==="__proto__"?n(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},c=function(h,d){if(d==="__proto__")if(t.call(h,d)){if(r)return r(h,d).value}else return;return h[d]};return Zb=function u(){var h,d,g,b,S,R,A=arguments[0],C=1,k=arguments.length,P=!1;for(typeof A=="boolean"&&(P=A,A=arguments[1]||{},C=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});C<k;++C)if(h=arguments[C],h!=null)for(d in h)g=c(A,d),b=c(h,d),A!==b&&(P&&b&&(s(b)||(S=i(b)))?(S?(S=!1,R=g&&i(g)?g:[]):R=g&&s(g)?g:{},a(A,{name:d,newValue:u(P,R,b)})):typeof b<"u"&&a(A,{name:d,newValue:b}));return A},Zb}var HJ=$J();const Gb=Hf(HJ);function $0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function WJ(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);c(null,...i);function c(u,...h){const d=t[++s];let g=-1;if(u){a(u);return}for(;++g<i.length;)(h[g]===null||h[g]===void 0)&&(h[g]=i[g]);i=h,d?qJ(d,c)(...h):a(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function qJ(t,e){let n;return r;function r(...a){const c=t.length>a.length;let u;c&&a.push(i);try{u=t.apply(this,a)}catch(h){const d=h;if(c&&n)throw d;return i(d)}c||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(a,...c){n||(n=!0,e(a,...c))}function s(a){i(null,a)}}const ns={basename:XJ,dirname:YJ,extname:KJ,join:QJ,sep:"/"};function XJ(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');rh(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,c=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),c>-1&&(t.codePointAt(i)===e.codePointAt(c--)?c<0&&(r=i):(c=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function YJ(t){if(rh(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function KJ(t){rh(t);let e=t.length,n=-1,r=0,i=-1,s=0,a;for(;e--;){const c=t.codePointAt(e);if(c===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),c===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function QJ(...t){let e=-1,n;for(;++e<t.length;)rh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ZJ(n)}function ZJ(t){rh(t);const e=t.codePointAt(0)===47;let n=GJ(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function GJ(t,e){let n="",r=0,i=-1,s=0,a=-1,c,u;for(;++a<=t.length;){if(a<t.length)c=t.codePointAt(a);else{if(c===47)break;c=47}if(c===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else c===46&&s>-1?s++:s=-1}return n}function rh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const JJ={cwd:eee};function eee(){return"/"}function H0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function tee(t){if(typeof t=="string")t=new URL(t);else if(!H0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return nee(t)}function nee(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Jb=["history","path","basename","stem","extname","dirname"];class AI{constructor(e){let n;e?H0(e)?n={path:e}:typeof e=="string"||ree(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":JJ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Jb.length;){const s=Jb[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Jb.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ns.basename(this.path):void 0}set basename(e){t_(e,"basename"),e_(e,"basename"),this.path=ns.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ns.dirname(this.path):void 0}set dirname(e){q3(this.basename,"dirname"),this.path=ns.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ns.extname(this.path):void 0}set extname(e){if(e_(e,"extname"),q3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ns.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){H0(e)&&(e=tee(e)),t_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ns.basename(this.path,this.extname):void 0}set stem(e){t_(e,"stem"),e_(e,"stem"),this.path=ns.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Er(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function e_(t,e){if(t&&t.includes(ns.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ns.sep+"`")}function t_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function q3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ree(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const iee=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},see={}.hasOwnProperty;class Ax extends iee{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=WJ()}copy(){const e=new Ax;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Gb(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(i_("data",this.frozen),this.namespace[e]=n,this):see.call(this.namespace,e)&&this.namespace[e]||void 0:e?(i_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$d(e),r=this.parser||this.Parser;return n_("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),n_("process",this.parser||this.Parser),r_("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const c=$d(e),u=r.parse(c);r.run(u,c,function(d,g,b){if(d||!g||!b)return h(d);const S=g,R=r.stringify(S,b);lee(R)?b.value=R:b.result=R,h(d,b)});function h(d,g){d||!g?a(d):s?s(g):n(void 0,g)}}}processSync(e){let n=!1,r;return this.freeze(),n_("processSync",this.parser||this.Parser),r_("processSync",this.compiler||this.Compiler),this.process(e,i),Y3("processSync","process",n),r;function i(s,a){n=!0,H3(s),r=a}}run(e,n,r){X3(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,c){const u=$d(n);i.run(e,u,h);function h(d,g,b){const S=g||e;d?c(d):a?a(S):r(void 0,S,b)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),Y3("runSync","run",r),i;function s(a,c){H3(a),i=c,r=!0}}stringify(e,n){this.freeze();const r=$d(n),i=this.compiler||this.Compiler;return r_("stringify",i),X3(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(i_("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...g]=h;u(d,g)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(i.settings=Gb(!0,i.settings,h.settings))}function c(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const g=h[d];s(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,d){let g=-1,b=-1;for(;++g<r.length;)if(r[g][0]===h){b=g;break}if(b===-1)r.push([h,...d]);else if(d.length>0){let[S,...R]=d;const A=r[b][1];$0(A)&&$0(S)&&(S=Gb(!0,A,S)),r[b]=[h,S,...R]}}}}const oee=new Ax().freeze();function n_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function r_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function i_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function X3(t){if(!$0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Y3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $d(t){return aee(t)?t:new AI(t)}function aee(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function lee(t){return typeof t=="string"||cee(t)}function cee(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const uee="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",K3=[],Q3={allowDangerousHtml:!0},fee=/^(https?|ircs?|mailto|xmpp)$/i,hee=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dee(t){const e=pee(t),n=gee(t);return mee(e.runSync(e.parse(n),n),t)}function pee(t){const e=t.rehypePlugins||K3,n=t.remarkPlugins||K3,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Q3}:Q3;return oee().use(YG).use(n).use(VJ,r).use(e)}function gee(t){const e=t.children||"",n=new AI;return typeof e=="string"&&(n.value=e),n}function mee(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,a=e.skipHtml,c=e.unwrapDisallowed,u=e.urlTransform||yee;for(const d of hee)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+uee+d.id,void 0);return Ex(t,h),NQ(t,{Fragment:v.Fragment,components:i,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function h(d,g,b){if(d.type==="raw"&&b&&typeof g=="number")return a?b.children.splice(g,1):b.children[g]={type:"text",value:d.value},g;if(d.type==="element"){let S;for(S in Yb)if(Object.hasOwn(Yb,S)&&Object.hasOwn(d.properties,S)){const R=d.properties[S],A=Yb[S];(A===null||A.includes(d.tagName))&&(d.properties[S]=u(String(R||""),S,d))}}if(d.type==="element"){let S=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!S&&r&&typeof g=="number"&&(S=!r(d,g,b)),S&&b&&typeof g=="number")return c&&d.children?b.children.splice(g,1,...d.children):b.children.splice(g,1),g}}}function yee(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||fee.test(t.slice(0,e))?t:""}function Z3(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function bee(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _ee(t,e,n){const i=jg((n||{}).ignore||[]),s=vee(e);let a=-1;for(;++a<s.length;)EI(t,"text",c);function c(h,d){let g=-1,b;for(;++g<d.length;){const S=d[g],R=b?b.children:void 0;if(i(S,R?R.indexOf(S):void 0,b))return;b=S}if(b)return u(h,d)}function u(h,d){const g=d[d.length-1],b=s[a][0],S=s[a][1];let R=0;const C=g.children.indexOf(h);let k=!1,P=[];b.lastIndex=0;let M=b.exec(h.value);for(;M;){const z=M.index,$={index:M.index,input:M.input,stack:[...d,h]};let F=S(...M,$);if(typeof F=="string"&&(F=F.length>0?{type:"text",value:F}:void 0),F===!1?b.lastIndex=z+1:(R!==z&&P.push({type:"text",value:h.value.slice(R,z)}),Array.isArray(F)?P.push(...F):F&&P.push(F),R=z+M[0].length,k=!0),!b.global)break;M=b.exec(h.value)}return k?(R<h.value.length&&P.push({type:"text",value:h.value.slice(R)}),g.children.splice(C,1,...P)):P=[h],C+P.length}}function vee(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([xee(i[0]),wee(i[1])])}return e}function xee(t){return typeof t=="string"?new RegExp(bee(t),"g"):t}function wee(t){return typeof t=="function"?t:function(){return t}}const s_="phrasing",o_=["autolink","link","image","label"];function See(){return{transforms:[Mee],enter:{literalAutolink:Eee,literalAutolinkEmail:a_,literalAutolinkHttp:a_,literalAutolinkWww:a_},exit:{literalAutolink:kee,literalAutolinkEmail:Cee,literalAutolinkHttp:Aee,literalAutolinkWww:Ree}}}function Tee(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:":",before:"[ps]",after:"\\/",inConstruct:s_,notInConstruct:o_}]}}function Eee(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function a_(t){this.config.enter.autolinkProtocol.call(this,t)}function Aee(t){this.config.exit.autolinkProtocol.call(this,t)}function Ree(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Cee(t){this.config.exit.autolinkEmail.call(this,t)}function kee(t){this.exit(t)}function Mee(t){_ee(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Nee],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Iee]],{ignore:["link","linkReference"]})}function Nee(t,e,n,r,i){let s="";if(!RI(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Oee(n)))return!1;const a=Pee(n+r);if(!a[0])return!1;const c={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[c,{type:"text",value:a[1]}]:c}function Iee(t,e,n,r){return!RI(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Oee(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Pee(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Z3(t,"(");let s=Z3(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function RI(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ya(n)||Dg(n))&&(!e||n!==47)}CI.peek=$ee;function Dee(){this.buffer()}function Fee(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Bee(){this.buffer()}function jee(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Uee(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Vi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Lee(t){this.exit(t)}function zee(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Vi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Vee(t){this.exit(t)}function $ee(){return"["}function CI(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),c=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),c(),a(),s+=i.move("]"),s}function Hee(){return{enter:{gfmFootnoteCallString:Dee,gfmFootnoteCall:Fee,gfmFootnoteDefinitionLabelString:Bee,gfmFootnoteDefinition:jee},exit:{gfmFootnoteCallString:Uee,gfmFootnoteCall:Lee,gfmFootnoteDefinitionLabelString:zee,gfmFootnoteDefinition:Vee}}}function Wee(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:CI},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const c=s.createTracker(a);let u=c.move("[^");const h=s.enter("footnoteDefinition"),d=s.enter("label");return u+=c.move(s.safe(s.associationId(r),{before:u,after:"]"})),d(),u+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),u+=c.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,c.current()),e?kI:qee))),h(),u}}function qee(t,e,n){return e===0?t:kI(t,e,n)}function kI(t,e,n){return(n?"":"    ")+t}const Xee=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];MI.peek=Gee;function Yee(){return{canContainEols:["delete"],enter:{strikethrough:Qee},exit:{strikethrough:Zee}}}function Kee(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Xee}],handlers:{delete:MI}}}function Qee(t){this.enter({type:"delete",children:[]},t)}function Zee(t){this.exit(t)}function MI(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(t,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function Gee(){return"~"}function Jee(t){return t.length}function ete(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Jee,s=[],a=[],c=[],u=[];let h=0,d=-1;for(;++d<t.length;){const A=[],C=[];let k=-1;for(t[d].length>h&&(h=t[d].length);++k<t[d].length;){const P=tte(t[d][k]);if(n.alignDelimiters!==!1){const M=i(P);C[k]=M,(u[k]===void 0||M>u[k])&&(u[k]=M)}A.push(P)}a[d]=A,c[d]=C}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<h;)s[g]=G3(r[g]);else{const A=G3(r);for(;++g<h;)s[g]=A}g=-1;const b=[],S=[];for(;++g<h;){const A=s[g];let C="",k="";A===99?(C=":",k=":"):A===108?C=":":A===114&&(k=":");let P=n.alignDelimiters===!1?1:Math.max(1,u[g]-C.length-k.length);const M=C+"-".repeat(P)+k;n.alignDelimiters!==!1&&(P=C.length+P+k.length,P>u[g]&&(u[g]=P),S[g]=P),b[g]=M}a.splice(1,0,b),c.splice(1,0,S),d=-1;const R=[];for(;++d<a.length;){const A=a[d],C=c[d];g=-1;const k=[];for(;++g<h;){const P=A[g]||"";let M="",z="";if(n.alignDelimiters!==!1){const $=u[g]-(C[g]||0),F=s[g];F===114?M=" ".repeat($):F===99?$%2?(M=" ".repeat($/2+.5),z=" ".repeat($/2-.5)):(M=" ".repeat($/2),z=M):z=" ".repeat($)}n.delimiterStart!==!1&&!g&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&P==="")&&(n.delimiterStart!==!1||g)&&k.push(" "),n.alignDelimiters!==!1&&k.push(M),k.push(P),n.alignDelimiters!==!1&&k.push(z),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||g!==h-1)&&k.push("|")}R.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return R.join(`
`)}function tte(t){return t==null?"":String(t)}function G3(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function nte(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(t,s.current()),rte);return i(),a}function rte(t,e,n){return">"+(n?"":" ")+t}function ite(t,e){return J3(t,e.inConstruct,!0)&&!J3(t,e.notInConstruct,!1)}function J3(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function eA(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&ite(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function ste(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+e.length,r=n.indexOf(e,i);return a}function ote(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function ate(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function lte(t,e,n,r){const i=ate(n),s=t.value||"",a=i==="`"?"GraveAccent":"Tilde";if(ote(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(s,cte);return g(),b}const c=n.createTracker(r),u=i.repeat(Math.max(ste(s,i)+1,3)),h=n.enter("codeFenced");let d=c.move(u);if(t.lang){const g=n.enter(`codeFencedLang${a}`);d+=c.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...c.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${a}`);d+=c.move(" "),d+=c.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...c.current()})),g()}return d+=c.move(`
`),s&&(d+=c.move(s+`
`)),d+=c.move(u),h(),d}function cte(t,e,n){return(n?"":"    ")+t}function Rx(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function ute(t,e,n,r){const i=Rx(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let c=n.enter("label");const u=n.createTracker(r);let h=u.move("[");return h+=u.move(n.safe(n.associationId(t),{before:h,after:"]",...u.current()})),h+=u.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(c=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...u.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=u.move(" "+i),h+=u.move(n.safe(t.title,{before:h,after:i,...u.current()})),h+=u.move(i),c()),a(),h}function fte(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Uf(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Jp(t,e,n){const r=jc(t),i=jc(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}NI.peek=hte;function NI(t,e,n,r){const i=fte(n),s=n.enter("emphasis"),a=n.createTracker(r),c=a.move(i);let u=a.move(n.containerPhrasing(t,{after:i,before:c,...a.current()}));const h=u.charCodeAt(0),d=Jp(r.before.charCodeAt(r.before.length-1),h,i);d.inside&&(u=Uf(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=Jp(r.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Uf(g));const S=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},c+u+S}function hte(t,e,n){return n.options.emphasis||"*"}function dte(t,e){let n=!1;return Ex(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,z0}),!!((!t.depth||t.depth<3)&&bx(t)&&(e.options.setext||n))}function pte(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(dte(t,n)){const d=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return g(),d(),b+`
`+(i===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const a="#".repeat(i),c=n.enter("headingAtx"),u=n.enter("phrasing");s.move(a+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=Uf(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,n.options.closeAtx&&(h+=" "+a),u(),c(),h}II.peek=gte;function II(t){return t.value||""}function gte(){return"<"}OI.peek=mte;function OI(t,e,n,r){const i=Rx(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let c=n.enter("label");const u=n.createTracker(r);let h=u.move("![");return h+=u.move(n.safe(t.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(c=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":")",...u.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=u.move(" "+i),h+=u.move(n.safe(t.title,{before:h,after:i,...u.current()})),h+=u.move(i),c()),h+=u.move(")"),a(),h}function mte(){return"!"}PI.peek=yte;function PI(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let a=n.enter("label");const c=n.createTracker(r);let u=c.move("![");const h=n.safe(t.alt,{before:u,after:"]",...c.current()});u+=c.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...c.current()});return a(),n.stack=d,s(),i==="full"||!h||h!==g?u+=c.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=c.move("]"),u}function yte(){return"!"}DI.peek=bte;function DI(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],c=n.compilePattern(a);let u;if(a.atBreak)for(;u=c.exec(r);){let h=u.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(u.index+1)}}return i+r+i}function bte(){return"`"}function FI(t,e){const n=bx(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}BI.peek=_te;function BI(t,e,n,r){const i=Rx(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let c,u;if(FI(t,n)){const d=n.stack;n.stack=[],c=n.enter("autolink");let g=a.move("<");return g+=a.move(n.containerPhrasing(t,{before:g,after:">",...a.current()})),g+=a.move(">"),c(),n.stack=d,g}c=n.enter("link"),u=n.enter("label");let h=a.move("[");return h+=a.move(n.containerPhrasing(t,{before:h,after:"](",...a.current()})),h+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(n.safe(t.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(u=n.enter("destinationRaw"),h+=a.move(n.safe(t.url,{before:h,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${s}`),h+=a.move(" "+i),h+=a.move(n.safe(t.title,{before:h,after:i,...a.current()})),h+=a.move(i),u()),h+=a.move(")"),c(),h}function _te(t,e,n){return FI(t,n)?"<":"["}jI.peek=vte;function jI(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let a=n.enter("label");const c=n.createTracker(r);let u=c.move("[");const h=n.containerPhrasing(t,{before:u,after:"]",...c.current()});u+=c.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...c.current()});return a(),n.stack=d,s(),i==="full"||!h||h!==g?u+=c.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=c.move("]"),u}function vte(){return"["}function Cx(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function xte(t){const e=Cx(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function wte(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function UI(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Ste(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=t.ordered?wte(n):Cx(n);const c=t.ordered?a==="."?")":".":xte(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),UI(n)===a&&d){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=c),n.bulletCurrent=a;const h=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),h}function Tte(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Ete(t,e,n,r){const i=Tte(n);let s=n.bulletCurrent||Cx(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const c=n.createTracker(r);c.move(s+" ".repeat(a-s.length)),c.shift(a);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,c.current()),d);return u(),h;function d(g,b,S){return b?(S?"":" ".repeat(a))+g:(S?s:s+" ".repeat(a-s.length))+g}}function Ate(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,r);return s(),i(),a}const Rte=jg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Cte(t,e,n,r){return(t.children.some(function(a){return Rte(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function kte(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}LI.peek=Mte;function LI(t,e,n,r){const i=kte(n),s=n.enter("strong"),a=n.createTracker(r),c=a.move(i+i);let u=a.move(n.containerPhrasing(t,{after:i,before:c,...a.current()}));const h=u.charCodeAt(0),d=Jp(r.before.charCodeAt(r.before.length-1),h,i);d.inside&&(u=Uf(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=Jp(r.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Uf(g));const S=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},c+u+S}function Mte(t,e,n){return n.options.strong||"*"}function Nte(t,e,n,r){return n.safe(t.value,r)}function Ite(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Ote(t,e,n){const r=(UI(n)+(n.options.ruleSpaces?" ":"")).repeat(Ite(n));return n.options.ruleSpaces?r.slice(0,-1):r}const zI={blockquote:nte,break:eA,code:lte,definition:ute,emphasis:NI,hardBreak:eA,heading:pte,html:II,image:OI,imageReference:PI,inlineCode:DI,link:BI,linkReference:jI,list:Ste,listItem:Ete,paragraph:Ate,root:Cte,strong:LI,text:Nte,thematicBreak:Ote};function Pte(){return{enter:{table:Dte,tableData:tA,tableHeader:tA,tableRow:Bte},exit:{codeText:jte,table:Fte,tableData:l_,tableHeader:l_,tableRow:l_}}}function Dte(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Fte(t){this.exit(t),this.data.inTable=void 0}function Bte(t){this.enter({type:"tableRow",children:[]},t)}function l_(t){this.exit(t)}function tA(t){this.enter({type:"tableCell",children:[]},t)}function jte(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Ute));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Ute(t,e){return e==="|"?e:t}function Lte(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:a,tableCell:u,tableRow:c}};function a(S,R,A,C){return h(d(S,A,C),S.align)}function c(S,R,A,C){const k=g(S,A,C),P=h([k]);return P.slice(0,P.indexOf(`
`))}function u(S,R,A,C){const k=A.enter("tableCell"),P=A.enter("phrasing"),M=A.containerPhrasing(S,{...C,before:s,after:s});return P(),k(),M}function h(S,R){return ete(S,{align:R,alignDelimiters:r,padding:n,stringLength:i})}function d(S,R,A){const C=S.children;let k=-1;const P=[],M=R.enter("table");for(;++k<C.length;)P[k]=g(C[k],R,A);return M(),P}function g(S,R,A){const C=S.children;let k=-1;const P=[],M=R.enter("tableRow");for(;++k<C.length;)P[k]=u(C[k],S,R,A);return M(),P}function b(S,R,A){let C=zI.inlineCode(S,R,A);return A.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function zte(){return{exit:{taskListCheckValueChecked:nA,taskListCheckValueUnchecked:nA,paragraph:$te}}}function Vte(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Hte}}}function nA(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function $te(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,a;for(;++s<i.length;){const c=i[s];if(c.type==="paragraph"){a=c;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Hte(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);s&&c.move(a);let u=zI.listItem(t,e,n,{...r,...c.current()});return s&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(d){return d+a}}function Wte(){return[See(),Hee(),Yee(),Pte(),zte()]}function qte(t){return{extensions:[Tee(),Wee(t),Kee(),Lte(t),Vte()]}}const Xte={tokenize:Jte,partial:!0},VI={tokenize:ene,partial:!0},$I={tokenize:tne,partial:!0},HI={tokenize:nne,partial:!0},Yte={tokenize:rne,partial:!0},WI={name:"wwwAutolink",tokenize:Zte,previous:XI},qI={name:"protocolAutolink",tokenize:Gte,previous:YI},Hs={name:"emailAutolink",tokenize:Qte,previous:KI},ms={};function Kte(){return{text:ms}}let xa=48;for(;xa<123;)ms[xa]=Hs,xa++,xa===58?xa=65:xa===91&&(xa=97);ms[43]=Hs;ms[45]=Hs;ms[46]=Hs;ms[95]=Hs;ms[72]=[Hs,qI];ms[104]=[Hs,qI];ms[87]=[Hs,WI];ms[119]=[Hs,WI];function Qte(t,e,n){const r=this;let i,s;return a;function a(g){return!W0(g)||!KI.call(r,r.previous)||kx(r.events)?n(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(g))}function c(g){return W0(g)?(t.consume(g),c):g===64?(t.consume(g),u):n(g)}function u(g){return g===46?t.check(Yte,d,h)(g):g===45||g===95||Tr(g)?(s=!0,t.consume(g),u):d(g)}function h(g){return t.consume(g),i=!0,u}function d(g){return s&&i&&Dr(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(g)):n(g)}}function Zte(t,e,n){const r=this;return i;function i(a){return a!==87&&a!==119||!XI.call(r,r.previous)||kx(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Xte,t.attempt(VI,t.attempt($I,s),n),n)(a))}function s(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function Gte(t,e,n){const r=this;let i="",s=!1;return a;function a(g){return(g===72||g===104)&&YI.call(r,r.previous)&&!kx(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(g),t.consume(g),c):n(g)}function c(g){if(Dr(g)&&i.length<5)return i+=String.fromCodePoint(g),t.consume(g),c;if(g===58){const b=i.toLowerCase();if(b==="http"||b==="https")return t.consume(g),u}return n(g)}function u(g){return g===47?(t.consume(g),s?h:(s=!0,u)):n(g)}function h(g){return g===null||Qp(g)||dn(g)||Ya(g)||Dg(g)?n(g):t.attempt(VI,t.attempt($I,d),n)(g)}function d(g){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(g)}}function Jte(t,e,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),i):a===46&&r===3?(t.consume(a),s):n(a)}function s(a){return a===null?n(a):e(a)}}function ene(t,e,n){let r,i,s;return a;function a(h){return h===46||h===95?t.check(HI,u,c)(h):h===null||dn(h)||Ya(h)||h!==45&&Dg(h)?u(h):(s=!0,t.consume(h),a)}function c(h){return h===95?r=!0:(i=r,r=void 0),t.consume(h),a}function u(h){return i||r||!s?n(h):e(h)}}function tne(t,e){let n=0,r=0;return i;function i(a){return a===40?(n++,t.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(HI,e,s)(a):a===null||dn(a)||Ya(a)?e(a):(t.consume(a),i)}function s(a){return a===41&&r++,t.consume(a),i}}function nne(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),s):c===93?(t.consume(c),i):c===60||c===null||dn(c)||Ya(c)?e(c):n(c)}function i(c){return c===null||c===40||c===91||dn(c)||Ya(c)?e(c):r(c)}function s(c){return Dr(c)?a(c):n(c)}function a(c){return c===59?(t.consume(c),r):Dr(c)?(t.consume(c),a):n(c)}}function rne(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Tr(s)?n(s):e(s)}}function XI(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||dn(t)}function YI(t){return!Dr(t)}function KI(t){return!(t===47||W0(t))}function W0(t){return t===43||t===45||t===46||t===95||Tr(t)}function kx(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const ine={tokenize:hne,partial:!0};function sne(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:cne,continuation:{tokenize:une},exit:fne}},text:{91:{name:"gfmFootnoteCall",tokenize:lne},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:one,resolveTo:ane}}}}function one(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return c;function c(u){if(!a||!a._balanced)return n(u);const h=Vi(r.sliceSerialize({start:a.end,end:r.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(u):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),e(u))}}function ane(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function lne(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return c;function c(g){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),u}function u(g){return g!==94?n(g):(t.enter("gfmFootnoteCallMarker"),t.consume(g),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(g){if(s>999||g===93&&!a||g===null||g===91||dn(g))return n(g);if(g===93){t.exit("chunkString");const b=t.exit("gfmFootnoteCallString");return i.includes(Vi(r.sliceSerialize(b)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(g)}return dn(g)||(a=!0),s++,t.consume(g),g===92?d:h}function d(g){return g===91||g===92||g===93?(t.consume(g),s++,h):h(g)}}function cne(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,c;return u;function u(R){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(R){return R===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(R)}function d(R){if(a>999||R===93&&!c||R===null||R===91||dn(R))return n(R);if(R===93){t.exit("chunkString");const A=t.exit("gfmFootnoteDefinitionLabelString");return s=Vi(r.sliceSerialize(A)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),b}return dn(R)||(c=!0),a++,t.consume(R),R===92?g:d}function g(R){return R===91||R===92||R===93?(t.consume(R),a++,d):d(R)}function b(R){return R===58?(t.enter("definitionMarker"),t.consume(R),t.exit("definitionMarker"),i.includes(s)||i.push(s),Ft(t,S,"gfmFootnoteDefinitionWhitespace")):n(R)}function S(R){return e(R)}}function une(t,e,n){return t.check(nh,e,t.attempt(ine,e,n))}function fne(t){t.exit("gfmFootnoteDefinition")}function hne(t,e,n){const r=this;return Ft(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):n(s)}}function dne(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,c){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let h=u;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[u][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[u][1].end)},g={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[u][1].start)},b=[["enter",d,c],["enter",a[h][1],c],["exit",a[h][1],c],["enter",g,c]],S=c.parser.constructs.insideSpan.null;S&&ui(b,b.length,0,Fg(S,a.slice(h+1,u),c)),ui(b,b.length,0,[["exit",g,c],["enter",a[u][1],c],["exit",a[u][1],c],["exit",d,c]]),ui(a,h-1,u-h+3,b),u=h+b.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function s(a,c,u){const h=this.previous,d=this.events;let g=0;return b;function b(R){return h===126&&d[d.length-1][1].type!=="characterEscape"?u(R):(a.enter("strikethroughSequenceTemporary"),S(R))}function S(R){const A=jc(h);if(R===126)return g>1?u(R):(a.consume(R),g++,S);if(g<2&&!n)return u(R);const C=a.exit("strikethroughSequenceTemporary"),k=jc(R);return C._open=!k||k===2&&!!A,C._close=!A||A===2&&!!k,c(R)}}}class pne{constructor(){this.map=[]}add(e,n,r){gne(this,e,n,r)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function gne(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function mne(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function yne(){return{flow:{null:{name:"table",tokenize:bne,resolveAll:_ne}}}}function bne(t,e,n){const r=this;let i=0,s=0,a;return c;function c(Y){let K=r.events.length-1;for(;K>-1;){const re=r.events[K][1].type;if(re==="lineEnding"||re==="linePrefix")K--;else break}const ie=K>-1?r.events[K][1].type:null,_e=ie==="tableHead"||ie==="tableRow"?F:u;return _e===F&&r.parser.lazy[r.now().line]?n(Y):_e(Y)}function u(Y){return t.enter("tableHead"),t.enter("tableRow"),h(Y)}function h(Y){return Y===124||(a=!0,s+=1),d(Y)}function d(Y){return Y===null?n(Y):ft(Y)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),S):n(Y):Nt(Y)?Ft(t,d,"whitespace")(Y):(s+=1,a&&(a=!1,i+=1),Y===124?(t.enter("tableCellDivider"),t.consume(Y),t.exit("tableCellDivider"),a=!0,d):(t.enter("data"),g(Y)))}function g(Y){return Y===null||Y===124||dn(Y)?(t.exit("data"),d(Y)):(t.consume(Y),Y===92?b:g)}function b(Y){return Y===92||Y===124?(t.consume(Y),g):g(Y)}function S(Y){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(Y):(t.enter("tableDelimiterRow"),a=!1,Nt(Y)?Ft(t,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):R(Y))}function R(Y){return Y===45||Y===58?C(Y):Y===124?(a=!0,t.enter("tableCellDivider"),t.consume(Y),t.exit("tableCellDivider"),A):$(Y)}function A(Y){return Nt(Y)?Ft(t,C,"whitespace")(Y):C(Y)}function C(Y){return Y===58?(s+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(Y),t.exit("tableDelimiterMarker"),k):Y===45?(s+=1,k(Y)):Y===null||ft(Y)?z(Y):$(Y)}function k(Y){return Y===45?(t.enter("tableDelimiterFiller"),P(Y)):$(Y)}function P(Y){return Y===45?(t.consume(Y),P):Y===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(Y),t.exit("tableDelimiterMarker"),M):(t.exit("tableDelimiterFiller"),M(Y))}function M(Y){return Nt(Y)?Ft(t,z,"whitespace")(Y):z(Y)}function z(Y){return Y===124?R(Y):Y===null||ft(Y)?!a||i!==s?$(Y):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(Y)):$(Y)}function $(Y){return n(Y)}function F(Y){return t.enter("tableRow"),Z(Y)}function Z(Y){return Y===124?(t.enter("tableCellDivider"),t.consume(Y),t.exit("tableCellDivider"),Z):Y===null||ft(Y)?(t.exit("tableRow"),e(Y)):Nt(Y)?Ft(t,Z,"whitespace")(Y):(t.enter("data"),Q(Y))}function Q(Y){return Y===null||Y===124||dn(Y)?(t.exit("data"),Z(Y)):(t.consume(Y),Y===92?ue:Q)}function ue(Y){return Y===92||Y===124?(t.consume(Y),Q):Q(Y)}}function _ne(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],c=!1,u=0,h,d,g;const b=new pne;for(;++n<t.length;){const S=t[n],R=S[1];S[0]==="enter"?R.type==="tableHead"?(c=!1,u!==0&&(rA(b,e,u,h,d),d=void 0,u=0),h={type:"table",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",h,e]])):R.type==="tableRow"||R.type==="tableDelimiterRow"?(r=!0,g=void 0,s=[0,0,0,0],a=[0,n+1,0,0],c&&(c=!1,d={type:"tableBody",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",d,e]])),i=R.type==="tableDelimiterRow"?2:d?3:1):i&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],g=Hd(b,e,s,i,void 0,g),s=[0,0,0,0]),a[2]=n)):R.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],g=Hd(b,e,s,i,void 0,g)),s=a,a=[s[1],n,0,0])):R.type==="tableHead"?(c=!0,u=n):R.type==="tableRow"||R.type==="tableDelimiterRow"?(u=n,s[1]!==0?(a[0]=a[1],g=Hd(b,e,s,i,n,g)):a[1]!==0&&(g=Hd(b,e,a,i,n,g)),i=0):i&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&rA(b,e,u,h,d),b.consume(e.events),n=-1;++n<e.events.length;){const S=e.events[n];S[0]==="enter"&&S[1].type==="table"&&(S[1]._align=mne(e.events,n))}return t}function Hd(t,e,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(s.end=Object.assign({},Gl(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const u=Gl(e.events,n[1]);if(s={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const h=Gl(e.events,n[2]),d=Gl(e.events,n[3]),g={type:c,start:Object.assign({},h),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",g,e]]),r!==2){const b=e.events[n[2]],S=e.events[n[3]];if(b[1].end=Object.assign({},S[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const R=n[2]+1,A=n[3]-n[2]-1;t.add(R,A,[])}}t.add(n[3]+1,0,[["exit",g,e]])}return i!==void 0&&(s.end=Object.assign({},Gl(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function rA(t,e,n,r,i){const s=[],a=Gl(e.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,e])),r.end=Object.assign({},a),s.push(["exit",r,e]),t.add(n+1,0,s)}function Gl(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const vne={name:"tasklistCheck",tokenize:wne};function xne(){return{text:{91:vne}}}function wne(t,e,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),s)}function s(u){return dn(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(u)}function c(u){return ft(u)?e(u):Nt(u)?t.check({tokenize:Sne},e,n)(u):n(u)}}function Sne(t,e,n){return Ft(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Tne(t){return oI([Kte(),sne(),dne(t),yne(),xne()])}const Ene={};function Ane(t){const e=this,n=t||Ene,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Tne(n)),s.push(Wte()),a.push(qte(n))}const Rne=async()=>{const t=await fetch("http://localhost:3333/api/activities");if(!t.ok)throw new Error("Failed to fetch activities");return t.json()},Wd=({content:t,fileName:e,activityId:n})=>{const[r,i]=I.useState("rendered"),s=async()=>{try{await navigator.clipboard.writeText(t),hn.success("Copied to clipboard",`${e} content copied successfully`)}catch(c){console.error("Failed to copy to clipboard:",c),hn.error("Copy failed","Unable to copy content to clipboard")}},a=async()=>{try{const c=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:`.cntx/activities/activities/${n}/${e}`})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to open file via API")}hn.success("Opening file in editor...")}catch(c){console.error("Failed to open in editor:",c),hn.error("Could not open file",c.message)}};return v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between border-b border-border pb-2",children:[v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsxs(Ht,{variant:r==="rendered"?"secondary":"ghost",size:"sm",onClick:()=>i("rendered"),className:"h-6 px-2 text-xs",children:[v.jsx(f6,{className:"w-3 h-3 mr-1"}),"Rendered"]}),v.jsxs(Ht,{variant:r==="raw"?"secondary":"ghost",size:"sm",onClick:()=>i("raw"),className:"h-6 px-2 text-xs",children:[v.jsx(hR,{className:"w-3 h-3 mr-1"}),"Raw"]})]}),v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx(Ht,{variant:"ghost",size:"sm",onClick:s,className:"h-6 px-2 text-xs",title:"Copy to clipboard",children:v.jsx(up,{className:"w-3 h-3"})}),v.jsx(Ht,{variant:"ghost",size:"sm",onClick:a,className:"h-6 px-2 text-xs",title:"Open in editor",children:v.jsx(lv,{className:"w-3 h-3"})})]})]}),v.jsx("div",{className:"overflow-auto max-h-80",children:r==="rendered"?v.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:v.jsx(dee,{remarkPlugins:[Ane],components:{h1:({children:c})=>v.jsx("h1",{className:"text-lg font-semibold mb-3 mt-4 first:mt-0",children:c}),h2:({children:c})=>v.jsx("h2",{className:"text-base font-semibold mb-2 mt-3",children:c}),h3:({children:c})=>v.jsx("h3",{className:"text-sm font-semibold mb-2 mt-3",children:c}),p:({children:c})=>v.jsx("p",{className:"text-sm mb-2 leading-relaxed",children:c}),ul:({children:c})=>v.jsx("ul",{className:"text-sm space-y-1 mb-3 ml-4",children:c}),ol:({children:c})=>v.jsx("ol",{className:"text-sm space-y-1 mb-3 ml-4",children:c}),li:({children:c})=>v.jsx("li",{className:"text-sm",children:c}),code:({children:c})=>v.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs font-mono",children:c}),pre:({children:c})=>v.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs font-mono overflow-x-auto mb-3",children:c}),blockquote:({children:c})=>v.jsx("blockquote",{className:"border-l-2 border-muted-foreground/20 pl-3 italic text-muted-foreground text-sm mb-3",children:c}),table:({children:c})=>v.jsx("table",{className:"text-xs border-collapse border border-border mb-3 w-full",children:c}),th:({children:c})=>v.jsx("th",{className:"border border-border px-2 py-1 bg-muted font-semibold text-left",children:c}),td:({children:c})=>v.jsx("td",{className:"border border-border px-2 py-1",children:c}),input:({type:c,checked:u,...h})=>c==="checkbox"?v.jsx("input",{type:"checkbox",checked:u,disabled:!0,className:"mr-2 scale-75",...h}):v.jsx("input",{...h})},children:t})}):v.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono bg-muted/50 p-3 rounded border",children:t})})]})};function Cne(){const[t,e]=I.useState(null),{data:n=[],isLoading:r,error:i,refetch:s}=$i({queryKey:["activities"],queryFn:Rne,refetchInterval:3e4}),a=u=>{switch(u){case"completed":return v.jsx(Sa,{className:"h-3 w-3"});case"in_progress":return v.jsx(C_,{className:"h-3 w-3"});case"failed":return v.jsx(Ta,{className:"h-3 w-3"});default:return v.jsx(C_,{className:"h-3 w-3"})}},c=u=>v.jsx(Nn,{variant:"outline",className:"text-xs py-0",children:u.replace("_"," ")});return r?v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),v.jsx($o,{className:"h-4 w-4 animate-spin"})]}),v.jsx("div",{className:"space-y-2",children:[1,2,3].map(u=>v.jsx(on,{className:"animate-pulse",children:v.jsxs(_n,{className:"p-3",children:[v.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-2"}),v.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})},u))})]}):i?v.jsxs("div",{className:"space-y-3",children:[v.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),v.jsx(on,{children:v.jsx(_n,{className:"p-4",children:v.jsxs("div",{className:"text-center space-y-2",children:[v.jsx(Ta,{className:"h-6 w-6 mx-auto"}),v.jsx("p",{className:"text-sm font-medium",children:"Failed to load activities"}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running and activities are configured."}),v.jsxs(Ht,{onClick:()=>s(),variant:"outline",size:"sm",children:[v.jsx($o,{className:"h-3 w-3 mr-1"}),"Retry"]})]})})})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h2",{className:"text-lg font-medium flex items-center gap-2",children:[v.jsx(uR,{className:"h-4 w-4"}),"Activities (",n.length,")"]}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Agent task definitions and progress"})]}),v.jsxs(Ht,{onClick:()=>s(),variant:"ghost",size:"sm",children:[v.jsx($o,{className:"h-3 w-3 mr-1"}),"Refresh"]})]}),n.length===0?v.jsx(on,{children:v.jsx(_n,{className:"p-6",children:v.jsxs("div",{className:"text-center space-y-2",children:[v.jsx(cv,{className:"h-8 w-8 mx-auto text-muted-foreground"}),v.jsx("h3",{className:"text-sm font-medium",children:"No activities found"}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities will appear here once they are defined in your .cntx/activities directory."})]})})}):v.jsx("div",{className:"space-y-2",children:n.map(u=>v.jsxs(on,{className:"overflow-hidden",children:[v.jsx(er,{className:"pb-2 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>e(t===u.id?null:u.id),children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[t===u.id?v.jsx(ov,{className:"h-3 w-3"}):v.jsx(fR,{className:"h-3 w-3"}),a(u.status),v.jsx("div",{children:v.jsx(or,{className:"text-sm",children:u.name})})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[c(u.status),u.progress!==void 0&&u.progress>0&&v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(P0,{value:u.progress,className:"w-16 h-2"}),v.jsxs(Nn,{variant:"secondary",className:"text-xs py-0",children:[u.progress,"%"]})]}),u.tags&&u.tags.map(h=>v.jsx(Nn,{variant:"outline",className:"text-xs py-0",children:h},h))]})]})}),t===u.id&&v.jsx(_n,{className:"pt-0 pb-2",children:v.jsxs(Qa,{defaultValue:"readme",className:"w-full",children:[v.jsxs(Za,{className:"grid w-full bg-card grid-cols-4 h-8 space-x-2",children:[v.jsx(Dn,{value:"readme",className:"text-xs border-accent-muted",children:"README"}),v.jsx(Dn,{value:"progress",className:"text-xs border-accent-muted",children:"Progress"}),v.jsx(Dn,{value:"tasks",className:"text-xs border-accent-muted",children:"Tasks"}),v.jsx(Dn,{value:"notes",className:"text-xs border-accent-muted",children:"Notes"})]}),v.jsx(Hn,{value:"readme",className:"mt-2 mb-0",children:v.jsx(Wd,{content:u.files.readme,fileName:"README.md",activityId:u.id})}),v.jsxs(Hn,{value:"progress",className:"mt-2 mb-0",children:[u.progress>0&&v.jsxs("div",{className:"mb-4 p-3 bg-muted/50 rounded-md",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),v.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.progress,"%"]})]}),v.jsx(P0,{value:u.progress,className:"w-full h-3"})]}),v.jsx(Wd,{content:u.files.progress,fileName:"progress.md",activityId:u.id})]}),v.jsx(Hn,{value:"tasks",className:"mt-2 mb-0",children:v.jsx(Wd,{content:u.files.tasks,fileName:"tasks.md",activityId:u.id})}),v.jsx(Hn,{value:"notes",className:"mt-2 mb-0",children:v.jsx(Wd,{content:u.files.notes,fileName:"notes.md",activityId:u.id})})]})})]},u.id))})]})}var kne="Label",QI=I.forwardRef((t,e)=>v.jsx(Ot.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));QI.displayName=kne;var Mne=QI;function iA({className:t,...e}){return v.jsx(Mne,{"data-slot":"label",className:Kt("flex items-center gap-2 text-sm leading-none font-thin select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const Nne=async()=>{const t=await fetch("http://localhost:3333/api/config");if(!t.ok)throw new Error("Failed to fetch config");return t.json()},Ine=async t=>{const e=await fetch("http://localhost:3333/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to save config");return e.json()};function One(){const t=Lc(),[e,n]=I.useState("code"),[r,i]=I.useState(""),{data:s,isLoading:a}=$i({queryKey:["config"],queryFn:Nne});I.useEffect(()=>{s!=null&&s.editor&&(["code","subl","system"].includes(s.editor)?n(s.editor):(n("custom"),i(s.editor)))},[s]);const c=cp({mutationFn:Ine,onSuccess:()=>{t.invalidateQueries({queryKey:["config"]}),hn.success("Editor preference saved")},onError:h=>{hn.error(`Failed to save: ${h.message}`)}}),u=()=>{const d={...s,editor:e==="custom"?r:e};c.mutate(d)};return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(gR,{className:"w-4 h-4"}),"Editor Preference"]})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(iA,{htmlFor:"editor-select",children:"Select your preferred editor"}),v.jsxs(sk,{value:e,onValueChange:n,children:[v.jsx(Av,{id:"editor-select",children:v.jsx(ok,{placeholder:"Select an editor"})}),v.jsxs(Rv,{children:[v.jsx(Jl,{value:"code",children:"Visual Studio Code"}),v.jsx(Jl,{value:"subl",children:"Sublime Text"}),v.jsx(Jl,{value:"system",children:"System Default"}),v.jsx(Jl,{value:"custom",children:"Custom"})]})]})]}),e==="custom"&&v.jsxs("div",{className:"space-y-2",children:[v.jsx(iA,{htmlFor:"custom-editor-input",children:"Custom editor command"}),v.jsx(vk,{id:"custom-editor-input",value:r,onChange:h=>i(h.target.value),placeholder:"e.g., atom -w"})]}),v.jsx("div",{className:"flex justify-end",children:v.jsxs(Ht,{onClick:u,disabled:c.isPending,size:"sm",className:"h-7 text-xs",children:[v.jsx(fp,{className:"w-3 h-3 mr-1"}),c.isPending?"Saving...":"Save"]})})]})]})}const Pne=async t=>{const e=await fetch(`http://localhost:3333/api/${t}`);if(!e.ok)throw new Error(`Failed to fetch ${t} file`);return e.text()},Dne=async({endpoint:t,content:e})=>{const n=await fetch(`http://localhost:3333/api/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(!n.ok)throw new Error(`Failed to save ${t} file`);return n.json()};function sA({fileType:t,endpoint:e,filePath:n}){const r=Lc(),[i,s]=I.useState(""),[a,c]=I.useState(!1),{data:u,isLoading:h}=$i({queryKey:[t],queryFn:()=>Pne(e)});I.useEffect(()=>{u!==void 0&&(s(u),c(!1))},[u]);const d=cp({mutationFn:Dne,onSuccess:()=>{r.invalidateQueries({queryKey:[t]}),c(!1),hn.success(`${t} file saved`)},onError:C=>hn.error(`Failed to save: ${C.message}`)}),g=C=>{s(C),c(C!==u)},b=()=>{d.mutate({endpoint:e,content:i})},S=()=>{s(u||""),c(!1)},R=async()=>{try{await navigator.clipboard.writeText(i),hn.success("Copied to clipboard")}catch(C){console.error("Failed to copy to clipboard:",C),hn.error("Copy failed")}},A=async()=>{try{const C=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});if(!C.ok){const k=await C.json();throw new Error(k.error||"Failed to open file")}hn.success(`Opening ${t} in editor...`)}catch(C){console.error("Failed to open in editor:",C),hn.error(`Could not open file: ${C.message}`)}};return v.jsxs(on,{children:[v.jsxs(er,{className:"flex flex-row items-center justify-between",children:[v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(cv,{className:"w-4 h-4"}),t]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Ht,{variant:"ghost",size:"sm",onClick:R,className:"h-7 px-2",children:v.jsx(up,{className:"w-3 h-3"})}),v.jsx(Ht,{variant:"ghost",size:"sm",onClick:A,className:"h-7 px-2",children:v.jsx(lv,{className:"w-3 h-3"})}),a&&v.jsxs(Ht,{variant:"outline",size:"sm",onClick:S,className:"h-7 text-xs",children:[v.jsx(P6,{className:"w-3 h-3 mr-1"}),"Reset"]}),v.jsxs(Ht,{onClick:b,disabled:!a||d.isPending,size:"sm",className:"h-7 text-xs",children:[v.jsx(fp,{className:"w-3 h-3 mr-1"}),d.isPending?"Saving...":"Save"]})]})]}),v.jsx(_n,{className:"space-y-4",children:h?v.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["Loading ",t," file..."]}):v.jsxs(v.Fragment,{children:[v.jsx(bp,{value:i,onChange:C=>g(C.target.value),placeholder:`# Add ignore patterns for ${t}, one per line`,className:"min-h-[300px] font-mono text-xs"}),v.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.split(`
`).filter(C=>C.trim()&&!C.trim().startsWith("#")).length," active patterns"]})]})})]})}function Fne(){return v.jsxs("div",{className:"space-y-6",children:[v.jsxs(Qa,{defaultValue:"cntxignore",children:[v.jsxs(Za,{children:[v.jsx(Dn,{value:"cntxignore",children:".cntxignore"}),v.jsx(Dn,{value:"gitignore",children:".gitignore"})]}),v.jsx(Hn,{value:"cntxignore",children:v.jsx(sA,{fileType:".cntxignore",endpoint:"cntxignore",filePath:".cntxignore"})}),v.jsx(Hn,{value:"gitignore",children:v.jsx(sA,{fileType:".gitignore",endpoint:"gitignore",filePath:".gitignore"})})]}),v.jsx(on,{children:v.jsx(_n,{className:"pt-6",children:v.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[v.jsx("div",{children:v.jsx("strong",{children:"Common patterns:"})}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"node_modules/**"})," - Ignore all node_modules"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"*.log"})," - Ignore log files"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"src/debug/**"})," - Ignore debug directory"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"**/*.test.*"})," - Ignore test files"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:".git/**"})," - Ignore git directory"]})]})})})]})}function Bne(){return v.jsxs(Qa,{defaultValue:"ignore",children:[v.jsxs(Za,{children:[v.jsx(Dn,{value:"ignore",children:"File Ignore Patterns"}),v.jsx(Dn,{value:"editor",children:"Editor Preference"})]}),v.jsx(Hn,{value:"ignore",children:v.jsx(Fne,{})}),v.jsx(Hn,{value:"editor",children:v.jsx(One,{})})]})}function jne(){return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(hR,{className:"w-4 h-4"}),"Context Management for React Developers"]})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsxs(_p,{className:"border-accent",children:[v.jsx(yg,{className:"w-4 h-4"}),v.jsxs(vp,{children:[v.jsx("strong",{children:"Target Audience:"})," React developers who want AI context management as trivial to run as a linter."]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-thin mb-2",children:"What This Tool Does"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[v.jsx("div",{children:" Creates focused code bundles for AI consumption (not copy-paste chaos)"}),v.jsx("div",{children:" Provides function-level semantic chunking with surgical precision"}),v.jsx("div",{children:" Acts as MCP server so AI agents access your codebase through APIs"}),v.jsx("div",{children:" Automatically organizes code by bundle membership and complexity"})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-thin mb-2",children:"Quick Start"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[v.jsxs("div",{children:["1. ",v.jsx("strong",{children:"MCP Setup:"})," ",v.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"})]}),v.jsxs("div",{children:["2. ",v.jsx("strong",{children:"Create Bundles:"})," Use Bundle Config tab to organize your code"]}),v.jsxs("div",{children:["3. ",v.jsx("strong",{children:"AI Access:"})," Claude/Cursor connects via MCP automatically"]}),v.jsxs("div",{children:["4. ",v.jsx("strong",{children:"Semantic Analysis:"})," View function-level chunks in Semantic Chunks tab"]})]})]})]})]})]})}function Une(){return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(v6,{className:"w-4 h-4"}),"Function-Level Semantic Chunking"]})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-thin mb-2",children:"Why Function-Level Chunks Matter"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Surgical precision:"})," AI gets exactly the function it needs, not entire files"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Context inclusion:"})," Each chunk includes necessary imports and types"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Bundle inheritance:"})," Functions automatically grouped by bundle membership"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Complexity analysis:"})," Identify refactoring candidates with complexity scoring"]})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-thin mb-2",children:"Filtering & Organization"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[v.jsxs("div",{children:[" ",v.jsx("strong",{children:"By Bundle:"})," See all frontend vs server functions"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"By Type:"})," React components, hooks, arrow functions, methods"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"By Complexity:"})," Find high-complexity functions needing refactoring"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"By Purpose:"})," API handlers, validation, data processing"]})]})]}),v.jsx("div",{className:"p-3 rounded border border-accent",children:v.jsxs("div",{className:"text-xs",children:[v.jsx("strong",{children:" Pro Tip:"})," Large functions that don't fit in chunks signal refactoring opportunities. The tool nudges better code practices rather than working around bad ones."]})})]})]})}function Lne(){return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(w6,{className:"w-4 h-4"}),"MCP Server Integration"]})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Agents Access Your Code"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Gated access:"})," AI doesn't dump entire codebase, uses API navigation"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Bundle-first approach:"})," AI sees organized bundles before master bundle"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Real-time updates:"})," Changes immediately available to connected AI"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Function-level precision:"})," AI can request specific functions via semantic chunks"]})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-thin mb-2",children:"Available MCP Tools"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[v.jsxs("div",{children:[" ",v.jsx("code",{children:"list_bundles"})," - Show available bundle organization"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"get_bundle"})," - Retrieve focused code bundles"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"get_semantic_chunks"})," - Access function-level chunks"]}),v.jsxs("div",{children:[" ",v.jsx("code",{children:"get_file_tree"})," - Navigate project structure"]})]})]}),v.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:v.jsxs("div",{className:"text-xs",children:[v.jsx("strong",{children:" Setup:"})," Run ",v.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"}),"and your AI tools (Claude Desktop, Cursor) will automatically connect."]})})]})]})}function zne(){return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(E6,{className:"w-4 h-4"}),"AI-Assisted Context Management"]})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Navigates Your Code"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Gated access:"})," AI doesn't see master bundle first - uses API navigation"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Function-level precision:"})," Requests specific functions via semantic chunks"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Bundle discovery:"})," Explores organized bundles before diving deep"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Context control:"})," You control what AI sees through bundle organization"]})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-thin mb-2",children:"AI Bundle Creation (Coming Soon)"}),v.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[v.jsxs("div",{children:[" ",v.jsx("strong",{children:'"Find all API stuff":'})," AI analyzes semantic chunks and creates focused bundles"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:'"Group React hooks":'})," Intelligent pattern detection and organization"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:'"Optimize bundles":'})," AI suggests better organization based on code relationships"]}),v.jsxs("div",{children:[" ",v.jsx("strong",{children:"Smart maintenance:"})," AI updates bundles as your code evolves"]})]})]}),v.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:v.jsxs("div",{className:"text-xs",children:[v.jsx("strong",{children:" Philosophy:"})," Context management as trivial as running a linter. AI handles the heavy lifting, you focus on building features."]})})]})]})}function Vne(){return v.jsxs(on,{children:[v.jsx(er,{children:v.jsxs(or,{className:"flex items-center gap-2 text-sm font-thin",children:[v.jsx(K6,{className:"w-4 h-4"}),"Essential CLI Commands"]})}),v.jsx(_n,{children:v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-thin mb-2",children:"Most Used Commands"}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui setup-mcp"}),v.jsx("span",{className:"text-xs text-muted-foreground",children:"Setup MCP for AI tools"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui watch"}),v.jsx("span",{className:"text-xs text-muted-foreground",children:"Start server (use web interface)"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui mcp"}),v.jsx("span",{className:"text-xs text-muted-foreground",children:"Start MCP server only"})]})]})]}),v.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:v.jsxs("div",{className:"text-xs text-muted-foreground",children:[v.jsx("strong",{children:"Recommendation:"})," Use the web interface for bundle management. CLI is mainly for automation and MCP server startup."]})})]})})]})}function $ne(){return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Help & Documentation"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Usage guides and workflow instructions"})]}),v.jsxs(Qa,{defaultValue:"usage-guidance",className:"w-full",children:[v.jsxs(Za,{className:"grid w-full grid-cols-5 h-8",children:[v.jsx(Dn,{value:"usage-guidance",className:"text-xs",children:"Usage Guidance"}),v.jsx(Dn,{value:"semantic-features",className:"text-xs",children:"Semantic Features"}),v.jsx(Dn,{value:"mcp-features",className:"text-xs",children:"MCP Features"}),v.jsx(Dn,{value:"ai-workflow",className:"text-xs",children:"AI Workflow"}),v.jsx(Dn,{value:"cli-reference",className:"text-xs",children:"CLI Reference"})]}),v.jsx(Hn,{value:"usage-guidance",className:"mt-2",children:v.jsx(jne,{})}),v.jsx(Hn,{value:"semantic-features",className:"mt-2",children:v.jsx(Une,{})}),v.jsx(Hn,{value:"mcp-features",className:"mt-2",children:v.jsx(Lne,{})}),v.jsx(Hn,{value:"ai-workflow",className:"mt-2",children:v.jsx(zne,{})}),v.jsx(Hn,{value:"cli-reference",className:"mt-2",children:v.jsx(Vne,{})})]})]})}function Hne(){const[t,e]=I.useState("SELECT name, purpose, complexity_score FROM semantic_chunks ORDER BY complexity_score DESC LIMIT 10;"),[n,r]=I.useState(null),[i,s]=I.useState(!1),[a,c]=I.useState(null),u=[{name:"Top Chunks by Complexity",sql:"SELECT name, purpose, complexity_score, file_path FROM semantic_chunks ORDER BY complexity_score DESC LIMIT 10;"},{name:"Chunks by Purpose",sql:"SELECT purpose, COUNT(*) as count FROM semantic_chunks GROUP BY purpose ORDER BY count DESC;"},{name:"Agent Interaction History",sql:"SELECT role, content, timestamp FROM agent_memory ORDER BY timestamp DESC LIMIT 20;"},{name:"Vector Embedding Stats",sql:"SELECT model_name, COUNT(*) as count FROM vector_embeddings GROUP BY model_name;"},{name:"Unassigned Chunks",sql:"SELECT name, file_path FROM semantic_chunks WHERE purpose = 'Utility function' LIMIT 10;"}];I.useEffect(()=>{h()},[]);const h=async()=>{try{const b=await(await fetch("/api/database/info")).json();c(b)}catch{c({error:"Failed to load database info"})}},d=async()=>{if(t.trim()){s(!0);try{const b=await(await fetch("/api/database/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.trim()})})).json();r(b)}catch{r({error:"Failed to execute query"})}finally{s(!1)}}};return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-lg font-thin tracking-tight flex items-center gap-2",children:[v.jsx(av,{className:"w-4 h-4 text-vesper-accent"}),"Persistent Intelligence Explorer"]}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Querying the project's persistent brain"})]}),a&&v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(Nn,{variant:"outline",className:"border-vesper font-thin text-[9px] uppercase tracking-widest",children:[a.chunkCount," Chunks"]}),v.jsxs(Nn,{variant:"outline",className:"border-vesper font-thin text-[9px] uppercase tracking-widest",children:[a.embeddingCount," Vectors"]}),v.jsx(Nn,{variant:"outline",className:"border-vesper font-thin text-[9px] uppercase tracking-widest",children:a.sizeFormatted})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[v.jsxs(on,{className:"border-vesper bg-vesper-card",children:[v.jsx(er,{className:"pb-3",children:v.jsx(or,{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted",children:"SQL Interface"})}),v.jsxs(_n,{className:"space-y-4",children:[v.jsx(bp,{value:t,onChange:g=>e(g.target.value),className:"font-mono text-xs bg-black/30 border-vesper min-h-[150px] color-vesper-fg"}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-[10px] color-vesper-muted italic",children:" + Enter to execute"}),v.jsxs(Ht,{onClick:d,disabled:i,size:"sm",className:"bg-vesper-accent text-black hover:opacity-90 h-8",children:[i?v.jsx($o,{className:"w-3 h-3 animate-spin mr-2"}):v.jsx(pR,{className:"w-3 h-3 mr-2"}),"Execute Query"]})]})]})]}),n&&v.jsxs(on,{className:"border-vesper bg-vesper-card overflow-hidden",children:[v.jsx(er,{className:"pb-3 border-b border-vesper",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx(or,{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted",children:"Results"}),n.results&&v.jsxs(Nn,{variant:"outline",className:"text-[9px] border-vesper",children:[n.results.length," rows"]})]})}),v.jsx(_n,{className:"p-0",children:n.error?v.jsx("div",{className:"p-4 text-xs font-mono text-red-400 bg-red-950/10",children:n.error}):n.results&&n.results.length>0?v.jsx("div",{className:"overflow-auto max-h-[400px]",children:v.jsxs("table",{className:"w-full border-collapse text-[11px]",children:[v.jsx("thead",{children:v.jsx("tr",{className:"bg-black/40 text-left color-vesper-muted border-b border-vesper",children:Object.keys(n.results[0]).map(g=>v.jsx("th",{className:"p-2 font-thin uppercase tracking-tighter",children:g},g))})}),v.jsx("tbody",{children:n.results.map((g,b)=>v.jsx("tr",{className:"border-b border-vesper/30 hover:bg-white/5",children:Object.values(g).map((S,R)=>v.jsx("td",{className:"p-2 color-vesper-fg font-mono max-w-[200px] truncate",children:S===null?v.jsx("span",{className:"opacity-30",children:"null"}):String(S)},R))},b))})]})}):v.jsx("div",{className:"p-8 text-center text-xs color-vesper-muted italic",children:"No results returned"})})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs(on,{className:"border-vesper bg-vesper-card",children:[v.jsx(er,{children:v.jsxs(or,{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted flex items-center gap-2",children:[v.jsx(X6,{className:"w-3 h-3"}),"Schema Explorer"]})}),v.jsx(_n,{className:"space-y-2",children:["semantic_chunks","vector_embeddings","agent_memory","agent_sessions","bundles"].map(g=>v.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-black/20 border border-vesper/50 group hover:border-vesper-accent cursor-pointer",onClick:()=>e(`SELECT * FROM ${g} LIMIT 10;`),children:[v.jsx("span",{className:"text-[11px] font-mono color-vesper-fg",children:g}),v.jsx(Nn,{variant:"outline",className:"text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"Select"})]},g))})]}),v.jsxs(on,{className:"border-vesper bg-vesper-card",children:[v.jsx(er,{children:v.jsxs(or,{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted flex items-center gap-2",children:[v.jsx(HD,{className:"w-3 h-3"}),"Intelligence Queries"]})}),v.jsx(_n,{className:"space-y-2",children:u.map((g,b)=>v.jsx(Ht,{variant:"ghost",className:"w-full justify-start text-left h-auto p-2 hover:bg-white/5 border border-transparent hover:border-vesper",onClick:()=>{e(g.sql),d()},children:v.jsxs("div",{children:[v.jsx("div",{className:"text-[11px] color-vesper-accent font-bold",children:g.name}),v.jsx("div",{className:"text-[9px] color-vesper-muted truncate max-w-[180px]",children:g.sql})]})},b))})]})]})]})]})}const Wne=new MA,qne=[{id:"bundles",label:"Bundles & Files",icon:R_},{id:"semantic",label:"Semantic Chunks",icon:$6},{id:"vector-db",label:"Vector Database",icon:dR},{id:"database",label:"SQLite Database",icon:av},{id:"activities",label:"Activities",icon:uR},{id:"settings",label:"Settings",icon:gR},{id:"ai-rules",label:"AI Rules",icon:k_},{id:"system-status",label:"System Status",icon:Sa},{id:"help",label:"Help & Documentation",icon:e6}],ZI="cntx-ui-preferences",Xne=()=>{try{const t=localStorage.getItem(ZI);if(t)return{...oA,...JSON.parse(t)}}catch(t){console.warn("Failed to load preferences from localStorage:",t)}return oA},Yne=t=>{try{localStorage.setItem(ZI,JSON.stringify(t))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}},oA={sidebarCollapsed:!1,activeSection:"bundles"};function Kne(){const[t,e]=I.useState("connecting"),[n,r]=I.useState("unknown"),[i,s]=I.useState(Xne),{sidebarCollapsed:a,activeSection:c}=i,u=b=>{const S={...i,...b};s(S),Yne(S)},h=b=>{u({sidebarCollapsed:b})},d=b=>{u({activeSection:b})};I.useEffect(()=>{const b=new WebSocket("ws://localhost:3333");b.onopen=()=>e("connected"),b.onclose=()=>e("disconnected");const S=async()=>{try{const A=await fetch("/api/mcp-status");if(A.ok){const{running:C}=await A.json();r(C?"running":"stopped")}else r("stopped")}catch{r("stopped")}};S();const R=setInterval(S,1e4);return()=>{b.close(),clearInterval(R)}},[]);const g=()=>{switch(c){case"bundles":return v.jsx("div",{className:"flex-1 min-h-0 flex",children:v.jsx("main",{className:"flex-1 min-h-0 flex flex-col",children:v.jsx(HL,{})})});case"semantic":return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Semantic Chunks"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"AI-powered code organization and intelligent bundles"})]}),v.jsx(t8,{})]});case"vector-db":return v.jsx("div",{className:"space-y-6",children:v.jsx(KK,{})});case"database":return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"SQLite Database"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Query and inspect the bundle database"})]}),v.jsx(Hne,{})]});case"activities":return v.jsx(Cne,{});case"settings":return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Settings"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure file visibility and bundle patterns"})]}),v.jsx(Bne,{})]});case"ai-rules":return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"AI Rules"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure AI context and project guidelines"})]}),v.jsx(QL,{})]});case"system-status":return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"System Status"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Overall health and configuration of cntx-ui"})]}),v.jsx(e8,{})]});case"help":return v.jsx($ne,{});default:return null}};return v.jsx(OA,{client:Wne,children:v.jsxs("div",{className:"h-screen bg-background overflow-hidden flex flex-col",children:[a&&v.jsxs("div",{className:"h-16 border-b flex items-center px-4 flex-shrink-0",children:[v.jsx("div",{className:"flex items-center gap-4 flex-1",children:v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs("div",{children:[v.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]})})}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),v.jsx(fT,{})]})]}),v.jsxs("div",{className:"flex flex-1",style:{height:a?"calc(100vh - 4rem)":"100%"},children:[v.jsxs("div",{className:`${a?"w-16":"w-64"} border-r flex flex-col h-full transition-all duration-200`,children:[!a&&v.jsx("div",{className:"p-4 border-b flex-shrink-0",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),v.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]}),v.jsx(Ht,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:v.jsx(fv,{className:"w-3 h-3"})})]})}),a&&v.jsx("div",{className:"p-3 border-b flex-shrink-0 flex justify-center",children:v.jsx(Ht,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"h-8 w-8 p-0",children:v.jsx(M6,{className:"w-4 h-4"})})}),v.jsx("nav",{className:`${a?"p-2":"p-4"} space-y-1 flex-1 overflow-y-auto`,children:qne.map(b=>{const S=b.icon,R=c===b.id;return v.jsxs(Ht,{variant:R?"secondary":"ghost",className:`${a?"w-12 h-12 p-0 justify-center":"w-full justify-start h-8 text-xs font-thin"} transition-all`,onClick:()=>d(b.id),title:a?b.label:void 0,children:[v.jsx(S,{className:`${a?"w-4 h-4":"w-3 h-3 mr-2"}`}),!a&&b.label]},b.id)})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto pb-12",children:v.jsx("main",{className:"p-6 max-w-6xl",children:g()})})]}),v.jsxs("div",{className:"fixed left-0 right-0 h-10 bg-card border-t border-border px-4 flex items-center justify-between z-40 bottom-0",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${t==="connected"?"bg-[color:var(--color-success)]":t==="connecting"?"bg-[color:var(--color-warning)]":"bg-destructive"}`}),v.jsxs("span",{className:"text-xs font-thin",children:["UI: ",t==="connected"?"Live":t==="connecting"?"Connecting":"Offline"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${n==="running"?"bg-[color:var(--color-success)]":n==="stopped"?"bg-destructive":"bg-muted-foreground"}`}),v.jsxs("span",{className:"text-xs font-thin",children:["MCP SERVER: ",n==="running"?"Running":n==="stopped"?"Stopped":"Unknown"]})]})]}),!a&&v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),v.jsx(fT,{})]})]})]})})}const Qne=new MA;h4.createRoot(document.getElementById("root")).render(v.jsx(I.StrictMode,{children:v.jsx(OA,{client:Qne,children:v.jsxs(eB,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[v.jsx(Kne,{}),v.jsx($F,{})]})})}));
