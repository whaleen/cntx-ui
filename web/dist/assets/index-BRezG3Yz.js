var DD=Object.defineProperty;var YT=t=>{throw TypeError(t)};var jD=(t,e,n)=>e in t?DD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>jD(t,typeof e!="symbol"?e+"":e,n),Eb=(t,e,n)=>e.has(t)||YT("Cannot "+n);var le=(t,e,n)=>(Eb(t,e,"read from private field"),n?n.call(t):e.get(t)),ut=(t,e,n)=>e.has(t)?YT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),tt=(t,e,n,r)=>(Eb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Tt=(t,e,n)=>(Eb(t,e,"access private method"),n);var Vd=(t,e,n,r)=>({set _(s){tt(t,e,s,n)},get _(){return le(t,e,r)}});function FD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var KT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wR(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Ab={exports:{}},gf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function BD(){if(ZT)return gf;ZT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:i}}return gf.Fragment=e,gf.jsx=n,gf.jsxs=n,gf}var QT;function LD(){return QT||(QT=1,Ab.exports=BD()),Ab.exports}var m=LD(),Rb={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function UD(){if(GT)return Rt;GT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function C(D,te,G){this.props=D,this.context=te,this.refs=A,this.updater=G||w}C.prototype.isReactComponent={},C.prototype.setState=function(D,te){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,te,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function I(){}I.prototype=C.prototype;function M(D,te,G){this.props=D,this.context=te,this.refs=A,this.updater=G||w}var k=M.prototype=new I;k.constructor=M,R(k,C.prototype),k.isPureReactComponent=!0;var P=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function H(D,te,G,F,ge,ee){return G=ee.ref,{$$typeof:t,type:D,key:te,ref:G!==void 0?G:null,props:ee}}function Y(D,te){return H(D.type,te,void 0,void 0,void 0,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function K(D){var te={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(G){return te[G]})}var Z=/\/+/g;function ae(D,te){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):te.toString(36)}function _e(){}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(_e,_e):(D.status="pending",D.then(function(te){D.status==="pending"&&(D.status="fulfilled",D.value=te)},function(te){D.status==="pending"&&(D.status="rejected",D.reason=te)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Re(D,te,G,F,ge){var ee=typeof D;(ee==="undefined"||ee==="boolean")&&(D=null);var we=!1;if(D===null)we=!0;else switch(ee){case"bigint":case"string":case"number":we=!0;break;case"object":switch(D.$$typeof){case t:case e:we=!0;break;case d:return we=D._init,Re(we(D._payload),te,G,F,ge)}}if(we)return ge=ge(D),we=F===""?"."+ae(D,0):F,P(ge)?(G="",we!=null&&(G=we.replace(Z,"$&/")+"/"),Re(ge,te,G,"",function(Me){return Me})):ge!=null&&(J(ge)&&(ge=Y(ge,G+(ge.key==null||D&&D.key===ge.key?"":(""+ge.key).replace(Z,"$&/")+"/")+we)),te.push(ge)),1;we=0;var ue=F===""?".":F+":";if(P(D))for(var ce=0;ce<D.length;ce++)F=D[ce],ee=ue+ae(F,ce),we+=Re(F,te,G,ee,ge);else if(ce=b(D),typeof ce=="function")for(D=ce.call(D),ce=0;!(F=D.next()).done;)F=F.value,ee=ue+ae(F,ce++),we+=Re(F,te,G,ee,ge);else if(ee==="object"){if(typeof D.then=="function")return Re(oe(D),te,G,F,ge);throw te=String(D),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return we}function ie(D,te,G){if(D==null)return D;var F=[],ge=0;return Re(D,F,"","",function(ee){return te.call(G,ee,ge++)}),F}function Ae(D){if(D._status===-1){var te=D._result;te=te(),te.then(function(G){(D._status===0||D._status===-1)&&(D._status=1,D._result=G)},function(G){(D._status===0||D._status===-1)&&(D._status=2,D._result=G)}),D._status===-1&&(D._status=0,D._result=te)}if(D._status===1)return D._result.default;throw D._result}var he=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function $e(){}return Rt.Children={map:ie,forEach:function(D,te,G){ie(D,function(){te.apply(this,arguments)},G)},count:function(D){var te=0;return ie(D,function(){te++}),te},toArray:function(D){return ie(D,function(te){return te})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Rt.Component=C,Rt.Fragment=n,Rt.Profiler=s,Rt.PureComponent=M,Rt.StrictMode=r,Rt.Suspense=u,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return L.H.useMemoCache(D)}},Rt.cache=function(D){return function(){return D.apply(null,arguments)}},Rt.cloneElement=function(D,te,G){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var F=R({},D.props),ge=D.key,ee=void 0;if(te!=null)for(we in te.ref!==void 0&&(ee=void 0),te.key!==void 0&&(ge=""+te.key),te)!O.call(te,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&te.ref===void 0||(F[we]=te[we]);var we=arguments.length-2;if(we===1)F.children=G;else if(1<we){for(var ue=Array(we),ce=0;ce<we;ce++)ue[ce]=arguments[ce+2];F.children=ue}return H(D.type,ge,void 0,void 0,ee,F)},Rt.createContext=function(D){return D={$$typeof:a,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},Rt.createElement=function(D,te,G){var F,ge={},ee=null;if(te!=null)for(F in te.key!==void 0&&(ee=""+te.key),te)O.call(te,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ge[F]=te[F]);var we=arguments.length-2;if(we===1)ge.children=G;else if(1<we){for(var ue=Array(we),ce=0;ce<we;ce++)ue[ce]=arguments[ce+2];ge.children=ue}if(D&&D.defaultProps)for(F in we=D.defaultProps,we)ge[F]===void 0&&(ge[F]=we[F]);return H(D,ee,void 0,void 0,null,ge)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(D){return{$$typeof:l,render:D}},Rt.isValidElement=J,Rt.lazy=function(D){return{$$typeof:d,_payload:{_status:-1,_result:D},_init:Ae}},Rt.memo=function(D,te){return{$$typeof:h,type:D,compare:te===void 0?null:te}},Rt.startTransition=function(D){var te=L.T,G={};L.T=G;try{var F=D(),ge=L.S;ge!==null&&ge(G,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then($e,he)}catch(ee){he(ee)}finally{L.T=te}},Rt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Rt.use=function(D){return L.H.use(D)},Rt.useActionState=function(D,te,G){return L.H.useActionState(D,te,G)},Rt.useCallback=function(D,te){return L.H.useCallback(D,te)},Rt.useContext=function(D){return L.H.useContext(D)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(D,te){return L.H.useDeferredValue(D,te)},Rt.useEffect=function(D,te,G){var F=L.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(D,te)},Rt.useId=function(){return L.H.useId()},Rt.useImperativeHandle=function(D,te,G){return L.H.useImperativeHandle(D,te,G)},Rt.useInsertionEffect=function(D,te){return L.H.useInsertionEffect(D,te)},Rt.useLayoutEffect=function(D,te){return L.H.useLayoutEffect(D,te)},Rt.useMemo=function(D,te){return L.H.useMemo(D,te)},Rt.useOptimistic=function(D,te){return L.H.useOptimistic(D,te)},Rt.useReducer=function(D,te,G){return L.H.useReducer(D,te,G)},Rt.useRef=function(D){return L.H.useRef(D)},Rt.useState=function(D){return L.H.useState(D)},Rt.useSyncExternalStore=function(D,te,G){return L.H.useSyncExternalStore(D,te,G)},Rt.useTransition=function(){return L.H.useTransition()},Rt.version="19.1.0",Rt}var JT;function L_(){return JT||(JT=1,Rb.exports=UD()),Rb.exports}var N=L_();const ko=ou(N),U_=FD({__proto__:null,default:ko},[N]);var Cb={exports:{}},mf={},kb={exports:{}},Nb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function zD(){return e2||(e2=1,function(t){function e(ie,Ae){var he=ie.length;ie.push(Ae);e:for(;0<he;){var $e=he-1>>>1,D=ie[$e];if(0<s(D,Ae))ie[$e]=Ae,ie[he]=D,he=$e;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var Ae=ie[0],he=ie.pop();if(he!==Ae){ie[0]=he;e:for(var $e=0,D=ie.length,te=D>>>1;$e<te;){var G=2*($e+1)-1,F=ie[G],ge=G+1,ee=ie[ge];if(0>s(F,he))ge<D&&0>s(ee,F)?(ie[$e]=ee,ie[ge]=he,$e=ge):(ie[$e]=F,ie[G]=he,$e=G);else if(ge<D&&0>s(ee,he))ie[$e]=ee,ie[ge]=he,$e=ge;else break e}}return Ae}function s(ie,Ae){var he=ie.sortIndex-Ae.sortIndex;return he!==0?he:ie.id-Ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,b=3,w=!1,R=!1,A=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(ie){for(var Ae=n(h);Ae!==null;){if(Ae.callback===null)r(h);else if(Ae.startTime<=ie)r(h),Ae.sortIndex=Ae.expirationTime,e(u,Ae);else break;Ae=n(h)}}function L(ie){if(A=!1,P(ie),!R)if(n(u)!==null)R=!0,O||(O=!0,ae());else{var Ae=n(h);Ae!==null&&Re(L,Ae.startTime-ie)}}var O=!1,H=-1,Y=5,J=-1;function K(){return C?!0:!(t.unstable_now()-J<Y)}function Z(){if(C=!1,O){var ie=t.unstable_now();J=ie;var Ae=!0;try{e:{R=!1,A&&(A=!1,M(H),H=-1),w=!0;var he=b;try{t:{for(P(ie),g=n(u);g!==null&&!(g.expirationTime>ie&&K());){var $e=g.callback;if(typeof $e=="function"){g.callback=null,b=g.priorityLevel;var D=$e(g.expirationTime<=ie);if(ie=t.unstable_now(),typeof D=="function"){g.callback=D,P(ie),Ae=!0;break t}g===n(u)&&r(u),P(ie)}else r(u);g=n(u)}if(g!==null)Ae=!0;else{var te=n(h);te!==null&&Re(L,te.startTime-ie),Ae=!1}}break e}finally{g=null,b=he,w=!1}Ae=void 0}}finally{Ae?ae():O=!1}}}var ae;if(typeof k=="function")ae=function(){k(Z)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,oe=_e.port2;_e.port1.onmessage=Z,ae=function(){oe.postMessage(null)}}else ae=function(){I(Z,0)};function Re(ie,Ae){H=I(function(){ie(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(ie){switch(b){case 1:case 2:case 3:var Ae=3;break;default:Ae=b}var he=b;b=Ae;try{return ie()}finally{b=he}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(ie,Ae){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var he=b;b=ie;try{return Ae()}finally{b=he}},t.unstable_scheduleCallback=function(ie,Ae,he){var $e=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?$e+he:$e):he=$e,ie){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=he+D,ie={id:d++,callback:Ae,priorityLevel:ie,startTime:he,expirationTime:D,sortIndex:-1},he>$e?(ie.sortIndex=he,e(h,ie),n(u)===null&&ie===n(h)&&(A?(M(H),H=-1):A=!0,Re(L,he-$e))):(ie.sortIndex=D,e(u,ie),R||w||(R=!0,O||(O=!0,ae()))),ie},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(ie){var Ae=b;return function(){var he=b;b=Ae;try{return ie.apply(this,arguments)}finally{b=he}}}}(Nb)),Nb}var t2;function VD(){return t2||(t2=1,kb.exports=zD()),kb.exports}var Mb={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function $D(){if(n2)return xr;n2=1;var t=L_();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(u,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:h,implementation:d}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xr.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,d)},xr.flushSync=function(u){var h=a.T,d=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=h,r.p=d,r.d.f()}},xr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},xr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},xr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:w}):d==="script"&&r.d.X(u,{crossOrigin:g,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},xr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin);r.d.L(u,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xr.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=l(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},xr.requestFormReset=function(u){r.d.r(u)},xr.unstable_batchedUpdates=function(u,h){return u(h)},xr.useFormState=function(u,h,d){return a.H.useFormState(u,h,d)},xr.useFormStatus=function(){return a.H.useHostTransitionStatus()},xr.version="19.1.0",xr}var r2;function SR(){if(r2)return Mb.exports;r2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mb.exports=$D(),Mb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function HD(){if(s2)return mf;s2=1;var t=VD(),e=L_(),n=SR();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(i(o)!==o)throw Error(r(188))}function u(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(r(188));return c!==o?null:o}for(var f=o,p=c;;){var x=f.return;if(x===null)break;var T=x.alternate;if(T===null){if(p=x.return,p!==null){f=p;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===f)return l(x),o;if(T===p)return l(x),c;T=T.sibling}throw Error(r(188))}if(f.return!==p.return)f=x,p=T;else{for(var j=!1,V=x.child;V;){if(V===f){j=!0,f=x,p=T;break}if(V===p){j=!0,p=x,f=T;break}V=V.sibling}if(!j){for(V=T.child;V;){if(V===f){j=!0,f=T,p=x;break}if(V===p){j=!0,p=T,f=x;break}V=V.sibling}if(!j)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),k=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ae(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var _e=Symbol.for("react.client.reference");function oe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===_e?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case R:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case O:return"SuspenseList";case J:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case k:return(o.displayName||"Context")+".Provider";case M:return(o._context.displayName||"Context")+".Consumer";case P:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return c=o.displayName||null,c!==null?c:oe(o.type)||"Memo";case Y:c=o._payload,o=o._init;try{return oe(o(c))}catch{}}return null}var Re=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},$e=[],D=-1;function te(o){return{current:o}}function G(o){0>D||(o.current=$e[D],$e[D]=null,D--)}function F(o,c){D++,$e[D]=o.current,o.current=c}var ge=te(null),ee=te(null),we=te(null),ue=te(null);function ce(o,c){switch(F(we,c),F(ee,o),F(ge,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?wT(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=wT(c),o=ST(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(ge),F(ge,o)}function Me(){G(ge),G(ee),G(we)}function ze(o){o.memoizedState!==null&&F(ue,o);var c=ge.current,f=ST(c,o.type);c!==f&&(F(ee,o),F(ge,f))}function Ue(o){ee.current===o&&(G(ge),G(ee)),ue.current===o&&(G(ue),uf._currentValue=he)}var Ke=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,ot=t.unstable_cancelCallback,kt=t.unstable_shouldYield,Et=t.unstable_requestPaint,Ot=t.unstable_now,Ht=t.unstable_getCurrentPriorityLevel,en=t.unstable_ImmediatePriority,Is=t.unstable_UserBlockingPriority,Kn=t.unstable_NormalPriority,mr=t.unstable_LowPriority,Js=t.unstable_IdlePriority,ei=t.log,bu=t.unstable_setDisableYieldValue,Oe=null,He=null;function ft(o){if(typeof ei=="function"&&bu(o),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Oe,o)}catch{}}var pt=Math.clz32?Math.clz32:Os,Zt=Math.log,Rr=Math.LN2;function Os(o){return o>>>=0,o===0?32:31-(Zt(o)/Rr|0)|0}var yr=256,Yr=4194304;function Cr(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function zn(o,c,f){var p=o.pendingLanes;if(p===0)return 0;var x=0,T=o.suspendedLanes,j=o.pingedLanes;o=o.warmLanes;var V=p&134217727;return V!==0?(p=V&~T,p!==0?x=Cr(p):(j&=V,j!==0?x=Cr(j):f||(f=V&~o,f!==0&&(x=Cr(f))))):(V=p&~T,V!==0?x=Cr(V):j!==0?x=Cr(j):f||(f=p&~o,f!==0&&(x=Cr(f)))),x===0?0:c!==0&&c!==x&&(c&T)===0&&(T=x&-x,f=c&-c,T>=f||T===32&&(f&4194048)!==0)?c:x}function Br(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Kr(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fa(){var o=yr;return yr<<=1,(yr&4194048)===0&&(yr=256),o}function xu(){var o=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),o}function xl(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Ps(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function IP(o,c,f,p,x,T){var j=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var V=o.entanglements,ne=o.expirationTimes,Ee=o.hiddenUpdates;for(f=j&~f;0<f;){var De=31-pt(f),Fe=1<<De;V[De]=0,ne[De]=-1;var Ce=Ee[De];if(Ce!==null)for(Ee[De]=null,De=0;De<Ce.length;De++){var Ne=Ce[De];Ne!==null&&(Ne.lane&=-536870913)}f&=~Fe}p!==0&&ha(o,p,0),T!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=T&~(j&~c))}function ha(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-pt(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|f&4194090}function Zn(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var p=31-pt(f),x=1<<p;x&c|o[p]&c&&(o[p]|=c),f&=~x}}function Qi(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function B(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function S(){var o=Ae.p;return o!==0?o:(o=window.event,o===void 0?32:VT(o.type))}function v(o,c){var f=Ae.p;try{return Ae.p=o,c()}finally{Ae.p=f}}var y=Math.random().toString(36).slice(2),_="__reactFiber$"+y,E="__reactProps$"+y,U="__reactContainer$"+y,$="__reactEvents$"+y,W="__reactListeners$"+y,X="__reactHandles$"+y,be="__reactResources$"+y,re="__reactMarker$"+y;function Ie(o){delete o[_],delete o[E],delete o[$],delete o[W],delete o[X]}function We(o){var c=o[_];if(c)return c;for(var f=o.parentNode;f;){if(c=f[U]||f[_]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=RT(o);o!==null;){if(f=o[_])return f;o=RT(o)}return c}o=f,f=o.parentNode}return null}function ke(o){if(o=o[_]||o[U]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Pe(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Ge(o){var c=o[be];return c||(c=o[be]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function se(o){o[re]=!0}var qe=new Set,et={};function lt(o,c){ht(o,c),ht(o+"Capture",c)}function ht(o,c){for(et[o]=c,o=0;o<c.length;o++)qe.add(c[o])}var vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ct={};function rn(o){return Ke.call(ct,o)?!0:Ke.call(it,o)?!1:vn.test(o)?ct[o]=!0:(it[o]=!0,!1)}function de(o,c,f){if(rn(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function Le(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function Qe(o,c,f,p){if(p===null)o.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+p)}}var Ve,mn;function Lt(o){if(Ve===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ve=c&&c[1]||"",mn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+o+mn}var sn=!1;function cn(o,c){if(!o||sn)return"";sn=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ne){var Ce=Ne}Reflect.construct(o,[],Fe)}else{try{Fe.call()}catch(Ne){Ce=Ne}o.call(Fe.prototype)}}else{try{throw Error()}catch(Ne){Ce=Ne}(Fe=o())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ne){if(Ne&&Ce&&typeof Ne.stack=="string")return[Ne.stack,Ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=p.DetermineComponentFrameRoot(),j=T[0],V=T[1];if(j&&V){var ne=j.split(`
`),Ee=V.split(`
`);for(x=p=0;p<ne.length&&!ne[p].includes("DetermineComponentFrameRoot");)p++;for(;x<Ee.length&&!Ee[x].includes("DetermineComponentFrameRoot");)x++;if(p===ne.length||x===Ee.length)for(p=ne.length-1,x=Ee.length-1;1<=p&&0<=x&&ne[p]!==Ee[x];)x--;for(;1<=p&&0<=x;p--,x--)if(ne[p]!==Ee[x]){if(p!==1||x!==1)do if(p--,x--,0>x||ne[p]!==Ee[x]){var De=`
`+ne[p].replace(" at new "," at ");return o.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",o.displayName)),De}while(1<=p&&0<=x);break}}}finally{sn=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Lt(f):""}function Qn(o){switch(o.tag){case 26:case 27:case 5:return Lt(o.type);case 16:return Lt("Lazy");case 13:return Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return cn(o.type,!1);case 11:return cn(o.type.render,!1);case 1:return cn(o.type,!0);case 31:return Lt("Activity");default:return""}}function Lr(o){try{var c="";do c+=Qn(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Xt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Zr(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ds(o){var c=Zr(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),p=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,T=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return x.call(this)},set:function(j){p=""+j,T.call(this,j)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(j){p=""+j},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function At(o){o._valueTracker||(o._valueTracker=Ds(o))}function Vn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),p="";return o&&(p=Zr(o)?o.checked?"true":"false":o.value),o=p,o!==f?(c.setValue(o),!0):!1}function sr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var kr=/[\n"\\]/g;function Yt(o){return o.replace(kr,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function vu(o,c,f,p,x,T,j,V){o.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.type=j:o.removeAttribute("type"),c!=null?j==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Xt(c)):o.value!==""+Xt(c)&&(o.value=""+Xt(c)):j!=="submit"&&j!=="reset"||o.removeAttribute("value"),c!=null?_u(o,j,Xt(c)):f!=null?_u(o,j,Xt(f)):p!=null&&o.removeAttribute("value"),x==null&&T!=null&&(o.defaultChecked=!!T),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.name=""+Xt(V):o.removeAttribute("name")}function Ih(o,c,f,p,x,T,j,V){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),c!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||c!=null))return;f=f!=null?""+Xt(f):"",c=c!=null?""+Xt(c):f,V||c===o.value||(o.value=c),o.defaultValue=c}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=V?o.checked:!!p,o.defaultChecked=!!p,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(o.name=j)}function _u(o,c,f){c==="number"&&sr(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Gi(o,c,f,p){if(o=o.options,c){c={};for(var x=0;x<f.length;x++)c["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=c.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&p&&(o[f].defaultSelected=!0)}else{for(f=""+Xt(f),c=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,p&&(o[x].defaultSelected=!0);return}c!==null||o[x].disabled||(c=o[x])}c!==null&&(c.selected=!0)}}function Oh(o,c,f){if(c!=null&&(c=""+Xt(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Xt(f):""}function Ph(o,c,f,p){if(c==null){if(p!=null){if(f!=null)throw Error(r(92));if(Re(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),c=f}f=Xt(c),o.defaultValue=f,p=o.textContent,p===f&&p!==""&&p!==null&&(o.value=p)}function Ji(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var Sm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dh(o,c,f){var p=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,f):typeof f!="number"||f===0||Sm.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function Sw(o,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var x in c)p=c[x],c.hasOwnProperty(x)&&f[x]!==p&&Dh(o,x,p)}else for(var T in c)c.hasOwnProperty(T)&&Dh(o,T,c[T])}function Tm(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OP=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jh(o){return PP.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Em=null;function Am(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vl=null,_l=null;function Tw(o){var c=ke(o);if(c&&(o=c.stateNode)){var f=o[E]||null;e:switch(o=c.stateNode,c.type){case"input":if(vu(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Yt(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var p=f[c];if(p!==o&&p.form===o.form){var x=p[E]||null;if(!x)throw Error(r(90));vu(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<f.length;c++)p=f[c],p.form===o.form&&Vn(p)}break e;case"textarea":Oh(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Gi(o,!!f.multiple,c,!1)}}}var Rm=!1;function Ew(o,c,f){if(Rm)return o(c,f);Rm=!0;try{var p=o(c);return p}finally{if(Rm=!1,(vl!==null||_l!==null)&&(_d(),vl&&(c=vl,o=_l,_l=vl=null,Tw(c),o)))for(c=0;c<o.length;c++)Tw(o[c])}}function wu(o,c){var f=o.stateNode;if(f===null)return null;var p=f[E]||null;if(p===null)return null;f=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=!1;if(Si)try{var Su={};Object.defineProperty(Su,"passive",{get:function(){Cm=!0}}),window.addEventListener("test",Su,Su),window.removeEventListener("test",Su,Su)}catch{Cm=!1}var eo=null,km=null,Fh=null;function Aw(){if(Fh)return Fh;var o,c=km,f=c.length,p,x="value"in eo?eo.value:eo.textContent,T=x.length;for(o=0;o<f&&c[o]===x[o];o++);var j=f-o;for(p=1;p<=j&&c[f-p]===x[T-p];p++);return Fh=x.slice(o,1<p?1-p:void 0)}function Bh(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Lh(){return!0}function Rw(){return!1}function Ur(o){function c(f,p,x,T,j){this._reactName=f,this._targetInst=x,this.type=p,this.nativeEvent=T,this.target=j,this.currentTarget=null;for(var V in o)o.hasOwnProperty(V)&&(f=o[V],this[V]=f?f(T):T[V]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Lh:Rw,this.isPropagationStopped=Rw,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Lh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Lh)},persist:function(){},isPersistent:Lh}),c}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=Ur(da),Tu=d({},da,{view:0,detail:0}),DP=Ur(Tu),Nm,Mm,Eu,zh=d({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Om,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Eu&&(Eu&&o.type==="mousemove"?(Nm=o.screenX-Eu.screenX,Mm=o.screenY-Eu.screenY):Mm=Nm=0,Eu=o),Nm)},movementY:function(o){return"movementY"in o?o.movementY:Mm}}),Cw=Ur(zh),jP=d({},zh,{dataTransfer:0}),FP=Ur(jP),BP=d({},Tu,{relatedTarget:0}),Im=Ur(BP),LP=d({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),UP=Ur(LP),zP=d({},da,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),VP=Ur(zP),$P=d({},da,{data:0}),kw=Ur($P),HP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XP(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=qP[o])?!!c[o]:!1}function Om(){return XP}var YP=d({},Tu,{key:function(o){if(o.key){var c=HP[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Bh(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?WP[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Om,charCode:function(o){return o.type==="keypress"?Bh(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Bh(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),KP=Ur(YP),ZP=d({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=Ur(ZP),QP=d({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Om}),GP=Ur(QP),JP=d({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),e4=Ur(JP),t4=d({},zh,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),n4=Ur(t4),r4=d({},da,{newState:0,oldState:0}),s4=Ur(r4),i4=[9,13,27,32],Pm=Si&&"CompositionEvent"in window,Au=null;Si&&"documentMode"in document&&(Au=document.documentMode);var o4=Si&&"TextEvent"in window&&!Au,Mw=Si&&(!Pm||Au&&8<Au&&11>=Au),Iw=" ",Ow=!1;function Pw(o,c){switch(o){case"keyup":return i4.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var wl=!1;function a4(o,c){switch(o){case"compositionend":return Dw(c);case"keypress":return c.which!==32?null:(Ow=!0,Iw);case"textInput":return o=c.data,o===Iw&&Ow?null:o;default:return null}}function l4(o,c){if(wl)return o==="compositionend"||!Pm&&Pw(o,c)?(o=Aw(),Fh=km=eo=null,wl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Mw&&c.locale!=="ko"?null:c.data;default:return null}}var c4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!c4[o.type]:c==="textarea"}function Fw(o,c,f,p){vl?_l?_l.push(p):_l=[p]:vl=p,c=Rd(c,"onChange"),0<c.length&&(f=new Uh("onChange","change",null,f,p),o.push({event:f,listeners:c}))}var Ru=null,Cu=null;function u4(o){yT(o,0)}function Vh(o){var c=Pe(o);if(Vn(c))return o}function Bw(o,c){if(o==="change")return c}var Lw=!1;if(Si){var Dm;if(Si){var jm="oninput"in document;if(!jm){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),jm=typeof Uw.oninput=="function"}Dm=jm}else Dm=!1;Lw=Dm&&(!document.documentMode||9<document.documentMode)}function zw(){Ru&&(Ru.detachEvent("onpropertychange",Vw),Cu=Ru=null)}function Vw(o){if(o.propertyName==="value"&&Vh(Cu)){var c=[];Fw(c,Cu,o,Am(o)),Ew(u4,c)}}function f4(o,c,f){o==="focusin"?(zw(),Ru=c,Cu=f,Ru.attachEvent("onpropertychange",Vw)):o==="focusout"&&zw()}function h4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Vh(Cu)}function d4(o,c){if(o==="click")return Vh(c)}function p4(o,c){if(o==="input"||o==="change")return Vh(c)}function g4(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Qr=typeof Object.is=="function"?Object.is:g4;function ku(o,c){if(Qr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),p=Object.keys(c);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var x=f[p];if(!Ke.call(c,x)||!Qr(o[x],c[x]))return!1}return!0}function $w(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Hw(o,c){var f=$w(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=c&&p>=c)return{node:f,offset:c-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=$w(f)}}function Ww(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Ww(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function qw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=sr(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=sr(o.document)}return c}function Fm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var m4=Si&&"documentMode"in document&&11>=document.documentMode,Sl=null,Bm=null,Nu=null,Lm=!1;function Xw(o,c,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Lm||Sl==null||Sl!==sr(p)||(p=Sl,"selectionStart"in p&&Fm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Nu&&ku(Nu,p)||(Nu=p,p=Rd(Bm,"onSelect"),0<p.length&&(c=new Uh("onSelect","select",null,c,f),o.push({event:c,listeners:p}),c.target=Sl)))}function pa(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var Tl={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},Um={},Yw={};Si&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function ga(o){if(Um[o])return Um[o];if(!Tl[o])return o;var c=Tl[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in Yw)return Um[o]=c[f];return o}var Kw=ga("animationend"),Zw=ga("animationiteration"),Qw=ga("animationstart"),y4=ga("transitionrun"),b4=ga("transitionstart"),x4=ga("transitioncancel"),Gw=ga("transitionend"),Jw=new Map,zm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zm.push("scrollEnd");function js(o,c){Jw.set(o,c),lt(c,[o])}var e1=new WeakMap;function ps(o,c){if(typeof o=="object"&&o!==null){var f=e1.get(o);return f!==void 0?f:(c={value:o,source:c,stack:Lr(c)},e1.set(o,c),c)}return{value:o,source:c,stack:Lr(c)}}var gs=[],El=0,Vm=0;function $h(){for(var o=El,c=Vm=El=0;c<o;){var f=gs[c];gs[c++]=null;var p=gs[c];gs[c++]=null;var x=gs[c];gs[c++]=null;var T=gs[c];if(gs[c++]=null,p!==null&&x!==null){var j=p.pending;j===null?x.next=x:(x.next=j.next,j.next=x),p.pending=x}T!==0&&t1(f,x,T)}}function Hh(o,c,f,p){gs[El++]=o,gs[El++]=c,gs[El++]=f,gs[El++]=p,Vm|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function $m(o,c,f,p){return Hh(o,c,f,p),Wh(o)}function Al(o,c){return Hh(o,null,null,c),Wh(o)}function t1(o,c,f){o.lanes|=f;var p=o.alternate;p!==null&&(p.lanes|=f);for(var x=!1,T=o.return;T!==null;)T.childLanes|=f,p=T.alternate,p!==null&&(p.childLanes|=f),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(x=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,x&&c!==null&&(x=31-pt(f),o=T.hiddenUpdates,p=o[x],p===null?o[x]=[c]:p.push(c),c.lane=f|536870912),T):null}function Wh(o){if(50<tf)throw tf=0,Ky=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Rl={};function v4(o,c,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(o,c,f,p){return new v4(o,c,f,p)}function Hm(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ti(o,c){var f=o.alternate;return f===null?(f=Gr(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function n1(o,c){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function qh(o,c,f,p,x,T){var j=0;if(p=o,typeof o=="function")Hm(o)&&(j=1);else if(typeof o=="string")j=wD(o,f,ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case J:return o=Gr(31,f,c,x),o.elementType=J,o.lanes=T,o;case R:return ma(f.children,x,T,c);case A:j=8,x|=24;break;case C:return o=Gr(12,f,c,x|2),o.elementType=C,o.lanes=T,o;case L:return o=Gr(13,f,c,x),o.elementType=L,o.lanes=T,o;case O:return o=Gr(19,f,c,x),o.elementType=O,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case I:case k:j=10;break e;case M:j=9;break e;case P:j=11;break e;case H:j=14;break e;case Y:j=16,p=null;break e}j=29,f=Error(r(130,o===null?"null":typeof o,"")),p=null}return c=Gr(j,f,c,x),c.elementType=o,c.type=p,c.lanes=T,c}function ma(o,c,f,p){return o=Gr(7,o,p,c),o.lanes=f,o}function Wm(o,c,f){return o=Gr(6,o,null,c),o.lanes=f,o}function qm(o,c,f){return c=Gr(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Cl=[],kl=0,Xh=null,Yh=0,ms=[],ys=0,ya=null,Ei=1,Ai="";function ba(o,c){Cl[kl++]=Yh,Cl[kl++]=Xh,Xh=o,Yh=c}function r1(o,c,f){ms[ys++]=Ei,ms[ys++]=Ai,ms[ys++]=ya,ya=o;var p=Ei;o=Ai;var x=32-pt(p)-1;p&=~(1<<x),f+=1;var T=32-pt(c)+x;if(30<T){var j=x-x%5;T=(p&(1<<j)-1).toString(32),p>>=j,x-=j,Ei=1<<32-pt(c)+x|f<<x|p,Ai=T+o}else Ei=1<<T|f<<x|p,Ai=o}function Xm(o){o.return!==null&&(ba(o,1),r1(o,1,0))}function Ym(o){for(;o===Xh;)Xh=Cl[--kl],Cl[kl]=null,Yh=Cl[--kl],Cl[kl]=null;for(;o===ya;)ya=ms[--ys],ms[ys]=null,Ai=ms[--ys],ms[ys]=null,Ei=ms[--ys],ms[ys]=null}var Nr=null,On=null,Qt=!1,xa=null,ti=!1,Km=Error(r(519));function va(o){var c=Error(r(418,""));throw Ou(ps(c,o)),Km}function s1(o){var c=o.stateNode,f=o.type,p=o.memoizedProps;switch(c[_]=o,c[E]=p,f){case"dialog":Ft("cancel",c),Ft("close",c);break;case"iframe":case"object":case"embed":Ft("load",c);break;case"video":case"audio":for(f=0;f<rf.length;f++)Ft(rf[f],c);break;case"source":Ft("error",c);break;case"img":case"image":case"link":Ft("error",c),Ft("load",c);break;case"details":Ft("toggle",c);break;case"input":Ft("invalid",c),Ih(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),At(c);break;case"select":Ft("invalid",c);break;case"textarea":Ft("invalid",c),Ph(c,p.value,p.defaultValue,p.children),At(c)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||p.suppressHydrationWarning===!0||_T(c.textContent,f)?(p.popover!=null&&(Ft("beforetoggle",c),Ft("toggle",c)),p.onScroll!=null&&Ft("scroll",c),p.onScrollEnd!=null&&Ft("scrollend",c),p.onClick!=null&&(c.onclick=Cd),c=!0):c=!1,c||va(o)}function i1(o){for(Nr=o.return;Nr;)switch(Nr.tag){case 5:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Nr=Nr.return}}function Mu(o){if(o!==Nr)return!1;if(!Qt)return i1(o),Qt=!0,!1;var c=o.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||fb(o.type,o.memoizedProps)),f=!f),f&&On&&va(o),i1(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){On=Bs(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}On=null}}else c===27?(c=On,yo(o.type)?(o=gb,gb=null,On=o):On=c):On=Nr?Bs(o.stateNode.nextSibling):null;return!0}function Iu(){On=Nr=null,Qt=!1}function o1(){var o=xa;return o!==null&&($r===null?$r=o:$r.push.apply($r,o),xa=null),o}function Ou(o){xa===null?xa=[o]:xa.push(o)}var Zm=te(null),_a=null,Ri=null;function to(o,c,f){F(Zm,c._currentValue),c._currentValue=f}function Ci(o){o._currentValue=Zm.current,G(Zm)}function Qm(o,c,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===f)break;o=o.return}}function Gm(o,c,f,p){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var T=x.dependencies;if(T!==null){var j=x.child;T=T.firstContext;e:for(;T!==null;){var V=T;T=x;for(var ne=0;ne<c.length;ne++)if(V.context===c[ne]){T.lanes|=f,V=T.alternate,V!==null&&(V.lanes|=f),Qm(T.return,f,o),p||(j=null);break e}T=V.next}}else if(x.tag===18){if(j=x.return,j===null)throw Error(r(341));j.lanes|=f,T=j.alternate,T!==null&&(T.lanes|=f),Qm(j,f,o),j=null}else j=x.child;if(j!==null)j.return=x;else for(j=x;j!==null;){if(j===o){j=null;break}if(x=j.sibling,x!==null){x.return=j.return,j=x;break}j=j.return}x=j}}function Pu(o,c,f,p){o=null;for(var x=c,T=!1;x!==null;){if(!T){if((x.flags&524288)!==0)T=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var j=x.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var V=x.type;Qr(x.pendingProps.value,j.value)||(o!==null?o.push(V):o=[V])}}else if(x===ue.current){if(j=x.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(uf):o=[uf])}x=x.return}o!==null&&Gm(c,o,f,p),c.flags|=262144}function Kh(o){for(o=o.firstContext;o!==null;){if(!Qr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function wa(o){_a=o,Ri=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function br(o){return a1(_a,o)}function Zh(o,c){return _a===null&&wa(o),a1(o,c)}function a1(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ri===null){if(o===null)throw Error(r(308));Ri=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Ri=Ri.next=c;return f}var _4=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},w4=t.unstable_scheduleCallback,S4=t.unstable_NormalPriority,Gn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new _4,data:new Map,refCount:0}}function Du(o){o.refCount--,o.refCount===0&&w4(S4,function(){o.controller.abort()})}var ju=null,ey=0,Nl=0,Ml=null;function T4(o,c){if(ju===null){var f=ju=[];ey=0,Nl=nb(),Ml={status:"pending",value:void 0,then:function(p){f.push(p)}}}return ey++,c.then(l1,l1),c}function l1(){if(--ey===0&&ju!==null){Ml!==null&&(Ml.status="fulfilled");var o=ju;ju=null,Nl=0,Ml=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function E4(o,c){var f=[],p={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var x=0;x<f.length;x++)(0,f[x])(c)},function(x){for(p.status="rejected",p.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),p}var c1=ie.S;ie.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&T4(o,c),c1!==null&&c1(o,c)};var Sa=te(null);function ty(){var o=Sa.current;return o!==null?o:_n.pooledCache}function Qh(o,c){c===null?F(Sa,Sa.current):F(Sa,c.pool)}function u1(){var o=ty();return o===null?null:{parent:Gn._currentValue,pool:o}}var Fu=Error(r(460)),f1=Error(r(474)),Gh=Error(r(542)),ny={then:function(){}};function h1(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Jh(){}function d1(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(Jh,Jh),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,g1(o),o;default:if(typeof c.status=="string")c.then(Jh,Jh);else{if(o=_n,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=p}},function(p){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,g1(o),o}throw Bu=c,Fu}}var Bu=null;function p1(){if(Bu===null)throw Error(r(459));var o=Bu;return Bu=null,o}function g1(o){if(o===Fu||o===Gh)throw Error(r(483))}var no=!1;function ry(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sy(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ro(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function so(o,c,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(on&2)!==0){var x=p.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),p.pending=c,c=Wh(o),t1(o,null,f),c}return Hh(o,p,c,f),Wh(o)}function Lu(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,Zn(o,f)}}function iy(o,c){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var x=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var j={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?x=T=j:T=T.next=j,f=f.next}while(f!==null);T===null?x=T=c:T=T.next=c}else x=T=c;f={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:p.shared,callbacks:p.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var oy=!1;function Uu(){if(oy){var o=Ml;if(o!==null)throw o}}function zu(o,c,f,p){oy=!1;var x=o.updateQueue;no=!1;var T=x.firstBaseUpdate,j=x.lastBaseUpdate,V=x.shared.pending;if(V!==null){x.shared.pending=null;var ne=V,Ee=ne.next;ne.next=null,j===null?T=Ee:j.next=Ee,j=ne;var De=o.alternate;De!==null&&(De=De.updateQueue,V=De.lastBaseUpdate,V!==j&&(V===null?De.firstBaseUpdate=Ee:V.next=Ee,De.lastBaseUpdate=ne))}if(T!==null){var Fe=x.baseState;j=0,De=Ee=ne=null,V=T;do{var Ce=V.lane&-536870913,Ne=Ce!==V.lane;if(Ne?(Vt&Ce)===Ce:(p&Ce)===Ce){Ce!==0&&Ce===Nl&&(oy=!0),De!==null&&(De=De.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var _t=o,gt=V;Ce=c;var hn=f;switch(gt.tag){case 1:if(_t=gt.payload,typeof _t=="function"){Fe=_t.call(hn,Fe,Ce);break e}Fe=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=gt.payload,Ce=typeof _t=="function"?_t.call(hn,Fe,Ce):_t,Ce==null)break e;Fe=d({},Fe,Ce);break e;case 2:no=!0}}Ce=V.callback,Ce!==null&&(o.flags|=64,Ne&&(o.flags|=8192),Ne=x.callbacks,Ne===null?x.callbacks=[Ce]:Ne.push(Ce))}else Ne={lane:Ce,tag:V.tag,payload:V.payload,callback:V.callback,next:null},De===null?(Ee=De=Ne,ne=Fe):De=De.next=Ne,j|=Ce;if(V=V.next,V===null){if(V=x.shared.pending,V===null)break;Ne=V,V=Ne.next,Ne.next=null,x.lastBaseUpdate=Ne,x.shared.pending=null}}while(!0);De===null&&(ne=Fe),x.baseState=ne,x.firstBaseUpdate=Ee,x.lastBaseUpdate=De,T===null&&(x.shared.lanes=0),ho|=j,o.lanes=j,o.memoizedState=Fe}}function m1(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function y1(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)m1(f[o],c)}var Il=te(null),ed=te(0);function b1(o,c){o=Di,F(ed,o),F(Il,c),Di=o|c.baseLanes}function ay(){F(ed,Di),F(Il,Il.current)}function ly(){Di=ed.current,G(Il),G(ed)}var io=0,Nt=null,un=null,$n=null,td=!1,Ol=!1,Ta=!1,nd=0,Vu=0,Pl=null,A4=0;function Ln(){throw Error(r(321))}function cy(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Qr(o[f],c[f]))return!1;return!0}function uy(o,c,f,p,x,T){return io=T,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ie.H=o===null||o.memoizedState===null?tS:nS,Ta=!1,T=f(p,x),Ta=!1,Ol&&(T=v1(c,f,p,x)),x1(o),T}function x1(o){ie.H=ld;var c=un!==null&&un.next!==null;if(io=0,$n=un=Nt=null,td=!1,Vu=0,Pl=null,c)throw Error(r(300));o===null||ir||(o=o.dependencies,o!==null&&Kh(o)&&(ir=!0))}function v1(o,c,f,p){Nt=o;var x=0;do{if(Ol&&(Pl=null),Vu=0,Ol=!1,25<=x)throw Error(r(301));if(x+=1,$n=un=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ie.H=O4,T=c(f,p)}while(Ol);return T}function R4(){var o=ie.H,c=o.useState()[0];return c=typeof c.then=="function"?$u(c):c,o=o.useState()[0],(un!==null?un.memoizedState:null)!==o&&(Nt.flags|=1024),c}function fy(){var o=nd!==0;return nd=0,o}function hy(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function dy(o){if(td){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}td=!1}io=0,$n=un=Nt=null,Ol=!1,Vu=nd=0,Pl=null}function zr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Nt.memoizedState=$n=o:$n=$n.next=o,$n}function Hn(){if(un===null){var o=Nt.alternate;o=o!==null?o.memoizedState:null}else o=un.next;var c=$n===null?Nt.memoizedState:$n.next;if(c!==null)$n=c,un=o;else{if(o===null)throw Nt.alternate===null?Error(r(467)):Error(r(310));un=o,o={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},$n===null?Nt.memoizedState=$n=o:$n=$n.next=o}return $n}function py(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(o){var c=Vu;return Vu+=1,Pl===null&&(Pl=[]),o=d1(Pl,o,c),c=Nt,($n===null?c.memoizedState:$n.next)===null&&(c=c.alternate,ie.H=c===null||c.memoizedState===null?tS:nS),o}function rd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $u(o);if(o.$$typeof===k)return br(o)}throw Error(r(438,String(o)))}function gy(o){var c=null,f=Nt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var p=Nt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=py(),Nt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),p=0;p<o;p++)f[p]=K;return c.index++,f}function ki(o,c){return typeof c=="function"?c(o):c}function sd(o){var c=Hn();return my(c,un,o)}function my(o,c,f){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var x=o.baseQueue,T=p.pending;if(T!==null){if(x!==null){var j=x.next;x.next=T.next,T.next=j}c.baseQueue=x=T,p.pending=null}if(T=o.baseState,x===null)o.memoizedState=T;else{c=x.next;var V=j=null,ne=null,Ee=c,De=!1;do{var Fe=Ee.lane&-536870913;if(Fe!==Ee.lane?(Vt&Fe)===Fe:(io&Fe)===Fe){var Ce=Ee.revertLane;if(Ce===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Fe===Nl&&(De=!0);else if((io&Ce)===Ce){Ee=Ee.next,Ce===Nl&&(De=!0);continue}else Fe={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ne===null?(V=ne=Fe,j=T):ne=ne.next=Fe,Nt.lanes|=Ce,ho|=Ce;Fe=Ee.action,Ta&&f(T,Fe),T=Ee.hasEagerState?Ee.eagerState:f(T,Fe)}else Ce={lane:Fe,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ne===null?(V=ne=Ce,j=T):ne=ne.next=Ce,Nt.lanes|=Fe,ho|=Fe;Ee=Ee.next}while(Ee!==null&&Ee!==c);if(ne===null?j=T:ne.next=V,!Qr(T,o.memoizedState)&&(ir=!0,De&&(f=Ml,f!==null)))throw f;o.memoizedState=T,o.baseState=j,o.baseQueue=ne,p.lastRenderedState=T}return x===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function yy(o){var c=Hn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var p=f.dispatch,x=f.pending,T=c.memoizedState;if(x!==null){f.pending=null;var j=x=x.next;do T=o(T,j.action),j=j.next;while(j!==x);Qr(T,c.memoizedState)||(ir=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),f.lastRenderedState=T}return[T,p]}function _1(o,c,f){var p=Nt,x=Hn(),T=Qt;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=c();var j=!Qr((un||x).memoizedState,f);j&&(x.memoizedState=f,ir=!0),x=x.queue;var V=T1.bind(null,p,x,o);if(Hu(2048,8,V,[o]),x.getSnapshot!==c||j||$n!==null&&$n.memoizedState.tag&1){if(p.flags|=2048,Dl(9,id(),S1.bind(null,p,x,f,c),null),_n===null)throw Error(r(349));T||(io&124)!==0||w1(p,c,f)}return f}function w1(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=Nt.updateQueue,c===null?(c=py(),Nt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function S1(o,c,f,p){c.value=f,c.getSnapshot=p,E1(c)&&A1(o)}function T1(o,c,f){return f(function(){E1(c)&&A1(o)})}function E1(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Qr(o,f)}catch{return!0}}function A1(o){var c=Al(o,2);c!==null&&rs(c,o,2)}function by(o){var c=zr();if(typeof o=="function"){var f=o;if(o=f(),Ta){ft(!0);try{f()}finally{ft(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:o},c}function R1(o,c,f,p){return o.baseState=f,my(o,un,typeof p=="function"?p:ki)}function C4(o,c,f,p,x){if(ad(o))throw Error(r(485));if(o=c.action,o!==null){var T={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){T.listeners.push(j)}};ie.T!==null?f(!0):T.isTransition=!1,p(T),f=c.pending,f===null?(T.next=c.pending=T,C1(c,T)):(T.next=f.next,c.pending=f.next=T)}}function C1(o,c){var f=c.action,p=c.payload,x=o.state;if(c.isTransition){var T=ie.T,j={};ie.T=j;try{var V=f(x,p),ne=ie.S;ne!==null&&ne(j,V),k1(o,c,V)}catch(Ee){xy(o,c,Ee)}finally{ie.T=T}}else try{T=f(x,p),k1(o,c,T)}catch(Ee){xy(o,c,Ee)}}function k1(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){N1(o,c,p)},function(p){return xy(o,c,p)}):N1(o,c,f)}function N1(o,c,f){c.status="fulfilled",c.value=f,M1(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,C1(o,f)))}function xy(o,c,f){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=f,M1(c),c=c.next;while(c!==p)}o.action=null}function M1(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function I1(o,c){return c}function O1(o,c){if(Qt){var f=_n.formState;if(f!==null){e:{var p=Nt;if(Qt){if(On){t:{for(var x=On,T=ti;x.nodeType!==8;){if(!T){x=null;break t}if(x=Bs(x.nextSibling),x===null){x=null;break t}}T=x.data,x=T==="F!"||T==="F"?x:null}if(x){On=Bs(x.nextSibling),p=x.data==="F!";break e}}va(p)}p=!1}p&&(c=f[0])}}return f=zr(),f.memoizedState=f.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I1,lastRenderedState:c},f.queue=p,f=G1.bind(null,Nt,p),p.dispatch=f,p=by(!1),T=Ty.bind(null,Nt,!1,p.queue),p=zr(),x={state:c,dispatch:null,action:o,pending:null},p.queue=x,f=C4.bind(null,Nt,x,T,f),x.dispatch=f,p.memoizedState=o,[c,f,!1]}function P1(o){var c=Hn();return D1(c,un,o)}function D1(o,c,f){if(c=my(o,c,I1)[0],o=sd(ki)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=$u(c)}catch(j){throw j===Fu?Gh:j}else p=c;c=Hn();var x=c.queue,T=x.dispatch;return f!==c.memoizedState&&(Nt.flags|=2048,Dl(9,id(),k4.bind(null,x,f),null)),[p,T,o]}function k4(o,c){o.action=c}function j1(o){var c=Hn(),f=un;if(f!==null)return D1(c,f,o);Hn(),c=c.memoizedState,f=Hn();var p=f.queue.dispatch;return f.memoizedState=o,[c,p,!1]}function Dl(o,c,f,p){return o={tag:o,create:f,deps:p,inst:c,next:null},c=Nt.updateQueue,c===null&&(c=py(),Nt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,c.lastEffect=o),o}function id(){return{destroy:void 0,resource:void 0}}function F1(){return Hn().memoizedState}function od(o,c,f,p){var x=zr();p=p===void 0?null:p,Nt.flags|=o,x.memoizedState=Dl(1|c,id(),f,p)}function Hu(o,c,f,p){var x=Hn();p=p===void 0?null:p;var T=x.memoizedState.inst;un!==null&&p!==null&&cy(p,un.memoizedState.deps)?x.memoizedState=Dl(c,T,f,p):(Nt.flags|=o,x.memoizedState=Dl(1|c,T,f,p))}function B1(o,c){od(8390656,8,o,c)}function L1(o,c){Hu(2048,8,o,c)}function U1(o,c){return Hu(4,2,o,c)}function z1(o,c){return Hu(4,4,o,c)}function V1(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function $1(o,c,f){f=f!=null?f.concat([o]):null,Hu(4,4,V1.bind(null,c,o),f)}function vy(){}function H1(o,c){var f=Hn();c=c===void 0?null:c;var p=f.memoizedState;return c!==null&&cy(c,p[1])?p[0]:(f.memoizedState=[o,c],o)}function W1(o,c){var f=Hn();c=c===void 0?null:c;var p=f.memoizedState;if(c!==null&&cy(c,p[1]))return p[0];if(p=o(),Ta){ft(!0);try{o()}finally{ft(!1)}}return f.memoizedState=[p,c],p}function _y(o,c,f){return f===void 0||(io&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=YS(),Nt.lanes|=o,ho|=o,f)}function q1(o,c,f,p){return Qr(f,c)?f:Il.current!==null?(o=_y(o,f,p),Qr(o,c)||(ir=!0),o):(io&42)===0?(ir=!0,o.memoizedState=f):(o=YS(),Nt.lanes|=o,ho|=o,c)}function X1(o,c,f,p,x){var T=Ae.p;Ae.p=T!==0&&8>T?T:8;var j=ie.T,V={};ie.T=V,Ty(o,!1,c,f);try{var ne=x(),Ee=ie.S;if(Ee!==null&&Ee(V,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var De=E4(ne,p);Wu(o,c,De,ns(o))}else Wu(o,c,p,ns(o))}catch(Fe){Wu(o,c,{then:function(){},status:"rejected",reason:Fe},ns())}finally{Ae.p=T,ie.T=j}}function N4(){}function wy(o,c,f,p){if(o.tag!==5)throw Error(r(476));var x=Y1(o).queue;X1(o,x,c,he,f===null?N4:function(){return K1(o),f(p)})}function Y1(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:he},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function K1(o){var c=Y1(o).next.queue;Wu(o,c,{},ns())}function Sy(){return br(uf)}function Z1(){return Hn().memoizedState}function Q1(){return Hn().memoizedState}function M4(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=ns();o=ro(f);var p=so(c,o,f);p!==null&&(rs(p,c,f),Lu(p,c,f)),c={cache:Jm()},o.payload=c;return}c=c.return}}function I4(o,c,f){var p=ns();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},ad(o)?J1(c,f):(f=$m(o,c,f,p),f!==null&&(rs(f,o,p),eS(f,c,p)))}function G1(o,c,f){var p=ns();Wu(o,c,f,p)}function Wu(o,c,f,p){var x={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(ad(o))J1(c,x);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var j=c.lastRenderedState,V=T(j,f);if(x.hasEagerState=!0,x.eagerState=V,Qr(V,j))return Hh(o,c,x,0),_n===null&&$h(),!1}catch{}finally{}if(f=$m(o,c,x,p),f!==null)return rs(f,o,p),eS(f,c,p),!0}return!1}function Ty(o,c,f,p){if(p={lane:2,revertLane:nb(),action:p,hasEagerState:!1,eagerState:null,next:null},ad(o)){if(c)throw Error(r(479))}else c=$m(o,f,p,2),c!==null&&rs(c,o,2)}function ad(o){var c=o.alternate;return o===Nt||c!==null&&c===Nt}function J1(o,c){Ol=td=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function eS(o,c,f){if((f&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,f|=p,c.lanes=f,Zn(o,f)}}var ld={readContext:br,use:rd,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln},tS={readContext:br,use:rd,useCallback:function(o,c){return zr().memoizedState=[o,c===void 0?null:c],o},useContext:br,useEffect:B1,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,od(4194308,4,V1.bind(null,c,o),f)},useLayoutEffect:function(o,c){return od(4194308,4,o,c)},useInsertionEffect:function(o,c){od(4,2,o,c)},useMemo:function(o,c){var f=zr();c=c===void 0?null:c;var p=o();if(Ta){ft(!0);try{o()}finally{ft(!1)}}return f.memoizedState=[p,c],p},useReducer:function(o,c,f){var p=zr();if(f!==void 0){var x=f(c);if(Ta){ft(!0);try{f(c)}finally{ft(!1)}}}else x=c;return p.memoizedState=p.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},p.queue=o,o=o.dispatch=I4.bind(null,Nt,o),[p.memoizedState,o]},useRef:function(o){var c=zr();return o={current:o},c.memoizedState=o},useState:function(o){o=by(o);var c=o.queue,f=G1.bind(null,Nt,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:vy,useDeferredValue:function(o,c){var f=zr();return _y(f,o,c)},useTransition:function(){var o=by(!1);return o=X1.bind(null,Nt,o.queue,!0,!1),zr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var p=Nt,x=zr();if(Qt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),_n===null)throw Error(r(349));(Vt&124)!==0||w1(p,c,f)}x.memoizedState=f;var T={value:f,getSnapshot:c};return x.queue=T,B1(T1.bind(null,p,T,o),[o]),p.flags|=2048,Dl(9,id(),S1.bind(null,p,T,f,c),null),f},useId:function(){var o=zr(),c=_n.identifierPrefix;if(Qt){var f=Ai,p=Ei;f=(p&~(1<<32-pt(p)-1)).toString(32)+f,c=""+c+"R"+f,f=nd++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=A4++,c=""+c+"r"+f.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:Sy,useFormState:O1,useActionState:O1,useOptimistic:function(o){var c=zr();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Ty.bind(null,Nt,!0,f),f.dispatch=c,[o,c]},useMemoCache:gy,useCacheRefresh:function(){return zr().memoizedState=M4.bind(null,Nt)}},nS={readContext:br,use:rd,useCallback:H1,useContext:br,useEffect:L1,useImperativeHandle:$1,useInsertionEffect:U1,useLayoutEffect:z1,useMemo:W1,useReducer:sd,useRef:F1,useState:function(){return sd(ki)},useDebugValue:vy,useDeferredValue:function(o,c){var f=Hn();return q1(f,un.memoizedState,o,c)},useTransition:function(){var o=sd(ki)[0],c=Hn().memoizedState;return[typeof o=="boolean"?o:$u(o),c]},useSyncExternalStore:_1,useId:Z1,useHostTransitionStatus:Sy,useFormState:P1,useActionState:P1,useOptimistic:function(o,c){var f=Hn();return R1(f,un,o,c)},useMemoCache:gy,useCacheRefresh:Q1},O4={readContext:br,use:rd,useCallback:H1,useContext:br,useEffect:L1,useImperativeHandle:$1,useInsertionEffect:U1,useLayoutEffect:z1,useMemo:W1,useReducer:yy,useRef:F1,useState:function(){return yy(ki)},useDebugValue:vy,useDeferredValue:function(o,c){var f=Hn();return un===null?_y(f,o,c):q1(f,un.memoizedState,o,c)},useTransition:function(){var o=yy(ki)[0],c=Hn().memoizedState;return[typeof o=="boolean"?o:$u(o),c]},useSyncExternalStore:_1,useId:Z1,useHostTransitionStatus:Sy,useFormState:j1,useActionState:j1,useOptimistic:function(o,c){var f=Hn();return un!==null?R1(f,un,o,c):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:gy,useCacheRefresh:Q1},jl=null,qu=0;function cd(o){var c=qu;return qu+=1,jl===null&&(jl=[]),d1(jl,o,c)}function Xu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function ud(o,c){throw c.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function rS(o){var c=o._init;return c(o._payload)}function sS(o){function c(xe,fe){if(o){var Te=xe.deletions;Te===null?(xe.deletions=[fe],xe.flags|=16):Te.push(fe)}}function f(xe,fe){if(!o)return null;for(;fe!==null;)c(xe,fe),fe=fe.sibling;return null}function p(xe){for(var fe=new Map;xe!==null;)xe.key!==null?fe.set(xe.key,xe):fe.set(xe.index,xe),xe=xe.sibling;return fe}function x(xe,fe){return xe=Ti(xe,fe),xe.index=0,xe.sibling=null,xe}function T(xe,fe,Te){return xe.index=Te,o?(Te=xe.alternate,Te!==null?(Te=Te.index,Te<fe?(xe.flags|=67108866,fe):Te):(xe.flags|=67108866,fe)):(xe.flags|=1048576,fe)}function j(xe){return o&&xe.alternate===null&&(xe.flags|=67108866),xe}function V(xe,fe,Te,je){return fe===null||fe.tag!==6?(fe=Wm(Te,xe.mode,je),fe.return=xe,fe):(fe=x(fe,Te),fe.return=xe,fe)}function ne(xe,fe,Te,je){var nt=Te.type;return nt===R?De(xe,fe,Te.props.children,je,Te.key):fe!==null&&(fe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===Y&&rS(nt)===fe.type)?(fe=x(fe,Te.props),Xu(fe,Te),fe.return=xe,fe):(fe=qh(Te.type,Te.key,Te.props,null,xe.mode,je),Xu(fe,Te),fe.return=xe,fe)}function Ee(xe,fe,Te,je){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Te.containerInfo||fe.stateNode.implementation!==Te.implementation?(fe=qm(Te,xe.mode,je),fe.return=xe,fe):(fe=x(fe,Te.children||[]),fe.return=xe,fe)}function De(xe,fe,Te,je,nt){return fe===null||fe.tag!==7?(fe=ma(Te,xe.mode,je,nt),fe.return=xe,fe):(fe=x(fe,Te),fe.return=xe,fe)}function Fe(xe,fe,Te){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Wm(""+fe,xe.mode,Te),fe.return=xe,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return Te=qh(fe.type,fe.key,fe.props,null,xe.mode,Te),Xu(Te,fe),Te.return=xe,Te;case w:return fe=qm(fe,xe.mode,Te),fe.return=xe,fe;case Y:var je=fe._init;return fe=je(fe._payload),Fe(xe,fe,Te)}if(Re(fe)||ae(fe))return fe=ma(fe,xe.mode,Te,null),fe.return=xe,fe;if(typeof fe.then=="function")return Fe(xe,cd(fe),Te);if(fe.$$typeof===k)return Fe(xe,Zh(xe,fe),Te);ud(xe,fe)}return null}function Ce(xe,fe,Te,je){var nt=fe!==null?fe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return nt!==null?null:V(xe,fe,""+Te,je);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case b:return Te.key===nt?ne(xe,fe,Te,je):null;case w:return Te.key===nt?Ee(xe,fe,Te,je):null;case Y:return nt=Te._init,Te=nt(Te._payload),Ce(xe,fe,Te,je)}if(Re(Te)||ae(Te))return nt!==null?null:De(xe,fe,Te,je,null);if(typeof Te.then=="function")return Ce(xe,fe,cd(Te),je);if(Te.$$typeof===k)return Ce(xe,fe,Zh(xe,Te),je);ud(xe,Te)}return null}function Ne(xe,fe,Te,je,nt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return xe=xe.get(Te)||null,V(fe,xe,""+je,nt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case b:return xe=xe.get(je.key===null?Te:je.key)||null,ne(fe,xe,je,nt);case w:return xe=xe.get(je.key===null?Te:je.key)||null,Ee(fe,xe,je,nt);case Y:var Pt=je._init;return je=Pt(je._payload),Ne(xe,fe,Te,je,nt)}if(Re(je)||ae(je))return xe=xe.get(Te)||null,De(fe,xe,je,nt,null);if(typeof je.then=="function")return Ne(xe,fe,Te,cd(je),nt);if(je.$$typeof===k)return Ne(xe,fe,Te,Zh(fe,je),nt);ud(fe,je)}return null}function _t(xe,fe,Te,je){for(var nt=null,Pt=null,at=fe,bt=fe=0,ar=null;at!==null&&bt<Te.length;bt++){at.index>bt?(ar=at,at=null):ar=at.sibling;var Kt=Ce(xe,at,Te[bt],je);if(Kt===null){at===null&&(at=ar);break}o&&at&&Kt.alternate===null&&c(xe,at),fe=T(Kt,fe,bt),Pt===null?nt=Kt:Pt.sibling=Kt,Pt=Kt,at=ar}if(bt===Te.length)return f(xe,at),Qt&&ba(xe,bt),nt;if(at===null){for(;bt<Te.length;bt++)at=Fe(xe,Te[bt],je),at!==null&&(fe=T(at,fe,bt),Pt===null?nt=at:Pt.sibling=at,Pt=at);return Qt&&ba(xe,bt),nt}for(at=p(at);bt<Te.length;bt++)ar=Ne(at,xe,bt,Te[bt],je),ar!==null&&(o&&ar.alternate!==null&&at.delete(ar.key===null?bt:ar.key),fe=T(ar,fe,bt),Pt===null?nt=ar:Pt.sibling=ar,Pt=ar);return o&&at.forEach(function(wo){return c(xe,wo)}),Qt&&ba(xe,bt),nt}function gt(xe,fe,Te,je){if(Te==null)throw Error(r(151));for(var nt=null,Pt=null,at=fe,bt=fe=0,ar=null,Kt=Te.next();at!==null&&!Kt.done;bt++,Kt=Te.next()){at.index>bt?(ar=at,at=null):ar=at.sibling;var wo=Ce(xe,at,Kt.value,je);if(wo===null){at===null&&(at=ar);break}o&&at&&wo.alternate===null&&c(xe,at),fe=T(wo,fe,bt),Pt===null?nt=wo:Pt.sibling=wo,Pt=wo,at=ar}if(Kt.done)return f(xe,at),Qt&&ba(xe,bt),nt;if(at===null){for(;!Kt.done;bt++,Kt=Te.next())Kt=Fe(xe,Kt.value,je),Kt!==null&&(fe=T(Kt,fe,bt),Pt===null?nt=Kt:Pt.sibling=Kt,Pt=Kt);return Qt&&ba(xe,bt),nt}for(at=p(at);!Kt.done;bt++,Kt=Te.next())Kt=Ne(at,xe,bt,Kt.value,je),Kt!==null&&(o&&Kt.alternate!==null&&at.delete(Kt.key===null?bt:Kt.key),fe=T(Kt,fe,bt),Pt===null?nt=Kt:Pt.sibling=Kt,Pt=Kt);return o&&at.forEach(function(PD){return c(xe,PD)}),Qt&&ba(xe,bt),nt}function hn(xe,fe,Te,je){if(typeof Te=="object"&&Te!==null&&Te.type===R&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case b:e:{for(var nt=Te.key;fe!==null;){if(fe.key===nt){if(nt=Te.type,nt===R){if(fe.tag===7){f(xe,fe.sibling),je=x(fe,Te.props.children),je.return=xe,xe=je;break e}}else if(fe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===Y&&rS(nt)===fe.type){f(xe,fe.sibling),je=x(fe,Te.props),Xu(je,Te),je.return=xe,xe=je;break e}f(xe,fe);break}else c(xe,fe);fe=fe.sibling}Te.type===R?(je=ma(Te.props.children,xe.mode,je,Te.key),je.return=xe,xe=je):(je=qh(Te.type,Te.key,Te.props,null,xe.mode,je),Xu(je,Te),je.return=xe,xe=je)}return j(xe);case w:e:{for(nt=Te.key;fe!==null;){if(fe.key===nt)if(fe.tag===4&&fe.stateNode.containerInfo===Te.containerInfo&&fe.stateNode.implementation===Te.implementation){f(xe,fe.sibling),je=x(fe,Te.children||[]),je.return=xe,xe=je;break e}else{f(xe,fe);break}else c(xe,fe);fe=fe.sibling}je=qm(Te,xe.mode,je),je.return=xe,xe=je}return j(xe);case Y:return nt=Te._init,Te=nt(Te._payload),hn(xe,fe,Te,je)}if(Re(Te))return _t(xe,fe,Te,je);if(ae(Te)){if(nt=ae(Te),typeof nt!="function")throw Error(r(150));return Te=nt.call(Te),gt(xe,fe,Te,je)}if(typeof Te.then=="function")return hn(xe,fe,cd(Te),je);if(Te.$$typeof===k)return hn(xe,fe,Zh(xe,Te),je);ud(xe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,fe!==null&&fe.tag===6?(f(xe,fe.sibling),je=x(fe,Te),je.return=xe,xe=je):(f(xe,fe),je=Wm(Te,xe.mode,je),je.return=xe,xe=je),j(xe)):f(xe,fe)}return function(xe,fe,Te,je){try{qu=0;var nt=hn(xe,fe,Te,je);return jl=null,nt}catch(at){if(at===Fu||at===Gh)throw at;var Pt=Gr(29,at,null,xe.mode);return Pt.lanes=je,Pt.return=xe,Pt}finally{}}}var Fl=sS(!0),iS=sS(!1),bs=te(null),ni=null;function oo(o){var c=o.alternate;F(Jn,Jn.current&1),F(bs,o),ni===null&&(c===null||Il.current!==null||c.memoizedState!==null)&&(ni=o)}function oS(o){if(o.tag===22){if(F(Jn,Jn.current),F(bs,o),ni===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(ni=o)}}else ao()}function ao(){F(Jn,Jn.current),F(bs,bs.current)}function Ni(o){G(bs),ni===o&&(ni=null),G(Jn)}var Jn=te(0);function fd(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||pb(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Ey(o,c,f,p){c=o.memoizedState,f=f(p,c),f=f==null?c:d({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Ay={enqueueSetState:function(o,c,f){o=o._reactInternals;var p=ns(),x=ro(p);x.payload=c,f!=null&&(x.callback=f),c=so(o,x,p),c!==null&&(rs(c,o,p),Lu(c,o,p))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var p=ns(),x=ro(p);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=so(o,x,p),c!==null&&(rs(c,o,p),Lu(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=ns(),p=ro(f);p.tag=2,c!=null&&(p.callback=c),c=so(o,p,f),c!==null&&(rs(c,o,f),Lu(c,o,f))}};function aS(o,c,f,p,x,T,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,T,j):c.prototype&&c.prototype.isPureReactComponent?!ku(f,p)||!ku(x,T):!0}function lS(o,c,f,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,p),c.state!==o&&Ay.enqueueReplaceState(c,c.state,null)}function Ea(o,c){var f=c;if("ref"in c){f={};for(var p in c)p!=="ref"&&(f[p]=c[p])}if(o=o.defaultProps){f===c&&(f=d({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}var hd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function cS(o){hd(o)}function uS(o){console.error(o)}function fS(o){hd(o)}function dd(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function hS(o,c,f){try{var p=o.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Ry(o,c,f){return f=ro(f),f.tag=3,f.payload={element:null},f.callback=function(){dd(o,c)},f}function dS(o){return o=ro(o),o.tag=3,o}function pS(o,c,f,p){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var T=p.value;o.payload=function(){return x(T)},o.callback=function(){hS(c,f,p)}}var j=f.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(o.callback=function(){hS(c,f,p),typeof x!="function"&&(po===null?po=new Set([this]):po.add(this));var V=p.stack;this.componentDidCatch(p.value,{componentStack:V!==null?V:""})})}function P4(o,c,f,p,x){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=f.alternate,c!==null&&Pu(c,f,x,!0),f=bs.current,f!==null){switch(f.tag){case 13:return ni===null?Qy():f.alternate===null&&Pn===0&&(Pn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,p===ny?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([p]):c.add(p),Jy(o,p,x)),!1;case 22:return f.flags|=65536,p===ny?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([p]):f.add(p)),Jy(o,p,x)),!1}throw Error(r(435,f.tag))}return Jy(o,p,x),Qy(),!1}if(Qt)return c=bs.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,p!==Km&&(o=Error(r(422),{cause:p}),Ou(ps(o,f)))):(p!==Km&&(c=Error(r(423),{cause:p}),Ou(ps(c,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,p=ps(p,f),x=Ry(o.stateNode,p,x),iy(o,x),Pn!==4&&(Pn=2)),!1;var T=Error(r(520),{cause:p});if(T=ps(T,f),ef===null?ef=[T]:ef.push(T),Pn!==4&&(Pn=2),c===null)return!0;p=ps(p,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=Ry(f.stateNode,p,o),iy(f,o),!1;case 1:if(c=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(po===null||!po.has(T))))return f.flags|=65536,x&=-x,f.lanes|=x,x=dS(x),pS(x,o,f,p),iy(f,x),!1}f=f.return}while(f!==null);return!1}var gS=Error(r(461)),ir=!1;function cr(o,c,f,p){c.child=o===null?iS(c,null,f,p):Fl(c,o.child,f,p)}function mS(o,c,f,p,x){f=f.render;var T=c.ref;if("ref"in p){var j={};for(var V in p)V!=="ref"&&(j[V]=p[V])}else j=p;return wa(c),p=uy(o,c,f,j,T,x),V=fy(),o!==null&&!ir?(hy(o,c,x),Mi(o,c,x)):(Qt&&V&&Xm(c),c.flags|=1,cr(o,c,p,x),c.child)}function yS(o,c,f,p,x){if(o===null){var T=f.type;return typeof T=="function"&&!Hm(T)&&T.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=T,bS(o,c,T,p,x)):(o=qh(f.type,null,p,c,c.mode,x),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,!Dy(o,x)){var j=T.memoizedProps;if(f=f.compare,f=f!==null?f:ku,f(j,p)&&o.ref===c.ref)return Mi(o,c,x)}return c.flags|=1,o=Ti(T,p),o.ref=c.ref,o.return=c,c.child=o}function bS(o,c,f,p,x){if(o!==null){var T=o.memoizedProps;if(ku(T,p)&&o.ref===c.ref)if(ir=!1,c.pendingProps=p=T,Dy(o,x))(o.flags&131072)!==0&&(ir=!0);else return c.lanes=o.lanes,Mi(o,c,x)}return Cy(o,c,f,p,x)}function xS(o,c,f){var p=c.pendingProps,x=p.children,T=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=T!==null?T.baseLanes|f:f,o!==null){for(x=c.child=o.child,T=0;x!==null;)T=T|x.lanes|x.childLanes,x=x.sibling;c.childLanes=T&~p}else c.childLanes=0,c.child=null;return vS(o,c,p,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Qh(c,T!==null?T.cachePool:null),T!==null?b1(c,T):ay(),oS(c);else return c.lanes=c.childLanes=536870912,vS(o,c,T!==null?T.baseLanes|f:f,f)}else T!==null?(Qh(c,T.cachePool),b1(c,T),ao(),c.memoizedState=null):(o!==null&&Qh(c,null),ay(),ao());return cr(o,c,x,f),c.child}function vS(o,c,f,p){var x=ty();return x=x===null?null:{parent:Gn._currentValue,pool:x},c.memoizedState={baseLanes:f,cachePool:x},o!==null&&Qh(c,null),ay(),oS(c),o!==null&&Pu(o,c,p,!0),null}function pd(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(c.flags|=4194816)}}function Cy(o,c,f,p,x){return wa(c),f=uy(o,c,f,p,void 0,x),p=fy(),o!==null&&!ir?(hy(o,c,x),Mi(o,c,x)):(Qt&&p&&Xm(c),c.flags|=1,cr(o,c,f,x),c.child)}function _S(o,c,f,p,x,T){return wa(c),c.updateQueue=null,f=v1(c,p,f,x),x1(o),p=fy(),o!==null&&!ir?(hy(o,c,T),Mi(o,c,T)):(Qt&&p&&Xm(c),c.flags|=1,cr(o,c,f,T),c.child)}function wS(o,c,f,p,x){if(wa(c),c.stateNode===null){var T=Rl,j=f.contextType;typeof j=="object"&&j!==null&&(T=br(j)),T=new f(p,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ay,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=p,T.state=c.memoizedState,T.refs={},ry(c),j=f.contextType,T.context=typeof j=="object"&&j!==null?br(j):Rl,T.state=c.memoizedState,j=f.getDerivedStateFromProps,typeof j=="function"&&(Ey(c,f,j,p),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(j=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),j!==T.state&&Ay.enqueueReplaceState(T,T.state,null),zu(c,p,T,x),Uu(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){T=c.stateNode;var V=c.memoizedProps,ne=Ea(f,V);T.props=ne;var Ee=T.context,De=f.contextType;j=Rl,typeof De=="object"&&De!==null&&(j=br(De));var Fe=f.getDerivedStateFromProps;De=typeof Fe=="function"||typeof T.getSnapshotBeforeUpdate=="function",V=c.pendingProps!==V,De||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(V||Ee!==j)&&lS(c,T,p,j),no=!1;var Ce=c.memoizedState;T.state=Ce,zu(c,p,T,x),Uu(),Ee=c.memoizedState,V||Ce!==Ee||no?(typeof Fe=="function"&&(Ey(c,f,Fe,p),Ee=c.memoizedState),(ne=no||aS(c,f,ne,p,Ce,Ee,j))?(De||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=Ee),T.props=p,T.state=Ee,T.context=j,p=ne):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{T=c.stateNode,sy(o,c),j=c.memoizedProps,De=Ea(f,j),T.props=De,Fe=c.pendingProps,Ce=T.context,Ee=f.contextType,ne=Rl,typeof Ee=="object"&&Ee!==null&&(ne=br(Ee)),V=f.getDerivedStateFromProps,(Ee=typeof V=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==Fe||Ce!==ne)&&lS(c,T,p,ne),no=!1,Ce=c.memoizedState,T.state=Ce,zu(c,p,T,x),Uu();var Ne=c.memoizedState;j!==Fe||Ce!==Ne||no||o!==null&&o.dependencies!==null&&Kh(o.dependencies)?(typeof V=="function"&&(Ey(c,f,V,p),Ne=c.memoizedState),(De=no||aS(c,f,De,p,Ce,Ne,ne)||o!==null&&o.dependencies!==null&&Kh(o.dependencies))?(Ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,Ne,ne),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,Ne,ne)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=Ne),T.props=p,T.state=Ne,T.context=ne,p=De):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),p=!1)}return T=p,pd(o,c),p=(c.flags&128)!==0,T||p?(T=c.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,o!==null&&p?(c.child=Fl(c,o.child,null,x),c.child=Fl(c,null,f,x)):cr(o,c,f,x),c.memoizedState=T.state,o=c.child):o=Mi(o,c,x),o}function SS(o,c,f,p){return Iu(),c.flags|=256,cr(o,c,f,p),c.child}var ky={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ny(o){return{baseLanes:o,cachePool:u1()}}function My(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=xs),o}function TS(o,c,f){var p=c.pendingProps,x=!1,T=(c.flags&128)!==0,j;if((j=T)||(j=o!==null&&o.memoizedState===null?!1:(Jn.current&2)!==0),j&&(x=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,o===null){if(Qt){if(x?oo(c):ao(),Qt){var V=On,ne;if(ne=V){e:{for(ne=V,V=ti;ne.nodeType!==8;){if(!V){V=null;break e}if(ne=Bs(ne.nextSibling),ne===null){V=null;break e}}V=ne}V!==null?(c.memoizedState={dehydrated:V,treeContext:ya!==null?{id:Ei,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},ne=Gr(18,null,null,0),ne.stateNode=V,ne.return=c,c.child=ne,Nr=c,On=null,ne=!0):ne=!1}ne||va(c)}if(V=c.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return pb(V)?c.lanes=32:c.lanes=536870912,null;Ni(c)}return V=p.children,p=p.fallback,x?(ao(),x=c.mode,V=gd({mode:"hidden",children:V},x),p=ma(p,x,f,null),V.return=c,p.return=c,V.sibling=p,c.child=V,x=c.child,x.memoizedState=Ny(f),x.childLanes=My(o,j,f),c.memoizedState=ky,p):(oo(c),Iy(c,V))}if(ne=o.memoizedState,ne!==null&&(V=ne.dehydrated,V!==null)){if(T)c.flags&256?(oo(c),c.flags&=-257,c=Oy(o,c,f)):c.memoizedState!==null?(ao(),c.child=o.child,c.flags|=128,c=null):(ao(),x=p.fallback,V=c.mode,p=gd({mode:"visible",children:p.children},V),x=ma(x,V,f,null),x.flags|=2,p.return=c,x.return=c,p.sibling=x,c.child=p,Fl(c,o.child,null,f),p=c.child,p.memoizedState=Ny(f),p.childLanes=My(o,j,f),c.memoizedState=ky,c=x);else if(oo(c),pb(V)){if(j=V.nextSibling&&V.nextSibling.dataset,j)var Ee=j.dgst;j=Ee,p=Error(r(419)),p.stack="",p.digest=j,Ou({value:p,source:null,stack:null}),c=Oy(o,c,f)}else if(ir||Pu(o,c,f,!1),j=(f&o.childLanes)!==0,ir||j){if(j=_n,j!==null&&(p=f&-f,p=(p&42)!==0?1:Qi(p),p=(p&(j.suspendedLanes|f))!==0?0:p,p!==0&&p!==ne.retryLane))throw ne.retryLane=p,Al(o,p),rs(j,o,p),gS;V.data==="$?"||Qy(),c=Oy(o,c,f)}else V.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=ne.treeContext,On=Bs(V.nextSibling),Nr=c,Qt=!0,xa=null,ti=!1,o!==null&&(ms[ys++]=Ei,ms[ys++]=Ai,ms[ys++]=ya,Ei=o.id,Ai=o.overflow,ya=c),c=Iy(c,p.children),c.flags|=4096);return c}return x?(ao(),x=p.fallback,V=c.mode,ne=o.child,Ee=ne.sibling,p=Ti(ne,{mode:"hidden",children:p.children}),p.subtreeFlags=ne.subtreeFlags&65011712,Ee!==null?x=Ti(Ee,x):(x=ma(x,V,f,null),x.flags|=2),x.return=c,p.return=c,p.sibling=x,c.child=p,p=x,x=c.child,V=o.child.memoizedState,V===null?V=Ny(f):(ne=V.cachePool,ne!==null?(Ee=Gn._currentValue,ne=ne.parent!==Ee?{parent:Ee,pool:Ee}:ne):ne=u1(),V={baseLanes:V.baseLanes|f,cachePool:ne}),x.memoizedState=V,x.childLanes=My(o,j,f),c.memoizedState=ky,p):(oo(c),f=o.child,o=f.sibling,f=Ti(f,{mode:"visible",children:p.children}),f.return=c,f.sibling=null,o!==null&&(j=c.deletions,j===null?(c.deletions=[o],c.flags|=16):j.push(o)),c.child=f,c.memoizedState=null,f)}function Iy(o,c){return c=gd({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function gd(o,c){return o=Gr(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Oy(o,c,f){return Fl(c,o.child,null,f),o=Iy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function ES(o,c,f){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),Qm(o.return,c,f)}function Py(o,c,f,p,x){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:x}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=f,T.tailMode=x)}function AS(o,c,f){var p=c.pendingProps,x=p.revealOrder,T=p.tail;if(cr(o,c,p.children,f),p=Jn.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ES(o,f,c);else if(o.tag===19)ES(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(F(Jn,p),x){case"forwards":for(f=c.child,x=null;f!==null;)o=f.alternate,o!==null&&fd(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=c.child,c.child=null):(x=f.sibling,f.sibling=null),Py(c,!1,x,f,T);break;case"backwards":for(f=null,x=c.child,c.child=null;x!==null;){if(o=x.alternate,o!==null&&fd(o)===null){c.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}Py(c,!0,f,null,T);break;case"together":Py(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Mi(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),ho|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(Pu(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,f=Ti(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Ti(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function Dy(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Kh(o)))}function D4(o,c,f){switch(c.tag){case 3:ce(c,c.stateNode.containerInfo),to(c,Gn,o.memoizedState.cache),Iu();break;case 27:case 5:ze(c);break;case 4:ce(c,c.stateNode.containerInfo);break;case 10:to(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(oo(c),c.flags|=128,null):(f&c.child.childLanes)!==0?TS(o,c,f):(oo(c),o=Mi(o,c,f),o!==null?o.sibling:null);oo(c);break;case 19:var x=(o.flags&128)!==0;if(p=(f&c.childLanes)!==0,p||(Pu(o,c,f,!1),p=(f&c.childLanes)!==0),x){if(p)return AS(o,c,f);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),F(Jn,Jn.current),p)break;return null;case 22:case 23:return c.lanes=0,xS(o,c,f);case 24:to(c,Gn,o.memoizedState.cache)}return Mi(o,c,f)}function RS(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)ir=!0;else{if(!Dy(o,f)&&(c.flags&128)===0)return ir=!1,D4(o,c,f);ir=(o.flags&131072)!==0}else ir=!1,Qt&&(c.flags&1048576)!==0&&r1(c,Yh,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var p=c.elementType,x=p._init;if(p=x(p._payload),c.type=p,typeof p=="function")Hm(p)?(o=Ea(p,o),c.tag=1,c=wS(null,c,p,o,f)):(c.tag=0,c=Cy(null,c,p,o,f));else{if(p!=null){if(x=p.$$typeof,x===P){c.tag=11,c=mS(null,c,p,o,f);break e}else if(x===H){c.tag=14,c=yS(null,c,p,o,f);break e}}throw c=oe(p)||p,Error(r(306,c,""))}}return c;case 0:return Cy(o,c,c.type,c.pendingProps,f);case 1:return p=c.type,x=Ea(p,c.pendingProps),wS(o,c,p,x,f);case 3:e:{if(ce(c,c.stateNode.containerInfo),o===null)throw Error(r(387));p=c.pendingProps;var T=c.memoizedState;x=T.element,sy(o,c),zu(c,p,null,f);var j=c.memoizedState;if(p=j.cache,to(c,Gn,p),p!==T.cache&&Gm(c,[Gn],f,!0),Uu(),p=j.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=SS(o,c,p,f);break e}else if(p!==x){x=ps(Error(r(424)),c),Ou(x),c=SS(o,c,p,f);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(On=Bs(o.firstChild),Nr=c,Qt=!0,xa=null,ti=!0,f=iS(c,null,p,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Iu(),p===x){c=Mi(o,c,f);break e}cr(o,c,p,f)}c=c.child}return c;case 26:return pd(o,c),o===null?(f=MT(c.type,null,c.pendingProps,null))?c.memoizedState=f:Qt||(f=c.type,o=c.pendingProps,p=kd(we.current).createElement(f),p[_]=c,p[E]=o,fr(p,f,o),se(p),c.stateNode=p):c.memoizedState=MT(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ze(c),o===null&&Qt&&(p=c.stateNode=CT(c.type,c.pendingProps,we.current),Nr=c,ti=!0,x=On,yo(c.type)?(gb=x,On=Bs(p.firstChild)):On=x),cr(o,c,c.pendingProps.children,f),pd(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Qt&&((x=p=On)&&(p=cD(p,c.type,c.pendingProps,ti),p!==null?(c.stateNode=p,Nr=c,On=Bs(p.firstChild),ti=!1,x=!0):x=!1),x||va(c)),ze(c),x=c.type,T=c.pendingProps,j=o!==null?o.memoizedProps:null,p=T.children,fb(x,T)?p=null:j!==null&&fb(x,j)&&(c.flags|=32),c.memoizedState!==null&&(x=uy(o,c,R4,null,null,f),uf._currentValue=x),pd(o,c),cr(o,c,p,f),c.child;case 6:return o===null&&Qt&&((o=f=On)&&(f=uD(f,c.pendingProps,ti),f!==null?(c.stateNode=f,Nr=c,On=null,o=!0):o=!1),o||va(c)),null;case 13:return TS(o,c,f);case 4:return ce(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=Fl(c,null,p,f):cr(o,c,p,f),c.child;case 11:return mS(o,c,c.type,c.pendingProps,f);case 7:return cr(o,c,c.pendingProps,f),c.child;case 8:return cr(o,c,c.pendingProps.children,f),c.child;case 12:return cr(o,c,c.pendingProps.children,f),c.child;case 10:return p=c.pendingProps,to(c,c.type,p.value),cr(o,c,p.children,f),c.child;case 9:return x=c.type._context,p=c.pendingProps.children,wa(c),x=br(x),p=p(x),c.flags|=1,cr(o,c,p,f),c.child;case 14:return yS(o,c,c.type,c.pendingProps,f);case 15:return bS(o,c,c.type,c.pendingProps,f);case 19:return AS(o,c,f);case 31:return p=c.pendingProps,f=c.mode,p={mode:p.mode,children:p.children},o===null?(f=gd(p,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ti(o.child,p),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return xS(o,c,f);case 24:return wa(c),p=br(Gn),o===null?(x=ty(),x===null&&(x=_n,T=Jm(),x.pooledCache=T,T.refCount++,T!==null&&(x.pooledCacheLanes|=f),x=T),c.memoizedState={parent:p,cache:x},ry(c),to(c,Gn,x)):((o.lanes&f)!==0&&(sy(o,c),zu(c,null,null,f),Uu()),x=o.memoizedState,T=c.memoizedState,x.parent!==p?(x={parent:p,cache:p},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),to(c,Gn,p)):(p=T.cache,to(c,Gn,p),p!==x.cache&&Gm(c,[Gn],f,!0))),cr(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ii(o){o.flags|=4}function CS(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!jT(c)){if(c=bs.current,c!==null&&((Vt&4194048)===Vt?ni!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||c!==ni))throw Bu=ny,f1;o.flags|=8192}}function md(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?xu():536870912,o.lanes|=c,zl|=c)}function Yu(o,c){if(!Qt)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Mn(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(c)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=p,o.childLanes=f,c}function j4(o,c,f){var p=c.pendingProps;switch(Ym(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(c),null;case 1:return Mn(c),null;case 3:return f=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Ci(Gn),Me(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Mu(c)?Ii(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,o1())),Mn(c),null;case 26:return f=c.memoizedState,o===null?(Ii(c),f!==null?(Mn(c),CS(c,f)):(Mn(c),c.flags&=-16777217)):f?f!==o.memoizedState?(Ii(c),Mn(c),CS(c,f)):(Mn(c),c.flags&=-16777217):(o.memoizedProps!==p&&Ii(c),Mn(c),c.flags&=-16777217),null;case 27:Ue(c),f=we.current;var x=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ii(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return Mn(c),null}o=ge.current,Mu(c)?s1(c):(o=CT(x,p,f),c.stateNode=o,Ii(c))}return Mn(c),null;case 5:if(Ue(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ii(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return Mn(c),null}if(o=ge.current,Mu(c))s1(c);else{switch(x=kd(we.current),o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?x.createElement("select",{is:p.is}):x.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?x.createElement(f,{is:p.is}):x.createElement(f)}}o[_]=c,o[E]=p;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=o;e:switch(fr(o,f,p),f){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ii(c)}}return Mn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&Ii(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(o=we.current,Mu(c)){if(o=c.stateNode,f=c.memoizedProps,p=null,x=Nr,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}o[_]=c,o=!!(o.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||_T(o.nodeValue,f)),o||va(c)}else o=kd(o).createTextNode(p),o[_]=c,c.stateNode=o}return Mn(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=Mu(c),p!==null&&p.dehydrated!==null){if(o===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[_]=c}else Iu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Mn(c),x=!1}else x=o1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Ni(c),c):(Ni(c),null)}if(Ni(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=p!==null,o=o!==null&&o.memoizedState!==null,f){p=c.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool);var T=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),T!==x&&(p.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),md(c,c.updateQueue),Mn(c),null;case 4:return Me(),o===null&&ob(c.stateNode.containerInfo),Mn(c),null;case 10:return Ci(c.type),Mn(c),null;case 19:if(G(Jn),x=c.memoizedState,x===null)return Mn(c),null;if(p=(c.flags&128)!==0,T=x.rendering,T===null)if(p)Yu(x,!1);else{if(Pn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(T=fd(o),T!==null){for(c.flags|=128,Yu(x,!1),o=T.updateQueue,c.updateQueue=o,md(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)n1(f,o),f=f.sibling;return F(Jn,Jn.current&1|2),c.child}o=o.sibling}x.tail!==null&&Ot()>xd&&(c.flags|=128,p=!0,Yu(x,!1),c.lanes=4194304)}else{if(!p)if(o=fd(T),o!==null){if(c.flags|=128,p=!0,o=o.updateQueue,c.updateQueue=o,md(c,o),Yu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!Qt)return Mn(c),null}else 2*Ot()-x.renderingStartTime>xd&&f!==536870912&&(c.flags|=128,p=!0,Yu(x,!1),c.lanes=4194304);x.isBackwards?(T.sibling=c.child,c.child=T):(o=x.last,o!==null?o.sibling=T:c.child=T,x.last=T)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Ot(),c.sibling=null,o=Jn.current,F(Jn,p?o&1|2:o&1),c):(Mn(c),null);case 22:case 23:return Ni(c),ly(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(f&536870912)!==0&&(c.flags&128)===0&&(Mn(c),c.subtreeFlags&6&&(c.flags|=8192)):Mn(c),f=c.updateQueue,f!==null&&md(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048),o!==null&&G(Sa),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ci(Gn),Mn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function F4(o,c){switch(Ym(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ci(Gn),Me(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ue(c),null;case 13:if(Ni(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Iu()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return G(Jn),null;case 4:return Me(),null;case 10:return Ci(c.type),null;case 22:case 23:return Ni(c),ly(),o!==null&&G(Sa),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Ci(Gn),null;case 25:return null;default:return null}}function kS(o,c){switch(Ym(c),c.tag){case 3:Ci(Gn),Me();break;case 26:case 27:case 5:Ue(c);break;case 4:Me();break;case 13:Ni(c);break;case 19:G(Jn);break;case 10:Ci(c.type);break;case 22:case 23:Ni(c),ly(),o!==null&&G(Sa);break;case 24:Ci(Gn)}}function Ku(o,c){try{var f=c.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var x=p.next;f=x;do{if((f.tag&o)===o){p=void 0;var T=f.create,j=f.inst;p=T(),j.destroy=p}f=f.next}while(f!==x)}}catch(V){yn(c,c.return,V)}}function lo(o,c,f){try{var p=c.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var T=x.next;p=T;do{if((p.tag&o)===o){var j=p.inst,V=j.destroy;if(V!==void 0){j.destroy=void 0,x=c;var ne=f,Ee=V;try{Ee()}catch(De){yn(x,ne,De)}}}p=p.next}while(p!==T)}}catch(De){yn(c,c.return,De)}}function NS(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{y1(c,f)}catch(p){yn(o,o.return,p)}}}function MS(o,c,f){f.props=Ea(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(p){yn(o,c,p)}}function Zu(o,c){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof f=="function"?o.refCleanup=f(p):f.current=p}}catch(x){yn(o,c,x)}}function ri(o,c){var f=o.ref,p=o.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(x){yn(o,c,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){yn(o,c,x)}else f.current=null}function IS(o){var c=o.type,f=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(x){yn(o,o.return,x)}}function jy(o,c,f){try{var p=o.stateNode;sD(p,o.type,f,c),p[E]=c}catch(x){yn(o,o.return,x)}}function OS(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&yo(o.type)||o.tag===4}function Fy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||OS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&yo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function By(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(o),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Cd));else if(p!==4&&(p===27&&yo(o.type)&&(f=o.stateNode,c=null),o=o.child,o!==null))for(By(o,c,f),o=o.sibling;o!==null;)By(o,c,f),o=o.sibling}function yd(o,c,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(p!==4&&(p===27&&yo(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(yd(o,c,f),o=o.sibling;o!==null;)yd(o,c,f),o=o.sibling}function PS(o){var c=o.stateNode,f=o.memoizedProps;try{for(var p=o.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);fr(c,p,f),c[_]=o,c[E]=f}catch(T){yn(o,o.return,T)}}var Oi=!1,Un=!1,Ly=!1,DS=typeof WeakSet=="function"?WeakSet:Set,or=null;function B4(o,c){if(o=o.containerInfo,cb=Dd,o=qw(o),Fm(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var x=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var j=0,V=-1,ne=-1,Ee=0,De=0,Fe=o,Ce=null;t:for(;;){for(var Ne;Fe!==f||x!==0&&Fe.nodeType!==3||(V=j+x),Fe!==T||p!==0&&Fe.nodeType!==3||(ne=j+p),Fe.nodeType===3&&(j+=Fe.nodeValue.length),(Ne=Fe.firstChild)!==null;)Ce=Fe,Fe=Ne;for(;;){if(Fe===o)break t;if(Ce===f&&++Ee===x&&(V=j),Ce===T&&++De===p&&(ne=j),(Ne=Fe.nextSibling)!==null)break;Fe=Ce,Ce=Fe.parentNode}Fe=Ne}f=V===-1||ne===-1?null:{start:V,end:ne}}else f=null}f=f||{start:0,end:0}}else f=null;for(ub={focusedElem:o,selectionRange:f},Dd=!1,or=c;or!==null;)if(c=or,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,or=o;else for(;or!==null;){switch(c=or,T=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,f=c,x=T.memoizedProps,T=T.memoizedState,p=f.stateNode;try{var _t=Ea(f.type,x,f.elementType===f.type);o=p.getSnapshotBeforeUpdate(_t,T),p.__reactInternalSnapshotBeforeUpdate=o}catch(gt){yn(f,f.return,gt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)db(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":db(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,or=o;break}or=c.return}}function jS(o,c,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:co(o,f),p&4&&Ku(5,f);break;case 1:if(co(o,f),p&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(j){yn(f,f.return,j)}else{var x=Ea(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(x,c,o.__reactInternalSnapshotBeforeUpdate)}catch(j){yn(f,f.return,j)}}p&64&&NS(f),p&512&&Zu(f,f.return);break;case 3:if(co(o,f),p&64&&(o=f.updateQueue,o!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{y1(o,c)}catch(j){yn(f,f.return,j)}}break;case 27:c===null&&p&4&&PS(f);case 26:case 5:co(o,f),c===null&&p&4&&IS(f),p&512&&Zu(f,f.return);break;case 12:co(o,f);break;case 13:co(o,f),p&4&&LS(o,f),p&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=X4.bind(null,f),fD(o,f))));break;case 22:if(p=f.memoizedState!==null||Oi,!p){c=c!==null&&c.memoizedState!==null||Un,x=Oi;var T=Un;Oi=p,(Un=c)&&!T?uo(o,f,(f.subtreeFlags&8772)!==0):co(o,f),Oi=x,Un=T}break;case 30:break;default:co(o,f)}}function FS(o){var c=o.alternate;c!==null&&(o.alternate=null,FS(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Ie(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var An=null,Vr=!1;function Pi(o,c,f){for(f=f.child;f!==null;)BS(o,c,f),f=f.sibling}function BS(o,c,f){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Oe,f)}catch{}switch(f.tag){case 26:Un||ri(f,c),Pi(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Un||ri(f,c);var p=An,x=Vr;yo(f.type)&&(An=f.stateNode,Vr=!1),Pi(o,c,f),of(f.stateNode),An=p,Vr=x;break;case 5:Un||ri(f,c);case 6:if(p=An,x=Vr,An=null,Pi(o,c,f),An=p,Vr=x,An!==null)if(Vr)try{(An.nodeType===9?An.body:An.nodeName==="HTML"?An.ownerDocument.body:An).removeChild(f.stateNode)}catch(T){yn(f,c,T)}else try{An.removeChild(f.stateNode)}catch(T){yn(f,c,T)}break;case 18:An!==null&&(Vr?(o=An,AT(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),pf(o)):AT(An,f.stateNode));break;case 4:p=An,x=Vr,An=f.stateNode.containerInfo,Vr=!0,Pi(o,c,f),An=p,Vr=x;break;case 0:case 11:case 14:case 15:Un||lo(2,f,c),Un||lo(4,f,c),Pi(o,c,f);break;case 1:Un||(ri(f,c),p=f.stateNode,typeof p.componentWillUnmount=="function"&&MS(f,c,p)),Pi(o,c,f);break;case 21:Pi(o,c,f);break;case 22:Un=(p=Un)||f.memoizedState!==null,Pi(o,c,f),Un=p;break;default:Pi(o,c,f)}}function LS(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{pf(o)}catch(f){yn(c,c.return,f)}}function L4(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new DS),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new DS),c;default:throw Error(r(435,o.tag))}}function Uy(o,c){var f=L4(o);c.forEach(function(p){var x=Y4.bind(null,o,p);f.has(p)||(f.add(p),p.then(x,x))})}function Jr(o,c){var f=c.deletions;if(f!==null)for(var p=0;p<f.length;p++){var x=f[p],T=o,j=c,V=j;e:for(;V!==null;){switch(V.tag){case 27:if(yo(V.type)){An=V.stateNode,Vr=!1;break e}break;case 5:An=V.stateNode,Vr=!1;break e;case 3:case 4:An=V.stateNode.containerInfo,Vr=!0;break e}V=V.return}if(An===null)throw Error(r(160));BS(T,j,x),An=null,Vr=!1,T=x.alternate,T!==null&&(T.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)US(c,o),c=c.sibling}var Fs=null;function US(o,c){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Jr(c,o),es(o),p&4&&(lo(3,o,o.return),Ku(3,o),lo(5,o,o.return));break;case 1:Jr(c,o),es(o),p&512&&(Un||f===null||ri(f,f.return)),p&64&&Oi&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var x=Fs;if(Jr(c,o),es(o),p&512&&(Un||f===null||ri(f,f.return)),p&4){var T=f!==null?f.memoizedState:null;if(p=o.memoizedState,f===null)if(p===null)if(o.stateNode===null){e:{p=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(p){case"title":T=x.getElementsByTagName("title")[0],(!T||T[re]||T[_]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=x.createElement(p),x.head.insertBefore(T,x.querySelector("head > title"))),fr(T,p,f),T[_]=o,se(T),p=T;break e;case"link":var j=PT("link","href",x).get(p+(f.href||""));if(j){for(var V=0;V<j.length;V++)if(T=j[V],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){j.splice(V,1);break t}}T=x.createElement(p),fr(T,p,f),x.head.appendChild(T);break;case"meta":if(j=PT("meta","content",x).get(p+(f.content||""))){for(V=0;V<j.length;V++)if(T=j[V],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){j.splice(V,1);break t}}T=x.createElement(p),fr(T,p,f),x.head.appendChild(T);break;default:throw Error(r(468,p))}T[_]=o,se(T),p=T}o.stateNode=p}else DT(x,o.type,o.stateNode);else o.stateNode=OT(x,p,o.memoizedProps);else T!==p?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,p===null?DT(x,o.type,o.stateNode):OT(x,p,o.memoizedProps)):p===null&&o.stateNode!==null&&jy(o,o.memoizedProps,f.memoizedProps)}break;case 27:Jr(c,o),es(o),p&512&&(Un||f===null||ri(f,f.return)),f!==null&&p&4&&jy(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Jr(c,o),es(o),p&512&&(Un||f===null||ri(f,f.return)),o.flags&32){x=o.stateNode;try{Ji(x,"")}catch(Ne){yn(o,o.return,Ne)}}p&4&&o.stateNode!=null&&(x=o.memoizedProps,jy(o,x,f!==null?f.memoizedProps:x)),p&1024&&(Ly=!0);break;case 6:if(Jr(c,o),es(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,f=o.stateNode;try{f.nodeValue=p}catch(Ne){yn(o,o.return,Ne)}}break;case 3:if(Id=null,x=Fs,Fs=Nd(c.containerInfo),Jr(c,o),Fs=x,es(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{pf(c.containerInfo)}catch(Ne){yn(o,o.return,Ne)}Ly&&(Ly=!1,zS(o));break;case 4:p=Fs,Fs=Nd(o.stateNode.containerInfo),Jr(c,o),es(o),Fs=p;break;case 12:Jr(c,o),es(o);break;case 13:Jr(c,o),es(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(qy=Ot()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Uy(o,p)));break;case 22:x=o.memoizedState!==null;var ne=f!==null&&f.memoizedState!==null,Ee=Oi,De=Un;if(Oi=Ee||x,Un=De||ne,Jr(c,o),Un=De,Oi=Ee,es(o),p&8192)e:for(c=o.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(f===null||ne||Oi||Un||Aa(o)),f=null,c=o;;){if(c.tag===5||c.tag===26){if(f===null){ne=f=c;try{if(T=ne.stateNode,x)j=T.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{V=ne.stateNode;var Fe=ne.memoizedProps.style,Ce=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;V.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Ne){yn(ne,ne.return,Ne)}}}else if(c.tag===6){if(f===null){ne=c;try{ne.stateNode.nodeValue=x?"":ne.memoizedProps}catch(Ne){yn(ne,ne.return,Ne)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Uy(o,f))));break;case 19:Jr(c,o),es(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Uy(o,p)));break;case 30:break;case 21:break;default:Jr(c,o),es(o)}}function es(o){var c=o.flags;if(c&2){try{for(var f,p=o.return;p!==null;){if(OS(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,T=Fy(o);yd(o,T,x);break;case 5:var j=f.stateNode;f.flags&32&&(Ji(j,""),f.flags&=-33);var V=Fy(o);yd(o,V,j);break;case 3:case 4:var ne=f.stateNode.containerInfo,Ee=Fy(o);By(o,Ee,ne);break;default:throw Error(r(161))}}catch(De){yn(o,o.return,De)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function zS(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;zS(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function co(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)jS(o,c.alternate,c),c=c.sibling}function Aa(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:lo(4,c,c.return),Aa(c);break;case 1:ri(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&MS(c,c.return,f),Aa(c);break;case 27:of(c.stateNode);case 26:case 5:ri(c,c.return),Aa(c);break;case 22:c.memoizedState===null&&Aa(c);break;case 30:Aa(c);break;default:Aa(c)}o=o.sibling}}function uo(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,x=o,T=c,j=T.flags;switch(T.tag){case 0:case 11:case 15:uo(x,T,f),Ku(4,T);break;case 1:if(uo(x,T,f),p=T,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ee){yn(p,p.return,Ee)}if(p=T,x=p.updateQueue,x!==null){var V=p.stateNode;try{var ne=x.shared.hiddenCallbacks;if(ne!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ne.length;x++)m1(ne[x],V)}catch(Ee){yn(p,p.return,Ee)}}f&&j&64&&NS(T),Zu(T,T.return);break;case 27:PS(T);case 26:case 5:uo(x,T,f),f&&p===null&&j&4&&IS(T),Zu(T,T.return);break;case 12:uo(x,T,f);break;case 13:uo(x,T,f),f&&j&4&&LS(x,T);break;case 22:T.memoizedState===null&&uo(x,T,f),Zu(T,T.return);break;case 30:break;default:uo(x,T,f)}c=c.sibling}}function zy(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Du(f))}function Vy(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Du(o))}function si(o,c,f,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)VS(o,c,f,p),c=c.sibling}function VS(o,c,f,p){var x=c.flags;switch(c.tag){case 0:case 11:case 15:si(o,c,f,p),x&2048&&Ku(9,c);break;case 1:si(o,c,f,p);break;case 3:si(o,c,f,p),x&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Du(o)));break;case 12:if(x&2048){si(o,c,f,p),o=c.stateNode;try{var T=c.memoizedProps,j=T.id,V=T.onPostCommit;typeof V=="function"&&V(j,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ne){yn(c,c.return,ne)}}else si(o,c,f,p);break;case 13:si(o,c,f,p);break;case 23:break;case 22:T=c.stateNode,j=c.alternate,c.memoizedState!==null?T._visibility&2?si(o,c,f,p):Qu(o,c):T._visibility&2?si(o,c,f,p):(T._visibility|=2,Bl(o,c,f,p,(c.subtreeFlags&10256)!==0)),x&2048&&zy(j,c);break;case 24:si(o,c,f,p),x&2048&&Vy(c.alternate,c);break;default:si(o,c,f,p)}}function Bl(o,c,f,p,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var T=o,j=c,V=f,ne=p,Ee=j.flags;switch(j.tag){case 0:case 11:case 15:Bl(T,j,V,ne,x),Ku(8,j);break;case 23:break;case 22:var De=j.stateNode;j.memoizedState!==null?De._visibility&2?Bl(T,j,V,ne,x):Qu(T,j):(De._visibility|=2,Bl(T,j,V,ne,x)),x&&Ee&2048&&zy(j.alternate,j);break;case 24:Bl(T,j,V,ne,x),x&&Ee&2048&&Vy(j.alternate,j);break;default:Bl(T,j,V,ne,x)}c=c.sibling}}function Qu(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,p=c,x=p.flags;switch(p.tag){case 22:Qu(f,p),x&2048&&zy(p.alternate,p);break;case 24:Qu(f,p),x&2048&&Vy(p.alternate,p);break;default:Qu(f,p)}c=c.sibling}}var Gu=8192;function Ll(o){if(o.subtreeFlags&Gu)for(o=o.child;o!==null;)$S(o),o=o.sibling}function $S(o){switch(o.tag){case 26:Ll(o),o.flags&Gu&&o.memoizedState!==null&&TD(Fs,o.memoizedState,o.memoizedProps);break;case 5:Ll(o);break;case 3:case 4:var c=Fs;Fs=Nd(o.stateNode.containerInfo),Ll(o),Fs=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Gu,Gu=16777216,Ll(o),Gu=c):Ll(o));break;default:Ll(o)}}function HS(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Ju(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];or=p,qS(p,o)}HS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)WS(o),o=o.sibling}function WS(o){switch(o.tag){case 0:case 11:case 15:Ju(o),o.flags&2048&&lo(9,o,o.return);break;case 3:Ju(o);break;case 12:Ju(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,bd(o)):Ju(o);break;default:Ju(o)}}function bd(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var p=c[f];or=p,qS(p,o)}HS(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:lo(8,c,c.return),bd(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,bd(c));break;default:bd(c)}o=o.sibling}}function qS(o,c){for(;or!==null;){var f=or;switch(f.tag){case 0:case 11:case 15:lo(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Du(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,or=p;else e:for(f=o;or!==null;){p=or;var x=p.sibling,T=p.return;if(FS(p),p===f){or=null;break e}if(x!==null){x.return=T,or=x;break e}or=T}}}var U4={getCacheForType:function(o){var c=br(Gn),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},z4=typeof WeakMap=="function"?WeakMap:Map,on=0,_n=null,jt=null,Vt=0,an=0,ts=null,fo=!1,Ul=!1,$y=!1,Di=0,Pn=0,ho=0,Ra=0,Hy=0,xs=0,zl=0,ef=null,$r=null,Wy=!1,qy=0,xd=1/0,vd=null,po=null,ur=0,go=null,Vl=null,$l=0,Xy=0,Yy=null,XS=null,tf=0,Ky=null;function ns(){if((on&2)!==0&&Vt!==0)return Vt&-Vt;if(ie.T!==null){var o=Nl;return o!==0?o:nb()}return S()}function YS(){xs===0&&(xs=(Vt&536870912)===0||Qt?fa():536870912);var o=bs.current;return o!==null&&(o.flags|=32),xs}function rs(o,c,f){(o===_n&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(Hl(o,0),mo(o,Vt,xs,!1)),Ps(o,f),((on&2)===0||o!==_n)&&(o===_n&&((on&2)===0&&(Ra|=f),Pn===4&&mo(o,Vt,xs,!1)),ii(o))}function KS(o,c,f){if((on&6)!==0)throw Error(r(327));var p=!f&&(c&124)===0&&(c&o.expiredLanes)===0||Br(o,c),x=p?H4(o,c):Gy(o,c,!0),T=p;do{if(x===0){Ul&&!p&&mo(o,c,0,!1);break}else{if(f=o.current.alternate,T&&!V4(f)){x=Gy(o,c,!1),T=!1;continue}if(x===2){if(T=c,o.errorRecoveryDisabledLanes&T)var j=0;else j=o.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;e:{var V=o;x=ef;var ne=V.current.memoizedState.isDehydrated;if(ne&&(Hl(V,j).flags|=256),j=Gy(V,j,!1),j!==2){if($y&&!ne){V.errorRecoveryDisabledLanes|=T,Ra|=T,x=4;break e}T=$r,$r=x,T!==null&&($r===null?$r=T:$r.push.apply($r,T))}x=j}if(T=!1,x!==2)continue}}if(x===1){Hl(o,0),mo(o,c,0,!0);break}e:{switch(p=o,T=x,T){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:mo(p,c,xs,!fo);break e;case 2:$r=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=qy+300-Ot(),10<x)){if(mo(p,c,xs,!fo),zn(p,0,!0)!==0)break e;p.timeoutHandle=TT(ZS.bind(null,p,f,$r,vd,Wy,c,xs,Ra,zl,fo,T,2,-0,0),x);break e}ZS(p,f,$r,vd,Wy,c,xs,Ra,zl,fo,T,0,-0,0)}}break}while(!0);ii(o)}function ZS(o,c,f,p,x,T,j,V,ne,Ee,De,Fe,Ce,Ne){if(o.timeoutHandle=-1,Fe=c.subtreeFlags,(Fe&8192||(Fe&16785408)===16785408)&&(cf={stylesheets:null,count:0,unsuspend:SD},$S(c),Fe=ED(),Fe!==null)){o.cancelPendingCommit=Fe(rT.bind(null,o,c,T,f,p,x,j,V,ne,De,1,Ce,Ne)),mo(o,T,j,!Ee);return}rT(o,c,T,f,p,x,j,V,ne)}function V4(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var x=f[p],T=x.getSnapshot;x=x.value;try{if(!Qr(T(),x))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function mo(o,c,f,p){c&=~Hy,c&=~Ra,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var x=c;0<x;){var T=31-pt(x),j=1<<T;p[T]=-1,x&=~j}f!==0&&ha(o,f,c)}function _d(){return(on&6)===0?(nf(0),!1):!0}function Zy(){if(jt!==null){if(an===0)var o=jt.return;else o=jt,Ri=_a=null,dy(o),jl=null,qu=0,o=jt;for(;o!==null;)kS(o.alternate,o),o=o.return;jt=null}}function Hl(o,c){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,oD(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),Zy(),_n=o,jt=f=Ti(o.current,null),Vt=c,an=0,ts=null,fo=!1,Ul=Br(o,c),$y=!1,zl=xs=Hy=Ra=ho=Pn=0,$r=ef=null,Wy=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var x=31-pt(p),T=1<<x;c|=o[x],p&=~T}return Di=c,$h(),f}function QS(o,c){Nt=null,ie.H=ld,c===Fu||c===Gh?(c=p1(),an=3):c===f1?(c=p1(),an=4):an=c===gS?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ts=c,jt===null&&(Pn=1,dd(o,ps(c,o.current)))}function GS(){var o=ie.H;return ie.H=ld,o===null?ld:o}function JS(){var o=ie.A;return ie.A=U4,o}function Qy(){Pn=4,fo||(Vt&4194048)!==Vt&&bs.current!==null||(Ul=!0),(ho&134217727)===0&&(Ra&134217727)===0||_n===null||mo(_n,Vt,xs,!1)}function Gy(o,c,f){var p=on;on|=2;var x=GS(),T=JS();(_n!==o||Vt!==c)&&(vd=null,Hl(o,c)),c=!1;var j=Pn;e:do try{if(an!==0&&jt!==null){var V=jt,ne=ts;switch(an){case 8:Zy(),j=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(c=!0);var Ee=an;if(an=0,ts=null,Wl(o,V,ne,Ee),f&&Ul){j=0;break e}break;default:Ee=an,an=0,ts=null,Wl(o,V,ne,Ee)}}$4(),j=Pn;break}catch(De){QS(o,De)}while(!0);return c&&o.shellSuspendCounter++,Ri=_a=null,on=p,ie.H=x,ie.A=T,jt===null&&(_n=null,Vt=0,$h()),j}function $4(){for(;jt!==null;)eT(jt)}function H4(o,c){var f=on;on|=2;var p=GS(),x=JS();_n!==o||Vt!==c?(vd=null,xd=Ot()+500,Hl(o,c)):Ul=Br(o,c);e:do try{if(an!==0&&jt!==null){c=jt;var T=ts;t:switch(an){case 1:an=0,ts=null,Wl(o,c,T,1);break;case 2:case 9:if(h1(T)){an=0,ts=null,tT(c);break}c=function(){an!==2&&an!==9||_n!==o||(an=7),ii(o)},T.then(c,c);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:h1(T)?(an=0,ts=null,tT(c)):(an=0,ts=null,Wl(o,c,T,7));break;case 5:var j=null;switch(jt.tag){case 26:j=jt.memoizedState;case 5:case 27:var V=jt;if(!j||jT(j)){an=0,ts=null;var ne=V.sibling;if(ne!==null)jt=ne;else{var Ee=V.return;Ee!==null?(jt=Ee,wd(Ee)):jt=null}break t}}an=0,ts=null,Wl(o,c,T,5);break;case 6:an=0,ts=null,Wl(o,c,T,6);break;case 8:Zy(),Pn=6;break e;default:throw Error(r(462))}}W4();break}catch(De){QS(o,De)}while(!0);return Ri=_a=null,ie.H=p,ie.A=x,on=f,jt!==null?0:(_n=null,Vt=0,$h(),Pn)}function W4(){for(;jt!==null&&!kt();)eT(jt)}function eT(o){var c=RS(o.alternate,o,Di);o.memoizedProps=o.pendingProps,c===null?wd(o):jt=c}function tT(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=_S(f,c,c.pendingProps,c.type,void 0,Vt);break;case 11:c=_S(f,c,c.pendingProps,c.type.render,c.ref,Vt);break;case 5:dy(c);default:kS(f,c),c=jt=n1(c,Di),c=RS(f,c,Di)}o.memoizedProps=o.pendingProps,c===null?wd(o):jt=c}function Wl(o,c,f,p){Ri=_a=null,dy(c),jl=null,qu=0;var x=c.return;try{if(P4(o,x,c,f,Vt)){Pn=1,dd(o,ps(f,o.current)),jt=null;return}}catch(T){if(x!==null)throw jt=x,T;Pn=1,dd(o,ps(f,o.current)),jt=null;return}c.flags&32768?(Qt||p===1?o=!0:Ul||(Vt&536870912)!==0?o=!1:(fo=o=!0,(p===2||p===9||p===3||p===6)&&(p=bs.current,p!==null&&p.tag===13&&(p.flags|=16384))),nT(c,o)):wd(c)}function wd(o){var c=o;do{if((c.flags&32768)!==0){nT(c,fo);return}o=c.return;var f=j4(c.alternate,c,Di);if(f!==null){jt=f;return}if(c=c.sibling,c!==null){jt=c;return}jt=c=o}while(c!==null);Pn===0&&(Pn=5)}function nT(o,c){do{var f=F4(o.alternate,o);if(f!==null){f.flags&=32767,jt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){jt=o;return}jt=o=f}while(o!==null);Pn=6,jt=null}function rT(o,c,f,p,x,T,j,V,ne){o.cancelPendingCommit=null;do Sd();while(ur!==0);if((on&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(T=c.lanes|c.childLanes,T|=Vm,IP(o,f,T,j,V,ne),o===_n&&(jt=_n=null,Vt=0),Vl=c,go=o,$l=f,Xy=T,Yy=x,XS=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,K4(Kn,function(){return lT(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=ie.T,ie.T=null,x=Ae.p,Ae.p=2,j=on,on|=4;try{B4(o,c,f)}finally{on=j,Ae.p=x,ie.T=p}}ur=1,sT(),iT(),oT()}}function sT(){if(ur===1){ur=0;var o=go,c=Vl,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=ie.T,ie.T=null;var p=Ae.p;Ae.p=2;var x=on;on|=4;try{US(c,o);var T=ub,j=qw(o.containerInfo),V=T.focusedElem,ne=T.selectionRange;if(j!==V&&V&&V.ownerDocument&&Ww(V.ownerDocument.documentElement,V)){if(ne!==null&&Fm(V)){var Ee=ne.start,De=ne.end;if(De===void 0&&(De=Ee),"selectionStart"in V)V.selectionStart=Ee,V.selectionEnd=Math.min(De,V.value.length);else{var Fe=V.ownerDocument||document,Ce=Fe&&Fe.defaultView||window;if(Ce.getSelection){var Ne=Ce.getSelection(),_t=V.textContent.length,gt=Math.min(ne.start,_t),hn=ne.end===void 0?gt:Math.min(ne.end,_t);!Ne.extend&&gt>hn&&(j=hn,hn=gt,gt=j);var xe=Hw(V,gt),fe=Hw(V,hn);if(xe&&fe&&(Ne.rangeCount!==1||Ne.anchorNode!==xe.node||Ne.anchorOffset!==xe.offset||Ne.focusNode!==fe.node||Ne.focusOffset!==fe.offset)){var Te=Fe.createRange();Te.setStart(xe.node,xe.offset),Ne.removeAllRanges(),gt>hn?(Ne.addRange(Te),Ne.extend(fe.node,fe.offset)):(Te.setEnd(fe.node,fe.offset),Ne.addRange(Te))}}}}for(Fe=[],Ne=V;Ne=Ne.parentNode;)Ne.nodeType===1&&Fe.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Fe.length;V++){var je=Fe[V];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}Dd=!!cb,ub=cb=null}finally{on=x,Ae.p=p,ie.T=f}}o.current=c,ur=2}}function iT(){if(ur===2){ur=0;var o=go,c=Vl,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=ie.T,ie.T=null;var p=Ae.p;Ae.p=2;var x=on;on|=4;try{jS(o,c.alternate,c)}finally{on=x,Ae.p=p,ie.T=f}}ur=3}}function oT(){if(ur===4||ur===3){ur=0,Et();var o=go,c=Vl,f=$l,p=XS;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ur=5:(ur=0,Vl=go=null,aT(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(po=null),B(f),c=c.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Oe,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=ie.T,x=Ae.p,Ae.p=2,ie.T=null;try{for(var T=o.onRecoverableError,j=0;j<p.length;j++){var V=p[j];T(V.value,{componentStack:V.stack})}}finally{ie.T=c,Ae.p=x}}($l&3)!==0&&Sd(),ii(o),x=o.pendingLanes,(f&4194090)!==0&&(x&42)!==0?o===Ky?tf++:(tf=0,Ky=o):tf=0,nf(0)}}function aT(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Du(c)))}function Sd(o){return sT(),iT(),oT(),lT()}function lT(){if(ur!==5)return!1;var o=go,c=Xy;Xy=0;var f=B($l),p=ie.T,x=Ae.p;try{Ae.p=32>f?32:f,ie.T=null,f=Yy,Yy=null;var T=go,j=$l;if(ur=0,Vl=go=null,$l=0,(on&6)!==0)throw Error(r(331));var V=on;if(on|=4,WS(T.current),VS(T,T.current,j,f),on=V,nf(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Oe,T)}catch{}return!0}finally{Ae.p=x,ie.T=p,aT(o,c)}}function cT(o,c,f){c=ps(f,c),c=Ry(o.stateNode,c,2),o=so(o,c,2),o!==null&&(Ps(o,2),ii(o))}function yn(o,c,f){if(o.tag===3)cT(o,o,f);else for(;c!==null;){if(c.tag===3){cT(c,o,f);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(po===null||!po.has(p))){o=ps(f,o),f=dS(2),p=so(c,f,2),p!==null&&(pS(f,p,c,o),Ps(p,2),ii(p));break}}c=c.return}}function Jy(o,c,f){var p=o.pingCache;if(p===null){p=o.pingCache=new z4;var x=new Set;p.set(c,x)}else x=p.get(c),x===void 0&&(x=new Set,p.set(c,x));x.has(f)||($y=!0,x.add(f),o=q4.bind(null,o,c,f),c.then(o,o))}function q4(o,c,f){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,_n===o&&(Vt&f)===f&&(Pn===4||Pn===3&&(Vt&62914560)===Vt&&300>Ot()-qy?(on&2)===0&&Hl(o,0):Hy|=f,zl===Vt&&(zl=0)),ii(o)}function uT(o,c){c===0&&(c=xu()),o=Al(o,c),o!==null&&(Ps(o,c),ii(o))}function X4(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),uT(o,f)}function Y4(o,c){var f=0;switch(o.tag){case 13:var p=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(c),uT(o,f)}function K4(o,c){return Ze(o,c)}var Td=null,ql=null,eb=!1,Ed=!1,tb=!1,Ca=0;function ii(o){o!==ql&&o.next===null&&(ql===null?Td=ql=o:ql=ql.next=o),Ed=!0,eb||(eb=!0,Q4())}function nf(o,c){if(!tb&&Ed){tb=!0;do for(var f=!1,p=Td;p!==null;){if(o!==0){var x=p.pendingLanes;if(x===0)var T=0;else{var j=p.suspendedLanes,V=p.pingedLanes;T=(1<<31-pt(42|o)+1)-1,T&=x&~(j&~V),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,pT(p,T))}else T=Vt,T=zn(p,p===_n?T:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(T&3)===0||Br(p,T)||(f=!0,pT(p,T));p=p.next}while(f);tb=!1}}function Z4(){fT()}function fT(){Ed=eb=!1;var o=0;Ca!==0&&(iD()&&(o=Ca),Ca=0);for(var c=Ot(),f=null,p=Td;p!==null;){var x=p.next,T=hT(p,c);T===0?(p.next=null,f===null?Td=x:f.next=x,x===null&&(ql=f)):(f=p,(o!==0||(T&3)!==0)&&(Ed=!0)),p=x}nf(o)}function hT(o,c){for(var f=o.suspendedLanes,p=o.pingedLanes,x=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var j=31-pt(T),V=1<<j,ne=x[j];ne===-1?((V&f)===0||(V&p)!==0)&&(x[j]=Kr(V,c)):ne<=c&&(o.expiredLanes|=V),T&=~V}if(c=_n,f=Vt,f=zn(o,o===c?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,f===0||o===c&&(an===2||an===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&ot(p),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Br(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(p!==null&&ot(p),B(f)){case 2:case 8:f=Is;break;case 32:f=Kn;break;case 268435456:f=Js;break;default:f=Kn}return p=dT.bind(null,o),f=Ze(f,p),o.callbackPriority=c,o.callbackNode=f,c}return p!==null&&p!==null&&ot(p),o.callbackPriority=2,o.callbackNode=null,2}function dT(o,c){if(ur!==0&&ur!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Sd()&&o.callbackNode!==f)return null;var p=Vt;return p=zn(o,o===_n?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(KS(o,p,c),hT(o,Ot()),o.callbackNode!=null&&o.callbackNode===f?dT.bind(null,o):null)}function pT(o,c){if(Sd())return null;KS(o,c,!0)}function Q4(){aD(function(){(on&6)!==0?Ze(en,Z4):fT()})}function nb(){return Ca===0&&(Ca=fa()),Ca}function gT(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:jh(""+o)}function mT(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function G4(o,c,f,p,x){if(c==="submit"&&f&&f.stateNode===x){var T=gT((x[E]||null).action),j=p.submitter;j&&(c=(c=j[E]||null)?gT(c.formAction):j.getAttribute("formAction"),c!==null&&(T=c,j=null));var V=new Uh("action","action",null,p,x);o.push({event:V,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ca!==0){var ne=j?mT(x,j):new FormData(x);wy(f,{pending:!0,data:ne,method:x.method,action:T},null,ne)}}else typeof T=="function"&&(V.preventDefault(),ne=j?mT(x,j):new FormData(x),wy(f,{pending:!0,data:ne,method:x.method,action:T},T,ne))},currentTarget:x}]})}}for(var rb=0;rb<zm.length;rb++){var sb=zm[rb],J4=sb.toLowerCase(),eD=sb[0].toUpperCase()+sb.slice(1);js(J4,"on"+eD)}js(Kw,"onAnimationEnd"),js(Zw,"onAnimationIteration"),js(Qw,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(y4,"onTransitionRun"),js(b4,"onTransitionStart"),js(x4,"onTransitionCancel"),js(Gw,"onTransitionEnd"),ht("onMouseEnter",["mouseout","mouseover"]),ht("onMouseLeave",["mouseout","mouseover"]),ht("onPointerEnter",["pointerout","pointerover"]),ht("onPointerLeave",["pointerout","pointerover"]),lt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lt("onBeforeInput",["compositionend","keypress","textInput","paste"]),lt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rf));function yT(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],x=p.event;p=p.listeners;e:{var T=void 0;if(c)for(var j=p.length-1;0<=j;j--){var V=p[j],ne=V.instance,Ee=V.currentTarget;if(V=V.listener,ne!==T&&x.isPropagationStopped())break e;T=V,x.currentTarget=Ee;try{T(x)}catch(De){hd(De)}x.currentTarget=null,T=ne}else for(j=0;j<p.length;j++){if(V=p[j],ne=V.instance,Ee=V.currentTarget,V=V.listener,ne!==T&&x.isPropagationStopped())break e;T=V,x.currentTarget=Ee;try{T(x)}catch(De){hd(De)}x.currentTarget=null,T=ne}}}}function Ft(o,c){var f=c[$];f===void 0&&(f=c[$]=new Set);var p=o+"__bubble";f.has(p)||(bT(c,o,2,!1),f.add(p))}function ib(o,c,f){var p=0;c&&(p|=4),bT(f,o,p,c)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function ob(o){if(!o[Ad]){o[Ad]=!0,qe.forEach(function(f){f!=="selectionchange"&&(tD.has(f)||ib(f,!1,o),ib(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Ad]||(c[Ad]=!0,ib("selectionchange",!1,c))}}function bT(o,c,f,p){switch(VT(c)){case 2:var x=CD;break;case 8:x=kD;break;default:x=vb}f=x.bind(null,c,f,o),x=void 0,!Cm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),p?x!==void 0?o.addEventListener(c,f,{capture:!0,passive:x}):o.addEventListener(c,f,!0):x!==void 0?o.addEventListener(c,f,{passive:x}):o.addEventListener(c,f,!1)}function ab(o,c,f,p,x){var T=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var j=p.tag;if(j===3||j===4){var V=p.stateNode.containerInfo;if(V===x)break;if(j===4)for(j=p.return;j!==null;){var ne=j.tag;if((ne===3||ne===4)&&j.stateNode.containerInfo===x)return;j=j.return}for(;V!==null;){if(j=We(V),j===null)return;if(ne=j.tag,ne===5||ne===6||ne===26||ne===27){p=T=j;continue e}V=V.parentNode}}p=p.return}Ew(function(){var Ee=T,De=Am(f),Fe=[];e:{var Ce=Jw.get(o);if(Ce!==void 0){var Ne=Uh,_t=o;switch(o){case"keypress":if(Bh(f)===0)break e;case"keydown":case"keyup":Ne=KP;break;case"focusin":_t="focus",Ne=Im;break;case"focusout":_t="blur",Ne=Im;break;case"beforeblur":case"afterblur":Ne=Im;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=FP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=GP;break;case Kw:case Zw:case Qw:Ne=UP;break;case Gw:Ne=e4;break;case"scroll":case"scrollend":Ne=DP;break;case"wheel":Ne=n4;break;case"copy":case"cut":case"paste":Ne=VP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Nw;break;case"toggle":case"beforetoggle":Ne=s4}var gt=(c&4)!==0,hn=!gt&&(o==="scroll"||o==="scrollend"),xe=gt?Ce!==null?Ce+"Capture":null:Ce;gt=[];for(var fe=Ee,Te;fe!==null;){var je=fe;if(Te=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Te===null||xe===null||(je=wu(fe,xe),je!=null&&gt.push(sf(fe,je,Te))),hn)break;fe=fe.return}0<gt.length&&(Ce=new Ne(Ce,_t,null,f,De),Fe.push({event:Ce,listeners:gt}))}}if((c&7)===0){e:{if(Ce=o==="mouseover"||o==="pointerover",Ne=o==="mouseout"||o==="pointerout",Ce&&f!==Em&&(_t=f.relatedTarget||f.fromElement)&&(We(_t)||_t[U]))break e;if((Ne||Ce)&&(Ce=De.window===De?De:(Ce=De.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ne?(_t=f.relatedTarget||f.toElement,Ne=Ee,_t=_t?We(_t):null,_t!==null&&(hn=i(_t),gt=_t.tag,_t!==hn||gt!==5&&gt!==27&&gt!==6)&&(_t=null)):(Ne=null,_t=Ee),Ne!==_t)){if(gt=Cw,je="onMouseLeave",xe="onMouseEnter",fe="mouse",(o==="pointerout"||o==="pointerover")&&(gt=Nw,je="onPointerLeave",xe="onPointerEnter",fe="pointer"),hn=Ne==null?Ce:Pe(Ne),Te=_t==null?Ce:Pe(_t),Ce=new gt(je,fe+"leave",Ne,f,De),Ce.target=hn,Ce.relatedTarget=Te,je=null,We(De)===Ee&&(gt=new gt(xe,fe+"enter",_t,f,De),gt.target=Te,gt.relatedTarget=hn,je=gt),hn=je,Ne&&_t)t:{for(gt=Ne,xe=_t,fe=0,Te=gt;Te;Te=Xl(Te))fe++;for(Te=0,je=xe;je;je=Xl(je))Te++;for(;0<fe-Te;)gt=Xl(gt),fe--;for(;0<Te-fe;)xe=Xl(xe),Te--;for(;fe--;){if(gt===xe||xe!==null&&gt===xe.alternate)break t;gt=Xl(gt),xe=Xl(xe)}gt=null}else gt=null;Ne!==null&&xT(Fe,Ce,Ne,gt,!1),_t!==null&&hn!==null&&xT(Fe,hn,_t,gt,!0)}}e:{if(Ce=Ee?Pe(Ee):window,Ne=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&Ce.type==="file")var nt=Bw;else if(jw(Ce))if(Lw)nt=p4;else{nt=h4;var Pt=f4}else Ne=Ce.nodeName,!Ne||Ne.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Ee&&Tm(Ee.elementType)&&(nt=Bw):nt=d4;if(nt&&(nt=nt(o,Ee))){Fw(Fe,nt,f,De);break e}Pt&&Pt(o,Ce,Ee),o==="focusout"&&Ee&&Ce.type==="number"&&Ee.memoizedProps.value!=null&&_u(Ce,"number",Ce.value)}switch(Pt=Ee?Pe(Ee):window,o){case"focusin":(jw(Pt)||Pt.contentEditable==="true")&&(Sl=Pt,Bm=Ee,Nu=null);break;case"focusout":Nu=Bm=Sl=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,Xw(Fe,f,De);break;case"selectionchange":if(m4)break;case"keydown":case"keyup":Xw(Fe,f,De)}var at;if(Pm)e:{switch(o){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else wl?Pw(o,f)&&(bt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(bt="onCompositionStart");bt&&(Mw&&f.locale!=="ko"&&(wl||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&wl&&(at=Aw()):(eo=De,km="value"in eo?eo.value:eo.textContent,wl=!0)),Pt=Rd(Ee,bt),0<Pt.length&&(bt=new kw(bt,o,null,f,De),Fe.push({event:bt,listeners:Pt}),at?bt.data=at:(at=Dw(f),at!==null&&(bt.data=at)))),(at=o4?a4(o,f):l4(o,f))&&(bt=Rd(Ee,"onBeforeInput"),0<bt.length&&(Pt=new kw("onBeforeInput","beforeinput",null,f,De),Fe.push({event:Pt,listeners:bt}),Pt.data=at)),G4(Fe,o,Ee,f,De)}yT(Fe,c)})}function sf(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Rd(o,c){for(var f=c+"Capture",p=[];o!==null;){var x=o,T=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||T===null||(x=wu(o,f),x!=null&&p.unshift(sf(o,x,T)),x=wu(o,c),x!=null&&p.push(sf(o,x,T))),o.tag===3)return p;o=o.return}return[]}function Xl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function xT(o,c,f,p,x){for(var T=c._reactName,j=[];f!==null&&f!==p;){var V=f,ne=V.alternate,Ee=V.stateNode;if(V=V.tag,ne!==null&&ne===p)break;V!==5&&V!==26&&V!==27||Ee===null||(ne=Ee,x?(Ee=wu(f,T),Ee!=null&&j.unshift(sf(f,Ee,ne))):x||(Ee=wu(f,T),Ee!=null&&j.push(sf(f,Ee,ne)))),f=f.return}j.length!==0&&o.push({event:c,listeners:j})}var nD=/\r\n?/g,rD=/\u0000|\uFFFD/g;function vT(o){return(typeof o=="string"?o:""+o).replace(nD,`
`).replace(rD,"")}function _T(o,c){return c=vT(c),vT(o)===c}function Cd(){}function fn(o,c,f,p,x,T){switch(f){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||Ji(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&Ji(o,""+p);break;case"className":Le(o,"class",p);break;case"tabIndex":Le(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Le(o,f,p);break;case"style":Sw(o,p,T);break;case"data":if(c!=="object"){Le(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=jh(""+p),o.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(c!=="input"&&fn(o,c,"name",x.name,x,null),fn(o,c,"formEncType",x.formEncType,x,null),fn(o,c,"formMethod",x.formMethod,x,null),fn(o,c,"formTarget",x.formTarget,x,null)):(fn(o,c,"encType",x.encType,x,null),fn(o,c,"method",x.method,x,null),fn(o,c,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=jh(""+p),o.setAttribute(f,p);break;case"onClick":p!=null&&(o.onclick=Cd);break;case"onScroll":p!=null&&Ft("scroll",o);break;case"onScrollEnd":p!=null&&Ft("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}f=jh(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""+p):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":p===!0?o.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,p):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(f,p):o.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(f):o.setAttribute(f,p);break;case"popover":Ft("beforetoggle",o),Ft("toggle",o),de(o,"popover",p);break;case"xlinkActuate":Qe(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Qe(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Qe(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Qe(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Qe(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Qe(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Qe(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Qe(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Qe(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":de(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=OP.get(f)||f,de(o,f,p))}}function lb(o,c,f,p,x,T){switch(f){case"style":Sw(o,p,T);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof p=="string"?Ji(o,p):(typeof p=="number"||typeof p=="bigint")&&Ji(o,""+p);break;case"onScroll":p!=null&&Ft("scroll",o);break;case"onScrollEnd":p!=null&&Ft("scrollend",o);break;case"onClick":p!=null&&(o.onclick=Cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),c=f.slice(2,x?f.length-7:void 0),T=o[E]||null,T=T!=null?T[f]:null,typeof T=="function"&&o.removeEventListener(c,T,x),typeof p=="function")){typeof T!="function"&&T!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,p,x);break e}f in o?o[f]=p:p===!0?o.setAttribute(f,""):de(o,f,p)}}}function fr(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",o),Ft("load",o);var p=!1,x=!1,T;for(T in f)if(f.hasOwnProperty(T)){var j=f[T];if(j!=null)switch(T){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:fn(o,c,T,j,f,null)}}x&&fn(o,c,"srcSet",f.srcSet,f,null),p&&fn(o,c,"src",f.src,f,null);return;case"input":Ft("invalid",o);var V=T=j=x=null,ne=null,Ee=null;for(p in f)if(f.hasOwnProperty(p)){var De=f[p];if(De!=null)switch(p){case"name":x=De;break;case"type":j=De;break;case"checked":ne=De;break;case"defaultChecked":Ee=De;break;case"value":T=De;break;case"defaultValue":V=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,c));break;default:fn(o,c,p,De,f,null)}}Ih(o,T,V,ne,Ee,j,x,!1),At(o);return;case"select":Ft("invalid",o),p=j=T=null;for(x in f)if(f.hasOwnProperty(x)&&(V=f[x],V!=null))switch(x){case"value":T=V;break;case"defaultValue":j=V;break;case"multiple":p=V;default:fn(o,c,x,V,f,null)}c=T,f=j,o.multiple=!!p,c!=null?Gi(o,!!p,c,!1):f!=null&&Gi(o,!!p,f,!0);return;case"textarea":Ft("invalid",o),T=x=p=null;for(j in f)if(f.hasOwnProperty(j)&&(V=f[j],V!=null))switch(j){case"value":p=V;break;case"defaultValue":x=V;break;case"children":T=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:fn(o,c,j,V,f,null)}Ph(o,p,x,T),At(o);return;case"option":for(ne in f)if(f.hasOwnProperty(ne)&&(p=f[ne],p!=null))switch(ne){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:fn(o,c,ne,p,f,null)}return;case"dialog":Ft("beforetoggle",o),Ft("toggle",o),Ft("cancel",o),Ft("close",o);break;case"iframe":case"object":Ft("load",o);break;case"video":case"audio":for(p=0;p<rf.length;p++)Ft(rf[p],o);break;case"image":Ft("error",o),Ft("load",o);break;case"details":Ft("toggle",o);break;case"embed":case"source":case"link":Ft("error",o),Ft("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in f)if(f.hasOwnProperty(Ee)&&(p=f[Ee],p!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:fn(o,c,Ee,p,f,null)}return;default:if(Tm(c)){for(De in f)f.hasOwnProperty(De)&&(p=f[De],p!==void 0&&lb(o,c,De,p,f,void 0));return}}for(V in f)f.hasOwnProperty(V)&&(p=f[V],p!=null&&fn(o,c,V,p,f,null))}function sD(o,c,f,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,T=null,j=null,V=null,ne=null,Ee=null,De=null;for(Ne in f){var Fe=f[Ne];if(f.hasOwnProperty(Ne)&&Fe!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":ne=Fe;default:p.hasOwnProperty(Ne)||fn(o,c,Ne,null,p,Fe)}}for(var Ce in p){var Ne=p[Ce];if(Fe=f[Ce],p.hasOwnProperty(Ce)&&(Ne!=null||Fe!=null))switch(Ce){case"type":T=Ne;break;case"name":x=Ne;break;case"checked":Ee=Ne;break;case"defaultChecked":De=Ne;break;case"value":j=Ne;break;case"defaultValue":V=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(r(137,c));break;default:Ne!==Fe&&fn(o,c,Ce,Ne,p,Fe)}}vu(o,j,V,ne,Ee,De,T,x);return;case"select":Ne=j=V=Ce=null;for(T in f)if(ne=f[T],f.hasOwnProperty(T)&&ne!=null)switch(T){case"value":break;case"multiple":Ne=ne;default:p.hasOwnProperty(T)||fn(o,c,T,null,p,ne)}for(x in p)if(T=p[x],ne=f[x],p.hasOwnProperty(x)&&(T!=null||ne!=null))switch(x){case"value":Ce=T;break;case"defaultValue":V=T;break;case"multiple":j=T;default:T!==ne&&fn(o,c,x,T,p,ne)}c=V,f=j,p=Ne,Ce!=null?Gi(o,!!f,Ce,!1):!!p!=!!f&&(c!=null?Gi(o,!!f,c,!0):Gi(o,!!f,f?[]:"",!1));return;case"textarea":Ne=Ce=null;for(V in f)if(x=f[V],f.hasOwnProperty(V)&&x!=null&&!p.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:fn(o,c,V,null,p,x)}for(j in p)if(x=p[j],T=f[j],p.hasOwnProperty(j)&&(x!=null||T!=null))switch(j){case"value":Ce=x;break;case"defaultValue":Ne=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==T&&fn(o,c,j,x,p,T)}Oh(o,Ce,Ne);return;case"option":for(var _t in f)if(Ce=f[_t],f.hasOwnProperty(_t)&&Ce!=null&&!p.hasOwnProperty(_t))switch(_t){case"selected":o.selected=!1;break;default:fn(o,c,_t,null,p,Ce)}for(ne in p)if(Ce=p[ne],Ne=f[ne],p.hasOwnProperty(ne)&&Ce!==Ne&&(Ce!=null||Ne!=null))switch(ne){case"selected":o.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:fn(o,c,ne,Ce,p,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in f)Ce=f[gt],f.hasOwnProperty(gt)&&Ce!=null&&!p.hasOwnProperty(gt)&&fn(o,c,gt,null,p,Ce);for(Ee in p)if(Ce=p[Ee],Ne=f[Ee],p.hasOwnProperty(Ee)&&Ce!==Ne&&(Ce!=null||Ne!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,c));break;default:fn(o,c,Ee,Ce,p,Ne)}return;default:if(Tm(c)){for(var hn in f)Ce=f[hn],f.hasOwnProperty(hn)&&Ce!==void 0&&!p.hasOwnProperty(hn)&&lb(o,c,hn,void 0,p,Ce);for(De in p)Ce=p[De],Ne=f[De],!p.hasOwnProperty(De)||Ce===Ne||Ce===void 0&&Ne===void 0||lb(o,c,De,Ce,p,Ne);return}}for(var xe in f)Ce=f[xe],f.hasOwnProperty(xe)&&Ce!=null&&!p.hasOwnProperty(xe)&&fn(o,c,xe,null,p,Ce);for(Fe in p)Ce=p[Fe],Ne=f[Fe],!p.hasOwnProperty(Fe)||Ce===Ne||Ce==null&&Ne==null||fn(o,c,Fe,Ce,p,Ne)}var cb=null,ub=null;function kd(o){return o.nodeType===9?o:o.ownerDocument}function wT(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function fb(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hb=null;function iD(){var o=window.event;return o&&o.type==="popstate"?o===hb?!1:(hb=o,!0):(hb=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,oD=typeof clearTimeout=="function"?clearTimeout:void 0,ET=typeof Promise=="function"?Promise:void 0,aD=typeof queueMicrotask=="function"?queueMicrotask:typeof ET<"u"?function(o){return ET.resolve(null).then(o).catch(lD)}:TT;function lD(o){setTimeout(function(){throw o})}function yo(o){return o==="head"}function AT(o,c){var f=c,p=0,x=0;do{var T=f.nextSibling;if(o.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<p&&8>p){f=p;var j=o.ownerDocument;if(f&1&&of(j.documentElement),f&2&&of(j.body),f&4)for(f=j.head,of(f),j=f.firstChild;j;){var V=j.nextSibling,ne=j.nodeName;j[re]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&j.rel.toLowerCase()==="stylesheet"||f.removeChild(j),j=V}}if(x===0){o.removeChild(T),pf(c);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:p=f.charCodeAt(0)-48;else p=0;f=T}while(f);pf(c)}function db(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":db(f),Ie(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function cD(o,c,f,p){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[re])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var T=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Bs(o.nextSibling),o===null)break}return null}function uD(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Bs(o.nextSibling),o===null))return null;return o}function pb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function fD(o,c){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")c();else{var p=function(){c(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Bs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var gb=null;function RT(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function CT(o,c,f){switch(c=kd(f),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function of(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Ie(o)}var vs=new Map,kT=new Set;function Nd(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ji=Ae.d;Ae.d={f:hD,r:dD,D:pD,C:gD,L:mD,m:yD,X:xD,S:bD,M:vD};function hD(){var o=ji.f(),c=_d();return o||c}function dD(o){var c=ke(o);c!==null&&c.tag===5&&c.type==="form"?K1(c):ji.r(o)}var Yl=typeof document>"u"?null:document;function NT(o,c,f){var p=Yl;if(p&&typeof c=="string"&&c){var x=Yt(c);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),kT.has(x)||(kT.add(x),o={rel:o,crossOrigin:f,href:c},p.querySelector(x)===null&&(c=p.createElement("link"),fr(c,"link",o),se(c),p.head.appendChild(c)))}}function pD(o){ji.D(o),NT("dns-prefetch",o,null)}function gD(o,c){ji.C(o,c),NT("preconnect",o,c)}function mD(o,c,f){ji.L(o,c,f);var p=Yl;if(p&&o&&c){var x='link[rel="preload"][as="'+Yt(c)+'"]';c==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Yt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Yt(f.imageSizes)+'"]')):x+='[href="'+Yt(o)+'"]';var T=x;switch(c){case"style":T=Kl(o);break;case"script":T=Zl(o)}vs.has(T)||(o=d({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),vs.set(T,o),p.querySelector(x)!==null||c==="style"&&p.querySelector(af(T))||c==="script"&&p.querySelector(lf(T))||(c=p.createElement("link"),fr(c,"link",o),se(c),p.head.appendChild(c)))}}function yD(o,c){ji.m(o,c);var f=Yl;if(f&&o){var p=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Yt(p)+'"][href="'+Yt(o)+'"]',T=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Zl(o)}if(!vs.has(T)&&(o=d({rel:"modulepreload",href:o},c),vs.set(T,o),f.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(lf(T)))return}p=f.createElement("link"),fr(p,"link",o),se(p),f.head.appendChild(p)}}}function bD(o,c,f){ji.S(o,c,f);var p=Yl;if(p&&o){var x=Ge(p).hoistableStyles,T=Kl(o);c=c||"default";var j=x.get(T);if(!j){var V={loading:0,preload:null};if(j=p.querySelector(af(T)))V.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":c},f),(f=vs.get(T))&&mb(o,f);var ne=j=p.createElement("link");se(ne),fr(ne,"link",o),ne._p=new Promise(function(Ee,De){ne.onload=Ee,ne.onerror=De}),ne.addEventListener("load",function(){V.loading|=1}),ne.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Md(j,c,p)}j={type:"stylesheet",instance:j,count:1,state:V},x.set(T,j)}}}function xD(o,c){ji.X(o,c);var f=Yl;if(f&&o){var p=Ge(f).hoistableScripts,x=Zl(o),T=p.get(x);T||(T=f.querySelector(lf(x)),T||(o=d({src:o,async:!0},c),(c=vs.get(x))&&yb(o,c),T=f.createElement("script"),se(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(x,T))}}function vD(o,c){ji.M(o,c);var f=Yl;if(f&&o){var p=Ge(f).hoistableScripts,x=Zl(o),T=p.get(x);T||(T=f.querySelector(lf(x)),T||(o=d({src:o,async:!0,type:"module"},c),(c=vs.get(x))&&yb(o,c),T=f.createElement("script"),se(T),fr(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(x,T))}}function MT(o,c,f,p){var x=(x=we.current)?Nd(x):null;if(!x)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Kl(f.href),f=Ge(x).hoistableStyles,p=f.get(c),p||(p={type:"style",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Kl(f.href);var T=Ge(x).hoistableStyles,j=T.get(o);if(j||(x=x.ownerDocument||x,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,j),(T=x.querySelector(af(o)))&&!T._p&&(j.instance=T,j.state.loading=5),vs.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vs.set(o,f),T||_D(x,o,f,j.state))),c&&p===null)throw Error(r(528,""));return j}if(c&&p!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Zl(f),f=Ge(x).hoistableScripts,p=f.get(c),p||(p={type:"script",instance:null,count:0,state:null},f.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Kl(o){return'href="'+Yt(o)+'"'}function af(o){return'link[rel="stylesheet"]['+o+"]"}function IT(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function _D(o,c,f,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),fr(c,"link",f),se(c),o.head.appendChild(c))}function Zl(o){return'[src="'+Yt(o)+'"]'}function lf(o){return"script[async]"+o}function OT(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+Yt(f.href)+'"]');if(p)return c.instance=p,se(p),p;var x=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),se(p),fr(p,"style",x),Md(p,f.precedence,o),c.instance=p;case"stylesheet":x=Kl(f.href);var T=o.querySelector(af(x));if(T)return c.state.loading|=4,c.instance=T,se(T),T;p=IT(f),(x=vs.get(x))&&mb(p,x),T=(o.ownerDocument||o).createElement("link"),se(T);var j=T;return j._p=new Promise(function(V,ne){j.onload=V,j.onerror=ne}),fr(T,"link",p),c.state.loading|=4,Md(T,f.precedence,o),c.instance=T;case"script":return T=Zl(f.src),(x=o.querySelector(lf(T)))?(c.instance=x,se(x),x):(p=f,(x=vs.get(T))&&(p=d({},f),yb(p,x)),o=o.ownerDocument||o,x=o.createElement("script"),se(x),fr(x,"link",p),o.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,Md(p,f.precedence,o));return c.instance}function Md(o,c,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,T=x,j=0;j<p.length;j++){var V=p[j];if(V.dataset.precedence===c)T=V;else if(T!==x)break}T?T.parentNode.insertBefore(o,T.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function mb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function yb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Id=null;function PT(o,c,f){if(Id===null){var p=new Map,x=Id=new Map;x.set(f,p)}else x=Id,p=x.get(f),p||(p=new Map,x.set(f,p));if(p.has(o))return p;for(p.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var T=f[x];if(!(T[re]||T[_]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var j=T.getAttribute(c)||"";j=o+j;var V=p.get(j);V?V.push(T):p.set(j,[T])}}return p}function DT(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function wD(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function jT(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var cf=null;function SD(){}function TD(o,c,f){if(cf===null)throw Error(r(475));var p=cf;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Kl(f.href),T=o.querySelector(af(x));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=Od.bind(p),o.then(p,p)),c.state.loading|=4,c.instance=T,se(T);return}T=o.ownerDocument||o,f=IT(f),(x=vs.get(x))&&mb(f,x),T=T.createElement("link"),se(T);var j=T;j._p=new Promise(function(V,ne){j.onload=V,j.onerror=ne}),fr(T,"link",f),c.instance=T}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=Od.bind(p),o.addEventListener("load",c),o.addEventListener("error",c))}}function ED(){if(cf===null)throw Error(r(475));var o=cf;return o.stylesheets&&o.count===0&&bb(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&bb(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function Od(){if(this.count--,this.count===0){if(this.stylesheets)bb(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Pd=null;function bb(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Pd=new Map,c.forEach(AD,o),Pd=null,Od.call(o))}function AD(o,c){if(!(c.state.loading&4)){var f=Pd.get(o);if(f)var p=f.get(null);else{f=new Map,Pd.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<x.length;T++){var j=x[T];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(f.set(j.dataset.precedence,j),p=j)}p&&f.set(null,p)}x=c.instance,j=x.getAttribute("data-precedence"),T=f.get(j)||p,T===p&&f.set(null,x),f.set(j,x),this.count++,p=Od.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),T?T.parentNode.insertBefore(x,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),c.state.loading|=4}}var uf={$$typeof:k,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function RD(o,c,f,p,x,T,j,V){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.hiddenUpdates=xl(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=T,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function FT(o,c,f,p,x,T,j,V,ne,Ee,De,Fe){return o=new RD(o,c,f,j,V,ne,Ee,Fe),c=1,T===!0&&(c|=24),T=Gr(3,null,null,c),o.current=T,T.stateNode=o,c=Jm(),c.refCount++,o.pooledCache=c,c.refCount++,T.memoizedState={element:p,isDehydrated:f,cache:c},ry(T),o}function BT(o){return o?(o=Rl,o):Rl}function LT(o,c,f,p,x,T){x=BT(x),p.context===null?p.context=x:p.pendingContext=x,p=ro(c),p.payload={element:f},T=T===void 0?null:T,T!==null&&(p.callback=T),f=so(o,p,c),f!==null&&(rs(f,o,c),Lu(f,o,c))}function UT(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function xb(o,c){UT(o,c),(o=o.alternate)&&UT(o,c)}function zT(o){if(o.tag===13){var c=Al(o,67108864);c!==null&&rs(c,o,67108864),xb(o,67108864)}}var Dd=!0;function CD(o,c,f,p){var x=ie.T;ie.T=null;var T=Ae.p;try{Ae.p=2,vb(o,c,f,p)}finally{Ae.p=T,ie.T=x}}function kD(o,c,f,p){var x=ie.T;ie.T=null;var T=Ae.p;try{Ae.p=8,vb(o,c,f,p)}finally{Ae.p=T,ie.T=x}}function vb(o,c,f,p){if(Dd){var x=_b(p);if(x===null)ab(o,c,p,jd,f),$T(o,p);else if(MD(x,o,c,f,p))p.stopPropagation();else if($T(o,p),c&4&&-1<ND.indexOf(o)){for(;x!==null;){var T=ke(x);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var j=Cr(T.pendingLanes);if(j!==0){var V=T;for(V.pendingLanes|=2,V.entangledLanes|=2;j;){var ne=1<<31-pt(j);V.entanglements[1]|=ne,j&=~ne}ii(T),(on&6)===0&&(xd=Ot()+500,nf(0))}}break;case 13:V=Al(T,2),V!==null&&rs(V,T,2),_d(),xb(T,2)}if(T=_b(p),T===null&&ab(o,c,p,jd,f),T===x)break;x=T}x!==null&&p.stopPropagation()}else ab(o,c,p,null,f)}}function _b(o){return o=Am(o),wb(o)}var jd=null;function wb(o){if(jd=null,o=We(o),o!==null){var c=i(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=a(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return jd=o,null}function VT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ht()){case en:return 2;case Is:return 8;case Kn:case mr:return 32;case Js:return 268435456;default:return 32}default:return 32}}var Sb=!1,bo=null,xo=null,vo=null,ff=new Map,hf=new Map,_o=[],ND="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $T(o,c){switch(o){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":ff.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":hf.delete(c.pointerId)}}function df(o,c,f,p,x,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:f,eventSystemFlags:p,nativeEvent:T,targetContainers:[x]},c!==null&&(c=ke(c),c!==null&&zT(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),o)}function MD(o,c,f,p,x){switch(c){case"focusin":return bo=df(bo,o,c,f,p,x),!0;case"dragenter":return xo=df(xo,o,c,f,p,x),!0;case"mouseover":return vo=df(vo,o,c,f,p,x),!0;case"pointerover":var T=x.pointerId;return ff.set(T,df(ff.get(T)||null,o,c,f,p,x)),!0;case"gotpointercapture":return T=x.pointerId,hf.set(T,df(hf.get(T)||null,o,c,f,p,x)),!0}return!1}function HT(o){var c=We(o.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=a(f),c!==null){o.blockedOn=c,v(o.priority,function(){if(f.tag===13){var p=ns();p=Qi(p);var x=Al(f,p);x!==null&&rs(x,f,p),xb(f,p)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Fd(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=_b(o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);Em=p,f.target.dispatchEvent(p),Em=null}else return c=ke(f),c!==null&&zT(c),o.blockedOn=f,!1;c.shift()}return!0}function WT(o,c,f){Fd(o)&&f.delete(c)}function ID(){Sb=!1,bo!==null&&Fd(bo)&&(bo=null),xo!==null&&Fd(xo)&&(xo=null),vo!==null&&Fd(vo)&&(vo=null),ff.forEach(WT),hf.forEach(WT)}function Bd(o,c){o.blockedOn===c&&(o.blockedOn=null,Sb||(Sb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ID)))}var Ld=null;function qT(o){Ld!==o&&(Ld=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ld===o&&(Ld=null);for(var c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],x=o[c+2];if(typeof p!="function"){if(wb(p||f)===null)continue;break}var T=ke(f);T!==null&&(o.splice(c,3),c-=3,wy(T,{pending:!0,data:x,method:f.method,action:p},p,x))}}))}function pf(o){function c(ne){return Bd(ne,o)}bo!==null&&Bd(bo,o),xo!==null&&Bd(xo,o),vo!==null&&Bd(vo,o),ff.forEach(c),hf.forEach(c);for(var f=0;f<_o.length;f++){var p=_o[f];p.blockedOn===o&&(p.blockedOn=null)}for(;0<_o.length&&(f=_o[0],f.blockedOn===null);)HT(f),f.blockedOn===null&&_o.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var x=f[p],T=f[p+1],j=x[E]||null;if(typeof T=="function")j||qT(f);else if(j){var V=null;if(T&&T.hasAttribute("formAction")){if(x=T,j=T[E]||null)V=j.formAction;else if(wb(x)!==null)continue}else V=j.action;typeof V=="function"?f[p+1]=V:(f.splice(p,3),p-=3),qT(f)}}}function Tb(o){this._internalRoot=o}Ud.prototype.render=Tb.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,p=ns();LT(f,p,o,c,null,null)},Ud.prototype.unmount=Tb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;LT(o.current,2,null,o,null,null),_d(),c[U]=null}};function Ud(o){this._internalRoot=o}Ud.prototype.unstable_scheduleHydration=function(o){if(o){var c=S();o={blockedOn:null,target:o,priority:c};for(var f=0;f<_o.length&&c!==0&&c<_o[f].priority;f++);_o.splice(f,0,o),f===0&&HT(o)}};var XT=e.version;if(XT!=="19.1.0")throw Error(r(527,XT,"19.1.0"));Ae.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var OD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{Oe=zd.inject(OD),He=zd}catch{}}return mf.createRoot=function(o,c){if(!s(o))throw Error(r(299));var f=!1,p="",x=cS,T=uS,j=fS,V=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(V=c.unstable_transitionCallbacks)),c=FT(o,1,!1,null,null,f,p,x,T,j,V,null),o[U]=c.current,ob(o),new Tb(c)},mf.hydrateRoot=function(o,c,f){if(!s(o))throw Error(r(299));var p=!1,x="",T=cS,j=uS,V=fS,ne=null,Ee=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(j=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ne=f.unstable_transitionCallbacks),f.formState!==void 0&&(Ee=f.formState)),c=FT(o,1,!0,c,f??null,p,x,T,j,V,ne,Ee),c.context=BT(null),f=c.current,p=ns(),p=Qi(p),x=ro(p),x.callback=null,so(f,x,p),f=p,c.current.lanes=f,Ps(c,f),ii(c),o[U]=c.current,ob(o),new Ud(c)},mf.version="19.1.0",mf}var i2;function WD(){if(i2)return Cb.exports;i2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cb.exports=HD(),Cb.exports}var qD=WD(),au=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ja=typeof window>"u"||"Deno"in globalThis;function Pr(){}function XD(t,e){return typeof t=="function"?t(e):t}function Jx(t){return typeof t=="number"&&t>=0&&t!==1/0}function TR(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qo(t,e){return typeof t=="function"?t(e):t}function Ws(t,e){return typeof t=="function"?t(e):t}function o2(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==z_(a,e.options))return!1}else if(!Zf(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function a2(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(el(e.options.mutationKey)!==el(i))return!1}else if(!Zf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function z_(t,e){return((e==null?void 0:e.queryKeyHashFn)||el)(t)}function el(t){return JSON.stringify(t,(e,n)=>ev(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Zf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Zf(t[n],e[n])):!1}function ER(t,e){if(t===e)return t;const n=l2(t)&&l2(e);if(n||ev(t)&&ev(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{},u=new Set(r);let h=0;for(let d=0;d<a;d++){const g=n?d:i[d];(!n&&u.has(g)||n)&&t[g]===void 0&&e[g]===void 0?(l[g]=void 0,h++):(l[g]=ER(t[g],e[g]),l[g]===t[g]&&t[g]!==void 0&&h++)}return s===a&&h===s?t:l}return e}function Fp(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function l2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ev(t){if(!c2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!c2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function c2(t){return Object.prototype.toString.call(t)==="[object Object]"}function YD(t){return new Promise(e=>{setTimeout(e,t)})}function tv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ER(t,e):e}function KD(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function ZD(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var V_=Symbol();function AR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===V_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function RR(t,e){return typeof t=="function"?t(...e):!!t}var Ua,Fo,Oc,fR,QD=(fR=class extends au{constructor(){super();ut(this,Ua);ut(this,Fo);ut(this,Oc);tt(this,Oc,e=>{if(!Ja&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){le(this,Fo)||this.setEventListener(le(this,Oc))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,Fo))==null||e.call(this),tt(this,Fo,void 0))}setEventListener(e){var n;tt(this,Oc,e),(n=le(this,Fo))==null||n.call(this),tt(this,Fo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){le(this,Ua)!==e&&(tt(this,Ua,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof le(this,Ua)=="boolean"?le(this,Ua):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ua=new WeakMap,Fo=new WeakMap,Oc=new WeakMap,fR),$_=new QD,Pc,Bo,Dc,hR,GD=(hR=class extends au{constructor(){super();ut(this,Pc,!0);ut(this,Bo);ut(this,Dc);tt(this,Dc,e=>{if(!Ja&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){le(this,Bo)||this.setEventListener(le(this,Dc))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,Bo))==null||e.call(this),tt(this,Bo,void 0))}setEventListener(e){var n;tt(this,Dc,e),(n=le(this,Bo))==null||n.call(this),tt(this,Bo,e(this.setOnline.bind(this)))}setOnline(e){le(this,Pc)!==e&&(tt(this,Pc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return le(this,Pc)}},Pc=new WeakMap,Bo=new WeakMap,Dc=new WeakMap,hR),Bp=new GD;function nv(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function JD(t){return Math.min(1e3*2**t,3e4)}function CR(t){return(t??"online")==="online"?Bp.isOnline():!0}var kR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ib(t){return t instanceof kR}function NR(t){let e=!1,n=0,r=!1,s;const i=nv(),a=A=>{var C;r||(b(new kR(A)),(C=t.abort)==null||C.call(t))},l=()=>{e=!0},u=()=>{e=!1},h=()=>$_.isFocused()&&(t.networkMode==="always"||Bp.isOnline())&&t.canRun(),d=()=>CR(t.networkMode)&&t.canRun(),g=A=>{var C;r||(r=!0,(C=t.onSuccess)==null||C.call(t,A),s==null||s(),i.resolve(A))},b=A=>{var C;r||(r=!0,(C=t.onError)==null||C.call(t,A),s==null||s(),i.reject(A))},w=()=>new Promise(A=>{var C;s=I=>{(r||h())&&A(I)},(C=t.onPause)==null||C.call(t)}).then(()=>{var A;s=void 0,r||(A=t.onContinue)==null||A.call(t)}),R=()=>{if(r)return;let A;const C=n===0?t.initialPromise:void 0;try{A=C??t.fn()}catch(I){A=Promise.reject(I)}Promise.resolve(A).then(g).catch(I=>{var O;if(r)return;const M=t.retry??(Ja?0:3),k=t.retryDelay??JD,P=typeof k=="function"?k(n,I):k,L=M===!0||typeof M=="number"&&n<M||typeof M=="function"&&M(n,I);if(e||!L){b(I);return}n++,(O=t.onFail)==null||O.call(t,n,I),YD(P).then(()=>h()?void 0:w()).then(()=>{e?b(I):R()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:u,canStart:d,start:()=>(d()?R():w().then(R),i)}}var ej=t=>setTimeout(t,0);function tj(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=ej;const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var rr=tj(),za,dR,MR=(dR=class{constructor(){ut(this,za)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jx(this.gcTime)&&tt(this,za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ja?1/0:5*60*1e3))}clearGcTimeout(){le(this,za)&&(clearTimeout(le(this,za)),tt(this,za,void 0))}},za=new WeakMap,dR),jc,Fc,_s,Va,wr,uh,$a,$s,Bi,pR,nj=(pR=class extends MR{constructor(e){super();ut(this,$s);ut(this,jc);ut(this,Fc);ut(this,_s);ut(this,Va);ut(this,wr);ut(this,uh);ut(this,$a);tt(this,$a,!1),tt(this,uh,e.defaultOptions),this.setOptions(e.options),this.observers=[],tt(this,Va,e.client),tt(this,_s,le(this,Va).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,tt(this,jc,rj(this.options)),this.state=e.state??le(this,jc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=le(this,wr))==null?void 0:e.promise}setOptions(e){this.options={...le(this,uh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&le(this,_s).remove(this)}setData(e,n){const r=tv(this.state.data,e,this.options);return Tt(this,$s,Bi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Tt(this,$s,Bi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=le(this,wr))==null?void 0:r.promise;return(s=le(this,wr))==null||s.cancel(e),n?n.then(Pr).catch(Pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(le(this,jc))}isActive(){return this.observers.some(e=>Ws(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===V_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Qo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!TR(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=le(this,wr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=le(this,wr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),le(this,_s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(le(this,wr)&&(le(this,$a)?le(this,wr).cancel({revert:!0}):le(this,wr).cancelRetry()),this.scheduleGc()),le(this,_s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Tt(this,$s,Bi).call(this,{type:"invalidate"})}fetch(e,n){var h,d,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(le(this,wr))return le(this,wr).continueRetry(),le(this,wr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(w=>w.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(tt(this,$a,!0),r.signal)})},i=()=>{const b=AR(this.options,n),R=(()=>{const A={client:le(this,Va),queryKey:this.queryKey,meta:this.meta};return s(A),A})();return tt(this,$a,!1),this.options.persister?this.options.persister(b,R,this):b(R)},l=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:le(this,Va),state:this.state,fetchFn:i};return s(b),b})();(h=this.options.behavior)==null||h.onFetch(l,this),tt(this,Fc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Tt(this,$s,Bi).call(this,{type:"fetch",meta:(g=l.fetchOptions)==null?void 0:g.meta});const u=b=>{var w,R,A,C;Ib(b)&&b.silent||Tt(this,$s,Bi).call(this,{type:"error",error:b}),Ib(b)||((R=(w=le(this,_s).config).onError)==null||R.call(w,b,this),(C=(A=le(this,_s).config).onSettled)==null||C.call(A,this.state.data,b,this)),this.scheduleGc()};return tt(this,wr,NR({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:b=>{var w,R,A,C;if(b===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){u(I);return}(R=(w=le(this,_s).config).onSuccess)==null||R.call(w,b,this),(C=(A=le(this,_s).config).onSettled)==null||C.call(A,b,this.state.error,this),this.scheduleGc()},onError:u,onFail:(b,w)=>{Tt(this,$s,Bi).call(this,{type:"failed",failureCount:b,error:w})},onPause:()=>{Tt(this,$s,Bi).call(this,{type:"pause"})},onContinue:()=>{Tt(this,$s,Bi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),le(this,wr).start()}},jc=new WeakMap,Fc=new WeakMap,_s=new WeakMap,Va=new WeakMap,wr=new WeakMap,uh=new WeakMap,$a=new WeakMap,$s=new WeakSet,Bi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...IR(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Ib(s)&&s.revert&&le(this,Fc)?{...le(this,Fc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),le(this,_s).notify({query:this,type:"updated",action:e})})},pR);function IR(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:CR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function rj(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ui,gR,sj=(gR=class extends au{constructor(e={}){super();ut(this,ui);this.config=e,tt(this,ui,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??z_(s,n);let a=this.get(i);return a||(a=new nj({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){le(this,ui).has(e.queryHash)||(le(this,ui).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=le(this,ui).get(e.queryHash);n&&(e.destroy(),n===e&&le(this,ui).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return le(this,ui).get(e)}getAll(){return[...le(this,ui).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>o2(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>o2(e,r)):n}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ui=new WeakMap,gR),fi,Ir,Ha,hi,No,mR,ij=(mR=class extends MR{constructor(e){super();ut(this,hi);ut(this,fi);ut(this,Ir);ut(this,Ha);this.mutationId=e.mutationId,tt(this,Ir,e.mutationCache),tt(this,fi,[]),this.state=e.state||OR(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){le(this,fi).includes(e)||(le(this,fi).push(e),this.clearGcTimeout(),le(this,Ir).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){tt(this,fi,le(this,fi).filter(n=>n!==e)),this.scheduleGc(),le(this,Ir).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){le(this,fi).length||(this.state.status==="pending"?this.scheduleGc():le(this,Ir).remove(this))}continue(){var e;return((e=le(this,Ha))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,u,h,d,g,b,w,R,A,C,I,M,k,P,L,O,H,Y;const n=()=>{Tt(this,hi,No).call(this,{type:"continue"})};tt(this,Ha,NR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(J,K)=>{Tt(this,hi,No).call(this,{type:"failed",failureCount:J,error:K})},onPause:()=>{Tt(this,hi,No).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>le(this,Ir).canRun(this)}));const r=this.state.status==="pending",s=!le(this,Ha).canStart();try{if(r)n();else{Tt(this,hi,No).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=le(this,Ir).config).onMutate)==null?void 0:a.call(i,e,this));const K=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e));K!==this.state.context&&Tt(this,hi,No).call(this,{type:"pending",context:K,variables:e,isPaused:s})}const J=await le(this,Ha).start();return await((d=(h=le(this,Ir).config).onSuccess)==null?void 0:d.call(h,J,e,this.state.context,this)),await((b=(g=this.options).onSuccess)==null?void 0:b.call(g,J,e,this.state.context)),await((R=(w=le(this,Ir).config).onSettled)==null?void 0:R.call(w,J,null,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,J,null,e,this.state.context)),Tt(this,hi,No).call(this,{type:"success",data:J}),J}catch(J){try{throw await((M=(I=le(this,Ir).config).onError)==null?void 0:M.call(I,J,e,this.state.context,this)),await((P=(k=this.options).onError)==null?void 0:P.call(k,J,e,this.state.context)),await((O=(L=le(this,Ir).config).onSettled)==null?void 0:O.call(L,void 0,J,this.state.variables,this.state.context,this)),await((Y=(H=this.options).onSettled)==null?void 0:Y.call(H,void 0,J,e,this.state.context)),J}finally{Tt(this,hi,No).call(this,{type:"error",error:J})}}finally{le(this,Ir).runNext(this)}}},fi=new WeakMap,Ir=new WeakMap,Ha=new WeakMap,hi=new WeakSet,No=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rr.batch(()=>{le(this,fi).forEach(r=>{r.onMutationUpdate(e)}),le(this,Ir).notify({mutation:this,type:"updated",action:e})})},mR);function OR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zi,Hs,fh,yR,oj=(yR=class extends au{constructor(e={}){super();ut(this,zi);ut(this,Hs);ut(this,fh);this.config=e,tt(this,zi,new Set),tt(this,Hs,new Map),tt(this,fh,0)}build(e,n,r){const s=new ij({mutationCache:this,mutationId:++Vd(this,fh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){le(this,zi).add(e);const n=$d(e);if(typeof n=="string"){const r=le(this,Hs).get(n);r?r.push(e):le(this,Hs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(le(this,zi).delete(e)){const n=$d(e);if(typeof n=="string"){const r=le(this,Hs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&le(this,Hs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=$d(e);if(typeof n=="string"){const r=le(this,Hs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=$d(e);if(typeof n=="string"){const s=(r=le(this,Hs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rr.batch(()=>{le(this,zi).forEach(e=>{this.notify({type:"removed",mutation:e})}),le(this,zi).clear(),le(this,Hs).clear()})}getAll(){return Array.from(le(this,zi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>a2(n,r))}findAll(e={}){return this.getAll().filter(n=>a2(e,n))}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Pr))))}},zi=new WeakMap,Hs=new WeakMap,fh=new WeakMap,yR);function $d(t){var e;return(e=t.options.scope)==null?void 0:e.id}function u2(t){return{onFetch:(e,n)=>{var d,g,b,w,R;const r=e.options,s=(b=(g=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:g.fetchMore)==null?void 0:b.direction,i=((w=e.state.data)==null?void 0:w.pages)||[],a=((R=e.state.data)==null?void 0:R.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let A=!1;const C=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?A=!0:e.signal.addEventListener("abort",()=>{A=!0}),e.signal)})},I=AR(e.options,e.fetchOptions),M=async(k,P,L)=>{if(A)return Promise.reject();if(P==null&&k.pages.length)return Promise.resolve(k);const H=(()=>{const Z={client:e.client,queryKey:e.queryKey,pageParam:P,direction:L?"backward":"forward",meta:e.options.meta};return C(Z),Z})(),Y=await I(H),{maxPages:J}=e.options,K=L?ZD:KD;return{pages:K(k.pages,Y,J),pageParams:K(k.pageParams,P,J)}};if(s&&i.length){const k=s==="backward",P=k?aj:f2,L={pages:i,pageParams:a},O=P(r,L);l=await M(L,O,k)}else{const k=t??i.length;do{const P=u===0?a[0]??r.initialPageParam:f2(r,l);if(u>0&&P==null)break;l=await M(l,P),u++}while(u<k)}return l};e.options.persister?e.fetchFn=()=>{var A,C;return(C=(A=e.options).persister)==null?void 0:C.call(A,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function f2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function aj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var jn,Lo,Uo,Bc,Lc,zo,Uc,zc,bR,PR=(bR=class{constructor(t={}){ut(this,jn);ut(this,Lo);ut(this,Uo);ut(this,Bc);ut(this,Lc);ut(this,zo);ut(this,Uc);ut(this,zc);tt(this,jn,t.queryCache||new sj),tt(this,Lo,t.mutationCache||new oj),tt(this,Uo,t.defaultOptions||{}),tt(this,Bc,new Map),tt(this,Lc,new Map),tt(this,zo,0)}mount(){Vd(this,zo)._++,le(this,zo)===1&&(tt(this,Uc,$_.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,jn).onFocus())})),tt(this,zc,Bp.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,jn).onOnline())})))}unmount(){var t,e;Vd(this,zo)._--,le(this,zo)===0&&((t=le(this,Uc))==null||t.call(this),tt(this,Uc,void 0),(e=le(this,zc))==null||e.call(this),tt(this,zc,void 0))}isFetching(t){return le(this,jn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return le(this,Lo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=le(this,jn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=le(this,jn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return le(this,jn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=le(this,jn).get(r.queryHash),i=s==null?void 0:s.state.data,a=XD(e,i);if(a!==void 0)return le(this,jn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return rr.batch(()=>le(this,jn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=le(this,jn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=le(this,jn);rr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=le(this,jn);return rr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rr.batch(()=>le(this,jn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Pr).catch(Pr)}invalidateQueries(t,e={}){return rr.batch(()=>(le(this,jn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rr.batch(()=>le(this,jn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=le(this,jn).build(this,e);return n.isStaleByTime(Qo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pr).catch(Pr)}fetchInfiniteQuery(t){return t.behavior=u2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pr).catch(Pr)}ensureInfiniteQueryData(t){return t.behavior=u2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bp.isOnline()?le(this,Lo).resumePausedMutations():Promise.resolve()}getQueryCache(){return le(this,jn)}getMutationCache(){return le(this,Lo)}getDefaultOptions(){return le(this,Uo)}setDefaultOptions(t){tt(this,Uo,t)}setQueryDefaults(t,e){le(this,Bc).set(el(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...le(this,Bc).values()],n={};return e.forEach(r=>{Zf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){le(this,Lc).set(el(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...le(this,Lc).values()],n={};return e.forEach(r=>{Zf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...le(this,Uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=z_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===V_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...le(this,Uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){le(this,jn).clear(),le(this,Lo).clear()}},jn=new WeakMap,Lo=new WeakMap,Uo=new WeakMap,Bc=new WeakMap,Lc=new WeakMap,zo=new WeakMap,Uc=new WeakMap,zc=new WeakMap,bR),Wr,zt,hh,Or,Wa,Vc,Vo,$o,dh,$c,Hc,qa,Xa,Ho,Wc,nn,Rf,rv,sv,iv,ov,av,lv,cv,DR,xR,lj=(xR=class extends au{constructor(e,n){super();ut(this,nn);ut(this,Wr);ut(this,zt);ut(this,hh);ut(this,Or);ut(this,Wa);ut(this,Vc);ut(this,Vo);ut(this,$o);ut(this,dh);ut(this,$c);ut(this,Hc);ut(this,qa);ut(this,Xa);ut(this,Ho);ut(this,Wc,new Set);this.options=n,tt(this,Wr,e),tt(this,$o,null),tt(this,Vo,nv()),this.options.experimental_prefetchInRender||le(this,Vo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(le(this,zt).addObserver(this),h2(le(this,zt),this.options)?Tt(this,nn,Rf).call(this):this.updateResult(),Tt(this,nn,ov).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uv(le(this,zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uv(le(this,zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Tt(this,nn,av).call(this),Tt(this,nn,lv).call(this),le(this,zt).removeObserver(this)}setOptions(e){const n=this.options,r=le(this,zt);if(this.options=le(this,Wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ws(this.options.enabled,le(this,zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Tt(this,nn,cv).call(this),le(this,zt).setOptions(this.options),n._defaulted&&!Fp(this.options,n)&&le(this,Wr).getQueryCache().notify({type:"observerOptionsUpdated",query:le(this,zt),observer:this});const s=this.hasListeners();s&&d2(le(this,zt),r,this.options,n)&&Tt(this,nn,Rf).call(this),this.updateResult(),s&&(le(this,zt)!==r||Ws(this.options.enabled,le(this,zt))!==Ws(n.enabled,le(this,zt))||Qo(this.options.staleTime,le(this,zt))!==Qo(n.staleTime,le(this,zt)))&&Tt(this,nn,rv).call(this);const i=Tt(this,nn,sv).call(this);s&&(le(this,zt)!==r||Ws(this.options.enabled,le(this,zt))!==Ws(n.enabled,le(this,zt))||i!==le(this,Ho))&&Tt(this,nn,iv).call(this,i)}getOptimisticResult(e){const n=le(this,Wr).getQueryCache().build(le(this,Wr),e),r=this.createResult(n,e);return uj(this,r)&&(tt(this,Or,r),tt(this,Vc,this.options),tt(this,Wa,le(this,zt).state)),r}getCurrentResult(){return le(this,Or)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){le(this,Wc).add(e)}getCurrentQuery(){return le(this,zt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=le(this,Wr).defaultQueryOptions(e),r=le(this,Wr).getQueryCache().build(le(this,Wr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Tt(this,nn,Rf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),le(this,Or)))}createResult(e,n){var J;const r=le(this,zt),s=this.options,i=le(this,Or),a=le(this,Wa),l=le(this,Vc),h=e!==r?e.state:le(this,hh),{state:d}=e;let g={...d},b=!1,w;if(n._optimisticResults){const K=this.hasListeners(),Z=!K&&h2(e,n),ae=K&&d2(e,r,n,s);(Z||ae)&&(g={...g,...IR(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:R,errorUpdatedAt:A,status:C}=g;w=g.data;let I=!1;if(n.placeholderData!==void 0&&w===void 0&&C==="pending"){let K;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(K=i.data,I=!0):K=typeof n.placeholderData=="function"?n.placeholderData((J=le(this,Hc))==null?void 0:J.state.data,le(this,Hc)):n.placeholderData,K!==void 0&&(C="success",w=tv(i==null?void 0:i.data,K,n),b=!0)}if(n.select&&w!==void 0&&!I)if(i&&w===(a==null?void 0:a.data)&&n.select===le(this,dh))w=le(this,$c);else try{tt(this,dh,n.select),w=n.select(w),w=tv(i==null?void 0:i.data,w,n),tt(this,$c,w),tt(this,$o,null)}catch(K){tt(this,$o,K)}le(this,$o)&&(R=le(this,$o),w=le(this,$c),A=Date.now(),C="error");const M=g.fetchStatus==="fetching",k=C==="pending",P=C==="error",L=k&&M,O=w!==void 0,Y={status:C,fetchStatus:g.fetchStatus,isPending:k,isSuccess:C==="success",isError:P,isInitialLoading:L,isLoading:L,data:w,dataUpdatedAt:g.dataUpdatedAt,error:R,errorUpdatedAt:A,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:M,isRefetching:M&&!k,isLoadingError:P&&!O,isPaused:g.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:P&&O,isStale:H_(e,n),refetch:this.refetch,promise:le(this,Vo)};if(this.options.experimental_prefetchInRender){const K=_e=>{Y.status==="error"?_e.reject(Y.error):Y.data!==void 0&&_e.resolve(Y.data)},Z=()=>{const _e=tt(this,Vo,Y.promise=nv());K(_e)},ae=le(this,Vo);switch(ae.status){case"pending":e.queryHash===r.queryHash&&K(ae);break;case"fulfilled":(Y.status==="error"||Y.data!==ae.value)&&Z();break;case"rejected":(Y.status!=="error"||Y.error!==ae.reason)&&Z();break}}return Y}updateResult(){const e=le(this,Or),n=this.createResult(le(this,zt),this.options);if(tt(this,Wa,le(this,zt).state),tt(this,Vc,this.options),le(this,Wa).data!==void 0&&tt(this,Hc,le(this,zt)),Fp(n,e))return;tt(this,Or,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!le(this,Wc).size)return!0;const a=new Set(i??le(this,Wc));return this.options.throwOnError&&a.add("error"),Object.keys(le(this,Or)).some(l=>{const u=l;return le(this,Or)[u]!==e[u]&&a.has(u)})};Tt(this,nn,DR).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Tt(this,nn,ov).call(this)}},Wr=new WeakMap,zt=new WeakMap,hh=new WeakMap,Or=new WeakMap,Wa=new WeakMap,Vc=new WeakMap,Vo=new WeakMap,$o=new WeakMap,dh=new WeakMap,$c=new WeakMap,Hc=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ho=new WeakMap,Wc=new WeakMap,nn=new WeakSet,Rf=function(e){Tt(this,nn,cv).call(this);let n=le(this,zt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Pr)),n},rv=function(){Tt(this,nn,av).call(this);const e=Qo(this.options.staleTime,le(this,zt));if(Ja||le(this,Or).isStale||!Jx(e))return;const r=TR(le(this,Or).dataUpdatedAt,e)+1;tt(this,qa,setTimeout(()=>{le(this,Or).isStale||this.updateResult()},r))},sv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(le(this,zt)):this.options.refetchInterval)??!1},iv=function(e){Tt(this,nn,lv).call(this),tt(this,Ho,e),!(Ja||Ws(this.options.enabled,le(this,zt))===!1||!Jx(le(this,Ho))||le(this,Ho)===0)&&tt(this,Xa,setInterval(()=>{(this.options.refetchIntervalInBackground||$_.isFocused())&&Tt(this,nn,Rf).call(this)},le(this,Ho)))},ov=function(){Tt(this,nn,rv).call(this),Tt(this,nn,iv).call(this,Tt(this,nn,sv).call(this))},av=function(){le(this,qa)&&(clearTimeout(le(this,qa)),tt(this,qa,void 0))},lv=function(){le(this,Xa)&&(clearInterval(le(this,Xa)),tt(this,Xa,void 0))},cv=function(){const e=le(this,Wr).getQueryCache().build(le(this,Wr),this.options);if(e===le(this,zt))return;const n=le(this,zt);tt(this,zt,e),tt(this,hh,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},DR=function(e){rr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(le(this,Or))}),le(this,Wr).getQueryCache().notify({query:le(this,zt),type:"observerResultsUpdated"})})},xR);function cj(t,e){return Ws(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function h2(t,e){return cj(t,e)||t.state.data!==void 0&&uv(t,e,e.refetchOnMount)}function uv(t,e,n){if(Ws(e.enabled,t)!==!1&&Qo(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&H_(t,e)}return!1}function d2(t,e,n,r){return(t!==e||Ws(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&H_(t,n)}function H_(t,e){return Ws(e.enabled,t)!==!1&&t.isStaleByTime(Qo(e.staleTime,t))}function uj(t,e){return!Fp(t.getCurrentResult(),e)}var Wo,qo,qr,Vi,Wi,wp,fv,vR,fj=(vR=class extends au{constructor(n,r){super();ut(this,Wi);ut(this,Wo);ut(this,qo);ut(this,qr);ut(this,Vi);tt(this,Wo,n),this.setOptions(r),this.bindMethods(),Tt(this,Wi,wp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=le(this,Wo).defaultMutationOptions(n),Fp(this.options,r)||le(this,Wo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:le(this,qr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&el(r.mutationKey)!==el(this.options.mutationKey)?this.reset():((s=le(this,qr))==null?void 0:s.state.status)==="pending"&&le(this,qr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=le(this,qr))==null||n.removeObserver(this)}onMutationUpdate(n){Tt(this,Wi,wp).call(this),Tt(this,Wi,fv).call(this,n)}getCurrentResult(){return le(this,qo)}reset(){var n;(n=le(this,qr))==null||n.removeObserver(this),tt(this,qr,void 0),Tt(this,Wi,wp).call(this),Tt(this,Wi,fv).call(this)}mutate(n,r){var s;return tt(this,Vi,r),(s=le(this,qr))==null||s.removeObserver(this),tt(this,qr,le(this,Wo).getMutationCache().build(le(this,Wo),this.options)),le(this,qr).addObserver(this),le(this,qr).execute(n)}},Wo=new WeakMap,qo=new WeakMap,qr=new WeakMap,Vi=new WeakMap,Wi=new WeakSet,wp=function(){var r;const n=((r=le(this,qr))==null?void 0:r.state)??OR();tt(this,qo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},fv=function(n){rr.batch(()=>{var r,s,i,a,l,u,h,d;if(le(this,Vi)&&this.hasListeners()){const g=le(this,qo).variables,b=le(this,qo).context;(n==null?void 0:n.type)==="success"?((s=(r=le(this,Vi)).onSuccess)==null||s.call(r,n.data,g,b),(a=(i=le(this,Vi)).onSettled)==null||a.call(i,n.data,null,g,b)):(n==null?void 0:n.type)==="error"&&((u=(l=le(this,Vi)).onError)==null||u.call(l,n.error,g,b),(d=(h=le(this,Vi)).onSettled)==null||d.call(h,void 0,n.error,g,b))}this.listeners.forEach(g=>{g(le(this,qo))})})},vR),jR=N.createContext(void 0),lu=t=>{const e=N.useContext(jR);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},FR=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(jR.Provider,{value:t,children:e})),BR=N.createContext(!1),hj=()=>N.useContext(BR);BR.Provider;function dj(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pj=N.createContext(dj()),gj=()=>N.useContext(pj),mj=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yj=t=>{N.useEffect(()=>{t.clearReset()},[t])},bj=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||RR(n,[t.error,r])),xj=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},vj=(t,e)=>t.isLoading&&t.isFetching&&!e,_j=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,p2=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function wj(t,e,n){var g,b,w,R,A;const r=hj(),s=gj(),i=lu(),a=i.defaultQueryOptions(t);(b=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||b.call(g,a),a._optimisticResults=r?"isRestoring":"optimistic",xj(a),mj(a,s),yj(s);const l=!i.getQueryCache().get(a.queryHash),[u]=N.useState(()=>new e(i,a)),h=u.getOptimisticResult(a),d=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(C=>{const I=d?u.subscribe(rr.batchCalls(C)):Pr;return u.updateResult(),I},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),N.useEffect(()=>{u.setOptions(a)},[a,u]),_j(a,h))throw p2(a,u,s);if(bj({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((R=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||R.call(w,a,h),a.experimental_prefetchInRender&&!Ja&&vj(h,r)){const C=l?p2(a,u,s):(A=i.getQueryCache().get(a.queryHash))==null?void 0:A.promise;C==null||C.catch(Pr).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?h:u.trackResult(h)}function Cs(t,e){return wj(t,lj)}function Lp(t,e){const n=lu(),[r]=N.useState(()=>new fj(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const s=N.useSyncExternalStore(N.useCallback(a=>r.subscribe(rr.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=N.useCallback((a,l)=>{r.mutate(a,l).catch(Pr)},[r]);if(s.error&&RR(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var cu=SR();const Sj=ou(cu);function vt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function g2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tl(...t){return e=>{let n=!1;const r=t.map(s=>{const i=g2(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():g2(t[s],null)}}}}function Tn(...t){return N.useCallback(tl(...t),t)}function Tj(t,e){const n=N.createContext(e),r=i=>{const{children:a,...l}=i,u=N.useMemo(()=>l,Object.values(l));return m.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function s(i){const a=N.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Ki(t,e=[]){let n=[];function r(i,a){const l=N.createContext(a),u=n.length;n=[...n,a];const h=g=>{var I;const{scope:b,children:w,...R}=g,A=((I=b==null?void 0:b[t])==null?void 0:I[u])||l,C=N.useMemo(()=>R,Object.values(R));return m.jsx(A.Provider,{value:C,children:w})};h.displayName=i+"Provider";function d(g,b){var A;const w=((A=b==null?void 0:b[t])==null?void 0:A[u])||l,R=N.useContext(w);if(R)return R;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,d]}const s=()=>{const i=n.map(a=>N.createContext(a));return function(l){const u=(l==null?void 0:l[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,Ej(s,...e)]}function Ej(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:u,scopeName:h})=>{const g=u(i)[`__scope${h}`];return{...l,...g}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function nl(t){const e=Aj(t),n=N.forwardRef((r,s)=>{const{children:i,...a}=r,l=N.Children.toArray(i),u=l.find(Cj);if(u){const h=u.props.children,d=l.map(g=>g===u?N.Children.count(h)>1?N.Children.only(null):N.isValidElement(h)?h.props.children:null:g);return m.jsx(e,{...a,ref:s,children:N.isValidElement(h)?N.cloneElement(h,void 0,d):null})}return m.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var LR=nl("Slot");function Aj(t){const e=N.forwardRef((n,r)=>{const{children:s,...i}=n;if(N.isValidElement(s)){const a=Nj(s),l=kj(i,s.props);return s.type!==N.Fragment&&(l.ref=r?tl(r,a):a),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Rj=Symbol("radix.slottable");function Cj(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Rj}function kj(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Nj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function W_(t){const e=t+"CollectionProvider",[n,r]=Ki(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:C,children:I}=A,M=ko.useRef(null),k=ko.useRef(new Map).current;return m.jsx(s,{scope:C,itemMap:k,collectionRef:M,children:I})};a.displayName=e;const l=t+"CollectionSlot",u=nl(l),h=ko.forwardRef((A,C)=>{const{scope:I,children:M}=A,k=i(l,I),P=Tn(C,k.collectionRef);return m.jsx(u,{ref:P,children:M})});h.displayName=l;const d=t+"CollectionItemSlot",g="data-radix-collection-item",b=nl(d),w=ko.forwardRef((A,C)=>{const{scope:I,children:M,...k}=A,P=ko.useRef(null),L=Tn(C,P),O=i(d,I);return ko.useEffect(()=>(O.itemMap.set(P,{ref:P,...k}),()=>void O.itemMap.delete(P))),m.jsx(b,{[g]:"",ref:L,children:M})});w.displayName=d;function R(A){const C=i(t+"CollectionConsumer",A);return ko.useCallback(()=>{const M=C.collectionRef.current;if(!M)return[];const k=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((O,H)=>k.indexOf(O.ref.current)-k.indexOf(H.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:w},R,r]}var Mj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mt=Mj.reduce((t,e)=>{const n=nl(`Primitive.${e}`),r=N.forwardRef((s,i)=>{const{asChild:a,...l}=s,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(u,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function UR(t,e){t&&cu.flushSync(()=>t.dispatchEvent(e))}function ks(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Ij(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Oj="DismissableLayer",hv="dismissableLayer.update",Pj="dismissableLayer.pointerDownOutside",Dj="dismissableLayer.focusOutside",m2,zR=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ph=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...u}=t,h=N.useContext(zR),[d,g]=N.useState(null),b=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=N.useState({}),R=Tn(e,H=>g(H)),A=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),I=A.indexOf(C),M=d?A.indexOf(d):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,P=M>=I,L=Fj(H=>{const Y=H.target,J=[...h.branches].some(K=>K.contains(Y));!P||J||(s==null||s(H),a==null||a(H),H.defaultPrevented||l==null||l())},b),O=Bj(H=>{const Y=H.target;[...h.branches].some(K=>K.contains(Y))||(i==null||i(H),a==null||a(H),H.defaultPrevented||l==null||l())},b);return Ij(H=>{M===h.layers.size-1&&(r==null||r(H),!H.defaultPrevented&&l&&(H.preventDefault(),l()))},b),N.useEffect(()=>{if(d)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(m2=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),y2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=m2)}},[d,b,n,h]),N.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),y2())},[d,h]),N.useEffect(()=>{const H=()=>w({});return document.addEventListener(hv,H),()=>document.removeEventListener(hv,H)},[]),m.jsx(mt.div,{...u,ref:R,style:{pointerEvents:k?P?"auto":"none":void 0,...t.style},onFocusCapture:vt(t.onFocusCapture,O.onFocusCapture),onBlurCapture:vt(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:vt(t.onPointerDownCapture,L.onPointerDownCapture)})});ph.displayName=Oj;var jj="DismissableLayerBranch",VR=N.forwardRef((t,e)=>{const n=N.useContext(zR),r=N.useRef(null),s=Tn(e,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(mt.div,{...t,ref:s})});VR.displayName=jj;function Fj(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let u=function(){$R(Pj,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Bj(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t),r=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!r.current&&$R(Dj,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function y2(){const t=new CustomEvent(hv);document.dispatchEvent(t)}function $R(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?UR(s,i):s.dispatchEvent(i)}var Lj=ph,Uj=VR,gr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},zj="Portal",gh=N.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=N.useState(!1);gr(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?Sj.createPortal(m.jsx(mt.div,{...r,ref:e}),a):null});gh.displayName=zj;function Vj(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var sa=t=>{const{present:e,children:n}=t,r=$j(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=Tn(r.ref,Hj(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:i}):null};sa.displayName="Presence";function $j(t){const[e,n]=N.useState(),r=N.useRef(null),s=N.useRef(t),i=N.useRef("none"),a=t?"mounted":"unmounted",[l,u]=Vj(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const h=Hd(r.current);i.current=l==="mounted"?h:"none"},[l]),gr(()=>{const h=r.current,d=s.current;if(d!==t){const b=i.current,w=Hd(h);t?u("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(d&&b!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),gr(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,g=w=>{const A=Hd(r.current).includes(w.animationName);if(w.target===e&&A&&(u("ANIMATION_END"),!s.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},b=w=>{w.target===e&&(i.current=Hd(r.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Hd(t){return(t==null?void 0:t.animationName)||"none"}function Hj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Wj=U_[" useInsertionEffect ".trim().toString()]||gr;function rl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=qj({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const g=d.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const h=N.useCallback(d=>{var g;if(l){const b=Xj(d)?d(t):d;b!==t&&((g=a.current)==null||g.call(a,b))}else i(d)},[l,t,i,a]);return[u,h]}function qj({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),s=N.useRef(n),i=N.useRef(e);return Wj(()=>{i.current=e},[e]),N.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Xj(t){return typeof t=="function"}var HR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Yj="VisuallyHidden",q_=N.forwardRef((t,e)=>m.jsx(mt.span,{...t,ref:e,style:{...HR,...t.style}}));q_.displayName=Yj;var X_="ToastProvider",[Y_,Kj,Zj]=W_("Toast"),[WR,Lie]=Ki("Toast",[Zj]),[Qj,Wg]=WR(X_),qR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,u]=N.useState(null),[h,d]=N.useState(0),g=N.useRef(!1),b=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${X_}\`. Expected non-empty \`string\`.`),m.jsx(Y_.Provider,{scope:e,children:m.jsx(Qj,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:u,onToastAdd:N.useCallback(()=>d(w=>w+1),[]),onToastRemove:N.useCallback(()=>d(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:b,children:a})})};qR.displayName=X_;var XR="ToastViewport",Gj=["F8"],dv="toast.viewportPause",pv="toast.viewportResume",YR=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Gj,label:s="Notifications ({hotkey})",...i}=t,a=Wg(XR,n),l=Kj(n),u=N.useRef(null),h=N.useRef(null),d=N.useRef(null),g=N.useRef(null),b=Tn(e,g,a.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=a.toastCount>0;N.useEffect(()=>{const C=I=>{var k;r.length!==0&&r.every(P=>I[P]||I.code===P)&&((k=g.current)==null||k.focus())};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),N.useEffect(()=>{const C=u.current,I=g.current;if(R&&C&&I){const M=()=>{if(!a.isClosePausedRef.current){const O=new CustomEvent(dv);I.dispatchEvent(O),a.isClosePausedRef.current=!0}},k=()=>{if(a.isClosePausedRef.current){const O=new CustomEvent(pv);I.dispatchEvent(O),a.isClosePausedRef.current=!1}},P=O=>{!C.contains(O.relatedTarget)&&k()},L=()=>{C.contains(document.activeElement)||k()};return C.addEventListener("focusin",M),C.addEventListener("focusout",P),C.addEventListener("pointermove",M),C.addEventListener("pointerleave",L),window.addEventListener("blur",M),window.addEventListener("focus",k),()=>{C.removeEventListener("focusin",M),C.removeEventListener("focusout",P),C.removeEventListener("pointermove",M),C.removeEventListener("pointerleave",L),window.removeEventListener("blur",M),window.removeEventListener("focus",k)}}},[R,a.isClosePausedRef]);const A=N.useCallback(({tabbingDirection:C})=>{const M=l().map(k=>{const P=k.ref.current,L=[P,...fF(P)];return C==="forwards"?L:L.reverse()});return(C==="forwards"?M.reverse():M).flat()},[l]);return N.useEffect(()=>{const C=g.current;if(C){const I=M=>{var L,O,H;const k=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!k){const Y=document.activeElement,J=M.shiftKey;if(M.target===C&&J){(L=h.current)==null||L.focus();return}const ae=A({tabbingDirection:J?"backwards":"forwards"}),_e=ae.findIndex(oe=>oe===Y);Ob(ae.slice(_e+1))?M.preventDefault():J?(O=h.current)==null||O.focus():(H=d.current)==null||H.focus()}};return C.addEventListener("keydown",I),()=>C.removeEventListener("keydown",I)}},[l,A]),m.jsxs(Uj,{ref:u,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&m.jsx(gv,{ref:h,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"forwards"});Ob(C)}}),m.jsx(Y_.Slot,{scope:n,children:m.jsx(mt.ol,{tabIndex:-1,...i,ref:b})}),R&&m.jsx(gv,{ref:d,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"backwards"});Ob(C)}})]})});YR.displayName=XR;var KR="ToastFocusProxy",gv=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Wg(KR,n);return m.jsx(q_,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var h;const l=a.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&r()}})});gv.displayName=KR;var mh="Toast",Jj="toast.swipeStart",eF="toast.swipeMove",tF="toast.swipeCancel",nF="toast.swipeEnd",ZR=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l,u]=rl({prop:r,defaultProp:s??!0,onChange:i,caller:mh});return m.jsx(sa,{present:n||l,children:m.jsx(iF,{open:l,...a,ref:e,onClose:()=>u(!1),onPause:ks(t.onPause),onResume:ks(t.onResume),onSwipeStart:vt(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:vt(t.onSwipeMove,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:vt(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:vt(t.onSwipeEnd,h=>{const{x:d,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),u(!1)})})})});ZR.displayName=mh;var[rF,sF]=WR(mh,{onClose(){}}),iF=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:u,onResume:h,onSwipeStart:d,onSwipeMove:g,onSwipeCancel:b,onSwipeEnd:w,...R}=t,A=Wg(mh,n),[C,I]=N.useState(null),M=Tn(e,oe=>I(oe)),k=N.useRef(null),P=N.useRef(null),L=s||A.duration,O=N.useRef(0),H=N.useRef(L),Y=N.useRef(0),{onToastAdd:J,onToastRemove:K}=A,Z=ks(()=>{var Re;(C==null?void 0:C.contains(document.activeElement))&&((Re=A.viewport)==null||Re.focus()),a()}),ae=N.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(Y.current),O.current=new Date().getTime(),Y.current=window.setTimeout(Z,oe))},[Z]);N.useEffect(()=>{const oe=A.viewport;if(oe){const Re=()=>{ae(H.current),h==null||h()},ie=()=>{const Ae=new Date().getTime()-O.current;H.current=H.current-Ae,window.clearTimeout(Y.current),u==null||u()};return oe.addEventListener(dv,ie),oe.addEventListener(pv,Re),()=>{oe.removeEventListener(dv,ie),oe.removeEventListener(pv,Re)}}},[A.viewport,L,u,h,ae]),N.useEffect(()=>{i&&!A.isClosePausedRef.current&&ae(L)},[i,L,A.isClosePausedRef,ae]),N.useEffect(()=>(J(),()=>K()),[J,K]);const _e=N.useMemo(()=>C?rC(C):null,[C]);return A.viewport?m.jsxs(m.Fragment,{children:[_e&&m.jsx(oF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_e}),m.jsx(rF,{scope:n,onClose:Z,children:cu.createPortal(m.jsx(Y_.ItemSlot,{scope:n,children:m.jsx(Lj,{asChild:!0,onEscapeKeyDown:vt(l,()=>{A.isFocusedToastEscapeKeyDownRef.current||Z(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(mt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":A.swipeDirection,...R,ref:M,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:vt(t.onKeyDown,oe=>{oe.key==="Escape"&&(l==null||l(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,Z()))}),onPointerDown:vt(t.onPointerDown,oe=>{oe.button===0&&(k.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:vt(t.onPointerMove,oe=>{if(!k.current)return;const Re=oe.clientX-k.current.x,ie=oe.clientY-k.current.y,Ae=!!P.current,he=["left","right"].includes(A.swipeDirection),$e=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,D=he?$e(0,Re):0,te=he?0:$e(0,ie),G=oe.pointerType==="touch"?10:2,F={x:D,y:te},ge={originalEvent:oe,delta:F};Ae?(P.current=F,Wd(eF,g,ge,{discrete:!1})):b2(F,A.swipeDirection,G)?(P.current=F,Wd(Jj,d,ge,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(Re)>G||Math.abs(ie)>G)&&(k.current=null)}),onPointerUp:vt(t.onPointerUp,oe=>{const Re=P.current,ie=oe.target;if(ie.hasPointerCapture(oe.pointerId)&&ie.releasePointerCapture(oe.pointerId),P.current=null,k.current=null,Re){const Ae=oe.currentTarget,he={originalEvent:oe,delta:Re};b2(Re,A.swipeDirection,A.swipeThreshold)?Wd(nF,w,he,{discrete:!0}):Wd(tF,b,he,{discrete:!0}),Ae.addEventListener("click",$e=>$e.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),oF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Wg(mh,e),[i,a]=N.useState(!1),[l,u]=N.useState(!1);return cF(()=>a(!0)),N.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:m.jsx(gh,{asChild:!0,children:m.jsx(q_,{...r,children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})})})},aF="ToastTitle",QR=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(mt.div,{...r,ref:e})});QR.displayName=aF;var lF="ToastDescription",GR=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(mt.div,{...r,ref:e})});GR.displayName=lF;var JR="ToastAction",eC=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(nC,{altText:n,asChild:!0,children:m.jsx(K_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${JR}\`. Expected non-empty \`string\`.`),null)});eC.displayName=JR;var tC="ToastClose",K_=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=sF(tC,n);return m.jsx(nC,{asChild:!0,children:m.jsx(mt.button,{type:"button",...r,ref:e,onClick:vt(t.onClick,s.onClose)})})});K_.displayName=tC;var nC=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return m.jsx(mt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function rC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),uF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...rC(r))}}),e}function Wd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?UR(s,i):s.dispatchEvent(i)}var b2=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function cF(t=()=>{}){const e=ks(t);gr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function uF(t){return t.nodeType===t.ELEMENT_NODE}function fF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ob(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var hF=qR,sC=YR,iC=ZR,oC=QR,aC=GR,lC=eC,cC=K_;function uC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=uC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=uC(t))&&(r&&(r+=" "),r+=e);return r}const x2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,v2=fC,qg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return v2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const d=n==null?void 0:n[h],g=i==null?void 0:i[h];if(d===null)return null;const b=x2(d)||x2(g);return s[h][b]}),l=n&&Object.entries(n).reduce((h,d)=>{let[g,b]=d;return b===void 0||(h[g]=b),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,d)=>{let{class:g,className:b,...w}=d;return Object.entries(w).every(R=>{let[A,C]=R;return Array.isArray(C)?C.includes({...i,...l}[A]):{...i,...l}[A]===C})?[...h,g,b]:h},[]);return v2(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),_2=t=>{const e=pF(t);return e.charAt(0).toUpperCase()+e.slice(1)},hC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),gF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},u)=>N.createElement("svg",{ref:u,...mF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:hC("lucide",s),...!i&&!gF(l)&&{"aria-hidden":"true"},...l},[...a.map(([h,d])=>N.createElement(h,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(yF,{ref:i,iconNode:e,className:hC(`lucide-${dF(_2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=_2(t),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dC=yt("activity",bF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],vF=yt("box",xF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],mv=yt("boxes",_F);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ac=yt("chart-column",wF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pC=yt("check",SF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xg=yt("chevron-down",TF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gC=yt("chevron-right",EF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RF=yt("chevron-up",AF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],kF=yt("chevrons-up-down",CF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],MF=yt("circle-alert",NF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ba=yt("circle-check-big",IF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PF=yt("circle-help",OF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yv=yt("clock",DF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Z_=yt("code",jF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Qf=yt("copy",FF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],bv=yt("database-zap",BF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Q_=yt("database",LF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xv=yt("download",UF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Yg=yt("external-link",zF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mC=yt("eye",VF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gf=yt("file-text",$F);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Ql=yt("file",HF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],qF=yt("fingerprint",WF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],YF=yt("folder-open",XF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ZF=yt("folder",KF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yC=yt("funnel",QF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Pb=yt("git-branch",GF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],e6=yt("globe",JF);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qc=yt("info",t6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],r6=yt("layers",n6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],i6=yt("moon",s6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],w2=yt("network",o6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],qd=yt("package",a6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],c6=yt("panel-left",l6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}]],f6=yt("parentheses",u6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],bC=yt("play",h6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fs=yt("refresh-cw",d6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],g6=yt("rotate-ccw",p6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Up=yt("save",m6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xC=yt("search",y6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],x6=yt("server",b6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G_=yt("settings",v6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vv=yt("sparkles",_6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M4 16a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3a1 1 0 0 0 1 1h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-3a1 1 0 0 0-1-1z",key:"17jnth"}]],S6=yt("squares-unite",w6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],E6=yt("sun",T6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],R6=yt("terminal",A6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],S2=yt("test-tube",C6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],vC=yt("tree-pine",k6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xo=yt("triangle-alert",N6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ws=yt("x",M6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Kg=yt("zap",I6),J_="-",O6=t=>{const e=D6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(J_);return l[0]===""&&l.length!==1&&l.shift(),_C(l,e)||P6(a)},getConflictingClassGroupIds:(a,l)=>{const u=n[a]||[];return l&&r[a]?[...u,...r[a]]:u}}},_C=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?_C(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(J_);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},T2=/^\[(.+)\]$/,P6=t=>{if(T2.test(t)){const e=T2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},D6=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)_v(n[s],r,s,e);return r},_v=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:E2(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(j6(s)){_v(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{_v(a,E2(e,i),n,r)})})},E2=(t,e)=>{let n=t;return e.split(J_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},j6=t=>t.isThemeGetter,F6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},wv="!",Sv=":",B6=Sv.length,L6=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let a=0,l=0,u=0,h;for(let R=0;R<s.length;R++){let A=s[R];if(a===0&&l===0){if(A===Sv){i.push(s.slice(u,R)),u=R+B6;continue}if(A==="/"){h=R;continue}}A==="["?a++:A==="]"?a--:A==="("?l++:A===")"&&l--}const d=i.length===0?s:s.substring(u),g=U6(d),b=g!==d,w=h&&h>u?h-u:void 0;return{modifiers:i,hasImportantModifier:b,baseClassName:g,maybePostfixModifierPosition:w}};if(e){const s=e+Sv,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},U6=t=>t.endsWith(wv)?t.substring(0,t.length-1):t.startsWith(wv)?t.substring(1):t,z6=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},V6=t=>({cache:F6(t.cacheSize),parseClassName:L6(t),sortModifiers:z6(t),...O6(t)}),$6=/\s+/,H6=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],l=t.trim().split($6);let u="";for(let h=l.length-1;h>=0;h-=1){const d=l[h],{isExternal:g,modifiers:b,hasImportantModifier:w,baseClassName:R,maybePostfixModifierPosition:A}=n(d);if(g){u=d+(u.length>0?" "+u:u);continue}let C=!!A,I=r(C?R.substring(0,A):R);if(!I){if(!C){u=d+(u.length>0?" "+u:u);continue}if(I=r(R),!I){u=d+(u.length>0?" "+u:u);continue}C=!1}const M=i(b).join(":"),k=w?M+wv:M,P=k+I;if(a.includes(P))continue;a.push(P);const L=s(I,C);for(let O=0;O<L.length;++O){const H=L[O];a.push(k+H)}u=d+(u.length>0?" "+u:u)}return u};function W6(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wC(e))&&(r&&(r+=" "),r+=n);return r}const wC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wC(t[r]))&&(n&&(n+=" "),n+=e);return n};function q6(t,...e){let n,r,s,i=a;function a(u){const h=e.reduce((d,g)=>g(d),t());return n=V6(h),r=n.cache.get,s=n.cache.set,i=l,l(u)}function l(u){const h=r(u);if(h)return h;const d=H6(u,n);return s(u,d),d}return function(){return i(W6.apply(null,arguments))}}const er=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},SC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,TC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,X6=/^\d+\/\d+$/,Y6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,K6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Z6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Q6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,G6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gl=t=>X6.test(t),It=t=>!!t&&!Number.isNaN(Number(t)),So=t=>!!t&&Number.isInteger(Number(t)),Db=t=>t.endsWith("%")&&It(t.slice(0,-1)),Fi=t=>Y6.test(t),J6=()=>!0,eB=t=>K6.test(t)&&!Z6.test(t),EC=()=>!1,tB=t=>Q6.test(t),nB=t=>G6.test(t),rB=t=>!rt(t)&&!st(t),sB=t=>uu(t,CC,EC),rt=t=>SC.test(t),ka=t=>uu(t,kC,eB),jb=t=>uu(t,cB,It),A2=t=>uu(t,AC,EC),iB=t=>uu(t,RC,nB),Xd=t=>uu(t,NC,tB),st=t=>TC.test(t),yf=t=>fu(t,kC),oB=t=>fu(t,uB),R2=t=>fu(t,AC),aB=t=>fu(t,CC),lB=t=>fu(t,RC),Yd=t=>fu(t,NC,!0),uu=(t,e,n)=>{const r=SC.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},fu=(t,e,n=!1)=>{const r=TC.exec(t);return r?r[1]?e(r[1]):n:!1},AC=t=>t==="position"||t==="percentage",RC=t=>t==="image"||t==="url",CC=t=>t==="length"||t==="size"||t==="bg-size",kC=t=>t==="length",cB=t=>t==="number",uB=t=>t==="family-name",NC=t=>t==="shadow",fB=()=>{const t=er("color"),e=er("font"),n=er("text"),r=er("font-weight"),s=er("tracking"),i=er("leading"),a=er("breakpoint"),l=er("container"),u=er("spacing"),h=er("radius"),d=er("shadow"),g=er("inset-shadow"),b=er("text-shadow"),w=er("drop-shadow"),R=er("blur"),A=er("perspective"),C=er("aspect"),I=er("ease"),M=er("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...P(),st,rt],O=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],Y=()=>[st,rt,u],J=()=>[Gl,"full","auto",...Y()],K=()=>[So,"none","subgrid",st,rt],Z=()=>["auto",{span:["full",So,st,rt]},So,st,rt],ae=()=>[So,"auto",st,rt],_e=()=>["auto","min","max","fr",st,rt],oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Re=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...Y()],Ae=()=>[Gl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Y()],he=()=>[t,st,rt],$e=()=>[...P(),R2,A2,{position:[st,rt]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",aB,sB,{size:[st,rt]}],G=()=>[Db,yf,ka],F=()=>["","none","full",h,st,rt],ge=()=>["",It,yf,ka],ee=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[It,Db,R2,A2],ce=()=>["","none",R,st,rt],Me=()=>["none",It,st,rt],ze=()=>["none",It,st,rt],Ue=()=>[It,st,rt],Ke=()=>[Gl,"full",...Y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fi],breakpoint:[Fi],color:[J6],container:[Fi],"drop-shadow":[Fi],ease:["in","out","in-out"],font:[rB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fi],shadow:[Fi],spacing:["px",It],text:[Fi],"text-shadow":[Fi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gl,rt,st,C]}],container:["container"],columns:[{columns:[It,rt,st,l]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[So,"auto",st,rt]}],basis:[{basis:[Gl,"full","auto",l,...Y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[It,Gl,"auto","initial","none",rt]}],grow:[{grow:["",It,st,rt]}],shrink:[{shrink:["",It,st,rt]}],order:[{order:[So,"first","last","none",st,rt]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:Z()}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:Z()}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_e()}],"auto-rows":[{"auto-rows":_e()}],gap:[{gap:Y()}],"gap-x":[{"gap-x":Y()}],"gap-y":[{"gap-y":Y()}],"justify-content":[{justify:[...oe(),"normal"]}],"justify-items":[{"justify-items":[...Re(),"normal"]}],"justify-self":[{"justify-self":["auto",...Re()]}],"align-content":[{content:["normal",...oe()]}],"align-items":[{items:[...Re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Re(),{baseline:["","last"]}]}],"place-content":[{"place-content":oe()}],"place-items":[{"place-items":[...Re(),"baseline"]}],"place-self":[{"place-self":["auto",...Re()]}],p:[{p:Y()}],px:[{px:Y()}],py:[{py:Y()}],ps:[{ps:Y()}],pe:[{pe:Y()}],pt:[{pt:Y()}],pr:[{pr:Y()}],pb:[{pb:Y()}],pl:[{pl:Y()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":Y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Y()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ae()}],w:[{w:[l,"screen",...Ae()]}],"min-w":[{"min-w":[l,"screen","none",...Ae()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...Ae()]}],h:[{h:["screen","lh",...Ae()]}],"min-h":[{"min-h":["screen","lh","none",...Ae()]}],"max-h":[{"max-h":["screen","lh",...Ae()]}],"font-size":[{text:["base",n,yf,ka]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,st,jb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Db,rt]}],"font-family":[{font:[oB,rt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,st,rt]}],"line-clamp":[{"line-clamp":[It,"none",st,jb]}],leading:[{leading:[i,...Y()]}],"list-image":[{"list-image":["none",st,rt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",st,rt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:he()}],"text-color":[{text:he()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[It,"from-font","auto",st,ka]}],"text-decoration-color":[{decoration:he()}],"underline-offset":[{"underline-offset":[It,"auto",st,rt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",st,rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",st,rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$e()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},So,st,rt],radial:["",st,rt],conic:[So,st,rt]},lB,iB]}],"bg-color":[{bg:he()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:he()}],"gradient-via":[{via:he()}],"gradient-to":[{to:he()}],rounded:[{rounded:F()}],"rounded-s":[{"rounded-s":F()}],"rounded-e":[{"rounded-e":F()}],"rounded-t":[{"rounded-t":F()}],"rounded-r":[{"rounded-r":F()}],"rounded-b":[{"rounded-b":F()}],"rounded-l":[{"rounded-l":F()}],"rounded-ss":[{"rounded-ss":F()}],"rounded-se":[{"rounded-se":F()}],"rounded-ee":[{"rounded-ee":F()}],"rounded-es":[{"rounded-es":F()}],"rounded-tl":[{"rounded-tl":F()}],"rounded-tr":[{"rounded-tr":F()}],"rounded-br":[{"rounded-br":F()}],"rounded-bl":[{"rounded-bl":F()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:he()}],"border-color-x":[{"border-x":he()}],"border-color-y":[{"border-y":he()}],"border-color-s":[{"border-s":he()}],"border-color-e":[{"border-e":he()}],"border-color-t":[{"border-t":he()}],"border-color-r":[{"border-r":he()}],"border-color-b":[{"border-b":he()}],"border-color-l":[{"border-l":he()}],"divide-color":[{divide:he()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[It,st,rt]}],"outline-w":[{outline:["",It,yf,ka]}],"outline-color":[{outline:he()}],shadow:[{shadow:["","none",d,Yd,Xd]}],"shadow-color":[{shadow:he()}],"inset-shadow":[{"inset-shadow":["none",g,Yd,Xd]}],"inset-shadow-color":[{"inset-shadow":he()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:he()}],"ring-offset-w":[{"ring-offset":[It,ka]}],"ring-offset-color":[{"ring-offset":he()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":he()}],"text-shadow":[{"text-shadow":["none",b,Yd,Xd]}],"text-shadow-color":[{"text-shadow":he()}],opacity:[{opacity:[It,st,rt]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[It]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":he()}],"mask-image-linear-to-color":[{"mask-linear-to":he()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":he()}],"mask-image-t-to-color":[{"mask-t-to":he()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":he()}],"mask-image-r-to-color":[{"mask-r-to":he()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":he()}],"mask-image-b-to-color":[{"mask-b-to":he()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":he()}],"mask-image-l-to-color":[{"mask-l-to":he()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":he()}],"mask-image-x-to-color":[{"mask-x-to":he()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":he()}],"mask-image-y-to-color":[{"mask-y-to":he()}],"mask-image-radial":[{"mask-radial":[st,rt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":he()}],"mask-image-radial-to-color":[{"mask-radial-to":he()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[It]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":he()}],"mask-image-conic-to-color":[{"mask-conic-to":he()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$e()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",st,rt]}],filter:[{filter:["","none",st,rt]}],blur:[{blur:ce()}],brightness:[{brightness:[It,st,rt]}],contrast:[{contrast:[It,st,rt]}],"drop-shadow":[{"drop-shadow":["","none",w,Yd,Xd]}],"drop-shadow-color":[{"drop-shadow":he()}],grayscale:[{grayscale:["",It,st,rt]}],"hue-rotate":[{"hue-rotate":[It,st,rt]}],invert:[{invert:["",It,st,rt]}],saturate:[{saturate:[It,st,rt]}],sepia:[{sepia:["",It,st,rt]}],"backdrop-filter":[{"backdrop-filter":["","none",st,rt]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[It,st,rt]}],"backdrop-contrast":[{"backdrop-contrast":[It,st,rt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",It,st,rt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[It,st,rt]}],"backdrop-invert":[{"backdrop-invert":["",It,st,rt]}],"backdrop-opacity":[{"backdrop-opacity":[It,st,rt]}],"backdrop-saturate":[{"backdrop-saturate":[It,st,rt]}],"backdrop-sepia":[{"backdrop-sepia":["",It,st,rt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Y()}],"border-spacing-x":[{"border-spacing-x":Y()}],"border-spacing-y":[{"border-spacing-y":Y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",st,rt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[It,"initial",st,rt]}],ease:[{ease:["linear","initial",I,st,rt]}],delay:[{delay:[It,st,rt]}],animate:[{animate:["none",M,st,rt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,st,rt]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:Me()}],"rotate-x":[{"rotate-x":Me()}],"rotate-y":[{"rotate-y":Me()}],"rotate-z":[{"rotate-z":Me()}],scale:[{scale:ze()}],"scale-x":[{"scale-x":ze()}],"scale-y":[{"scale-y":ze()}],"scale-z":[{"scale-z":ze()}],"scale-3d":["scale-3d"],skew:[{skew:Ue()}],"skew-x":[{"skew-x":Ue()}],"skew-y":[{"skew-y":Ue()}],transform:[{transform:[st,rt,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ke()}],"translate-x":[{"translate-x":Ke()}],"translate-y":[{"translate-y":Ke()}],"translate-z":[{"translate-z":Ke()}],"translate-none":["translate-none"],accent:[{accent:he()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:he()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",st,rt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",st,rt]}],fill:[{fill:["none",...he()]}],"stroke-w":[{stroke:[It,yf,ka,jb]}],stroke:[{stroke:["none",...he()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},hB=q6(fB);function Dt(...t){return hB(fC(t))}const dB=qg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-card text-card-foreground",success:"border-[color:var(--color-success)] bg-card text-card-foreground",warning:"border-[color:var(--color-warning)] bg-card text-card-foreground",info:"border-[color:var(--color-info)] bg-card text-card-foreground"}},defaultVariants:{variant:"default"}}),pB=hF,MC=N.forwardRef(({className:t,...e},n)=>m.jsx(sC,{ref:n,className:Dt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] gap-2",t),...e}));MC.displayName=sC.displayName;const IC=N.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(iC,{ref:r,className:Dt(dB({variant:e}),t),...n}));IC.displayName=iC.displayName;const gB=N.forwardRef(({className:t,...e},n)=>m.jsx(lC,{ref:n,className:Dt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-thin ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));gB.displayName=lC.displayName;const OC=N.forwardRef(({className:t,...e},n)=>m.jsx(cC,{ref:n,className:Dt("absolute right-2 top-2 rounded-md p-1 text-foreground/30 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-80 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(ws,{className:"h-4 w-4"})}));OC.displayName=cC.displayName;const PC=N.forwardRef(({className:t,...e},n)=>m.jsx(oC,{ref:n,className:Dt("text-xs font-thin",t),...e}));PC.displayName=oC.displayName;const DC=N.forwardRef(({className:t,...e},n)=>m.jsx(aC,{ref:n,className:Dt("text-xs opacity-70",t),...e}));DC.displayName=aC.displayName;const jC=N.forwardRef(({className:t,variant:e="default",...n},r)=>{const s={default:qc,destructive:MF,success:Ba,warning:Xo,info:qc}[e],i={default:"text-muted-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"}[e];return m.jsx("div",{ref:r,className:Dt("flex-shrink-0",t),...n,children:m.jsx(s,{className:Dt("h-4 w-4",i)})})});jC.displayName="ToastIcon";const C2=(t,e)=>{const n={default:"text-foreground",destructive:"text-destructive",success:"text-[color:var(--color-success)]",warning:"text-[color:var(--color-warning)]",info:"text-[color:var(--color-info)]"},r={success:["added","created","saved","completed","success","done"],destructive:["error","failed","deleted","removed","warning"],warning:["warning","caution","alert"],info:["info","note","updated","changed"]};let s=t;return s=s.replace(/([^\s]+\.[a-zA-Z0-9]+)/g,"<strong>$1</strong>"),s=s.replace(/([^\s]*\/[^\s]+)/g,"<strong>$1</strong>"),Object.entries(r).forEach(([i,a])=>{a.forEach(l=>{const u=new RegExp(`\\b(${l})\\b`,"gi"),h=n[i];s=s.replace(u,`<span class="${h} font-medium">$1</span>`)})}),{__html:s}},mB=3,yB=5e3;let Fb=0;function bB(){return Fb=(Fb+1)%Number.MAX_SAFE_INTEGER,Fb.toString()}const Bb=new Map,k2=t=>{if(Bb.has(t))return;const e=setTimeout(()=>{Bb.delete(t),Ff({type:"REMOVE_TOAST",toastId:t})},yB);Bb.set(t,e)},xB=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,mB)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?k2(n):t.toasts.forEach(r=>{k2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Sp=[];let Tp={toasts:[]};function Ff(t){Tp=xB(Tp,t),Sp.forEach(e=>{e(Tp)})}function Cf({...t}){const e=bB(),n=s=>Ff({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Ff({type:"DISMISS_TOAST",toastId:e});return Ff({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function vB(){const[t,e]=N.useState(Tp);return N.useEffect(()=>(Sp.push(e),()=>{const n=Sp.indexOf(e);n>-1&&Sp.splice(n,1)}),[t]),{...t,toast:Cf,dismiss:n=>Ff({type:"DISMISS_TOAST",toastId:n})}}function _B(){const{toasts:t}=vB();return m.jsxs(pB,{children:[t.map(function({id:e,title:n,description:r,action:s,variant:i,...a}){return m.jsxs(IC,{variant:i,...a,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(jC,{variant:i}),m.jsxs("div",{className:"grid gap-1 flex-1",children:[n&&m.jsx(PC,{dangerouslySetInnerHTML:C2(String(n))}),r&&m.jsx(DC,{dangerouslySetInnerHTML:C2(String(r))})]})]}),s,m.jsx(OC,{})]},e)}),m.jsx(MC,{})]})}var wB=(t,e,n,r,s,i,a,l)=>{let u=document.documentElement,h=["light","dark"];function d(w){(Array.isArray(t)?t:[t]).forEach(R=>{let A=R==="class",C=A&&i?s.map(I=>i[I]||I):s;A?(u.classList.remove(...C),u.classList.add(i&&i[w]?i[w]:w)):u.setAttribute(R,w)}),g(w)}function g(w){l&&h.includes(w)&&(u.style.colorScheme=w)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let w=localStorage.getItem(e)||n,R=a&&w==="system"?b():w;d(R)}catch{}},N2=["light","dark"],FC="(prefers-color-scheme: dark)",SB=typeof window>"u",e0=N.createContext(void 0),TB={setTheme:t=>{},themes:[]},EB=()=>{var t;return(t=N.useContext(e0))!=null?t:TB},AB=t=>N.useContext(e0)?N.createElement(N.Fragment,null,t.children):N.createElement(CB,{...t}),RB=["light","dark"],CB=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=RB,defaultTheme:a=n?"system":"light",attribute:l="data-theme",value:u,children:h,nonce:d,scriptProps:g})=>{let[b,w]=N.useState(()=>NB(s,a)),[R,A]=N.useState(()=>b==="system"?Lb():b),C=u?Object.values(u):i,I=N.useCallback(L=>{let O=L;if(!O)return;L==="system"&&n&&(O=Lb());let H=u?u[O]:O,Y=e?MB(d):null,J=document.documentElement,K=Z=>{Z==="class"?(J.classList.remove(...C),H&&J.classList.add(H)):Z.startsWith("data-")&&(H?J.setAttribute(Z,H):J.removeAttribute(Z))};if(Array.isArray(l)?l.forEach(K):K(l),r){let Z=N2.includes(a)?a:null,ae=N2.includes(O)?O:Z;J.style.colorScheme=ae}Y==null||Y()},[d]),M=N.useCallback(L=>{let O=typeof L=="function"?L(b):L;w(O);try{localStorage.setItem(s,O)}catch{}},[b]),k=N.useCallback(L=>{let O=Lb(L);A(O),b==="system"&&n&&!t&&I("system")},[b,t]);N.useEffect(()=>{let L=window.matchMedia(FC);return L.addListener(k),k(L),()=>L.removeListener(k)},[k]),N.useEffect(()=>{let L=O=>{O.key===s&&(O.newValue?w(O.newValue):M(a))};return window.addEventListener("storage",L),()=>window.removeEventListener("storage",L)},[M]),N.useEffect(()=>{I(t??b)},[t,b]);let P=N.useMemo(()=>({theme:b,setTheme:M,forcedTheme:t,resolvedTheme:b==="system"?R:b,themes:n?[...i,"system"]:i,systemTheme:n?R:void 0}),[b,M,t,R,n,i]);return N.createElement(e0.Provider,{value:P},N.createElement(kB,{forcedTheme:t,storageKey:s,attribute:l,enableSystem:n,enableColorScheme:r,defaultTheme:a,value:u,themes:i,nonce:d,scriptProps:g}),h)},kB=N.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,themes:l,nonce:u,scriptProps:h})=>{let d=JSON.stringify([n,e,i,t,l,a,r,s]).slice(1,-1);return N.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${wB.toString()})(${d})`}})}),NB=(t,e)=>{if(SB)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},MB=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Lb=t=>(t||(t=window.matchMedia(FC)),t.matches?"dark":"light");function IB({children:t,...e}){return m.jsx(AB,{...e,children:t})}const OB=qg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-thin transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function wt({className:t,variant:e,size:n,asChild:r=!1,...s}){const i=r?LR:"button";return m.jsx(i,{"data-slot":"button",className:Dt(OB({variant:e,size:n,className:t})),...s})}const PB=qg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-thin w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function pn({className:t,variant:e,asChild:n=!1,...r}){const s=n?LR:"span";return m.jsx(s,{"data-slot":"badge",className:Dt(PB({variant:e}),t),...r})}var DB=U_[" useId ".trim().toString()]||(()=>{}),jB=0;function Fr(t){const[e,n]=N.useState(DB());return gr(()=>{n(r=>r??String(jB++))},[t]),e?`radix-${e}`:""}var FB=N.createContext(void 0);function t0(t){const e=N.useContext(FB);return t||e||"ltr"}var Ub="rovingFocusGroup.onEntryFocus",BB={bubbles:!1,cancelable:!0},yh="RovingFocusGroup",[Tv,BC,LB]=W_(yh),[UB,LC]=Ki(yh,[LB]),[zB,VB]=UB(yh),UC=N.forwardRef((t,e)=>m.jsx(Tv.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Tv.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx($B,{...t,ref:e})})}));UC.displayName=yh;var $B=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...g}=t,b=N.useRef(null),w=Tn(e,b),R=t0(i),[A,C]=rl({prop:a,defaultProp:l??null,onChange:u,caller:yh}),[I,M]=N.useState(!1),k=ks(h),P=BC(n),L=N.useRef(!1),[O,H]=N.useState(0);return N.useEffect(()=>{const Y=b.current;if(Y)return Y.addEventListener(Ub,k),()=>Y.removeEventListener(Ub,k)},[k]),m.jsx(zB,{scope:n,orientation:r,dir:R,loop:s,currentTabStopId:A,onItemFocus:N.useCallback(Y=>C(Y),[C]),onItemShiftTab:N.useCallback(()=>M(!0),[]),onFocusableItemAdd:N.useCallback(()=>H(Y=>Y+1),[]),onFocusableItemRemove:N.useCallback(()=>H(Y=>Y-1),[]),children:m.jsx(mt.div,{tabIndex:I||O===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...t.style},onMouseDown:vt(t.onMouseDown,()=>{L.current=!0}),onFocus:vt(t.onFocus,Y=>{const J=!L.current;if(Y.target===Y.currentTarget&&J&&!I){const K=new CustomEvent(Ub,BB);if(Y.currentTarget.dispatchEvent(K),!K.defaultPrevented){const Z=P().filter(ie=>ie.focusable),ae=Z.find(ie=>ie.active),_e=Z.find(ie=>ie.id===A),Re=[ae,_e,...Z].filter(Boolean).map(ie=>ie.ref.current);$C(Re,d)}}L.current=!1}),onBlur:vt(t.onBlur,()=>M(!1))})})}),zC="RovingFocusGroupItem",VC=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,u=Fr(),h=i||u,d=VB(zC,n),g=d.currentTabStopId===h,b=BC(n),{onFocusableItemAdd:w,onFocusableItemRemove:R,currentTabStopId:A}=d;return N.useEffect(()=>{if(r)return w(),()=>R()},[r,w,R]),m.jsx(Tv.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:m.jsx(mt.span,{tabIndex:g?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:vt(t.onMouseDown,C=>{r?d.onItemFocus(h):C.preventDefault()}),onFocus:vt(t.onFocus,()=>d.onItemFocus(h)),onKeyDown:vt(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){d.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const I=qB(C,d.orientation,d.dir);if(I!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let k=b().filter(P=>P.focusable).map(P=>P.ref.current);if(I==="last")k.reverse();else if(I==="prev"||I==="next"){I==="prev"&&k.reverse();const P=k.indexOf(C.currentTarget);k=d.loop?XB(k,P+1):k.slice(P+1)}setTimeout(()=>$C(k))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:A!=null}):a})})});VC.displayName=zC;var HB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function qB(t,e,n){const r=WB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return HB[r]}function $C(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function XB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var YB=UC,KB=VC,Zg="Tabs",[ZB,Uie]=Ki(Zg,[LC]),HC=LC(),[QB,n0]=ZB(Zg),WC=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:u="automatic",...h}=t,d=t0(l),[g,b]=rl({prop:r,onChange:s,defaultProp:i??"",caller:Zg});return m.jsx(QB,{scope:n,baseId:Fr(),value:g,onValueChange:b,orientation:a,dir:d,activationMode:u,children:m.jsx(mt.div,{dir:d,"data-orientation":a,...h,ref:e})})});WC.displayName=Zg;var qC="TabsList",XC=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=n0(qC,n),a=HC(n);return m.jsx(YB,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(mt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});XC.displayName=qC;var YC="TabsTrigger",KC=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=n0(YC,n),l=HC(n),u=GC(a.baseId,r),h=JC(a.baseId,r),d=r===a.value;return m.jsx(KB,{asChild:!0,...l,focusable:!s,active:d,children:m.jsx(mt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:e,onMouseDown:vt(t.onMouseDown,g=>{!s&&g.button===0&&g.ctrlKey===!1?a.onValueChange(r):g.preventDefault()}),onKeyDown:vt(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(r)}),onFocus:vt(t.onFocus,()=>{const g=a.activationMode!=="manual";!d&&!s&&g&&a.onValueChange(r)})})})});KC.displayName=YC;var ZC="TabsContent",QC=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=n0(ZC,n),u=GC(l.baseId,r),h=JC(l.baseId,r),d=r===l.value,g=N.useRef(d);return N.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),m.jsx(sa,{present:s||d,children:({present:b})=>m.jsx(mt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!b,id:h,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:b&&i})})});QC.displayName=ZC;function GC(t,e){return`${t}-trigger-${e}`}function JC(t,e){return`${t}-content-${e}`}var GB=WC,JB=XC,eL=KC,tL=QC;function ia({className:t,...e}){return m.jsx(GB,{"data-slot":"tabs",className:Dt("flex flex-col gap-2",t),...e})}function oa({className:t,...e}){return m.jsx(JB,{"data-slot":"tabs-list",className:Dt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function Rn({className:t,...e}){return m.jsx(eL,{"data-slot":"tabs-trigger",className:Dt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-thin whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function In({className:t,...e}){return m.jsx(tL,{"data-slot":"tabs-content",className:Dt("flex-1 outline-none",t),...e})}const ln={success:(t,e)=>Cf({variant:"success",title:t,description:e}),error:(t,e)=>Cf({variant:"destructive",title:t,description:e}),info:(t,e)=>Cf({variant:"info",title:t,description:e}),warning:(t,e,n)=>Cf({variant:"warning",title:t,description:e,duration:n==null?void 0:n.duration})},nL=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]},rL=()=>{const{data:t={}}=Cs({queryKey:["fileSizes"],queryFn:async()=>{const e=await fetch("http://localhost:3333/api/files");if(!e.ok)throw new Error("Failed to fetch files");const n=await e.json(),r={};return n.forEach(s=>{r[s.path]=s.size||0}),r},refetchInterval:3e4});return t};function Ut({className:t,...e}){return m.jsx("div",{"data-slot":"card",className:Dt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function En({className:t,...e}){return m.jsx("div",{"data-slot":"card-header",className:Dt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Cn({className:t,...e}){return m.jsx("div",{"data-slot":"card-title",className:Dt("leading-none font-thin",t),...e})}function Kd({className:t,...e}){return m.jsx("div",{"data-slot":"card-description",className:Dt("text-muted-foreground text-sm",t),...e})}function qt({className:t,...e}){return m.jsx("div",{"data-slot":"card-content",className:Dt("px-6",t),...e})}const sL=({bundle:t,isSelected:e,onSelect:n})=>{const r=t.name.startsWith("smart:"),s=r?t.name.replace("smart:",""):t.name;return m.jsxs(Ut,{className:`cursor-pointer transition-all border-vesper bg-vesper-card hover:border-vesper-accent ${e?"ring-1 ring-primary border-primary":""}`,onClick:()=>n(t.name),children:[m.jsx(En,{className:"pb-2",children:m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[r?m.jsx(Kg,{className:"w-3 h-3 text-vesper-accent"}):m.jsx(vF,{className:"w-3 h-3 text-muted-foreground"}),m.jsx("h3",{className:"text-sm font-thin truncate color-vesper-fg",children:s})]}),m.jsx(pn,{variant:"outline",className:"text-[10px] font-thin uppercase tracking-tighter border-vesper color-vesper-muted px-1 h-4",children:r?"Smart":"Manual"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.changed?"bg-vesper-warning animate-pulse":"bg-vesper-success"}`}),m.jsx("span",{className:"text-[10px] font-thin uppercase tracking-widest color-vesper-muted",children:t.changed?"Syncing":"In Context"})]})]})}),m.jsx(qt,{className:"pt-0",children:m.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[m.jsxs("div",{className:"flex items-center justify-between text-[11px] font-thin color-vesper-muted",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(qF,{className:"w-3 h-3"}),m.jsxs("span",{children:[t.fileCount," units"]})]}),m.jsx("span",{children:nL(t.size)})]}),t.generated&&m.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-thin color-vesper-muted mt-2 opacity-50",children:[m.jsx(yv,{className:"w-2.5 h-2.5"}),m.jsxs("span",{children:["Synced ",new Date(t.generated).toLocaleTimeString()]})]})]})})]})};function M2(t,[e,n]){return Math.min(n,Math.max(e,t))}var zb=0;function r0(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??I2()),document.body.insertAdjacentElement("beforeend",t[1]??I2()),zb++,()=>{zb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zb--}},[])}function I2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Vb="focusScope.autoFocusOnMount",$b="focusScope.autoFocusOnUnmount",O2={bubbles:!1,cancelable:!0},iL="FocusScope",Qg=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,u]=N.useState(null),h=ks(s),d=ks(i),g=N.useRef(null),b=Tn(e,A=>u(A)),w=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let A=function(k){if(w.paused||!l)return;const P=k.target;l.contains(P)?g.current=P:Mo(g.current,{select:!0})},C=function(k){if(w.paused||!l)return;const P=k.relatedTarget;P!==null&&(l.contains(P)||Mo(g.current,{select:!0}))},I=function(k){if(document.activeElement===document.body)for(const L of k)L.removedNodes.length>0&&Mo(l)};document.addEventListener("focusin",A),document.addEventListener("focusout",C);const M=new MutationObserver(I);return l&&M.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",C),M.disconnect()}}},[r,l,w.paused]),N.useEffect(()=>{if(l){D2.add(w);const A=document.activeElement;if(!l.contains(A)){const I=new CustomEvent(Vb,O2);l.addEventListener(Vb,h),l.dispatchEvent(I),I.defaultPrevented||(oL(fL(ek(l)),{select:!0}),document.activeElement===A&&Mo(l))}return()=>{l.removeEventListener(Vb,h),setTimeout(()=>{const I=new CustomEvent($b,O2);l.addEventListener($b,d),l.dispatchEvent(I),I.defaultPrevented||Mo(A??document.body,{select:!0}),l.removeEventListener($b,d),D2.remove(w)},0)}}},[l,h,d,w]);const R=N.useCallback(A=>{if(!n&&!r||w.paused)return;const C=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,I=document.activeElement;if(C&&I){const M=A.currentTarget,[k,P]=aL(M);k&&P?!A.shiftKey&&I===P?(A.preventDefault(),n&&Mo(k,{select:!0})):A.shiftKey&&I===k&&(A.preventDefault(),n&&Mo(P,{select:!0})):I===M&&A.preventDefault()}},[n,r,w.paused]);return m.jsx(mt.div,{tabIndex:-1,...a,ref:b,onKeyDown:R})});Qg.displayName=iL;function oL(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Mo(r,{select:e}),document.activeElement!==n)return}function aL(t){const e=ek(t),n=P2(e,t),r=P2(e.reverse(),t);return[n,r]}function ek(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function P2(t,e){for(const n of t)if(!lL(n,{upTo:e}))return n}function lL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cL(t){return t instanceof HTMLInputElement&&"select"in t}function Mo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cL(t)&&e&&t.select()}}var D2=uL();function uL(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=j2(t,e),t.unshift(e)},remove(e){var n;t=j2(t,e),(n=t[0])==null||n.resume()}}}function j2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function fL(t){return t.filter(e=>e.tagName!=="A")}const hL=["top","right","bottom","left"],ea=Math.min,ls=Math.max,zp=Math.round,Zd=Math.floor,yi=t=>({x:t,y:t}),dL={left:"right",right:"left",bottom:"top",top:"bottom"},pL={start:"end",end:"start"};function Ev(t,e,n){return ls(t,ea(e,n))}function qi(t,e){return typeof t=="function"?t(e):t}function Xi(t){return t.split("-")[0]}function hu(t){return t.split("-")[1]}function s0(t){return t==="x"?"y":"x"}function i0(t){return t==="y"?"height":"width"}function gi(t){return["top","bottom"].includes(Xi(t))?"y":"x"}function o0(t){return s0(gi(t))}function gL(t,e,n){n===void 0&&(n=!1);const r=hu(t),s=o0(t),i=i0(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Vp(a)),[a,Vp(a)]}function mL(t){const e=Vp(t);return[Av(t),e,Av(e)]}function Av(t){return t.replace(/start|end/g,e=>pL[e])}function yL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function bL(t,e,n,r){const s=hu(t);let i=yL(Xi(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Av)))),i}function Vp(t){return t.replace(/left|right|bottom|top/g,e=>dL[e])}function xL(t){return{top:0,right:0,bottom:0,left:0,...t}}function tk(t){return typeof t!="number"?xL(t):{top:t,right:t,bottom:t,left:t}}function $p(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function F2(t,e,n){let{reference:r,floating:s}=t;const i=gi(e),a=o0(e),l=i0(a),u=Xi(e),h=i==="y",d=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,b=r[l]/2-s[l]/2;let w;switch(u){case"top":w={x:d,y:r.y-s.height};break;case"bottom":w={x:d,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(hu(e)){case"start":w[a]-=b*(n&&h?-1:1);break;case"end":w[a]+=b*(n&&h?-1:1);break}return w}const vL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:g}=F2(h,r,u),b=r,w={},R=0;for(let A=0;A<l.length;A++){const{name:C,fn:I}=l[A],{x:M,y:k,data:P,reset:L}=await I({x:d,y:g,initialPlacement:r,placement:b,strategy:s,middlewareData:w,rects:h,platform:a,elements:{reference:t,floating:e}});d=M??d,g=k??g,w={...w,[C]:{...w[C],...P}},L&&R<=50&&(R++,typeof L=="object"&&(L.placement&&(b=L.placement),L.rects&&(h=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:d,y:g}=F2(h,b,u)),A=-1)}return{x:d,y:g,placement:b,strategy:s,middlewareData:w}};async function Jf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:b=!1,padding:w=0}=qi(e,t),R=tk(w),C=l[b?g==="floating"?"reference":"floating":g],I=$p(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(C)))==null||n?C:C.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:d,strategy:u})),M=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),P=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},L=$p(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:M,offsetParent:k,strategy:u}):M);return{top:(I.top-L.top+R.top)/P.y,bottom:(L.bottom-I.bottom+R.bottom)/P.y,left:(I.left-L.left+R.left)/P.x,right:(L.right-I.right+R.right)/P.x}}const _L=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:u}=e,{element:h,padding:d=0}=qi(t,e)||{};if(h==null)return{};const g=tk(d),b={x:n,y:r},w=o0(s),R=i0(w),A=await a.getDimensions(h),C=w==="y",I=C?"top":"left",M=C?"bottom":"right",k=C?"clientHeight":"clientWidth",P=i.reference[R]+i.reference[w]-b[w]-i.floating[R],L=b[w]-i.reference[w],O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let H=O?O[k]:0;(!H||!await(a.isElement==null?void 0:a.isElement(O)))&&(H=l.floating[k]||i.floating[R]);const Y=P/2-L/2,J=H/2-A[R]/2-1,K=ea(g[I],J),Z=ea(g[M],J),ae=K,_e=H-A[R]-Z,oe=H/2-A[R]/2+Y,Re=Ev(ae,oe,_e),ie=!u.arrow&&hu(s)!=null&&oe!==Re&&i.reference[R]/2-(oe<ae?K:Z)-A[R]/2<0,Ae=ie?oe<ae?oe-ae:oe-_e:0;return{[w]:b[w]+Ae,data:{[w]:Re,centerOffset:oe-Re-Ae,...ie&&{alignmentOffset:Ae}},reset:ie}}}),wL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:u,elements:h}=e,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:A=!0,...C}=qi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const I=Xi(s),M=gi(l),k=Xi(l)===l,P=await(u.isRTL==null?void 0:u.isRTL(h.floating)),L=b||(k||!A?[Vp(l)]:mL(l)),O=R!=="none";!b&&O&&L.push(...bL(l,A,R,P));const H=[l,...L],Y=await Jf(e,C),J=[];let K=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&J.push(Y[I]),g){const oe=gL(s,a,P);J.push(Y[oe[0]],Y[oe[1]])}if(K=[...K,{placement:s,overflows:J}],!J.every(oe=>oe<=0)){var Z,ae;const oe=(((Z=i.flip)==null?void 0:Z.index)||0)+1,Re=H[oe];if(Re&&(!(g==="alignment"?M!==gi(Re):!1)||K.every(he=>he.overflows[0]>0&&gi(he.placement)===M)))return{data:{index:oe,overflows:K},reset:{placement:Re}};let ie=(ae=K.filter(Ae=>Ae.overflows[0]<=0).sort((Ae,he)=>Ae.overflows[1]-he.overflows[1])[0])==null?void 0:ae.placement;if(!ie)switch(w){case"bestFit":{var _e;const Ae=(_e=K.filter(he=>{if(O){const $e=gi(he.placement);return $e===M||$e==="y"}return!0}).map(he=>[he.placement,he.overflows.filter($e=>$e>0).reduce(($e,D)=>$e+D,0)]).sort((he,$e)=>he[1]-$e[1])[0])==null?void 0:_e[0];Ae&&(ie=Ae);break}case"initialPlacement":ie=l;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function B2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function L2(t){return hL.some(e=>t[e]>=0)}const SL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=qi(t,e);switch(r){case"referenceHidden":{const i=await Jf(e,{...s,elementContext:"reference"}),a=B2(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:L2(a)}}}case"escaped":{const i=await Jf(e,{...s,altBoundary:!0}),a=B2(i,n.floating);return{data:{escapedOffsets:a,escaped:L2(a)}}}default:return{}}}}};async function TL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Xi(n),l=hu(n),u=gi(n)==="y",h=["left","top"].includes(a)?-1:1,d=i&&u?-1:1,g=qi(e,t);let{mainAxis:b,crossAxis:w,alignmentAxis:R}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof R=="number"&&(w=l==="end"?R*-1:R),u?{x:w*d,y:b*h}:{x:b*h,y:w*d}}const EL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,u=await TL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:a}}}}},AL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:C=>{let{x:I,y:M}=C;return{x:I,y:M}}},...u}=qi(t,e),h={x:n,y:r},d=await Jf(e,u),g=gi(Xi(s)),b=s0(g);let w=h[b],R=h[g];if(i){const C=b==="y"?"top":"left",I=b==="y"?"bottom":"right",M=w+d[C],k=w-d[I];w=Ev(M,w,k)}if(a){const C=g==="y"?"top":"left",I=g==="y"?"bottom":"right",M=R+d[C],k=R-d[I];R=Ev(M,R,k)}const A=l.fn({...e,[b]:w,[g]:R});return{...A,data:{x:A.x-n,y:A.y-r,enabled:{[b]:i,[g]:a}}}}}},RL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=qi(t,e),d={x:n,y:r},g=gi(s),b=s0(g);let w=d[b],R=d[g];const A=qi(l,e),C=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(u){const k=b==="y"?"height":"width",P=i.reference[b]-i.floating[k]+C.mainAxis,L=i.reference[b]+i.reference[k]-C.mainAxis;w<P?w=P:w>L&&(w=L)}if(h){var I,M;const k=b==="y"?"width":"height",P=["top","left"].includes(Xi(s)),L=i.reference[g]-i.floating[k]+(P&&((I=a.offset)==null?void 0:I[g])||0)+(P?0:C.crossAxis),O=i.reference[g]+i.reference[k]+(P?0:((M=a.offset)==null?void 0:M[g])||0)-(P?C.crossAxis:0);R<L?R=L:R>O&&(R=O)}return{[b]:w,[g]:R}}}},CL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:u=()=>{},...h}=qi(t,e),d=await Jf(e,h),g=Xi(s),b=hu(s),w=gi(s)==="y",{width:R,height:A}=i.floating;let C,I;g==="top"||g==="bottom"?(C=g,I=b===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(I=g,C=b==="end"?"top":"bottom");const M=A-d.top-d.bottom,k=R-d.left-d.right,P=ea(A-d[C],M),L=ea(R-d[I],k),O=!e.middlewareData.shift;let H=P,Y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(Y=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(H=M),O&&!b){const K=ls(d.left,0),Z=ls(d.right,0),ae=ls(d.top,0),_e=ls(d.bottom,0);w?Y=R-2*(K!==0||Z!==0?K+Z:ls(d.left,d.right)):H=A-2*(ae!==0||_e!==0?ae+_e:ls(d.top,d.bottom))}await u({...e,availableWidth:Y,availableHeight:H});const J=await a.getDimensions(l.floating);return R!==J.width||A!==J.height?{reset:{rects:!0}}:{}}}};function Gg(){return typeof window<"u"}function du(t){return nk(t)?(t.nodeName||"").toLowerCase():"#document"}function hs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _i(t){var e;return(e=(nk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nk(t){return Gg()?t instanceof Node||t instanceof hs(t).Node:!1}function Ks(t){return Gg()?t instanceof Element||t instanceof hs(t).Element:!1}function bi(t){return Gg()?t instanceof HTMLElement||t instanceof hs(t).HTMLElement:!1}function U2(t){return!Gg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof hs(t).ShadowRoot}function bh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Zs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function kL(t){return["table","td","th"].includes(du(t))}function Jg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function a0(t){const e=l0(),n=Ks(t)?Zs(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function NL(t){let e=ta(t);for(;bi(e)&&!Xc(e);){if(a0(e))return e;if(Jg(e))return null;e=ta(e)}return null}function l0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xc(t){return["html","body","#document"].includes(du(t))}function Zs(t){return hs(t).getComputedStyle(t)}function em(t){return Ks(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ta(t){if(du(t)==="html")return t;const e=t.assignedSlot||t.parentNode||U2(t)&&t.host||_i(t);return U2(e)?e.host:e}function rk(t){const e=ta(t);return Xc(e)?t.ownerDocument?t.ownerDocument.body:t.body:bi(e)&&bh(e)?e:rk(e)}function eh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=rk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=hs(s);if(i){const l=Rv(a);return e.concat(a,a.visualViewport||[],bh(s)?s:[],l&&n?eh(l):[])}return e.concat(s,eh(s,[],n))}function Rv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sk(t){const e=Zs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=bi(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=zp(n)!==i||zp(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function c0(t){return Ks(t)?t:t.contextElement}function Rc(t){const e=c0(t);if(!bi(e))return yi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=sk(e);let a=(i?zp(n.width):n.width)/r,l=(i?zp(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const ML=yi(0);function ik(t){const e=hs(t);return!l0()||!e.visualViewport?ML:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function IL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==hs(t)?!1:e}function sl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=c0(t);let a=yi(1);e&&(r?Ks(r)&&(a=Rc(r)):a=Rc(t));const l=IL(i,n,r)?ik(i):yi(0);let u=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,d=s.width/a.x,g=s.height/a.y;if(i){const b=hs(i),w=r&&Ks(r)?hs(r):r;let R=b,A=Rv(R);for(;A&&r&&w!==R;){const C=Rc(A),I=A.getBoundingClientRect(),M=Zs(A),k=I.left+(A.clientLeft+parseFloat(M.paddingLeft))*C.x,P=I.top+(A.clientTop+parseFloat(M.paddingTop))*C.y;u*=C.x,h*=C.y,d*=C.x,g*=C.y,u+=k,h+=P,R=hs(A),A=Rv(R)}}return $p({width:d,height:g,x:u,y:h})}function u0(t,e){const n=em(t).scrollLeft;return e?e.left+n:sl(_i(t)).left+n}function ok(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:u0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function OL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=_i(r),l=e?Jg(e.floating):!1;if(r===a||l&&i)return n;let u={scrollLeft:0,scrollTop:0},h=yi(1);const d=yi(0),g=bi(r);if((g||!g&&!i)&&((du(r)!=="body"||bh(a))&&(u=em(r)),bi(r))){const w=sl(r);h=Rc(r),d.x=w.x+r.clientLeft,d.y=w.y+r.clientTop}const b=a&&!g&&!i?ok(a,u,!0):yi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+d.x+b.x,y:n.y*h.y-u.scrollTop*h.y+d.y+b.y}}function PL(t){return Array.from(t.getClientRects())}function DL(t){const e=_i(t),n=em(t),r=t.ownerDocument.body,s=ls(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ls(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+u0(t);const l=-n.scrollTop;return Zs(r).direction==="rtl"&&(a+=ls(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function jL(t,e){const n=hs(t),r=_i(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,u=0;if(s){i=s.width,a=s.height;const h=l0();(!h||h&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}return{width:i,height:a,x:l,y:u}}function FL(t,e){const n=sl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=bi(t)?Rc(t):yi(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,u=s*i.x,h=r*i.y;return{width:a,height:l,x:u,y:h}}function z2(t,e,n){let r;if(e==="viewport")r=jL(t,n);else if(e==="document")r=DL(_i(t));else if(Ks(e))r=FL(e,n);else{const s=ik(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return $p(r)}function ak(t,e){const n=ta(t);return n===e||!Ks(n)||Xc(n)?!1:Zs(n).position==="fixed"||ak(n,e)}function BL(t,e){const n=e.get(t);if(n)return n;let r=eh(t,[],!1).filter(l=>Ks(l)&&du(l)!=="body"),s=null;const i=Zs(t).position==="fixed";let a=i?ta(t):t;for(;Ks(a)&&!Xc(a);){const l=Zs(a),u=a0(a);!u&&l.position==="fixed"&&(s=null),(i?!u&&!s:!u&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bh(a)&&!u&&ak(t,a))?r=r.filter(d=>d!==a):s=l,a=ta(a)}return e.set(t,r),r}function LL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Jg(e)?[]:BL(e,this._c):[].concat(n),r],l=a[0],u=a.reduce((h,d)=>{const g=z2(e,d,s);return h.top=ls(g.top,h.top),h.right=ea(g.right,h.right),h.bottom=ea(g.bottom,h.bottom),h.left=ls(g.left,h.left),h},z2(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function UL(t){const{width:e,height:n}=sk(t);return{width:e,height:n}}function zL(t,e,n){const r=bi(e),s=_i(e),i=n==="fixed",a=sl(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const u=yi(0);function h(){u.x=u0(s)}if(r||!r&&!i)if((du(e)!=="body"||bh(s))&&(l=em(e)),r){const w=sl(e,!0,i,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else s&&h();i&&!r&&s&&h();const d=s&&!r&&!i?ok(s,l):yi(0),g=a.left+l.scrollLeft-u.x-d.x,b=a.top+l.scrollTop-u.y-d.y;return{x:g,y:b,width:a.width,height:a.height}}function Hb(t){return Zs(t).position==="static"}function V2(t,e){if(!bi(t)||Zs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _i(t)===n&&(n=n.ownerDocument.body),n}function lk(t,e){const n=hs(t);if(Jg(t))return n;if(!bi(t)){let s=ta(t);for(;s&&!Xc(s);){if(Ks(s)&&!Hb(s))return s;s=ta(s)}return n}let r=V2(t,e);for(;r&&kL(r)&&Hb(r);)r=V2(r,e);return r&&Xc(r)&&Hb(r)&&!a0(r)?n:r||NL(t)||n}const VL=async function(t){const e=this.getOffsetParent||lk,n=this.getDimensions,r=await n(t.floating);return{reference:zL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $L(t){return Zs(t).direction==="rtl"}const HL={convertOffsetParentRelativeRectToViewportRelativeRect:OL,getDocumentElement:_i,getClippingRect:LL,getOffsetParent:lk,getElementRects:VL,getClientRects:PL,getDimensions:UL,getScale:Rc,isElement:Ks,isRTL:$L};function ck(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function WL(t,e){let n=null,r;const s=_i(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),i();const h=t.getBoundingClientRect(),{left:d,top:g,width:b,height:w}=h;if(l||e(),!b||!w)return;const R=Zd(g),A=Zd(s.clientWidth-(d+b)),C=Zd(s.clientHeight-(g+w)),I=Zd(d),k={rootMargin:-R+"px "+-A+"px "+-C+"px "+-I+"px",threshold:ls(0,ea(1,u))||1};let P=!0;function L(O){const H=O[0].intersectionRatio;if(H!==u){if(!P)return a();H?a(!1,H):r=setTimeout(()=>{a(!1,1e-7)},1e3)}H===1&&!ck(h,t.getBoundingClientRect())&&a(),P=!1}try{n=new IntersectionObserver(L,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,k)}n.observe(t)}return a(!0),i}function qL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=c0(t),d=s||i?[...h?eh(h):[],...eh(e)]:[];d.forEach(I=>{s&&I.addEventListener("scroll",n,{passive:!0}),i&&I.addEventListener("resize",n)});const g=h&&l?WL(h,n):null;let b=-1,w=null;a&&(w=new ResizeObserver(I=>{let[M]=I;M&&M.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var k;(k=w)==null||k.observe(e)})),n()}),h&&!u&&w.observe(h),w.observe(e));let R,A=u?sl(t):null;u&&C();function C(){const I=sl(t);A&&!ck(A,I)&&n(),A=I,R=requestAnimationFrame(C)}return n(),()=>{var I;d.forEach(M=>{s&&M.removeEventListener("scroll",n),i&&M.removeEventListener("resize",n)}),g==null||g(),(I=w)==null||I.disconnect(),w=null,u&&cancelAnimationFrame(R)}}const XL=EL,YL=AL,KL=wL,ZL=CL,QL=SL,$2=_L,GL=RL,JL=(t,e,n)=>{const r=new Map,s={platform:HL,...n},i={...s.platform,_c:r};return vL(t,e,{...s,platform:i})};var eU=typeof document<"u",tU=function(){},Ep=eU?N.useLayoutEffect:tU;function Hp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Hp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function uk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function H2(t,e){const n=uk(t);return Math.round(e*n)/n}function Wb(t){const e=N.useRef(t);return Ep(()=>{e.current=t}),e}function nU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:u,open:h}=t,[d,g]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,w]=N.useState(r);Hp(b,r)||w(r);const[R,A]=N.useState(null),[C,I]=N.useState(null),M=N.useCallback(he=>{he!==O.current&&(O.current=he,A(he))},[]),k=N.useCallback(he=>{he!==H.current&&(H.current=he,I(he))},[]),P=i||R,L=a||C,O=N.useRef(null),H=N.useRef(null),Y=N.useRef(d),J=u!=null,K=Wb(u),Z=Wb(s),ae=Wb(h),_e=N.useCallback(()=>{if(!O.current||!H.current)return;const he={placement:e,strategy:n,middleware:b};Z.current&&(he.platform=Z.current),JL(O.current,H.current,he).then($e=>{const D={...$e,isPositioned:ae.current!==!1};oe.current&&!Hp(Y.current,D)&&(Y.current=D,cu.flushSync(()=>{g(D)}))})},[b,e,n,Z,ae]);Ep(()=>{h===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,g(he=>({...he,isPositioned:!1})))},[h]);const oe=N.useRef(!1);Ep(()=>(oe.current=!0,()=>{oe.current=!1}),[]),Ep(()=>{if(P&&(O.current=P),L&&(H.current=L),P&&L){if(K.current)return K.current(P,L,_e);_e()}},[P,L,_e,K,J]);const Re=N.useMemo(()=>({reference:O,floating:H,setReference:M,setFloating:k}),[M,k]),ie=N.useMemo(()=>({reference:P,floating:L}),[P,L]),Ae=N.useMemo(()=>{const he={position:n,left:0,top:0};if(!ie.floating)return he;const $e=H2(ie.floating,d.x),D=H2(ie.floating,d.y);return l?{...he,transform:"translate("+$e+"px, "+D+"px)",...uk(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$e,top:D}},[n,l,ie.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:_e,refs:Re,elements:ie,floatingStyles:Ae}),[d,_e,Re,ie,Ae])}const rU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?$2({element:r.current,padding:s}).fn(n):{}:r?$2({element:r,padding:s}).fn(n):{}}}},sU=(t,e)=>({...XL(t),options:[t,e]}),iU=(t,e)=>({...YL(t),options:[t,e]}),oU=(t,e)=>({...GL(t),options:[t,e]}),aU=(t,e)=>({...KL(t),options:[t,e]}),lU=(t,e)=>({...ZL(t),options:[t,e]}),cU=(t,e)=>({...QL(t),options:[t,e]}),uU=(t,e)=>({...rU(t),options:[t,e]});var fU="Arrow",fk=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return m.jsx(mt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});fk.displayName=fU;var hU=fk;function dU(t){const[e,n]=N.useState(void 0);return gr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,l=h.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var f0="Popper",[hk,tm]=Ki(f0),[pU,dk]=hk(f0),pk=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return m.jsx(pU,{scope:e,anchor:r,onAnchorChange:s,children:n})};pk.displayName=f0;var gk="PopperAnchor",mk=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=dk(gk,n),a=N.useRef(null),l=Tn(e,a);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:m.jsx(mt.div,{...s,ref:l})});mk.displayName=gk;var h0="PopperContent",[gU,mU]=hk(h0),yk=N.forwardRef((t,e)=>{var ue,ce,Me,ze,Ue,Ke;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:d=0,sticky:g="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:R,...A}=t,C=dk(h0,n),[I,M]=N.useState(null),k=Tn(e,Ze=>M(Ze)),[P,L]=N.useState(null),O=dU(P),H=(O==null?void 0:O.width)??0,Y=(O==null?void 0:O.height)??0,J=r+(i!=="center"?"-"+i:""),K=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Z=Array.isArray(h)?h:[h],ae=Z.length>0,_e={padding:K,boundary:Z.filter(bU),altBoundary:ae},{refs:oe,floatingStyles:Re,placement:ie,isPositioned:Ae,middlewareData:he}=nU({strategy:"fixed",placement:J,whileElementsMounted:(...Ze)=>qL(...Ze,{animationFrame:w==="always"}),elements:{reference:C.anchor},middleware:[sU({mainAxis:s+Y,alignmentAxis:a}),u&&iU({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?oU():void 0,..._e}),u&&aU({..._e}),lU({..._e,apply:({elements:Ze,rects:ot,availableWidth:kt,availableHeight:Et})=>{const{width:Ot,height:Ht}=ot.reference,en=Ze.floating.style;en.setProperty("--radix-popper-available-width",`${kt}px`),en.setProperty("--radix-popper-available-height",`${Et}px`),en.setProperty("--radix-popper-anchor-width",`${Ot}px`),en.setProperty("--radix-popper-anchor-height",`${Ht}px`)}}),P&&uU({element:P,padding:l}),xU({arrowWidth:H,arrowHeight:Y}),b&&cU({strategy:"referenceHidden",..._e})]}),[$e,D]=vk(ie),te=ks(R);gr(()=>{Ae&&(te==null||te())},[Ae,te]);const G=(ue=he.arrow)==null?void 0:ue.x,F=(ce=he.arrow)==null?void 0:ce.y,ge=((Me=he.arrow)==null?void 0:Me.centerOffset)!==0,[ee,we]=N.useState();return gr(()=>{I&&we(window.getComputedStyle(I).zIndex)},[I]),m.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...Re,transform:Ae?Re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(ze=he.transformOrigin)==null?void 0:ze.x,(Ue=he.transformOrigin)==null?void 0:Ue.y].join(" "),...((Ke=he.hide)==null?void 0:Ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(gU,{scope:n,placedSide:$e,onArrowChange:L,arrowX:G,arrowY:F,shouldHideArrow:ge,children:m.jsx(mt.div,{"data-side":$e,"data-align":D,...A,ref:k,style:{...A.style,animation:Ae?void 0:"none"}})})})});yk.displayName=h0;var bk="PopperArrow",yU={top:"bottom",right:"left",bottom:"top",left:"right"},xk=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=mU(bk,r),a=yU[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(hU,{...s,ref:n,style:{...s.style,display:"block"}})})});xk.displayName=bk;function bU(t){return t!==null}var xU=t=>({name:"transformOrigin",options:t,fn(e){var C,I,M;const{placement:n,rects:r,middlewareData:s}=e,a=((C=s.arrow)==null?void 0:C.centerOffset)!==0,l=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[h,d]=vk(n),g={start:"0%",center:"50%",end:"100%"}[d],b=(((I=s.arrow)==null?void 0:I.x)??0)+l/2,w=(((M=s.arrow)==null?void 0:M.y)??0)+u/2;let R="",A="";return h==="bottom"?(R=a?g:`${b}px`,A=`${-u}px`):h==="top"?(R=a?g:`${b}px`,A=`${r.floating.height+u}px`):h==="right"?(R=`${-u}px`,A=a?g:`${w}px`):h==="left"&&(R=`${r.floating.width+u}px`,A=a?g:`${w}px`),{data:{x:R,y:A}}}});function vk(t){const[e,n="center"]=t.split("-");return[e,n]}var _k=pk,d0=mk,wk=yk,Sk=xk;function vU(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var _U=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Jl=new WeakMap,Qd=new WeakMap,Gd={},qb=0,Tk=function(t){return t&&(t.host||Tk(t.parentNode))},wU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Tk(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},SU=function(t,e,n,r){var s=wU(e,Array.isArray(t)?t:[t]);Gd[n]||(Gd[n]=new WeakMap);var i=Gd[n],a=[],l=new Set,u=new Set(s),h=function(g){!g||l.has(g)||(l.add(g),h(g.parentNode))};s.forEach(h);var d=function(g){!g||u.has(g)||Array.prototype.forEach.call(g.children,function(b){if(l.has(b))d(b);else try{var w=b.getAttribute(r),R=w!==null&&w!=="false",A=(Jl.get(b)||0)+1,C=(i.get(b)||0)+1;Jl.set(b,A),i.set(b,C),a.push(b),A===1&&R&&Qd.set(b,!0),C===1&&b.setAttribute(n,"true"),R||b.setAttribute(r,"true")}catch(I){console.error("aria-hidden: cannot operate on ",b,I)}})};return d(e),l.clear(),qb++,function(){a.forEach(function(g){var b=Jl.get(g)-1,w=i.get(g)-1;Jl.set(g,b),i.set(g,w),b||(Qd.has(g)||g.removeAttribute(r),Qd.delete(g)),w||g.removeAttribute(n)}),qb--,qb||(Jl=new WeakMap,Jl=new WeakMap,Qd=new WeakMap,Gd={})}},p0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=_U(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),SU(r,s,n,"aria-hidden")):function(){return null}},di=function(){return di=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},di.apply(this,arguments)};function Ek(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function TU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ap="right-scroll-bar-position",Rp="width-before-scroll-bar",EU="with-scroll-bars-hidden",AU="--removed-body-scroll-bar-size";function Xb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function RU(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var CU=typeof window<"u"?N.useLayoutEffect:N.useEffect,W2=new WeakMap;function kU(t,e){var n=RU(null,function(r){return t.forEach(function(s){return Xb(s,r)})});return CU(function(){var r=W2.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Xb(l,null)}),i.forEach(function(l){s.has(l)||Xb(l,a)})}W2.set(n,t)},[t]),n}function NU(t){return t}function MU(t,e){e===void 0&&(e=NU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var u=function(){var d=a;a=[],d.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(d){a.push(d),h()},filter:function(d){return a=a.filter(d),n}}}};return s}function IU(t){t===void 0&&(t={});var e=MU(null);return e.options=di({async:!0,ssr:!1},t),e}var Ak=function(t){var e=t.sideCar,n=Ek(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,di({},n))};Ak.isSideCarExport=!0;function OU(t,e){return t.useMedium(e),Ak}var Rk=IU(),Yb=function(){},nm=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:Yb,onWheelCapture:Yb,onTouchMoveCapture:Yb}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,u=t.className,h=t.removeScrollBar,d=t.enabled,g=t.shards,b=t.sideCar,w=t.noRelative,R=t.noIsolation,A=t.inert,C=t.allowPinchZoom,I=t.as,M=I===void 0?"div":I,k=t.gapMode,P=Ek(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=b,O=kU([n,e]),H=di(di({},P),s);return N.createElement(N.Fragment,null,d&&N.createElement(L,{sideCar:Rk,removeScrollBar:h,shards:g,noRelative:w,noIsolation:R,inert:A,setCallbacks:i,allowPinchZoom:!!C,lockRef:n,gapMode:k}),a?N.cloneElement(N.Children.only(l),di(di({},H),{ref:O})):N.createElement(M,di({},H,{className:u,ref:O}),l))});nm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nm.classNames={fullWidth:Rp,zeroRight:Ap};var PU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function DU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=PU();return e&&t.setAttribute("nonce",e),t}function jU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function FU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var BU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=DU())&&(jU(e,n),FU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LU=function(){var t=BU();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Ck=function(){var t=LU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},UU={left:0,top:0,right:0,gap:0},Kb=function(t){return parseInt(t||"",10)||0},zU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Kb(n),Kb(r),Kb(s)]},VU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return UU;var e=zU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},$U=Ck(),Cc="data-scroll-locked",HU=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(EU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Cc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ap,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rp,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ap," .").concat(Ap,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rp," .").concat(Rp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Cc,`] {
    `).concat(AU,": ").concat(l,`px;
  }
`)},q2=function(){var t=parseInt(document.body.getAttribute(Cc)||"0",10);return isFinite(t)?t:0},WU=function(){N.useEffect(function(){return document.body.setAttribute(Cc,(q2()+1).toString()),function(){var t=q2()-1;t<=0?document.body.removeAttribute(Cc):document.body.setAttribute(Cc,t.toString())}},[])},qU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;WU();var i=N.useMemo(function(){return VU(s)},[s]);return N.createElement($U,{styles:HU(i,!e,s,n?"":"!important")})},Cv=!1;if(typeof window<"u")try{var Jd=Object.defineProperty({},"passive",{get:function(){return Cv=!0,!0}});window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{Cv=!1}var ec=Cv?{passive:!1}:!1,XU=function(t){return t.tagName==="TEXTAREA"},kk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!XU(t)&&n[e]==="visible")},YU=function(t){return kk(t,"overflowY")},KU=function(t){return kk(t,"overflowX")},X2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Nk(t,r);if(s){var i=Mk(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ZU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},QU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Nk=function(t,e){return t==="v"?YU(e):KU(e)},Mk=function(t,e){return t==="v"?ZU(e):QU(e)},GU=function(t,e){return t==="h"&&e==="rtl"?-1:1},JU=function(t,e,n,r,s){var i=GU(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,u=e.contains(l),h=!1,d=a>0,g=0,b=0;do{if(!l)break;var w=Mk(t,l),R=w[0],A=w[1],C=w[2],I=A-C-i*R;(R||I)&&Nk(t,l)&&(g+=I,b+=R);var M=l.parentNode;l=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(d&&Math.abs(g)<1||!d&&Math.abs(b)<1)&&(h=!0),h},ep=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Y2=function(t){return[t.deltaX,t.deltaY]},K2=function(t){return t&&"current"in t?t.current:t},e8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},t8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},n8=0,tc=[];function r8(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(n8++)[0],i=N.useState(Ck)[0],a=N.useRef(t);N.useEffect(function(){a.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var A=TU([t.lockRef.current],(t.shards||[]).map(K2),!0).filter(Boolean);return A.forEach(function(C){return C.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),A.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(A,C){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var I=ep(A),M=n.current,k="deltaX"in A?A.deltaX:M[0]-I[0],P="deltaY"in A?A.deltaY:M[1]-I[1],L,O=A.target,H=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in A&&H==="h"&&O.type==="range")return!1;var Y=X2(H,O);if(!Y)return!0;if(Y?L=H:(L=H==="v"?"h":"v",Y=X2(H,O)),!Y)return!1;if(!r.current&&"changedTouches"in A&&(k||P)&&(r.current=L),!L)return!0;var J=r.current||L;return JU(J,C,A,J==="h"?k:P)},[]),u=N.useCallback(function(A){var C=A;if(!(!tc.length||tc[tc.length-1]!==i)){var I="deltaY"in C?Y2(C):ep(C),M=e.current.filter(function(L){return L.name===C.type&&(L.target===C.target||C.target===L.shadowParent)&&e8(L.delta,I)})[0];if(M&&M.should){C.cancelable&&C.preventDefault();return}if(!M){var k=(a.current.shards||[]).map(K2).filter(Boolean).filter(function(L){return L.contains(C.target)}),P=k.length>0?l(C,k[0]):!a.current.noIsolation;P&&C.cancelable&&C.preventDefault()}}},[]),h=N.useCallback(function(A,C,I,M){var k={name:A,delta:C,target:I,should:M,shadowParent:s8(I)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),d=N.useCallback(function(A){n.current=ep(A),r.current=void 0},[]),g=N.useCallback(function(A){h(A.type,Y2(A),A.target,l(A,t.lockRef.current))},[]),b=N.useCallback(function(A){h(A.type,ep(A),A.target,l(A,t.lockRef.current))},[]);N.useEffect(function(){return tc.push(i),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:b}),document.addEventListener("wheel",u,ec),document.addEventListener("touchmove",u,ec),document.addEventListener("touchstart",d,ec),function(){tc=tc.filter(function(A){return A!==i}),document.removeEventListener("wheel",u,ec),document.removeEventListener("touchmove",u,ec),document.removeEventListener("touchstart",d,ec)}},[]);var w=t.removeScrollBar,R=t.inert;return N.createElement(N.Fragment,null,R?N.createElement(i,{styles:t8(s)}):null,w?N.createElement(qU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function s8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const i8=OU(Rk,r8);var rm=N.forwardRef(function(t,e){return N.createElement(nm,di({},t,{ref:e,sideCar:i8}))});rm.classNames=nm.classNames;var o8=[" ","Enter","ArrowUp","ArrowDown"],a8=[" ","Enter"],il="Select",[sm,im,l8]=W_(il),[pu,zie]=Ki(il,[l8,tm]),om=tm(),[c8,aa]=pu(il),[u8,f8]=pu(il),Ik=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:u,dir:h,name:d,autoComplete:g,disabled:b,required:w,form:R}=t,A=om(e),[C,I]=N.useState(null),[M,k]=N.useState(null),[P,L]=N.useState(!1),O=t0(h),[H,Y]=rl({prop:r,defaultProp:s??!1,onChange:i,caller:il}),[J,K]=rl({prop:a,defaultProp:l,onChange:u,caller:il}),Z=N.useRef(null),ae=C?R||!!C.closest("form"):!0,[_e,oe]=N.useState(new Set),Re=Array.from(_e).map(ie=>ie.props.value).join(";");return m.jsx(_k,{...A,children:m.jsxs(c8,{required:w,scope:e,trigger:C,onTriggerChange:I,valueNode:M,onValueNodeChange:k,valueNodeHasChildren:P,onValueNodeHasChildrenChange:L,contentId:Fr(),value:J,onValueChange:K,open:H,onOpenChange:Y,dir:O,triggerPointerDownPosRef:Z,disabled:b,children:[m.jsx(sm.Provider,{scope:e,children:m.jsx(u8,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(ie=>{oe(Ae=>new Set(Ae).add(ie))},[]),onNativeOptionRemove:N.useCallback(ie=>{oe(Ae=>{const he=new Set(Ae);return he.delete(ie),he})},[]),children:n})}),ae?m.jsxs(eN,{"aria-hidden":!0,required:w,tabIndex:-1,name:d,autoComplete:g,value:J,onChange:ie=>K(ie.target.value),disabled:b,form:R,children:[J===void 0?m.jsx("option",{value:""}):null,Array.from(_e)]},Re):null]})})};Ik.displayName=il;var Ok="SelectTrigger",Pk=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=om(n),a=aa(Ok,n),l=a.disabled||r,u=Tn(e,a.onTriggerChange),h=im(n),d=N.useRef("touch"),[g,b,w]=nN(A=>{const C=h().filter(k=>!k.disabled),I=C.find(k=>k.value===a.value),M=rN(C,A,I);M!==void 0&&a.onValueChange(M.value)}),R=A=>{l||(a.onOpenChange(!0),w()),A&&(a.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return m.jsx(d0,{asChild:!0,...i,children:m.jsx(mt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":tN(a.value)?"":void 0,...s,ref:u,onClick:vt(s.onClick,A=>{A.currentTarget.focus(),d.current!=="mouse"&&R(A)}),onPointerDown:vt(s.onPointerDown,A=>{d.current=A.pointerType;const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(R(A),A.preventDefault())}),onKeyDown:vt(s.onKeyDown,A=>{const C=g.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&b(A.key),!(C&&A.key===" ")&&o8.includes(A.key)&&(R(),A.preventDefault())})})})});Pk.displayName=Ok;var Dk="SelectValue",jk=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,u=aa(Dk,n),{onValueNodeHasChildrenChange:h}=u,d=i!==void 0,g=Tn(e,u.onValueNodeChange);return gr(()=>{h(d)},[h,d]),m.jsx(mt.span,{...l,ref:g,style:{pointerEvents:"none"},children:tN(u.value)?m.jsx(m.Fragment,{children:a}):i})});jk.displayName=Dk;var h8="SelectIcon",Fk=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return m.jsx(mt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Fk.displayName=h8;var d8="SelectPortal",Bk=t=>m.jsx(gh,{asChild:!0,...t});Bk.displayName=d8;var ol="SelectContent",Lk=N.forwardRef((t,e)=>{const n=aa(ol,t.__scopeSelect),[r,s]=N.useState();if(gr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?cu.createPortal(m.jsx(Uk,{scope:t.__scopeSelect,children:m.jsx(sm.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),i):null}return m.jsx(zk,{...t,ref:e})});Lk.displayName=ol;var zs=10,[Uk,la]=pu(ol),p8="SelectContentImpl",g8=nl("SelectContent.RemoveScroll"),zk=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:w,sticky:R,hideWhenDetached:A,avoidCollisions:C,...I}=t,M=aa(ol,n),[k,P]=N.useState(null),[L,O]=N.useState(null),H=Tn(e,ue=>P(ue)),[Y,J]=N.useState(null),[K,Z]=N.useState(null),ae=im(n),[_e,oe]=N.useState(!1),Re=N.useRef(!1);N.useEffect(()=>{if(k)return p0(k)},[k]),r0();const ie=N.useCallback(ue=>{const[ce,...Me]=ae().map(Ke=>Ke.ref.current),[ze]=Me.slice(-1),Ue=document.activeElement;for(const Ke of ue)if(Ke===Ue||(Ke==null||Ke.scrollIntoView({block:"nearest"}),Ke===ce&&L&&(L.scrollTop=0),Ke===ze&&L&&(L.scrollTop=L.scrollHeight),Ke==null||Ke.focus(),document.activeElement!==Ue))return},[ae,L]),Ae=N.useCallback(()=>ie([Y,k]),[ie,Y,k]);N.useEffect(()=>{_e&&Ae()},[_e,Ae]);const{onOpenChange:he,triggerPointerDownPosRef:$e}=M;N.useEffect(()=>{if(k){let ue={x:0,y:0};const ce=ze=>{var Ue,Ke;ue={x:Math.abs(Math.round(ze.pageX)-(((Ue=$e.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round(ze.pageY)-(((Ke=$e.current)==null?void 0:Ke.y)??0))}},Me=ze=>{ue.x<=10&&ue.y<=10?ze.preventDefault():k.contains(ze.target)||he(!1),document.removeEventListener("pointermove",ce),$e.current=null};return $e.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",Me,{capture:!0})}}},[k,he,$e]),N.useEffect(()=>{const ue=()=>he(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[he]);const[D,te]=nN(ue=>{const ce=ae().filter(Ue=>!Ue.disabled),Me=ce.find(Ue=>Ue.ref.current===document.activeElement),ze=rN(ce,ue,Me);ze&&setTimeout(()=>ze.ref.current.focus())}),G=N.useCallback((ue,ce,Me)=>{const ze=!Re.current&&!Me;(M.value!==void 0&&M.value===ce||ze)&&(J(ue),ze&&(Re.current=!0))},[M.value]),F=N.useCallback(()=>k==null?void 0:k.focus(),[k]),ge=N.useCallback((ue,ce,Me)=>{const ze=!Re.current&&!Me;(M.value!==void 0&&M.value===ce||ze)&&Z(ue)},[M.value]),ee=r==="popper"?kv:Vk,we=ee===kv?{side:l,sideOffset:u,align:h,alignOffset:d,arrowPadding:g,collisionBoundary:b,collisionPadding:w,sticky:R,hideWhenDetached:A,avoidCollisions:C}:{};return m.jsx(Uk,{scope:n,content:k,viewport:L,onViewportChange:O,itemRefCallback:G,selectedItem:Y,onItemLeave:F,itemTextRefCallback:ge,focusSelectedItem:Ae,selectedItemText:K,position:r,isPositioned:_e,searchRef:D,children:m.jsx(rm,{as:g8,allowPinchZoom:!0,children:m.jsx(Qg,{asChild:!0,trapped:M.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:vt(s,ue=>{var ce;(ce=M.trigger)==null||ce.focus({preventScroll:!0}),ue.preventDefault()}),children:m.jsx(ph,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:m.jsx(ee,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:ue=>ue.preventDefault(),...I,...we,onPlaced:()=>oe(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...I.style},onKeyDown:vt(I.onKeyDown,ue=>{const ce=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ce&&ue.key.length===1&&te(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let ze=ae().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(ze=ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const Ue=ue.target,Ke=ze.indexOf(Ue);ze=ze.slice(Ke+1)}setTimeout(()=>ie(ze)),ue.preventDefault()}})})})})})})});zk.displayName=p8;var m8="SelectItemAlignedPosition",Vk=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=aa(ol,n),a=la(ol,n),[l,u]=N.useState(null),[h,d]=N.useState(null),g=Tn(e,H=>d(H)),b=im(n),w=N.useRef(!1),R=N.useRef(!0),{viewport:A,selectedItem:C,selectedItemText:I,focusSelectedItem:M}=a,k=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&A&&C&&I){const H=i.trigger.getBoundingClientRect(),Y=h.getBoundingClientRect(),J=i.valueNode.getBoundingClientRect(),K=I.getBoundingClientRect();if(i.dir!=="rtl"){const Ue=K.left-Y.left,Ke=J.left-Ue,Ze=H.left-Ke,ot=H.width+Ze,kt=Math.max(ot,Y.width),Et=window.innerWidth-zs,Ot=M2(Ke,[zs,Math.max(zs,Et-kt)]);l.style.minWidth=ot+"px",l.style.left=Ot+"px"}else{const Ue=Y.right-K.right,Ke=window.innerWidth-J.right-Ue,Ze=window.innerWidth-H.right-Ke,ot=H.width+Ze,kt=Math.max(ot,Y.width),Et=window.innerWidth-zs,Ot=M2(Ke,[zs,Math.max(zs,Et-kt)]);l.style.minWidth=ot+"px",l.style.right=Ot+"px"}const Z=b(),ae=window.innerHeight-zs*2,_e=A.scrollHeight,oe=window.getComputedStyle(h),Re=parseInt(oe.borderTopWidth,10),ie=parseInt(oe.paddingTop,10),Ae=parseInt(oe.borderBottomWidth,10),he=parseInt(oe.paddingBottom,10),$e=Re+ie+_e+he+Ae,D=Math.min(C.offsetHeight*5,$e),te=window.getComputedStyle(A),G=parseInt(te.paddingTop,10),F=parseInt(te.paddingBottom,10),ge=H.top+H.height/2-zs,ee=ae-ge,we=C.offsetHeight/2,ue=C.offsetTop+we,ce=Re+ie+ue,Me=$e-ce;if(ce<=ge){const Ue=Z.length>0&&C===Z[Z.length-1].ref.current;l.style.bottom="0px";const Ke=h.clientHeight-A.offsetTop-A.offsetHeight,Ze=Math.max(ee,we+(Ue?F:0)+Ke+Ae),ot=ce+Ze;l.style.height=ot+"px"}else{const Ue=Z.length>0&&C===Z[0].ref.current;l.style.top="0px";const Ze=Math.max(ge,Re+A.offsetTop+(Ue?G:0)+we)+Me;l.style.height=Ze+"px",A.scrollTop=ce-ge+A.offsetTop}l.style.margin=`${zs}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=ae+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[b,i.trigger,i.valueNode,l,h,A,C,I,i.dir,r]);gr(()=>k(),[k]);const[P,L]=N.useState();gr(()=>{h&&L(window.getComputedStyle(h).zIndex)},[h]);const O=N.useCallback(H=>{H&&R.current===!0&&(k(),M==null||M(),R.current=!1)},[k,M]);return m.jsx(b8,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:w,onScrollButtonChange:O,children:m.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:m.jsx(mt.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Vk.displayName=m8;var y8="SelectPopperPosition",kv=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=zs,...i}=t,a=om(n);return m.jsx(wk,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kv.displayName=y8;var[b8,g0]=pu(ol,{}),Nv="SelectViewport",$k=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=la(Nv,n),a=g0(Nv,n),l=Tn(e,i.onViewportChange),u=N.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(sm.Slot,{scope:n,children:m.jsx(mt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:vt(s.onScroll,h=>{const d=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:b}=a;if(b!=null&&b.current&&g){const w=Math.abs(u.current-d.scrollTop);if(w>0){const R=window.innerHeight-zs*2,A=parseFloat(g.style.minHeight),C=parseFloat(g.style.height),I=Math.max(A,C);if(I<R){const M=I+w,k=Math.min(R,M),P=M-k;g.style.height=k+"px",g.style.bottom==="0px"&&(d.scrollTop=P>0?P:0,g.style.justifyContent="flex-end")}}}u.current=d.scrollTop})})})]})});$k.displayName=Nv;var Hk="SelectGroup",[x8,v8]=pu(Hk),_8=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Fr();return m.jsx(x8,{scope:n,id:s,children:m.jsx(mt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});_8.displayName=Hk;var Wk="SelectLabel",qk=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=v8(Wk,n);return m.jsx(mt.div,{id:s.id,...r,ref:e})});qk.displayName=Wk;var Wp="SelectItem",[w8,Xk]=pu(Wp),Yk=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=aa(Wp,n),u=la(Wp,n),h=l.value===r,[d,g]=N.useState(i??""),[b,w]=N.useState(!1),R=Tn(e,M=>{var k;return(k=u.itemRefCallback)==null?void 0:k.call(u,M,r,s)}),A=Fr(),C=N.useRef("touch"),I=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(w8,{scope:n,value:r,disabled:s,textId:A,isSelected:h,onItemTextChange:N.useCallback(M=>{g(k=>k||((M==null?void 0:M.textContent)??"").trim())},[]),children:m.jsx(sm.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:m.jsx(mt.div,{role:"option","aria-labelledby":A,"data-highlighted":b?"":void 0,"aria-selected":h&&b,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:R,onFocus:vt(a.onFocus,()=>w(!0)),onBlur:vt(a.onBlur,()=>w(!1)),onClick:vt(a.onClick,()=>{C.current!=="mouse"&&I()}),onPointerUp:vt(a.onPointerUp,()=>{C.current==="mouse"&&I()}),onPointerDown:vt(a.onPointerDown,M=>{C.current=M.pointerType}),onPointerMove:vt(a.onPointerMove,M=>{var k;C.current=M.pointerType,s?(k=u.onItemLeave)==null||k.call(u):C.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:vt(a.onPointerLeave,M=>{var k;M.currentTarget===document.activeElement&&((k=u.onItemLeave)==null||k.call(u))}),onKeyDown:vt(a.onKeyDown,M=>{var P;((P=u.searchRef)==null?void 0:P.current)!==""&&M.key===" "||(a8.includes(M.key)&&I(),M.key===" "&&M.preventDefault())})})})})});Yk.displayName=Wp;var kf="SelectItemText",Kk=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=aa(kf,n),l=la(kf,n),u=Xk(kf,n),h=f8(kf,n),[d,g]=N.useState(null),b=Tn(e,I=>g(I),u.onItemTextChange,I=>{var M;return(M=l.itemTextRefCallback)==null?void 0:M.call(l,I,u.value,u.disabled)}),w=d==null?void 0:d.textContent,R=N.useMemo(()=>m.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:A,onNativeOptionRemove:C}=h;return gr(()=>(A(R),()=>C(R)),[A,C,R]),m.jsxs(m.Fragment,{children:[m.jsx(mt.span,{id:u.textId,...i,ref:b}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?cu.createPortal(i.children,a.valueNode):null]})});Kk.displayName=kf;var Zk="SelectItemIndicator",Qk=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Xk(Zk,n).isSelected?m.jsx(mt.span,{"aria-hidden":!0,...r,ref:e}):null});Qk.displayName=Zk;var Mv="SelectScrollUpButton",S8=N.forwardRef((t,e)=>{const n=la(Mv,t.__scopeSelect),r=g0(Mv,t.__scopeSelect),[s,i]=N.useState(!1),a=Tn(e,r.onScrollButtonChange);return gr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollTop>0;i(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?m.jsx(Gk,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});S8.displayName=Mv;var Iv="SelectScrollDownButton",T8=N.forwardRef((t,e)=>{const n=la(Iv,t.__scopeSelect),r=g0(Iv,t.__scopeSelect),[s,i]=N.useState(!1),a=Tn(e,r.onScrollButtonChange);return gr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollHeight-u.clientHeight,d=Math.ceil(u.scrollTop)<h;i(d)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?m.jsx(Gk,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});T8.displayName=Iv;var Gk=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=la("SelectScrollButton",n),a=N.useRef(null),l=im(n),u=N.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return N.useEffect(()=>()=>u(),[u]),gr(()=>{var d;const h=l().find(g=>g.ref.current===document.activeElement);(d=h==null?void 0:h.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),m.jsx(mt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:vt(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:vt(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:vt(s.onPointerLeave,()=>{u()})})}),E8="SelectSeparator",Jk=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m.jsx(mt.div,{"aria-hidden":!0,...r,ref:e})});Jk.displayName=E8;var Ov="SelectArrow",A8=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=om(n),i=aa(Ov,n),a=la(Ov,n);return i.open&&a.position==="popper"?m.jsx(Sk,{...s,...r,ref:e}):null});A8.displayName=Ov;var R8="SelectBubbleInput",eN=N.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=N.useRef(null),i=Tn(r,s),a=vU(e);return N.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&d){const g=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(g)}},[a,e]),m.jsx(mt.select,{...n,style:{...HR,...n.style},ref:i,defaultValue:e})});eN.displayName=R8;function tN(t){return t===""||t===void 0}function nN(t){const e=ks(t),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(a=>{const l=n.current+a;e(l),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(l)},[e]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function rN(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=C8(t,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const u=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function C8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var k8=Ik,sN=Pk,N8=jk,M8=Fk,I8=Bk,iN=Lk,O8=$k,oN=qk,aN=Yk,P8=Kk,D8=Qk,lN=Jk;const Da=k8,ja=N8,Do=N.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(sN,{ref:r,className:Dt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,m.jsx(M8,{asChild:!0,children:m.jsx(Xg,{className:"h-4 w-4 opacity-50"})})]}));Do.displayName=sN.displayName;const jo=N.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>m.jsx(I8,{children:m.jsx(iN,{ref:s,className:Dt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:m.jsx(O8,{className:Dt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));jo.displayName=iN.displayName;const j8=N.forwardRef(({className:t,...e},n)=>m.jsx(oN,{ref:n,className:Dt("py-1.5 pl-8 pr-2 text-sm font-thin",t),...e}));j8.displayName=oN.displayName;const pr=N.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(aN,{ref:r,className:Dt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(D8,{children:m.jsx(pC,{className:"h-4 w-4"})})}),m.jsx(P8,{children:e})]}));pr.displayName=aN.displayName;const F8=N.forwardRef(({className:t,...e},n)=>m.jsx(lN,{ref:n,className:Dt("-mx-1 my-1 h-px bg-muted",t),...e}));F8.displayName=lN.displayName;const m0=N.createContext(null);m0.displayName="PanelGroupContext";const us={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandleId:"data-panel-resize-handle-id"},y0=10,kc=N.useLayoutEffect,Z2=U_.useId,B8=typeof Z2=="function"?Z2:()=>null;let L8=0;function cN(t=null){const e=B8(),n=N.useRef(t||e||null);return n.current===null&&(n.current=""+L8++),t??n.current}function uN({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:a,maxSize:l,minSize:u,onCollapse:h,onExpand:d,onResize:g,order:b,style:w,tagName:R="div",...A}){const C=N.useContext(m0);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:I,expandPanel:M,getPanelSize:k,getPanelStyle:P,groupId:L,isPanelCollapsed:O,reevaluatePanelConstraints:H,registerPanel:Y,resizePanel:J,unregisterPanel:K}=C,Z=cN(a),ae=N.useRef({callbacks:{onCollapse:h,onExpand:d,onResize:g},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:l,minSize:u},id:Z,idIsFromProps:a!==void 0,order:b});N.useRef({didLogMissingDefaultSizeWarning:!1}),kc(()=>{const{callbacks:oe,constraints:Re}=ae.current,ie={...Re};ae.current.id=Z,ae.current.idIsFromProps=a!==void 0,ae.current.order=b,oe.onCollapse=h,oe.onExpand=d,oe.onResize=g,Re.collapsedSize=n,Re.collapsible=r,Re.defaultSize=s,Re.maxSize=l,Re.minSize=u,(ie.collapsedSize!==Re.collapsedSize||ie.collapsible!==Re.collapsible||ie.maxSize!==Re.maxSize||ie.minSize!==Re.minSize)&&H(ae.current,ie)}),kc(()=>{const oe=ae.current;return Y(oe),()=>{K(oe)}},[b,Z,Y,K]),N.useImperativeHandle(i,()=>({collapse:()=>{I(ae.current)},expand:oe=>{M(ae.current,oe)},getId(){return Z},getSize(){return k(ae.current)},isCollapsed(){return O(ae.current)},isExpanded(){return!O(ae.current)},resize:oe=>{J(ae.current,oe)}}),[I,M,k,O,Z,J]);const _e=P(ae.current,s);return N.createElement(R,{...A,children:t,className:e,id:Z,style:{..._e,...w},[us.groupId]:L,[us.panel]:"",[us.panelCollapsible]:r||void 0,[us.panelId]:Z,[us.panelSize]:parseFloat(""+_e.flexGrow).toFixed(1)})}const U8=N.forwardRef((t,e)=>N.createElement(uN,{...t,forwardedRef:e}));uN.displayName="Panel";U8.displayName="forwardRef(Panel)";function fN(t){return t.type==="keydown"}function hN(t){return t.type.startsWith("pointer")}function dN(t){return t.type.startsWith("mouse")}function z8(t){if(hN(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(dN(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function V8(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}const $8=1,H8=2,W8=4,q8=8;V8();let X8=new Map;function Zb(t,e){X8.set(t,e)}function Y8(){const[t,e]=N.useState(0);return N.useCallback(()=>e(n=>n+1),[])}function Wt(t,e){if(!t)throw console.error(e),Error(e)}function al(t,e,n=y0){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function $i(t,e,n=y0){return al(t,e,n)===0}function os(t,e,n){return al(t,e,n)===0}function K8(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],i=e[r];if(!os(s,i,n))return!1}return!0}function xc({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Wt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:i,maxSize:a=100,minSize:l=0}=r;if(al(n,l)<0)if(i){const u=(s+l)/2;al(n,u)<0?n=s:n=l}else n=l;return n=Math.min(a,n),n=parseFloat(n.toFixed(y0)),n}function Nf({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(os(t,0))return e;const a=[...e],[l,u]=r;Wt(l!=null,"Invalid first pivot index"),Wt(u!=null,"Invalid second pivot index");let h=0;if(i==="keyboard"){{const g=t<0?u:l,b=n[g];Wt(b,`Panel constraints not found for index ${g}`);const{collapsedSize:w=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Wt(C!=null,`Previous layout not found for panel index ${g}`),os(C,w)){const I=A-C;al(I,Math.abs(t))>0&&(t=t<0?0-I:I)}}}{const g=t<0?l:u,b=n[g];Wt(b,`No panel constraints found for index ${g}`);const{collapsedSize:w=0,collapsible:R,minSize:A=0}=b;if(R){const C=e[g];if(Wt(C!=null,`Previous layout not found for panel index ${g}`),os(C,A)){const I=C-w;al(I,Math.abs(t))>0&&(t=t<0?0-I:I)}}}}{const g=t<0?1:-1;let b=t<0?u:l,w=0;for(;;){const A=e[b];Wt(A!=null,`Previous layout not found for panel index ${b}`);const I=xc({panelConstraints:n,panelIndex:b,size:100})-A;if(w+=I,b+=g,b<0||b>=n.length)break}const R=Math.min(Math.abs(t),Math.abs(w));t=t<0?0-R:R}{let b=t<0?l:u;for(;b>=0&&b<n.length;){const w=Math.abs(t)-Math.abs(h),R=e[b];Wt(R!=null,`Previous layout not found for panel index ${b}`);const A=R-w,C=xc({panelConstraints:n,panelIndex:b,size:A});if(!os(R,C)&&(h+=R-C,a[b]=C,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(K8(s,a))return s;{const g=t<0?u:l,b=e[g];Wt(b!=null,`Previous layout not found for panel index ${g}`);const w=b+h,R=xc({panelConstraints:n,panelIndex:g,size:w});if(a[g]=R,!os(R,w)){let A=w-R,I=t<0?u:l;for(;I>=0&&I<n.length;){const M=a[I];Wt(M!=null,`Previous layout not found for panel index ${I}`);const k=M+A,P=xc({panelConstraints:n,panelIndex:I,size:k});if(os(M,P)||(A-=P-M,a[I]=P),os(A,0))break;t>0?I--:I++}}}const d=a.reduce((g,b)=>b+g,0);return os(d,100)?a:s}function Z8({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,i=0,a=0;const l=n[0];Wt(l!=null,"No pivot index found"),e.forEach((g,b)=>{const{constraints:w}=g,{maxSize:R=100,minSize:A=0}=w;b===l?(r=A,s=R):(i+=A,a+=R)});const u=Math.min(s,100-i),h=Math.max(r,100-a),d=t[l];return{valueMax:u,valueMin:h,valueNow:d}}function qp(t,e=document){return Array.from(e.querySelectorAll(`[${us.resizeHandleId}][data-panel-group-id="${t}"]`))}function Q8(t,e,n=document){const s=qp(t,n).findIndex(i=>i.getAttribute(us.resizeHandleId)===e);return s??null}function pN(t,e,n){const r=Q8(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function G8(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function gN(t,e=document){if(G8(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function b0(t,e=document){const n=e.querySelector(`[${us.resizeHandleId}="${t}"]`);return n||null}function J8(t,e,n,r=document){var s,i,a,l;const u=b0(e,r),h=qp(t,r),d=u?h.indexOf(u):-1,g=(s=(i=n[d])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,b=(a=(l=n[d+1])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null;return[g,b]}function ez({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:a}){N.useRef({didWarnAboutMissingResizeHandle:!1}),kc(()=>{if(!i)return;const l=qp(n,i);for(let u=0;u<s.length-1;u++){const{valueMax:h,valueMin:d,valueNow:g}=Z8({layout:r,panelsArray:s,pivotIndices:[u,u+1]}),b=l[u];if(b!=null){const w=s[u];Wt(w,`No panel data found for index "${u}"`),b.setAttribute("aria-controls",w.id),b.setAttribute("aria-valuemax",""+Math.round(h)),b.setAttribute("aria-valuemin",""+Math.round(d)),b.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{l.forEach((u,h)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,s,i]),N.useEffect(()=>{if(!i)return;const l=e.current;Wt(l,"Eager values not found");const{panelDataArray:u}=l,h=gN(n,i);Wt(h!=null,`No group found for id "${n}"`);const d=qp(n,i);Wt(d,`No resize handles found for group id "${n}"`);const g=d.map(b=>{const w=b.getAttribute(us.resizeHandleId);Wt(w,"Resize handle element has no handle id attribute");const[R,A]=J8(n,w,u,i);if(R==null||A==null)return()=>{};const C=I=>{if(!I.defaultPrevented)switch(I.key){case"Enter":{I.preventDefault();const M=u.findIndex(k=>k.id===R);if(M>=0){const k=u[M];Wt(k,`No panel data found for index ${M}`);const P=r[M],{collapsedSize:L=0,collapsible:O,minSize:H=0}=k.constraints;if(P!=null&&O){const Y=Nf({delta:os(P,L)?H-L:L-P,initialLayout:r,panelConstraints:u.map(J=>J.constraints),pivotIndices:pN(n,w,i),prevLayout:r,trigger:"keyboard"});r!==Y&&a(Y)}}break}}};return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}});return()=>{g.forEach(b=>b())}},[i,t,e,n,r,s,a])}function Q2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mN(t,e){const n=t==="horizontal",{x:r,y:s}=z8(e);return n?r:s}function tz(t,e,n,r,s){const i=n==="horizontal",a=b0(e,s);Wt(a,`No resize handle element found for id "${e}"`);const l=a.getAttribute(us.groupId);Wt(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const h=mN(n,t),d=gN(l,s);Wt(d,`No group element found for id "${l}"`);const g=d.getBoundingClientRect(),b=i?g.width:g.height;return(h-u)/b*100}function nz(t,e,n,r,s,i){if(fN(t)){const a=n==="horizontal";let l=0;t.shiftKey?l=100:s!=null?l=s:l=10;let u=0;switch(t.key){case"ArrowDown":u=a?0:l;break;case"ArrowLeft":u=a?-l:0;break;case"ArrowRight":u=a?l:0;break;case"ArrowUp":u=a?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:tz(t,e,n,r,i)}function rz({panelDataArray:t}){const e=Array(t.length),n=t.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<t.length;i++){const a=n[i];Wt(a,`Panel constraints not found for index ${i}`);const{defaultSize:l}=a;l!=null&&(r++,e[i]=l,s-=l)}for(let i=0;i<t.length;i++){const a=n[i];Wt(a,`Panel constraints not found for index ${i}`);const{defaultSize:l}=a;if(l!=null)continue;const u=t.length-r,h=s/u;r++,e[i]=h,s-=h}return e}function nc(t,e,n){e.forEach((r,s)=>{const i=t[s];Wt(i,`Panel data not found for index ${s}`);const{callbacks:a,constraints:l,id:u}=i,{collapsedSize:h=0,collapsible:d}=l,g=n[u];if(g==null||r!==g){n[u]=r;const{onCollapse:b,onExpand:w,onResize:R}=a;R&&R(r,g),d&&(b||w)&&(w&&(g==null||$i(g,h))&&!$i(r,h)&&w(),b&&(g==null||!$i(g,h))&&$i(r,h)&&b())}})}function tp(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function sz({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:i=3}){const a=n[s];let l;return a==null?l=t!=null?t.toPrecision(i):"1":r.length===1?l="1":l=a.toPrecision(i),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function iz(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function G2(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function yN(t){return`react-resizable-panels:${t}`}function bN(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=e;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function xN(t,e){try{const n=yN(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function oz(t,e,n){var r,s;const i=(r=xN(t,n))!==null&&r!==void 0?r:{},a=bN(e);return(s=i[a])!==null&&s!==void 0?s:null}function az(t,e,n,r,s){var i;const a=yN(t),l=bN(e),u=(i=xN(t,s))!==null&&i!==void 0?i:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(a,JSON.stringify(u))}catch(h){console.error(h)}}function J2({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((i,a)=>i+a,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!os(r,100)&&n.length>0)for(let i=0;i<e.length;i++){const a=n[i];Wt(a!=null,`No layout data found for index ${i}`);const l=100/r*a;n[i]=l}let s=0;for(let i=0;i<e.length;i++){const a=n[i];Wt(a!=null,`No layout data found for index ${i}`);const l=xc({panelConstraints:e,panelIndex:i,size:a});a!=l&&(s+=a-l,n[i]=l)}if(!os(s,0))for(let i=0;i<e.length;i++){const a=n[i];Wt(a!=null,`No layout data found for index ${i}`);const l=a+s,u=xc({panelConstraints:e,panelIndex:i,size:l});if(a!==u&&(s-=u-a,n[i]=u,os(s,0)))break}return n}const lz=100,Mf={getItem:t=>(G2(Mf),Mf.getItem(t)),setItem:(t,e)=>{G2(Mf),Mf.setItem(t,e)}},eE={};function vN({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:a=null,keyboardResizeBy:l=null,storage:u=Mf,style:h,tagName:d="div",...g}){const b=cN(i),w=N.useRef(null),[R,A]=N.useState(null),[C,I]=N.useState([]),M=Y8(),k=N.useRef({}),P=N.useRef(new Map),L=N.useRef(0),O=N.useRef({autoSaveId:t,direction:r,dragState:R,id:b,keyboardResizeBy:l,onLayout:a,storage:u}),H=N.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1});N.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),N.useImperativeHandle(s,()=>({getId:()=>O.current.id,getLayout:()=>{const{layout:F}=H.current;return F},setLayout:F=>{const{onLayout:ge}=O.current,{layout:ee,panelDataArray:we}=H.current,ue=J2({layout:F,panelConstraints:we.map(ce=>ce.constraints)});Q2(ee,ue)||(I(ue),H.current.layout=ue,ge&&ge(ue),nc(we,ue,k.current))}}),[]),kc(()=>{O.current.autoSaveId=t,O.current.direction=r,O.current.dragState=R,O.current.id=b,O.current.onLayout=a,O.current.storage=u}),ez({committedValuesRef:O,eagerValuesRef:H,groupId:b,layout:C,panelDataArray:H.current.panelDataArray,setLayout:I,panelGroupElement:w.current}),N.useEffect(()=>{const{panelDataArray:F}=H.current;if(t){if(C.length===0||C.length!==F.length)return;let ge=eE[t];ge==null&&(ge=iz(az,lz),eE[t]=ge);const ee=[...F],we=new Map(P.current);ge(t,ee,we,C,u)}},[t,C,u]),N.useEffect(()=>{});const Y=N.useCallback(F=>{const{onLayout:ge}=O.current,{layout:ee,panelDataArray:we}=H.current;if(F.constraints.collapsible){const ue=we.map(Ue=>Ue.constraints),{collapsedSize:ce=0,panelSize:Me,pivotIndices:ze}=Na(we,F,ee);if(Wt(Me!=null,`Panel size not found for panel "${F.id}"`),!$i(Me,ce)){P.current.set(F.id,Me);const Ke=pc(we,F)===we.length-1?Me-ce:ce-Me,Ze=Nf({delta:Ke,initialLayout:ee,panelConstraints:ue,pivotIndices:ze,prevLayout:ee,trigger:"imperative-api"});tp(ee,Ze)||(I(Ze),H.current.layout=Ze,ge&&ge(Ze),nc(we,Ze,k.current))}}},[]),J=N.useCallback((F,ge)=>{const{onLayout:ee}=O.current,{layout:we,panelDataArray:ue}=H.current;if(F.constraints.collapsible){const ce=ue.map(ot=>ot.constraints),{collapsedSize:Me=0,panelSize:ze=0,minSize:Ue=0,pivotIndices:Ke}=Na(ue,F,we),Ze=ge??Ue;if($i(ze,Me)){const ot=P.current.get(F.id),kt=ot!=null&&ot>=Ze?ot:Ze,Ot=pc(ue,F)===ue.length-1?ze-kt:kt-ze,Ht=Nf({delta:Ot,initialLayout:we,panelConstraints:ce,pivotIndices:Ke,prevLayout:we,trigger:"imperative-api"});tp(we,Ht)||(I(Ht),H.current.layout=Ht,ee&&ee(Ht),nc(ue,Ht,k.current))}}},[]),K=N.useCallback(F=>{const{layout:ge,panelDataArray:ee}=H.current,{panelSize:we}=Na(ee,F,ge);return Wt(we!=null,`Panel size not found for panel "${F.id}"`),we},[]),Z=N.useCallback((F,ge)=>{const{panelDataArray:ee}=H.current,we=pc(ee,F);return sz({defaultSize:ge,dragState:R,layout:C,panelData:ee,panelIndex:we})},[R,C]),ae=N.useCallback(F=>{const{layout:ge,panelDataArray:ee}=H.current,{collapsedSize:we=0,collapsible:ue,panelSize:ce}=Na(ee,F,ge);return Wt(ce!=null,`Panel size not found for panel "${F.id}"`),ue===!0&&$i(ce,we)},[]),_e=N.useCallback(F=>{const{layout:ge,panelDataArray:ee}=H.current,{collapsedSize:we=0,collapsible:ue,panelSize:ce}=Na(ee,F,ge);return Wt(ce!=null,`Panel size not found for panel "${F.id}"`),!ue||al(ce,we)>0},[]),oe=N.useCallback(F=>{const{panelDataArray:ge}=H.current;ge.push(F),ge.sort((ee,we)=>{const ue=ee.order,ce=we.order;return ue==null&&ce==null?0:ue==null?-1:ce==null?1:ue-ce}),H.current.panelDataArrayChanged=!0,M()},[M]);kc(()=>{if(H.current.panelDataArrayChanged){H.current.panelDataArrayChanged=!1;const{autoSaveId:F,onLayout:ge,storage:ee}=O.current,{layout:we,panelDataArray:ue}=H.current;let ce=null;if(F){const ze=oz(F,ue,ee);ze&&(P.current=new Map(Object.entries(ze.expandToSizes)),ce=ze.layout)}ce==null&&(ce=rz({panelDataArray:ue}));const Me=J2({layout:ce,panelConstraints:ue.map(ze=>ze.constraints)});Q2(we,Me)||(I(Me),H.current.layout=Me,ge&&ge(Me),nc(ue,Me,k.current))}}),kc(()=>{const F=H.current;return()=>{F.layout=[]}},[]);const Re=N.useCallback(F=>{let ge=!1;const ee=w.current;return ee&&window.getComputedStyle(ee,null).getPropertyValue("direction")==="rtl"&&(ge=!0),function(ue){ue.preventDefault();const ce=w.current;if(!ce)return()=>null;const{direction:Me,dragState:ze,id:Ue,keyboardResizeBy:Ke,onLayout:Ze}=O.current,{layout:ot,panelDataArray:kt}=H.current,{initialLayout:Et}=ze??{},Ot=pN(Ue,F,ce);let Ht=nz(ue,F,Me,ze,Ke,ce);const en=Me==="horizontal";en&&ge&&(Ht=-Ht);const Is=kt.map(Js=>Js.constraints),Kn=Nf({delta:Ht,initialLayout:Et??ot,panelConstraints:Is,pivotIndices:Ot,prevLayout:ot,trigger:fN(ue)?"keyboard":"mouse-or-touch"}),mr=!tp(ot,Kn);(hN(ue)||dN(ue))&&L.current!=Ht&&(L.current=Ht,!mr&&Ht!==0?en?Zb(F,Ht<0?$8:H8):Zb(F,Ht<0?W8:q8):Zb(F,0)),mr&&(I(Kn),H.current.layout=Kn,Ze&&Ze(Kn),nc(kt,Kn,k.current))}},[]),ie=N.useCallback((F,ge)=>{const{onLayout:ee}=O.current,{layout:we,panelDataArray:ue}=H.current,ce=ue.map(ot=>ot.constraints),{panelSize:Me,pivotIndices:ze}=Na(ue,F,we);Wt(Me!=null,`Panel size not found for panel "${F.id}"`);const Ke=pc(ue,F)===ue.length-1?Me-ge:ge-Me,Ze=Nf({delta:Ke,initialLayout:we,panelConstraints:ce,pivotIndices:ze,prevLayout:we,trigger:"imperative-api"});tp(we,Ze)||(I(Ze),H.current.layout=Ze,ee&&ee(Ze),nc(ue,Ze,k.current))},[]),Ae=N.useCallback((F,ge)=>{const{layout:ee,panelDataArray:we}=H.current,{collapsedSize:ue=0,collapsible:ce}=ge,{collapsedSize:Me=0,collapsible:ze,maxSize:Ue=100,minSize:Ke=0}=F.constraints,{panelSize:Ze}=Na(we,F,ee);Ze!=null&&(ce&&ze&&$i(Ze,ue)?$i(ue,Me)||ie(F,Me):Ze<Ke?ie(F,Ke):Ze>Ue&&ie(F,Ue))},[ie]),he=N.useCallback((F,ge)=>{const{direction:ee}=O.current,{layout:we}=H.current;if(!w.current)return;const ue=b0(F,w.current);Wt(ue,`Drag handle element not found for id "${F}"`);const ce=mN(ee,ge);A({dragHandleId:F,dragHandleRect:ue.getBoundingClientRect(),initialCursorPosition:ce,initialLayout:we})},[]),$e=N.useCallback(()=>{A(null)},[]),D=N.useCallback(F=>{const{panelDataArray:ge}=H.current,ee=pc(ge,F);ee>=0&&(ge.splice(ee,1),delete k.current[F.id],H.current.panelDataArrayChanged=!0,M())},[M]),te=N.useMemo(()=>({collapsePanel:Y,direction:r,dragState:R,expandPanel:J,getPanelSize:K,getPanelStyle:Z,groupId:b,isPanelCollapsed:ae,isPanelExpanded:_e,reevaluatePanelConstraints:Ae,registerPanel:oe,registerResizeHandle:Re,resizePanel:ie,startDragging:he,stopDragging:$e,unregisterPanel:D,panelGroupElement:w.current}),[Y,R,r,J,K,Z,b,ae,_e,Ae,oe,Re,ie,he,$e,D]),G={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return N.createElement(m0.Provider,{value:te},N.createElement(d,{...g,children:e,className:n,id:i,ref:w,style:{...G,...h},[us.group]:"",[us.groupDirection]:r,[us.groupId]:b}))}const cz=N.forwardRef((t,e)=>N.createElement(vN,{...t,forwardedRef:e}));vN.displayName="PanelGroup";cz.displayName="forwardRef(PanelGroup)";function pc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Na(t,e,n){const r=pc(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],a=n[r];return{...e.constraints,panelSize:a,pivotIndices:i}}const uz=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},tE=t=>{const e={name:"",path:"",type:"directory",children:[]},n=new Set,r=new Map;t.forEach(i=>{i.files.forEach(a=>{n.add(a),r.has(a)||r.set(a,[]),r.get(a).push(i.name)})}),n.forEach(i=>{const a=i.split("/");let l=e;a.forEach((u,h)=>{const d=h===a.length-1,g=a.slice(0,h+1).join("/");l.children||(l.children=[]);let b=l.children.find(w=>w.name===u);b||(b={name:u,path:g,type:d?"file":"directory",children:d?void 0:[],bundles:d?r.get(i):void 0},l.children.push(b)),d||(l=b)})});const s=i=>{i.children&&(i.children.sort((a,l)=>a.type!==l.type?a.type==="directory"?-1:1:a.name.localeCompare(l.name)),i.children.forEach(s))};return s(e),e},fz=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+n[r]};function _N({node:t,level:e,expandedDirs:n,onToggleDir:r}){const s=n.has(t.path),i=e*16;if(t.type==="directory")return m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded cursor-pointer",style:{paddingLeft:`${i+8}px`},onClick:()=>r(t.path),children:[s?m.jsx(Xg,{className:"w-4 h-4 text-muted-foreground"}):m.jsx(gC,{className:"w-4 h-4 text-muted-foreground"}),s?m.jsx(YF,{className:"w-4 h-4 text-[color:var(--color-info)]"}):m.jsx(ZF,{className:"w-4 h-4 text-[color:var(--color-info)]"}),m.jsx("span",{className:"text-xs font-thin",children:t.name}),t.children&&m.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[t.children.length," items"]})]}),s&&t.children&&m.jsx("div",{children:t.children.map(l=>m.jsx(_N,{node:l,level:e+1,expandedDirs:n,onToggleDir:r},l.path))})]});const a=l=>{var d;const u=(d=l.split(".").pop())==null?void 0:d.toLowerCase(),h="w-4 h-4";switch(u){case"js":case"ts":case"jsx":case"tsx":return m.jsx(Ql,{className:`${h} text-[color:var(--color-warning)]`});case"json":return m.jsx(Ql,{className:`${h} text-[color:var(--color-success)]`});case"md":return m.jsx(Ql,{className:`${h} text-[color:var(--color-info)]/80`});case"css":case"scss":return m.jsx(Ql,{className:`${h} text-[color:var(--color-type-styles)]`});case"html":return m.jsx(Ql,{className:`${h} text-[color:var(--color-type-configuration)]`});default:return m.jsx(Ql,{className:`${h} text-muted-foreground`})}};return m.jsxs("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded",style:{paddingLeft:`${i+24}px`},children:[a(t.name),m.jsx("span",{className:"text-xs font-mono",children:t.name}),t.bundles&&t.bundles.length>0&&m.jsx("div",{className:"flex gap-1 ml-2",children:t.bundles.map(l=>m.jsx(pn,{variant:"outline",className:"text-xs px-1 py-0 h-4",children:l},l))}),t.size&&m.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:fz(t.size)})]})}function hz(){const[t,e]=N.useState(new Set([""])),{data:n,isLoading:r}=Cs({queryKey:["bundles"],queryFn:uz,refetchInterval:5e3}),s=h=>{const d=new Set(t);d.has(h)?d.delete(h):d.add(h),e(d)},i=()=>{if(!n)return;const h=tE(n),d=new Set,g=b=>{var w;b.type==="directory"&&(d.add(b.path),(w=b.children)==null||w.forEach(g))};g(h),e(d)},a=()=>{e(new Set([""]))};if(r)return m.jsx("div",{children:"Loading file tree..."});if(!n)return m.jsx("div",{children:"No bundles found"});const l=tE(n),u=n.reduce((h,d)=>h+d.files.length,0);return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex gap-1",children:[m.jsx(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:i,children:"Expand All"}),m.jsx(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:a,children:"Collapse All"})]}),m.jsxs("div",{className:"text-xs text-muted-foreground font-thin",children:[u," files tracked"]})]}),m.jsx(Ut,{className:"p-4",children:m.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:l.children&&l.children.length>0?l.children.map(h=>m.jsx(_N,{node:h,level:0,expandedDirs:t,onToggleDir:s},h.path)):m.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No files found"})})}),m.jsxs(Ut,{className:"p-4",children:[m.jsx("h3",{className:"text-xs font-thin mb-2",children:"Bundle Legend"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(h=>m.jsxs(pn,{variant:"outline",children:[h.name," (",h.files.length,")"]},h.name))})]})]})}const dz=()=>m.jsxs(Ut,{children:[m.jsxs(En,{children:[m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(vC,{className:"w-4 h-4"}),"Project Files"]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse and explore all files in your project with bundle information."})]}),m.jsx(qt,{children:m.jsx(hz,{})})]});var am="Dialog",[wN,Vie]=Ki(am),[pz,Qs]=wN(am),SN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=N.useRef(null),u=N.useRef(null),[h,d]=rl({prop:r,defaultProp:s??!1,onChange:i,caller:am});return m.jsx(pz,{scope:e,triggerRef:l,contentRef:u,contentId:Fr(),titleId:Fr(),descriptionId:Fr(),open:h,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(g=>!g),[d]),modal:a,children:n})};SN.displayName=am;var TN="DialogTrigger",gz=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Qs(TN,n),i=Tn(e,s.triggerRef);return m.jsx(mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_0(s.open),...r,ref:i,onClick:vt(t.onClick,s.onOpenToggle)})});gz.displayName=TN;var x0="DialogPortal",[mz,EN]=wN(x0,{forceMount:void 0}),AN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Qs(x0,e);return m.jsx(mz,{scope:e,forceMount:n,children:N.Children.map(r,a=>m.jsx(sa,{present:n||i.open,children:m.jsx(gh,{asChild:!0,container:s,children:a})}))})};AN.displayName=x0;var Xp="DialogOverlay",RN=N.forwardRef((t,e)=>{const n=EN(Xp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Qs(Xp,t.__scopeDialog);return i.modal?m.jsx(sa,{present:r||i.open,children:m.jsx(bz,{...s,ref:e})}):null});RN.displayName=Xp;var yz=nl("DialogOverlay.RemoveScroll"),bz=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Qs(Xp,n);return m.jsx(rm,{as:yz,allowPinchZoom:!0,shards:[s.contentRef],children:m.jsx(mt.div,{"data-state":_0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ll="DialogContent",CN=N.forwardRef((t,e)=>{const n=EN(ll,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Qs(ll,t.__scopeDialog);return m.jsx(sa,{present:r||i.open,children:i.modal?m.jsx(xz,{...s,ref:e}):m.jsx(vz,{...s,ref:e})})});CN.displayName=ll;var xz=N.forwardRef((t,e)=>{const n=Qs(ll,t.__scopeDialog),r=N.useRef(null),s=Tn(e,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return p0(i)},[]),m.jsx(kN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vt(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:vt(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:vt(t.onFocusOutside,i=>i.preventDefault())})}),vz=N.forwardRef((t,e)=>{const n=Qs(ll,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return m.jsx(kN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),kN=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=Qs(ll,n),u=N.useRef(null),h=Tn(e,u);return r0(),m.jsxs(m.Fragment,{children:[m.jsx(Qg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:m.jsx(ph,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":_0(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(Tz,{titleId:l.titleId}),m.jsx(Az,{contentRef:u,descriptionId:l.descriptionId})]})]})}),v0="DialogTitle",_z=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Qs(v0,n);return m.jsx(mt.h2,{id:s.titleId,...r,ref:e})});_z.displayName=v0;var NN="DialogDescription",wz=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Qs(NN,n);return m.jsx(mt.p,{id:s.descriptionId,...r,ref:e})});wz.displayName=NN;var MN="DialogClose",Sz=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Qs(MN,n);return m.jsx(mt.button,{type:"button",...r,ref:e,onClick:vt(t.onClick,()=>s.onOpenChange(!1))})});Sz.displayName=MN;function _0(t){return t?"open":"closed"}var IN="DialogTitleWarning",[$ie,ON]=Tj(IN,{contentName:ll,titleName:v0,docsSlug:"dialog"}),Tz=({titleId:t})=>{const e=ON(IN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Ez="DialogDescriptionWarning",Az=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ON(Ez).contentName}}.`;return N.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Rz=SN,Cz=AN,kz=RN,Nz=CN;function PN({className:t,type:e,...n}){return m.jsx("input",{type:e,"data-slot":"input",className:Dt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-thin disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}const Mz=async()=>{const t=await fetch("http://localhost:3333/api/bundles");if(!t.ok)throw new Error("Failed to fetch bundles");return t.json()},Iz=async()=>{const t=await fetch("http://localhost:3333/api/files");if(!t.ok)throw new Error("Failed to fetch files");return(await t.json()).map(n=>n.path)};function Oz(){const t=lu(),[e,n]=N.useState(null),[r,s]=N.useState(new Set),[i,a]=N.useState(new Set),[l,u]=N.useState(null),[h,d]=N.useState(new Map),[g,b]=N.useState(!1);rL();const{data:w=[],isLoading:R,isFetching:A,dataUpdatedAt:C}=Cs({queryKey:["bundles"],queryFn:Mz,refetchInterval:5e3,refetchOnWindowFocus:!0}),{data:I=[],isFetching:M,dataUpdatedAt:k}=Cs({queryKey:["allFiles"],queryFn:Iz,refetchInterval:3e4,refetchOnWindowFocus:!0});N.useEffect(()=>{const O=Math.max(C,k);O>0&&u(new Date(O))},[C,k]),N.useEffect(()=>{const O=new WebSocket("ws://localhost:3333");return O.onopen=()=>{console.log("Bundle updates WebSocket connected")},O.onmessage=H=>{try{const Y=JSON.parse(H.data);switch(console.log("WebSocket message received:",Y),Y.type){case"bundle-sync-started":d(J=>new Map(J).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)})),ln.info(`Syncing ${Y.bundleName}`);break;case"bundle-sync-completed":d(J=>new Map(J).set(Y.bundleName,{changed:!1,lastSync:new Date(Y.timestamp)})),ln.success(`Synced ${Y.bundleName}`),t.invalidateQueries({queryKey:["bundles"]});break;case"bundle-sync-failed":d(J=>new Map(J).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)})),ln.error(`Sync failed for ${Y.bundleName}`,Y.error);break;case"bundle-file-changed":d(J=>new Map(J).set(Y.bundleName,{changed:!0,lastSync:new Date(Y.timestamp)}));break}}catch(Y){console.error("Error parsing bundle update:",Y)}},O.onclose=()=>{console.log("Bundle updates WebSocket disconnected")},O.onerror=H=>{console.error("Bundle updates WebSocket error:",H)},()=>{O.close()}},[t]);const P=N.useCallback(O=>{n(e===O?null:O)},[e]),L=N.useMemo(()=>w.map(O=>{const H=h.get(O.name);return{...O,changed:(H==null?void 0:H.changed)??O.changed,lastSync:H==null?void 0:H.lastSync}}),[w,h]);return R?m.jsx("div",{children:"Loading bundles..."}):w?m.jsxs("div",{className:"h-full flex flex-col relative",children:[m.jsxs(ia,{defaultValue:"bundles",className:"w-full flex-1 flex flex-col min-h-0",children:[m.jsxs(oa,{className:"grid w-full grid-cols-3 bg-background",children:[m.jsxs(Rn,{value:"bundles",className:"flex items-center gap-2",children:[m.jsx(mv,{className:"w-4 h-4 text-muted-foreground/75"}),"Bundles"]}),m.jsxs(Rn,{value:"files",className:"flex items-center gap-2",children:[m.jsx(vC,{className:"w-4 h-4 text-muted-foreground/75"}),"Project Files"]}),m.jsxs(Rn,{value:"analysis",className:"flex items-center gap-2",children:[m.jsx(Ac,{className:"w-4 h-4 text-muted-foreground/75"}),"File Analysis"]})]}),m.jsx(In,{value:"bundles",className:"flex-1 overflow-y-auto",children:m.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:L&&Array.isArray(L)?L.map(O=>m.jsx(sL,{bundle:O,isSelected:e===O.name,onSelect:P,lastRefresh:l||void 0},O.name)):m.jsx("div",{children:"No bundles available"})})}),m.jsx(In,{value:"files",className:"space-y-4",children:m.jsx(dz,{})}),m.jsx(In,{value:"analysis",className:"space-y-4",children:m.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[m.jsx(Ac,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),m.jsx("p",{className:"text-sm font-thin uppercase tracking-widest",children:"Semantic Analysis Active"}),m.jsx("p",{className:"text-xs mt-2 opacity-50",children:"Viewing automated context mapping..."})]})})]}),e&&(()=>{var H;const O=w.find(Y=>Y.name===e);return O?m.jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-10 z-50 bg-background flex flex-col",children:[m.jsxs("div",{className:"sticky top-0 bg-background border-b p-4 flex justify-between items-center flex-shrink-0",children:[m.jsxs("h3",{className:"font-thin text-sm flex items-center gap-2",children:[m.jsx(mv,{className:"w-4 h-4 text-muted-foreground"}),e," Details"]}),m.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>n(null),children:m.jsx(ws,{className:"w-4 h-4"})})]}),m.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-6",children:m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-xs font-thin uppercase tracking-widest color-vesper-muted",children:"Included Files"}),m.jsx("ul",{className:"list-none pl-0 space-y-1",children:(H=O.files)==null?void 0:H.map(Y=>m.jsx("li",{className:"text-xs font-thin mono py-1 border-b border-vesper/50",children:Y},Y))})]})})]}):null})()]}):m.jsx("div",{children:"No bundles found"})}function Yp({className:t,...e}){return m.jsx("textarea",{"data-slot":"textarea",className:Dt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const Pz=qg("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function th({className:t,variant:e,...n}){return m.jsx("div",{"data-slot":"alert",role:"alert",className:Dt(Pz({variant:e}),t),...n})}function nh({className:t,...e}){return m.jsx("div",{"data-slot":"alert-description",className:Dt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const Dz=async()=>{const t=await fetch("http://localhost:3333/api/cursor-rules");if(!t.ok)throw new Error("Failed to fetch cursor rules");return t.text()},jz=async t=>{if(!(await fetch("http://localhost:3333/api/cursor-rules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save cursor rules")},Fz=async()=>{const t=await fetch("http://localhost:3333/api/claude-md");if(!t.ok)throw new Error("Failed to fetch CLAUDE.md");return t.text()},Bz=async t=>{if(!(await fetch("http://localhost:3333/api/claude-md",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw new Error("Failed to save CLAUDE.md")};function Lz(){const t=lu(),[e,n]=N.useState(""),[r,s]=N.useState(""),[i,a]=N.useState("cursor"),{data:l,isLoading:u}=Cs({queryKey:["cursor-rules"],queryFn:Dz}),h=Lp({mutationFn:jz,onSuccess:()=>{t.invalidateQueries({queryKey:["cursor-rules"]}),ln.success(".cursorrules saved successfully!")},onError:I=>{ln.error(`Failed to save .cursorrules: ${I.message}`)}}),{data:d,isLoading:g}=Cs({queryKey:["claude-md"],queryFn:Fz}),b=Lp({mutationFn:Bz,onSuccess:()=>{t.invalidateQueries({queryKey:["claude-md"]}),ln.success("CLAUDE.md saved successfully!")},onError:I=>{ln.error(`Failed to save CLAUDE.md: ${I.message}`)}});N.useEffect(()=>{l&&!e&&n(l)},[l]),N.useEffect(()=>{d&&!r&&s(d)},[d]);const w=()=>{h.mutate(e)},R=()=>{b.mutate(r)},A=(I,M)=>{navigator.clipboard.writeText(I),ln.success(`${M} copied to clipboard!`)},C=(I,M)=>{const k=new Blob([I],{type:"text/plain"}),P=URL.createObjectURL(k),L=document.createElement("a");L.href=P,L.download=M,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(P),ln.success(`${M} downloaded!`)};return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(vv,{className:"w-4 h-4"}),"AI Rules & Context"]})}),m.jsxs(qt,{children:[m.jsxs(th,{className:"mb-4",children:[m.jsx(qc,{className:"w-4 h-4"}),m.jsxs(nh,{children:["Configure AI context files for better assistance. ",m.jsx("strong",{children:".cursorrules"})," works with Cursor, while ",m.jsx("strong",{children:"CLAUDE.md"})," provides project context for Claude."]})]}),m.jsxs(ia,{value:i,onValueChange:I=>a(I),className:"space-y-4",children:[m.jsxs(oa,{className:"grid w-full grid-cols-2",children:[m.jsxs(Rn,{value:"cursor",className:"flex items-center gap-2",children:[m.jsx(Gf,{className:"w-4 h-4"}),".cursorrules"]}),m.jsxs(Rn,{value:"claude",className:"flex items-center gap-2",children:[m.jsx(vv,{className:"w-4 h-4"}),"CLAUDE.md"]})]}),m.jsxs(In,{value:"cursor",className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-thin",children:"Cursor AI Assistant Rules"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure how Cursor's AI understands your project"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(e,".cursorrules"),children:[m.jsx(Qf,{className:"w-3 h-3 mr-1"}),"Copy"]}),m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(e,".cursorrules"),children:[m.jsx(xv,{className:"w-3 h-3 mr-1"}),"Download"]}),m.jsxs(wt,{onClick:w,disabled:h.isPending,size:"sm",className:"h-7 text-xs",children:[m.jsx(Up,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),u?m.jsxs("div",{className:"flex items-center justify-center p-8",children:[m.jsx(fs,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):m.jsx(Yp,{value:e,onChange:I=>n(I.target.value),placeholder:"Enter your Cursor AI rules here...",className:"min-h-[300px] font-mono text-sm"})]}),m.jsxs(In,{value:"claude",className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-thin",children:"Claude Project Context"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Markdown file explaining your project structure and guidelines"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(r,"CLAUDE.md"),children:[m.jsx(Qf,{className:"w-3 h-3 mr-1"}),"Copy"]}),m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>C(r,"CLAUDE.md"),children:[m.jsx(xv,{className:"w-3 h-3 mr-1"}),"Download"]}),m.jsxs(wt,{onClick:R,disabled:b.isPending,size:"sm",className:"h-7 text-xs",children:[m.jsx(Up,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}),g?m.jsxs("div",{className:"flex items-center justify-center p-8",children:[m.jsx(fs,{className:"w-6 h-6 animate-spin mr-2"}),"Loading..."]}):m.jsx(Yp,{value:r,onChange:I=>s(I.target.value),placeholder:"Enter your Claude project context here...",className:"min-h-[300px] font-mono text-sm"}),m.jsxs(th,{children:[m.jsx(qc,{className:"w-4 h-4"}),m.jsx(nh,{children:"This file helps Claude understand your project. Include project structure, coding conventions, key concepts, and any important context."})]})]})]})]})]})}const nE=[{path:"/api/status",method:"GET",description:"Server status and health"},{path:"/api/bundles",method:"GET",description:"List all bundles"},{path:"/api/config",method:"GET",description:"Get bundle configuration"},{path:"/api/files",method:"GET",description:"Get file tree"},{path:"/api/semantic-chunks",method:"GET",description:"Get semantic analysis"},{path:"/api/vector-db/status",method:"GET",description:"Vector database status"},{path:"/api/cursor-rules",method:"GET",description:"Cursor rules configuration"},{path:"/api/claude-md",method:"GET",description:"Claude.md file content"},{path:"/api/activities",method:"GET",description:"Available activities"},{path:"/api/mcp-status",method:"GET",description:"MCP server status"}],rc=[{name:"list_bundles",description:"List all available file bundles",group:"Bundle Management"},{name:"get_bundle",description:"Get the content of a specific bundle",group:"Bundle Management"},{name:"generate_bundle",description:"Regenerate a specific bundle",group:"Bundle Management"},{name:"create_bundle",description:"Create a new bundle with specified patterns",group:"Bundle Management"},{name:"update_bundle",description:"Update an existing bundle's patterns",group:"Bundle Management"},{name:"delete_bundle",description:"Delete an existing bundle",group:"Bundle Management"},{name:"get_file_tree",description:"Get the project file tree",group:"Project Exploration"},{name:"get_project_status",description:"Get current project status and bundle information",group:"Project Exploration"},{name:"update_cntxignore",description:"Update the .cntxignore file with new ignore patterns",group:"Project Exploration"},{name:"get_semantic_chunks",description:"Get function-level semantic chunks from the codebase",group:"Semantic Analysis"},{name:"get_semantic_chunks_filtered",description:"Get semantic chunks filtered by purpose, type, complexity, or bundle",group:"Semantic Analysis"},{name:"analyze_bundle_suggestions",description:"Analyze codebase and suggest optimal bundle organization",group:"Semantic Analysis"},{name:"agent_discover",description:"Agent Discovery Mode: Get comprehensive codebase overview",group:"Agent Modes"},{name:"agent_query",description:"Agent Query Mode: Answer specific questions about the codebase",group:"Agent Modes"},{name:"agent_investigate",description:"Agent Investigation Mode: Investigate existing implementations for a feature",group:"Agent Modes"},{name:"agent_discuss",description:"Agent Passive Mode: Engage in discussion about codebase architecture",group:"Agent Modes"},{name:"agent_organize",description:"Agent Project Organizer Mode: Setup and maintenance of project organization",group:"Agent Modes"},{name:"read_file",description:"Read contents of a specific file with bundle context and metadata",group:"File Operations"},{name:"write_file",description:"Write content to a file with validation and safety checks",group:"File Operations"},{name:"manage_activities",description:"CRUD operations for project activities",group:"Activities Management"}],Uz=async()=>{const t=await fetch("http://localhost:3333/api/status");if(!t.ok)throw new Error("Failed to fetch server status");return t.json()},zz=async t=>{const e=Date.now();try{const n=await fetch(`http://localhost:3333${t.path}`),r=Date.now()-e;return n.ok?{...t,status:"success",responseTime:r}:{...t,status:"error",responseTime:r,error:`HTTP ${n.status}`}}catch(n){const r=Date.now()-e;return{...t,status:"error",responseTime:r,error:n instanceof Error?n.message:"Unknown error"}}},Vz=async t=>{try{const e=await fetch("http://localhost:3333/api/mcp-status");return e.ok?(await e.json()).enabled?{...t,status:"available"}:{...t,status:"error",error:"MCP server not enabled"}:{...t,status:"error",error:"MCP status unavailable"}}catch(e){return{...t,status:"error",error:e instanceof Error?e.message:"Unknown error"}}};function $z(){var L,O,H,Y,J,K;const[t,e]=N.useState([]),[n,r]=N.useState([]),[s,i]=N.useState(!1),[a,l]=N.useState("All"),{data:u,isLoading:h,error:d,refetch:g}=Cs({queryKey:["server-status"],queryFn:Uz,refetchInterval:5e3}),b=async()=>{i(!0);try{const Z=await Promise.all(nE.map(ae=>zz(ae)));e(Z)}catch(Z){console.error("Failed to run endpoint tests:",Z)}finally{i(!1)}},w=async()=>{i(!0);try{const Z=await Promise.all(rc.map(ae=>Vz(ae)));r(Z)}catch(Z){console.error("Failed to run MCP tests:",Z)}finally{i(!1)}},R=Z=>{if(Z<60)return`${Math.floor(Z)}s`;if(Z<3600)return`${Math.floor(Z/60)}m ${Math.floor(Z%60)}s`;const ae=Math.floor(Z/3600),_e=Math.floor(Z%3600/60);return`${ae}h ${_e}m`},A=Z=>{const ae=Z/1024/1024;return`${Math.round(ae)}MB`},C=()=>["All",...new Set(rc.map(ae=>ae.group))],I=()=>a==="All"?rc:rc.filter(Z=>Z.group===a),M=()=>I().reduce((_e,oe)=>(_e[oe.group]||(_e[oe.group]=[]),_e[oe.group].push(oe),_e),{}),k=(Z,ae)=>{var _e,oe,Re,ie,Ae;if(typeof Z=="string")return Z.length>100?Z.substring(0,100)+"...":Z;if(Array.isArray(Z))return`Array with ${Z.length} items`;if(typeof Z=="object"&&Z!==null){const he=Object.keys(Z);if(ae.includes("/api/status"))return`Uptime: ${Math.floor(Z.uptime||0)}s, Memory: ${Math.round((((_e=Z.memory)==null?void 0:_e.heapUsed)||0)/1024/1024)}MB, Files: ${Z.totalFiles||0}`;if(ae.includes("/api/bundles"))return`${Z.length||he.length} bundles found`;if(ae.includes("/api/semantic-chunks"))return`${((oe=Z.chunks)==null?void 0:oe.length)||0} chunks, ${((Re=Z.summary)==null?void 0:Re.totalFunctions)||0} functions`;if(ae.includes("/api/vector-db/status"))return`${((ie=Z.stats)==null?void 0:ie.totalChunks)||0} chunks indexed with ${((Ae=Z.stats)==null?void 0:Ae.modelName)||"unknown model"}`;if(ae.includes("/api/activities"))return`${Z.length||he.length} activities found`;const $e=he.slice(0,3).map(D=>{const te=Z[D];return typeof te=="object"?`${D}: ${Array.isArray(te)?`[${te.length}]`:"{object}"}`:`${D}: ${String(te).substring(0,20)}`}).join(", ");return he.length>3?`${$e}... (+${he.length-3} more)`:$e}return String(Z).substring(0,100)},P=async Z=>{const ae=Date.now();try{const _e=await fetch(`http://localhost:3333${Z.path}`),oe=Date.now()-ae;if(_e.ok){const Re=await _e.json(),ie=k(Re,Z.path);ln.success(`${Z.path} (${oe}ms)`,ie)}else ln.error(`${Z.path} failed`,`HTTP ${_e.status} (${oe}ms)`)}catch(_e){const oe=Date.now()-ae;ln.error(`${Z.path} error`,`${_e instanceof Error?_e.message:"Unknown error"} (${oe}ms)`)}};return h?m.jsx(Ut,{children:m.jsx(qt,{className:"pt-6",children:m.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[m.jsx(fs,{className:"w-4 h-4 animate-spin"}),"Checking system status..."]})})}):d?m.jsx(Ut,{children:m.jsx(qt,{className:"p-4",children:m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(Xo,{className:"h-6 w-6 mx-auto text-red-500"}),m.jsx("p",{className:"text-sm font-medium",children:"Failed to connect to server"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running on localhost:3333"}),m.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>g(),children:[m.jsx(fs,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(x6,{className:"w-5 h-5"}),"Server Status",m.jsx(Ba,{className:"w-4 h-4 text-green-600"})]})}),m.jsxs(qt,{children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-muted-foreground",children:"Uptime"}),m.jsx("div",{className:"font-medium",children:R((u==null?void 0:u.uptime)||0)})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-muted-foreground",children:"Memory"}),m.jsx("div",{className:"font-medium",children:A(((L=u==null?void 0:u.memory)==null?void 0:L.heapUsed)||0)})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-muted-foreground",children:"Total Files"}),m.jsx("div",{className:"font-medium",children:(u==null?void 0:u.totalFiles)||0})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-muted-foreground",children:"Bundles"}),m.jsx("div",{className:"font-medium",children:((O=u==null?void 0:u.bundles)==null?void 0:O.length)||0})]})]}),m.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[m.jsx(pn,{variant:u!=null&&u.scanning?"destructive":"secondary",children:u!=null&&u.scanning?"Scanning":"Idle"}),m.jsxs(pn,{variant:(H=u==null?void 0:u.mcp)!=null&&H.enabled?"default":"secondary",children:["MCP: ",(Y=u==null?void 0:u.mcp)!=null&&Y.enabled?"Enabled":"Disabled"]})]})]})]}),m.jsxs(ia,{defaultValue:"endpoints",className:"w-full",children:[m.jsxs(oa,{className:"grid w-full grid-cols-3",children:[m.jsxs(Rn,{value:"endpoints",className:"flex items-center gap-2",children:[m.jsx(Q_,{className:"w-4 h-4"}),"API Endpoints"]}),m.jsxs(Rn,{value:"mcp",className:"flex items-center gap-2",children:[m.jsx(Kg,{className:"w-4 h-4"}),"MCP Tools"]}),m.jsxs(Rn,{value:"bundle-sync",className:"flex items-center gap-2",children:[m.jsx(qc,{className:"w-4 h-4"}),"Bundle Sync"]})]}),m.jsx(In,{value:"endpoints",className:"space-y-4",children:m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Cn,{className:"text-lg",children:"API Endpoints"}),m.jsxs(wt,{onClick:b,disabled:s,size:"sm",variant:"outline",children:[m.jsx(S2,{className:"w-4 h-4 mr-2"}),s?"Testing...":"Test All"]})]})}),m.jsx(qt,{children:m.jsx("div",{className:"space-y-2",children:nE.map(Z=>{const ae=t.find(_e=>_e.path===Z.path);return m.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(pn,{variant:"outline",className:"text-xs",children:Z.method}),m.jsx("code",{className:"text-sm",children:Z.path})]}),m.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Z.description})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>P(Z),className:"h-7 w-7 p-0",title:`Test ${Z.path}`,children:m.jsx(bC,{className:"w-3 h-3"})}),ae&&m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"text-xs text-muted-foreground",children:[ae.responseTime,"ms"]}),ae.status==="success"?m.jsx(Ba,{className:"w-4 h-4 text-green-600"}):ae.status==="error"?m.jsx("div",{title:ae.error,children:m.jsx(Xo,{className:"w-4 h-4 text-red-600"})}):m.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})]})]})]},Z.path)})})})]})}),m.jsx(In,{value:"mcp",className:"space-y-4",children:m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Cn,{className:"text-lg",children:"MCP Tools"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(Da,{value:a,onValueChange:l,children:[m.jsx(Do,{className:"w-48",children:m.jsx(ja,{placeholder:"Filter by group"})}),m.jsx(jo,{children:C().map(Z=>m.jsxs(pr,{value:Z,children:[Z," ",Z==="All"?`(${rc.length})`:`(${rc.filter(ae=>ae.group===Z).length})`]},Z))})]}),m.jsxs(wt,{onClick:w,disabled:s||!((J=u==null?void 0:u.mcp)!=null&&J.enabled),size:"sm",variant:"outline",children:[m.jsx(S2,{className:"w-4 h-4 mr-2"}),s?"Testing...":"Test All"]})]})]})}),m.jsxs(qt,{children:[!((K=u==null?void 0:u.mcp)!=null&&K.enabled)&&m.jsxs(th,{className:"mb-4",children:[m.jsx(qc,{className:"w-4 h-4"}),m.jsx(nh,{children:"MCP server is not enabled. MCP tools will not be available."})]}),m.jsx("div",{className:"space-y-4",children:a==="All"?Object.entries(M()).map(([Z,ae])=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[m.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:Z}),m.jsxs(pn,{variant:"outline",className:"text-xs",children:[ae.length," tools"]})]}),m.jsx("div",{className:"space-y-2",children:ae.map(_e=>{const oe=n.find(Re=>Re.name===_e.name);return m.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-sm",children:_e.name}),m.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_e.description})]}),m.jsx("div",{className:"flex items-center gap-2",children:oe?oe.status==="available"?m.jsx(Ba,{className:"w-4 h-4 text-green-600"}):m.jsx("div",{title:oe.error,children:m.jsx(Xo,{className:"w-4 h-4 text-red-600"})}):m.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},_e.name)})})]},Z)):m.jsx("div",{className:"space-y-2",children:I().map(Z=>{const ae=n.find(_e=>_e.name===Z.name);return m.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-sm",children:Z.name}),m.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Z.description})]}),m.jsx("div",{className:"flex items-center gap-2",children:ae?ae.status==="available"?m.jsx(Ba,{className:"w-4 h-4 text-green-600"}):m.jsx("div",{title:ae.error,children:m.jsx(Xo,{className:"w-4 h-4 text-red-600"})}):m.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})]},Z.name)})})})]})]})})]})]})}var Qb={exports:{}},rE;function Hz(){return rE||(rE=1,function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function M(k){return k instanceof u?new u(k.type,M(k.content),k.alias):Array.isArray(k)?k.map(M):k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(M){return Object.prototype.toString.call(M).slice(8,-1)},objId:function(M){return M.__id||Object.defineProperty(M,"__id",{value:++i}),M.__id},clone:function M(k,P){P=P||{};var L,O;switch(l.util.type(k)){case"Object":if(O=l.util.objId(k),P[O])return P[O];L={},P[O]=L;for(var H in k)k.hasOwnProperty(H)&&(L[H]=M(k[H],P));return L;case"Array":return O=l.util.objId(k),P[O]?P[O]:(L=[],P[O]=L,k.forEach(function(Y,J){L[J]=M(Y,P)}),L);default:return k}},getLanguage:function(M){for(;M;){var k=s.exec(M.className);if(k)return k[1].toLowerCase();M=M.parentElement}return"none"},setLanguage:function(M,k){M.className=M.className.replace(RegExp(s,"gi"),""),M.classList.add("language-"+k)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(L){var M=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(L.stack)||[])[1];if(M){var k=document.getElementsByTagName("script");for(var P in k)if(k[P].src==M)return k[P]}return null}},isActive:function(M,k,P){for(var L="no-"+k;M;){var O=M.classList;if(O.contains(k))return!0;if(O.contains(L))return!1;M=M.parentElement}return!!P}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(M,k){var P=l.util.clone(l.languages[M]);for(var L in k)P[L]=k[L];return P},insertBefore:function(M,k,P,L){L=L||l.languages;var O=L[M],H={};for(var Y in O)if(O.hasOwnProperty(Y)){if(Y==k)for(var J in P)P.hasOwnProperty(J)&&(H[J]=P[J]);P.hasOwnProperty(Y)||(H[Y]=O[Y])}var K=L[M];return L[M]=H,l.languages.DFS(l.languages,function(Z,ae){ae===K&&Z!=M&&(this[Z]=H)}),H},DFS:function M(k,P,L,O){O=O||{};var H=l.util.objId;for(var Y in k)if(k.hasOwnProperty(Y)){P.call(k,Y,k[Y],L||Y);var J=k[Y],K=l.util.type(J);K==="Object"&&!O[H(J)]?(O[H(J)]=!0,M(J,P,null,O)):K==="Array"&&!O[H(J)]&&(O[H(J)]=!0,M(J,P,Y,O))}}},plugins:{},highlightAll:function(M,k){l.highlightAllUnder(document,M,k)},highlightAllUnder:function(M,k,P){var L={callback:P,container:M,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",L),L.elements=Array.prototype.slice.apply(L.container.querySelectorAll(L.selector)),l.hooks.run("before-all-elements-highlight",L);for(var O=0,H;H=L.elements[O++];)l.highlightElement(H,k===!0,L.callback)},highlightElement:function(M,k,P){var L=l.util.getLanguage(M),O=l.languages[L];l.util.setLanguage(M,L);var H=M.parentElement;H&&H.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(H,L);var Y=M.textContent,J={element:M,language:L,grammar:O,code:Y};function K(ae){J.highlightedCode=ae,l.hooks.run("before-insert",J),J.element.innerHTML=J.highlightedCode,l.hooks.run("after-highlight",J),l.hooks.run("complete",J),P&&P.call(J.element)}if(l.hooks.run("before-sanity-check",J),H=J.element.parentElement,H&&H.nodeName.toLowerCase()==="pre"&&!H.hasAttribute("tabindex")&&H.setAttribute("tabindex","0"),!J.code){l.hooks.run("complete",J),P&&P.call(J.element);return}if(l.hooks.run("before-highlight",J),!J.grammar){K(l.util.encode(J.code));return}if(k&&r.Worker){var Z=new Worker(l.filename);Z.onmessage=function(ae){K(ae.data)},Z.postMessage(JSON.stringify({language:J.language,code:J.code,immediateClose:!0}))}else K(l.highlight(J.code,J.grammar,J.language))},highlight:function(M,k,P){var L={code:M,grammar:k,language:P};if(l.hooks.run("before-tokenize",L),!L.grammar)throw new Error('The language "'+L.language+'" has no grammar.');return L.tokens=l.tokenize(L.code,L.grammar),l.hooks.run("after-tokenize",L),u.stringify(l.util.encode(L.tokens),L.language)},tokenize:function(M,k){var P=k.rest;if(P){for(var L in P)k[L]=P[L];delete k.rest}var O=new g;return b(O,O.head,M),d(M,O,k,O.head,0),R(O)},hooks:{all:{},add:function(M,k){var P=l.hooks.all;P[M]=P[M]||[],P[M].push(k)},run:function(M,k){var P=l.hooks.all[M];if(!(!P||!P.length))for(var L=0,O;O=P[L++];)O(k)}},Token:u};r.Prism=l;function u(M,k,P,L){this.type=M,this.content=k,this.alias=P,this.length=(L||"").length|0}u.stringify=function M(k,P){if(typeof k=="string")return k;if(Array.isArray(k)){var L="";return k.forEach(function(K){L+=M(K,P)}),L}var O={type:k.type,content:M(k.content,P),tag:"span",classes:["token",k.type],attributes:{},language:P},H=k.alias;H&&(Array.isArray(H)?Array.prototype.push.apply(O.classes,H):O.classes.push(H)),l.hooks.run("wrap",O);var Y="";for(var J in O.attributes)Y+=" "+J+'="'+(O.attributes[J]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+Y+">"+O.content+"</"+O.tag+">"};function h(M,k,P,L){M.lastIndex=k;var O=M.exec(P);if(O&&L&&O[1]){var H=O[1].length;O.index+=H,O[0]=O[0].slice(H)}return O}function d(M,k,P,L,O,H){for(var Y in P)if(!(!P.hasOwnProperty(Y)||!P[Y])){var J=P[Y];J=Array.isArray(J)?J:[J];for(var K=0;K<J.length;++K){if(H&&H.cause==Y+","+K)return;var Z=J[K],ae=Z.inside,_e=!!Z.lookbehind,oe=!!Z.greedy,Re=Z.alias;if(oe&&!Z.pattern.global){var ie=Z.pattern.toString().match(/[imsuy]*$/)[0];Z.pattern=RegExp(Z.pattern.source,ie+"g")}for(var Ae=Z.pattern||Z,he=L.next,$e=O;he!==k.tail&&!(H&&$e>=H.reach);$e+=he.value.length,he=he.next){var D=he.value;if(k.length>M.length)return;if(!(D instanceof u)){var te=1,G;if(oe){if(G=h(Ae,$e,M,_e),!G||G.index>=M.length)break;var we=G.index,F=G.index+G[0].length,ge=$e;for(ge+=he.value.length;we>=ge;)he=he.next,ge+=he.value.length;if(ge-=he.value.length,$e=ge,he.value instanceof u)continue;for(var ee=he;ee!==k.tail&&(ge<F||typeof ee.value=="string");ee=ee.next)te++,ge+=ee.value.length;te--,D=M.slice($e,ge),G.index-=$e}else if(G=h(Ae,0,D,_e),!G)continue;var we=G.index,ue=G[0],ce=D.slice(0,we),Me=D.slice(we+ue.length),ze=$e+D.length;H&&ze>H.reach&&(H.reach=ze);var Ue=he.prev;ce&&(Ue=b(k,Ue,ce),$e+=ce.length),w(k,Ue,te);var Ke=new u(Y,ae?l.tokenize(ue,ae):ue,Re,ue);if(he=b(k,Ue,Ke),Me&&b(k,he,Me),te>1){var Ze={cause:Y+","+K,reach:ze};d(M,k,P,he.prev,$e,Ze),H&&Ze.reach>H.reach&&(H.reach=Ze.reach)}}}}}}function g(){var M={value:null,prev:null,next:null},k={value:null,prev:M,next:null};M.next=k,this.head=M,this.tail=k,this.length=0}function b(M,k,P){var L=k.next,O={value:P,prev:k,next:L};return k.next=O,L.prev=O,M.length++,O}function w(M,k,P){for(var L=k.next,O=0;O<P&&L!==M.tail;O++)L=L.next;k.next=L,L.prev=k,M.length-=O}function R(M){for(var k=[],P=M.head.next;P!==M.tail;)k.push(P.value),P=P.next;return k}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(M){var k=JSON.parse(M.data),P=k.language,L=k.code,O=k.immediateClose;r.postMessage(l.highlight(L,l.languages[P],P)),O&&r.close()},!1)),l;var A=l.util.currentScript();A&&(l.filename=A.src,A.hasAttribute("data-manual")&&(l.manual=!0));function C(){l.manual||l.highlightAll()}if(!l.manual){var I=document.readyState;I==="loading"||I==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return l}(e);t.exports&&(t.exports=n),typeof KT<"u"&&(KT.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(A,C){return" Error "+A+" while fetching file: "+C},i=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",u="loading",h="loaded",d="failed",g="pre[data-src]:not(["+l+'="'+h+'"]):not(['+l+'="'+u+'"])';function b(A,C,I){var M=new XMLHttpRequest;M.open("GET",A,!0),M.onreadystatechange=function(){M.readyState==4&&(M.status<400&&M.responseText?C(M.responseText):M.status>=400?I(s(M.status,M.statusText)):I(i))},M.send(null)}function w(A){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(A||"");if(C){var I=Number(C[1]),M=C[2],k=C[3];return M?k?[I,Number(k)]:[I,void 0]:[I,I]}}n.hooks.add("before-highlightall",function(A){A.selector+=", "+g}),n.hooks.add("before-sanity-check",function(A){var C=A.element;if(C.matches(g)){A.code="",C.setAttribute(l,u);var I=C.appendChild(document.createElement("CODE"));I.textContent=r;var M=C.getAttribute("data-src"),k=A.language;if(k==="none"){var P=(/\.(\w+)$/.exec(M)||[,"none"])[1];k=a[P]||P}n.util.setLanguage(I,k),n.util.setLanguage(C,k);var L=n.plugins.autoloader;L&&L.loadLanguages(k),b(M,function(O){C.setAttribute(l,h);var H=w(C.getAttribute("data-range"));if(H){var Y=O.split(/\r\n?|\n/g),J=H[0],K=H[1]==null?Y.length:H[1];J<0&&(J+=Y.length),J=Math.max(0,Math.min(J-1,Y.length)),K<0&&(K+=Y.length),K=Math.max(0,Math.min(K,Y.length)),O=Y.slice(J,K).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(J+1))}I.textContent=O,n.highlightElement(I)},function(O){C.setAttribute(l,d),I.textContent=O})}}),n.plugins.fileHighlight={highlight:function(C){for(var I=(C||document).querySelectorAll(g),M=0,k;k=I[M++];)n.highlightElement(k)}};var R=!1;n.fileHighlight=function(){R||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),R=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Qb)),Qb.exports}var Wz=Hz();const Gb=ou(Wz);Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;var sE={},iE;function qz(){return iE||(iE=1,function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(Prism)),sE}qz();(function(t){var e=t.util.clone(t.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,s=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function i(u,h){return u=u.replace(/<S>/g,function(){return n}).replace(/<BRACES>/g,function(){return r}).replace(/<SPREAD>/g,function(){return s}),RegExp(u,h)}s=i(s).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=i(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=e.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:i(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:i(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var a=function(u){return u?typeof u=="string"?u:typeof u.content=="string"?u.content:u.content.map(a).join(""):""},l=function(u){for(var h=[],d=0;d<u.length;d++){var g=u[d],b=!1;if(typeof g!="string"&&(g.type==="tag"&&g.content[0]&&g.content[0].type==="tag"?g.content[0].content[0].content==="</"?h.length>0&&h[h.length-1].tagName===a(g.content[0].content[1])&&h.pop():g.content[g.content.length-1].content==="/>"||h.push({tagName:a(g.content[0].content[1]),openedBraces:0}):h.length>0&&g.type==="punctuation"&&g.content==="{"?h[h.length-1].openedBraces++:h.length>0&&h[h.length-1].openedBraces>0&&g.type==="punctuation"&&g.content==="}"?h[h.length-1].openedBraces--:b=!0),(b||typeof g=="string")&&h.length>0&&h[h.length-1].openedBraces===0){var w=a(g);d<u.length-1&&(typeof u[d+1]=="string"||u[d+1].type==="plain-text")&&(w+=a(u[d+1]),u.splice(d+1,1)),d>0&&(typeof u[d-1]=="string"||u[d-1].type==="plain-text")&&(w=a(u[d-1])+w,u.splice(d-1,1),d--),u[d]=new t.Token("plain-text",w,null,w)}g.content&&typeof g.content!="string"&&l(g.content)}};t.hooks.add("after-tokenize",function(u){u.language!=="jsx"&&u.language!=="tsx"||l(u.tokens)})})(Prism);(function(t){var e=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",e),delete t.languages.tsx.parameter,delete t.languages.tsx["literal-property"];var n=t.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);var oE={},aE;function Xz(){return aE||(aE=1,Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),Prism.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),Prism.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),Prism.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),Prism.languages.scss.atrule.inside.rest=Prism.languages.scss),oE}Xz();(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+i+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+i+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(g){d!==g&&(t.languages.markdown[d].inside.content.inside[g]=t.languages.markdown[g])})}),t.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function g(b){if(!(!b||typeof b=="string"))for(var w=0,R=b.length;w<R;w++){var A=b[w];if(A.type!=="code"){g(A.content);continue}var C=A.content[1],I=A.content[3];if(C&&I&&C.type==="code-language"&&I.type==="code-block"&&typeof C.content=="string"){var M=C.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");M=(/[a-z][\w-]*/i.exec(M)||[""])[0].toLowerCase();var k="language-"+M;I.alias?typeof I.alias=="string"?I.alias=[I.alias,k]:I.alias.push(k):I.alias=[k]}}}g(d.tokens)}),t.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var g="",b=0,w=d.classes.length;b<w;b++){var R=d.classes[b],A=/language-(.+)/.exec(R);if(A){g=A[1];break}}var C=t.languages[g];if(C)d.content=t.highlight(h(d.content),C,g);else if(g&&g!=="none"&&t.plugins.autoloader){var I="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=I,t.plugins.autoloader.loadLanguages(g,function(){var M=document.getElementById(I);M&&(M.innerHTML=t.highlight(M.textContent,t.languages[g],g))})}}});var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function h(d){var g=d.replace(a,"");return g=g.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(b,w){if(w=w.toLowerCase(),w[0]==="#"){var R;return w[1]==="x"?R=parseInt(w.slice(2),16):R=Number(w.slice(1)),u(R)}else{var A=l[w];return A||b}}),g}t.languages.md=t.languages.markdown})(Prism);(function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var s=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,a=0;a<s.length;a++)i[s[a]]=t.languages.bash[s[a]];t.languages.sh=t.languages.bash,t.languages.shell=t.languages.bash})(Prism);(function(t){var e=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+e.source+")?|"+e.source+"(?:[ 	]+"+n.source+")?)",s=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(l,u){u=(u||"").replace(/m/g,"")+"m";var h=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return l});return RegExp(h,u)}t.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+s+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(i),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:e,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},t.languages.yml=t.languages.yaml})(Prism);const Yz=async()=>{const t=await fetch("http://localhost:3333/api/semantic-chunks");if(!t.ok)throw new Error("Failed to fetch semantic analysis");return t.json()};function Kz({chunk:t,isOpen:e,onClose:n}){const[r,s]=N.useState("");N.useEffect(()=>{if(e&&(t!=null&&t.code)){const l=(h=>{var g;switch((g=h.split(".").pop())==null?void 0:g.toLowerCase()){case"js":return"javascript";case"jsx":return"jsx";case"ts":return"typescript";case"tsx":return"tsx";case"json":return"json";case"css":return"css";case"scss":return"scss";case"md":return"markdown";case"sh":case"bash":return"bash";case"yml":case"yaml":return"yaml";default:return"javascript"}})(t.filePath),u=Gb.highlight(t.code,Gb.languages[l]||Gb.languages.javascript,l);s(u)}},[e,t]);const i=async()=>{if(t)try{const a=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t.filePath})});if(!a.ok){const l=await a.json();throw new Error(l.error||"Failed to open file")}ln.success(`Opening ${t.filePath} in editor...`)}catch(a){console.error("Failed to open in editor:",a),ln.error(`Could not open file: ${a instanceof Error?a.message:"Unknown error"}`)}};return!e||!t?null:m.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-background border rounded-lg shadow-lg w-full max-w-3xl max-h-[80vh] flex flex-col",children:[m.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-base",children:t.name}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filePath,t.startLine?`:${t.startLine}`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs(wt,{variant:"outline",size:"sm",onClick:i,title:"Open in external editor",children:[m.jsx(Yg,{className:"w-3 h-3 mr-1"}),"Open"]}),m.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.code||""),ln.success("Code copied to clipboard!")},children:[m.jsx(Qf,{className:"w-3 h-3 mr-1"}),"Copy"]}),m.jsx(wt,{variant:"outline",size:"sm",onClick:n,children:m.jsx(ws,{className:"w-3 h-3"})})]})]}),m.jsx("div",{className:"flex-1 overflow-auto p-3",children:t.code?m.jsx("div",{className:"bg-muted/30 rounded p-3",children:m.jsx("pre",{className:"text-xs font-mono overflow-x-auto",children:m.jsx("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:r}})})}):m.jsx("div",{className:"text-center text-muted-foreground py-6",children:"No code available for this chunk"})})]})})}function Zz(){var Ae,he,$e,D;const[t,e]=N.useState(!1),[n,r]=N.useState(null),[s,i]=N.useState(!1),[a,l]=N.useState(""),[u,h]=N.useState("all"),[d,g]=N.useState("all"),[b,w]=N.useState("all"),[R,A]=N.useState("all"),[C,I]=N.useState("all"),[M,k]=N.useState("all"),{data:P,isLoading:L,error:O,refetch:H}=Cs({queryKey:["semantic-analysis"],queryFn:Yz,staleTime:3e4,refetchInterval:6e4}),{data:Y}=Cs({queryKey:["bundle-states"],queryFn:async()=>{const te=await fetch("/api/bundles");if(!te.ok)throw new Error("Failed to fetch bundles");return te.json()},staleTime:3e4}),J=N.useMemo(()=>P!=null&&P.chunks?P.chunks.filter(G=>{var F,ge,ee;if(a){const we=a.toLowerCase();if(!(G.name.toLowerCase().includes(we)||G.purpose.toLowerCase().includes(we)||G.filePath.toLowerCase().includes(we)||((F=G.code)==null?void 0:F.toLowerCase().includes(we))))return!1}return!(u!=="all"&&G.semanticType!==u||d!=="all"&&((ge=G.complexity)==null?void 0:ge.level)!==d||b!=="all"&&!G.purpose.toLowerCase().includes(b.toLowerCase())||R==="async"&&!G.isAsync||R==="sync"&&G.isAsync||C==="exported"&&!G.isExported||C==="internal"&&G.isExported||M!=="all"&&!((ee=G.bundles)!=null&&ee.includes(M)))}):[],[P==null?void 0:P.chunks,a,u,d,b,R,C,M]),K=N.useMemo(()=>{if(!(P!=null&&P.chunks))return{types:[],purposes:[],complexities:[],bundles:[]};const te=[...new Set(P.chunks.map(ee=>ee.semanticType).filter(Boolean))].sort(),G=[...new Set(P.chunks.map(ee=>ee.purpose))].sort(),F=[...new Set(P.chunks.map(ee=>{var we;return(we=ee.complexity)==null?void 0:we.level}).filter(Boolean))].sort(),ge=Y?Y.map(ee=>ee.name).sort():[];return console.log("Bundle states data:",Y),console.log("Extracted bundles:",ge),{types:te,purposes:G,complexities:F,bundles:ge}},[P==null?void 0:P.chunks,Y]),Z=()=>{l(""),h("all"),g("all"),w("all"),A("all"),I("all"),k("all")},ae=a||u!=="all"||d!=="all"||b!=="all"||R!=="all"||C!=="all"||M!=="all",_e=te=>{r(te),i(!0)},oe=async(te,G)=>{try{const F={filePath:te};G&&(F.line=G);const ge=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!ge.ok){const ee=await ge.json();throw new Error(ee.error||"Failed to open file")}ln.success(`Opening ${te} in editor...`)}catch(F){console.error("Failed to open in editor:",F),ln.error(`Could not open file: ${F instanceof Error?F.message:"Unknown error"}`)}},Re=te=>{var G,F;return te.subtype==="react_component"||(G=te.tags)!=null&&G.includes("react_component")?m.jsx(Z_,{className:"w-4 h-4"}):(F=te.purpose)!=null&&F.includes("React hook")?m.jsx(Kg,{className:"w-4 h-4"}):te.subtype==="arrow_function"?m.jsx(Gf,{className:"w-4 h-4"}):te.subtype==="method"?m.jsx(qd,{className:"w-4 h-4"}):m.jsx(Gf,{className:"w-4 h-4"})},ie=te=>{switch(te){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}};return L?m.jsx(Ut,{children:m.jsx(qt,{className:"pt-6",children:m.jsxs("div",{className:"flex items-center justify-center py-8",children:[m.jsx(fs,{className:"w-6 h-6 animate-spin mr-2"}),m.jsx("span",{className:"text-sm",children:"Analyzing code semantics..."})]})})}):O?m.jsx(Ut,{children:m.jsx(qt,{className:"pt-6",children:m.jsxs(th,{children:[m.jsx(Xo,{className:"w-4 h-4"}),m.jsxs(nh,{children:["Failed to load semantic analysis. Make sure the server supports semantic chunking.",m.jsx(wt,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>H(),children:"Retry"})]})]})})}):P?m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center justify-between text-sm font-thin",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(yC,{className:"w-4 h-4"}),"Filters"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[ae&&m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:Z,children:[m.jsx(ws,{className:"w-3 h-3 mr-1"}),"Clear All"]}),m.jsx(wt,{variant:"outline",size:"sm",className:"h-7 text-xs md:hidden",onClick:()=>e(!t),children:t?m.jsx(RF,{className:"w-3 h-3"}):m.jsx(Xg,{className:"w-3 h-3"})})]})]})}),m.jsxs(qt,{className:`${t?"block":"hidden"} md:block`,children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[m.jsx("div",{className:"md:col-span-2 lg:col-span-2 xl:col-span-2",children:m.jsxs("div",{className:"relative",children:[m.jsx(xC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),m.jsx(PN,{placeholder:"Search functions...",value:a,onChange:te=>l(te.target.value),className:"pl-10 h-8 text-xs"})]})}),m.jsx("div",{children:m.jsxs(Da,{value:u,onValueChange:h,children:[m.jsx(Do,{className:"h-8 text-xs",children:m.jsx(ja,{placeholder:"Type"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"all",children:"All Types"}),K.types.map(te=>m.jsx(pr,{value:te,children:te},te))]})]})}),m.jsx("div",{children:m.jsxs(Da,{value:d,onValueChange:g,children:[m.jsx(Do,{className:"h-8 text-xs",children:m.jsx(ja,{placeholder:"Complexity"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"all",children:"All Complexity"}),K.complexities.map(te=>m.jsx(pr,{value:te,children:te},te))]})]})}),m.jsx("div",{children:m.jsxs(Da,{value:b,onValueChange:w,children:[m.jsx(Do,{className:"h-8 text-xs",children:m.jsx(ja,{placeholder:"Purpose"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"all",children:"All Purposes"}),K.purposes.map(te=>m.jsx(pr,{value:te,children:te},te))]})]})}),m.jsx("div",{children:m.jsxs(Da,{value:R,onValueChange:A,children:[m.jsx(Do,{className:"h-8 text-xs",children:m.jsx(ja,{placeholder:"Async"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"all",children:"All Functions"}),m.jsx(pr,{value:"async",children:"Async Only"}),m.jsx(pr,{value:"sync",children:"Sync Only"})]})]})}),m.jsx("div",{children:m.jsxs(Da,{value:M,onValueChange:k,children:[m.jsx(Do,{className:"h-8 text-xs",children:m.jsx(ja,{placeholder:"Bundle"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"all",children:"All Bundles"}),K.bundles.map(te=>m.jsx(pr,{value:te,children:te},te))]})]})})]}),ae&&m.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t",children:[a&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:['Search: "',a,'"',m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),l("")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]}),u!=="all"&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Type: ",u,m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),h("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]}),d!=="all"&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Complexity: ",d,m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),g("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]}),b!=="all"&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Purpose: ",b,m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),w("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]}),R!=="all"&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[R==="async"?"Async Only":"Sync Only",m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),A("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]}),M!=="all"&&m.jsxs(pn,{variant:"secondary",className:"text-xs flex items-center gap-1",children:["Bundle: ",M,m.jsx("button",{onClick:te=>{te.preventDefault(),te.stopPropagation(),k("all")},className:"ml-1 hover:bg-muted rounded-sm p-0.5",children:m.jsx(ws,{className:"w-3 h-3"})})]})]})]})]}),m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center justify-between text-sm font-thin",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Ac,{className:"w-4 h-4"}),"Project Analysis"]}),m.jsxs(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>H(),disabled:L,children:[m.jsx(fs,{className:"w-3 h-3 mr-1"}),"Refresh"]})]})}),m.jsx(qt,{children:m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-lg font-thin",children:((Ae=P.summary)==null?void 0:Ae.totalFiles)||0}),m.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Files Analyzed"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-lg font-thin",children:((he=P.summary)==null?void 0:he.totalFunctions)||0}),m.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Functions Extracted"})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"text-lg font-thin",children:[J.length,ae&&m.jsxs("span",{className:"text-sm text-muted-foreground",children:[" / ",(($e=P.summary)==null?void 0:$e.totalChunks)||0]})]}),m.jsxs("div",{className:"text-xs text-muted-foreground font-thin",children:[ae?"Filtered":"Total"," Chunks"]})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-lg font-thin",children:Math.round(((D=P.summary)==null?void 0:D.averageChunkSize)||0)}),m.jsx("div",{className:"text-xs text-muted-foreground font-thin",children:"Avg Chunk Size"})]})]})})]}),J.length===0?m.jsx(Ut,{children:m.jsx(qt,{className:"pt-6",children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx(qd,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),m.jsx("h3",{className:"text-lg font-thin mb-2",children:"No chunks match your filters"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your search criteria or clearing the filters."}),ae&&m.jsx(wt,{variant:"outline",onClick:Z,children:"Clear All Filters"})]})})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map((te,G)=>{var F,ge,ee,we,ue,ce,Me,ze,Ue,Ke;return m.jsxs(Ut,{className:"relative",children:[m.jsx(En,{children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[m.jsx("div",{className:"mt-1 flex-shrink-0",children:Re(te)}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx(Cn,{className:"text-sm font-thin tracking-wide truncate",children:te.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[m.jsx(pn,{variant:"outline",className:"text-xs h-4",children:te.subtype||te.type}),m.jsxs(pn,{variant:"outline",className:"text-xs h-4",children:[te.size," chars"]}),m.jsxs(pn,{variant:"outline",className:`text-xs h-4 ${ie(((F=te.complexity)==null?void 0:F.level)||"unknown")}`,children:[((ge=te.complexity)==null?void 0:ge.level)||"unknown"," complexity"]}),te.isAsync&&m.jsx(pn,{variant:"outline",className:"text-xs h-4 bg-blue-50",children:"async"}),te.isExported&&m.jsx(pn,{variant:"outline",className:"text-xs h-4 bg-green-50",children:"exported"})]})]})]}),m.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[m.jsx(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>oe(te.filePath,te.startLine),title:"Open in external editor",children:m.jsx(Yg,{className:"w-3 h-3"})}),m.jsx(wt,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>_e(te),title:"View code preview",children:m.jsx(mC,{className:"w-3 h-3"})})]})]})}),m.jsx(qt,{children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs text-muted-foreground font-thin mb-2 line-clamp-2",children:[m.jsx(f6,{className:"w-3 h-3 inline mr-1"}),te.purpose]}),m.jsxs("div",{className:"flex flex-wrap gap-1",children:[(te.tags||[]).slice(0,4).map(Ze=>m.jsx(pn,{variant:"secondary",className:"text-xs h-4",children:Ze},Ze)),(te.tags||[]).length>4&&m.jsxs(pn,{variant:"secondary",className:"text-xs h-4",children:["+",(te.tags||[]).length-4," more"]})]})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-xs font-thin mb-1",children:"Location:"}),m.jsxs("div",{className:"text-xs text-muted-foreground font-thin font-mono truncate",children:[te.filePath,te.startLine?`:${te.startLine}`:""]})]}),(((ee=te.bundles)==null?void 0:ee.length)||0)>0&&m.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50 rounded text-xs",children:[m.jsx(qd,{className:"w-3 h-3 mt-0.5 text-blue-600 flex-shrink-0"}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"font-thin text-blue-800",children:"Bundles:"}),m.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(we=te.bundles)==null?void 0:we.slice(0,2).map(Ze=>m.jsx(pn,{variant:"outline",className:"text-xs h-4 bg-blue-100 text-blue-700 border-blue-200",children:Ze},Ze)),(((ue=te.bundles)==null?void 0:ue.length)||0)>2&&m.jsxs(pn,{variant:"outline",className:"text-xs h-4 bg-blue-100 text-blue-700 border-blue-200",children:["+",(((ce=te.bundles)==null?void 0:ce.length)||0)-2," more"]})]})]})]}),(((Me=te.includes)==null?void 0:Me.imports.length)||0)>0&&m.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/50 rounded text-xs",children:[m.jsx(qd,{className:"w-3 h-3 mt-0.5 text-blue-500 flex-shrink-0"}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"font-thin",children:"Imports:"}),m.jsx("div",{className:"font-thin truncate",children:(ze=te.includes)==null?void 0:ze.imports.slice(0,2).join(", ")}),(((Ue=te.includes)==null?void 0:Ue.imports.length)||0)>2&&m.jsxs("div",{className:"text-muted-foreground",children:["+",(((Ke=te.includes)==null?void 0:Ke.imports.length)||0)-2," more"]})]})]})]})})]},`${te.filePath}-${te.name}-${G}`)})}),m.jsx(Kz,{chunk:n,isOpen:s,onClose:()=>{i(!1),r(null)}})]}):null}function lE(){const{theme:t,setTheme:e}=EB();return m.jsxs(wt,{variant:"ghost",size:"sm",onClick:()=>e(t==="light"?"dark":"light"),className:"h-8 w-8 p-0",children:[m.jsx(E6,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),m.jsx(i6,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),m.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}var cE=1,Qz=.9,Gz=.8,Jz=.17,Jb=.1,ex=.999,e5=.9999,t5=.99,n5=/[\\\/_+.#"@\[\(\{&]/,r5=/[\\\/_+.#"@\[\(\{&]/g,s5=/[\s-]/,DN=/[\s-]/g;function Pv(t,e,n,r,s,i,a){if(i===e.length)return s===t.length?cE:t5;var l=`${s},${i}`;if(a[l]!==void 0)return a[l];for(var u=r.charAt(i),h=n.indexOf(u,s),d=0,g,b,w,R;h>=0;)g=Pv(t,e,n,r,h+1,i+1,a),g>d&&(h===s?g*=cE:n5.test(t.charAt(h-1))?(g*=Gz,w=t.slice(s,h-1).match(r5),w&&s>0&&(g*=Math.pow(ex,w.length))):s5.test(t.charAt(h-1))?(g*=Qz,R=t.slice(s,h-1).match(DN),R&&s>0&&(g*=Math.pow(ex,R.length))):(g*=Jz,s>0&&(g*=Math.pow(ex,h-s))),t.charAt(h)!==e.charAt(i)&&(g*=e5)),(g<Jb&&n.charAt(h-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(h-1)!==r.charAt(i))&&(b=Pv(t,e,n,r,h+1,i+2,a),b*Jb>g&&(g=b*Jb)),g>d&&(d=g),h=n.indexOf(u,h+1);return a[l]=d,d}function uE(t){return t.toLowerCase().replace(DN," ")}function i5(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Pv(t,e,uE(t),uE(e),0,0,{})}var bf='[cmdk-group=""]',tx='[cmdk-group-items=""]',o5='[cmdk-group-heading=""]',jN='[cmdk-item=""]',fE=`${jN}:not([aria-disabled="true"])`,Dv="cmdk-item-select",gc="data-value",a5=(t,e,n)=>i5(t,e,n),FN=N.createContext(void 0),xh=()=>N.useContext(FN),BN=N.createContext(void 0),w0=()=>N.useContext(BN),LN=N.createContext(void 0),UN=N.forwardRef((t,e)=>{let n=mc(()=>{var G,F;return{search:"",value:(F=(G=t.value)!=null?G:t.defaultValue)!=null?F:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=mc(()=>new Set),s=mc(()=>new Map),i=mc(()=>new Map),a=mc(()=>new Set),l=zN(t),{label:u,children:h,value:d,onValueChange:g,filter:b,shouldFilter:w,loop:R,disablePointerSelection:A=!1,vimBindings:C=!0,...I}=t,M=Fr(),k=Fr(),P=Fr(),L=N.useRef(null),O=b5();cl(()=>{if(d!==void 0){let G=d.trim();n.current.value=G,H.emit()}},[d]),cl(()=>{O(6,_e)},[]);let H=N.useMemo(()=>({subscribe:G=>(a.current.add(G),()=>a.current.delete(G)),snapshot:()=>n.current,setState:(G,F,ge)=>{var ee,we,ue,ce;if(!Object.is(n.current[G],F)){if(n.current[G]=F,G==="search")ae(),K(),O(1,Z);else if(G==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Me=document.getElementById(P);Me?Me.focus():(ee=document.getElementById(M))==null||ee.focus()}if(O(7,()=>{var Me;n.current.selectedItemId=(Me=oe())==null?void 0:Me.id,H.emit()}),ge||O(5,_e),((we=l.current)==null?void 0:we.value)!==void 0){let Me=F??"";(ce=(ue=l.current).onValueChange)==null||ce.call(ue,Me);return}}H.emit()}},emit:()=>{a.current.forEach(G=>G())}}),[]),Y=N.useMemo(()=>({value:(G,F,ge)=>{var ee;F!==((ee=i.current.get(G))==null?void 0:ee.value)&&(i.current.set(G,{value:F,keywords:ge}),n.current.filtered.items.set(G,J(F,ge)),O(2,()=>{K(),H.emit()}))},item:(G,F)=>(r.current.add(G),F&&(s.current.has(F)?s.current.get(F).add(G):s.current.set(F,new Set([G]))),O(3,()=>{ae(),K(),n.current.value||Z(),H.emit()}),()=>{i.current.delete(G),r.current.delete(G),n.current.filtered.items.delete(G);let ge=oe();O(4,()=>{ae(),(ge==null?void 0:ge.getAttribute("id"))===G&&Z(),H.emit()})}),group:G=>(s.current.has(G)||s.current.set(G,new Set),()=>{i.current.delete(G),s.current.delete(G)}),filter:()=>l.current.shouldFilter,label:u||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:M,inputId:P,labelId:k,listInnerRef:L}),[]);function J(G,F){var ge,ee;let we=(ee=(ge=l.current)==null?void 0:ge.filter)!=null?ee:a5;return G?we(G,n.current.search,F):0}function K(){if(!n.current.search||l.current.shouldFilter===!1)return;let G=n.current.filtered.items,F=[];n.current.filtered.groups.forEach(ee=>{let we=s.current.get(ee),ue=0;we.forEach(ce=>{let Me=G.get(ce);ue=Math.max(Me,ue)}),F.push([ee,ue])});let ge=L.current;Re().sort((ee,we)=>{var ue,ce;let Me=ee.getAttribute("id"),ze=we.getAttribute("id");return((ue=G.get(ze))!=null?ue:0)-((ce=G.get(Me))!=null?ce:0)}).forEach(ee=>{let we=ee.closest(tx);we?we.appendChild(ee.parentElement===we?ee:ee.closest(`${tx} > *`)):ge.appendChild(ee.parentElement===ge?ee:ee.closest(`${tx} > *`))}),F.sort((ee,we)=>we[1]-ee[1]).forEach(ee=>{var we;let ue=(we=L.current)==null?void 0:we.querySelector(`${bf}[${gc}="${encodeURIComponent(ee[0])}"]`);ue==null||ue.parentElement.appendChild(ue)})}function Z(){let G=Re().find(ge=>ge.getAttribute("aria-disabled")!=="true"),F=G==null?void 0:G.getAttribute(gc);H.setState("value",F||void 0)}function ae(){var G,F,ge,ee;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let we=0;for(let ue of r.current){let ce=(F=(G=i.current.get(ue))==null?void 0:G.value)!=null?F:"",Me=(ee=(ge=i.current.get(ue))==null?void 0:ge.keywords)!=null?ee:[],ze=J(ce,Me);n.current.filtered.items.set(ue,ze),ze>0&&we++}for(let[ue,ce]of s.current)for(let Me of ce)if(n.current.filtered.items.get(Me)>0){n.current.filtered.groups.add(ue);break}n.current.filtered.count=we}function _e(){var G,F,ge;let ee=oe();ee&&(((G=ee.parentElement)==null?void 0:G.firstChild)===ee&&((ge=(F=ee.closest(bf))==null?void 0:F.querySelector(o5))==null||ge.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function oe(){var G;return(G=L.current)==null?void 0:G.querySelector(`${jN}[aria-selected="true"]`)}function Re(){var G;return Array.from(((G=L.current)==null?void 0:G.querySelectorAll(fE))||[])}function ie(G){let F=Re()[G];F&&H.setState("value",F.getAttribute(gc))}function Ae(G){var F;let ge=oe(),ee=Re(),we=ee.findIndex(ce=>ce===ge),ue=ee[we+G];(F=l.current)!=null&&F.loop&&(ue=we+G<0?ee[ee.length-1]:we+G===ee.length?ee[0]:ee[we+G]),ue&&H.setState("value",ue.getAttribute(gc))}function he(G){let F=oe(),ge=F==null?void 0:F.closest(bf),ee;for(;ge&&!ee;)ge=G>0?m5(ge,bf):y5(ge,bf),ee=ge==null?void 0:ge.querySelector(fE);ee?H.setState("value",ee.getAttribute(gc)):Ae(G)}let $e=()=>ie(Re().length-1),D=G=>{G.preventDefault(),G.metaKey?$e():G.altKey?he(1):Ae(1)},te=G=>{G.preventDefault(),G.metaKey?ie(0):G.altKey?he(-1):Ae(-1)};return N.createElement(mt.div,{ref:e,tabIndex:-1,...I,"cmdk-root":"",onKeyDown:G=>{var F;(F=I.onKeyDown)==null||F.call(I,G);let ge=G.nativeEvent.isComposing||G.keyCode===229;if(!(G.defaultPrevented||ge))switch(G.key){case"n":case"j":{C&&G.ctrlKey&&D(G);break}case"ArrowDown":{D(G);break}case"p":case"k":{C&&G.ctrlKey&&te(G);break}case"ArrowUp":{te(G);break}case"Home":{G.preventDefault(),ie(0);break}case"End":{G.preventDefault(),$e();break}case"Enter":{G.preventDefault();let ee=oe();if(ee){let we=new Event(Dv);ee.dispatchEvent(we)}}}}},N.createElement("label",{"cmdk-label":"",htmlFor:Y.inputId,id:Y.labelId,style:v5},u),lm(t,G=>N.createElement(BN.Provider,{value:H},N.createElement(FN.Provider,{value:Y},G))))}),l5=N.forwardRef((t,e)=>{var n,r;let s=Fr(),i=N.useRef(null),a=N.useContext(LN),l=xh(),u=zN(t),h=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;cl(()=>{if(!h)return l.item(s,a==null?void 0:a.id)},[h]);let d=VN(s,i,[t.value,t.children,i],t.keywords),g=w0(),b=na(O=>O.value&&O.value===d.current),w=na(O=>h||l.filter()===!1?!0:O.search?O.filtered.items.get(s)>0:!0);N.useEffect(()=>{let O=i.current;if(!(!O||t.disabled))return O.addEventListener(Dv,R),()=>O.removeEventListener(Dv,R)},[w,t.onSelect,t.disabled]);function R(){var O,H;A(),(H=(O=u.current).onSelect)==null||H.call(O,d.current)}function A(){g.setState("value",d.current,!0)}if(!w)return null;let{disabled:C,value:I,onSelect:M,forceMount:k,keywords:P,...L}=t;return N.createElement(mt.div,{ref:tl(i,e),...L,id:s,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!b,"data-disabled":!!C,"data-selected":!!b,onPointerMove:C||l.getDisablePointerSelection()?void 0:A,onClick:C?void 0:R},t.children)}),c5=N.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,a=Fr(),l=N.useRef(null),u=N.useRef(null),h=Fr(),d=xh(),g=na(w=>s||d.filter()===!1?!0:w.search?w.filtered.groups.has(a):!0);cl(()=>d.group(a),[]),VN(a,l,[t.value,t.heading,u]);let b=N.useMemo(()=>({id:a,forceMount:s}),[s]);return N.createElement(mt.div,{ref:tl(l,e),...i,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},n&&N.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:h},n),lm(t,w=>N.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?h:void 0},N.createElement(LN.Provider,{value:b},w))))}),u5=N.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=N.useRef(null),i=na(a=>!a.search);return!n&&!i?null:N.createElement(mt.div,{ref:tl(s,e),...r,"cmdk-separator":"",role:"separator"})}),f5=N.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=w0(),a=na(h=>h.search),l=na(h=>h.selectedItemId),u=xh();return N.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),N.createElement(mt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":l,id:u.inputId,type:"text",value:s?t.value:a,onChange:h=>{s||i.setState("search",h.target.value),n==null||n(h.target.value)}})}),h5=N.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,i=N.useRef(null),a=N.useRef(null),l=na(h=>h.selectedItemId),u=xh();return N.useEffect(()=>{if(a.current&&i.current){let h=a.current,d=i.current,g,b=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let w=h.offsetHeight;d.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return b.observe(h),()=>{cancelAnimationFrame(g),b.unobserve(h)}}},[]),N.createElement(mt.div,{ref:tl(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:u.listId},lm(t,h=>N.createElement("div",{ref:tl(a,u.listInnerRef),"cmdk-list-sizer":""},h)))}),d5=N.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:a,...l}=t;return N.createElement(Rz,{open:n,onOpenChange:r},N.createElement(Cz,{container:a},N.createElement(kz,{"cmdk-overlay":"",className:s}),N.createElement(Nz,{"aria-label":t.label,"cmdk-dialog":"",className:i},N.createElement(UN,{ref:e,...l}))))}),p5=N.forwardRef((t,e)=>na(n=>n.filtered.count===0)?N.createElement(mt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),g5=N.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...i}=t;return N.createElement(mt.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},lm(t,a=>N.createElement("div",{"aria-hidden":!0},a)))}),vh=Object.assign(UN,{List:h5,Item:l5,Input:f5,Group:c5,Separator:u5,Dialog:d5,Empty:p5,Loading:g5});function m5(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function y5(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function zN(t){let e=N.useRef(t);return cl(()=>{e.current=t}),e}var cl=typeof window>"u"?N.useEffect:N.useLayoutEffect;function mc(t){let e=N.useRef();return e.current===void 0&&(e.current=t()),e}function na(t){let e=w0(),n=()=>t(e.snapshot());return N.useSyncExternalStore(e.subscribe,n,n)}function VN(t,e,n,r=[]){let s=N.useRef(),i=xh();return cl(()=>{var a;let l=(()=>{var h;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(h=d.current.textContent)==null?void 0:h.trim():s.current}})(),u=r.map(h=>h.trim());i.value(t,l,u),(a=e.current)==null||a.setAttribute(gc,l),s.current=l}),s}var b5=()=>{let[t,e]=N.useState(),n=mc(()=>new Map);return cl(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function x5(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function lm({asChild:t,children:e},n){return t&&N.isValidElement(e)?N.cloneElement(x5(e),{ref:e.ref},n(e.props.children)):n(e)}var v5={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function _5({className:t,...e}){return m.jsx(vh,{"data-slot":"command",className:Dt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function w5({className:t,...e}){return m.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[m.jsx(xC,{className:"size-4 shrink-0 opacity-50"}),m.jsx(vh.Input,{"data-slot":"command-input",className:Dt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function S5({...t}){return m.jsx(vh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function T5({className:t,...e}){return m.jsx(vh.Group,{"data-slot":"command-group",className:Dt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-thin",t),...e})}function hE({className:t,...e}){return m.jsx(vh.Item,{"data-slot":"command-item",className:Dt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}var cm="Popover",[$N,Hie]=Ki(cm,[tm]),_h=tm(),[E5,ca]=$N(cm),HN=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=_h(e),u=N.useRef(null),[h,d]=N.useState(!1),[g,b]=rl({prop:r,defaultProp:s??!1,onChange:i,caller:cm});return m.jsx(_k,{...l,children:m.jsx(E5,{scope:e,contentId:Fr(),triggerRef:u,open:g,onOpenChange:b,onOpenToggle:N.useCallback(()=>b(w=>!w),[b]),hasCustomAnchor:h,onCustomAnchorAdd:N.useCallback(()=>d(!0),[]),onCustomAnchorRemove:N.useCallback(()=>d(!1),[]),modal:a,children:n})})};HN.displayName=cm;var WN="PopoverAnchor",A5=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ca(WN,n),i=_h(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return N.useEffect(()=>(a(),()=>l()),[a,l]),m.jsx(d0,{...i,...r,ref:e})});A5.displayName=WN;var qN="PopoverTrigger",XN=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ca(qN,n),i=_h(n),a=Tn(e,s.triggerRef),l=m.jsx(mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":GN(s.open),...r,ref:a,onClick:vt(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:m.jsx(d0,{asChild:!0,...i,children:l})});XN.displayName=qN;var S0="PopoverPortal",[R5,C5]=$N(S0,{forceMount:void 0}),YN=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=ca(S0,e);return m.jsx(R5,{scope:e,forceMount:n,children:m.jsx(sa,{present:n||i.open,children:m.jsx(gh,{asChild:!0,container:s,children:r})})})};YN.displayName=S0;var Yc="PopoverContent",KN=N.forwardRef((t,e)=>{const n=C5(Yc,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=ca(Yc,t.__scopePopover);return m.jsx(sa,{present:r||i.open,children:i.modal?m.jsx(N5,{...s,ref:e}):m.jsx(M5,{...s,ref:e})})});KN.displayName=Yc;var k5=nl("PopoverContent.RemoveScroll"),N5=N.forwardRef((t,e)=>{const n=ca(Yc,t.__scopePopover),r=N.useRef(null),s=Tn(e,r),i=N.useRef(!1);return N.useEffect(()=>{const a=r.current;if(a)return p0(a)},[]),m.jsx(rm,{as:k5,allowPinchZoom:!0,children:m.jsx(ZN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vt(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:vt(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,h=l.button===2||u;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:vt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),M5=N.forwardRef((t,e)=>{const n=ca(Yc,t.__scopePopover),r=N.useRef(!1),s=N.useRef(!1);return m.jsx(ZN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),ZN=N.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:d,...g}=t,b=ca(Yc,n),w=_h(n);return r0(),m.jsx(Qg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:m.jsx(ph,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>b.onOpenChange(!1),children:m.jsx(wk,{"data-state":GN(b.open),role:"dialog",id:b.contentId,...w,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),QN="PopoverClose",I5=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=ca(QN,n);return m.jsx(mt.button,{type:"button",...r,ref:e,onClick:vt(t.onClick,()=>s.onOpenChange(!1))})});I5.displayName=QN;var O5="PopoverArrow",P5=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=_h(n);return m.jsx(Sk,{...s,...r,ref:e})});P5.displayName=O5;function GN(t){return t?"open":"closed"}var D5=HN,j5=XN,F5=YN,B5=KN;function L5({...t}){return m.jsx(D5,{"data-slot":"popover",...t})}function U5({...t}){return m.jsx(j5,{"data-slot":"popover-trigger",...t})}function z5({className:t,align:e="center",sideOffset:n=4,...r}){return m.jsx(F5,{children:m.jsx(B5,{"data-slot":"popover-content",align:e,sideOffset:n,className:Dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}function dE({options:t,selected:e,onSelectedChange:n,placeholder:r="Select items...",className:s}){const[i,a]=N.useState(!1),l=g=>{e.includes(g)?n(e.filter(b=>b!==g)):n([...e,g])},u=g=>{n(e.filter(b=>b!==g))},h=()=>{n([])},d=t.filter(g=>e.includes(g.value));return m.jsxs(L5,{open:i,onOpenChange:a,children:[m.jsx(U5,{asChild:!0,children:m.jsxs(wt,{variant:"outline",role:"combobox","aria-expanded":i,className:Dt("w-full justify-between h-8 px-2 py-1 text-sm",s),children:[m.jsx("div",{className:"flex items-center gap-1 flex-1 overflow-hidden",children:d.length===0?m.jsx("span",{className:"text-muted-foreground",children:r}):m.jsx("div",{className:"flex items-center gap-1 overflow-x-auto scrollbar-hide flex-1 min-w-0",children:m.jsx("div",{className:"flex items-center gap-1 flex-nowrap",children:d.map(g=>m.jsxs(pn,{variant:"secondary",className:"flex-shrink-0 whitespace-nowrap px-1 py-0.5 text-xs",style:g.color?{backgroundColor:g.color+"20",borderColor:g.color,color:g.color}:void 0,children:[g.label,m.jsx("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:b=>{b.key==="Enter"&&u(g.value)},onMouseDown:b=>{b.preventDefault(),b.stopPropagation()},onClick:()=>u(g.value),children:m.jsx(ws,{className:"h-2.5 w-2.5 text-muted-foreground hover:text-foreground"})})]},g.value))})})}),m.jsx(kF,{className:"h-4 w-4 shrink-0 opacity-50 ml-2"})]})}),m.jsx(z5,{className:"w-full p-0",align:"start",children:m.jsxs(_5,{children:[m.jsx(w5,{placeholder:"Search...",className:"h-8 text-sm"}),m.jsx(S5,{children:"No options found."}),m.jsxs(T5,{className:"max-h-64 overflow-auto",children:[t.map(g=>m.jsxs(hE,{value:g.value,onSelect:()=>l(g.value),className:"text-sm",children:[m.jsx(pC,{className:Dt("mr-2 h-4 w-4",e.includes(g.value)?"opacity-100":"opacity-0")}),m.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[g.color&&m.jsx("div",{className:"w-3 h-3 rounded-full border border-border/50",style:{backgroundColor:g.color}}),m.jsx("span",{children:g.label})]})]},g.value)),e.length>0&&m.jsx(hE,{onSelect:h,className:"justify-center text-center text-muted-foreground",children:"Clear all selections"})]})]})})]})}function Kp(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const T0=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),pE=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);pE&&parseFloat(pE[1]);const np=globalThis,sc=globalThis.process||{},V5=globalThis.navigator||{};function JN(t){var r,s;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((s=process.versions)!=null&&s.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function gl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||JN()}function $5(t){return gl()?JN()?"Electron":(V5.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const eM="4.1.0";function H5(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class W5{constructor(e,n,r="sessionStorage"){this.storage=H5(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function q5(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function X5(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var Zp;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Zp||(Zp={}));const Y5=10;function gE(t){return typeof t!="string"?t:(t=t.toUpperCase(),Zp[t]||Zp.WHITE)}function K5(t,e,n){return!gl&&typeof t=="string"&&(e&&(t=`\x1B[${gE(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${gE(n)+Y5}m${t}\x1B[49m`)),t}function Z5(t,e=["constructor"]){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),s=t;for(const i of r){const a=s[i];typeof a=="function"&&(e.find(l=>i===l)||(s[i]=a.bind(t)))}}function E0(t,e){if(!t)throw new Error("Assertion failed")}function ic(){var e,n,r;let t;if(gl()&&np.performance)t=(n=(e=np==null?void 0:np.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in sc){const s=(r=sc==null?void 0:sc.hrtime)==null?void 0:r.call(sc);t=s[0]*1e3+s[1]/1e6}else t=Date.now();return t}const oc={debug:gl()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Q5={enabled:!0,level:0};function ac(){}const mE={},yE={once:!0};class wh{constructor({id:e}={id:""}){this.VERSION=eM,this._startTs=ic(),this._deltaTs=ic(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new W5(`__probe-${this.id}__`,Q5),this.timeStamp(`${this.id} started`),Z5(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ic()-this._startTs).toPrecision(10))}getDelta(){return Number((ic()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,oc.warn,arguments,yE)}error(e){return this._getLogFunction(0,e,oc.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,oc.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,oc.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,oc.debug||oc.info,arguments,yE)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||ac,r&&[r],{tag:J5(n)}):ac}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ac)}group(e,n,r={collapsed:!1}){const s=bE({logLevel:e,message:n,opts:r}),{collapsed:i}=r;return s.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ac)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=tM(e)}_getLogFunction(e,n,r,s,i){if(this._shouldLog(e)){i=bE({logLevel:e,message:n,args:s,opts:i}),r=r||i.method,E0(r),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=ic();const a=i.tag||i.message;if(i.once&&a)if(!mE[a])mE[a]=ic();else return ac;return n=G5(this.id,i.message,i),r.bind(console,n,...i.args)}return ac}}wh.VERSION=eM;function tM(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return E0(Number.isFinite(e)&&e>=0),e}function bE(t){const{logLevel:e,message:n}=t;t.logLevel=tM(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const s=typeof t.message;return E0(s==="string"||s==="object"),Object.assign(t,{args:r},t.opts)}function G5(t,e,n){if(typeof e=="string"){const r=n.time?X5(q5(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=K5(e,n.color,n.background)}return e}function J5(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const nx="4.3.3",eV=nx[0]>="0"&&nx[0]<="9"?`v${nx}`:"";function tV(){const t=new wh({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=eV,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const nV=tV();function rV(t,e){return nM(t||{},e)}function nM(t,e,n=0){if(n>3)return e;const r={...t};for(const[s,i]of Object.entries(e))i&&typeof i=="object"&&!Array.isArray(i)?r[s]=nM(r[s]||{},e[s],n+1):r[s]=e[s];return r}const sV="latest";function iV(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const oV=iV();function ra(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Ya=typeof process!="object"||String(process)!=="[object process]"||process.browser,aV=typeof window<"u"&&typeof window.orientation<"u",xE=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);xE&&parseFloat(xE[1]);class lV{constructor(e,n){z(this,"name");z(this,"workerThread");z(this,"isRunning",!0);z(this,"result");z(this,"_resolve",()=>{});z(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ra(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ra(this.isRunning),this.isRunning=!1,this._reject(e)}}class rx{terminate(){}}const sx=new Map;function cV(t){ra(t.source&&!t.url||!t.source&&t.url);let e=sx.get(t.source||t.url);return e||(t.url&&(e=uV(t.url),sx.set(t.url,e)),t.source&&(e=rM(t.source),sx.set(t.source,e))),ra(e),e}function uV(t){if(!t.startsWith("http"))return t;const e=fV(t);return rM(e)}function rM(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function fV(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function sM(t,e=!0,n){const r=n||new Set;if(t){if(vE(t))r.add(t);else if(vE(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const s in t)sM(t[s],e,r)}}return n===void 0?Array.from(r):[]}function vE(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const ix=()=>{};class jv{constructor(e){z(this,"name");z(this,"source");z(this,"url");z(this,"terminated",!1);z(this,"worker");z(this,"onMessage");z(this,"onError");z(this,"_loadableURL","");const{name:n,source:r,url:s}=e;ra(r||s),this.name=n,this.source=r,this.url=s,this.onMessage=ix,this.onError=i=>console.log(i),this.worker=Ya?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Ya||typeof rx<"u"&&!Ya}destroy(){this.onMessage=ix,this.onError=ix,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||sM(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=cV({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new rx(r,{eval:!1})}else if(this.source)e=new rx(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class hV{constructor(e){z(this,"name","unnamed");z(this,"source");z(this,"url");z(this,"maxConcurrency",1);z(this,"maxMobileConcurrency",1);z(this,"onDebug",()=>{});z(this,"reuseWorkers",!0);z(this,"props",{});z(this,"jobQueue",[]);z(this,"idleQueue",[]);z(this,"count",0);z(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return jv.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(s,i,a)=>s.done(a),r=(s,i)=>s.error(i)){const s=new Promise(i=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:i}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new lV(n.name,e);e.onMessage=s=>n.onMessage(r,s.type,s.payload),e.onError=s=>n.onError(r,s),n.onStart(r);try{await r.result}catch(s){console.error(`Worker exception: ${s}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Ya||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new jv({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return aV?this.maxMobileConcurrency:this.maxConcurrency}}const dV={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Oo=class Oo{constructor(e){z(this,"props");z(this,"workerPools",new Map);this.props={...dV},this.setProps(e),this.workerPools=new Map}static isSupported(){return jv.isSupported()}static getWorkerFarm(e={}){return Oo._workerFarm=Oo._workerFarm||new Oo({}),Oo._workerFarm.setProps(e),Oo._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:s}=e;let i=this.workerPools.get(n);return i||(i=new hV({name:n,source:r,url:s}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};z(Oo,"_workerFarm");let Qp=Oo;function pV(t,e={}){const n=e[t.id]||{},r=Ya?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let s=n.workerUrl;if(!s&&t.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(Ya?s=`modules/${t.module}/dist/${r}`:s=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!s){let i=t.version;i==="latest"&&(i=sV);const a=i?`@${i}`:"";s=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${r}`}return ra(s),s}function gV(t,e=oV){ra(t,"no worker provided");const n=t.version;return!(!e||!n)}function mV(t,e){return!Qp.isSupported()||!Ya&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function yV(t,e,n,r,s){const i=t.id,a=pV(t,n),u=Qp.getWorkerFarm(n).getWorkerPool({name:i,url:a});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const h=await u.startJob("process-on-worker",bV.bind(null,s));return h.postMessage("process",{input:e,options:n,context:r}),await(await h.result).result}async function bV(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:s,input:i,options:a}=r;try{const l=await t(i,a);e.postMessage("done",{id:s,result:l})}catch(l){const u=l instanceof Error?l.message:"unknown error";e.postMessage("error",{id:s,error:u})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function xV(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),s=new Uint8Array(e);for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}function vV(...t){return _V(t)}function _V(t){const e=t.map(i=>i instanceof ArrayBuffer?new Uint8Array(i):i),n=e.reduce((i,a)=>i+a.byteLength,0),r=new Uint8Array(n);let s=0;for(const i of e)r.set(i,s),s+=i.byteLength;return r.buffer}async function wV(t){const e=[];for await(const n of t)e.push(n);return vV(...e)}function _E(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class wE{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=_E(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(_E()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class um{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let s=this.stats[n];return s||(e instanceof wE?s=e:s=new wE(n,r),this.stats[n]=s),s}}let SV="";const SE={};function TV(t){for(const e in SE)if(t.startsWith(e)){const n=SE[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${SV}${t}`),t}function EV(t){return t&&typeof t=="object"&&t.isBuffer}function iM(t){if(EV(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function oM(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function AV(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const RV=t=>typeof t=="boolean",Bf=t=>typeof t=="function",Sh=t=>t!==null&&typeof t=="object",TE=t=>Sh(t)&&t.constructor==={}.constructor,CV=t=>!!t&&typeof t[Symbol.iterator]=="function",kV=t=>t&&typeof t[Symbol.asyncIterator]=="function",ml=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,yl=t=>typeof Blob<"u"&&t instanceof Blob,NV=t=>t&&typeof t=="object"&&t.isBuffer,MV=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Sh(t)&&Bf(t.tee)&&Bf(t.cancel)&&Bf(t.getReader),IV=t=>Sh(t)&&Bf(t.read)&&Bf(t.pipe)&&RV(t.readable),aM=t=>MV(t)||IV(t);class OV extends Error{constructor(n,r){super(n);z(this,"reason");z(this,"url");z(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const PV=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,DV=/^([-\w.]+\/[-\w.+]+)/;function EE(t,e){return t.toLowerCase()===e.toLowerCase()}function jV(t){const e=DV.exec(t);return e?e[1]:t}function AE(t){const e=PV.exec(t);return e?e[1]:""}const lM=/\?.*/;function FV(t){const e=t.match(lM);return e&&e[0]}function A0(t){return t.replace(lM,"")}function BV(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function fm(t){return ml(t)?t.url:yl(t)?t.name||"":typeof t=="string"?t:""}function R0(t){if(ml(t)){const e=t,n=e.headers.get("content-type")||"",r=A0(e.url);return jV(n)||AE(r)}return yl(t)?t.type||"":typeof t=="string"?AE(t):""}function LV(t){return ml(t)?t.headers["content-length"]||-1:yl(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function cM(t){if(ml(t))return t;const e={},n=LV(t);n>=0&&(e["content-length"]=String(n));const r=fm(t),s=R0(t);s&&(e["content-type"]=s);const i=await VV(t);i&&(e["x-first-bytes"]=i),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:r}),a}async function UV(t){if(!t.ok)throw await zV(t)}async function zV(t){const e=BV(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:t.statusText,url:t.url,response:t};try{const s=t.headers.get("Content-Type");r.reason=!t.bodyUsed&&(s!=null&&s.includes("application/json"))?await t.json():await t.text()}catch{}return new OV(n,r)}async function VV(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=i=>{var a;return r((a=i==null?void 0:i.target)==null?void 0:a.result)},s.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${$V(n)}`}return null}function $V(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function HV(t){return!WV(t)&&!qV(t)}function WV(t){return t.startsWith("http:")||t.startsWith("https:")}function qV(t){return t.startsWith("data:")}async function RE(t,e){var n,r;if(typeof t=="string"){const s=TV(t);return HV(s)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(s,e):await fetch(s,e)}return await cM(t)}const CE=new wh({id:"loaders.gl"});class XV{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class YV{constructor(){z(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const uM={fetch:null,mimeType:void 0,nothrow:!1,log:new YV,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:T0,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},KV={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function fM(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function hM(){const t=fM();return t.globalOptions=t.globalOptions||{...uM},t.globalOptions}function ZV(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],QV(t,n),JV(e,t,r)}function QV(t,e){kE(t,null,uM,KV,e);for(const n of e){const r=t&&t[n.id]||{},s=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};kE(r,n.id,s,i,e)}}function kE(t,e,n,r,s){const i=e||"Top level",a=e?`${e}.`:"";for(const l in t){const u=!e&&Sh(t[l]),h=l==="baseUri"&&!e,d=l==="workerUrl"&&e;if(!(l in n)&&!h&&!d){if(l in r)CE.warn(`${i} loader option '${a}${l}' no longer supported, use '${r[l]}'`)();else if(!u){const g=GV(l,s);CE.warn(`${i} loader option '${a}${l}' not recognized. ${g}`)()}}}}function GV(t,e){const n=t.toLowerCase();let r="";for(const s of e)for(const i in s.options){if(t===i)return`Did you mean '${s.id}.${i}'?`;const a=i.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(r=r||`Did you mean '${s.id}.${i}'?`)}return r}function JV(t,e,n){const s={...t.options||{}};return e$(s,n),s.log===null&&(s.log=new XV),NE(s,hM()),NE(s,e),s}function NE(t,e){for(const n in e)if(n in e){const r=e[n];TE(r)&&TE(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function e$(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function C0(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function k0(t){Kp(t,"null loader"),Kp(C0(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const dM=()=>{const t=fM();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function t$(t){const e=dM();t=Array.isArray(t)?t:[t];for(const n of t){const r=k0(n);e.find(s=>r===s)||e.unshift(r)}}function n$(){return dM()}const r$=/\.([^.]+)$/;async function s$(t,e=[],n,r){if(!pM(t))return null;let s=ME(t,e,{...n,nothrow:!0},r);if(s)return s;if(yl(t)&&(t=await t.slice(0,10).arrayBuffer(),s=ME(t,e,n,r)),!s&&!(n!=null&&n.nothrow))throw new Error(gM(t));return s}function ME(t,e=[],n,r){if(!pM(t))return null;if(e&&!Array.isArray(e))return k0(e);let s=[];e&&(s=s.concat(e)),n!=null&&n.ignoreRegisteredLoaders||s.push(...n$()),o$(s);const i=i$(t,s,n,r);if(!i&&!(n!=null&&n.nothrow))throw new Error(gM(t));return i}function i$(t,e,n,r){const s=fm(t),i=R0(t),a=A0(s)||(r==null?void 0:r.url);let l=null,u="";return n!=null&&n.mimeType&&(l=ox(e,n==null?void 0:n.mimeType),u=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),l=l||a$(e,a),u=u||(l?`matched url ${a}`:""),l=l||ox(e,i),u=u||(l?`matched MIME type ${i}`:""),l=l||c$(e,t),u=u||(l?`matched initial data ${mM(t)}`:""),n!=null&&n.fallbackMimeType&&(l=l||ox(e,n==null?void 0:n.fallbackMimeType),u=u||(l?`matched fallback MIME type ${i}`:"")),u&&nV.log(1,`selectLoader selected ${l==null?void 0:l.name}: ${u}.`),l}function pM(t){return!(t instanceof Response&&t.status===204)}function gM(t){const e=fm(t),n=R0(t);let r="No valid loader found (";r+=e?`${oM(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const s=t?mM(t):"";return r+=s?` first bytes: "${s}"`:"first bytes: not available",r+=")",r}function o$(t){for(const e of t)k0(e)}function a$(t,e){const n=e&&r$.exec(e),r=n&&n[1];return r?l$(t,r):null}function l$(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function ox(t,e){var n;for(const r of t)if((n=r.mimeTypes)!=null&&n.some(s=>EE(e,s))||EE(e,`application/x.${r.id}`))return r;return null}function c$(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(u$(e,n))return n}else if(ArrayBuffer.isView(e)){if(IE(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&IE(e,0,n))return n;return null}function u$(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function IE(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>f$(t,e,n,s))}function f$(t,e,n,r){if(r instanceof ArrayBuffer)return xV(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const s=Fv(t,e,r.length);return r===s;default:return!1}}function mM(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Fv(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Fv(t,0,e):""}function Fv(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let s="";for(let i=0;i<n;i++)s+=String.fromCharCode(r.getUint8(e+i));return s}const h$=256*1024;function*d$(t,e){const n=(e==null?void 0:e.chunkSize)||h$;let r=0;const s=new TextEncoder;for(;r<t.length;){const i=Math.min(t.length-r,n),a=t.slice(r,r+i);r+=i,yield s.encode(a)}}const p$=256*1024;function*g$(t,e={}){const{chunkSize:n=p$}=e;let r=0;for(;r<t.byteLength;){const s=Math.min(t.byteLength-r,n),i=new ArrayBuffer(s),a=new Uint8Array(t,r,s);new Uint8Array(i).set(a),r+=s,yield i}}const m$=1024*1024;async function*y$(t,e){const n=(e==null?void 0:e.chunkSize)||m$;let r=0;for(;r<t.size;){const s=r+n,i=await t.slice(r,s).arrayBuffer();r=s,yield i}}function OE(t,e){return T0?b$(t,e):x$(t)}async function*b$(t,e){const n=t.getReader();let r;try{for(;;){const s=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:i,value:a}=await s;if(i)return;yield iM(a)}}catch{n.releaseLock()}}async function*x$(t,e){for await(const n of t)yield iM(n)}function v$(t,e){if(typeof t=="string")return d$(t,e);if(t instanceof ArrayBuffer)return g$(t,e);if(yl(t))return y$(t,e);if(aM(t))return OE(t,e);if(ml(t))return OE(t.body,e);throw new Error("makeIterator")}const yM="Cannot convert supplied data type";function _$(t,e,n){if(e.text&&typeof t=="string")return t;if(NV(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return(t.byteOffset!==0||s!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(yM)}async function w$(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return _$(t,e);if(yl(t)&&(t=await cM(t)),ml(t)){const s=t;return await UV(s),e.binary?await s.arrayBuffer():await s.text()}if(aM(t)&&(t=v$(t,n)),CV(t)||kV(t))return wV(t);throw new Error(yM)}function bM(t,e){const n=hM(),r=t||n;return typeof r.fetch=="function"?r.fetch:Sh(r.fetch)?s=>RE(s,r.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:RE}function S$(t,e,n){if(n)return n;const r={fetch:bM(e,t),...t};if(r.url){const s=A0(r.url);r.baseUrl=s,r.queryString=FV(r.url),r.filename=oM(s),r.baseUrl=AV(s)}return Array.isArray(r.loaders)||(r.loaders=null),r}function T$(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function Gp(t,e,n,r){e&&!Array.isArray(e)&&!C0(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const s=fm(t),a=T$(e,r),l=await s$(t,a,n);return l?(n=ZV(n,l,a,s),r=S$({url:s,_parse:Gp,loaders:a},n,r||null),await E$(l,t,n,r)):null}async function E$(t,e,n,r){if(gV(t),n=rV(t.options,n),ml(e)){const i=e,{ok:a,redirected:l,status:u,statusText:h,type:d,url:g}=i,b=Object.fromEntries(i.headers.entries());r.response={headers:b,ok:a,redirected:l,status:u,statusText:h,type:d,url:g}}e=await w$(e,t,n);const s=t;if(s.parseTextSync&&typeof e=="string")return s.parseTextSync(e,n,r);if(mV(t,n))return await yV(t,e,n,r,Gp);if(s.parseText&&typeof e=="string")return await s.parseText(e,n,r);if(s.parse)return await s.parse(e,n,r);throw ra(!s.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function Bv(t,e,n,r){let s,i;!Array.isArray(e)&&!C0(e)?(s=[],i=e):(s=e,i=n);const a=bM(i);let l=t;return typeof t=="string"&&(l=await a(t)),yl(t)&&(l=await a(t)),Array.isArray(s)?await Gp(l,s,i):await Gp(l,s,i)}const A$="4.3.3";var _R;const R$=(_R=globalThis.loaders)==null?void 0:_R.parseImageNode,Lv=typeof Image<"u",Uv=typeof ImageBitmap<"u",C$=!!R$,zv=T0?!0:C$;function k$(t){switch(t){case"auto":return Uv||Lv||zv;case"imagebitmap":return Uv;case"image":return Lv;case"data":return zv;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function N$(){if(Uv)return"imagebitmap";if(Lv)return"image";if(zv)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function M$(t){const e=O$(t);if(!e)throw new Error("Not an image");return e}function I$(t){switch(M$(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function O$(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const P$=/^data:image\/svg\+xml/,D$=/\.svg((\?|#).*)?$/;function N0(t){return t&&(P$.test(t)||D$.test(t))}function j$(t,e){if(N0(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return xM(t,e)}function xM(t,e){if(N0(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function vM(t,e,n){const r=j$(t,n),s=self.URL||self.webkitURL,i=typeof r!="string"&&s.createObjectURL(r);try{return await F$(i||r,e)}finally{i&&s.revokeObjectURL(i)}}async function F$(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,s)=>{try{n.onload=()=>r(n),n.onerror=i=>{const a=i instanceof Error?i.message:"error";s(new Error(a))}}catch(i){s(i)}})}const B$={};let PE=!0;async function L$(t,e,n){let r;N0(n)?r=await vM(t,e,n):r=xM(t,n);const s=e&&e.imagebitmap;return await U$(r,s)}async function U$(t,e=null){if((z$(e)||!PE)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),PE=!1}return await createImageBitmap(t)}function z$(t){for(const e in t||B$)return!1;return!0}function V$(t){return!q$(t,"ftyp",4)||(t[8]&96)===0?null:$$(t)}function $$(t){switch(H$(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function H$(t,e,n){return String.fromCharCode(...t.slice(e,n))}function W$(t){return[...t].map(e=>e.charCodeAt(0))}function q$(t,e,n=0){const r=W$(e);for(let s=0;s<r.length;++s)if(r[s]!==t[s+n])return!1;return!0}const pi=!1,Lf=!0;function _M(t){const e=Th(t);return Y$(e)||Q$(e)||K$(e)||Z$(e)||X$(e)}function X$(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=V$(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function Y$(t){const e=Th(t);return e.byteLength>=24&&e.getUint32(0,pi)===2303741511?{mimeType:"image/png",width:e.getUint32(16,pi),height:e.getUint32(20,pi)}:null}function K$(t){const e=Th(t);return e.byteLength>=10&&e.getUint32(0,pi)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Lf),height:e.getUint16(8,Lf)}:null}function Z$(t){const e=Th(t);return e.byteLength>=14&&e.getUint16(0,pi)===16973&&e.getUint32(2,Lf)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Lf),height:e.getUint32(22,Lf)}:null}function Q$(t){const e=Th(t);if(!(e.byteLength>=3&&e.getUint16(0,pi)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=G$();let i=2;for(;i+9<e.byteLength;){const a=e.getUint16(i,pi);if(s.has(a))return{mimeType:"image/jpeg",height:e.getUint16(i+5,pi),width:e.getUint16(i+7,pi)};if(!r.has(a))return null;i+=2,i+=e.getUint16(i,pi)}return null}function G$(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Th(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function J$(t,e){var s;const{mimeType:n}=_M(t)||{},r=(s=globalThis.loaders)==null?void 0:s.parseImageNode;return Kp(r),await r(t,n)}async function e9(t,e,n){e=e||{};const s=(e.image||{}).type||"auto",{url:i}=n||{},a=t9(s);let l;switch(a){case"imagebitmap":l=await L$(t,e,i);break;case"image":l=await vM(t,e,i);break;case"data":l=await J$(t);break;default:Kp(!1)}return s==="data"&&(l=I$(l)),l}function t9(t){switch(t){case"auto":case"data":return N$();default:return k$(t),t}}const n9=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],r9=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],s9={image:{type:"auto",decode:!0}},i9={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:A$,mimeTypes:r9,extensions:n9,parse:e9,tests:[t=>!!_M(new DataView(t))],options:s9},Sn=new wh({id:"deck"});let Vv={};function o9(t){Vv=t}function Dr(t,e,n,r){Sn.level>0&&Vv[t]&&Vv[t].call(null,e,n,r)}function a9(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const l9={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:a9,parseTextSync:JSON.parse};function c9(){const t="9.1.12",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(Sn.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Sn,_registerLoggers:o9},t$([l9,[i9,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const u9=c9();function M0(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const ax={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function f9(t){const e={};for(const[n,r]of Object.entries(t))e[n]=h9(r);return e}function h9(t){let e=DE(t);if(e!=="object")return{value:t,...ax[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...ax[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=DE(t.value),{...t,...ax[e],type:e}):{type:"object",value:null};throw new Error("props")}function DE(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const d9=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,p9=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,g9={vertex:d9,fragment:p9},jE=/void\s+main\s*\([^)]*\)\s*\{\n?/,FE=/}\n?[^{}]*$/,lx=[],Cp="__LUMA_INJECT_DECLARATIONS__";function m9(t){const e={vertex:{},fragment:{}};for(const n in t){let r=t[n];const s=y9(n);typeof r=="string"&&(r={order:0,injection:r}),e[s][n]=r}return e}function y9(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Jp(t,e,n,r=!1){const s=e==="vertex";for(const i in n){const a=n[i];a.sort((u,h)=>u.order-h.order),lx.length=a.length;for(let u=0,h=a.length;u<h;++u)lx[u]=a[u].injection;const l=`${lx.join(`
`)}
`;switch(i){case"vs:#decl":s&&(t=t.replace(Cp,l));break;case"vs:#main-start":s&&(t=t.replace(jE,u=>u+l));break;case"vs:#main-end":s&&(t=t.replace(FE,u=>l+u));break;case"fs:#decl":s||(t=t.replace(Cp,l));break;case"fs:#main-start":s||(t=t.replace(jE,u=>u+l));break;case"fs:#main-end":s||(t=t.replace(FE,u=>l+u));break;default:t=t.replace(i,u=>u+l)}}return t=t.replace(Cp,""),r&&(t=t.replace(/\}\s*$/,i=>i+g9[e])),t}function eg(t){t.map(e=>b9(e))}function b9(t){if(t.instance)return;eg(t.dependencies||[]);const{propTypes:e={},deprecations:n=[],inject:r={}}=t,s={normalizedInjections:m9(r),parsedDeprecations:x9(n)};e&&(s.propValidators=f9(e)),t.instance=s;let i={};e&&(i=Object.entries(e).reduce((a,[l,u])=>{const h=u==null?void 0:u.value;return h&&(a[l]=h),a},{})),t.defaultUniforms={...t.defaultUniforms,...i}}function wM(t,e,n){var r;(r=t.deprecations)==null||r.forEach(s=>{var i;(i=s.regex)!=null&&i.test(e)&&(s.deprecated?n.deprecated(s.old,s.new)():n.removed(s.old,s.new)())})}function x9(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function I0(t){eg(t);const e={},n={};SM({modules:t,level:0,moduleMap:e,moduleDepth:n});const r=Object.keys(n).sort((s,i)=>n[i]-n[s]).map(s=>e[s]);return eg(r),r}function SM(t){const{modules:e,level:n,moduleMap:r,moduleDepth:s}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const i of e)r[i.name]=i,(s[i.name]===void 0||s[i.name]<n)&&(s[i.name]=n);for(const i of e)i.dependencies&&SM({modules:i.dependencies,level:n+1,moduleMap:r,moduleDepth:s})}function v9(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function _9(t,e){var r;if(Number(((r=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:r[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=BE(t,w9),t;case"fragment":return t=BE(t,S9),t;default:throw new Error(e)}}const TM=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],w9=[...TM,[$v("attribute"),"in $1"],[$v("varying"),"out $1"]],S9=[...TM,[$v("varying"),"in $1"]];function BE(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function $v(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function EM(t,e){let n="";for(const r in t){const s=t[r];if(n+=`void ${s.signature} {
`,s.header&&(n+=`  ${s.header}`),e[r]){const i=e[r];i.sort((a,l)=>a.order-l.order);for(const a of i)n+=`  ${a.injection}
`}s.footer&&(n+=`  ${s.footer}`),n+=`}
`}return n}function AM(t){const e={vertex:{},fragment:{}};for(const n of t){let r,s;typeof n!="string"?(r=n,s=r.hook):(r={},s=n),s=s.trim();const[i,a]=s.split(":"),l=s.replace(/\(.+/,""),u=Object.assign(r,{signature:a});switch(i){case"vs":e.vertex[l]=u;break;case"fs":e.fragment[l]=u;break;default:throw new Error(i)}}return e}function T9(t,e){return{name:E9(t,e),language:"glsl",version:A9(t)}}function E9(t,e="unnamed"){const r=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return r?r[1]:e}function A9(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const RM=`

${Cp}
`,R9=`precision highp float;
`;function C9(t){const e=I0(t.modules||[]);return{source:N9(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:CM(e)}}function k9(t){const{vs:e,fs:n}=t,r=I0(t.modules||[]);return{vs:LE(t.platformInfo,{...t,source:e,stage:"vertex",modules:r}),fs:LE(t.platformInfo,{...t,source:n,stage:"fragment",modules:r}),getUniforms:CM(r)}}function N9(t,e){var A;const{source:n,stage:r,modules:s,hookFunctions:i=[],inject:a={},log:l}=e;M0(typeof n=="string","shader source must be a string");const u=n;let h="";const d=AM(i),g={},b={},w={};for(const C in a){const I=typeof a[C]=="string"?{injection:a[C],order:0}:a[C],M=/^(v|f)s:(#)?([\w-]+)$/.exec(C);if(M){const k=M[2],P=M[3];k?P==="decl"?b[C]=[I]:w[C]=[I]:g[C]=[I]}else w[C]=[I]}const R=s;for(const C of R){l&&wM(C,u,l);const I=kM(C,"wgsl");h+=I;const M=((A=C.injections)==null?void 0:A[r])||{};for(const k in M){const P=/^(v|f)s:#([\w-]+)$/.exec(k);if(P){const O=P[2]==="decl"?b:w;O[k]=O[k]||[],O[k].push(M[k])}else g[k]=g[k]||[],g[k].push(M[k])}}return h+=RM,h=Jp(h,r,b),h+=EM(d[r],g),h+=u,h=Jp(h,r,w),h}function LE(t,e){var H;const{id:n,source:r,stage:s,language:i="glsl",modules:a,defines:l={},hookFunctions:u=[],inject:h={},prologue:d=!0,log:g}=e;M0(typeof r=="string","shader source must be a string");const b=i==="glsl"?T9(r).version:-1,w=t.shaderLanguageVersion,R=b===100?"#version 100":"#version 300 es",C=r.split(`
`).slice(1).join(`
`),I={};a.forEach(Y=>{Object.assign(I,Y.defines)}),Object.assign(I,l);let M="";switch(i){case"wgsl":break;case"glsl":M=d?`${R}

// ----- PROLOGUE -------------------------
${M9({id:n,source:r,stage:s})}
${`#define SHADER_TYPE_${s.toUpperCase()}`}

${v9(t)}
${s==="fragment"?R9:""}

// ----- APPLICATION DEFINES -------------------------

${I9(I)}

`:`${R}
`;break}const k=AM(u),P={},L={},O={};for(const Y in h){const J=typeof h[Y]=="string"?{injection:h[Y],order:0}:h[Y],K=/^(v|f)s:(#)?([\w-]+)$/.exec(Y);if(K){const Z=K[2],ae=K[3];Z?ae==="decl"?L[Y]=[J]:O[Y]=[J]:P[Y]=[J]}else O[Y]=[J]}for(const Y of a){g&&wM(Y,C,g);const J=kM(Y,s);M+=J;const K=((H=Y.instance)==null?void 0:H.normalizedInjections[s])||{};for(const Z in K){const ae=/^(v|f)s:#([\w-]+)$/.exec(Z);if(ae){const oe=ae[2]==="decl"?L:O;oe[Z]=oe[Z]||[],oe[Z].push(K[Z])}else P[Z]=P[Z]||[],P[Z].push(K[Z])}}return M+="// ----- MAIN SHADER SOURCE -------------------------",M+=RM,M=Jp(M,s,L),M+=EM(k[s],P),M+=C,M=Jp(M,s,O),i==="glsl"&&b!==w&&(M=_9(M,s)),M.trim()}function CM(t){return function(n){var s;const r={};for(const i of t){const a=(s=i.getUniforms)==null?void 0:s.call(i,n,r);Object.assign(r,a)}return r}}function M9(t){const{id:e,source:n,stage:r}=t;return e&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${r}`:""}function I9(t={}){let e="";for(const n in t){const r=t[n];(r||Number.isFinite(r))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}function kM(t,e){let n;switch(e){case"vertex":n=t.vs||"";break;case"fragment":n=t.fs||"";break;case"wgsl":n=t.source||"";break;default:M0(!1)}if(!t.name)throw new Error("Shader module must have a name");const r=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let s=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(s+=`#define MODULE_${r}
`),s+=`${n}
`,s}const O9=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,P9=/^\s*\#\s*endif\s*$/;function D9(t,e){var a;const n=t.split(`
`),r=[];let s=!0,i=null;for(const l of n){const u=l.match(O9),h=l.match(P9);u?(i=u[1],s=!!((a=e==null?void 0:e.defines)!=null&&a[i])):h?s=!0:s&&r.push(l)}return r.join(`
`)}const Fa=class Fa{constructor(){z(this,"_hookFunctions",[]);z(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return Fa.defaultShaderAssembler=Fa.defaultShaderAssembler||new Fa,Fa.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const n=this._getModuleList(e.modules),r=this._hookFunctions,{source:s,getUniforms:i}=C9({...e,source:e.source,modules:n,hookFunctions:r});return{source:e.platformInfo.shaderLanguage==="wgsl"?D9(s):s,getUniforms:i,modules:n}}assembleGLSLShaderPair(e){const n=this._getModuleList(e.modules),r=this._hookFunctions;return{...k9({...e,vs:e.vs,fs:e.fs,modules:n,hookFunctions:r}),modules:n}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let s=0;for(let i=0,a=this._defaultModules.length;i<a;++i){const l=this._defaultModules[i],u=l.name;n[s++]=l,r[u]=!0}for(let i=0,a=e.length;i<a;++i){const l=e[i],u=l.name;r[u]||(n[s++]=l,r[u]=!0)}return n.length=s,eg(n),n}};z(Fa,"defaultShaderAssembler");let tg=Fa;const j9=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,F9=`#version 300 es
${j9}`;function B9(t){const{input:e,inputChannels:n,output:r}={};if(!e)return F9;if(!n)throw new Error("inputChannels");const s=L9(n),i=U9(e,n);return`#version 300 es
in ${s} ${e};
out vec4 ${r};
void main() {
  ${r} = ${i};
}`}function L9(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function U9(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class z9{constructor(){z(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new um({id:e})),this.stats.get(e)}}const NM=new z9,Xe=new wh({id:"luma.gl"}),cx={};function hm(t="id"){cx[t]=cx[t]||1;const e=cx[t]++;return`${t}-${e}`}var Gx;let gn=(Gx=class{constructor(e,n,r){z(this,"id");z(this,"props");z(this,"userData",{});z(this,"_device");z(this,"destroyed",!1);z(this,"allocatedBytes",0);z(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=V9(n,r);const s=this.props.id!=="undefined"?this.props.id:hm(this[Symbol.toStringTag]);this.props.id=s,this.id=s,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},z(Gx,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),Gx);function V9(t,e){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}const hr=class hr extends gn{constructor(n,r){const s={...r};(r.usage||0)&hr.INDEX&&!r.indexType&&(r.data instanceof Uint32Array?s.indexType="uint32":r.data instanceof Uint16Array&&(s.indexType="uint16")),delete s.data;super(n,s,hr.defaultProps);z(this,"usage");z(this,"indexType");z(this,"updateTimestamp");z(this,"debugData",new ArrayBuffer(0));this.usage=s.usage||0,this.indexType=s.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(n){return this.device.createBuffer({...this.props,...n})}readSyncWebGL(n,r){throw new Error("not implemented")}_setDebugData(n,r,s){const i=ArrayBuffer.isView(n)?n.buffer:n,a=Math.min(n?n.byteLength:s,hr.DEBUG_DATA_MAX_LENGTH);i===null?this.debugData=new ArrayBuffer(a):r===0&&s===i.byteLength?this.debugData=i.slice(0,a):this.debugData=i.slice(r,r+a)}};z(hr,"defaultProps",{...gn.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),z(hr,"MAP_READ",1),z(hr,"MAP_WRITE",2),z(hr,"COPY_SRC",4),z(hr,"COPY_DST",8),z(hr,"INDEX",16),z(hr,"VERTEX",32),z(hr,"UNIFORM",64),z(hr,"STORAGE",128),z(hr,"INDIRECT",256),z(hr,"QUERY_RESOLVE",512),z(hr,"DEBUG_DATA_MAX_LENGTH",32);let kn=hr;function MM(t){const e=UE[t],n=$9(e),r=t.includes("norm"),s=!r&&!t.startsWith("float"),i=t.startsWith("s");return{dataType:UE[t],byteLength:n,integer:s,signed:i,normalized:r}}function $9(t){return H9[t]}const UE={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},H9={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},vr="texture-compression-bc",dn="texture-compression-astc",oi="texture-compression-etc2",W9="texture-compression-etc1-webgl",rp="texture-compression-pvrtc-webgl",ux="texture-compression-atc-webgl",sp="float32-renderable-webgl",fx="float16-renderable-webgl",q9="rgb9e5ufloat-renderable-webgl",hx="snorm8-renderable-webgl",xf="norm16-renderable-webgl",dx="snorm16-renderable-webgl",ip="float32-filterable",zE="float16-filterable-webgl";function IM(t){const e=X9[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const X9={r8unorm:{},r8snorm:{render:hx},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:hx},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:fx,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:xf},"r16snorm-webgl":{f:dx},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:hx},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:fx,filter:zE},"rg16unorm-webgl":{render:xf},"rg16snorm-webgl":{render:dx},r32uint:{},r32sint:{},r32float:{render:sp,filter:ip},rgb9e5ufloat:{channels:"rgb",packed:!0,render:q9},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:sp},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:xf},"rgb16snorm-webgl":{f:xf},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:ip},rgba16uint:{},rgba16sint:{},rgba16float:{render:fx,filter:zE},"rgba16unorm-webgl":{render:xf},"rgba16snorm-webgl":{render:dx},"rgb32float-webgl":{render:sp,filter:ip},rgba32uint:{},rgba32sint:{},rgba32float:{render:sp,filter:ip},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:vr},"bc1-rgb-unorm-srgb-webgl":{f:vr},"bc1-rgba-unorm":{f:vr},"bc1-rgba-unorm-srgb":{f:vr},"bc2-rgba-unorm":{f:vr},"bc2-rgba-unorm-srgb":{f:vr},"bc3-rgba-unorm":{f:vr},"bc3-rgba-unorm-srgb":{f:vr},"bc4-r-unorm":{f:vr},"bc4-r-snorm":{f:vr},"bc5-rg-unorm":{f:vr},"bc5-rg-snorm":{f:vr},"bc6h-rgb-ufloat":{f:vr},"bc6h-rgb-float":{f:vr},"bc7-rgba-unorm":{f:vr},"bc7-rgba-unorm-srgb":{f:vr},"etc2-rgb8unorm":{f:oi},"etc2-rgb8unorm-srgb":{f:oi},"etc2-rgb8a1unorm":{f:oi},"etc2-rgb8a1unorm-srgb":{f:oi},"etc2-rgba8unorm":{f:oi},"etc2-rgba8unorm-srgb":{f:oi},"eac-r11unorm":{f:oi},"eac-r11snorm":{f:oi},"eac-rg11unorm":{f:oi},"eac-rg11snorm":{f:oi},"astc-4x4-unorm":{f:dn},"astc-4x4-unorm-srgb":{f:dn},"astc-5x4-unorm":{f:dn},"astc-5x4-unorm-srgb":{f:dn},"astc-5x5-unorm":{f:dn},"astc-5x5-unorm-srgb":{f:dn},"astc-6x5-unorm":{f:dn},"astc-6x5-unorm-srgb":{f:dn},"astc-6x6-unorm":{f:dn},"astc-6x6-unorm-srgb":{f:dn},"astc-8x5-unorm":{f:dn},"astc-8x5-unorm-srgb":{f:dn},"astc-8x6-unorm":{f:dn},"astc-8x6-unorm-srgb":{f:dn},"astc-8x8-unorm":{f:dn},"astc-8x8-unorm-srgb":{f:dn},"astc-10x5-unorm":{f:dn},"astc-10x5-unorm-srgb":{f:dn},"astc-10x6-unorm":{f:dn},"astc-10x6-unorm-srgb":{f:dn},"astc-10x8-unorm":{f:dn},"astc-10x8-unorm-srgb":{f:dn},"astc-10x10-unorm":{f:dn},"astc-10x10-unorm-srgb":{f:dn},"astc-12x10-unorm":{f:dn},"astc-12x10-unorm-srgb":{f:dn},"astc-12x12-unorm":{f:dn},"astc-12x12-unorm-srgb":{f:dn},"pvrtc-rgb4unorm-webgl":{f:rp},"pvrtc-rgba4unorm-webgl":{f:rp},"pvrtc-rbg2unorm-webgl":{f:rp},"pvrtc-rgba2unorm-webgl":{f:rp},"etc1-rbg-unorm-webgl":{f:W9},"atc-rgb-unorm-webgl":{f:ux},"atc-rgba-unorm-webgl":{f:ux},"atc-rgbai-unorm-webgl":{f:ux}},Y9=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],K9=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function OM(t){return Y9.some(e=>t.startsWith(e))}function O0(t){let e=Z9(t);if(OM(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const r=Q9(t);r&&(e.blockWidth=r.blockWidth,e.blockHeight=r.blockHeight)}const n=K9.exec(t);if(n){const[,r,s,i,a,l]=n,u=`${i}${s}`,h=MM(u),d=h.byteLength*8,g=r.length,b=[d,g>=2?d:0,g>=3?d:0,g>=4?d:0];e={format:t,attachment:e.attachment,dataType:h.dataType,components:g,channels:r,integer:h.integer,signed:h.signed,normalized:h.normalized,bitsPerChannel:b,bytesPerPixel:h.byteLength*r.length,packed:e.packed,srgb:e.srgb},l==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function Z9(t){var i;const e=IM(t),n=e.bytesPerPixel||1,r=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((i=e.channels)==null?void 0:i.length)||1,bytesPerPixel:n,bitsPerChannel:r,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function Q9(t){const n=/.*-(\d+)x(\d+)-.*/.exec(t);if(n){const[,r,s]=n;return{blockWidth:Number(r),blockHeight:Number(s)}}return null}function G9(t){const e=IM(t),n={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},r=O0(t),s=t.startsWith("depth")||t.startsWith("stencil"),i=r==null?void 0:r.signed,a=r==null?void 0:r.integer,l=r==null?void 0:r.webgl;return n.render&&(n.render=!i),n.filter&&(n.filter=!s&&!i&&!a&&!l),n}class J9{}class e7{constructor(e=[],n){z(this,"features");z(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){var n;return!((n=this.disabledFeatures)!=null&&n[e])&&this.features.has(e)}}const Ng=class Ng{constructor(e){z(this,"id");z(this,"props");z(this,"userData",{});z(this,"statsManager",NM);z(this,"timestamp",0);z(this,"_reused",!1);z(this,"_lumaData",{});this.props={...Ng.defaultProps,...e},this.id=this.props.id||hm(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const n=G9(e),r=a=>(typeof a=="string"?this.features.has(a):a)??!0,s=r(n.create),i={format:e,create:s,render:s&&r(n.render),filter:s&&r(n.filter),blend:s&&r(n.blend),store:s&&r(n.store)};return this._getDeviceSpecificTextureFormatCapabilities(i)}isTextureFormatSupported(e,n){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return OM(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};return(e.usage||0)&kn.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array?n.indexType="uint16":Xe.warn("indices buffer content must be of integer type")()),n}};z(Ng,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>Xe.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:Xe.get("debug")||void 0,debugShaders:Xe.get("debug-shaders")||void 0,debugFramebuffers:!!Xe.get("debug-framebuffers"),debugWebGL:!!Xe.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let Go=Ng;const t7=gl()&&typeof document<"u",n7=()=>t7&&document.readyState==="complete",r7="set luma.log.level=1 (or higher) to trace rendering",VE="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",Po=class Po{constructor(){z(this,"stats",NM);z(this,"log",Xe);z(this,"VERSION","9.1.9");z(this,"spector");z(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw Xe.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),Xe.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");Xe.error("This version of luma.gl has already been initialized")()}Xe.log(1,`${this.VERSION} - ${r7}`)(),globalThis.luma=this}registerAdapters(e){for(const n of e)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(e=[]){const n=this.getAdapterMap(e);return Array.from(n).map(([,r])=>r).filter(r=>{var s;return(s=r.isSupported)==null?void 0:s.call(r)}).map(r=>r.type)}getBestAvailableAdapter(e=[]){var r,s,i,a;const n=this.getAdapterMap(e);return(s=(r=n.get("webgpu"))==null?void 0:r.isSupported)!=null&&s.call(r)?"webgpu":(a=(i=n.get("webgl"))==null?void 0:i.isSupported)!=null&&a.call(i)?"webgl":null}setDefaultDeviceProps(e){Object.assign(Po.defaultProps,e)}async createDevice(e={}){var l;e={...Po.defaultProps,...e},e.waitForPageLoad&&await Po.pageLoaded;const n=this.getAdapterMap(e.adapters);let r=e.type||"";r==="best-available"&&(r=this.getBestAvailableAdapter(e.adapters)||r);const i=(this.getAdapterMap(e.adapters)||n).get(r),a=await((l=i==null?void 0:i.create)==null?void 0:l.call(i,e));if(a)return a;throw new Error(VE)}async attachDevice(e){var a;const n=this.getAdapterMap(e.adapters);let r="";e.handle instanceof WebGL2RenderingContext&&(r="webgl"),e.createCanvasContext&&await Po.pageLoaded,e.handle===null&&(r="unknown");const s=n.get(r),i=await((a=s==null?void 0:s.attach)==null?void 0:a.call(s,null));if(i)return i;throw new Error(VE)}enforceWebGL2(e=!0,n=[]){var i;const s=this.getAdapterMap(n).get("webgl");s||Xe.warn("enforceWebGL2: webgl adapter not found")(),(i=s==null?void 0:s.enforceWebGL2)==null||i.call(s,e)}getAdapterMap(e=[]){const n=new Map(this.preregisteredAdapters);for(const r of e)n.set(r.type,r);return n}registerDevices(e){Xe.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const n of e){const r=n.adapter;r&&this.preregisteredAdapters.set(r.type,r)}}};z(Po,"defaultProps",{...Go.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),z(Po,"pageLoaded",s7().then(()=>{Xe.probe(2,"DOM is loaded")()}));let Hv=Po;const Wv=new Hv;function s7(){return n7()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class i7{}const Mg=class Mg{constructor(e){z(this,"id");z(this,"props");z(this,"canvas");z(this,"htmlCanvas");z(this,"offscreenCanvas");z(this,"type");z(this,"width",1);z(this,"height",1);z(this,"resizeObserver");z(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...Mg.defaultProps,...e},e=this.props,!gl()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=a7(e.canvas):this.canvas=e.canvas;else{const n=l7(e),r=o7((e==null?void 0:e.container)||null);r.insertBefore(n,r.firstChild),this.canvas=n,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const r of n)r.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*e,n.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,n]=this.getPixelSize();return e/n}cssToDeviceRatio(){var e;try{const[n]=this.getDrawingBufferSize(),r=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return r?n/r:1}catch{return 1}}cssToDevicePixels(e,n=!0){const r=this.cssToDeviceRatio(),[s,i]=this.getDrawingBufferSize();return c7(e,r,s,i,n)}setDevicePixelRatio(e,n={}){if(!this.htmlCanvas)return;let r="width"in n?n.width:this.htmlCanvas.clientWidth,s="height"in n?n.height:this.htmlCanvas.clientHeight;(!r||!s)&&(Xe.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=this.htmlCanvas.width||1,s=this.htmlCanvas.height||1);const i=this._canvasSizeInfo;if(i.clientWidth!==r||i.clientHeight!==s||i.devicePixelRatio!==e){let a=e;const l=Math.floor(r*a),u=Math.floor(s*a);if(this.htmlCanvas.width=l,this.htmlCanvas.height=u,this.device.gl){const[d,g]=this.getDrawingBufferSize();(d!==l||g!==u)&&(a=Math.min(d/r,g/s),this.htmlCanvas.width=Math.floor(r*a),this.htmlCanvas.height=Math.floor(s*a),Xe.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=r,this._canvasSizeInfo.clientHeight=s,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};z(Mg,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let qv=Mg;function o7(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function a7(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function l7(t){const{width:e,height:n}=t,r=document.createElement("canvas");return r.id=hm("lumagl-auto-created-canvas"),r.width=e||1,r.height=n||1,r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}function c7(t,e,n,r,s){const i=t,a=$E(i[0],e,n);let l=HE(i[1],e,r,s),u=$E(i[0]+1,e,n);const h=u===n-1?u:u-1;u=HE(i[1]+1,e,r,s);let d;return s?(u=u===0?u:u+1,d=l,l=u):d=u===r-1?u:u-1,{x:a,y:l,width:Math.max(h-a+1,1),height:Math.max(d-l+1,1)}}function $E(t,e,n){return Math.min(Math.round(t*e),n-1)}function HE(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const dr=class dr extends gn{constructor(n,r){r=dr.normalizeProps(n,r);super(n,r,dr.defaultProps);z(this,"dimension");z(this,"format");z(this,"width");z(this,"height");z(this,"depth");z(this,"mipLevels");z(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const s=dr.getTextureDataSize(this.props.data);this.width=(s==null?void 0:s.width)||1,this.height=(s==null?void 0:s.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?dr.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(n){return this.device.createTexture({...this.props,...n})}static isExternalImage(n){return typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement||typeof VideoFrame<"u"&&n instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}static getExternalImageSize(n){if(typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height};if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return{width:n.naturalWidth,height:n.naturalHeight};if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return{width:n.videoWidth,height:n.videoHeight};if(typeof VideoFrame<"u"&&n instanceof VideoFrame)return{width:n.displayWidth,height:n.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(n){const r=n==null?void 0:n.data;return ArrayBuffer.isView(r)}static getTextureDataSize(n){if(!n||ArrayBuffer.isView(n))return null;if(Array.isArray(n))return dr.getTextureDataSize(n[0]);if(dr.isExternalImage(n))return dr.getExternalImageSize(n);if(n&&typeof n=="object"&&n.constructor===Object){const s=Object.values(n)[0];return{width:s.width,height:s.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(n,r){let s;return ArrayBuffer.isView(n)?s=[{data:n,width:r.width,height:r.height}]:Array.isArray(n)?s=n:s=[n],s}static getMipLevelCount(n,r){return Math.floor(Math.log2(Math.max(n,r)))+1}static getCubeFaceDepth(n){switch(n){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(n)}}static normalizeProps(n,r){var u,h;const s={...r},i=((h=(u=n==null?void 0:n.props)==null?void 0:u._resourceDefaults)==null?void 0:h.texture)||{};Object.assign(s,i);const{width:a,height:l}=s;return typeof a=="number"&&(s.width=Math.max(1,Math.ceil(a))),typeof l=="number"&&(s.height=Math.max(1,Math.ceil(l))),s}};z(dr,"COPY_SRC",1),z(dr,"COPY_DST",2),z(dr,"TEXTURE",4),z(dr,"STORAGE",8),z(dr,"RENDER_ATTACHMENT",16),z(dr,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),z(dr,"defaultProps",{...gn.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),z(dr,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Fn=dr;const Ig=class Ig extends gn{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,Ig.defaultProps)}};z(Ig,"defaultProps",{...gn.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let ng=Ig;function u7(t,e,n){let r="";const s=e.split(/\r?\n/),i=t.slice().sort((a,l)=>a.lineNum-l.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let a=0;for(let l=1;l<=s.length;l++)for(r+=PM(s[l-1],l,n);i.length>a&&i[a].lineNum===l;){const u=i[a++];r+=WE(u,s,u.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const l of t)r+=WE(l,s,l.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return r}}function WE(t,e,n,r){if(r!=null&&r.inlineSource){const i=f7(e,n),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${i}${a}${t.type.toUpperCase()}: ${t.message}

`}const s=t.type==="error"?"red":"#8B4000";return r!=null&&r.html?`<div class='luma-compiler-log-error' style="color:${s};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function f7(t,e,n){let r="";for(let s=e-2;s<=e;s++){const i=t[s-1];i!==void 0&&(r+=PM(i,e,n))}return r}function PM(t,e,n){const r=n!=null&&n.html?d7(t):t;return`${h7(String(e),4)}: ${r}${n!=null&&n.html?"<br/>":`
`}`}function h7(t,e){let n="";for(let r=t.length;r<e;++r)n+=" ";return n+t}function d7(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Og=class Og extends gn{constructor(n,r){r={...r,debugShaders:r.debugShaders||n.props.debugShaders||"errors"};super(n,{id:p7(r),...r},Og.defaultProps);z(this,"stage");z(this,"source");z(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const n=this.props.debugShaders;switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const r=await this.getCompilationInfo();n==="warnings"&&(r==null?void 0:r.length)===0||this._displayShaderLog(r)}_displayShaderLog(n){var h;if(typeof document>"u"||!(document!=null&&document.createElement))return;const r=DM(this.source),s=`${this.stage} ${r}`;let i=u7(n,this.source,{showSourceCode:"all",html:!0});const a=this.getTranslatedSource();a&&(i+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${a}</pre></code>`);const l=document.createElement("Button");l.innerHTML=`
<h1>Shader Compilation Error in ${s}</h1><br /><br />
<code style="user-select:text;"><pre>
${i}
</pre></code>`,l.style.top="10px",l.style.left="10px",l.style.position="absolute",l.style.zIndex="9999",l.style.width="100%",l.style.textAlign="left",document.body.appendChild(l),(h=document.getElementsByClassName("luma-compiler-log-error")[0])==null||h.scrollIntoView(),l.onclick=()=>{const d=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(d)}}};z(Og,"defaultProps",{...gn.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let rg=Og;function p7(t){return DM(t.source)||t.id||hm(`unnamed ${t.stage}-shader`)}function DM(t,e="unnamed"){const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return r?r[1]:e}const Yf=class Yf extends gn{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){n=Yf.normalizeProps(e,n),super(e,n,Yf.defaultProps)}static normalizeProps(e,n){var i,a;const r=((a=(i=e==null?void 0:e.props)==null?void 0:i._resourceDefaults)==null?void 0:a.sampler)||{};return{...n,...r}}};z(Yf,"defaultProps",{...gn.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let sg=Yf;const Pg=class Pg extends gn{constructor(n,r={}){super(n,r,Pg.defaultProps);z(this,"width");z(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(n){const r=this.colorAttachments.map(i=>i.texture.clone(n)),s=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(n);return this.device.createFramebuffer({...this.props,colorAttachments:r,depthStencilAttachment:s})}resize(n){let r=!n;if(n){const[s,i]=Array.isArray(n)?n:[n.width,n.height];r=r||i!==this.height||s!==this.width,this.width=s,this.height=i}r&&(Xe.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((r,s)=>{if(typeof r=="string"){const i=this.createColorTexture(r,s);return this.attachResource(i),i.view}return r instanceof Fn?r.view:r});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const r=this.createDepthStencilTexture(n);this.attachResource(r),this.depthStencilAttachment=r.view}else n instanceof Fn?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n,r){return this.device.createTexture({id:`${this.id}-color-attachment-${r}`,usage:Fn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(n){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Fn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(n,r){for(let s=0;s<this.colorAttachments.length;++s)if(this.colorAttachments[s]){const i=this.colorAttachments[s].texture.clone({width:n,height:r});this.destroyAttachedResource(this.colorAttachments[s]),this.colorAttachments[s]=i.view,this.attachResource(i.view)}if(this.depthStencilAttachment){const s=this.depthStencilAttachment.texture.clone({width:n,height:r});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=s.view,this.attachResource(s)}this.updateAttachments()}};z(Pg,"defaultProps",{...gn.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let ig=Pg;const Dg=class Dg extends gn{constructor(n,r){super(n,r,Dg.defaultProps);z(this,"shaderLayout");z(this,"bufferLayout");z(this,"linkStatus","pending");z(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(n){throw new Error("Use uniform blocks")}};z(Dg,"defaultProps",{...gn.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let Kc=Dg;const Vs=class Vs extends gn{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){n=Vs.normalizeProps(e,n),super(e,n,Vs.defaultProps)}static normalizeProps(e,n){var i;return{...(i=e.props._resourceDefaults)==null?void 0:i.renderPass,...n}}};z(Vs,"defaultClearColor",[0,0,0,1]),z(Vs,"defaultClearDepth",1),z(Vs,"defaultClearStencil",0),z(Vs,"defaultProps",{...gn.defaultProps,framebuffer:null,parameters:void 0,clearColor:Vs.defaultClearColor,clearColors:void 0,clearDepth:Vs.defaultClearDepth,clearStencil:Vs.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let Xv=Vs;const jg=class jg extends gn{constructor(n,r){super(n,r,jg.defaultProps);z(this,"hash","");z(this,"shaderLayout");this.shaderLayout=r.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};z(jg,"defaultProps",{...gn.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let og=jg;const Fg=class Fg extends gn{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,Fg.defaultProps)}};z(Fg,"defaultProps",{...gn.defaultProps,measureExecutionTime:void 0});let Yv=Fg;const Bg=class Bg extends gn{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,Bg.defaultProps)}};z(Bg,"defaultProps",{...gn.defaultProps});let Kv=Bg;function g7(t){const[e,n]=y7[t],r=e==="i32"||e==="u32",s=e!=="u32",i=b7[e]*n,a=m7(e,n);return{dataType:e,components:n,defaultVertexFormat:a,byteLength:i,integer:r,signed:s}}function m7(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?n:`${n}x${e}`}const y7={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},b7={f32:4,f16:2,i32:4,u32:4};function jM(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,r]=t.split("x"),s=n,i=r?parseInt(r):1,a=MM(s),l={type:s,components:i,byteLength:a.byteLength*i,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(l.webglOnly=!0),l}function FM(t,e){const n={};for(const r of t.attributes){const s=v7(t,e,r.name);s&&(n[r.name]=s)}return n}function x7(t,e,n=16){const r=FM(t,e),s=new Array(n).fill(null);for(const i of Object.values(r))s[i.location]=i;return s}function v7(t,e,n){const r=_7(t,n),s=w7(e,n);if(!r)return null;const i=g7(r.type),a=(s==null?void 0:s.vertexFormat)||i.defaultVertexFormat,l=jM(a);return{attributeName:(s==null?void 0:s.attributeName)||r.name,bufferName:(s==null?void 0:s.bufferName)||r.name,location:r.location,shaderType:r.type,shaderDataType:i.dataType,shaderComponents:i.components,vertexFormat:a,bufferDataType:l.type,bufferComponents:l.components,normalized:l.normalized,integer:i.integer,stepMode:(s==null?void 0:s.stepMode)||r.stepMode||"vertex",byteOffset:(s==null?void 0:s.byteOffset)||0,byteStride:(s==null?void 0:s.byteStride)||0}}function _7(t,e){const n=t.attributes.find(r=>r.name===e);return n||Xe.warn(`shader layout attribute "${e}" not present in shader`),n||null}function w7(t,e){S7(t);let n=T7(t,e);return n||(n=E7(t,e),n)?n:(Xe.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function S7(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&Xe.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function T7(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function E7(t,e){var n;for(const r of t){let s=r.byteStride;if(typeof r.byteStride!="number")for(const a of r.attributes||[]){const l=jM(a.format);s+=l.byteLength}const i=(n=r.attributes)==null?void 0:n.find(a=>a.attribute===e);if(i)return{attributeName:i.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:i.format,byteOffset:i.byteOffset,byteStride:s}}return null}const Lg=class Lg extends gn{constructor(n,r){super(n,r,Lg.defaultProps);z(this,"maxVertexAttributes");z(this,"attributeInfos");z(this,"indexBuffer",null);z(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:s,bufferLayout:i}=r.renderPipeline||{};if(!s||!i)throw new Error("VertexArray");this.attributeInfos=x7(s,i,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,r){this.device.reportError(new Error("constant attributes not supported"))}};z(Lg,"defaultProps",{...gn.defaultProps,renderPipeline:null});let Zv=Lg;const Ug=class Ug extends gn{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,Ug.defaultProps)}};z(Ug,"defaultProps",{...gn.defaultProps,layout:void 0,buffers:{}});let Qv=Ug;const zg=class zg extends gn{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,zg.defaultProps)}};z(zg,"defaultProps",{...gn.defaultProps,type:void 0,count:void 0});let Gv=zg;const A7={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function R7(t){return A7[t]}function C7(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let op;function BM(t){return(!op||op.byteLength<t)&&(op=new ArrayBuffer(t)),op}function k7(t,e){const n=BM(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function N7(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ag(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":N7(t)}const qE=1024;class M7{constructor(e){z(this,"layout",{});z(this,"byteLength");let n=0;for(const[s,i]of Object.entries(e)){const a=R7(i),{type:l,components:u}=a;n=C7(n,u);const h=n;n+=u,this.layout[s]={type:l,size:u,offset:h}}n+=(4-n%4)%4;const r=n*4;this.byteLength=Math.max(r,qE)}getData(e){const n=Math.max(this.byteLength,qE),r=BM(n),s={i32:new Int32Array(r),u32:new Uint32Array(r),f32:new Float32Array(r),f16:new Uint16Array(r)};for(const[i,a]of Object.entries(e)){const l=this.layout[i];if(!l){Xe.warn(`Supplied uniform value ${i} not present in uniform block layout`)();continue}const{type:u,size:h,offset:d}=l,g=s[u];if(h===1){if(typeof a!="number"&&typeof a!="boolean"){Xe.warn(`Supplied value for single component uniform ${i} is not a number: ${a}`)();continue}g[d]=Number(a)}else{if(!ag(a)){Xe.warn(`Supplied value for multi component / array uniform ${i} is not a numeric array: ${a}`)();continue}g.set(a,d)}}return new Uint8Array(r)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function I7(t,e,n=16){if(t!==e)return!1;const r=t,s=e;if(!ag(r))return!1;if(ag(s)&&r.length===s.length){for(let i=0;i<r.length;++i)if(s[i]!==r[i])return!1}return!0}function O7(t){return ag(t)?t.slice():t}class P7{constructor(e){z(this,"name");z(this,"uniforms",{});z(this,"modifiedUniforms",{});z(this,"modified",!0);z(this,"bindingLayout",{});z(this,"needsRedraw","initialized");var n;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const r=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(i=>i.type==="uniform"&&i.name===(e==null?void 0:e.name));if(!r)throw new Error(e==null?void 0:e.name);const s=r;for(const i of s.uniforms||[])this.bindingLayout[i.name]=i}}setUniforms(e){for(const[n,r]of Object.entries(e))this._setUniform(n,r),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${r}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){I7(this.uniforms[e],n)||(this.uniforms[e]=O7(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class D7{constructor(e){z(this,"uniformBlocks",new Map);z(this,"uniformBufferLayouts",new Map);z(this,"uniformBuffers",new Map);for(const[n,r]of Object.entries(e)){const s=n,i=new M7(r.uniformTypes||{});this.uniformBufferLayouts.set(s,i);const a=new P7({name:n});a.setUniforms(r.defaultUniforms||{}),this.uniformBlocks.set(s,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var n;for(const[r,s]of Object.entries(e))(n=this.uniformBlocks.get(r))==null||n.setUniforms(s);this.updateUniformBuffers()}getUniformBufferByteLength(e){var n;return((n=this.uniformBufferLayouts.get(e))==null?void 0:n.byteLength)||0}getUniformBufferData(e){var r,s;const n=((r=this.uniformBlocks.get(e))==null?void 0:r.getAllUniforms())||{};return(s=this.uniformBufferLayouts.get(e))==null?void 0:s.getData(n)}createUniformBuffer(e,n,r){r&&this.setUniforms(r);const s=this.getUniformBufferByteLength(n),i=e.createBuffer({usage:kn.UNIFORM|kn.COPY_DST,byteLength:s}),a=this.getUniformBufferData(n);return i.write(a),i}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const r=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:kn.UNIFORM|kn.COPY_DST,byteLength:r});this.uniformBuffers.set(n,s)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const r=this.updateUniformBuffer(n);e||(e=r)}return e&&Xe.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var i;const n=this.uniformBlocks.get(e);let r=this.uniformBuffers.get(e),s=!1;if(r&&(n!=null&&n.needsRedraw)){s||(s=n.needsRedraw);const a=this.getUniformBufferData(e);r=this.uniformBuffers.get(e),r==null||r.write(a);const l=(i=this.uniformBlocks.get(e))==null?void 0:i.getAllUniforms();Xe.log(4,`Writing to uniform buffer ${String(e)}`,a,l)()}return s}}function LM(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function UM(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function j7(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const r=e;let s=LM(t);if(s==="uint8"&&n&&r===1)return"unorm8-webgl";if(s==="uint8"&&n&&r===3)return"unorm8x3-webgl";if(s==="uint8"||s==="sint8"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(s=s.replace("int","norm")),`${s}x${r}`}if(s==="uint16"||s==="sint16"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(s=s.replace("int","norm")),`${s}x${r}`}return r===1?s:`${s}x${r}`}class px{constructor(e){z(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(n=>n.name===e)||null}getAttributeNamesForBuffer(e){var n;return e.attributes?(n=e.attributes)==null?void 0:n.map(r=>r.attribute):[e.name]}mergeBufferLayouts(e,n){const r=[...e];for(const s of n){const i=r.findIndex(a=>a.name===s.name);i<0?r.push(s):r[i]=s}return r}getBufferIndex(e){const n=this.bufferLayouts.findIndex(r=>r.name===e);return n===-1&&Xe.warn(`BufferLayout: Missing buffer for "${e}".`)(),n}}function F7(t,e){const n=Object.fromEntries(t.attributes.map(s=>[s.name,s.location])),r=e.slice();return r.sort((s,i)=>{const a=s.attributes?s.attributes.map(d=>d.attribute):[s.name],l=i.attributes?i.attributes.map(d=>d.attribute):[i.name],u=Math.min(...a.map(d=>n[d])),h=Math.min(...l.map(d=>n[d]));return u-h}),r}class Es{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class XE{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Yo extends Es{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Jo extends Es{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class Jv extends Es{constructor(e,n,r){super(e,r),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class ul extends Es{constructor(e,n,r,s){super(e,r),this.format=n,this.access=s}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}var Io;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(Io||(Io={}));class ap{constructor(e,n,r,s,i,a,l){this.name=e,this.type=n,this.group=r,this.binding=s,this.attributes=i,this.resourceType=a,this.access=l}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class B7{constructor(e,n){this.name=e,this.type=n}}class L7{constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s,this.interpolation=null}}class YE{constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s}}class U7{constructor(e,n,r,s){this.name=e,this.type=n,this.attributes=r,this.id=s}}class z7{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r}}class V7{constructor(e,n=null,r){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n,this.attributes=r}}class $7{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}const zM=new Float32Array(1),H7=new Int32Array(zM.buffer),_r=new Uint16Array(1);function W7(t){zM[0]=t;const e=H7[0],n=e>>31&1;let r=e>>23&255,s=8388607&e;if(r===255)return _r[0]=n<<15|31744|(s!==0?512:0),_r[0];if(r===0){if(s===0)return _r[0]=n<<15,_r[0];s|=8388608;let i=113;for(;!(8388608&s);)s<<=1,i--;return r=127-i,s&=8388607,r>0?(s=(s>>126-r)+(s>>127-r&1),_r[0]=n<<15|r<<10|s>>13,_r[0]):(_r[0]=n<<15,_r[0])}return r=r-127+15,r>=31?(_r[0]=n<<15|31744,_r[0]):r<=0?r<-10?(_r[0]=n<<15,_r[0]):(s=(8388608|s)>>1-r,_r[0]=n<<15|s>>13,_r[0]):(s>>=13,_r[0]=n<<15|r<<10|s,_r[0])}const P0=new Uint32Array(1),VM=new Float32Array(P0.buffer,0,1);function KE(t){const e=112+(t>>6&31)<<23|(63&t)<<17;return P0[0]=e,VM[0]}function q7(t,e,n,r,s,i,a,l,u){const h=r*(a>>=s)*(i>>=s)+n*a+e*l;switch(u){case"r8unorm":return[Gt(t,h,"8unorm",1)[0]];case"r8snorm":return[Gt(t,h,"8snorm",1)[0]];case"r8uint":return[Gt(t,h,"8uint",1)[0]];case"r8sint":return[Gt(t,h,"8sint",1)[0]];case"rg8unorm":{const d=Gt(t,h,"8unorm",2);return[d[0],d[1]]}case"rg8snorm":{const d=Gt(t,h,"8snorm",2);return[d[0],d[1]]}case"rg8uint":{const d=Gt(t,h,"8uint",2);return[d[0],d[1]]}case"rg8sint":{const d=Gt(t,h,"8sint",2);return[d[0],d[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const d=Gt(t,h,"8unorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8snorm":{const d=Gt(t,h,"8snorm",4);return[d[0],d[1],d[2],d[3]]}case"rgba8uint":{const d=Gt(t,h,"8uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba8sint":{const d=Gt(t,h,"8sint",4);return[d[0],d[1],d[2],d[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const d=Gt(t,h,"8unorm",4);return[d[2],d[1],d[0],d[3]]}case"r16uint":return[Gt(t,h,"16uint",1)[0]];case"r16sint":return[Gt(t,h,"16sint",1)[0]];case"r16float":return[Gt(t,h,"16float",1)[0]];case"rg16uint":{const d=Gt(t,h,"16uint",2);return[d[0],d[1]]}case"rg16sint":{const d=Gt(t,h,"16sint",2);return[d[0],d[1]]}case"rg16float":{const d=Gt(t,h,"16float",2);return[d[0],d[1]]}case"rgba16uint":{const d=Gt(t,h,"16uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16sint":{const d=Gt(t,h,"16sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba16float":{const d=Gt(t,h,"16float",4);return[d[0],d[1],d[2],d[3]]}case"r32uint":return[Gt(t,h,"32uint",1)[0]];case"r32sint":return[Gt(t,h,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[Gt(t,h,"32float",1)[0]];case"rg32uint":{const d=Gt(t,h,"32uint",2);return[d[0],d[1]]}case"rg32sint":{const d=Gt(t,h,"32sint",2);return[d[0],d[1]]}case"rg32float":{const d=Gt(t,h,"32float",2);return[d[0],d[1]]}case"rgba32uint":{const d=Gt(t,h,"32uint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32sint":{const d=Gt(t,h,"32sint",4);return[d[0],d[1],d[2],d[3]]}case"rgba32float":{const d=Gt(t,h,"32float",4);return[d[0],d[1],d[2],d[3]]}case"rg11b10ufloat":{const d=new Uint32Array(t.buffer,h,1)[0],g=(4192256&d)>>11,b=(4290772992&d)>>22;return[KE(2047&d),KE(g),function(w){const R=112+(w>>5&31)<<23|(31&w)<<18;return P0[0]=R,VM[0]}(b),1]}}return null}function Gt(t,e,n,r){const s=[0,0,0,0];for(let h=0;h<r;++h)switch(n){case"8unorm":s[h]=t[e]/255,e++;break;case"8snorm":s[h]=t[e]/255*2-1,e++;break;case"8uint":s[h]=t[e],e++;break;case"8sint":s[h]=t[e]-127,e++;break;case"16uint":s[h]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":s[h]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":s[h]=(i=t[e]|t[e+1]<<8,a=void 0,l=void 0,u=void 0,a=(32768&i)>>15,u=1023&i,(l=(31744&i)>>10)==0?(a?-1:1)*Math.pow(2,-14)*(u/Math.pow(2,10)):l==31?u?NaN:1/0*(a?-1:1):(a?-1:1)*Math.pow(2,l-15)*(1+u/Math.pow(2,10))),e+=2;break;case"32uint":case"32sint":s[h]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":s[h]=new Float32Array(t.buffer,e,1)[0],e+=4}var i,a,l,u;return s}function tn(t,e,n,r,s){for(let i=0;i<r;++i)switch(n){case"8unorm":t[e]=255*s[i],e++;break;case"8snorm":t[e]=.5*(s[i]+1)*255,e++;break;case"8uint":t[e]=s[i],e++;break;case"8sint":t[e]=s[i]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=s[i],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=s[i],e+=2;break;case"16float":{const a=W7(s[i]);new Uint16Array(t.buffer,e,1)[0]=a,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=s[i],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=s[i],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=s[i],e+=4}return s}const gx={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Ms{constructor(){this.id=Ms._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,n){if(e){n(lg.instance);for(const r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(cg.instance)}}constEvaluate(e,n){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Ms._id=0;class lg extends Ms{}lg.instance=new lg;class cg extends Ms{}cg.instance=new cg;const $M=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class Nn extends Ms{constructor(){super()}}class rh extends Nn{constructor(e,n,r,s,i,a){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=s,this.startLine=i,this.endLine=a}get astNodeType(){return"function"}search(e){if(this.attributes)for(const n of this.attributes)e(n);e(this);for(const n of this.args)e(n);this.searchBlock(this.body,e)}}class X7 extends Nn{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class HM extends Nn{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class e_ extends Nn{constructor(e,n){super(),this.body=e,this.loopId=n}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class WM extends Nn{constructor(e,n,r,s){super(),this.init=e,this.condition=n,this.increment=r,this.body=s}get astNodeType(){return"for"}search(e){var n,r,s;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(s=this.increment)===null||s===void 0||s.search(e),this.searchBlock(this.body,e)}}class Hi extends Nn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class D0 extends Nn{constructor(e,n,r){super(),this.attributes=null,this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Uf extends Nn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class kp extends Nn{constructor(e,n,r,s,i){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"const"}constEvaluate(e,n){return this.value.constEvaluate(e,n)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var vc,If,Se,me;(t=>{t.increment="++",t.decrement="--"})(vc||(vc={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}})(vc||(vc={}));class qM extends Nn{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(If||(If={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(If||(If={}));class XM extends Nn{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class j0 extends Nn{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}isBuiltin(){return $M.has(this.name)}search(e){for(const n of this.args)n.search(e);e(this)}}class YM extends Nn{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class KM extends Nn{constructor(e,n){super(),this.condition=e,this.cases=n}get astNodeType(){return"switch"}search(e){e(this);for(const n of this.cases)n.search(e)}}class ZM extends Nn{constructor(e,n,r,s){super(),this.condition=e,this.body=n,this.elseif=r,this.else=s}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class QM extends Nn{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Y7 extends Nn{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class K7 extends Nn{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class GM extends Nn{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class F0 extends Nn{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class Z7 extends Nn{constructor(){super()}get astNodeType(){return"discard"}}class JM extends Nn{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class eI extends Nn{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}let Be=class Np extends Nn{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const s=Np._priority.get(n.name);Np._priority.get(e[r].name)<s&&(n=e[r])}return n.name==="x32"?Np.i32:n}getTypeName(){return this.name}};Be.x32=new Be("x32"),Be.f32=new Be("f32"),Be.i32=new Be("i32"),Be.u32=new Be("u32"),Be.f16=new Be("f16"),Be.bool=new Be("bool"),Be.void=new Be("void"),Be._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class ZE extends Be{constructor(e){super(e)}}class Li extends Be{constructor(e,n,r,s){super(e),this.members=n,this.startLine=r,this.endLine=s}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}search(e){for(const n of this.members)e(n)}}class ve extends Be{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}ve.vec2f=new ve("vec2",Be.f32,null),ve.vec3f=new ve("vec3",Be.f32,null),ve.vec4f=new ve("vec4",Be.f32,null),ve.vec2i=new ve("vec2",Be.i32,null),ve.vec3i=new ve("vec3",Be.i32,null),ve.vec4i=new ve("vec4",Be.i32,null),ve.vec2u=new ve("vec2",Be.u32,null),ve.vec3u=new ve("vec3",Be.u32,null),ve.vec4u=new ve("vec4",Be.u32,null),ve.vec2h=new ve("vec2",Be.f16,null),ve.vec3h=new ve("vec3",Be.f16,null),ve.vec4h=new ve("vec4",Be.f16,null),ve.vec2b=new ve("vec2",Be.bool,null),ve.vec3b=new ve("vec3",Be.bool,null),ve.vec4b=new ve("vec4",Be.bool,null),ve.mat2x2f=new ve("mat2x2",Be.f32,null),ve.mat2x3f=new ve("mat2x3",Be.f32,null),ve.mat2x4f=new ve("mat2x4",Be.f32,null),ve.mat3x2f=new ve("mat3x2",Be.f32,null),ve.mat3x3f=new ve("mat3x3",Be.f32,null),ve.mat3x4f=new ve("mat3x4",Be.f32,null),ve.mat4x2f=new ve("mat4x2",Be.f32,null),ve.mat4x3f=new ve("mat4x3",Be.f32,null),ve.mat4x4f=new ve("mat4x4",Be.f32,null),ve.mat2x2h=new ve("mat2x2",Be.f16,null),ve.mat2x3h=new ve("mat2x3",Be.f16,null),ve.mat2x4h=new ve("mat2x4",Be.f16,null),ve.mat3x2h=new ve("mat3x2",Be.f16,null),ve.mat3x3h=new ve("mat3x3",Be.f16,null),ve.mat3x4h=new ve("mat3x4",Be.f16,null),ve.mat4x2h=new ve("mat4x2",Be.f16,null),ve.mat4x3h=new ve("mat4x3",Be.f16,null),ve.mat4x4h=new ve("mat4x4",Be.f16,null),ve.mat2x2i=new ve("mat2x2",Be.i32,null),ve.mat2x3i=new ve("mat2x3",Be.i32,null),ve.mat2x4i=new ve("mat2x4",Be.i32,null),ve.mat3x2i=new ve("mat3x2",Be.i32,null),ve.mat3x3i=new ve("mat3x3",Be.i32,null),ve.mat3x4i=new ve("mat3x4",Be.i32,null),ve.mat4x2i=new ve("mat4x2",Be.i32,null),ve.mat4x3i=new ve("mat4x3",Be.i32,null),ve.mat4x4i=new ve("mat4x4",Be.i32,null),ve.mat2x2u=new ve("mat2x2",Be.u32,null),ve.mat2x3u=new ve("mat2x3",Be.u32,null),ve.mat2x4u=new ve("mat2x4",Be.u32,null),ve.mat3x2u=new ve("mat3x2",Be.u32,null),ve.mat3x3u=new ve("mat3x3",Be.u32,null),ve.mat3x4u=new ve("mat3x4",Be.u32,null),ve.mat4x2u=new ve("mat4x2",Be.u32,null),ve.mat4x3u=new ve("mat4x3",Be.u32,null),ve.mat4x4u=new ve("mat4x4",Be.u32,null);class Mp extends Be{constructor(e,n,r,s){super(e),this.storage=n,this.type=r,this.access=s}get astNodeType(){return"pointer"}}class zf extends Be{constructor(e,n,r,s){super(e),this.attributes=n,this.format=r,this.count=s}get astNodeType(){return"array"}get isArray(){return!0}}class Of extends Be{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class Gs extends Ms{constructor(){super(),this.postfix=null}}class fl extends Gs{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class ci extends Gs{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const n of this.args)n.search(e)}constEvaluate(e,n){return n&&(n[0]=this.type),e.evalExpression(this,e.context)}}class B0 extends Gs{constructor(e,n){super(),this.cachedReturnValue=null,this.name=e,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return $M.has(this.name)}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){for(const n of this.args)n.search(e);e(this)}}class cs extends Gs{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,n){return e.evalExpression(this,e.context)}}class tI extends Gs{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(e,n){if(this.initializer){const r=e.evalExpression(this.initializer,e.context);return r!==null&&this.postfix?r.getSubData(e,this.postfix,e.context):r}return null}search(e){this.initializer.search(e)}}class tr extends Gs{constructor(e,n){super(),this.value=e,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(e,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof pe}get isVector(){return this.value instanceof Q||this.value instanceof xt}get scalarValue(){return this.value instanceof pe?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof Q||this.value instanceof xt?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class nI extends Gs{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class Zc extends Gs{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class rI extends Gs{constructor(){super()}}class Xn extends rI{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Us extends rI{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}_getPromotedType(e,n){return e.name===n.name?e:e.name==="f32"||n.name==="f32"?Be.f32:e.name==="u32"||n.name==="u32"?Be.u32:Be.i32}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class sI extends Ms{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class Ip extends Gs{constructor(){super()}get astNodeType(){return"default"}}class iI extends sI{constructor(e,n){super(n),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class oI extends sI{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class QE extends Ms{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class Q7 extends Ms{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class GE extends Ms{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}class aI extends Ms{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}class Ns{constructor(e,n){this.parent=null,this.typeInfo=e,this.parent=n,this.id=Ns._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,n,r,s){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,n,r){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Ns._id=0;class t_ extends Ns{constructor(){super(new Es("void",null),null)}toString(){return"void"}}t_.void=new t_;class lc extends Ns{constructor(e){super(new Jv("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,n,r,s){this.reference.setDataValue(e,n,r,s)}getSubData(e,n,r){return n?this.reference.getSubData(e,n,r):this}toString(){return`&${this.reference.toString()}`}}class pe extends Ns{constructor(e,n,r=null){super(n,r),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!=0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new pe(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new pe(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new pe(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,n,r,s){if(r)return void console.error("SetDataValue: Scalar data does not support postfix",r);if(!(n instanceof pe))return void console.error("SetDataValue: Invalid value",n);let i=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?i=Math.floor(i):this.typeInfo.name==="bool"&&(i=i?1:0),this.data[0]=i}getSubData(e,n,r){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}}function G7(t,e,n){const r=e.length;return r===2?n==="f32"?new Q(new Float32Array(e),t.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new Q(new Int32Array(e),t.getTypeInfo("vec2i")):n==="u32"?new Q(new Uint32Array(e),t.getTypeInfo("vec2u")):n==="f16"?new Q(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):r===3?n==="f32"?new Q(new Float32Array(e),t.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new Q(new Int32Array(e),t.getTypeInfo("vec3i")):n==="u32"?new Q(new Uint32Array(e),t.getTypeInfo("vec3u")):n==="f16"?new Q(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):r===4?n==="f32"?new Q(new Float32Array(e),t.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new Q(new Int32Array(e),t.getTypeInfo("vec4i")):n==="u32"?new Q(new Uint32Array(e),t.getTypeInfo("vec4u")):n==="f16"?new Q(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}class Q extends Ns{constructor(e,n,r=null){if(super(n,r),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const s=this.typeInfo.name;s==="vec2f"||s==="vec3f"||s==="vec4f"?this.data=new Float32Array(e):s==="vec2i"||s==="vec3i"||s==="vec4i"?this.data=new Int32Array(e):s==="vec2u"||s==="vec3u"||s==="vec4u"?this.data=new Uint32Array(e):s==="vec2h"||s==="vec3h"||s==="vec4h"?this.data=new Float32Array(e):s==="vec2b"||s==="vec3b"||s==="vec4b"?this.data=new Int32Array(e):s==="vec2"||s==="vec3"||s==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${s}`)}}clone(){if(this.data instanceof Float32Array)return new Q(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Q(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Q(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,n,r,s){r instanceof fl?console.error("TODO: Set vector postfix"):n instanceof Q?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;let s=e.getTypeInfo("f32");if(this.typeInfo instanceof ul)s=this.typeInfo.format||s;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?s=e.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?s=e.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?s=e.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?s=e.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?s=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let i=this;for(;n!==null&&i!==null;){if(n instanceof Zc){const a=n.index;let l=-1;if(a instanceof tr){if(!(a.value instanceof pe))return console.error(`GetSubData: Invalid array index ${a.value}`),null;l=a.value.value}else{const u=e.evalExpression(a,r);if(!(u instanceof pe))return console.error("GetSubData: Unknown index type",a),null;l=u.value}if(l<0||l>=i.data.length)return console.error("GetSubData: Index out of range",l),null;if(i.data instanceof Float32Array){const u=new Float32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new pe(u,s)}if(i.data instanceof Int32Array){const u=new Int32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new pe(u,s)}if(i.data instanceof Uint32Array){const u=new Uint32Array(i.data.buffer,i.data.byteOffset+4*l,1);return new pe(u,s)}throw"GetSubData: Invalid data type"}if(!(n instanceof fl))return console.error("GetSubData: Unknown postfix",n),null;{const a=n.value.toLowerCase();if(a.length===1){let u=0;if(a==="x"||a==="r")u=0;else if(a==="y"||a==="g")u=1;else if(a==="z"||a==="b")u=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;u=3}if(this.data instanceof Float32Array){let h=new Float32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new pe(h,s,this)}if(this.data instanceof Int32Array){let h=new Int32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new pe(h,s,this)}if(this.data instanceof Uint32Array){let h=new Uint32Array(this.data.buffer,this.data.byteOffset+4*u,1);return new pe(h,s,this)}}const l=[];for(const u of a)u==="x"||u==="r"?l.push(this.data[0]):u==="y"||u==="g"?l.push(this.data[1]):u==="z"||u==="b"?l.push(this.data[2]):u==="w"||u==="a"?l.push(this.data[3]):console.error(`GetDataValue: Unknown member ${u}`);i=G7(e,l,s.name)}n=n.postfix}return i}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class xt extends Ns{constructor(e,n,r=null){super(n,r),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new xt(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,n,r,s){r instanceof fl?console.error("TODO: Set matrix postfix"):n instanceof xt?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;const s=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof ul)this.typeInfo.format;else if(s.endsWith("f"))e.getTypeInfo("f32");else if(s.endsWith("i"))e.getTypeInfo("i32");else if(s.endsWith("u"))e.getTypeInfo("u32");else{if(!s.endsWith("h"))return console.error(`GetDataValue: Unknown type ${s}`),null;e.getTypeInfo("f16")}if(n instanceof Zc){const i=n.index;let a=-1;if(i instanceof tr){if(!(i.value instanceof pe))return console.error(`GetDataValue: Invalid array index ${i.value}`),null;a=i.value.value}else{const h=e.evalExpression(i,r);if(!(h instanceof pe))return console.error("GetDataValue: Unknown index type",i),null;a=h.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const l=s.endsWith("h")?"h":"f";let u;if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h"||s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h")u=new Q(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${l}`));else if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h"||s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h")u=new Q(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${l}`));else{if(s!=="mat2x4"&&s!=="mat2x4f"&&s!=="mat2x4h"&&s!=="mat3x4"&&s!=="mat3x4f"&&s!=="mat3x4h"&&s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${s}`),null;u=new Q(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${l}`))}return n.postfix?u.getSubData(e,n.postfix,r):u}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class Bn extends Ns{constructor(e,n,r=0,s=null){super(n,s),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=r}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Bn(e.buffer,this.typeInfo,0,null)}setDataValue(e,n,r,s){if(n===null)return void console.log("setDataValue: NULL data.");let i=this.offset,a=this.typeInfo;for(;r;){if(r instanceof Zc)if(a instanceof Jo){const l=r.index;if(l instanceof tr){if(!(l.value instanceof pe))return void console.error(`SetDataValue: Invalid index type ${l.value}`);i+=l.value.value*a.stride}else{const u=e.evalExpression(l,s);if(!(u instanceof pe))return void console.error("SetDataValue: Unknown index type",l);i+=u.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(r instanceof fl))return void console.error("SetDataValue: Unknown postfix type",r);{const l=r.value;if(a instanceof Yo){let u=!1;for(const h of a.members)if(h.name===l){i+=h.offset,a=h.type,u=!0;break}if(!u)return void console.error(`SetDataValue: Member ${l} not found`)}else if(a instanceof Es){const u=a.getTypeName();let h=0;if(l==="x"||l==="r")h=0;else if(l==="y"||l==="g")h=1;else if(l==="z"||l==="b")h=2;else{if(l!=="w"&&l!=="a")return void console.error(`SetDataValue: Unknown member ${l}`);h=3}if(!(n instanceof pe))return void console.error("SetDataValue: Invalid value",n);const d=n.value;return u==="vec2f"?void(new Float32Array(this.buffer,i,2)[h]=d):u==="vec3f"?void(new Float32Array(this.buffer,i,3)[h]=d):u==="vec4f"?void(new Float32Array(this.buffer,i,4)[h]=d):u==="vec2i"?void(new Int32Array(this.buffer,i,2)[h]=d):u==="vec3i"?void(new Int32Array(this.buffer,i,3)[h]=d):u==="vec4i"?void(new Int32Array(this.buffer,i,4)[h]=d):u==="vec2u"?void(new Uint32Array(this.buffer,i,2)[h]=d):u==="vec3u"?void(new Uint32Array(this.buffer,i,3)[h]=d):u==="vec4u"?void(new Uint32Array(this.buffer,i,4)[h]=d):void console.error(`SetDataValue: Type ${u} is not a struct`)}}}r=r.postfix}this.setData(e,n,a,i,s)}setData(e,n,r,s,i){const a=r.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool")if(a!=="vec2f"&&a!=="vec2h")if(a!=="vec3f"&&a!=="vec3h")if(a!=="vec4f"&&a!=="vec4h")if(a!=="vec2i")if(a!=="vec3i")if(a!=="vec4i")if(a!=="vec2u")if(a!=="vec3u")if(a!=="vec4u")if(a!=="vec2b")if(a!=="vec3b")if(a!=="vec4b")if(a!=="mat2x2f"&&a!=="mat2x2h")if(a!=="mat2x3f"&&a!=="mat2x3h")if(a!=="mat2x4f"&&a!=="mat2x4h")if(a!=="mat3x2f"&&a!=="mat3x2h")if(a!=="mat3x3f"&&a!=="mat3x3h")if(a!=="mat3x4f"&&a!=="mat3x4h")if(a!=="mat4x2f"&&a!=="mat4x2h")if(a!=="mat4x3f"&&a!=="mat4x3h")if(a!=="mat4x4f"&&a!=="mat4x4h")if(n instanceof Bn){if(r===n.typeInfo)return void new Uint8Array(this.buffer,s,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",a,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`);else{const l=new Float32Array(this.buffer,s,16);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11],l[12]=n.data[12],l[13]=n.data[13],l[14]=n.data[14],l[15]=n.data[15]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15])}else{const l=new Float32Array(this.buffer,s,12);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11])}else{const l=new Float32Array(this.buffer,s,8);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7])}else{const l=new Float32Array(this.buffer,s,12);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8],l[9]=n.data[9],l[10]=n.data[10],l[11]=n.data[11]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11])}else{const l=new Float32Array(this.buffer,s,9);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7],l[8]=n.data[8]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8])}else{const l=new Float32Array(this.buffer,s,6);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5])}else{const l=new Float32Array(this.buffer,s,8);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5],l[6]=n.data[6],l[7]=n.data[7]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7])}else{const l=new Float32Array(this.buffer,s,6);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3],l[4]=n.data[4],l[5]=n.data[5]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5])}else{const l=new Float32Array(this.buffer,s,4);n instanceof xt?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,4);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,3);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Uint32Array(this.buffer,s,2);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Uint32Array(this.buffer,s,4);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Uint32Array(this.buffer,s,3);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Uint32Array(this.buffer,s,2);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Int32Array(this.buffer,s,4);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Int32Array(this.buffer,s,3);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Int32Array(this.buffer,s,2);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else{const l=new Float32Array(this.buffer,s,4);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2],l[3]=n.data[3]):(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3])}else{const l=new Float32Array(this.buffer,s,3);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1],l[2]=n.data[2]):(l[0]=n[0],l[1]=n[1],l[2]=n[2])}else{const l=new Float32Array(this.buffer,s,2);n instanceof Q?(l[0]=n.data[0],l[1]=n.data[1]):(l[0]=n[0],l[1]=n[1])}else n instanceof pe&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof pe&&(new Uint32Array(this.buffer,s,1)[0]=n.value);else n instanceof pe&&(new Int32Array(this.buffer,s,1)[0]=n.value);else n instanceof pe&&(new Float32Array(this.buffer,s,1)[0]=n.value)}getSubData(e,n,r){var s,i,a;if(n===null)return this;let l=this.offset,u=this.typeInfo;for(;n;){if(n instanceof Zc){const d=n.index,g=d instanceof Gs?e.evalExpression(d,r):d;let b=0;if(g instanceof pe?b=g.value:typeof g=="number"?b=g:console.error("GetDataValue: Invalid index type",d),u instanceof Jo)l+=b*u.stride,u=u.format;else{const w=u.getTypeName();w==="mat4x4"||w==="mat4x4f"||w==="mat4x4h"?(l+=16*b,u=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${u.getTypeName()} is not an array`)}}else{if(!(n instanceof fl))return console.error("GetDataValue: Unknown postfix type",n),null;{const d=n.value;if(u instanceof Yo){let g=!1;for(const b of u.members)if(b.name===d){l+=b.offset,u=b.type,g=!0;break}if(!g)return console.error(`GetDataValue: Member ${d} not found`),null}else if(u instanceof Es){const g=u.getTypeName();if(g==="vec2f"||g==="vec3f"||g==="vec4f"||g==="vec2i"||g==="vec3i"||g==="vec4i"||g==="vec2u"||g==="vec3u"||g==="vec4u"||g==="vec2b"||g==="vec3b"||g==="vec4b"||g==="vec2h"||g==="vec3h"||g==="vec4h"||g==="vec2"||g==="vec3"||g==="vec4"){if(d.length>0&&d.length<5){let b="f";const w=[];for(let R=0;R<d.length;++R){const A=d[R].toLowerCase();let C=0;if(A==="x"||A==="r")C=0;else if(A==="y"||A==="g")C=1;else if(A==="z"||A==="b")C=2;else{if(A!=="w"&&A!=="a")return console.error(`Unknown member ${d}`),null;C=3}if(d.length===1){if(g.endsWith("f"))return this.buffer.byteLength<l+4*C+4?(console.log("Insufficient buffer data"),null):new pe(new Float32Array(this.buffer,l+4*C,1),e.getTypeInfo("f32"),this);if(g.endsWith("h"))return new pe(new Float32Array(this.buffer,l+4*C,1),e.getTypeInfo("f16"),this);if(g.endsWith("i"))return new pe(new Int32Array(this.buffer,l+4*C,1),e.getTypeInfo("i32"),this);if(g.endsWith("b"))return new pe(new Int32Array(this.buffer,l+4*C,1),e.getTypeInfo("bool"),this);if(g.endsWith("u"))return new pe(new Uint32Array(this.buffer,l+4*C,1),e.getTypeInfo("i32"),this)}if(g==="vec2f")w.push(new Float32Array(this.buffer,l,2)[C]);else if(g==="vec3f"){if(l+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const I=new Float32Array(this.buffer,l,3);w.push(I[C])}else if(g==="vec4f")w.push(new Float32Array(this.buffer,l,4)[C]);else if(g==="vec2i")b="i",w.push(new Int32Array(this.buffer,l,2)[C]);else if(g==="vec3i")b="i",w.push(new Int32Array(this.buffer,l,3)[C]);else if(g==="vec4i")b="i",w.push(new Int32Array(this.buffer,l,4)[C]);else if(g==="vec2u"){b="u";const I=new Uint32Array(this.buffer,l,2);w.push(I[C])}else g==="vec3u"?(b="u",w.push(new Uint32Array(this.buffer,l,3)[C])):g==="vec4u"&&(b="u",w.push(new Uint32Array(this.buffer,l,4)[C]))}return w.length===2?u=e.getTypeInfo(`vec2${b}`):w.length===3?u=e.getTypeInfo(`vec3${b}`):w.length===4?u=e.getTypeInfo(`vec4${b}`):console.error(`GetDataValue: Invalid vector length ${w.length}`),new Q(w,u,null)}return console.error(`GetDataValue: Unknown member ${d}`),null}return console.error(`GetDataValue: Type ${g} is not a struct`),null}}}n=n.postfix}const h=u.getTypeName();return h==="f32"?new pe(new Float32Array(this.buffer,l,1),u,this):h==="i32"?new pe(new Int32Array(this.buffer,l,1),u,this):h==="u32"?new pe(new Uint32Array(this.buffer,l,1),u,this):h==="vec2f"?new Q(new Float32Array(this.buffer,l,2),u,this):h==="vec3f"?new Q(new Float32Array(this.buffer,l,3),u,this):h==="vec4f"?new Q(new Float32Array(this.buffer,l,4),u,this):h==="vec2i"?new Q(new Int32Array(this.buffer,l,2),u,this):h==="vec3i"?new Q(new Int32Array(this.buffer,l,3),u,this):h==="vec4i"?new Q(new Int32Array(this.buffer,l,4),u,this):h==="vec2u"?new Q(new Uint32Array(this.buffer,l,2),u,this):h==="vec3u"?new Q(new Uint32Array(this.buffer,l,3),u,this):h==="vec4u"?new Q(new Uint32Array(this.buffer,l,4),u,this):u instanceof ul&&u.name==="atomic"?((s=u.format)===null||s===void 0?void 0:s.name)==="u32"?new pe(new Uint32Array(this.buffer,l,1)[0],u.format,this):((i=u.format)===null||i===void 0?void 0:i.name)==="i32"?new pe(new Int32Array(this.buffer,l,1)[0],u.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=u.format)===null||a===void 0?void 0:a.name}`),null):new Bn(this.buffer,u,l,this)}toString(){let e="";if(this.typeInfo instanceof Jo)if(this.typeInfo.format.name==="f32"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="i32"){const n=new Int32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="u32"){const n=new Uint32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="vec2f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}]`;for(let r=1;r<n.length/2;++r)e+=`, [${n[2*r]}, ${n[2*r+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}, ${n[r+3]}]`}else e="[...]";else this.typeInfo instanceof Yo?e+="{...}":e="[...]";return e}}class Ui extends Ns{constructor(e,n,r,s){super(n,null),this.data=e,this.descriptor=r,this.view=s}clone(){return new Ui(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>0?(e=r[0])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.width)!==null&&n!==void 0?n:0}get height(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>1?(e=r[1])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var e,n;const r=this.descriptor.size;return r instanceof Array&&r.length>2?(e=r[2])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const n=[this.width,this.height,this.depthOrArrayLayers];for(let r=0;r<n.length;++r)n[r]=Math.max(1,n[r]>>e);return n}get texelByteSize(){const e=this.format,n=gx[e];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,n=gx[e];return!!n&&n.isDepthStencil}getGpuSize(){const e=this.format,n=gx[e],r=this.width;if(!e||r<=0||!n)return-1;const s=this.height,i=this.depthOrArrayLayers,a=this.dimension;return r/n.blockWidth*(a==="1d"?1:s/n.blockHeight)*n.bytesPerBlock*i}getPixel(e,n,r=0,s=0){const i=this.texelByteSize,a=this.bytesPerRow,l=this.height,u=this.data[s];return q7(new Uint8Array(u),e,n,r,s,l,a,i,this.format)}setPixel(e,n,r,s,i){const a=this.texelByteSize,l=this.bytesPerRow,u=this.height,h=this.data[s];(function(d,g,b,w,R,A,C,I,M,k){const P=w*(C>>=R)*(A>>=R)+b*C+g*I;switch(M){case"r8unorm":return void tn(d,P,"8unorm",1,k);case"r8snorm":return void tn(d,P,"8snorm",1,k);case"r8uint":return void tn(d,P,"8uint",1,k);case"r8sint":return void tn(d,P,"8sint",1,k);case"rg8unorm":return void tn(d,P,"8unorm",2,k);case"rg8snorm":return void tn(d,P,"8snorm",2,k);case"rg8uint":return void tn(d,P,"8uint",2,k);case"rg8sint":return void tn(d,P,"8sint",2,k);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void tn(d,P,"8unorm",4,k);case"rgba8snorm":return void tn(d,P,"8snorm",4,k);case"rgba8uint":return void tn(d,P,"8uint",4,k);case"rgba8sint":return void tn(d,P,"8sint",4,k);case"r16uint":return void tn(d,P,"16uint",1,k);case"r16sint":return void tn(d,P,"16sint",1,k);case"r16float":return void tn(d,P,"16float",1,k);case"rg16uint":return void tn(d,P,"16uint",2,k);case"rg16sint":return void tn(d,P,"16sint",2,k);case"rg16float":return void tn(d,P,"16float",2,k);case"rgba16uint":return void tn(d,P,"16uint",4,k);case"rgba16sint":return void tn(d,P,"16sint",4,k);case"rgba16float":return void tn(d,P,"16float",4,k);case"r32uint":return void tn(d,P,"32uint",1,k);case"r32sint":return void tn(d,P,"32sint",1,k);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void tn(d,P,"32float",1,k);case"rg32uint":return void tn(d,P,"32uint",2,k);case"rg32sint":return void tn(d,P,"32sint",2,k);case"rg32float":return void tn(d,P,"32float",2,k);case"rgba32uint":return void tn(d,P,"32uint",4,k);case"rgba32sint":return void tn(d,P,"32sint",4,k);case"rgba32float":return void tn(d,P,"32float",4,k);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(h),e,n,r,s,u,l,a,this.format,i)}}(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(me||(me={}));class ye{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class q{}Se=q,q.none=new ye("",me.reserved,""),q.eof=new ye("EOF",me.token,""),q.reserved={asm:new ye("asm",me.reserved,"asm"),bf16:new ye("bf16",me.reserved,"bf16"),do:new ye("do",me.reserved,"do"),enum:new ye("enum",me.reserved,"enum"),f16:new ye("f16",me.reserved,"f16"),f64:new ye("f64",me.reserved,"f64"),handle:new ye("handle",me.reserved,"handle"),i8:new ye("i8",me.reserved,"i8"),i16:new ye("i16",me.reserved,"i16"),i64:new ye("i64",me.reserved,"i64"),mat:new ye("mat",me.reserved,"mat"),premerge:new ye("premerge",me.reserved,"premerge"),regardless:new ye("regardless",me.reserved,"regardless"),typedef:new ye("typedef",me.reserved,"typedef"),u8:new ye("u8",me.reserved,"u8"),u16:new ye("u16",me.reserved,"u16"),u64:new ye("u64",me.reserved,"u64"),unless:new ye("unless",me.reserved,"unless"),using:new ye("using",me.reserved,"using"),vec:new ye("vec",me.reserved,"vec"),void:new ye("void",me.reserved,"void")},q.keywords={array:new ye("array",me.keyword,"array"),atomic:new ye("atomic",me.keyword,"atomic"),bool:new ye("bool",me.keyword,"bool"),f32:new ye("f32",me.keyword,"f32"),i32:new ye("i32",me.keyword,"i32"),mat2x2:new ye("mat2x2",me.keyword,"mat2x2"),mat2x3:new ye("mat2x3",me.keyword,"mat2x3"),mat2x4:new ye("mat2x4",me.keyword,"mat2x4"),mat3x2:new ye("mat3x2",me.keyword,"mat3x2"),mat3x3:new ye("mat3x3",me.keyword,"mat3x3"),mat3x4:new ye("mat3x4",me.keyword,"mat3x4"),mat4x2:new ye("mat4x2",me.keyword,"mat4x2"),mat4x3:new ye("mat4x3",me.keyword,"mat4x3"),mat4x4:new ye("mat4x4",me.keyword,"mat4x4"),ptr:new ye("ptr",me.keyword,"ptr"),sampler:new ye("sampler",me.keyword,"sampler"),sampler_comparison:new ye("sampler_comparison",me.keyword,"sampler_comparison"),struct:new ye("struct",me.keyword,"struct"),texture_1d:new ye("texture_1d",me.keyword,"texture_1d"),texture_2d:new ye("texture_2d",me.keyword,"texture_2d"),texture_2d_array:new ye("texture_2d_array",me.keyword,"texture_2d_array"),texture_3d:new ye("texture_3d",me.keyword,"texture_3d"),texture_cube:new ye("texture_cube",me.keyword,"texture_cube"),texture_cube_array:new ye("texture_cube_array",me.keyword,"texture_cube_array"),texture_multisampled_2d:new ye("texture_multisampled_2d",me.keyword,"texture_multisampled_2d"),texture_storage_1d:new ye("texture_storage_1d",me.keyword,"texture_storage_1d"),texture_storage_2d:new ye("texture_storage_2d",me.keyword,"texture_storage_2d"),texture_storage_2d_array:new ye("texture_storage_2d_array",me.keyword,"texture_storage_2d_array"),texture_storage_3d:new ye("texture_storage_3d",me.keyword,"texture_storage_3d"),texture_depth_2d:new ye("texture_depth_2d",me.keyword,"texture_depth_2d"),texture_depth_2d_array:new ye("texture_depth_2d_array",me.keyword,"texture_depth_2d_array"),texture_depth_cube:new ye("texture_depth_cube",me.keyword,"texture_depth_cube"),texture_depth_cube_array:new ye("texture_depth_cube_array",me.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new ye("texture_depth_multisampled_2d",me.keyword,"texture_depth_multisampled_2d"),texture_external:new ye("texture_external",me.keyword,"texture_external"),u32:new ye("u32",me.keyword,"u32"),vec2:new ye("vec2",me.keyword,"vec2"),vec3:new ye("vec3",me.keyword,"vec3"),vec4:new ye("vec4",me.keyword,"vec4"),bitcast:new ye("bitcast",me.keyword,"bitcast"),block:new ye("block",me.keyword,"block"),break:new ye("break",me.keyword,"break"),case:new ye("case",me.keyword,"case"),continue:new ye("continue",me.keyword,"continue"),continuing:new ye("continuing",me.keyword,"continuing"),default:new ye("default",me.keyword,"default"),diagnostic:new ye("diagnostic",me.keyword,"diagnostic"),discard:new ye("discard",me.keyword,"discard"),else:new ye("else",me.keyword,"else"),enable:new ye("enable",me.keyword,"enable"),fallthrough:new ye("fallthrough",me.keyword,"fallthrough"),false:new ye("false",me.keyword,"false"),fn:new ye("fn",me.keyword,"fn"),for:new ye("for",me.keyword,"for"),function:new ye("function",me.keyword,"function"),if:new ye("if",me.keyword,"if"),let:new ye("let",me.keyword,"let"),const:new ye("const",me.keyword,"const"),loop:new ye("loop",me.keyword,"loop"),while:new ye("while",me.keyword,"while"),private:new ye("private",me.keyword,"private"),read:new ye("read",me.keyword,"read"),read_write:new ye("read_write",me.keyword,"read_write"),return:new ye("return",me.keyword,"return"),requires:new ye("requires",me.keyword,"requires"),storage:new ye("storage",me.keyword,"storage"),switch:new ye("switch",me.keyword,"switch"),true:new ye("true",me.keyword,"true"),alias:new ye("alias",me.keyword,"alias"),type:new ye("type",me.keyword,"type"),uniform:new ye("uniform",me.keyword,"uniform"),var:new ye("var",me.keyword,"var"),override:new ye("override",me.keyword,"override"),workgroup:new ye("workgroup",me.keyword,"workgroup"),write:new ye("write",me.keyword,"write"),r8unorm:new ye("r8unorm",me.keyword,"r8unorm"),r8snorm:new ye("r8snorm",me.keyword,"r8snorm"),r8uint:new ye("r8uint",me.keyword,"r8uint"),r8sint:new ye("r8sint",me.keyword,"r8sint"),r16uint:new ye("r16uint",me.keyword,"r16uint"),r16sint:new ye("r16sint",me.keyword,"r16sint"),r16float:new ye("r16float",me.keyword,"r16float"),rg8unorm:new ye("rg8unorm",me.keyword,"rg8unorm"),rg8snorm:new ye("rg8snorm",me.keyword,"rg8snorm"),rg8uint:new ye("rg8uint",me.keyword,"rg8uint"),rg8sint:new ye("rg8sint",me.keyword,"rg8sint"),r32uint:new ye("r32uint",me.keyword,"r32uint"),r32sint:new ye("r32sint",me.keyword,"r32sint"),r32float:new ye("r32float",me.keyword,"r32float"),rg16uint:new ye("rg16uint",me.keyword,"rg16uint"),rg16sint:new ye("rg16sint",me.keyword,"rg16sint"),rg16float:new ye("rg16float",me.keyword,"rg16float"),rgba8unorm:new ye("rgba8unorm",me.keyword,"rgba8unorm"),rgba8unorm_srgb:new ye("rgba8unorm_srgb",me.keyword,"rgba8unorm_srgb"),rgba8snorm:new ye("rgba8snorm",me.keyword,"rgba8snorm"),rgba8uint:new ye("rgba8uint",me.keyword,"rgba8uint"),rgba8sint:new ye("rgba8sint",me.keyword,"rgba8sint"),bgra8unorm:new ye("bgra8unorm",me.keyword,"bgra8unorm"),bgra8unorm_srgb:new ye("bgra8unorm_srgb",me.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new ye("rgb10a2unorm",me.keyword,"rgb10a2unorm"),rg11b10float:new ye("rg11b10float",me.keyword,"rg11b10float"),rg32uint:new ye("rg32uint",me.keyword,"rg32uint"),rg32sint:new ye("rg32sint",me.keyword,"rg32sint"),rg32float:new ye("rg32float",me.keyword,"rg32float"),rgba16uint:new ye("rgba16uint",me.keyword,"rgba16uint"),rgba16sint:new ye("rgba16sint",me.keyword,"rgba16sint"),rgba16float:new ye("rgba16float",me.keyword,"rgba16float"),rgba32uint:new ye("rgba32uint",me.keyword,"rgba32uint"),rgba32sint:new ye("rgba32sint",me.keyword,"rgba32sint"),rgba32float:new ye("rgba32float",me.keyword,"rgba32float"),static_assert:new ye("static_assert",me.keyword,"static_assert")},q.tokens={decimal_float_literal:new ye("decimal_float_literal",me.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new ye("hex_float_literal",me.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new ye("int_literal",me.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new ye("uint_literal",me.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new ye("name",me.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new ye("ident",me.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new ye("and",me.token,"&"),and_and:new ye("and_and",me.token,"&&"),arrow:new ye("arrow ",me.token,"->"),attr:new ye("attr",me.token,"@"),forward_slash:new ye("forward_slash",me.token,"/"),bang:new ye("bang",me.token,"!"),bracket_left:new ye("bracket_left",me.token,"["),bracket_right:new ye("bracket_right",me.token,"]"),brace_left:new ye("brace_left",me.token,"{"),brace_right:new ye("brace_right",me.token,"}"),colon:new ye("colon",me.token,":"),comma:new ye("comma",me.token,","),equal:new ye("equal",me.token,"="),equal_equal:new ye("equal_equal",me.token,"=="),not_equal:new ye("not_equal",me.token,"!="),greater_than:new ye("greater_than",me.token,">"),greater_than_equal:new ye("greater_than_equal",me.token,">="),shift_right:new ye("shift_right",me.token,">>"),less_than:new ye("less_than",me.token,"<"),less_than_equal:new ye("less_than_equal",me.token,"<="),shift_left:new ye("shift_left",me.token,"<<"),modulo:new ye("modulo",me.token,"%"),minus:new ye("minus",me.token,"-"),minus_minus:new ye("minus_minus",me.token,"--"),period:new ye("period",me.token,"."),plus:new ye("plus",me.token,"+"),plus_plus:new ye("plus_plus",me.token,"++"),or:new ye("or",me.token,"|"),or_or:new ye("or_or",me.token,"||"),paren_left:new ye("paren_left",me.token,"("),paren_right:new ye("paren_right",me.token,")"),semicolon:new ye("semicolon",me.token,";"),star:new ye("star",me.token,"*"),tilde:new ye("tilde",me.token,"~"),underscore:new ye("underscore",me.token,"_"),xor:new ye("xor",me.token,"^"),plus_equal:new ye("plus_equal",me.token,"+="),minus_equal:new ye("minus_equal",me.token,"-="),times_equal:new ye("times_equal",me.token,"*="),division_equal:new ye("division_equal",me.token,"/="),modulo_equal:new ye("modulo_equal",me.token,"%="),and_equal:new ye("and_equal",me.token,"&="),or_equal:new ye("or_equal",me.token,"|="),xor_equal:new ye("xor_equal",me.token,"^="),shift_right_equal:new ye("shift_right_equal",me.token,">>="),shift_left_equal:new ye("shift_left_equal",me.token,"<<=")},q.simpleTokens={"@":Se.tokens.attr,"{":Se.tokens.brace_left,"}":Se.tokens.brace_right,":":Se.tokens.colon,",":Se.tokens.comma,"(":Se.tokens.paren_left,")":Se.tokens.paren_right,";":Se.tokens.semicolon},q.literalTokens={"&":Se.tokens.and,"&&":Se.tokens.and_and,"->":Se.tokens.arrow,"/":Se.tokens.forward_slash,"!":Se.tokens.bang,"[":Se.tokens.bracket_left,"]":Se.tokens.bracket_right,"=":Se.tokens.equal,"==":Se.tokens.equal_equal,"!=":Se.tokens.not_equal,">":Se.tokens.greater_than,">=":Se.tokens.greater_than_equal,">>":Se.tokens.shift_right,"<":Se.tokens.less_than,"<=":Se.tokens.less_than_equal,"<<":Se.tokens.shift_left,"%":Se.tokens.modulo,"-":Se.tokens.minus,"--":Se.tokens.minus_minus,".":Se.tokens.period,"+":Se.tokens.plus,"++":Se.tokens.plus_plus,"|":Se.tokens.or,"||":Se.tokens.or_or,"*":Se.tokens.star,"~":Se.tokens.tilde,_:Se.tokens.underscore,"^":Se.tokens.xor,"+=":Se.tokens.plus_equal,"-=":Se.tokens.minus_equal,"*=":Se.tokens.times_equal,"/=":Se.tokens.division_equal,"%=":Se.tokens.modulo_equal,"&=":Se.tokens.and_equal,"|=":Se.tokens.or_equal,"^=":Se.tokens.xor_equal,">>=":Se.tokens.shift_right_equal,"<<=":Se.tokens.shift_left_equal},q.regexTokens={decimal_float_literal:Se.tokens.decimal_float_literal,hex_float_literal:Se.tokens.hex_float_literal,int_literal:Se.tokens.int_literal,uint_literal:Se.tokens.uint_literal,ident:Se.tokens.ident},q.storage_class=[Se.keywords.function,Se.keywords.private,Se.keywords.workgroup,Se.keywords.uniform,Se.keywords.storage],q.access_mode=[Se.keywords.read,Se.keywords.write,Se.keywords.read_write],q.sampler_type=[Se.keywords.sampler,Se.keywords.sampler_comparison],q.sampled_texture_type=[Se.keywords.texture_1d,Se.keywords.texture_2d,Se.keywords.texture_2d_array,Se.keywords.texture_3d,Se.keywords.texture_cube,Se.keywords.texture_cube_array],q.multisampled_texture_type=[Se.keywords.texture_multisampled_2d],q.storage_texture_type=[Se.keywords.texture_storage_1d,Se.keywords.texture_storage_2d,Se.keywords.texture_storage_2d_array,Se.keywords.texture_storage_3d],q.depth_texture_type=[Se.keywords.texture_depth_2d,Se.keywords.texture_depth_2d_array,Se.keywords.texture_depth_cube,Se.keywords.texture_depth_cube_array,Se.keywords.texture_depth_multisampled_2d],q.texture_external_type=[Se.keywords.texture_external],q.any_texture_type=[...Se.sampled_texture_type,...Se.multisampled_texture_type,...Se.storage_texture_type,...Se.depth_texture_type,...Se.texture_external_type],q.texel_format=[Se.keywords.r8unorm,Se.keywords.r8snorm,Se.keywords.r8uint,Se.keywords.r8sint,Se.keywords.r16uint,Se.keywords.r16sint,Se.keywords.r16float,Se.keywords.rg8unorm,Se.keywords.rg8snorm,Se.keywords.rg8uint,Se.keywords.rg8sint,Se.keywords.r32uint,Se.keywords.r32sint,Se.keywords.r32float,Se.keywords.rg16uint,Se.keywords.rg16sint,Se.keywords.rg16float,Se.keywords.rgba8unorm,Se.keywords.rgba8unorm_srgb,Se.keywords.rgba8snorm,Se.keywords.rgba8uint,Se.keywords.rgba8sint,Se.keywords.bgra8unorm,Se.keywords.bgra8unorm_srgb,Se.keywords.rgb10a2unorm,Se.keywords.rg11b10float,Se.keywords.rg32uint,Se.keywords.rg32sint,Se.keywords.rg32float,Se.keywords.rgba16uint,Se.keywords.rgba16sint,Se.keywords.rgba16float,Se.keywords.rgba32uint,Se.keywords.rgba32sint,Se.keywords.rgba32float],q.const_literal=[Se.tokens.int_literal,Se.tokens.uint_literal,Se.tokens.decimal_float_literal,Se.tokens.hex_float_literal,Se.keywords.true,Se.keywords.false],q.literal_or_ident=[Se.tokens.ident,Se.tokens.int_literal,Se.tokens.uint_literal,Se.tokens.decimal_float_literal,Se.tokens.hex_float_literal,Se.tokens.name],q.element_count_expression=[Se.tokens.int_literal,Se.tokens.uint_literal,Se.tokens.ident],q.template_types=[Se.keywords.vec2,Se.keywords.vec3,Se.keywords.vec4,Se.keywords.mat2x2,Se.keywords.mat2x3,Se.keywords.mat2x4,Se.keywords.mat3x2,Se.keywords.mat3x3,Se.keywords.mat3x4,Se.keywords.mat4x2,Se.keywords.mat4x3,Se.keywords.mat4x4,Se.keywords.atomic,Se.keywords.bitcast,...Se.any_texture_type],q.attribute_name=[Se.tokens.ident,Se.keywords.block,Se.keywords.diagnostic],q.assignment_operators=[Se.tokens.equal,Se.tokens.plus_equal,Se.tokens.minus_equal,Se.tokens.times_equal,Se.tokens.division_equal,Se.tokens.modulo_equal,Se.tokens.and_equal,Se.tokens.or_equal,Se.tokens.xor_equal,Se.tokens.shift_right_equal,Se.tokens.shift_left_equal],q.increment_operators=[Se.tokens.plus_plus,Se.tokens.minus_minus];class JE{constructor(e,n,r,s,i){this.type=e,this.lexeme=n,this.line=r,this.start=s,this.end=i}toString(){return this.lexeme}isTemplateType(){return q.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==q.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class J7{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new JE(q.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=q.simpleTokens[e];if(n)return this._addToken(n),!0;let r=q.none;const s=this._isAlpha(e),i=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(s){const a=q.keywords[e];if(a)return this._addToken(a),!0}if(s||i)return this._addToken(q.tokens.ident),!0;for(;;){let a=this._findType(e);const l=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(l=="=")return this._current++,e+=l,this._addToken(q.tokens.minus_equal),!0;if(l=="-")return this._current++,e+=l,this._addToken(q.tokens.minus_minus),!0;const u=this._tokens.length-1;if((q.literal_or_ident.indexOf(this._tokens[u].type)!=-1||this._tokens[u].type==q.tokens.paren_right)&&l!=">")return this._addToken(a),!0}if(e==">"&&(l==">"||l=="=")){let u=!1,h=this._tokens.length-1;for(let d=0;d<5&&h>=0&&q.assignment_operators.indexOf(this._tokens[h].type)===-1;++d,--h)if(this._tokens[h].type===q.tokens.less_than){h>0&&this._tokens[h-1].isArrayOrTemplateType()&&(u=!0);break}if(u)return this._addToken(a),!0}if(a===q.none){let u=e,h=0;const d=2;for(let g=0;g<d;++g)if(u+=this._peekAhead(g),a=this._findType(u),a!==q.none){h=g;break}if(a===q.none)return r!==q.none&&(this._current--,this._addToken(r),!0);e=u,this._current+=h+1}if(r=a,this._isAtEnd())break;e+=this._advance()}return r!==q.none&&(this._addToken(r),!0)}_findType(e){for(const r in q.regexTokens){const s=q.regexTokens[r];if(this._match(e,s.rule))return s}return q.literalTokens[e]||q.none}_match(e,n){const r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new JE(e,n,this._line,this._start,this._current))}}function Je(t){return Array.isArray(t)||(t==null?void 0:t.buffer)instanceof ArrayBuffer}const ug=new Float32Array(1),eH=new Uint32Array(ug.buffer),tH=new Uint32Array(ug.buffer),fg=new Int32Array(1),nH=new Float32Array(fg.buffer),rH=new Uint32Array(fg.buffer),hg=new Uint32Array(1),sH=new Float32Array(hg.buffer),iH=new Int32Array(hg.buffer);function eA(t,e,n){if(e===n)return t;if(e==="f32"){if(n==="i32"||n==="x32")return ug[0]=t,eH[0];if(n==="u32")return ug[0]=t,tH[0]}else if(e==="i32"||e==="x32"){if(n==="f32")return fg[0]=t,nH[0];if(n==="u32")return fg[0]=t,rH[0]}else if(e==="u32"){if(n==="f32")return hg[0]=t,sH[0];if(n==="i32"||n==="x32")return hg[0]=t,iH[0]}return console.error(`Unsupported cast from ${e} to ${n}`),t}class oH{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class lp{constructor(e,n){this.align=e,this.size=n}}class mi{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new $7,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(const n of e)n instanceof rh&&this._functions.set(n.name,new oH(n));for(const n of e)if(n instanceof Li){const r=this.getTypeInfo(n,null);r instanceof Yo&&this.structs.push(r)}for(const n of e)if(n instanceof F0)this.aliases.push(this._getAliasInfo(n));else if(n instanceof D0){const r=n,s=this._getAttributeNum(r.attributes,"id",0),i=r.type!=null?this.getTypeInfo(r.type,r.attributes):null;this.overrides.push(new U7(r.name,i,r.attributes,s))}else if(this._isUniformVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=new ap(r.name,a,s,i,r.attributes,Io.Uniform,r.access);l.access||(l.access="read"),this.uniforms.push(l)}else if(this._isStorageVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=this._isStorageTexture(a),u=new ap(r.name,a,s,i,r.attributes,l?Io.StorageTexture:Io.Storage,r.access);u.access||(u.access="read"),this.storage.push(u)}else if(this._isTextureVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=this._isStorageTexture(a),u=new ap(r.name,a,s,i,r.attributes,l?Io.StorageTexture:Io.Texture,r.access);u.access||(u.access="read"),l?this.storage.push(u):this.textures.push(u)}else if(this._isSamplerVar(n)){const r=n,s=this._getAttributeNum(r.attributes,"group",0),i=this._getAttributeNum(r.attributes,"binding",0),a=this.getTypeInfo(r.type,r.attributes),l=new ap(r.name,a,s,i,r.attributes,Io.Sampler,r.access);this.samplers.push(l)}for(const n of e)if(n instanceof rh){const r=this._getAttribute(n,"vertex"),s=this._getAttribute(n,"fragment"),i=this._getAttribute(n,"compute"),a=r||s||i,l=new V7(n.name,a==null?void 0:a.name,n.attributes);l.attributes=n.attributes,l.startLine=n.startLine,l.endLine=n.endLine,this.functions.push(l),this._functions.get(n.name).info=l,a&&(this._functions.get(n.name).inUse=!0,l.inUse=!0,l.resources=this._findResources(n,!!a),l.inputs=this._getInputs(n.args),l.outputs=this._getOutputs(n.returnType),this.entry[a.name].push(l)),l.arguments=n.args.map(u=>new z7(u.name,this.getTypeInfo(u.type,u.attributes),u.attributes)),l.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null}for(const n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(const n of this._functions.values())n.node.search(r=>{var s,i,a;if(r instanceof aI){if(r.value)if(Je(r.value))for(const l of r.value)for(const u of this.overrides)l===u.name&&((s=n.info)===null||s===void 0||s.overrides.push(u));else for(const l of this.overrides)r.value===l.name&&((i=n.info)===null||i===void 0||i.overrides.push(l))}else if(r instanceof cs)for(const l of this.overrides)r.name===l.name&&((a=n.info)===null||a===void 0||a.overrides.push(l))});for(const n of this.uniforms)this._markStructsInUse(n.type);for(const n of this.storage)this._markStructsInUse(n.type)}getStructInfo(e){for(const n of this.structs)if(n.name==e)return n;return null}getOverrideInfo(e){for(const n of this.overrides)if(n.name==e)return n;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(const s of e.calls){const i=(r=this._functions.get(s.name))===null||r===void 0?void 0:r.info;i&&n.add(i)}}findResource(e,n,r){if(r){for(const s of this.entry.compute)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}for(const s of this.entry.vertex)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}for(const s of this.entry.fragment)if(s.name===r){for(const i of s.resources)if(i.group==e&&i.binding==n)return i}}for(const s of this.uniforms)if(s.group==e&&s.binding==n)return s;for(const s of this.storage)if(s.group==e&&s.binding==n)return s;for(const s of this.textures)if(s.group==e&&s.binding==n)return s;for(const s of this.samplers)if(s.group==e&&s.binding==n)return s;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this.getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const r=[],s=this,i=[];return e.search(a=>{if(a instanceof lg)i.push({});else if(a instanceof cg)i.pop();else if(a instanceof Hi){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type),i.length>0&&(i[i.length-1][l.name]=l)}else if(a instanceof ci){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type)}else if(a instanceof Uf){const l=a;n&&l.type!==null&&this._markStructsFromAST(l.type),i.length>0&&(i[i.length-1][l.name]=l)}else if(a instanceof cs){const l=a;if(i.length>0&&i[i.length-1][l.name])return;const u=s._findResource(l.name);u&&r.push(u)}else if(a instanceof B0){const l=a,u=s._functions.get(l.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=s._findResources(u.node,n)),r.push(...u.resources))}else if(a instanceof j0){const l=a,u=s._functions.get(l.name);u&&(n&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=s._findResources(u.node,n)),r.push(...u.resources))}}),[...new Map(r.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function n(r,s){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),s>=e[r].length&&(e[r].length=s+1)}for(const r of this.uniforms)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.storage)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.textures)n(r.group,r.binding),e[r.group][r.binding]=r;for(const r of this.samplers)n(r.group,r.binding),e[r.group][r.binding]=r;return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof Li)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof Li)this._getStructOutputs(r.type,n);else{const s=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(s!==null){const i=this.getTypeInfo(r.type,r.type.attributes),a=this._parseInt(s.value),l=new YE(r.name,i,s.name,a);n.push(l)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this.getTypeInfo(e,e.attributes),s=this._parseInt(n.value);return new YE("",r,n.name,s)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof Li)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof Li)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),s=this.getTypeInfo(e.type,e.attributes),i=this._parseInt(n.value),a=new L7(e.name,s,n.name,i);return r!==null&&(a.interpolation=this._parseString(r.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new B7(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const n of this.structs)if(n.name==e)return n;for(const n of this.aliases)if(n.name==e)return n.type;return null}getTypeInfo(e,n=null){if(this._types.has(e))return this._types.get(e);if(e instanceof Mp){const s=e.type?this.getTypeInfo(e.type,e.attributes):null,i=new Jv(e.name,s,n);return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof zf){const s=e,i=s.format?this.getTypeInfo(s.format,s.attributes):null,a=new Jo(s.name,n);return a.format=i,a.count=s.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof Li){const s=e,i=new Yo(s.name,n);i.startLine=s.startLine,i.endLine=s.endLine;for(const a of s.members){const l=this.getTypeInfo(a.type,a.attributes);i.members.push(new XE(a.name,l,a.attributes))}return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof Of){const s=e,i=s.format instanceof Be,a=s.format?i?this.getTypeInfo(s.format,null):new Es(s.format,null):null,l=new ul(s.name,a,n,s.access);return this._types.set(e,l),this._updateTypeInfo(l),l}if(e instanceof ve){const s=e,i=s.format?this.getTypeInfo(s.format,null):null,a=new ul(s.name,i,n,s.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const r=new Es(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r,s;const i=this._getTypeSize(e);if(e.size=(n=i==null?void 0:i.size)!==null&&n!==void 0?n:0,e instanceof Jo&&e.format){const a=this._getTypeSize(e.format);e.stride=Math.max((r=a==null?void 0:a.size)!==null&&r!==void 0?r:0,(s=a==null?void 0:a.align)!==null&&s!==void 0?s:0),this._updateTypeInfo(e.format)}e instanceof Jv&&this._updateTypeInfo(e.format),e instanceof Yo&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,s=0,i=0,a=0;for(let l=0,u=e.members.length;l<u;++l){const h=e.members[l],d=this._getTypeSize(h);if(!d)continue;(n=this._getAlias(h.type.name))!==null&&n!==void 0||h.type;const g=d.align,b=d.size;r=this._roundUp(g,r+s),s=b,i=r,a=Math.max(a,g),h.offset=r,h.size=b,this._updateTypeInfo(h.type)}e.size=this._roundUp(a,i+s),e.align=a}_getTypeSize(e){var n,r;if(e==null)return null;const s=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof XE&&(e=e.type),e instanceof Es){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=mi._typeInfo[e.name];if(a!==void 0){const l=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new lp(Math.max(i,a.align/l),Math.max(s,a.size/l))}}{const a=mi._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const l=e.name[e.name.length-1]==="h"?2:1;return new lp(Math.max(i,a.align/l),Math.max(s,a.size/l))}}if(e instanceof Jo){let a=e,l=8,u=8;const h=this._getTypeSize(a.format);return h!==null&&(u=h.size,l=h.align),u=a.count*this._getAttributeNum((r=e==null?void 0:e.attributes)!==null&&r!==void 0?r:null,"stride",this._roundUp(l,u)),s&&(u=s),new lp(Math.max(i,l),Math.max(s,u))}if(e instanceof Yo){let a=0,l=0,u=0,h=0,d=0;for(const g of e.members){const b=this._getTypeSize(g.type);b!==null&&(a=Math.max(b.align,a),u=this._roundUp(b.align,u+h),h=b.size,d=u)}return l=this._roundUp(a,d+h),new lp(Math.max(i,a),Math.max(s,l))}return null}_isUniformVar(e){return e instanceof Hi&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Hi&&e.storage=="storage"}_isTextureVar(e){return e instanceof Hi&&e.type!==null&&mi._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Hi&&e.type!==null&&mi._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const s=r.attributes;for(let i of s)if(i.name==n)return i;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let s of e)if(s.name==n){let i=s!==null&&s.value!==null?s.value:r;return i instanceof Array&&(i=i[0]),typeof i=="number"?i:typeof i=="string"?parseInt(i):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}mi._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},mi._textureTypes=q.any_texture_type.map(t=>t.name),mi._samplerTypes=q.sampler_type.map(t=>t.name);let L0=0;class U0{constructor(e,n,r){this.id=L0++,this.name=e,this.value=n,this.node=r}clone(){return new U0(this.name,this.value,this.node)}}class z0{constructor(e){this.id=L0++,this.name=e.name,this.node=e}clone(){return new z0(this.node)}}class V0{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=L0++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var n;return this.variables.has(e)?(n=this.variables.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var n;return this.functions.has(e)?(n=this.functions.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(e):null}createVariable(e,n,r){this.variables.set(e,new U0(e,n,r??null))}setVariable(e,n,r){const s=this.getVariable(e);s!==null?s.value=n:this.createVariable(e,n,r)}getVariableValue(e){var n;const r=this.getVariable(e);return(n=r==null?void 0:r.value)!==null&&n!==void 0?n:null}clone(){return new V0(this)}}class aH{evalExpression(e,n){return null}getTypeInfo(e){return null}getVariableName(e,n){return""}}class lH{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,n){const r=this.exec.evalExpression(e.args[0],n);let s=!0;if(r instanceof Q)return r.data.forEach(i=>{i||(s=!1)}),new pe(s?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q){const s=r.data.some(i=>i);return new pe(s?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,n){const r=this.exec.evalExpression(e.args[2],n);if(!(r instanceof pe))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return r.value?this.exec.evalExpression(e.args[1],n):this.exec.evalExpression(e.args[0],n)}ArrayLength(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.evalExpression(r,n);if(s instanceof Bn&&s.typeInfo.size===0){const i=s.typeInfo,a=s.buffer.byteLength/i.stride;return new pe(a,this.getTypeInfo("u32"))}return new pe(s.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.abs(i)),r.typeInfo);const s=r;return new pe(Math.abs(s.value),s.typeInfo)}Acos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.acos(i)),r.typeInfo);const s=r;return new pe(Math.acos(s.value),r.typeInfo)}Acosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.acosh(i)),r.typeInfo);const s=r;return new pe(Math.acosh(s.value),r.typeInfo)}Asin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.asin(i)),r.typeInfo);const s=r;return new pe(Math.asin(s.value),r.typeInfo)}Asinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.asinh(i)),r.typeInfo);const s=r;return new pe(Math.asinh(s.value),r.typeInfo)}Atan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.atan(i)),r.typeInfo);const s=r;return new pe(Math.atan(s.value),r.typeInfo)}Atanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.atanh(i)),r.typeInfo);const s=r;return new pe(Math.atanh(s.value),r.typeInfo)}Atan2(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((l,u)=>Math.atan2(l,s.data[u])),r.typeInfo);const i=r,a=s;return new pe(Math.atan2(i.value,a.value),r.typeInfo)}Ceil(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.ceil(i)),r.typeInfo);const s=r;return new pe(Math.ceil(s.value),r.typeInfo)}_clamp(e,n,r){return Math.min(Math.max(e,n),r)}Clamp(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Q&&s instanceof Q&&i instanceof Q)return new Q(r.data.map((h,d)=>this._clamp(h,s.data[d],i.data[d])),r.typeInfo);const a=r,l=s,u=i;return new pe(this._clamp(a.value,l.value,u.value),r.typeInfo)}Cos(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.cos(i)),r.typeInfo);const s=r;return new pe(Math.cos(s.value),r.typeInfo)}Cosh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.cosh(i)),r.typeInfo);const s=r;return new pe(Math.cos(s.value),r.typeInfo)}CountLeadingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.clz32(i)),r.typeInfo);const s=r;return new pe(Math.clz32(s.value),r.typeInfo)}_countOneBits(e){let n=0;for(;e!==0;)1&e&&n++,e>>=1;return n}CountOneBits(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>this._countOneBits(i)),r.typeInfo);const s=r;return new pe(this._countOneBits(s.value),r.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let n=0;for(;!(1&e);)e>>=1,n++;return n}CountTrailingZeros(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>this._countTrailingZeros(i)),r.typeInfo);const s=r;return new pe(this._countTrailingZeros(s.value),r.typeInfo)}Cross(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q){if(r.data.length!==3||s.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const i=r.data,a=s.data;return new Q([i[1]*a[2]-a[1]*i[2],i[2]*a[0]-a[2]*i[0],i[0]*a[1]-a[0]*i[1]],r.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,n){const r=this.exec.evalExpression(e.args[0],n),s=180/Math.PI;return r instanceof Q?new Q(r.data.map(i=>i*s),r.typeInfo):new pe(r.value*s,this.getTypeInfo("f32"))}Determinant(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof xt){const s=r.data,i=r.typeInfo.getTypeName(),a=i.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(i==="mat2x2"||i==="mat2x2f"||i==="mat2x2h")return new pe(s[0]*s[3]-s[1]*s[2],a);if(i==="mat2x3"||i==="mat2x3f"||i==="mat2x3h")return new pe(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);if(i==="mat2x4"||i==="mat2x4f"||i==="mat2x4h")console.error(`TODO: Determinant for ${i}`);else if(i==="mat3x2"||i==="mat3x2f"||i==="mat3x2h")console.error(`TODO: Determinant for ${i}`);else{if(i==="mat3x3"||i==="mat3x3f"||i==="mat3x3h")return new pe(s[0]*(s[4]*s[8]-s[5]*s[7])-s[1]*(s[3]*s[8]-s[5]*s[6])+s[2]*(s[3]*s[7]-s[4]*s[6]),a);i==="mat3x4"||i==="mat3x4f"||i==="mat3x4h"||i==="mat4x2"||i==="mat4x2f"||i==="mat4x2h"||i==="mat4x3"||i==="mat4x3f"||i==="mat4x3h"?console.error(`TODO: Determinant for ${i}`):i!=="mat4x4"&&i!=="mat4x4f"&&i!=="mat4x4h"||console.error(`TODO: Determinant for ${i}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q){let l=0;for(let u=0;u<r.data.length;++u)l+=(r.data[u]-s.data[u])*(r.data[u]-s.data[u]);return new pe(Math.sqrt(l),this.getTypeInfo("f32"))}const i=r,a=s;return new pe(Math.abs(i.value-a.value),r.typeInfo)}_dot(e,n){let r=0;for(let s=0;s<e.length;++s)r+=n[s]*e[s];return r}Dot(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);return r instanceof Q&&s instanceof Q?new pe(this._dot(r.data,s.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,n){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,n){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.exp(i)),r.typeInfo);const s=r;return new pe(Math.exp(s.value),r.typeInfo)}Exp2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.pow(2,i)),r.typeInfo);const s=r;return new pe(Math.pow(2,s.value),r.typeInfo)}ExtractBits(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(i.typeInfo.name!=="u32"&&i.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=s.value,l=i.value;if(r instanceof Q)return new Q(r.data.map(h=>h>>a&(1<<l)-1),r.typeInfo);if(r.typeInfo.name!=="i32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const u=r.value;return new pe(u>>a&(1<<l)-1,this.getTypeInfo("i32"))}FaceForward(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Q&&s instanceof Q&&i instanceof Q){const a=this._dot(s.data,i.data);return new Q(a<0?Array.from(r.data):r.data.map(l=>-l),r.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>this._firstLeadingBit(i)),r.typeInfo);const s=r;return new pe(this._firstLeadingBit(s.value),r.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>this._firstTrailingBit(i)),r.typeInfo);const s=r;return new pe(this._firstTrailingBit(s.value),r.typeInfo)}Floor(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.floor(i)),r.typeInfo);const s=r;return new pe(Math.floor(s.value),r.typeInfo)}Fma(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Q&&s instanceof Q&&i instanceof Q)return r.data.length!==s.data.length||r.data.length!==i.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new Q(r.data.map((h,d)=>h*s.data[d]+i.data[d]),r.typeInfo);const a=r,l=s,u=i;return new pe(a.value*l.value+u.value,a.typeInfo)}Fract(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>i-Math.floor(i)),r.typeInfo);const s=r;return new pe(s.value-Math.floor(s.value),r.typeInfo)}Frexp(e,n){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n),a=this.exec.evalExpression(e.args[3],n);if(i.typeInfo.name!=="u32"&&i.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const l=i.value,u=(1<<a.value)-1<<l,h=~u;if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((b,w)=>b&h|s.data[w]<<l&u),r.typeInfo);const d=r.value,g=s.value;return new pe(d&h|g<<l&u,r.typeInfo)}InverseSqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>1/Math.sqrt(i)),r.typeInfo);const s=r;return new pe(1/Math.sqrt(s.value),r.typeInfo)}Ldexp(e,n){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q){let i=0;return r.data.forEach(a=>{i+=a*a}),new pe(Math.sqrt(i),this.getTypeInfo("f32"))}const s=r;return new pe(Math.abs(s.value),r.typeInfo)}Log(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.log(i)),r.typeInfo);const s=r;return new pe(Math.log(s.value),r.typeInfo)}Log2(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.log2(i)),r.typeInfo);const s=r;return new pe(Math.log2(s.value),r.typeInfo)}Max(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((l,u)=>Math.max(l,s.data[u])),r.typeInfo);const i=r,a=s;return new pe(Math.max(i.value,a.value),r.typeInfo)}Min(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((l,u)=>Math.min(l,s.data[u])),r.typeInfo);const i=r,a=s;return new pe(Math.min(i.value,a.value),r.typeInfo)}Mix(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Q&&s instanceof Q&&i instanceof Q)return new Q(r.data.map((u,h)=>r.data[h]*(1-i.data[h])+s.data[h]*i.data[h]),r.typeInfo);const a=s,l=i;return new pe(r.value*(1-l.value)+a.value*l.value,r.typeInfo)}Modf(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((a,l)=>a%s.data[l]),r.typeInfo);const i=s;return new pe(r.value%i.value,r.typeInfo)}Normalize(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q){const s=this.Length(e,n).value;return new Q(r.data.map(i=>i/s),r.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q)return new Q(r.data.map((l,u)=>Math.pow(l,s.data[u])),r.typeInfo);const i=r,a=s;return new pe(Math.pow(i.value,a.value),r.typeInfo)}QuantizeToF16(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof Q?new Q(r.data.map(s=>s),r.typeInfo):new pe(r.value,r.typeInfo)}Radians(e,n){const r=this.exec.evalExpression(e.args[0],n);return r instanceof Q?new Q(r.data.map(s=>s*Math.PI/180),r.typeInfo):new pe(r.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,n){let r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(r instanceof Q&&s instanceof Q){const i=this._dot(r.data,s.data);return new Q(r.data.map((a,l)=>a-2*i*s.data[l]),r.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,n){let r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(r instanceof Q&&s instanceof Q&&i instanceof pe){const a=this._dot(s.data,r.data);return new Q(r.data.map((l,u)=>{const h=1-i.value*i.value*(1-a*a);if(h<0)return 0;const d=Math.sqrt(h);return i.value*l-(i.value*a+d)*s.data[u]}),r.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,n){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.round(i)),r.typeInfo);const s=r;return new pe(Math.round(s.value),r.typeInfo)}Saturate(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.min(Math.max(i,0),1)),r.typeInfo);const s=r;return new pe(Math.min(Math.max(s.value,0),1),r.typeInfo)}Sign(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.sign(i)),r.typeInfo);const s=r;return new pe(Math.sign(s.value),r.typeInfo)}Sin(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.sin(i)),r.typeInfo);const s=r;return new pe(Math.sin(s.value),r.typeInfo)}Sinh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.sinh(i)),r.typeInfo);const s=r;return new pe(Math.sinh(s.value),r.typeInfo)}_smoothstep(e,n,r){const s=Math.min(Math.max((r-e)/(n-e),0),1);return s*s*(3-2*s)}SmoothStep(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n),i=this.exec.evalExpression(e.args[2],n);if(i instanceof Q&&r instanceof Q&&s instanceof Q)return new Q(i.data.map((h,d)=>this._smoothstep(r.data[d],s.data[d],h)),i.typeInfo);const a=r,l=s,u=i;return new pe(this._smoothstep(a.value,l.value,u.value),i.typeInfo)}Sqrt(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.sqrt(i)),r.typeInfo);const s=r;return new pe(Math.sqrt(s.value),r.typeInfo)}Step(e,n){const r=this.exec.evalExpression(e.args[0],n),s=this.exec.evalExpression(e.args[1],n);if(s instanceof Q&&r instanceof Q)return new Q(s.data.map((a,l)=>a<r.data[l]?0:1),s.typeInfo);const i=r;return new pe(s.value<i.value?0:1,i.typeInfo)}Tan(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.tan(i)),r.typeInfo);const s=r;return new pe(Math.tan(s.value),r.typeInfo)}Tanh(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.tanh(i)),r.typeInfo);const s=r;return new pe(Math.tanh(s.value),r.typeInfo)}_getTransposeType(e){const n=e.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?e:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?e:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),e)}Transpose(e,n){const r=this.exec.evalExpression(e.args[0],n);if(!(r instanceof xt))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const s=this._getTransposeType(r.typeInfo);if(r.typeInfo.name==="mat2x2"||r.typeInfo.name==="mat2x2f"||r.typeInfo.name==="mat2x2h"){const i=r.data;return new xt([i[0],i[2],i[1],i[3]],s)}if(r.typeInfo.name==="mat2x3"||r.typeInfo.name==="mat2x3f"||r.typeInfo.name==="mat2x3h"){const i=r.data;return new xt([i[0],i[3],i[6],i[1],i[4],i[7]],s)}if(r.typeInfo.name==="mat2x4"||r.typeInfo.name==="mat2x4f"||r.typeInfo.name==="mat2x4h"){const i=r.data;return new xt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13]],s)}if(r.typeInfo.name==="mat3x2"||r.typeInfo.name==="mat3x2f"||r.typeInfo.name==="mat3x2h"){const i=r.data;return new xt([i[0],i[3],i[1],i[4],i[2],i[5]],s)}if(r.typeInfo.name==="mat3x3"||r.typeInfo.name==="mat3x3f"||r.typeInfo.name==="mat3x3h"){const i=r.data;return new xt([i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]],s)}if(r.typeInfo.name==="mat3x4"||r.typeInfo.name==="mat3x4f"||r.typeInfo.name==="mat3x4h"){const i=r.data;return new xt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14]],s)}if(r.typeInfo.name==="mat4x2"||r.typeInfo.name==="mat4x2f"||r.typeInfo.name==="mat4x2h"){const i=r.data;return new xt([i[0],i[4],i[1],i[5],i[2],i[6]],s)}if(r.typeInfo.name==="mat4x3"||r.typeInfo.name==="mat4x3f"||r.typeInfo.name==="mat4x3h"){const i=r.data;return new xt([i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]],s)}if(r.typeInfo.name==="mat4x4"||r.typeInfo.name==="mat4x4f"||r.typeInfo.name==="mat4x4h"){const i=r.data;return new xt([i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]],s)}return console.error(`Invalid matrix type ${r.typeInfo.name}`),null}Trunc(e,n){const r=this.exec.evalExpression(e.args[0],n);if(r instanceof Q)return new Q(r.data.map(i=>Math.trunc(i)),r.typeInfo);const s=r;return new pe(Math.trunc(s.value),r.typeInfo)}Dpdx(e,n){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,n){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,n){return console.error("TODO: dpdxFine"),null}Dpdy(e,n){return console.error("TODO: dpdy"),null}DpdyCoarse(e,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,n){return console.error("TODO: dpdyFine"),null}Fwidth(e,n){return console.error("TODO: fwidth"),null}FwidthCoarse(e,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,n){const r=e.args[0],s=e.args.length>1?this.exec.evalExpression(e.args[1],n).value:0;if(r instanceof cs){const i=r.name,a=n.getVariableValue(i);if(a instanceof Ui){if(s<0||s>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const l=a.getMipLevelSize(s),u=a.dimension;return u==="1d"?new pe(l[0],this.getTypeInfo("u32")):u==="3d"?new Q(l,this.getTypeInfo("vec3u")):u==="2d"?new Q(l.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${u} not found. Line ${e.line}`),null)}return console.error(`Texture ${i} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,n){const r=e.args[0],s=this.exec.evalExpression(e.args[1],n),i=e.args.length>2?this.exec.evalExpression(e.args[2],n).value:0;if(!(s instanceof Q)||s.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(r instanceof cs){const a=r.name,l=n.getVariableValue(a);if(l instanceof Ui){const u=Math.floor(s.data[0]),h=Math.floor(s.data[1]);if(u<0||u>=l.width||h<0||h>=l.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const d=l.getPixel(u,h,0,i);return d===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new Q(d,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,n){const r=e.args[0];if(r instanceof cs){const s=r.name,i=n.getVariableValue(s);return i instanceof Ui?new pe(i.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,n){const r=e.args[0];if(r instanceof cs){const s=r.name,i=n.getVariableValue(s);return i instanceof Ui?new pe(i.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,n){const r=e.args[0];if(r instanceof cs){const s=r.name,i=n.getVariableValue(s);return i instanceof Ui?new pe(i.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,n){return console.error("TODO: textureSample"),null}TextureSampleBias(e,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,n){const r=e.args[0],s=this.exec.evalExpression(e.args[1],n),i=e.args.length===4?this.exec.evalExpression(e.args[2],n).value:0,a=e.args.length===4?this.exec.evalExpression(e.args[3],n).data:this.exec.evalExpression(e.args[2],n).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(s instanceof Q)||s.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(r instanceof cs){const l=r.name,u=n.getVariableValue(l);if(u instanceof Ui){const h=u.getMipLevelSize(0),d=Math.floor(s.data[0]),g=Math.floor(s.data[1]);return d<0||d>=h[0]||g<0||g>=h[1]?(console.error(`Texture ${l} out of bounds. Line ${e.line}`),null):(u.setPixel(d,g,0,i,Array.from(a)),null)}return console.error(`Texture ${l} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n);return n.getVariable(s).value.getSubData(this.exec,r.postfix,n)}AtomicStore(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n);return u instanceof pe&&l instanceof pe&&(u.value=l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),null}AtomicAdd(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value+=l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicSub(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value-=l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMax(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=Math.max(u.value,l.value)),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicMin(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=Math.min(u.value,l.value)),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicAnd(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=u.value&l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicOr(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=u.value|l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicXor(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=u.value^l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicExchange(e,n){let r=e.args[0];r instanceof Xn&&(r=r.right);const s=this.exec.getVariableName(r,n),i=n.getVariable(s);let a=e.args[1];const l=this.exec.evalExpression(a,n),u=i.value.getSubData(this.exec,r.postfix,n),h=new pe(u.value,u.typeInfo);return u instanceof pe&&l instanceof pe&&(u.value=l.value),i.value instanceof Bn&&i.value.setDataValue(this.exec,u,r.postfix,n),h}AtomicCompareExchangeWeak(e,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,n){return null}TextureBarrier(e,n){return null}WorkgroupBarrier(e,n){return null}WorkgroupUniformLoad(e,n){return null}SubgroupAdd(e,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,n){return console.error("TODO: quadSwapY"),null}}const mx={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Mr={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class Sr extends aH{constructor(e,n){var r;super(),this.ast=e??[],this.reflection=new mi,this.reflection.updateAST(this.ast),this.context=(r=n==null?void 0:n.clone())!==null&&r!==void 0?r:new V0,this.builtins=new lH(this),this.typeInfo={bool:this.getTypeInfo(Be.bool),i32:this.getTypeInfo(Be.i32),u32:this.getTypeInfo(Be.u32),f32:this.getTypeInfo(Be.f32),f16:this.getTypeInfo(Be.f16),vec2f:this.getTypeInfo(ve.vec2f),vec2u:this.getTypeInfo(ve.vec2u),vec2i:this.getTypeInfo(ve.vec2i),vec2h:this.getTypeInfo(ve.vec2h),vec3f:this.getTypeInfo(ve.vec3f),vec3u:this.getTypeInfo(ve.vec3u),vec3i:this.getTypeInfo(ve.vec3i),vec3h:this.getTypeInfo(ve.vec3h),vec4f:this.getTypeInfo(ve.vec4f),vec4u:this.getTypeInfo(ve.vec4u),vec4i:this.getTypeInfo(ve.vec4i),vec4h:this.getTypeInfo(ve.vec4h),mat2x2f:this.getTypeInfo(ve.mat2x2f),mat2x3f:this.getTypeInfo(ve.mat2x3f),mat2x4f:this.getTypeInfo(ve.mat2x4f),mat3x2f:this.getTypeInfo(ve.mat3x2f),mat3x3f:this.getTypeInfo(ve.mat3x3f),mat3x4f:this.getTypeInfo(ve.mat3x4f),mat4x2f:this.getTypeInfo(ve.mat4x2f),mat4x3f:this.getTypeInfo(ve.mat4x3f),mat4x4f:this.getTypeInfo(ve.mat4x4f)}}getVariableValue(e){var n,r;const s=(r=(n=this.context.getVariable(e))===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:null;if(s===null)return null;if(s instanceof pe)return s.value;if(s instanceof Q||s instanceof xt)return Array.from(s.data);if(s instanceof Bn&&s.typeInfo instanceof Jo){if(s.typeInfo.format.name==="u32")return Array.from(new Uint32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="i32")return Array.from(new Int32Array(s.buffer,s.offset,s.typeInfo.count));if(s.typeInfo.format.name==="f32")return Array.from(new Float32Array(s.buffer,s.offset,s.typeInfo.count))}return console.error(`Unsupported return variable type ${s.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,n,r,s){const i=this.context.clone();(s=s??{}).constants&&this._setOverrides(s.constants,i),this._execStatements(this.ast,i);const a=i.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const l=n[0],u=n[1],h=n[2],d=this.getTypeInfo("vec3u");i.setVariable("@num_workgroups",new Q(n,d));for(const g in r)for(const b in r[g]){const w=r[g][b];i.variables.forEach(R=>{var A;const C=R.node;if(C!=null&&C.attributes){let I=null,M=null;for(const k of C.attributes)k.name==="binding"?I=k.value:k.name==="group"&&(M=k.value);if(b==I&&g==M)if(w.texture!==void 0&&w.descriptor!==void 0){const k=new Ui(w.texture,this.getTypeInfo(C.type),w.descriptor,(A=w.texture.view)!==null&&A!==void 0?A:null);R.value=k}else w.uniform!==void 0?R.value=new Bn(w.uniform,this.getTypeInfo(C.type)):R.value=new Bn(w,this.getTypeInfo(C.type))}})}for(let g=0;g<h;++g)for(let b=0;b<u;++b)for(let w=0;w<l;++w)i.setVariable("@workgroup_id",new Q([w,b,g],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[w,b,g],i)}execStatement(e,n){if(e instanceof QM)return this.evalExpression(e.value,n);if(e instanceof JM){if(e.condition){const r=this.evalExpression(e.condition,n);if(!(r instanceof pe))throw new Error("Invalid break-if condition");if(!r.value)return null}return Sr._breakObj}if(e instanceof eI)return Sr._continueObj;if(e instanceof Uf)this._let(e,n);else if(e instanceof Hi)this._var(e,n);else if(e instanceof kp)this._const(e,n);else if(e instanceof rh)this._function(e,n);else{if(e instanceof ZM)return this._if(e,n);if(e instanceof KM)return this._switch(e,n);if(e instanceof WM)return this._for(e,n);if(e instanceof HM)return this._while(e,n);if(e instanceof YM)return this._loop(e,n);if(e instanceof e_){const r=n.clone();return r.currentFunctionName=n.currentFunctionName,this._execStatements(e.body,r)}if(e instanceof XM)this._assign(e,n);else if(e instanceof qM)this._increment(e,n);else{if(e instanceof Li)return null;if(e instanceof D0){const r=e.name;n.getVariable(r)===null&&n.setVariable(r,new pe(0,this.getTypeInfo("u32")))}else if(e instanceof j0)this._call(e,n);else{if(e instanceof GM||e instanceof F0)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,n){return e instanceof Us?this._evalBinaryOp(e,n):e instanceof tr?this._evalLiteral(e,n):e instanceof cs?this._evalVariable(e,n):e instanceof B0?this._evalCall(e,n):e instanceof ci?this._evalCreate(e,n):e instanceof tI?this._evalConst(e,n):e instanceof nI?this._evalBitcast(e,n):e instanceof Xn?this._evalUnaryOp(e,n):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var n;if(e instanceof Be){const s=this.reflection.getTypeInfo(e);if(s!==null)return s}let r=(n=this.typeInfo[e])!==null&&n!==void 0?n:null;return r!==null||(r=this.reflection.getTypeInfoByName(e)),r}_setOverrides(e,n){for(const r in e){const s=e[r],i=this.reflection.getOverrideInfo(r);i!==null?(i.type===null&&(i.type=this.getTypeInfo("u32")),i.type.name==="u32"||i.type.name==="i32"||i.type.name==="f32"||i.type.name==="f16"?n.setVariable(r,new pe(s,i.type)):i.type.name==="bool"?n.setVariable(r,new pe(s?1:0,i.type)):i.type.name==="vec2"||i.type.name==="vec3"||i.type.name==="vec4"||i.type.name==="vec2f"||i.type.name==="vec3f"||i.type.name==="vec4f"||i.type.name==="vec2i"||i.type.name==="vec3i"||i.type.name==="vec4i"||i.type.name==="vec2u"||i.type.name==="vec3u"||i.type.name==="vec4u"||i.type.name==="vec2h"||i.type.name==="vec3h"||i.type.name==="vec4h"?n.setVariable(r,new Q(s,i.type)):console.error(`Invalid constant type for ${r}`)):console.error(`Override ${r} does not exist in the shader.`)}}_dispatchWorkgroup(e,n,r){const s=[1,1,1];for(const d of e.node.attributes)if(d.name==="workgroup_size"){if(d.value.length>0){const g=r.getVariableValue(d.value[0]);s[0]=g instanceof pe?g.value:parseInt(d.value[0])}if(d.value.length>1){const g=r.getVariableValue(d.value[1]);s[1]=g instanceof pe?g.value:parseInt(d.value[1])}if(d.value.length>2){const g=r.getVariableValue(d.value[2]);s[2]=g instanceof pe?g.value:parseInt(d.value[2])}}const i=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");r.setVariable("@workgroup_size",new Q(s,i));const l=s[0],u=s[1],h=s[2];for(let d=0,g=0;d<h;++d)for(let b=0;b<u;++b)for(let w=0;w<l;++w,++g){const R=[w,b,d],A=[w+n[0]*s[0],b+n[1]*s[1],d+n[2]*s[2]];r.setVariable("@local_invocation_id",new Q(R,i)),r.setVariable("@global_invocation_id",new Q(A,i)),r.setVariable("@local_invocation_index",new pe(g,a)),this._dispatchExec(e,r)}}_dispatchExec(e,n){for(const r of e.node.args)for(const s of r.attributes)if(s.name==="builtin"){const i=`@${s.value}`,a=n.getVariable(i);a!==void 0&&n.variables.set(r.name,a)}this._execStatements(e.node.body,n)}getVariableName(e,n){for(;e instanceof Xn;)e=e.right;return e instanceof cs?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,n){for(const r of e){if(r instanceof Array){const i=n.clone(),a=this._execStatements(r,i);if(a)return a;continue}const s=this.execStatement(r,n);if(s)return s}return null}_call(e,n){const r=n.clone();r.currentFunctionName=e.name;const s=n.getFunction(e.name);if(s){for(let i=0;i<s.node.args.length;++i){const a=s.node.args[i],l=this.evalExpression(e.args[i],r);r.setVariable(a.name,l,a)}this._execStatements(s.node.body,r)}else e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)&&this._evalCreate(e,n)}_increment(e,n){const r=this.getVariableName(e.variable,n),s=n.getVariable(r);s?e.operator==="++"?s.value instanceof pe?s.value.value++:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):e.operator==="--"?s.value instanceof pe?s.value.value--:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${r} not found. Line ${e.line}`)}_getVariableData(e,n){if(e instanceof cs){const r=this.getVariableName(e,n),s=n.getVariable(r);return s===null?(console.error(`Variable ${r} not found. Line ${e.line}`),null):s.value.getSubData(this,e.postfix,n)}if(e instanceof Xn){if(e.operator==="*"){const r=this._getVariableData(e.right,n);return r instanceof lc?r.reference.getSubData(this,e.postfix,n):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){const r=this._getVariableData(e.right,n);return new lc(r)}}return null}_assign(e,n){let r=null,s="<var>",i=null;if(e.variable instanceof Xn){const u=this._getVariableData(e.variable,n),h=this.evalExpression(e.value,n),d=e.operator;if(d==="="){if(u instanceof pe||u instanceof Q||u instanceof xt){if(h instanceof pe||h instanceof Q||h instanceof xt&&u.data.length===h.data.length)return void u.data.set(h.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(u instanceof Bn&&h instanceof Bn&&u.buffer.byteLength-u.offset>=h.buffer.byteLength-h.offset)return void(u.buffer.byteLength%4==0?new Uint32Array(u.buffer,u.offset,u.typeInfo.size/4).set(new Uint32Array(h.buffer,h.offset,h.typeInfo.size/4)):new Uint8Array(u.buffer,u.offset,u.typeInfo.size).set(new Uint8Array(h.buffer,h.offset,h.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(d==="+=")return u instanceof pe||u instanceof Q||u instanceof xt?h instanceof pe||h instanceof Q||h instanceof xt?void u.data.set(h.data.map((g,b)=>u.data[b]+g)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(d==="-=")return(u instanceof pe||u instanceof Q||u instanceof xt)&&(h instanceof pe||h instanceof Q||h instanceof xt)?void u.data.set(h.data.map((g,b)=>u.data[b]-g)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof Xn){if(e.variable.operator==="*"){s=this.getVariableName(e.variable.right,n);const u=n.getVariable(s);if(!(u&&u.value instanceof lc))return void console.error(`Variable ${s} is not a pointer. Line ${e.line}`);r=u.value.reference;let h=e.variable.postfix;if(!h){let d=e.variable.right;for(;d instanceof Xn;){if(d.postfix){h=d.postfix;break}d=d.right}}h&&(r=r.getSubData(this,h,n))}}else{i=e.variable.postfix,s=this.getVariableName(e.variable,n);const u=n.getVariable(s);if(u===null)return void console.error(`Variable ${s} not found. Line ${e.line}`);r=u.value}if(r instanceof lc&&(r=r.reference),r===null)return void console.error(`Variable ${s} not found. Line ${e.line}`);const a=this.evalExpression(e.value,n),l=e.operator;if(l==="=")if(r instanceof Bn)r.setDataValue(this,a,i,n);else if(i){if(!(r instanceof Q||r instanceof xt))return void console.error(`Variable ${s} is not a vector or matrix. Line ${e.line}`);if(i instanceof Zc){const u=this.evalExpression(i.index,n).value;if(r instanceof Q){if(!(a instanceof pe))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[u]=a.value}else{if(!(r instanceof xt))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const h=this.evalExpression(i.index,n).value;if(h<0)return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(a instanceof Q))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const d=r.typeInfo.getTypeName();if(d==="mat2x2"||d==="mat2x2f"||d==="mat2x2h"){if(!(h<2&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat2x3"||d==="mat2x3f"||d==="mat2x3h"){if(!(h<2&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat2x4"||d==="mat2x4f"||d==="mat2x4h"){if(!(h<2&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat3x2"||d==="mat3x2f"||d==="mat3x2h"){if(!(h<3&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat3x3"||d==="mat3x3f"||d==="mat3x3h"){if(!(h<3&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else if(d==="mat3x4"||d==="mat3x4f"||d==="mat3x4h"){if(!(h<3&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}else if(d==="mat4x2"||d==="mat4x2f"||d==="mat4x2h"){if(!(h<4&&a.data.length===2))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[2*h]=a.data[0],r.data[2*h+1]=a.data[1]}else if(d==="mat4x3"||d==="mat4x3f"||d==="mat4x3h"){if(!(h<4&&a.data.length===3))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[3*h]=a.data[0],r.data[3*h+1]=a.data[1],r.data[3*h+2]=a.data[2]}else{if(d!=="mat4x4"&&d!=="mat4x4f"&&d!=="mat4x4h")return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(h<4&&a.data.length===4))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);r.data[4*h]=a.data[0],r.data[4*h+1]=a.data[1],r.data[4*h+2]=a.data[2],r.data[4*h+3]=a.data[3]}}}}}else if(i instanceof fl){const u=i.value;if(!(r instanceof Q))return void console.error(`Invalid assignment to ${u}. Variable ${s} is not a vector. Line ${e.line}`);if(a instanceof pe){if(u.length>1)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);if(u==="x")r.data[0]=a.value;else if(u==="y"){if(r.data.length<2)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[1]=a.value}else if(u==="z"){if(r.data.length<3)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[2]=a.value}else if(u==="w"){if(r.data.length<4)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);r.data[3]=a.value}}else{if(!(a instanceof Q))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(u.length!==a.data.length)return void console.error(`Invalid assignment to ${u} for variable ${s}. Line ${e.line}`);for(let h=0;h<u.length;++h){const d=u[h];if(d==="x"||d==="r")r.data[0]=a.data[h];else if(d==="y"||d==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[1]=a.data[h]}else if(d==="z"||d==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[2]=a.data[h]}else{if(d!=="w"&&d!=="a")return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${d} for variable ${s}. Line ${e.line}`);r.data[3]=a.data[h]}}}}}else r instanceof pe&&a instanceof pe?r.value=a.value:r instanceof Q&&a instanceof Q||r instanceof xt&&a instanceof xt?r.data.set(a.data):console.error(`Invalid assignment to ${s}. Line ${e.line}`);else{const u=r.getSubData(this,i,n);if(u instanceof Q&&a instanceof pe){const h=u.data,d=a.value;if(l==="+=")for(let g=0;g<h.length;++g)h[g]+=d;else if(l==="-=")for(let g=0;g<h.length;++g)h[g]-=d;else if(l==="*=")for(let g=0;g<h.length;++g)h[g]*=d;else if(l==="/=")for(let g=0;g<h.length;++g)h[g]/=d;else if(l==="%=")for(let g=0;g<h.length;++g)h[g]%=d;else if(l==="&=")for(let g=0;g<h.length;++g)h[g]&=d;else if(l==="|=")for(let g=0;g<h.length;++g)h[g]|=d;else if(l==="^=")for(let g=0;g<h.length;++g)h[g]^=d;else if(l==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d;else if(l===">>=")for(let g=0;g<h.length;++g)h[g]>>=d;else console.error(`Invalid operator ${l}. Line ${e.line}`)}else if(u instanceof Q&&a instanceof Q){const h=u.data,d=a.data;if(h.length!==d.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(l==="+=")for(let g=0;g<h.length;++g)h[g]+=d[g];else if(l==="-=")for(let g=0;g<h.length;++g)h[g]-=d[g];else if(l==="*=")for(let g=0;g<h.length;++g)h[g]*=d[g];else if(l==="/=")for(let g=0;g<h.length;++g)h[g]/=d[g];else if(l==="%=")for(let g=0;g<h.length;++g)h[g]%=d[g];else if(l==="&=")for(let g=0;g<h.length;++g)h[g]&=d[g];else if(l==="|=")for(let g=0;g<h.length;++g)h[g]|=d[g];else if(l==="^=")for(let g=0;g<h.length;++g)h[g]^=d[g];else if(l==="<<=")for(let g=0;g<h.length;++g)h[g]<<=d[g];else if(l===">>=")for(let g=0;g<h.length;++g)h[g]>>=d[g];else console.error(`Invalid operator ${l}. Line ${e.line}`)}else{if(!(u instanceof pe&&a instanceof pe))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);l==="+="?u.value+=a.value:l==="-="?u.value-=a.value:l==="*="?u.value*=a.value:l==="/="?u.value/=a.value:l==="%="?u.value%=a.value:l==="&="?u.value&=a.value:l==="|="?u.value|=a.value:l==="^="?u.value^=a.value:l==="<<="?u.value<<=a.value:l===">>="?u.value>>=a.value:console.error(`Invalid operator ${l}. Line ${e.line}`)}r instanceof Bn&&r.setDataValue(this,u,i,n)}}_function(e,n){const r=new z0(e);n.functions.set(e.name,r)}_const(e,n){let r=null;e.value!==null&&(r=this.evalExpression(e.value,n)),n.createVariable(e.name,r,e)}_let(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Xn||(r=r.clone())}else{const s=e.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||s==="array"){const i=new ci(e.type,[]);r=this._evalCreate(i,n)}}n.createVariable(e.name,r,e)}_var(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Xn||(r=r.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const s=e.type.name;if(s==="f32"||s==="i32"||s==="u32"||s==="bool"||s==="f16"||s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2b"||s==="vec3b"||s==="vec4b"||s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"||e.type instanceof zf||e.type instanceof Li||e.type instanceof ve){const i=new ci(e.type,[]);r=this._evalCreate(i,n)}}n.createVariable(e.name,r,e)}_switch(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof pe))return console.error(`Invalid if condition. Line ${e.line}`),null;let s=null;for(const i of e.cases)if(i instanceof iI)for(const a of i.selectors){if(a instanceof Ip){s=i;continue}const l=this.evalExpression(a,n);if(!(l instanceof pe))return console.error(`Invalid case selector. Line ${e.line}`),null;if(l.value===r.value)return this._execStatements(i.body,n)}else i instanceof oI&&(s=i);return s?this._execStatements(s.body,n):null}_if(e,n){n=n.clone();const r=this.evalExpression(e.condition,n);if(!(r instanceof pe))return console.error(`Invalid if condition. Line ${e.line}`),null;if(r.value)return this._execStatements(e.body,n);for(const s of e.elseif){const i=this.evalExpression(s.condition,n);if(!(i instanceof pe))return console.error(`Invalid if condition. Line ${e.line}`),null;if(i.value)return this._execStatements(s.body,n)}return e.else?this._execStatements(e.else,n):null}_getScalarValue(e){return e instanceof pe?e.value:(console.error("Expected scalar value.",e),0)}_for(e,n){for(n=n.clone(),this.execStatement(e.init,n);this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r!==null&&r!==Sr._continueObj)return r;this.execStatement(e.increment,n)}return null}_loop(e,n){for(n=n.clone();;){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r===Sr._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,n)===Sr._breakObj)break}else if(r!==null)return r}return null}_while(e,n){for(n=n.clone();this._getScalarValue(this.evalExpression(e.condition,n));){const r=this._execStatements(e.body,n);if(r===Sr._breakObj)break;if(r!==Sr._continueObj&&r!==null)return r}return null}_evalBitcast(e,n){const r=this.evalExpression(e.value,n),s=e.type;if(r instanceof pe){const i=eA(r.value,r.typeInfo.name,s.name);return new pe(i,this.getTypeInfo(s))}if(r instanceof Q){const i=r.typeInfo.getTypeName();let a="";if(i.endsWith("f"))a="f32";else if(i.endsWith("i"))a="i32";else if(i.endsWith("u"))a="u32";else if(i.endsWith("b"))a="bool";else{if(!i.endsWith("h"))return console.error(`Unknown vector type ${i}. Line ${e.line}`),null;a="f16"}const l=s.getTypeName();let u="";if(l.endsWith("f"))u="f32";else if(l.endsWith("i"))u="i32";else if(l.endsWith("u"))u="u32";else if(l.endsWith("b"))u="bool";else{if(!l.endsWith("h"))return console.error(`Unknown vector type ${u}. Line ${e.line}`),null;u="f16"}const h=function(d,g,b){if(g===b)return d;const w=new Array(d.length);for(let R=0;R<d.length;R++)w[R]=eA(d[R],g,b);return w}(Array.from(r.data),a,u);return new Q(h,this.getTypeInfo(s))}return console.error(`TODO: bitcast for ${r.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,n){return n.getVariableValue(e.name).clone().getSubData(this,e.postfix,n)}_evalCreate(e,n){var r;if(e instanceof ci){if(e.type===null)return t_.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,n)}}const s=e instanceof ci?e.type.name:e.name,i=e instanceof ci?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(i===null)return console.error(`Unknown type ${s}. Line ${e.line}`),null;if(i.size===0)return null;const a=new Bn(new ArrayBuffer(i.size),i,0);if(i instanceof Yo){if(e.args)for(let l=0;l<e.args.length;++l){const u=i.members[l],h=e.args[l],d=this.evalExpression(h,n);a.setData(this,d,u.type,u.offset,n)}}else if(i instanceof Jo){let l=0;if(e.args)for(let u=0;u<e.args.length;++u){const h=e.args[u],d=this.evalExpression(h,n);i.format===null&&(((r=d.typeInfo)===null||r===void 0?void 0:r.name)==="x32"?i.format=this.getTypeInfo("i32"):i.format=d.typeInfo),a.setData(this,d,i.format,l,n),l+=i.stride}}else console.error(`Unknown type "${s}". Line ${e.line}`);return e instanceof ci?a.getSubData(this,e.postfix,n):a}_evalLiteral(e,n){const r=this.getTypeInfo(e.type),s=r.name;return s==="x32"||s==="u32"||s==="f32"||s==="f16"||s==="i32"||s==="bool"?new pe(e.scalarValue,r):s==="vec2"||s==="vec3"||s==="vec4"||s==="vec2f"||s==="vec3f"||s==="vec4f"||s==="vec2h"||s==="vec3h"||s==="vec4h"||s==="vec2i"||s==="vec3i"||s==="vec4i"||s==="vec2u"||s==="vec3u"||s==="vec4u"?this._callConstructorVec(e,n):s==="mat2x2"||s==="mat2x3"||s==="mat2x4"||s==="mat3x2"||s==="mat3x3"||s==="mat3x4"||s==="mat4x2"||s==="mat4x3"||s==="mat4x4"||s==="mat2x2f"||s==="mat2x3f"||s==="mat2x4f"||s==="mat3x2f"||s==="mat3x3f"||s==="mat3x4f"||s==="mat4x2f"||s==="mat4x3f"||s==="mat4x4f"||s==="mat2x2h"||s==="mat2x3h"||s==="mat2x4h"||s==="mat3x2h"||s==="mat3x3h"||s==="mat3x4h"||s==="mat4x2h"||s==="mat4x3h"||s==="mat4x4h"?this._callConstructorMatrix(e,n):e.value}_evalVariable(e,n){const r=n.getVariableValue(e.name);return r===null?r:r.getSubData(this,e.postfix,n)}_maxFormatTypeInfo(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){const s=Sr._priority.get(n.name);Sr._priority.get(e[r].name)<s&&(n=e[r])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(e,n){const r=this.evalExpression(e.right,n);if(e.operator==="&")return new lc(r);if(e.operator==="*")return r instanceof lc?r.reference.getSubData(this,e.postfix,n):(console.error(`Invalid dereference. Line ${e.line}`),null);const s=r instanceof pe?r.value:r instanceof Q?Array.from(r.data):null;switch(e.operator){case"+":{if(Je(s)){const l=s.map((u,h)=>+u);return new Q(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new pe(+i,a)}case"-":{if(Je(s)){const l=s.map((u,h)=>-u);return new Q(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new pe(-i,a)}case"!":{if(Je(s)){const l=s.map((u,h)=>u?0:1);return new Q(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new pe(i?0:1,a)}case"~":{if(Je(s)){const l=s.map((u,h)=>~u);return new Q(l,r.typeInfo)}const i=s,a=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new pe(~i,a)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,n){const r=this.evalExpression(e.left,n),s=this.evalExpression(e.right,n),i=r instanceof pe?r.value:r instanceof Q||r instanceof xt?Array.from(r.data):null,a=s instanceof pe?s.value:s instanceof Q||s instanceof xt?Array.from(s.data):null;switch(e.operator){case"+":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w+g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b+d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d+b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l+u,h)}case"-":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w-g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b-d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d-b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l-u,h)}case"*":{if(Je(i)&&Je(a)){const d=i,g=a;if(r instanceof xt&&s instanceof xt){const b=function(C,I,M,k){if(Mr[I.name]===void 0||Mr[k.name]===void 0)return null;const P=Mr[I.name][0],L=Mr[I.name][1],O=Mr[k.name][0];if(P!==Mr[k.name][1])return null;const H=new Array(O*L);for(let Y=0;Y<L;Y++)for(let J=0;J<O;J++){let K=0;for(let Z=0;Z<P;Z++)K+=C[Z*L+Y]*M[J*P+Z];H[Y*O+J]=K}return H}(d,r.typeInfo,g,s.typeInfo);if(b===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const w=Mr[s.typeInfo.name][0],R=Mr[r.typeInfo.name][1],A=this.getTypeInfo(`mat${w}x${R}f`);return new xt(b,A)}if(r instanceof xt&&s instanceof Q){const b=function(w,R,A,C){if(Mr[R.name]===void 0||mx[C.name]===void 0)return null;const I=Mr[R.name][0],M=Mr[R.name][1];if(I!==A.length)return null;const k=new Array(M);for(let P=0;P<M;P++){let L=0;for(let O=0;O<I;O++)L+=w[O*M+P]*A[O];k[P]=L}return k}(d,r.typeInfo,g,s.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Q(b,s.typeInfo)}if(r instanceof Q&&s instanceof xt){const b=function(w,R,A,C){if(mx[R.name]===void 0||Mr[C.name]===void 0)return null;const I=Mr[C.name][0],M=Mr[C.name][1];if(M!==w.length)return null;const k=[];for(let P=0;P<I;P++){let L=0;for(let O=0;O<M;O++)L+=w[O]*A[O*I+P];k[P]=L}return k}(d,r.typeInfo,g,s.typeInfo);return b===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Q(b,r.typeInfo)}{if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w*g[R]);return new Q(b,r.typeInfo)}}if(Je(i)){const d=a,g=i.map((b,w)=>b*d);return r instanceof xt?new xt(g,r.typeInfo):new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d*b);return s instanceof xt?new xt(g,s.typeInfo):new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l*u,h)}case"%":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w%g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b%d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d%b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l%u,h)}case"/":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w/g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b/d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d/b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l/u,h)}case"&":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w&g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b&d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d&b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l&u,h)}case"|":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w|g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b|d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d|b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l|u,h)}case"^":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w^g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b^d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d^b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l^u,h)}case"<<":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w<<g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b<<d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d<<b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l<<u,h)}case">>":{if(Je(i)&&Je(a)){const d=i,g=a;if(d.length!==g.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const b=d.map((w,R)=>w>>g[R]);return new Q(b,r.typeInfo)}if(Je(i)){const d=a,g=i.map((b,w)=>b>>d);return new Q(g,r.typeInfo)}if(Je(a)){const d=i,g=a.map((b,w)=>d>>b);return new Q(g,s.typeInfo)}const l=i,u=a,h=this._maxFormatTypeInfo([r.typeInfo,s.typeInfo]);return new pe(l>>u,h)}case">":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d>u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h>l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l>h?1:0);return new Q(u,s.typeInfo)}return new pe(i>a?1:0,this.getTypeInfo("bool"));case"<":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d<u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h<l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l<h?1:0);return new Q(u,s.typeInfo)}return new pe(i<a?1:0,this.getTypeInfo("bool"));case"==":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d===u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h==l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l==h?1:0);return new Q(u,s.typeInfo)}return new pe(i===a?1:0,this.getTypeInfo("bool"));case"!=":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d!==u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h!==l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l!==h?1:0);return new Q(u,s.typeInfo)}return new pe(i!==a?1:0,this.getTypeInfo("bool"));case">=":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d>=u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h>=l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l>=h?1:0);return new Q(u,s.typeInfo)}return new pe(i>=a?1:0,this.getTypeInfo("bool"));case"<=":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d<=u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h<=l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l<=h?1:0);return new Q(u,s.typeInfo)}return new pe(i<=a?1:0,this.getTypeInfo("bool"));case"&&":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d&&u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h&&l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l&&h?1:0);return new Q(u,s.typeInfo)}return new pe(i&&a?1:0,this.getTypeInfo("bool"));case"||":if(Je(i)&&Je(a)){const l=i,u=a;if(l.length!==u.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const h=l.map((d,g)=>d||u[g]?1:0);return new Q(h,r.typeInfo)}if(Je(i)){const l=a,u=i.map((h,d)=>h||l?1:0);return new Q(u,r.typeInfo)}if(Je(a)){const l=i,u=a.map((h,d)=>l||h?1:0);return new Q(u,s.typeInfo)}return new pe(i||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,n){if(e.cachedReturnValue!==null)return e.cachedReturnValue;const r=n.clone();r.currentFunctionName=e.name;const s=n.getFunction(e.name);if(!s)return e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)?this._evalCreate(e,n):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let i=0;i<s.node.args.length;++i){const a=s.node.args[i],l=this.evalExpression(e.args[i],r);r.createVariable(a.name,l,a)}return this._execStatements(s.node.body,r)}_callBuiltinFunction(e,n){switch(e.name){case"all":return this.builtins.All(e,n);case"any":return this.builtins.Any(e,n);case"select":return this.builtins.Select(e,n);case"arrayLength":return this.builtins.ArrayLength(e,n);case"abs":return this.builtins.Abs(e,n);case"acos":return this.builtins.Acos(e,n);case"acosh":return this.builtins.Acosh(e,n);case"asin":return this.builtins.Asin(e,n);case"asinh":return this.builtins.Asinh(e,n);case"atan":return this.builtins.Atan(e,n);case"atanh":return this.builtins.Atanh(e,n);case"atan2":return this.builtins.Atan2(e,n);case"ceil":return this.builtins.Ceil(e,n);case"clamp":return this.builtins.Clamp(e,n);case"cos":return this.builtins.Cos(e,n);case"cosh":return this.builtins.Cosh(e,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,n);case"countOneBits":return this.builtins.CountOneBits(e,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,n);case"cross":return this.builtins.Cross(e,n);case"degrees":return this.builtins.Degrees(e,n);case"determinant":return this.builtins.Determinant(e,n);case"distance":return this.builtins.Distance(e,n);case"dot":return this.builtins.Dot(e,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,n);case"exp":return this.builtins.Exp(e,n);case"exp2":return this.builtins.Exp2(e,n);case"extractBits":return this.builtins.ExtractBits(e,n);case"faceForward":return this.builtins.FaceForward(e,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,n);case"floor":return this.builtins.Floor(e,n);case"fma":return this.builtins.Fma(e,n);case"fract":return this.builtins.Fract(e,n);case"frexp":return this.builtins.Frexp(e,n);case"insertBits":return this.builtins.InsertBits(e,n);case"inverseSqrt":return this.builtins.InverseSqrt(e,n);case"ldexp":return this.builtins.Ldexp(e,n);case"length":return this.builtins.Length(e,n);case"log":return this.builtins.Log(e,n);case"log2":return this.builtins.Log2(e,n);case"max":return this.builtins.Max(e,n);case"min":return this.builtins.Min(e,n);case"mix":return this.builtins.Mix(e,n);case"modf":return this.builtins.Modf(e,n);case"normalize":return this.builtins.Normalize(e,n);case"pow":return this.builtins.Pow(e,n);case"quantizeToF16":return this.builtins.QuantizeToF16(e,n);case"radians":return this.builtins.Radians(e,n);case"reflect":return this.builtins.Reflect(e,n);case"refract":return this.builtins.Refract(e,n);case"reverseBits":return this.builtins.ReverseBits(e,n);case"round":return this.builtins.Round(e,n);case"saturate":return this.builtins.Saturate(e,n);case"sign":return this.builtins.Sign(e,n);case"sin":return this.builtins.Sin(e,n);case"sinh":return this.builtins.Sinh(e,n);case"smoothStep":return this.builtins.SmoothStep(e,n);case"sqrt":return this.builtins.Sqrt(e,n);case"step":return this.builtins.Step(e,n);case"tan":return this.builtins.Tan(e,n);case"tanh":return this.builtins.Tanh(e,n);case"transpose":return this.builtins.Transpose(e,n);case"trunc":return this.builtins.Trunc(e,n);case"dpdx":return this.builtins.Dpdx(e,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,n);case"dpdxFine":return this.builtins.DpdxFine(e,n);case"dpdy":return this.builtins.Dpdy(e,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,n);case"dpdyFine":return this.builtins.DpdyFine(e,n);case"fwidth":return this.builtins.Fwidth(e,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,n);case"fwidthFine":return this.builtins.FwidthFine(e,n);case"textureDimensions":return this.builtins.TextureDimensions(e,n);case"textureGather":return this.builtins.TextureGather(e,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,n);case"textureLoad":return this.builtins.TextureLoad(e,n);case"textureNumLayers":return this.builtins.TextureNumLayers(e,n);case"textureNumLevels":return this.builtins.TextureNumLevels(e,n);case"textureNumSamples":return this.builtins.TextureNumSamples(e,n);case"textureSample":return this.builtins.TextureSample(e,n);case"textureSampleBias":return this.builtins.TextureSampleBias(e,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,n);case"textureStore":return this.builtins.TextureStore(e,n);case"atomicLoad":return this.builtins.AtomicLoad(e,n);case"atomicStore":return this.builtins.AtomicStore(e,n);case"atomicAdd":return this.builtins.AtomicAdd(e,n);case"atomicSub":return this.builtins.AtomicSub(e,n);case"atomicMax":return this.builtins.AtomicMax(e,n);case"atomicMin":return this.builtins.AtomicMin(e,n);case"atomicAnd":return this.builtins.AtomicAnd(e,n);case"atomicOr":return this.builtins.AtomicOr(e,n);case"atomicXor":return this.builtins.AtomicXor(e,n);case"atomicExchange":return this.builtins.AtomicExchange(e,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,n);case"pack4xI8":return this.builtins.Pack4xI8(e,n);case"pack4xU8":return this.builtins.Pack4xU8(e,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,n);case"pack2x16float":return this.builtins.Pack2x16float(e,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,n);case"unpack4xI8":return this.builtins.Unpack4xI8(e,n);case"unpack4xU8":return this.builtins.Unpack4xU8(e,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,n);case"unpack2x16float":return this.builtins.Unpack2x16float(e,n);case"storageBarrier":return this.builtins.StorageBarrier(e,n);case"textureBarrier":return this.builtins.TextureBarrier(e,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,n);case"subgroupAdd":return this.builtins.SubgroupAdd(e,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,n);case"subgroupAll":return this.builtins.SubgroupAll(e,n);case"subgroupAnd":return this.builtins.SubgroupAnd(e,n);case"subgroupAny":return this.builtins.SubgroupAny(e,n);case"subgroupBallot":return this.builtins.SubgroupBallot(e,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,n);case"subgroupElect":return this.builtins.SubgroupElect(e,n);case"subgroupMax":return this.builtins.SubgroupMax(e,n);case"subgroupMin":return this.builtins.SubgroupMin(e,n);case"subgroupMul":return this.builtins.SubgroupMul(e,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,n);case"subgroupOr":return this.builtins.SubgroupOr(e,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,n);case"subgroupXor":return this.builtins.SubgroupXor(e,n);case"quadBroadcast":return this.builtins.QuadBroadcast(e,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,n);case"quadSwapX":return this.builtins.QuadSwapX(e,n);case"quadSwapY":return this.builtins.QuadSwapY(e,n)}const r=n.getFunction(e.name);if(r){const s=n.clone();for(let i=0;i<r.node.args.length;++i){const a=r.node.args[i],l=this.evalExpression(e.args[i],s);s.setVariable(a.name,l,a)}return this._execStatements(r.node.body,s)}return null}_callConstructorValue(e,n){if(!e.args||e.args.length===0)return new pe(0,this.getTypeInfo(e.type));const r=this.evalExpression(e.args[0],n);return r.typeInfo=this.getTypeInfo(e.type),r.getSubData(this,e.postfix,n).clone()}_callConstructorVec(e,n){const r=this.getTypeInfo(e.type),s=e.type.getTypeName(),i=mx[s];if(i===void 0)return console.error(`Invalid vec constructor ${s}. Line ${e.line}`),null;const a=[];if(e instanceof tr)if(e.isVector){const l=e.vectorValue;for(const u of l)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const l of e.args){const u=this.evalExpression(l,n);if(u instanceof Q){const h=u.data;for(let d=0;d<h.length;++d){let g=h[d];a.push(g)}}else if(u instanceof pe){let h=u.value;a.push(h)}}if(e.type instanceof ve&&e.type.format===null&&(e.type.format=ve.f32),a.length===0){const l=new Array(i).fill(0);return new Q(l,r).getSubData(this,e.postfix,n)}if(a.length===1)for(;a.length<i;)a.push(a[0]);return a.length<i?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new Q(a.length>i?a.slice(0,i):a,r).getSubData(this,e.postfix,n)}_callConstructorMatrix(e,n){const r=this.getTypeInfo(e.type),s=e.type.getTypeName(),i=Mr[s];if(i===void 0)return console.error(`Invalid matrix constructor ${s}. Line ${e.line}`),null;const a=[];if(e instanceof tr)if(e.isVector){const l=e.vectorValue;for(const u of l)a.push(u)}else a.push(e.scalarValue);else if(e.args)for(const l of e.args){const u=this.evalExpression(l,n);u instanceof Q?a.push(...u.data):u instanceof pe?a.push(u.value):u instanceof xt&&a.push(...u.data)}if(r instanceof ul&&r.format===null&&(r.format=this.getTypeInfo("f32")),a.length===0){const l=new Array(i[2]).fill(0);return new xt(l,r).getSubData(this,e.postfix,n)}return a.length!==i[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new xt(a,r).getSubData(this,e.postfix,n)}}Sr._breakObj=new Ns(new Es("BREAK",null),null),Sr._continueObj=new Ns(new Es("CONTINUE",null),null),Sr._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class cH{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class uH{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new cH,this._exec=new Sr,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(const r of this._deferArrayCountEval){const s=r.arrayType,i=r.countNode;if(i instanceof cs){const a=i.name,l=this._context.constants.get(a);if(l)try{const u=l.constEvaluate(this._exec);s.count=u}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const r of n)r.search(s=>{s instanceof GE||s instanceof Mp?s.type=this._forwardType(s.type):s instanceof zf?s.format=this._forwardType(s.format):s instanceof Hi||s instanceof Uf||s instanceof kp?s.type=this._forwardType(s.type):s instanceof rh?s.returnType=this._forwardType(s.returnType):s instanceof QE&&(s.type=this._forwardType(s.type))});return n}_forwardType(e){if(e instanceof ZE){const n=this._getType(e.name);if(n)return n}else e instanceof Mp?e.type=this._forwardType(e.type):e instanceof zf&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){const n=new J7(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,n){return e.line=n??this._currentLine,e}_error(e,n){return{token:e,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==q.eof}_match(e){if(e instanceof ye)return!!this._check(e)&&(this._advance(),!0);for(let n=0,r=e.length;n<r;++n){const s=e[n];if(this._check(s))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const r=n.type;let s=!1;for(const i of e){if(r===i)return!0;i===q.tokens.name&&(s=!0)}if(s){const i=q.tokens.name.rule.exec(n.lexeme);if(i&&i.index==0&&i[0]==n.lexeme)return!0}return!1}if(n.type===e)return!0;if(e===q.tokens.name){const r=q.tokens.name.rule.exec(n.lexeme);return r&&r.index==0&&r[0]==n.lexeme}return!1}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(q.tokens.semicolon)&&!this._isAtEnd(););if(this._match(q.keywords.alias)){const n=this._type_alias();return this._consume(q.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(q.keywords.diagnostic)){const n=this._diagnostic();return this._consume(q.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(q.keywords.requires)){const n=this._requires_directive();return this._consume(q.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(q.keywords.enable)){const n=this._enable_directive();return this._consume(q.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}const e=this._attribute();if(this._check(q.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(q.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(q.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(q.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(q.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(q.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(q.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(q.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(q.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}if(this._check(q.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(q.keywords.fn))return null;const e=this._currentLine,n=this._consume(q.tokens.ident,"Expected function name.").toString();this._consume(q.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(q.tokens.paren_right))do{if(this._check(q.tokens.paren_right))break;const l=this._attribute(),u=this._consume(q.tokens.name,"Expected argument name.").toString();this._consume(q.tokens.colon,"Expected ':' for argument type.");const h=this._attribute(),d=this._type_decl();d!=null&&(d.attributes=h,r.push(this._updateNode(new QE(u,d,l))))}while(this._match(q.tokens.comma));this._consume(q.tokens.paren_right,"Expected ')' after function arguments.");let s=null;if(this._match(q.tokens.arrow)){const l=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=l)}const i=this._compound_statement(),a=this._currentLine;return this._updateNode(new rh(n,r,s,i,e,a),e)}_compound_statement(){const e=[];for(this._consume(q.tokens.brace_left,"Expected '{' for block.");!this._check(q.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(q.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(q.tokens.semicolon)&&!this._isAtEnd(););if(this._check(q.tokens.attr)&&this._attribute(),this._check(q.keywords.if))return this._if_statement();if(this._check(q.keywords.switch))return this._switch_statement();if(this._check(q.keywords.loop))return this._loop_statement();if(this._check(q.keywords.for))return this._for_statement();if(this._check(q.keywords.while))return this._while_statement();if(this._check(q.keywords.continuing))return this._continuing_statement();if(this._check(q.keywords.static_assert))return this._static_assert_statement();if(this._check(q.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(q.keywords.return))e=this._return_statement();else if(this._check([q.keywords.var,q.keywords.let,q.keywords.const]))e=this._variable_statement();else if(this._match(q.keywords.discard))e=this._updateNode(new Z7);else if(this._match(q.keywords.break)){const n=this._updateNode(new JM);if(this._currentLoop.length>0){const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n,this._check(q.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(q.keywords.continue)){const n=this._updateNode(new eI);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{const r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(q.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(q.keywords.static_assert))return null;const e=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new X7(n),e)}_while_statement(){if(!this._match(q.keywords.while))return null;const e=this._updateNode(new HM(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(q.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(q.keywords.continuing))return null;const n=this._currentLine,r=this._compound_statement();return this._updateNode(new e_(r,e),n)}_for_statement(){if(!this._match(q.keywords.for))return null;this._consume(q.tokens.paren_left,"Expected '('.");const e=this._updateNode(new WM(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(q.tokens.semicolon)?null:this._for_init(),this._consume(q.tokens.semicolon,"Expected ';'."),e.condition=this._check(q.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(q.tokens.semicolon,"Expected ';'."),e.increment=this._check(q.tokens.paren_right)?null:this._for_increment(),this._consume(q.tokens.paren_right,"Expected ')'."),this._check(q.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(q.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(q.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new Hi(e.name,e.type,e.storage,e.access,n),e.line)}if(this._match(q.keywords.let)){const e=this._currentLine,n=this._consume(q.tokens.name,"Expected name for let.").toString();let r=null;if(this._match(q.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(q.tokens.equal,"Expected '=' for let.");const s=this._short_circuit_or_expression();return this._updateNode(new Uf(n,r,null,null,s),e)}if(this._match(q.keywords.const)){const e=this._currentLine,n=this._consume(q.tokens.name,"Expected name for const.").toString();let r=null;if(this._match(q.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(q.tokens.equal,"Expected '=' for const.");const s=this._short_circuit_or_expression();return r===null&&s instanceof tr&&(r=s.type),this._updateNode(new kp(n,r,null,null,s),e)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(q.increment_operators))return this._current=e,null;const r=this._consume(q.increment_operators,"Expected increment operator");return this._updateNode(new qM(r.type===q.tokens.plus_plus?vc.increment:vc.decrement,n))}_assignment_statement(){let e=null;const n=this._currentLine;if(this._check(q.tokens.brace_right))return null;let r=this._match(q.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;const s=this._consume(q.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return this._updateNode(new XM(If.parse(s.lexeme),e,i),n)}_func_call_statement(){if(!this._check(q.tokens.ident))return null;const e=this._currentLine,n=this._current,r=this._consume(q.tokens.ident,"Expected function name."),s=this._argument_expression_list();return s===null?(this._current=n,null):this._updateNode(new j0(r.lexeme,s),e)}_loop_statement(){if(!this._match(q.keywords.loop))return null;this._check(q.tokens.attr)&&this._attribute(),this._consume(q.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new YM([],null));this._currentLoop.push(e);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let r of n)e.body.push(r);else e.body.push(n);if(n instanceof e_){e.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(q.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(q.keywords.switch))return null;const e=this._updateNode(new KM(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(q.tokens.attr)&&this._attribute(),this._consume(q.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(q.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let n=!1;for(;this._check([q.keywords.default,q.keywords.case]);){if(this._match(q.keywords.case)){const r=this._case_selectors();for(const i of r)if(i instanceof Ip){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(q.tokens.colon),this._check(q.tokens.attr)&&this._attribute(),this._consume(q.tokens.brace_left,"Exected '{' for switch case.");const s=this._case_body();this._consume(q.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new iI(r,s)))}if(this._match(q.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(q.tokens.colon),this._check(q.tokens.attr)&&this._attribute(),this._consume(q.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(q.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new oI(r)))}}return e}_case_selectors(){const e=[];for(this._match(q.keywords.default)?e.push(this._updateNode(new Ip)):e.push(this._shift_expression());this._match(q.tokens.comma);)this._match(q.keywords.default)?e.push(this._updateNode(new Ip)):e.push(this._shift_expression());return e}_case_body(){if(this._match(q.keywords.fallthrough))return this._consume(q.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(q.keywords.if))return null;const e=this._currentLine,n=this._optional_paren_expression();this._check(q.tokens.attr)&&this._attribute();const r=this._compound_statement();let s=[];this._match_elseif()&&(this._check(q.tokens.attr)&&this._attribute(),s=this._elseif_statement(s));let i=null;return this._match(q.keywords.else)&&(this._check(q.tokens.attr)&&this._attribute(),i=this._compound_statement()),this._updateNode(new ZM(n,r,s,i),e)}_match_elseif(){return this._tokens[this._current].type===q.keywords.else&&this._tokens[this._current+1].type===q.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(this._updateNode(new Q7(n,r))),this._match_elseif()&&(this._check(q.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(q.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new QM(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(q.tokens.or_or);)e=this._updateNode(new Us(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(q.tokens.and_and);)e=this._updateNode(new Us(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(q.tokens.or);)e=this._updateNode(new Us(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(q.tokens.xor);)e=this._updateNode(new Us(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(q.tokens.and);)e=this._updateNode(new Us(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([q.tokens.equal_equal,q.tokens.not_equal])?this._updateNode(new Us(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([q.tokens.less_than,q.tokens.greater_than,q.tokens.less_than_equal,q.tokens.greater_than_equal]);)e=this._updateNode(new Us(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([q.tokens.shift_left,q.tokens.shift_right]);)e=this._updateNode(new Us(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([q.tokens.plus,q.tokens.minus]);)e=this._updateNode(new Us(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([q.tokens.star,q.tokens.forward_slash,q.tokens.modulo]);)e=this._updateNode(new Us(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([q.tokens.minus,q.tokens.bang,q.tokens.tilde,q.tokens.star,q.tokens.and])?this._updateNode(new Xn(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(q.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(q.tokens.bracket_right,"Expected ']'.");const n=this._updateNode(new Zc(e)),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(q.tokens.period)){const e=this._consume(q.tokens.name,"Expected member name."),n=this._postfix_expression(),r=this._updateNode(new fl(e.lexeme));return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const n=this._getStruct(e);if(n!==null)return n;switch(e){case"void":return Be.void;case"bool":return Be.bool;case"i32":return Be.i32;case"u32":return Be.u32;case"f32":return Be.f32;case"f16":return Be.f16;case"vec2f":return ve.vec2f;case"vec3f":return ve.vec3f;case"vec4f":return ve.vec4f;case"vec2i":return ve.vec2i;case"vec3i":return ve.vec3i;case"vec4i":return ve.vec4i;case"vec2u":return ve.vec2u;case"vec3u":return ve.vec3u;case"vec4u":return ve.vec4u;case"vec2h":return ve.vec2h;case"vec3h":return ve.vec3h;case"vec4h":return ve.vec4h;case"mat2x2f":return ve.mat2x2f;case"mat2x3f":return ve.mat2x3f;case"mat2x4f":return ve.mat2x4f;case"mat3x2f":return ve.mat3x2f;case"mat3x3f":return ve.mat3x3f;case"mat3x4f":return ve.mat3x4f;case"mat4x2f":return ve.mat4x2f;case"mat4x3f":return ve.mat4x3f;case"mat4x4f":return ve.mat4x4f;case"mat2x2h":return ve.mat2x2h;case"mat2x3h":return ve.mat2x3h;case"mat2x4h":return ve.mat2x4h;case"mat3x2h":return ve.mat3x2h;case"mat3x3h":return ve.mat3x3h;case"mat3x4h":return ve.mat3x4h;case"mat4x2h":return ve.mat4x2h;case"mat4x3h":return ve.mat4x3h;case"mat4x4h":return ve.mat4x4h;case"mat2x2i":return ve.mat2x2i;case"mat2x3i":return ve.mat2x3i;case"mat2x4i":return ve.mat2x4i;case"mat3x2i":return ve.mat3x2i;case"mat3x3i":return ve.mat3x3i;case"mat3x4i":return ve.mat3x4i;case"mat4x2i":return ve.mat4x2i;case"mat4x3i":return ve.mat4x3i;case"mat4x4i":return ve.mat4x4i;case"mat2x2u":return ve.mat2x2u;case"mat2x3u":return ve.mat2x3u;case"mat2x4u":return ve.mat2x4u;case"mat3x2u":return ve.mat3x2u;case"mat3x3u":return ve.mat3x3u;case"mat3x4u":return ve.mat3x4u;case"mat4x2u":return ve.mat4x2u;case"mat4x3u":return ve.mat4x3u;case"mat4x4u":return ve.mat4x4u}return null}_validateTypeRange(e,n){if(n.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(q.tokens.ident)){const r=this._previous().toString();if(this._check(q.tokens.paren_left)){const s=this._argument_expression_list(),i=this._getType(r);return i!==null?this._updateNode(new ci(i,s)):this._updateNode(new B0(r,s))}if(this._context.constants.has(r)){const s=this._context.constants.get(r);return this._updateNode(new tI(r,s.value))}return this._updateNode(new cs(r))}if(this._match(q.tokens.int_literal)){const r=this._previous().toString();let s=r.endsWith("i")||r.endsWith("i")?Be.i32:r.endsWith("u")||r.endsWith("U")?Be.u32:Be.x32;const i=parseInt(r);return this._validateTypeRange(i,s),this._updateNode(new tr(new pe(i,this._exec.getTypeInfo(s)),s))}if(this._match(q.tokens.uint_literal)){const r=parseInt(this._previous().toString());return this._validateTypeRange(r,Be.u32),this._updateNode(new tr(new pe(r,this._exec.getTypeInfo(Be.u32)),Be.u32))}if(this._match([q.tokens.decimal_float_literal,q.tokens.hex_float_literal])){let r=this._previous().toString(),s=r.endsWith("h");s&&(r=r.substring(0,r.length-1));const i=parseFloat(r);this._validateTypeRange(i,s?Be.f16:Be.f32);const a=s?Be.f16:Be.f32;return this._updateNode(new tr(new pe(i,this._exec.getTypeInfo(a)),a))}if(this._match([q.keywords.true,q.keywords.false])){let r=this._previous().toString()===q.keywords.true.rule;return this._updateNode(new tr(new pe(r?1:0,this._exec.getTypeInfo(Be.bool)),Be.bool))}if(this._check(q.tokens.paren_left))return this._paren_expression();if(this._match(q.keywords.bitcast)){this._consume(q.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(q.tokens.greater_than,"Expected '>'.");const s=this._paren_expression();return this._updateNode(new nI(r,s))}const e=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new ci(e,n))}_argument_expression_list(){if(!this._match(q.tokens.paren_left))return null;const e=[];do{if(this._check(q.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(q.tokens.comma));return this._consume(q.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(q.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(q.tokens.paren_right),e}_paren_expression(){this._consume(q.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(q.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(q.keywords.struct))return null;const e=this._currentLine,n=this._consume(q.tokens.ident,"Expected name for struct.").toString();this._consume(q.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(q.tokens.brace_right);){const a=this._attribute(),l=this._consume(q.tokens.name,"Expected variable name.").toString();this._consume(q.tokens.colon,"Expected ':' for struct member type.");const u=this._attribute(),h=this._type_decl();h!=null&&(h.attributes=u),this._check(q.tokens.brace_right)?this._match(q.tokens.comma):this._consume(q.tokens.comma,"Expected ',' for struct member."),r.push(this._updateNode(new GE(l,h,a)))}this._consume(q.tokens.brace_right,"Expected '}' after struct body.");const s=this._currentLine,i=this._updateNode(new Li(n,r,e,s),e);return this._context.structs.set(n,i),i}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(q.tokens.equal)){const n=this._const_expression();e.value=n}if(e.type!==null&&e.value instanceof tr){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof tr&&(e.type=e.value.type.name==="x32"?Be.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(q.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(q.keywords.const))return null;const n=this._consume(q.tokens.name,"Expected variable name"),r=this._currentLine;let s=null;if(this._match(q.tokens.colon)){const u=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=u)}let i=null;this._consume(q.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let u=[Be.f32],h=a.constEvaluate(this._exec,u);h instanceof pe&&this._validateTypeRange(h.value,u[0]),u[0]instanceof ve&&u[0].format===null&&h.typeInfo instanceof ul&&h.typeInfo.format!==null&&(h.typeInfo.format.name==="f16"?u[0].format=Be.f16:h.typeInfo.format.name==="f32"?u[0].format=Be.f32:h.typeInfo.format.name==="i32"?u[0].format=Be.i32:h.typeInfo.format.name==="u32"?u[0].format=Be.u32:h.typeInfo.format.name==="bool"?u[0].format=Be.bool:console.error(`TODO: impelement template format type ${h.typeInfo.format.name}`)),i=this._updateNode(new tr(h,u[0])),this._exec.context.setVariable(n.toString(),h)}catch{i=a}if(s!==null&&i instanceof tr){if(i.type.name!=="x32"&&s.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${s.name}. Line:${this._currentLine}`);i.type=s,i.isScalar&&this._validateTypeRange(i.scalarValue,i.type)}else s===null&&i instanceof tr&&(s=(e=i==null?void 0:i.type)!==null&&e!==void 0?e:Be.f32,s===Be.x32&&(s=Be.i32));const l=this._updateNode(new kp(n.toString(),s,"","",i),r);return this._context.constants.set(l.name,l),l}_global_let_decl(){if(!this._match(q.keywords.let))return null;const e=this._currentLine,n=this._consume(q.tokens.name,"Expected variable name");let r=null;if(this._match(q.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}let s=null;if(this._match(q.tokens.equal)&&(s=this._const_expression()),r!==null&&s instanceof tr){if(s.type.name!=="x32"&&r.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${r.name}. Line:${this._currentLine}`);s.type=r}else r===null&&s instanceof tr&&(r=s.type.name==="x32"?Be.i32:s.type);return s instanceof tr&&s.isScalar&&this._validateTypeRange(s.scalarValue,r),this._updateNode(new Uf(n.toString(),r,"","",s),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(q.keywords.var))return null;const e=this._currentLine;let n="",r="";this._match(q.tokens.less_than)&&(n=this._consume(q.storage_class,"Expected storage_class.").toString(),this._match(q.tokens.comma)&&(r=this._consume(q.access_mode,"Expected access_mode.").toString()),this._consume(q.tokens.greater_than,"Expected '>'."));const s=this._consume(q.tokens.name,"Expected variable name");let i=null;if(this._match(q.tokens.colon)){const a=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=a)}return this._updateNode(new Hi(s.toString(),i,n,r,null),e)}_override_decl(){if(!this._match(q.keywords.override))return null;const e=this._consume(q.tokens.name,"Expected variable name");let n=null;if(this._match(q.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return this._updateNode(new D0(e.toString(),n,null))}_diagnostic(){this._consume(q.tokens.paren_left,"Expected '('");const e=this._consume(q.tokens.ident,"Expected severity control name.");this._consume(q.tokens.comma,"Expected ','");let n=this._consume(q.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(q.tokens.period)&&(n+=`.${this._consume(q.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(q.tokens.paren_right,"Expected ')'"),this._updateNode(new GM(e.toString(),n))}_enable_directive(){const e=this._consume(q.tokens.ident,"identity expected.");return this._updateNode(new Y7(e.toString()))}_requires_directive(){const e=[this._consume(q.tokens.ident,"identity expected.").toString()];for(;this._match(q.tokens.comma);){const n=this._consume(q.tokens.ident,"identity expected.");e.push(n.toString())}return this._updateNode(new K7(e))}_type_alias(){const e=this._consume(q.tokens.ident,"identity expected.");this._consume(q.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=this._updateNode(new F0(e.toString(),n));return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([q.tokens.ident,...q.texel_format,q.keywords.bool,q.keywords.f32,q.keywords.i32,q.keywords.u32])){const r=this._advance().toString();if(this._context.structs.has(r))return this._context.structs.get(r);if(this._context.aliases.has(r))return this._context.aliases.get(r).type;if(!this._getType(r)){const s=this._updateNode(new ZE(r));return this._forwardTypeCount++,s}return this._updateNode(new Be(r))}let e=this._texture_sampler_types();if(e)return e;if(this._check(q.template_types)){let r=this._advance().toString(),s=null,i=null;return this._match(q.tokens.less_than)&&(s=this._type_decl(),i=null,this._match(q.tokens.comma)&&(i=this._consume(q.access_mode,"Expected access_mode for pointer").toString()),this._consume(q.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new ve(r,s,i))}if(this._match(q.keywords.ptr)){let r=this._previous().toString();this._consume(q.tokens.less_than,"Expected '<' for pointer.");const s=this._consume(q.storage_class,"Expected storage_class for pointer");this._consume(q.tokens.comma,"Expected ',' for pointer.");const i=this._type_decl();let a=null;return this._match(q.tokens.comma)&&(a=this._consume(q.access_mode,"Expected access_mode for pointer").toString()),this._consume(q.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new Mp(r,s.toString(),i,a))}const n=this._attribute();if(this._match(q.keywords.array)){let r=null,s=-1;const i=this._previous();let a=null;if(this._match(q.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let u="";if(this._match(q.tokens.comma)){a=this._shift_expression();try{u=a.constEvaluate(this._exec).toString(),a=null}catch{u="1"}}this._consume(q.tokens.greater_than,"Expected '>' for array."),s=u?parseInt(u):0}const l=this._updateNode(new zf(i.toString(),n,r,s));return a&&this._deferArrayCountEval.push({arrayType:l,countNode:a}),l}return null}_texture_sampler_types(){if(this._match(q.sampler_type))return this._updateNode(new Of(this._previous().toString(),null,null));if(this._match(q.depth_texture_type))return this._updateNode(new Of(this._previous().toString(),null,null));if(this._match(q.sampled_texture_type)||this._match(q.multisampled_texture_type)){const e=this._previous();this._consume(q.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(q.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Of(e.toString(),n,null))}if(this._match(q.storage_texture_type)){const e=this._previous();this._consume(q.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(q.texel_format,"Invalid texel format.").toString();this._consume(q.tokens.comma,"Expected ',' after texel format.");const r=this._consume(q.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(q.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Of(e.toString(),n,r))}return null}_attribute(){let e=[];for(;this._match(q.tokens.attr);){const n=this._consume(q.attribute_name,"Expected attribute name"),r=this._updateNode(new aI(n.toString(),null));if(this._match(q.tokens.paren_left)){if(r.value=this._consume(q.literal_or_ident,"Expected attribute value").toString(),this._check(q.tokens.comma)){this._advance();do{const s=this._consume(q.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(s)}while(this._match(q.tokens.comma))}this._consume(q.tokens.paren_right,"Expected ')'")}e.push(r)}return e.length==0?null:e}}class fH extends mi{constructor(e){super(),e&&this.update(e)}update(e){const n=new uH().parse(e);this.updateAST(n)}}function hH(t){var i;const e={attributes:[],bindings:[]};let n;try{n=dH(t)}catch(a){return Xe.error(a.message)(),e}for(const a of n.uniforms){const l=[];for(const u of((i=a.type)==null?void 0:i.members)||[])l.push({name:u.name,type:tA(u.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:l})}for(const a of n.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of n.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const r=n.entry.vertex[0],s=(r==null?void 0:r.inputs.length)||0;for(let a=0;a<s;a++){const l=r.inputs[a];if(l.locationType==="location"){const u=tA(l.type);e.attributes.push({name:l.name,location:Number(l.location),type:u})}}return e}function tA(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function dH(t){try{return new fH(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const pH={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...pH}};const As=globalThis.mathgl.config;function gH(t,{precision:e=As.precision}={}){return t=mH(t),`${parseFloat(t.toPrecision(e))}`}function Qc(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ko(t,e,n){return bH(t,r=>Math.max(e,Math.min(n,r)))}function dg(t,e,n){return Qc(t)?t.map((r,s)=>dg(r,e[s],n)):n*e+(1-n)*t}function sh(t,e,n){const r=As.EPSILON;try{if(t===e)return!0;if(Qc(t)&&Qc(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!sh(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=As.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{As.EPSILON=r}}function mH(t){return Math.round(t/As.EPSILON)*As.EPSILON}function yH(t){return t.clone?t.clone():new Array(t.length)}function bH(t,e,n){if(Qc(t)){const r=t;n=n||yH(r);for(let s=0;s<n.length&&s<r.length;++s){const i=typeof t=="number"?t:t[s];n[s]=e(i,s,n)}return n}return e(t)}class lI extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Qc(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(As)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+gH(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!sh(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let s=0;s<this.ELEMENTS;++s){const i=e[s],a=typeof n=="number"?n:n[s];this[s]=i+r*(a-i)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(As.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function xH(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function as(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function yx(t,e,n=""){if(As.debug&&!xH(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function nA(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class vH extends lI{get x(){return this[0]}set x(e){this[0]=as(e)}get y(){return this[1]}set y(e){this[1]=as(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-e[r];n+=s*s}return as(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return as(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return nA(e>=0&&e<this.ELEMENTS,"index is out of range"),as(this[e])}setComponent(e,n){return nA(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}const Op=1e-6;let Gc=typeof Float32Array<"u"?Float32Array:Array;function _H(){const t=new Gc(2);return Gc!=Float32Array&&(t[0]=0,t[1]=0),t}function rA(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function wH(t,e){return t[0]=-e[0],t[1]=-e[1],t}function cI(t,e,n,r){const s=e[0],i=e[1];return t[0]=s+r*(n[0]-s),t[1]=i+r*(n[1]-i),t}function SH(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[4]*s+n[12],t[1]=n[1]*r+n[5]*s+n[13],t}(function(){const t=_H();return function(e,n,r,s,i,a){let l,u;for(n||(n=2),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],i(t,t,a),e[l]=t[0],e[l+1]=t[1];return e}})();function TH(t,e,n){const r=e[0],s=e[1],i=n[3]*r+n[7]*s||1;return t[0]=(n[0]*r+n[4]*s)/i,t[1]=(n[1]*r+n[5]*s)/i,t}function uI(t,e,n){const r=e[0],s=e[1],i=e[2],a=n[3]*r+n[7]*s+n[11]*i||1;return t[0]=(n[0]*r+n[4]*s+n[8]*i)/a,t[1]=(n[1]*r+n[5]*s+n[9]*i)/a,t[2]=(n[2]*r+n[6]*s+n[10]*i)/a,t}function EH(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s,t[1]=n[1]*r+n[3]*s,t[2]=e[2],t}function AH(){const t=new Gc(3);return Gc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function RH(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function CH(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function kH(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function NH(t,e,n){const r=e[0],s=e[1],i=e[2],a=n[0],l=n[1],u=n[2];return t[0]=s*u-i*l,t[1]=i*a-r*u,t[2]=r*l-s*a,t}function fI(t,e,n){const r=e[0],s=e[1],i=e[2];let a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/a,t}function MH(t,e,n){const r=e[0],s=e[1],i=e[2];return t[0]=r*n[0]+s*n[3]+i*n[6],t[1]=r*n[1]+s*n[4]+i*n[7],t[2]=r*n[2]+s*n[5]+i*n[8],t}function IH(t,e,n){const r=n[0],s=n[1],i=n[2],a=n[3],l=e[0],u=e[1],h=e[2];let d=s*h-i*u,g=i*l-r*h,b=r*u-s*l,w=s*b-i*g,R=i*d-r*b,A=r*g-s*d;const C=a*2;return d*=C,g*=C,b*=C,w*=2,R*=2,A*=2,t[0]=l+d+w,t[1]=u+g+R,t[2]=h+b+A,t}function OH(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0],i[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),i[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function PH(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),i[1]=s[1],i[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function DH(t,e,n,r){const s=[],i=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],i[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),i[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),i[2]=s[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function jH(t,e){const n=t[0],r=t[1],s=t[2],i=e[0],a=e[1],l=e[2],u=Math.sqrt((n*n+r*r+s*s)*(i*i+a*a+l*l)),h=u&&kH(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}const FH=RH;(function(){const t=AH();return function(e,n,r,s,i,a){let l,u;for(n||(n=3),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],i(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();const bx=[0,0,0];let cp;class xi extends vH{static get ZERO(){return cp||(cp=new xi(0,0,0),Object.freeze(cp)),cp}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Qc(e)?this.copy(e):(As.debug&&(as(e),as(n),as(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return As.debug&&(as(e.x),as(e.y),as(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=as(e)}angle(e){return jH(this,e)}cross(e){return NH(this,this,e),this.check()}rotateX({radians:e,origin:n=bx}){return OH(this,this,n,e),this.check()}rotateY({radians:e,origin:n=bx}){return PH(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=bx}){return DH(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return fI(this,this,e),this.check()}transformAsVector(e){return uI(this,this,e),this.check()}transformByMatrix3(e){return MH(this,this,e),this.check()}transformByMatrix2(e){return EH(this,this,e),this.check()}transformByQuaternion(e){return IH(this,this,e),this.check()}}let BH=class extends lI{toString(){let e="[";if(As.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=as(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[r+s];return n}setColumn(e,n){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=n[s];return this}};function LH(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function UH(t,e){if(t===e){const n=e[1],r=e[2],s=e[3],i=e[6],a=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=s,t[13]=a,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function n_(t,e){const n=e[0],r=e[1],s=e[2],i=e[3],a=e[4],l=e[5],u=e[6],h=e[7],d=e[8],g=e[9],b=e[10],w=e[11],R=e[12],A=e[13],C=e[14],I=e[15],M=n*l-r*a,k=n*u-s*a,P=n*h-i*a,L=r*u-s*l,O=r*h-i*l,H=s*h-i*u,Y=d*A-g*R,J=d*C-b*R,K=d*I-w*R,Z=g*C-b*A,ae=g*I-w*A,_e=b*I-w*C;let oe=M*_e-k*ae+P*Z+L*K-O*J+H*Y;return oe?(oe=1/oe,t[0]=(l*_e-u*ae+h*Z)*oe,t[1]=(s*ae-r*_e-i*Z)*oe,t[2]=(A*H-C*O+I*L)*oe,t[3]=(b*O-g*H-w*L)*oe,t[4]=(u*K-a*_e-h*J)*oe,t[5]=(n*_e-s*K+i*J)*oe,t[6]=(C*P-R*H-I*k)*oe,t[7]=(d*H-b*P+w*k)*oe,t[8]=(a*ae-l*K+h*Y)*oe,t[9]=(r*K-n*ae-i*Y)*oe,t[10]=(R*O-A*P+I*M)*oe,t[11]=(g*P-d*O-w*M)*oe,t[12]=(l*J-a*Z-u*Y)*oe,t[13]=(n*Z-r*J+s*Y)*oe,t[14]=(A*k-R*L-C*M)*oe,t[15]=(d*L-g*k+b*M)*oe,t):null}function zH(t){const e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],g=t[10],b=t[11],w=t[12],R=t[13],A=t[14],C=t[15],I=e*a-n*i,M=e*l-r*i,k=n*l-r*a,P=h*R-d*w,L=h*A-g*w,O=d*A-g*R,H=e*O-n*L+r*P,Y=i*O-a*L+l*P,J=h*k-d*M+g*I,K=w*k-R*M+A*I;return u*H-s*Y+C*J-b*K}function Ka(t,e,n){const r=e[0],s=e[1],i=e[2],a=e[3],l=e[4],u=e[5],h=e[6],d=e[7],g=e[8],b=e[9],w=e[10],R=e[11],A=e[12],C=e[13],I=e[14],M=e[15];let k=n[0],P=n[1],L=n[2],O=n[3];return t[0]=k*r+P*l+L*g+O*A,t[1]=k*s+P*u+L*b+O*C,t[2]=k*i+P*h+L*w+O*I,t[3]=k*a+P*d+L*R+O*M,k=n[4],P=n[5],L=n[6],O=n[7],t[4]=k*r+P*l+L*g+O*A,t[5]=k*s+P*u+L*b+O*C,t[6]=k*i+P*h+L*w+O*I,t[7]=k*a+P*d+L*R+O*M,k=n[8],P=n[9],L=n[10],O=n[11],t[8]=k*r+P*l+L*g+O*A,t[9]=k*s+P*u+L*b+O*C,t[10]=k*i+P*h+L*w+O*I,t[11]=k*a+P*d+L*R+O*M,k=n[12],P=n[13],L=n[14],O=n[15],t[12]=k*r+P*l+L*g+O*A,t[13]=k*s+P*u+L*b+O*C,t[14]=k*i+P*h+L*w+O*I,t[15]=k*a+P*d+L*R+O*M,t}function pg(t,e,n){const r=n[0],s=n[1],i=n[2];let a,l,u,h,d,g,b,w,R,A,C,I;return e===t?(t[12]=e[0]*r+e[4]*s+e[8]*i+e[12],t[13]=e[1]*r+e[5]*s+e[9]*i+e[13],t[14]=e[2]*r+e[6]*s+e[10]*i+e[14],t[15]=e[3]*r+e[7]*s+e[11]*i+e[15]):(a=e[0],l=e[1],u=e[2],h=e[3],d=e[4],g=e[5],b=e[6],w=e[7],R=e[8],A=e[9],C=e[10],I=e[11],t[0]=a,t[1]=l,t[2]=u,t[3]=h,t[4]=d,t[5]=g,t[6]=b,t[7]=w,t[8]=R,t[9]=A,t[10]=C,t[11]=I,t[12]=a*r+d*s+R*i+e[12],t[13]=l*r+g*s+A*i+e[13],t[14]=u*r+b*s+C*i+e[14],t[15]=h*r+w*s+I*i+e[15]),t}function $0(t,e,n){const r=n[0],s=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function VH(t,e,n,r){let s=r[0],i=r[1],a=r[2],l=Math.sqrt(s*s+i*i+a*a),u,h,d,g,b,w,R,A,C,I,M,k,P,L,O,H,Y,J,K,Z,ae,_e,oe,Re;return l<Op?null:(l=1/l,s*=l,i*=l,a*=l,h=Math.sin(n),u=Math.cos(n),d=1-u,g=e[0],b=e[1],w=e[2],R=e[3],A=e[4],C=e[5],I=e[6],M=e[7],k=e[8],P=e[9],L=e[10],O=e[11],H=s*s*d+u,Y=i*s*d+a*h,J=a*s*d-i*h,K=s*i*d-a*h,Z=i*i*d+u,ae=a*i*d+s*h,_e=s*a*d+i*h,oe=i*a*d-s*h,Re=a*a*d+u,t[0]=g*H+A*Y+k*J,t[1]=b*H+C*Y+P*J,t[2]=w*H+I*Y+L*J,t[3]=R*H+M*Y+O*J,t[4]=g*K+A*Z+k*ae,t[5]=b*K+C*Z+P*ae,t[6]=w*K+I*Z+L*ae,t[7]=R*K+M*Z+O*ae,t[8]=g*_e+A*oe+k*Re,t[9]=b*_e+C*oe+P*Re,t[10]=w*_e+I*oe+L*Re,t[11]=R*_e+M*oe+O*Re,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function hI(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*s+h*r,t[5]=a*s+d*r,t[6]=l*s+g*r,t[7]=u*s+b*r,t[8]=h*s-i*r,t[9]=d*s-a*r,t[10]=g*s-l*r,t[11]=b*s-u*r,t}function $H(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[0],a=e[1],l=e[2],u=e[3],h=e[8],d=e[9],g=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s-h*r,t[1]=a*s-d*r,t[2]=l*s-g*r,t[3]=u*s-b*r,t[8]=i*r+h*s,t[9]=a*r+d*s,t[10]=l*r+g*s,t[11]=u*r+b*s,t}function dI(t,e,n){const r=Math.sin(n),s=Math.cos(n),i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],d=e[5],g=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s+h*r,t[1]=a*s+d*r,t[2]=l*s+g*r,t[3]=u*s+b*r,t[4]=h*s-i*r,t[5]=d*s-a*r,t[6]=g*s-l*r,t[7]=b*s-u*r,t}function HH(t,e){const n=e[0],r=e[1],s=e[2],i=e[3],a=n+n,l=r+r,u=s+s,h=n*a,d=r*a,g=r*l,b=s*a,w=s*l,R=s*u,A=i*a,C=i*l,I=i*u;return t[0]=1-g-R,t[1]=d+I,t[2]=b-C,t[3]=0,t[4]=d-I,t[5]=1-h-R,t[6]=w+A,t[7]=0,t[8]=b+C,t[9]=w-A,t[10]=1-h-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function WH(t,e,n,r,s,i,a){const l=1/(n-e),u=1/(s-r),h=1/(i-a);return t[0]=i*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(s+r)*u,t[10]=(a+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*h,t[15]=0,t}function qH(t,e,n,r,s){const i=1/Math.tan(e/2);if(t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0){const a=1/(r-s);t[10]=(s+r)*a,t[14]=2*s*r*a}else t[10]=-1,t[14]=-2*r;return t}const XH=qH;function YH(t,e,n,r,s,i,a){const l=1/(e-n),u=1/(r-s),h=1/(i-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*l,t[13]=(s+r)*u,t[14]=(a+i)*h,t[15]=1,t}const KH=YH;function ZH(t,e,n,r){let s,i,a,l,u,h,d,g,b,w;const R=e[0],A=e[1],C=e[2],I=r[0],M=r[1],k=r[2],P=n[0],L=n[1],O=n[2];return Math.abs(R-P)<Op&&Math.abs(A-L)<Op&&Math.abs(C-O)<Op?LH(t):(g=R-P,b=A-L,w=C-O,s=1/Math.sqrt(g*g+b*b+w*w),g*=s,b*=s,w*=s,i=M*w-k*b,a=k*g-I*w,l=I*b-M*g,s=Math.sqrt(i*i+a*a+l*l),s?(s=1/s,i*=s,a*=s,l*=s):(i=0,a=0,l=0),u=b*l-w*a,h=w*i-g*l,d=g*a-b*i,s=Math.sqrt(u*u+h*h+d*d),s?(s=1/s,u*=s,h*=s,d*=s):(u=0,h=0,d=0),t[0]=i,t[1]=u,t[2]=g,t[3]=0,t[4]=a,t[5]=h,t[6]=b,t[7]=0,t[8]=l,t[9]=d,t[10]=w,t[11]=0,t[12]=-(i*R+a*A+l*C),t[13]=-(u*R+h*A+d*C),t[14]=-(g*R+b*A+w*C),t[15]=1,t)}function QH(){const t=new Gc(4);return Gc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function GH(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Eh(t,e,n){const r=e[0],s=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*a,t}(function(){const t=QH();return function(e,n,r,s,i,a){let l,u;for(n||(n=4),r||(r=0),s?u=Math.min(s*n+r,e.length):u=e.length,l=r;l<u;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],i(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();var r_;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(r_||(r_={}));const JH=45*Math.PI/180,eW=1,xx=.1,vx=500,tW=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class vi extends BH{static get IDENTITY(){return rW()}static get ZERO(){return nW()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return r_}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,s,i,a,l,u,h,d,g,b,w,R,A,C){return this[0]=e,this[1]=n,this[2]=r,this[3]=s,this[4]=i,this[5]=a,this[6]=l,this[7]=u,this[8]=h,this[9]=d,this[10]=g,this[11]=b,this[12]=w,this[13]=R,this[14]=A,this[15]=C,this.check()}setRowMajor(e,n,r,s,i,a,l,u,h,d,g,b,w,R,A,C){return this[0]=e,this[1]=i,this[2]=h,this[3]=w,this[4]=n,this[5]=a,this[6]=d,this[7]=R,this[8]=r,this[9]=l,this[10]=g,this[11]=A,this[12]=s,this[13]=u,this[14]=b,this[15]=C,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(tW)}fromObject(e){return this.check()}fromQuaternion(e){return HH(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:s,top:i,near:a=xx,far:l=vx}=e;return l===1/0?sW(this,n,r,s,i,a):WH(this,n,r,s,i,a,l),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:s=[0,1,0]}=e;return ZH(this,n,r,s),this.check()}ortho(e){const{left:n,right:r,bottom:s,top:i,near:a=xx,far:l=vx}=e;return KH(this,n,r,s,i,a,l),this.check()}orthographic(e){const{fovy:n=JH,aspect:r=eW,focalDistance:s=1,near:i=xx,far:a=vx}=e;sA(n);const l=n/2,u=s*Math.tan(l),h=u*r;return this.ortho({left:-h,right:h,bottom:-u,top:u,near:i,far:a})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:s=.1,far:i=500}=e;return sA(n),XH(this,n,r,s,i),this.check()}determinant(){return zH(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*s,e[5]=this[5]*i,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*s,e[9]=this[9]*i,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),s=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*s,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=this[4]*s,e[4]=this[5]*i,e[5]=this[6]*a,e[6]=this[8]*s,e[7]=this[9]*i,e[8]=this[10]*a,e}transpose(){return UH(this,this),this.check()}invert(){return n_(this,this),this.check()}multiplyLeft(e){return Ka(this,e,this),this.check()}multiplyRight(e){return Ka(this,this,e),this.check()}rotateX(e){return hI(this,this,e),this.check()}rotateY(e){return $H(this,this,e),this.check()}rotateZ(e){return dI(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return VH(this,this,e,n),this.check()}scale(e){return $0(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return pg(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Eh(n||[-0,-0,-0,-0],e,this),yx(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let s;switch(r){case 2:s=SH(n||[-0,-0],e,this);break;case 3:s=fI(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return yx(s,e.length),s}transformAsVector(e,n){let r;switch(e.length){case 2:r=TH(n||[-0,-0],e,this);break;case 3:r=uI(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return yx(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let up,fp;function nW(){return up||(up=new vi([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(up)),up}function rW(){return fp||(fp=new vi,Object.freeze(fp)),fp}function sA(t){if(t>Math.PI*2)throw Error("expected radians")}function sW(t,e,n,r,s,i){const a=2*i/(n-e),l=2*i/(s-r),u=(n+e)/(n-e),h=(s+r)/(s-r),d=-1,g=-1,b=-2*i;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=g,t[12]=0,t[13]=0,t[14]=b,t[15]=0,t}function pI(t,e=[],n=0){const r=Math.fround(t),s=t-r;return e[n]=r,e[n+1]=s,e}function iW(t){return t-Math.fround(t)}function oW(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const s=n*4+r;pI(t[r*4+n],e,s*2)}return e}const aW=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,lW={name:"fp32",vs:aW},cW=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,uW={ONE:1},fW={name:"fp64arithmetic",vs:cW,defaultUniforms:uW,uniformTypes:{ONE:"f32"},fp64ify:pI,fp64LowPart:iW,fp64ifyMatrix4:oW},hW=[0,1,1,1],dW=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,pW=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,iA={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:hW},vs:dW,fs:pW,getUniforms:gW};function gW(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const r=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=r}if(t.highlightColor){const r=Array.from(t.highlightColor,s=>s/255);Number.isFinite(r[3])||(r[3]=1),n.highlightColor=r}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}const oA=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,mW={name:"layer",vs:oA,fs:oA,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},yW=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,gI="#define SMOOTH_EDGE_RADIUS 0.5",bW=`${gI}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,xW=`${gI}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,mI={name:"geometry",source:yW,vs:bW,fs:xW},vW=25;var Yn;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(Yn||(Yn={}));var nr;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(nr||(nr={}));var St;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(St||(St={}));const _W="compute",wW="auto",s_="manipulation",Pp="none",i_="pan-x",o_="pan-y";function SW(t){if(t.includes(Pp))return Pp;const e=t.includes(i_),n=t.includes(o_);return e&&n?Pp:e||n?e?i_:o_:t.includes(s_)?s_:wW}class TW{constructor(e,n){this.actions="",this.manager=e,this.set(n)}set(e){e===_W&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const n of this.manager.recognizers)n.options.enable&&(e=e.concat(n.getTouchAction()));return SW(e.join(" "))}}function gg(t){return t.trim().split(/\s+/g)}function _x(t,e,n){if(t)for(const r of gg(e))t.addEventListener(r,n,!1)}function wx(t,e,n){if(t)for(const r of gg(e))t.removeEventListener(r,n,!1)}function aA(t){return(t.ownerDocument||t).defaultView}function EW(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function yI(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let n=0,r=0,s=0;for(;s<e;)n+=t[s].clientX,r+=t[s].clientY,s++;return{x:Math.round(n/e),y:Math.round(r/e)}}function lA(t){const e=[];let n=0;for(;n<t.pointers.length;)e[n]={clientX:Math.round(t.pointers[n].clientX),clientY:Math.round(t.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:e,center:yI(e),deltaX:t.deltaX,deltaY:t.deltaY}}function bI(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function cA(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function AW(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)*180/Math.PI}function uA(t,e){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.atan2(r,n)*180/Math.PI}function xI(t,e){return t===e?nr.None:Math.abs(t)>=Math.abs(e)?t<0?nr.Left:nr.Right:e<0?nr.Up:nr.Down}function RW(t,e){const n=e.center;let r=t.offsetDelta,s=t.prevDelta;const i=t.prevInput;return(e.eventType===Yn.Start||(i==null?void 0:i.eventType)===Yn.End)&&(s=t.prevDelta={x:(i==null?void 0:i.deltaX)||0,y:(i==null?void 0:i.deltaY)||0},r=t.offsetDelta={x:n.x,y:n.y}),{deltaX:s.x+(n.x-r.x),deltaY:s.y+(n.y-r.y)}}function vI(t,e,n){return{x:e/t||0,y:n/t||0}}function CW(t,e){return cA(e[0],e[1])/cA(t[0],t[1])}function kW(t,e){return uA(e[1],e[0])-uA(t[1],t[0])}function NW(t,e){const n=t.lastInterval||e,r=e.timeStamp-n.timeStamp;let s,i,a,l;if(e.eventType!==Yn.Cancel&&(r>vW||n.velocity===void 0)){const u=e.deltaX-n.deltaX,h=e.deltaY-n.deltaY,d=vI(r,u,h);i=d.x,a=d.y,s=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,l=xI(u,h),t.lastInterval=e}else s=n.velocity,i=n.velocityX,a=n.velocityY,l=n.direction;e.velocity=s,e.velocityX=i,e.velocityY=a,e.direction=l}function MW(t,e){const{session:n}=t,{pointers:r}=e,{length:s}=r;n.firstInput||(n.firstInput=lA(e)),s>1&&!n.firstMultiple?n.firstMultiple=lA(e):s===1&&(n.firstMultiple=!1);const{firstInput:i,firstMultiple:a}=n,l=a?a.center:i.center,u=e.center=yI(r);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=AW(l,u),e.distance=bI(l,u);const{deltaX:h,deltaY:d}=RW(n,e);e.deltaX=h,e.deltaY=d,e.offsetDirection=xI(e.deltaX,e.deltaY);const g=vI(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=g.x,e.overallVelocityY=g.y,e.overallVelocity=Math.abs(g.x)>Math.abs(g.y)?g.x:g.y,e.scale=a?CW(a.pointers,r):1,e.rotation=a?kW(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;let b=t.element;return EW(e.srcEvent.target,b)&&(b=e.srcEvent.target),e.target=b,NW(n,e),e}function IW(t,e,n){const r=n.pointers.length,s=n.changedPointers.length,i=e&Yn.Start&&r-s===0,a=e&(Yn.End|Yn.Cancel)&&r-s===0;n.isFirst=!!i,n.isFinal=!!a,i&&(t.session={}),n.eventType=e;const l=MW(t,n);t.emit("hammer.input",l),t.recognize(l),t.session.prevInput=l}let OW=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,n){IW(this.manager,e,n)}init(){_x(this.element,this.evEl,this.domHandler),_x(this.target,this.evTarget,this.domHandler),_x(aA(this.element),this.evWin,this.domHandler)}destroy(){wx(this.element,this.evEl,this.domHandler),wx(this.target,this.evTarget,this.domHandler),wx(aA(this.element),this.evWin,this.domHandler)}};const PW={pointerdown:Yn.Start,pointermove:Yn.Move,pointerup:Yn.End,pointercancel:Yn.Cancel,pointerout:Yn.Cancel},DW="pointerdown",jW="pointermove pointerup pointercancel";class FW extends OW{constructor(e){super(e),this.evEl=DW,this.evWin=jW,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:n}=this;let r=!1;const s=PW[e.type],i=e.pointerType,a=i==="touch";let l=n.findIndex(u=>u.pointerId===e.pointerId);s&Yn.Start&&(e.buttons||a)?l<0&&(n.push(e),l=n.length-1):s&(Yn.End|Yn.Cancel)&&(r=!0),!(l<0)&&(n[l]=e,this.callback(s,{pointers:n,changedPointers:[e],eventType:s,pointerType:i,srcEvent:e}),r&&n.splice(l,1))}}const BW=["","webkit","Moz","MS","ms","o"];function LW(t,e){const n=e[0].toUpperCase()+e.slice(1);for(const r of BW){const s=r?r+n:e;if(s in t)return s}}const UW=1,fA=2,hA={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class zW{constructor(e,n){this.options={...hA,...n,cssProps:{...hA.cssProps,...n.cssProps},inputTarget:n.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new FW(this),this.touchAction=new TW(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?fA:UW}recognize(e){const{session:n}=this;if(n.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let r;const{recognizers:s}=this;let{curRecognizer:i}=n;(!i||i&&i.state&St.Recognized)&&(i=n.curRecognizer=null);let a=0;for(;a<s.length;)r=s[a],n.stopped!==fA&&(!i||r===i||r.canRecognizeWith(i))?r.recognize(e):r.reset(),!i&&r.state&(St.Began|St.Changed|St.Ended)&&(i=n.curRecognizer=r),a++}get(e){const{recognizers:n}=this;for(let r=0;r<n.length;r++)if(n[r].options.event===e)return n[r];return null}add(e){if(Array.isArray(e)){for(const r of e)this.add(r);return this}const n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const r of e)this.remove(r);return this}const n=typeof e=="string"?this.get(e):e;if(n){const{recognizers:r}=this,s=r.indexOf(n);s!==-1&&(r.splice(s,1),this.touchAction.update())}return this}on(e,n){if(!e||!n)return;const{handlers:r}=this;for(const s of gg(e))r[s]=r[s]||[],r[s].push(n)}off(e,n){if(!e)return;const{handlers:r}=this;for(const s of gg(e))n?r[s]&&r[s].splice(r[s].indexOf(n),1):delete r[s]}emit(e,n){const r=this.handlers[e]&&this.handlers[e].slice();if(!r||!r.length)return;const s=n;s.type=e,s.preventDefault=function(){n.srcEvent.preventDefault()};let i=0;for(;i<r.length;)r[i](s),i++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:n}=this;if(n){for(const[r,s]of Object.entries(this.options.cssProps)){const i=LW(n.style,r);e?(this.oldCssProps[i]=n.style[i],n.style[i]=s):n.style[i]=this.oldCssProps[i]||""}e||(this.oldCssProps={})}}}let VW=1;function $W(){return VW++}function dA(t){return t&St.Cancelled?"cancel":t&St.Ended?"end":t&St.Changed?"move":t&St.Began?"start":""}class _I{constructor(e){this.options=e,this.id=$W(),this.state=St.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const s of e)this.recognizeWith(s);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{simultaneous:r}=this;return r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const r of e)this.dropRecognizeWith(r);return this}let n;return typeof e=="string"?n=this.manager.get(e):n=e,n&&delete this.simultaneous[n.id],this}requireFailure(e){if(Array.isArray(e)){for(const s of e)this.requireFailure(s);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{requireFail:r}=this;return r.indexOf(n)===-1&&(r.push(n),n.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const r of e)this.dropRequireFailure(r);return this}let n;if(typeof e=="string"?n=this.manager.get(e):n=e,n){const r=this.requireFail.indexOf(n);r>-1&&this.requireFail.splice(r,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:n}=this;n<St.Ended&&this.manager.emit(this.options.event+dA(n),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),n>=St.Ended&&this.manager.emit(this.options.event+dA(n),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=St.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(St.Failed|St.Possible)))return!1;e++}return!0}recognize(e){const n={...e};if(!this.options.enable){this.reset(),this.state=St.Failed;return}this.state&(St.Recognized|St.Cancelled|St.Failed)&&(this.state=St.Possible),this.state=this.process(n),this.state&(St.Began|St.Changed|St.Ended|St.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class wI extends _I{attrTest(e){const n=this.options.pointers;return n===0||e.pointers.length===n}process(e){const{state:n}=this,{eventType:r}=e,s=n&(St.Began|St.Changed),i=this.attrTest(e);return s&&(r&Yn.Cancel||!i)?n|St.Cancelled:s||i?r&Yn.End?n|St.Ended:n&St.Began?n|St.Changed:St.Began:St.Failed}}class pA extends _I{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[s_]}process(e){const{options:n}=this,r=e.pointers.length===n.pointers,s=e.distance<n.threshold,i=e.deltaTime<n.time;if(this.reset(),e.eventType&Yn.Start&&this.count===0)return this.failTimeout();if(s&&i&&r){if(e.eventType!==Yn.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<n.interval:!0,l=!this.pCenter||bI(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!l||!a?this.count=1:this.count+=1,this._input=e,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=St.Recognized,this.tryEmit(this._input)},n.interval),St.Began):St.Recognized}return St.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=St.Failed},this.options.interval),St.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===St.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const HW=["","start","move","end","cancel","up","down","left","right"];class gA extends wI{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:nr.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,n=[];return e&nr.Horizontal&&n.push(o_),e&nr.Vertical&&n.push(i_),n}getEventNames(){return HW.map(e=>this.options.event+e)}directionTest(e){const{options:n}=this;let r=!0,{distance:s}=e,{direction:i}=e;const a=e.deltaX,l=e.deltaY;return i&n.direction||(n.direction&nr.Horizontal?(i=a===0?nr.None:a<0?nr.Left:nr.Right,r=a!==this.pX,s=Math.abs(e.deltaX)):(i=l===0?nr.None:l<0?nr.Up:nr.Down,r=l!==this.pY,s=Math.abs(e.deltaY))),e.direction=i,r&&s>n.threshold&&!!(i&n.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&St.Began)||!(this.state&St.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const n=nr[e.direction].toLowerCase();n&&(e.additionalEvent=this.options.event+n),super.emit(e)}}const WW=["","start","move","end","cancel","in","out"];class qW extends wI{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[Pp]}getEventNames(){return WW.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&St.Began))}emit(e){if(e.scale!==1){const n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}super.emit(e)}}class dm{constructor(e,n,r){this.element=e,this.callback=n,this.options=r}}const XW=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",YW=XW.indexOf("firefox")!==-1,mA=4.000244140625,KW=40,ZW=.25;class QW extends dm{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=s=>{if(!this.options.enable)return;let i=s.deltaY;globalThis.WheelEvent&&(YW&&s.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(i/=globalThis.devicePixelRatio),s.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(i*=KW)),i!==0&&i%mA===0&&(i=Math.floor(i/mA)),s.shiftKey&&i&&(i=i*ZW),this.callback({type:"wheel",center:{x:s.clientX,y:s.clientY},delta:-i,srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,n){e==="wheel"&&(this.options.enable=n)}}const yA=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class GW extends dm{constructor(e,n,r){super(e,n,{enable:!0,...r}),this.handleEvent=i=>{this.handleOverEvent(i),this.handleOutEvent(i),this.handleEnterEvent(i),this.handleLeaveEvent(i),this.handleMoveEvent(i)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,yA.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){yA.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){switch(e){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const bA=["keydown","keyup"];class JW extends dm{constructor(e,n,r){super(e,n,{enable:!0,tabIndex:0,...r}),this.handleEvent=s=>{const i=s.target||s.srcElement;i.tagName==="INPUT"&&i.type==="text"||i.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:"keydown",srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:"keyup",srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",bA.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){bA.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e==="keydown"&&(this.enableDownEvent=n),e==="keyup"&&(this.enableUpEvent=n)}}class eq extends dm{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e==="contextmenu"&&(this.options.enable=n)}}const xA=1,a_=2,vA=4,tq={pointerdown:xA,pointermove:a_,pointerup:vA,mousedown:xA,mousemove:a_,mouseup:vA},nq=0,rq=1,sq=2,iq=1,oq=2,aq=4;function lq(t){const e=tq[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let s=!1,i=!1,a=!1;return e===a_?(s=!!(n&iq),i=!!(n&aq),a=!!(n&oq)):(s=r===nq,i=r===rq,a=r===sq),{leftButton:s,middleButton:i,rightButton:a}}function cq(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),s=r.width/e.offsetWidth||1,i=r.height/e.offsetHeight||1,a={x:(n.x-r.left-e.clientLeft)/s,y:(n.y-r.top-e.clientTop)/i};return{center:n,offsetCenter:a}}const uq={srcElement:"root",priority:0};class fq{constructor(e,n){this.handleEvent=r=>{if(this.isEmpty())return;const s=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==s.rootElement;){if(this._emit(s,i),s.handled)return;i=i.parentNode}this._emit(s,"root")},this.eventManager=e,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,s=!1,i=!1){const{handlers:a,handlersByElement:l}=this,u={...uq,...r};let h=l.get(u.srcElement);h||(h=[],l.set(u.srcElement,h));const d={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};s&&(d.once=!0),i&&(d.passive=!0),a.push(d),this._active=this._active||!d.passive;let g=h.length-1;for(;g>=0&&!(h[g].priority>=d.priority);)g--;h.splice(g+1,0,d)}remove(e,n){const{handlers:r,handlersByElement:s}=this;for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.type===e&&a.handler===n){r.splice(i,1);const l=s.get(a.srcElement);l.splice(l.indexOf(a),1),l.length===0&&s.delete(a.srcElement)}}this._active=r.some(i=>!i.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let s=!1;const i=()=>{e.handled=!0},a=()=>{e.handled=!0,s=!0},l=[];for(let u=0;u<r.length;u++){const{type:h,handler:d,once:g}=r[u];if(d({...e,type:h,stopPropagation:i,stopImmediatePropagation:a}),g&&l.push(r[u]),s)break}for(let u=0;u<l.length;u++){const{type:h,handler:d}=l[u];this.remove(h,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...lq(e),...cq(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function hq(t){if("recognizer"in t)return t;let e;const n=Array.isArray(t)?[...t]:[t];if(typeof n[0]=="function"){const r=n.shift(),s=n.shift()||{};e=new r(s)}else e=n.shift();return{recognizer:e,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class dq{constructor(e=null,n={}){if(this._onBasicInput=r=>{this.manager.emit(r.srcEvent.type,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=e,!!e){this.manager=new zW(e,this.options);for(const r of this.options.recognizers){const{recognizer:s,recognizeWith:i,requireFailure:a}=hq(r);this.manager.add(s),i&&s.recognizeWith(i),a&&s.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new QW(e,this._onOtherEvent,{enable:!1}),this.moveInput=new GW(e,this._onOtherEvent,{enable:!1}),this.keyInput=new JW(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new eq(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){var i,a,l,u;const{manager:r}=this;if(!r)return;const s=r.get(e);s&&(s.set({enable:n}),r.touchAction.update()),(i=this.wheelInput)==null||i.enableEventType(e,n),(a=this.moveInput)==null||a.enableEventType(e,n),(l=this.keyInput)==null||l.enableEventType(e,n),(u=this.contextmenuInput)==null||u.enableEventType(e,n)}_addEventHandler(e,n,r,s,i){if(typeof e!="string"){r=n;for(const[h,d]of Object.entries(e))this._addEventHandler(h,d,r,s,i);return}const{manager:a,events:l}=this;if(!a)return;let u=l.get(e);if(!u){const h=this._getRecognizerName(e)||e;u=new fq(this,h),l.set(e,u),a&&a.on(e,u.handleEvent)}u.add(e,n,r,s,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const[i,a]of Object.entries(e))this._removeEventHandler(i,a);return}const{events:r}=this,s=r.get(e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:i}=s;let a=!1;for(const l of r.values())if(l.recognizerName===i&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(i,!1)}}_getRecognizerName(e){var n;return(n=this.manager.recognizers.find(r=>r.getEventNames().includes(e)))==null?void 0:n.options.event}}const Jt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Jt,"IDENTITY",{get:()=>(Sn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ts={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},hl={common:0,meters:1,pixels:2},l_={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},_A={multipan:[gA,{threshold:10,direction:nr.Vertical,pointers:2}],pinch:[qW,{},null,["multipan"]],pan:[gA,{threshold:1},["pinch"],["multipan"]],dblclick:[pA,{event:"dblclick",taps:2}],click:[pA,{event:"click"},null,["dblclick"]]};function pq(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Ah(t){let e={},n;return r=>{for(const s in r)if(!pq(r[s],e[s])){n=t(r),e=r;break}return n}}const wA=[0,0,0,0],gq=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],SI=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],mq=[0,0,0],TI=[0,0,0],yq=Ah(vq);function EI(t,e,n=TI){n.length<3&&(n=[n[0],n[1],0]);let r=n,s,i=!0;switch(e===Jt.LNGLAT_OFFSETS||e===Jt.METER_OFFSETS?s=n:s=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ts.WEB_MERCATOR:(e===Jt.LNGLAT||e===Jt.CARTESIAN)&&(s=[0,0,0],i=!1);break;case Ts.WEB_MERCATOR_AUTO_OFFSET:e===Jt.LNGLAT?r=s:e===Jt.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],s=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Ts.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Ts.GLOBE:i=!1,s=null;break;default:i=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:r,offsetMode:i}}function bq(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:s}=t;let{viewMatrix:i,viewProjectionMatrix:a}=t,l=wA,u=wA,h=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:g,offsetMode:b}=EI(t,e,n);return b&&(u=t.projectPosition(d||g),h=[h[0]-u[0],h[1]-u[1],h[2]-u[2]],u[3]=1,l=Eh([],u,a),i=r||i,a=Ka([],s,i),a=Ka([],a,gq)),{viewMatrix:i,viewProjectionMatrix:a,projectionCenter:l,originCommon:u,cameraPosCommon:h,shaderCoordinateOrigin:g,geospatialOrigin:d}}function xq({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=Jt.DEFAULT,coordinateOrigin:s=TI,autoWrapLongitude:i=!1}){r===Jt.DEFAULT&&(r=t.isGeospatial?Jt.LNGLAT:Jt.CARTESIAN);const a=yq({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:s});return a.wrapLongitude=i,a.modelMatrix=n||SI,a}function vq({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:s,viewProjectionMatrix:i,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:h}=bq(t,n,r),d=t.getDistanceScales(),g=[t.width*e,t.height*e],b=Eh([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,w={coordinateSystem:n,projectionMode:t.projectionMode,coordinateOrigin:u,commonOrigin:a.slice(0,3),center:s,pseudoMeters:!!t._pseudoMeters,viewportSize:g,devicePixelRatio:e,focalDistance:b,commonUnitsPerMeter:d.unitsPerMeter,commonUnitsPerWorldUnit:d.unitsPerMeter,commonUnitsPerWorldUnit2:mq,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:i,modelMatrix:SI,cameraPosition:l};if(h){const R=t.getDistanceScales(h);switch(n){case Jt.METER_OFFSETS:w.commonUnitsPerWorldUnit=R.unitsPerMeter,w.commonUnitsPerWorldUnit2=R.unitsPerMeter2;break;case Jt.LNGLAT:case Jt.LNGLAT_OFFSETS:t._pseudoMeters||(w.commonUnitsPerMeter=R.unitsPerMeter),w.commonUnitsPerWorldUnit=R.unitsPerDegree,w.commonUnitsPerWorldUnit2=R.unitsPerDegree2;break;case Jt.CARTESIAN:w.commonUnitsPerWorldUnit=[1,1,R.unitsPerMeter[2]],w.commonUnitsPerWorldUnit2=[0,0,R.unitsPerMeter2[2]];break}}return w}const _q=Object.keys(Jt).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${Jt[t]};`).join(""),wq=Object.keys(Ts).map(t=>`const PROJECTION_MODE_${t}: i32 = ${Ts[t]};`).join(""),Sq=Object.keys(hl).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${hl[t]};`).join(""),Tq=`${_q}
${wq}
${Sq}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,Eq=`${Tq}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,Aq=Object.keys(Jt).map(t=>`const int COORDINATE_SYSTEM_${t} = ${Jt[t]};`).join(""),Rq=Object.keys(Ts).map(t=>`const int PROJECTION_MODE_${t} = ${Ts[t]};`).join(""),Cq=Object.keys(hl).map(t=>`const int UNIT_${t.toUpperCase()} = ${hl[t]};`).join(""),kq=`${Aq}
${Rq}
${Cq}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,Nq={};function Mq(t=Nq){return"viewport"in t?xq(t):{}}const H0={name:"project",dependencies:[lW,mI],source:Eq,vs:kq,getUniforms:Mq,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},Iq=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,Oq=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,AI={name:"project32",dependencies:[H0],source:Iq,vs:Oq};function Pq(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Nc(t,e){const n=Eh([],e,t);return GH(n,n,1/n[3]),n}function SA(t,e){const n=t%e;return n<0?e+n:n}function c_(t,e,n){return t<e?e:t>n?n:t}function Dq(t){return Math.log(t)*Math.LOG2E}const W0=Math.log2||Dq;function Yi(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const qs=Math.PI,RI=qs/4,Rs=qs/180,u_=180/qs,Jc=512,mg=4003e4,hp=85.051129,jq=1.5;function Fq(t){return W0(t)}function yg(t){const[e,n]=t;Yi(Number.isFinite(e)),Yi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Rs,s=n*Rs,i=Jc*(r+qs)/(2*qs),a=Jc*(qs+Math.log(Math.tan(RI+s*.5)))/(2*qs);return[i,a]}function eu(t){const[e,n]=t,r=e/Jc*(2*qs)-qs,s=2*(Math.atan(Math.exp(n/Jc*(2*qs)-qs))-RI);return[r*u_,s*u_]}function Bq(t){const{latitude:e}=t;Yi(Number.isFinite(e));const n=Math.cos(e*Rs);return Fq(mg*n)-9}function Sx(t){const e=Math.cos(t*Rs);return Jc/mg/e}function f_(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Yi(Number.isFinite(e)&&Number.isFinite(n));const s=Jc,i=Math.cos(e*Rs),a=s/360,l=a/i,u=s/mg/i,h={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[a,l,u],degreesPerUnit:[1/a,1/l,1/u]};if(r){const d=Rs*Math.tan(e*Rs)/i,g=a*d/2,b=s/mg*d,w=b/l*u;h.unitsPerDegree2=[0,g,b],h.unitsPerMeter2=[w,0,w]}return h}function CI(t,e){const[n,r,s]=t,[i,a,l]=e,{unitsPerMeter:u,unitsPerMeter2:h}=f_({longitude:n,latitude:r,highPrecision:!0}),d=yg(t);d[0]+=i*(u[0]+h[0]*a),d[1]+=a*(u[1]+h[1]*a);const g=eu(d),b=(s||0)+(l||0);return Number.isFinite(s)||Number.isFinite(l)?[g[0],g[1],b]:g}function Lq(t){const{height:e,pitch:n,bearing:r,altitude:s,scale:i,center:a}=t,l=Pq();pg(l,l,[0,0,-s]),hI(l,l,-n*Rs),dI(l,l,r*Rs);const u=i/e;return $0(l,l,[u,u,u]),a&&pg(l,l,CH([],a)),l}function Uq(t){const{width:e,height:n,altitude:r,pitch:s=0,offset:i,center:a,scale:l,nearZMultiplier:u=1,farZMultiplier:h=1}=t;let{fovy:d=bg(jq)}=t;r!==void 0&&(d=bg(r));const g=d*Rs,b=s*Rs,w=kI(d);let R=w;a&&(R+=a[2]*l/Math.cos(b)/n);const A=g*(.5+(i?i[1]:0)/n),C=Math.sin(A)*R/Math.sin(c_(Math.PI/2-b-A,.01,Math.PI-.01)),I=Math.sin(b)*C+R,M=R*10,k=Math.min(I*h,M);return{fov:g,aspect:e/n,focalDistance:w,near:u,far:k}}function bg(t){return 2*Math.atan(.5/t)*u_}function kI(t){return .5/Math.tan(.5*t*Rs)}function NI(t,e){const[n,r,s=0]=t;return Yi(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(s)),Nc(e,[n,r,s,1])}function q0(t,e,n=0){const[r,s,i]=t;if(Yi(Number.isFinite(r)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(i))return Nc(e,[r,s,i,1]);const a=Nc(e,[r,s,0,1]),l=Nc(e,[r,s,1,1]),u=a[2],h=l[2],d=u===h?0:((n||0)-u)/(h-u);return cI([],a,l,d)}function zq(t){const{width:e,height:n,bounds:r,minExtent:s=0,maxZoom:i=24,offset:a=[0,0]}=t,[[l,u],[h,d]]=r,g=Vq(t.padding),b=yg([l,c_(d,-hp,hp)]),w=yg([h,c_(u,-hp,hp)]),R=[Math.max(Math.abs(w[0]-b[0]),s),Math.max(Math.abs(w[1]-b[1]),s)],A=[e-g.left-g.right-Math.abs(a[0])*2,n-g.top-g.bottom-Math.abs(a[1])*2];Yi(A[0]>0&&A[1]>0);const C=A[0]/R[0],I=A[1]/R[1],M=(g.right-g.left)/2/C,k=(g.top-g.bottom)/2/I,P=[(w[0]+b[0])/2+M,(w[1]+b[1])/2+k],L=eu(P),O=Math.min(i,W0(Math.abs(Math.min(C,I))));return Yi(Number.isFinite(O)),{longitude:L[0],latitude:L[1],zoom:O}}function Vq(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Yi(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const TA=Math.PI/180;function $q(t,e=0){const{width:n,height:r,unproject:s}=t,i={targetZ:e},a=s([0,r],i),l=s([n,r],i);let u,h;const d=t.fovy?.5*t.fovy*TA:Math.atan(.5/t.altitude),g=(90-t.pitch)*TA;return d>g-.01?(u=EA(t,0,e),h=EA(t,n,e)):(u=s([0,0],i),h=s([n,0],i)),[a,l,h,u]}function EA(t,e,n){const{pixelUnprojectionMatrix:r}=t,s=Nc(r,[e,0,1,1]),i=Nc(r,[e,t.height,1,1]),l=(n*t.distanceScales.unitsPerMeter[2]-s[2])/(i[2]-s[2]),u=cI([],s,i,l),h=eu(u);return h.push(n),h}const AA=512;function Hq(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:s,latitude:i,zoom:a,bearing:l=0}=t;(s<-180||s>180)&&(s=SA(s+180,360)-180),(l<-180||l>180)&&(l=SA(l+180,360)-180);const u=W0(n/AA);if(a<=u)a=u,i=0;else{const h=n/2/Math.pow(2,a),d=eu([0,h])[1];if(i<d)i=d;else{const g=eu([0,AA-h])[1];i>g&&(i=g)}}return{width:e,height:n,longitude:s,latitude:i,zoom:a,pitch:r,bearing:l}}const MI=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,Wq=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,qq=`
${MI}
${Wq}
`,Xq=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Yq=`
${MI}
${Xq}
`,Kq=Ah(eX),Zq=Ah(tX),Qq=[0,0,0,1],Gq=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Jq(t,e){const[n,r,s]=t,i=q0([n,r,s],e);return Number.isFinite(s)?i:[i[0],i[1],0]}function eX({viewport:t,center:e}){return new vi(t.viewProjectionMatrix).invert().transform(e)}function tX({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,s=t.isGeospatial?void 0:1,i=[[0,0,s],[t.width,0,s],[0,t.height,s],[t.width,t.height,s],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>Jq(a,r));for(const a of e){const l=a.clone().translate(new xi(t.center).negate()),u=i.map(d=>l.transform(d)),h=new vi().ortho({left:Math.min(...u.map(d=>d[0])),right:Math.max(...u.map(d=>d[0])),bottom:Math.min(...u.map(d=>d[1])),top:Math.max(...u.map(d=>d[1])),near:Math.min(...u.map(d=>-d[2])),far:Math.max(...u.map(d=>-d[2]))});n.push(h.multiplyRight(a))}return n}function nX(t){const{shadowEnabled:e=!0,project:n}=t;if(!e||!n||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const r=H0.getUniforms(n),s=Kq({viewport:n.viewport,center:r.center}),i=[],a=Zq({shadowMatrices:t.shadowMatrices,viewport:n.viewport}).slice();for(let u=0;u<t.shadowMatrices.length;u++){const h=a[u],d=h.clone().translate(new xi(n.viewport.center).negate());r.coordinateSystem===Jt.LNGLAT&&r.projectionMode===Ts.WEB_MERCATOR?(a[u]=d,i[u]=s):(a[u]=h.clone().multiplyRight(Gq),i[u]=d.transform(s))}const l={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||Qq,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let u=0;u<a.length;u++)l[`viewProjectionMatrix${u}`]=a[u],l[`projectCenter${u}`]=i[u];for(let u=0;u<2;u++)l[`shadow_uShadowMap${u}`]=t.shadowMaps&&t.shadowMaps[u]||t.dummyShadowMap;return l}const RA={name:"shadow",dependencies:[H0],vs:qq,fs:Yq,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:nX,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},II={...iA,defaultUniforms:{...iA.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},rX=[mI],sX=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],iX=[];function oX(t){const e=tg.getDefaultShaderAssembler();for(const r of rX)e.addDefaultModule(r);const n=t==="glsl"?sX:iX;for(const r of n)e.addShaderHook(r);return e}const aX=[255,255,255],lX=1;let cX=0;class uX{constructor(e={}){this.type="ambient";const{color:n=aX}=e,{intensity:r=lX}=e;this.id=e.id||`ambient-${cX++}`,this.color=n,this.intensity=r}}const fX=[255,255,255],hX=1,dX=[0,0,-1];let pX=0;class CA{constructor(e={}){this.type="directional";const{color:n=fX}=e,{intensity:r=hX}=e,{direction:s=dX}=e,{_shadow:i=!1}=e;this.id=e.id||`directional-${pX++}`,this.color=n,this.intensity=r,this.type="directional",this.direction=new xi(s).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}class gX{constructor(e,n={id:"pass"}){const{id:r}=n;this.id=r,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class X0 extends gX{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,r]=this.device.canvasContext.getDrawingBufferSize(),s=e.clearCanvas??!0,i=e.clearColor??(s?[0,0,0,0]:!1),a=s?1:!1,l=s?0:!1,u=e.colorMask??15,h={viewport:[0,0,n,r]};e.colorMask&&(h.colorMask=u),e.scissorRect&&(h.scissorRect=e.scissorRect);const d=this.device.beginRenderPass({framebuffer:e.target,parameters:h,clearColor:i,clearDepth:a,clearStencil:l});try{return this._drawLayers(d,e)}finally{d.end(),this.device.submit()}}_drawLayers(e,n){const{target:r,shaderModuleProps:s,viewports:i,views:a,onViewportActive:l,clearStack:u=!0}=n;n.pass=n.pass||"unknown",u&&(this._lastRenderIndex=-1);const h=[];for(const d of i){const g=a&&a[d.id];l==null||l(d);const b=this._getDrawLayerParams(d,n),w=d.subViewports||[d];for(const R of w){const A=this._drawLayersInViewport(e,{target:r,shaderModuleProps:s,viewport:R,view:g,pass:n.pass,layers:n.layers},b);h.push(A)}}return h}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:s=!1,layerFilter:i,cullRect:a,effects:l,shaderModuleProps:u},h=!1){var R;const d=[],g=OI(this._lastRenderIndex+1),b={layer:n[0],viewport:e,isPicking:s,renderPass:r,cullRect:a},w={};for(let A=0;A<n.length;A++){const C=n[A],I=this._shouldDrawLayer(C,b,i,w),M={shouldDrawLayer:I};I&&!h&&(M.shouldDrawLayer=!0,M.layerRenderIndex=g(C,I),M.shaderModuleProps=this._getShaderModuleProps(C,l,r,u),M.layerParameters={...(R=C.context.deck)==null?void 0:R.props.parameters,...this.getLayerParameters(C,A,e)}),d[A]=M}return d}_drawLayersInViewport(e,{layers:n,shaderModuleProps:r,pass:s,target:i,viewport:a,view:l},u){const h=mX(this.device,{shaderModuleProps:r,target:i,viewport:a});if(l&&l.props.clear){const g=l.props.clear===!0?{color:!0,depth:!0}:l.props.clear;this.device.beginRenderPass({framebuffer:i,parameters:{viewport:h,scissorRect:h},clearColor:g.color?[0,0,0,0]:!1,clearDepth:g.depth?1:!1}).end()}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:h});for(let g=0;g<n.length;g++){const b=n[g],w=u[g],{shouldDrawLayer:R}=w;if(R&&b.props.pickable&&d.pickableCount++,b.isComposite&&d.compositeCount++,b.isDrawable&&w.shouldDrawLayer){const{layerRenderIndex:A,shaderModuleProps:C,layerParameters:I}=w;d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,A),C.project&&(C.project.viewport=a),b.context.renderPass=e;try{b._drawLayer({renderPass:e,shaderModuleProps:C,uniforms:{layerIndex:A},parameters:I})}catch(M){b.raiseError(M,`drawing ${b} to ${s}`)}}}return d}shouldDrawLayer(e){return!0}getShaderModuleProps(e,n,r){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,s){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(r){const l=n.layer.id;if(l in s||(s[l]=r(n)),!s[l])return!1}return e.activateViewport(n.viewport),!0}_getShaderModuleProps(e,n,r,s){var u,h;const i=this.device.canvasContext.cssToDeviceRatio(),a=((u=e.internalState)==null?void 0:u.propsInTransition)||e.props,l={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:i,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(n)for(const d of n)kA(l,(h=d.getShaderModuleProps)==null?void 0:h.call(d,e,l));return kA(l,this.getShaderModuleProps(e,n,l),s)}}function OI(t=0,e={}){const n={},r=(s,i)=>{const a=s.props._offset,l=s.id,u=s.parent&&s.parent.id;let h;if(u&&!(u in e)&&r(s.parent,!1),u in n){const d=n[u]=n[u]||OI(e[u],e);h=d(s,i),n[l]=d}else Number.isFinite(a)?(h=a+(e[u]||0),n[l]=null):h=t;return i&&h>=t&&(t=h+1),e[l]=h,h};return r}function mX(t,{shaderModuleProps:e,target:n,viewport:r}){var u;const s=((u=e==null?void 0:e.project)==null?void 0:u.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,i]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:i,l=r;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}function kA(t,...e){for(const n of e)if(n)for(const r in n)t[r]?Object.assign(t[r],n[r]):t[r]=n[r];return t}class yX extends X0{constructor(e,n){super(e,n);const r=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),s=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[r],depthStencilAttachment:s})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const n=this.fbo,r=this.device.canvasContext.cssToDeviceRatio(),s=e.viewports[0],i=s.width*r,a=s.height*r,l=[1,1,1,1];(i!==n.width||a!==n.height)&&n.resize({width:i,height:a}),super.render({...e,clearColor:l,target:n,pass:"shadow"})}getLayerParameters(e,n,r){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,n,r){return{shadow:{project:r.project,drawToShadowMap:!0}}}}const bX={color:[255,255,255],intensity:1},NA=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],xX=[0,0,0,200/255];class PI{constructor(e={}){this.id="lighting-effect",this.shadowColor=xX,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:r}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),r._addDefaultShaderModule(RA),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:i}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:n,viewports:r,onViewportActive:s,views:i,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,n){const r=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},s={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},i=e.props.material;return{shadow:r,lighting:s,phongMaterial:i,gouraudMaterial:i}}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(RA))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new vi().lookAt({eye:new xi(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new yX(e);this.shadowPasses[n]=r}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new uX(bX),this.directionalLights.push(new CA(NA[0]),new CA(NA[1])))}}class vX{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:s,padding:i=0,copy:a=!1,initialize:l=!1,maxCount:u}){const h=s||e&&e.constructor||Float32Array,d=n*r+i;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new h(e.buffer,0,d)}let g=1/0;u&&(g=u*r+i);const b=this._allocate(h,d,l,g);return e&&a?b.set(e):l||b.fill(0,0,4),this._release(e),b}release(e){this._release(e)}_allocate(e,n,r,s){let i=Math.max(Math.ceil(n*this.opts.overAlloc),1);i>s&&(i=s);const a=this._pool,l=e.BYTES_PER_ELEMENT*i,u=a.findIndex(h=>h.byteLength>=l);if(u>=0){const h=new e(a.splice(u,1)[0],0,i);return r&&h.fill(0),h}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:s}=r,i=n.findIndex(a=>a.byteLength>=s);i<0?n.push(r):(i>0||n.length<this.opts.poolSize)&&n.splice(i,0,r),n.length>this.opts.poolSize&&n.shift()}}const ih=new vX;function Pf(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _X(t){return[t[12],t[13],t[14]]}function wX(t){return{left:cc(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:cc(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:cc(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:cc(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:cc(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:cc(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const MA=new xi;function cc(t,e,n,r){MA.set(t,e,n);const s=MA.len();return{distance:r/s,normal:new xi(-t/s,-e/s,-n/s)}}function SX(t){return t-Math.fround(t)}let vf;function Tx(t,e){const{size:n=1,startIndex:r=0}=e,s=e.endIndex!==void 0?e.endIndex:t.length,i=(s-r)/n;vf=ih.allocate(vf,i,{type:Float32Array,size:n*2});let a=r,l=0;for(;a<s;){for(let u=0;u<n;u++){const h=t[a++];vf[l+u]=h,vf[l+u+n]=SX(h)}l+=n*2}return vf.subarray(0,i*n*2)}function TX(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const EX=Math.PI/180,AX=Pf(),IA=[0,0,0],RX={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function CX({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:s,padding:i,near:a,far:l}){const u=t/e,h=n?new vi().orthographic({fovy:r,aspect:u,focalDistance:s,near:a,far:l}):new vi().perspective({fovy:r,aspect:u,near:a,far:l});if(i){const{left:d=0,right:g=0,top:b=0,bottom:w=0}=i,R=Ko((d+t-g)/2,0,t)-t/2,A=Ko((b+e-w)/2,0,e)-e/2;h[8]-=R*2/t,h[9]+=A*2/e}return h}class Rh{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||RX,this.focalDistance=e.focalDistance||1,this.position=e.position||IA,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ts.WEB_MERCATOR:Ts.WEB_MERCATOR_AUTO_OFFSET:Ts.IDENTITY}equals(e){return e instanceof Rh?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&sh(e.projectionMatrix,this.projectionMatrix)&&sh(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),s=NI(r,this.pixelProjectionMatrix),[i,a]=s,l=n?a:this.height-a;return e.length===2?[i,l]:[i,l,s[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[s,i,a]=e,l=n?i:this.height-i,u=r&&r*this.distanceScales.unitsPerMeter[2],h=q0([s,l,a],this.pixelUnprojectionMatrix,u),[d,g,b]=this.unprojectPosition(h);return Number.isFinite(a)?[d,g,b]:Number.isFinite(r)?[d,g,r]:[d,g]}projectPosition(e){const[n,r]=this.projectFlat(e),s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,s]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,s]}projectFlat(e){if(this.isGeospatial){const n=yg(e);return n[1]=Ko(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?eu(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),s=this.unproject([this.width,0],n),i=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(r[0],s[0],i[0],a[0]),Math.min(r[1],s[1],i[1],a[1]),Math.max(r[0],s[0],i[0],a[0]),Math.max(r[1],s[1],i[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?f_({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:s=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,wX(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=Bq({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||f_({latitude:r,longitude:n}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:i,modelMatrix:a}=e;let l=IA;if(i&&(l=a?new vi(a).transformAsVector(i,[]):i),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new xi(l).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(l)}_initMatrices(e){const{viewMatrix:n=AX,projectionMatrix:r=null,orthographic:s=!1,fovyRadians:i,fovy:a=75,near:l=.1,far:u=1e3,padding:h=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new vi().multiplyRight(n).translate(new xi(this.center).negate()),this.projectionMatrix=r||CX({width:this.width,height:this.height,orthographic:s,fovyRadians:i||a*EX,focalDistance:d,padding:h,near:l,far:u});const g=Pf();Ka(g,g,this.projectionMatrix),Ka(g,g,this.viewMatrix),this.viewProjectionMatrix=g,this.viewMatrixInverse=n_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=_X(this.viewMatrixInverse);const b=Pf(),w=Pf();$0(b,b,[this.width/2,-this.height/2,1]),pg(b,b,[1,-1,0]),Ka(w,b,this.viewProjectionMatrix),this.pixelProjectionMatrix=w,this.pixelUnprojectionMatrix=n_(Pf(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Sn.warn("Pixel project matrix not invertible")()}}Rh.displayName="Viewport";class tu extends Rh{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:s=0,pitch:i=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:u=1.01,nearZ:h,farZ:d,orthographic:g=!1,projectionMatrix:b,repeat:w=!1,worldOffset:R=0,position:A,padding:C,legacyMeterSizes:I=!1}=e;let{width:M,height:k,altitude:P=1.5}=e;const L=Math.pow(2,s);M=M||1,k=k||1;let O,H=null;if(b)P=b[5]/2,O=bg(P);else{e.fovy?(O=e.fovy,P=kI(O)):O=bg(P);let J;if(C){const{top:K=0,bottom:Z=0}=C;J=[0,Ko((K+k-Z)/2,0,k)-k/2]}H=Uq({width:M,height:k,scale:L,center:A&&[0,0,A[2]*Sx(n)],offset:J,pitch:i,fovy:O,nearZMultiplier:l,farZMultiplier:u}),Number.isFinite(h)&&(H.near=h),Number.isFinite(d)&&(H.far=d)}let Y=Lq({height:k,pitch:i,bearing:a,scale:L,altitude:P});R&&(Y=new vi().translate([512*R,0,0]).multiplyLeft(Y)),super({...e,width:M,height:k,viewMatrix:Y,longitude:r,latitude:n,zoom:s,...H,fovy:O,focalDistance:P}),this.latitude=n,this.longitude=r,this.zoom=s,this.pitch=i,this.bearing=a,this.altitude=P,this.fovy=O,this.orthographic=g,this._subViewports=w?[]:null,this._pseudoMeters=I,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let s=n;s<=r;s++){const i=s?new tu({...this,worldOffset:s}):this;this._subViewports.push(i)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),s=(e[2]||0)*Sx(e[1]);return[n,r,s]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),s=(e[2]||0)/Sx(r);return[n,r,s]}addMetersToLngLat(e,n){return CI(e,n)}panByPosition(e,n){const r=q0(n,this.pixelUnprojectionMatrix),s=this.projectFlat(e),i=rA([],s,wH([],r)),a=rA([],this.center,i),[l,u]=this.unprojectFlat(a);return{longitude:l,latitude:u}}getBounds(e={}){const n=$q(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:s}=this,{longitude:i,latitude:a,zoom:l}=zq({width:r,height:s,bounds:e,...n});return new tu({width:r,height:s,longitude:i,latitude:a,zoom:l})}}tu.displayName="WebMercatorViewport";const OA=[0,0,0];function Ex(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof tu){const[s,i,a=0]=t,l=e.getDistanceScales([s,i]);r[2]=a*l.unitsPerMeter[2]}return r}function kX(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:s,fromCoordinateSystem:i,fromCoordinateOrigin:a}=t;return s===Jt.DEFAULT&&(s=e.isGeospatial?Jt.LNGLAT:Jt.CARTESIAN),i===void 0&&(i=s),a===void 0&&(a=r),{viewport:e,coordinateSystem:s,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:i,fromCoordinateOrigin:a}}function DI(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s,offsetMode:i}){let[a,l,u=0]=t;switch(n&&([a,l,u]=Eh([],[a,l,u,1],n)),r){case Jt.LNGLAT:return Ex([a,l,u],e,i);case Jt.LNGLAT_OFFSETS:return Ex([a+s[0],l+s[1],u+(s[2]||0)],e,i);case Jt.METER_OFFSETS:return Ex(CI(s,[a,l,u]),e,i);case Jt.CARTESIAN:default:return e.isGeospatial?[a+s[0],l+s[1],u+s[2]]:e.projectPosition([a,l,u])}}function NX(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:s,modelMatrix:i,fromCoordinateSystem:a,fromCoordinateOrigin:l}=kX(e),{autoOffset:u=!0}=e,{geospatialOrigin:h=OA,shaderCoordinateOrigin:d=OA,offsetMode:g=!1}=u?EI(n,r,s):{},b=DI(t,{viewport:n,modelMatrix:i,coordinateSystem:a,coordinateOrigin:l,offsetMode:g});if(g){const w=n.projectPosition(h||d);FH(b,b,w)}return b}let MX=1,IX=1;class jI{constructor(){z(this,"time",0);z(this,"channels",new Map);z(this,"animations",new Map);z(this,"playing",!1);z(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:s=1,repeat:i=1}=e,a=MX++,l={time:0,delay:n,duration:r,rate:s,repeat:i};return this._setChannelTime(l,this.time),this.channels.set(a,l),a}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const s of n)this._setChannelTime(s,this.time);const r=this.animations.values();for(const s of r){const{animation:i,channel:a}=s;i.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=IX++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,s=e.duration*e.repeat;r>=s?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}function OX(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function PX(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let DX=0;const jX={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:Wv.stats.get(`animation-loop-${DX++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class FX{constructor(e){z(this,"device",null);z(this,"canvas",null);z(this,"props");z(this,"animationProps",null);z(this,"timeline",null);z(this,"stats");z(this,"cpuTime");z(this,"gpuTime");z(this,"frameRate");z(this,"display");z(this,"needsRedraw","initialized");z(this,"_initialized",!1);z(this,"_running",!1);z(this,"_animationFrameId",null);z(this,"_nextFramePromise",null);z(this,"_resolveNextFrame",null);z(this,"_cpuStartTime",0);z(this,"_error",null);if(this.props={...jX,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=e.stats||new um({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var r,s;if(this.props.onError(e),this._error=Error(),((s=(r=this.device)==null?void 0:r.canvasContext)==null?void 0:s.canvas)instanceof HTMLCanvasElement){const i=document.createElement("h1");i.innerHTML=e.message,i.style.position="absolute",i.style.top="20%",i.style.left="10px",i.style.color="black",i.style.backgroundColor="red",document.body.appendChild(i)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=OX(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(PX(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var n;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(n=this.device)==null||n.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var n,r;const e=(r=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:r.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){var i,a,l,u;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((a=(i=this.device)==null?void 0:i.canvasContext)==null?void 0:a.getPixelSize())||[1,1];let r=1;const s=(u=(l=this.device)==null?void 0:l.canvasContext)==null?void 0:u.canvas;return s&&s.clientHeight?r=s.clientWidth/s.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,n;this.props.autoResizeDrawingBuffer&&((n=(e=this.device)==null?void 0:e.canvasContext)==null||n.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const Ax={};function pm(t="id"){Ax[t]=Ax[t]||1;const e=Ax[t]++;return`${t}-${e}`}class PA{constructor(e){z(this,"id");z(this,"userData",{});z(this,"topology");z(this,"bufferLayout",[]);z(this,"vertexCount");z(this,"indices");z(this,"attributes");if(this.id=e.id||pm("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&kn.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function BX(t,e){if(e instanceof PA)return e;const n=LX(t,e),{attributes:r,bufferLayout:s}=UX(t,e);return new PA({topology:e.topology||"triangle-list",bufferLayout:s,vertexCount:e.vertexCount,indices:n,attributes:r})}function LX(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:kn.INDEX,data:n})}function UX(t,e){const n=[],r={};for(const[i,a]of Object.entries(e.attributes)){let l=i;switch(i){case"POSITION":l="positions";break;case"NORMAL":l="normals";break;case"TEXCOORD_0":l="texCoords";break;case"COLOR_0":l="colors";break}if(a){r[l]=t.createBuffer({data:a.value,id:`${i}-buffer`});const{value:u,size:h,normalized:d}=a;n.push({name:l,format:j7(u,h,d)})}}const s=e._calculateVertexCount(e.attributes,e.indices);return{attributes:r,bufferLayout:n,vertexCount:s}}const Vg=class Vg{constructor(e){z(this,"device");z(this,"destroyPolicy");z(this,"_hashCounter",0);z(this,"_hashes",{});z(this,"_renderPipelineCache",{});z(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Vg(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const n={...Kc.defaultProps,...e},r=this._hashRenderPipeline(n);if(!this._renderPipelineCache[r]){const s=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=r,this._renderPipelineCache[r]={pipeline:s,useCount:0}}return this._renderPipelineCache[r].useCount++,this._renderPipelineCache[r].pipeline}createComputePipeline(e){const n={...og.defaultProps,...e},r=this._hashComputePipeline(n);if(!this._computePipelineCache[r]){const s=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});s.hash=r,this._computePipelineCache[r]={pipeline:s,useCount:0}}return this._computePipelineCache[r].useCount++,this._computePipelineCache[r].pipeline}release(e){const n=e.hash,r=e instanceof og?this._computePipelineCache:this._renderPipelineCache;r[n].useCount--,r[n].useCount===0&&this.destroyPolicy==="unused"&&(r[n].pipeline.destroy(),delete r[n])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const n=e.vs?this._getHash(e.vs.source):0,r=e.fs?this._getHash(e.fs.source):0,s="-",i=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${r}V${s}BL${i}`;default:const a=this._getHash(JSON.stringify(e.parameters));return`${n}/${r}V${s}T${e.topology}P${a}BL${i}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};z(Vg,"defaultProps",{...Kc.defaultProps});let h_=Vg;const $g=class $g{constructor(e){z(this,"device");z(this,"destroyPolicy");z(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new $g(e)),e._lumaData.defaultShaderFactory}createShader(e){const n=this._hashShader(e);let r=this._cache[n];if(!r){const s=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=r={shader:s,useCount:0}}return r.useCount++,r.shader}release(e){const n=this._hashShader(e),r=this._cache[n];r&&(r.useCount--,r.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[n],r.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};z($g,"defaultProps",{...rg.defaultProps});let d_=$g;function zX(t,e){var s;const n={},r="Values";if(t.attributes.length===0&&!((s=t.varyings)!=null&&s.length))return{"No attributes or varyings":{[r]:"N/A"}};for(const i of t.attributes)if(i){const a=`${i.location} ${i.name}: ${i.type}`;n[`in ${a}`]={[r]:i.stepMode||"vertex"}}for(const i of t.varyings||[]){const a=`${i.location} ${i.name}`;n[`out ${a}`]={[r]:JSON.stringify(i)}}return n}let lr=null,Ma=null;function VX(t,{id:e,minimap:n,opaque:r,top:s="0",left:i="0",rgbaScale:a=1}){lr||(lr=document.createElement("canvas"),lr.id=e,lr.title=e,lr.style.zIndex="100",lr.style.position="absolute",lr.style.top=s,lr.style.left=i,lr.style.border="blue 5px solid",lr.style.transform="scaleY(-1)",document.body.appendChild(lr),Ma=lr.getContext("2d")),(lr.width!==t.width||lr.height!==t.height)&&(lr.width=t.width/2,lr.height=t.height/2,lr.style.width="400px",lr.style.height="400px");const l=t.device.readPixelsToArrayWebGL(t),u=Ma==null?void 0:Ma.createImageData(t.width,t.height);if(u){for(let d=0;d<l.length;d+=4)u.data[0+d+0]=l[d+0]*a,u.data[0+d+1]=l[d+1]*a,u.data[0+d+2]=l[d+2]*a,u.data[0+d+3]=r?255:l[d+3]*a;Ma==null||Ma.putImageData(u,0,0)}}function p_(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!p_(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!p_(t[i],e[i],n-1))return!1;return!0}return!1}function $X(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HX(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function FI(t){return $X(t)||HX(t)}function WX(t){return FI(t)||typeof t=="number"||typeof t=="boolean"}function BI(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];WX(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}class qX{constructor(e,n){z(this,"options",{disableWarnings:!1});z(this,"modules");z(this,"moduleUniforms");z(this,"moduleBindings");Object.assign(this.options,n);const r=I0(Object.values(e).filter(s=>s.dependencies));for(const s of r)e[s.name]=s;Xe.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[s,i]of Object.entries(e))this._addModule(i),i.name&&s!==i.name&&!this.options.disableWarnings&&Xe.warn(`Module name: ${s} vs ${i.name}`)()}destroy(){}setProps(e){var n;for(const r of Object.keys(e)){const s=r,i=e[s]||{},a=this.modules[s];if(!a){this.options.disableWarnings||Xe.warn(`Module ${r} not found`)();continue}const l=this.moduleUniforms[s],u=this.moduleBindings[s],h=((n=a.getUniforms)==null?void 0:n.call(a,i,l))||i,{uniforms:d,bindings:g}=BI(h);this.moduleUniforms[s]={...l,...d},this.moduleBindings[s]={...u,...g}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[r,s]of Object.entries(this.moduleUniforms))for(const[i,a]of Object.entries(s))e[`${r}.${i}`]={type:(n=this.modules[r].uniformTypes)==null?void 0:n[i],value:String(a)};return e}_addModule(e){const n=e.name;this.moduleUniforms[n]=e.defaultUniforms||{},this.moduleBindings[n]={}}}let XX="";async function YX(t,e){const n=new Image;return n.crossOrigin="anonymous",n.src=t.startsWith("http")?t:XX+t,await n.decode(),e?await createImageBitmap(n,e):await createImageBitmap(n)}class Rx{constructor(e,n){z(this,"device");z(this,"id");z(this,"texture");z(this,"sampler");z(this,"view");z(this,"ready");z(this,"isReady",!1);z(this,"destroyed",!1);z(this,"resolveReady",()=>{});z(this,"rejectReady",()=>{});this.device=e,this.id=n.id||pm("async-texture"),typeof(n==null?void 0:n.data)=="string"&&n.dimension==="2d"&&(n={...n,data:YX(n.data)}),this.ready=new Promise((r,s)=>{this.resolveReady=()=>{this.isReady=!0,r()},this.rejectReady=s}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const n=e.data;let r;try{r=await LI(n)}catch(i){this.rejectReady(i)}if(this.destroyed)return;const s={...e,data:r};this.texture=this.device.createTexture(s),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(e),n.destroy()}return!0}}async function LI(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(LI));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,n=await Promise.all(Object.values(e)),r=Object.keys(e),s={};for(let i=0;i<r.length;i++)s[r[i]]=n[i];return s}return t}const Ia=2,KX=1e4,Hg=class Hg{constructor(e,n){z(this,"device");z(this,"id");z(this,"source");z(this,"vs");z(this,"fs");z(this,"pipelineFactory");z(this,"shaderFactory");z(this,"userData",{});z(this,"parameters");z(this,"topology");z(this,"bufferLayout");z(this,"isInstanced");z(this,"instanceCount",0);z(this,"vertexCount");z(this,"indexBuffer",null);z(this,"bufferAttributes",{});z(this,"constantAttributes",{});z(this,"bindings",{});z(this,"uniforms",{});z(this,"vertexArray");z(this,"transformFeedback",null);z(this,"pipeline");z(this,"shaderInputs");z(this,"_uniformStore");z(this,"_attributeInfos",{});z(this,"_gpuGeometry",null);z(this,"_getModuleUniforms");z(this,"props");z(this,"_pipelineNeedsUpdate","newly created");z(this,"_needsRedraw","initializing");z(this,"_destroyed",!1);z(this,"_lastDrawTimestamp",-1);z(this,"_lastLogTime",0);z(this,"_logOpen",!1);z(this,"_drawCount",0);var u,h,d,g;this.props={...Hg.defaultProps,...n},n=this.props,this.id=n.id||pm("model"),this.device=e,Object.assign(this.userData,n.userData);const r=Object.fromEntries(((u=this.props.modules)==null?void 0:u.map(b=>[b.name,b]))||[]),s=n.shaderInputs||new qX(r,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(s);const i=QX(e),a=(((h=this.props.modules)==null?void 0:h.length)>0?this.props.modules:(d=this.shaderInputs)==null?void 0:d.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:b,getUniforms:w}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:i,...this.props,modules:a});this.source=b,this._getModuleUniforms=w,(g=this.props).shaderLayout||(g.shaderLayout=hH(this.source))}else{const{vs:b,fs:w,getUniforms:R}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:i,...this.props,modules:a});this.vs=b,this.fs=w,this._getModuleUniforms=R}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||h_.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||d_.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniformsWebGL(n.uniforms),n.moduleSettings&&this.updateModuleSettingsWebGL(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const n=this._areBindingsLoading();if(n)return Xe.info(Ia,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let r;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const s=this._getBindings();this.pipeline.setBindings(s,{disableWarnings:this.props.disableWarnings}),g_(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:i}=this.vertexArray,a=i?i.byteLength/(i.indexType==="uint32"?4:2):void 0;r=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),r?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",r}setGeometry(e){var r;(r=this._gpuGeometry)==null||r.destroy();const n=e&&BX(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const s=new px(this.bufferLayout);this.bufferLayout=s.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const n=new px(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){p_(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new D7(this.shaderInputs.modules);for(const[n,r]of Object.entries(this.shaderInputs.modules))if(ZX(r)){const s=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=s}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){const r=(n==null?void 0:n.disableWarnings)??this.props.disableWarnings;e.indices&&Xe.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=F7(this.pipeline.shaderLayout,this.bufferLayout);const s=new px(this.bufferLayout);for(const[i,a]of Object.entries(e)){const l=s.getBufferLayout(i);if(!l){r||Xe.warn(`Model(${this.id}): Missing layout for buffer "${i}".`)();continue}const u=s.getAttributeNamesForBuffer(l);let h=!1;for(const d of u){const g=this._attributeInfos[d];if(g){const b=this.device.type==="webgpu"?s.getBufferIndex(g.bufferName):g.location;this.vertexArray.setBuffer(b,a),h=!0}}!h&&!r&&Xe.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${i}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[r,s]of Object.entries(e)){const i=this._attributeInfos[r];i?this.vertexArray.setConstantWebGL(i.location,s):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||Xe.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${r}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){g_(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:n,uniforms:r}=BI(this._getModuleUniforms(e));Object.assign(this.bindings,n),Object.assign(this.uniforms,r),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Rx&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[n,r]of Object.entries(this.bindings))r instanceof Rx?r.isReady&&(e[n]=r.texture):e[n]=r;return e}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof ng?e=Math.max(e,n.texture.updateTimestamp):n instanceof kn||n instanceof Fn?e=Math.max(e,n.updateTimestamp):n instanceof Rx?e=n.texture?Math.max(e,n.texture.updateTimestamp):1/0:n instanceof sg||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[r]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(s=>s.name===r)&&r!=="positions"&&delete n[r];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&(Xe.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const r=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let s=null;this.source?s=r:this.fs&&(s=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:r,fs:s}),this._attributeInfos=FM(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=Xe.level>3?0:KX;Xe.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Xe.group(Ia,`>>> DRAWING MODEL ${this.id}`,{collapsed:Xe.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=zX(this.pipeline.shaderLayout,this.id);Xe.table(Ia,e)();const n=this.shaderInputs.getDebugTable();for(const[s,i]of Object.entries(this.uniforms))n[s]={value:i};Xe.table(Ia,n)();const r=this._getAttributeDebugTable();Xe.table(Ia,this._attributeInfos)(),Xe.table(Ia,r)(),Xe.groupEnd(Ia)(),this._logOpen=!1}}_logFramebuffer(e){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const r=e.props.framebuffer;r&&VX(r,{id:r.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,r]of Object.entries(this._attributeInfos)){const s=this.vertexArray.attributes[r.location];e[r.location]={name:n,type:r.shaderType,values:s?this._getBufferOrConstantValues(s,r.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,r=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:r.toString()}}return e}_getBufferOrConstantValues(e,n){const r=UM(n);return(e instanceof kn?new r(e.debugData):e).toString()}};z(Hg,"defaultProps",{...Kc.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:tg.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let nu=Hg;function ZX(t){return!!(t.uniformTypes&&!g_(t.uniformTypes))}function QX(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function g_(t){for(const e in t)return!1;return!0}const Kf=class Kf{constructor(e,n=Kf.defaultProps){z(this,"device");z(this,"model");z(this,"transformFeedback");if(!Kf.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new nu(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||B9(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof kn)return n.readAsync();const{buffer:r,byteOffset:s=0,byteLength:i=r.byteLength}=n;return r.readAsync(s,i)}};z(Kf,"defaultProps",{...nu.defaultProps,outputs:void 0,feedbackBuffers:void 0});let oh=Kf;class GX{constructor(e){z(this,"id");z(this,"topology");z(this,"vertexCount");z(this,"indices");z(this,"attributes");z(this,"userData",{});const{attributes:n={},indices:r=null,vertexCount:s=null}=e;this.id=e.id||pm("geometry"),this.topology=e.topology,r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r),this.attributes={};for(const[i,a]of Object.entries(n)){const l=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(l.value))throw new Error(`${this._print(i)}: must be typed array or object with value as typed array`);if((i==="POSITION"||i==="positions")&&!l.size&&(l.size=3),i==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=l}else this.attributes[i]=l}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const s of Object.values(e)){const{value:i,size:a,constant:l}=s;!l&&i&&a!==void 0&&a>=1&&(r=Math.min(r,i.length/a))}return r}}const JX={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class UI extends X0{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,pickingFBO:a,deviceRect:{x:l,y:u,width:h,height:d},cullRect:g,effects:b,pass:w="picking",pickZ:R,shaderModuleProps:A}){this.pickZ=R;const C=this._resetColorEncoder(R),I=[l,u,h,d],M=super.render({target:a,layers:e,layerFilter:n,views:r,viewports:s,onViewportActive:i,cullRect:g,effects:b==null?void 0:b.filter(P=>P.useInPicking),pass:w,isPicking:!0,shaderModuleProps:A,clearColor:[0,0,0,0],colorMask:15,scissorRect:I});return this._colorEncoderState=null,{decodePickingColor:C&&tY.bind(null,C),stats:M}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getShaderModuleProps(e,n,r){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,n,r){const s={...e.props.parameters},{pickable:i,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?s.blend=!1:i&&a.includes("draw")&&(Object.assign(s,JX),s.blend=!0,s.blendColor=eY(this._colorEncoderState,e,r)),s}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function eY(t,e,n){const{byLayer:r,byAlpha:s}=t;let i,a=r.get(e);return a?(a.viewports.push(n),i=a.a):(i=r.size+1,i<=255?(a={a:i,layer:e,viewports:[n]},r.set(e,a),s[i]=a):(Sn.warn("Too many pickable layers, only picking the first 255")(),i=0)),[0,0,0,i/255]}function tY(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const yc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},xg=Symbol.for("component"),Za=Symbol.for("propTypes"),Cx=Symbol.for("deprecatedProps"),Mc=Symbol.for("asyncPropDefaults"),dl=Symbol.for("asyncPropOriginal"),Zo=Symbol.for("asyncPropResolved");function zI(t,e=()=>!0){return Array.isArray(t)?VI(t,e,[]):e(t)?[t]:[]}function VI(t,e,n){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?VI(s,e,n):e(s)&&n.push(s)}return n}function nY({target:t,source:e,start:n=0,count:r=1}){const s=e.length,i=r*s;let a=0;for(let l=n;a<s;a++)t[l++]=e[a];for(;a<i;)a<i-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+i-a),a=i);return t}class rY{constructor(e,n,r){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let s=e;typeof e=="string"&&(s=Bv(e)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=i)}).catch(i=>{this._loadCount===r&&(this.isLoaded=!0,this._error=i||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class sY{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:s=!0}){let i=this._resources[e];i?i.setData(n,r):(i=new rY(e,n,this._context),this._resources[e]=i),i.persistent=s}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const s=n[r],i=this._resources[s.resourceId];i&&i.unsubscribe(s)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:s="default"}){const{_resources:i,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),i[e]||this.add({resourceId:e,data:null,persistent:!1}));const l=i[e];if(this._track(r,s,l,n),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,s){const i=this._consumers,a=i[e]=i[e]||{};let l=a[n];const u=l&&l.resourceId&&this._resources[l.resourceId];u&&(u.unsubscribe(l),this.prune()),r&&(l?(l.onChange=s,l.resourceId=r.id):l={onChange:s,resourceId:r.id},a[n]=l,r.subscribe(l))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const iY="layerManager.setLayers",oY="layerManager.activateViewport";class aY{constructor(e,n){var l;this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=u=>{Dr(oY,this,u),u&&(this.context.viewport=u)};const{deck:r,stats:s,viewport:i,timeline:a}=n||{};this.layers=[],this.resourceManager=new sY({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:r,shaderAssembler:oX(((l=e==null?void 0:e.info)==null?void 0:l.shadingLanguage)||"glsl"),defaultShaderModules:[mW],renderPass:void 0,stats:s||new um({id:"deck.gl"}),viewport:i||new Rh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new jI,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const s=r.getNeedsRedraw(e);n=n||s}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Dr(iY,this,n,e),this._lastRenderedLayers=e;const r=zI(e,Boolean);for(const s of r)s.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(r=>r.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,r=n.findIndex(s=>s.name===e.name);r>=0&&(n.splice(r,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,r){r.raiseError(n,`${e} of ${r}`)}_updateLayers(e,n){const r={};for(const a of e)r[a.id]?Sn.warn(`Multiple old layers with same id ${a.id}`)():r[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const s=[];this._updateSublayersRecursively(n,r,s),this._finalizeOldLayers(r);let i=!1;for(const a of s)if(a.hasUniformTransition()){i=`Uniform transition in ${a}`;break}this._needsUpdate=i,this.layers=s}_updateSublayersRecursively(e,n,r){for(const s of e){s.context=this.context;const i=n[s.id];i===null&&Sn.warn(`Multiple new layers with same id ${s.id}`)(),n[s.id]=null;let a=null;try{this._debug&&i!==s&&s.validateProps(),i?(this._transferLayerState(i,s),this._updateLayer(s)):this._initializeLayer(s),r.push(s),a=s.isComposite?s.getSubLayers():null}catch(l){this._handleError("matching",l,s)}a&&this._updateSublayersRecursively(a,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=yc.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=yc.MATCHED,n!==e&&(e.lifecycle=yc.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=yc.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=yc.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Xs(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Xs(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const i of r)if(!e.hasOwnProperty(i)||!Xs(t[i],e[i],n-1))return!1;return!0}return!1}class lY{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),s={x:e[0],y:e[1]};for(let i=r.length-1;i>=0;--i){const a=r[i];if(a.containsPixel(s)){const l=e.slice();return l[0]-=a.x,l[1]-=a.y,a.unproject(l,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=zI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Xs(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Sn.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:i=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:i,width:this.width,height:this.height})}})}_updateController(e,n,r,s){const i=e.controller;if(i&&r){const a={...n,...i,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!s||s.constructor!==i.type)&&(s=this._createController(e,a)),s&&s.setProps(a),s}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let s=e.length;s--;){const i=e[s],a=this.getViewState(i),l=i.makeViewport({viewState:a,width:this.width,height:this.height});let u=n[i.id];const h=!!i.controller;h&&!u&&(r=!0),(r||!h)&&u&&(u.finalize(),u=null),this.controllers[i.id]=this._updateController(i,a,l,u),l&&this._viewports.unshift(l)}for(const s in n){const i=n[s];i&&!this.controllers[s]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,s)=>!e[s].equals(n[s]))}}const cY=/([0-9]+\.?[0-9]*)(%|px)/;function To(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=cY.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function Eo(t,e){return t.relative?Math.round(t.position*e):t.position}class ru{constructor(e){const{id:n,x:r=0,y:s=0,width:i="100%",height:a="100%",padding:l=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=To(r),this._y=To(s),this._width=To(i),this._height=To(a),this._padding=l&&{left:To(l.left||0),right:To(l.right||0),top:To(l.top||0),bottom:To(l.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&Xs(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){r=this.filterViewState(r);const s=this.getDimensions({width:e,height:n});if(!s.height||!s.width)return null;const i=this.getViewportType(r);return new i({...r,...this.props,...s})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Eo(this._x,e),y:Eo(this._y,n),width:Eo(this._width,e),height:Eo(this._height,n)};return this._padding&&(r.padding={left:Eo(this._padding.left,e),top:Eo(this._padding.top,n),right:Eo(this._padding.right,e),bottom:Eo(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class gm{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(r=(n=this.settings).onStart)==null||r.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:s}=this;this._handle=r.addChannel({delay:r.getTime(),duration:s.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const DA=()=>{},m_={BREAK:1,SNAP_TO_END:2,IGNORE:3},uY=t=>t,fY=m_.BREAK;class hY{constructor(e){this._onTransitionUpdate=n=>{const{time:r,settings:{interpolator:s,startProps:i,endProps:a,duration:l,easing:u}}=n,h=u(r/l),d=s.interpolateProps(i,a,h);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new gm(e.timeline),this.onViewStateChange=e.onViewStateChange||DA,this.onStateChange=e.onStateChange||DA}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let s=r;if(this.transition.inProgress){const{interruption:i,endProps:a}=this.transition.settings;s={...r,...i===m_.SNAP_TO_END?a:this.propsInTransition||r}}this._triggerTransition(s,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===m_.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),s=this.getControllerState(n).shortestPathFrom(r),i=n.transitionInterpolator,a=i.getDuration?i.getDuration(e,n):n.transitionDuration;if(a===0)return;const l=i.initializeProps(e,s);this.propsInTransition={};const u={duration:a,easing:n.transitionEasing||uY,interpolator:i,interruption:n.transitionInterruption||fY,startProps:l.start,endProps:l.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function Tr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class dY{constructor(e){const{compare:n,extract:r,required:s}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=s}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!sh(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},s={};for(const i of this._propsToExtract)(i in e||i in n)&&(r[i]=e[i],s[i]=n[i]);return this._checkRequiredProps(r),this._checkRequiredProps(s),{start:r,end:s}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Tr(Number.isFinite(r)||Array.isArray(r),`${n} is required for transition`)})}}const pY=["longitude","latitude","zoom","bearing","pitch"],gY=["longitude","latitude","zoom"];class $I extends dY{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:pY,required:gY},super(r.transitionProps),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:s,around:i}=this.opts;if(s&&i){const a=s(e),l=s(n),u=a.unproject(i);r.start.around=i,Object.assign(r.end,{around:l.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const s={};for(const i of this._propsToExtract)s[i]=dg(e[i]||0,n[i]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...n,...s});Object.assign(s,i.panByPosition(n.aroundPosition,dg(e.around,n.around,r)))}return s}}const Ao={transitionDuration:0},mY=300,dp=t=>1-(1-t)*(1-t),uc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Oa={};class yY{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new hY({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return n?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:s}=e;return[s.x-n,s.y-r]}isPointInBounds(e,n){const{width:r,height:s}=this.props;if(n&&n.handled)return!1;const i=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=s;return i&&n&&n.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?mY:0;const{scrollZoom:r=!0,dragPan:s=!0,dragRotate:i=!0,doubleClickZoom:a=!0,touchZoom:l=!0,touchRotate:u=!1,keyboard:h=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(uc.WHEEL,d&&r),this.toggleEvents(uc.PAN,d),this.toggleEvents(uc.PINCH,d&&(l||u)),this.toggleEvents(uc.MULTI_PAN,d&&u),this.toggleEvents(uc.DOUBLE_CLICK,d&&a),this.toggleEvents(uc.KEYBOARD,d&&h),this.scrollZoom=r,this.dragPan=s,this.dragRotate=i,this.doubleClickZoom=a,this.touchZoom=l,this.touchRotate=u,this.keyboard=h}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const s={...e.getViewportProps(),...n},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),i){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const s=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(s,Ao,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Ao,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:dp},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Ao,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),s=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],i=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:dp},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:i}=e;let a=2/(1+Math.exp(-Math.abs(i*r)));i<0&&a!==0&&(a=1/a);const l=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(l,{...this._getTransitionProps({around:n}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Ao,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Ao,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),s=[r[0],r[1]+=e.velocityY*n/2],i=this.controllerState.rotate({pos:s});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:dp},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Oa._startPinchRotation=e.rotation,Oa._lastPinchEvent=e,this.updateViewport(r,Ao,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,s=this.getCenter(e);n=n.zoom({pos:s,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Oa._startPinchRotation-r})}return this.updateViewport(n,Ao,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Oa._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Oa;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const s=this.getCenter(e);let i=this.controllerState.rotateEnd();const a=Math.log2(e.scale),l=(a-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,a+l*n/2);i=i.zoom({pos:s,scale:u}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:s}),transitionDuration:n,transitionEasing:dp},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Oa._startPinchRotation=null,Oa._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(s,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:s,rotateSpeedX:i,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:l}=this;let u;const h={};switch(e.srcEvent.code){case"Minus":u=n?l.zoomOut(r).zoomOut(r):l.zoomOut(r),h.isZooming=!0;break;case"Equal":u=n?l.zoomIn(r).zoomIn(r):l.zoomIn(r),h.isZooming=!0;break;case"ArrowLeft":n?(u=l.rotateLeft(i),h.isRotating=!0):(u=l.moveLeft(s),h.isPanning=!0);break;case"ArrowRight":n?(u=l.rotateRight(i),h.isRotating=!0):(u=l.moveRight(s),h.isPanning=!0);break;case"ArrowUp":n?(u=l.rotateUp(a),h.isRotating=!0):(u=l.moveUp(s),h.isPanning=!0);break;case"ArrowDown":n?(u=l.rotateDown(a),h.isRotating=!0):(u=l.moveDown(s),h.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),h),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Ao:e?{...n,transitionInterpolator:new $I({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class bY{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const jA=5,xY=1.2;class vY extends bY{constructor(e){const{width:n,height:r,latitude:s,longitude:i,zoom:a,bearing:l=0,pitch:u=0,altitude:h=1.5,position:d=[0,0,0],maxZoom:g=20,minZoom:b=0,maxPitch:w=60,minPitch:R=0,startPanLngLat:A,startZoomLngLat:C,startRotatePos:I,startBearing:M,startPitch:k,startZoom:P,normalize:L=!0}=e;Tr(Number.isFinite(i)),Tr(Number.isFinite(s)),Tr(Number.isFinite(a)),super({width:n,height:r,latitude:s,longitude:i,zoom:a,bearing:l,pitch:u,altitude:h,maxZoom:g,minZoom:b,maxPitch:w,minPitch:R,normalize:L,position:d},{startPanLngLat:A,startZoomLngLat:C,startRotatePos:I,startBearing:M,startPitch:k,startZoom:P}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:s,startBearing:i,startPitch:a}=this.getState();if(!s||i===void 0||a===void 0)return this;let l;return e?l=this._getNewRotation(e,s,a,i):l={bearing:i+n,pitch:a+r},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:s,startZoomLngLat:i}=this.getState();if(i||(s=this.getViewportProps().zoom,i=this._unproject(n)||this._unproject(e)),!i)return this;const{maxZoom:a,minZoom:l}=this.getViewportProps();let u=s+Math.log2(r);u=Ko(u,l,a);const h=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...h.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:s,longitude:i}=r;return Math.abs(s-n.bearing)>180&&(r.bearing=s<0?s+360:s-360),Math.abs(i-n.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:s}=e;e.zoom=Ko(s,r,n);const{maxPitch:i,minPitch:a,pitch:l}=e;e.pitch=Ko(l,a,i);const{normalize:u=!0}=e;return u&&Object.assign(e,Hq(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,s){const i=e[0]-n[0],a=e[1]-n[1],l=e[1],u=n[1],{width:h,height:d}=this.getViewportProps(),g=i/h;let b=0;a>0?Math.abs(d-u)>jA&&(b=a/(u-d)*xY):a<0&&u>jA&&(b=1-l/u),b=Ko(b,-1,1);const{minPitch:w,maxPitch:R}=this.getViewportProps(),A=s+180*g;let C=r;return b>0?C=r+b*(R-r):b<0&&(C=r-b*(w-r)),{pitch:C,bearing:A}}}class _Y extends yY{constructor(){super(...arguments),this.ControllerState=vY,this.transition={transitionDuration:300,transitionInterpolator:new $I({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class HI extends ru{constructor(e={}){super(e)}getViewportType(){return tu}get ControllerType(){return _Y}}HI.displayName="MapView";const wY=new PI;function SY(t,e){const n=t.order??1/0,r=e.order??1/0;return n-r}class TY{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(s=>SY(s,e)>0);r<0?n.push(e):n.splice(r,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Xs(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const s of this.effects)n[s.id]=s;const r=[];for(const s of e){const i=n[s.id];let a=s;i&&i!==s?i.setProps?(i.setProps(s.props),a=i):i.cleanup(this._context):i||s.setup(this._context),r.push(a),delete n[s.id]}for(const s in n)n[s].cleanup(this._context);this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(s=>s instanceof PI)||this._resolvedEffects.push(wY),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class EY extends X0{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const AY="deckRenderer.renderLayers";class RY{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new EY(e),this.pickLayersPass=new UI(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};r.effects&&this._preRender(r.effects,r);const s=this.lastPostProcessEffect?this.renderBuffers[0]:r.target;this.lastPostProcessEffect&&(r.clearColor=[0,0,0,0],r.clearCanvas=!0);const i=n.render({...r,target:s});r.effects&&this._postRender(r.effects,r),this.renderCount++,Dr(AY,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(r=>{const s=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${r}`,colorAttachments:[s]}))});for(const r of e)r.resize(n)}_postRender(e,n){const{renderBuffers:r}=this,s={...n,inputBuffer:r[0],swapBuffer:r[1]};for(const i of e)if(i.postRender){s.target=i.id===this.lastPostProcessEffect?n.target:void 0;const a=i.postRender(s);s.inputBuffer=a,s.swapBuffer=a===r[0]?r[1]:r[0]}}}const CY={pickedColor:null,pickedObjectIndex:-1};function kY({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:s,deviceRect:i}){const{x:a,y:l,width:u,height:h}=i;let d=s*s,g=-1,b=0;for(let w=0;w<h;w++){const R=w+l-r,A=R*R;if(A>d)b+=4*u;else for(let C=0;C<u;C++){if(t[b+3]-1>=0){const M=C+a-n,k=M*M+A;k<=d&&(d=k,g=b)}b+=4}}if(g>=0){const w=t.slice(g,g+4),R=e(w);if(R){const A=Math.floor(g/4/u),C=g/4-A*u;return{...R,pickedColor:w,pickedX:a+C,pickedY:l+A}}Sn.error("Picked non-existent layer. Is picking buffer corrupt?")()}return CY}function NY({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),a=i.join(",");if(!n.has(a)){const l=e(i);l?n.set(a,{...l,color:i}):Sn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function WI({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:s,z:i}){let a=e[0];e.length>1&&(a=IY((t==null?void 0:t.pickedViewports)||e,{x:r,y:s}));let l;if(a){const u=[r-a.x,s-a.y];i!==void 0&&(u[2]=i),l=a.unproject(u)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:s,pixel:[r,s],coordinate:l,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function MY(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:s}=t,{pickedColor:i,pickedLayer:a,pickedObjectIndex:l}=e,u=a?[a]:[];if(r==="hover"){const g=n.index,b=n.layerId,w=a?a.props.id:null;if(w!==b||l!==g){if(w!==b){const R=s.find(A=>A.props.id===b);R&&u.unshift(R)}n.layerId=w,n.index=l,n.info=null}}const h=WI(t),d=new Map;return d.set(null,h),u.forEach(g=>{let b={...h};g===a&&(b.color=i,b.index=l,b.picked=!0),b=qI({layer:g,info:b,mode:r});const w=b.layer;g===a&&r==="hover"&&(n.info=b),d.set(w.id,b),r==="hover"&&w.updateAutoHighlight(b)}),d}function qI({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function IY(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class OY{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new UI(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:s},i=this.lastPickedInfo.info){const a=i&&i.layer&&i.layer.id,l=i&&i.viewport&&i.viewport.id,u=a?r.find(b=>b.id===a):null,h=l&&s.find(b=>b.id===l)||s[0],d=h&&h.unproject([e-h.x,n-h.y]);return{...i,...{x:e,y:n,viewport:h,coordinate:d,layer:u}}}_resizeBuffer(){var n,r;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const s=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=s}const{canvas:e}=this.device.getDefaultCanvasContext();(n=this.pickingFBO)==null||n.resize({width:e.width,height:e.height}),(r=this.depthFBO)==null||r.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:s,y:i,radius:a=0,depth:l=1,mode:u="query",unproject3D:h,onViewportActive:d,effects:g}){const b=this.device.canvasContext.cssToDeviceRatio(),w=this._getPickable(e);if(!w||r.length===0)return{result:[],emptyInfo:WI({viewports:r,x:s,y:i,pixelRatio:b})};this._resizeBuffer();const R=this.device.canvasContext.cssToDevicePixels([s,i],!0),A=[R.x+Math.floor(R.width/2),R.y+Math.floor(R.height/2)],C=Math.round(a*b),{width:I,height:M}=this.pickingFBO,k=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceWidth:I,deviceHeight:M}),P={x:s-a,y:i-a,width:a*2+1,height:a*2+1};let L;const O=[],H=new Set;for(let Y=0;Y<l;Y++){let J;if(k){const Z=this._drawAndSample({layers:w,views:n,viewports:r,onViewportActive:d,deviceRect:k,cullRect:P,effects:g,pass:`picking:${u}`});J=kY({...Z,deviceX:A[0],deviceY:A[1],deviceRadius:C,deviceRect:k})}else J={pickedColor:null,pickedObjectIndex:-1};let K;if(J.pickedLayer&&h&&this.depthFBO){const{pickedColors:Z}=this._drawAndSample({layers:[J.pickedLayer],views:n,viewports:r,onViewportActive:d,deviceRect:{x:J.pickedX,y:J.pickedY,width:1,height:1},cullRect:P,effects:g,pass:`picking:${u}:z`},!0);Z[3]&&(K=Z[0])}J.pickedLayer&&Y+1<l&&(H.add(J.pickedLayer),J.pickedLayer.disablePickingIndex(J.pickedObjectIndex)),L=MY({pickInfo:J,lastPickedInfo:this.lastPickedInfo,mode:u,layers:w,viewports:r,x:s,y:i,z:K,pixelRatio:b});for(const Z of L.values())Z.layer&&O.push(Z);if(!J.pickedColor)break}for(const Y of H)Y.restorePickingColors();return{result:O,emptyInfo:L.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:s,y:i,width:a=1,height:l=1,mode:u="query",maxObjects:h=null,onViewportActive:d,effects:g}){const b=this._getPickable(e);if(!b||r.length===0)return[];this._resizeBuffer();const w=this.device.canvasContext.cssToDeviceRatio(),R=this.device.canvasContext.cssToDevicePixels([s,i],!0),A=R.x,C=R.y+R.height,I=this.device.canvasContext.cssToDevicePixels([s+a,i+l],!0),M=I.x+I.width,k=I.y,P={x:A,y:k,width:M-A,height:C-k},L=this._drawAndSample({layers:b,views:n,viewports:r,onViewportActive:d,deviceRect:P,cullRect:{x:s,y:i,width:a,height:l},effects:g,pass:`picking:${u}`}),O=NY(L),H=new Map,Y=[],J=Number.isFinite(h);for(let K=0;K<O.length&&!(J&&Y.length>=h);K++){const Z=O[K];let ae={color:Z.pickedColor,layer:null,index:Z.pickedObjectIndex,picked:!0,x:s,y:i,pixelRatio:w};ae=qI({layer:Z.pickedLayer,info:ae,mode:u});const _e=ae.layer.id;H.has(_e)||H.set(_e,new Set);const oe=H.get(_e),Re=ae.object??ae.index;oe.has(Re)||(oe.add(Re),Y.push(ae))}return Y}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:s,deviceRect:i,cullRect:a,effects:l,pass:u},h=!1){const d=h?this.depthFBO:this.pickingFBO,g={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:s,pickingFBO:d,deviceRect:i,cullRect:a,effects:l,pass:u,pickZ:h,preRenderStats:{},isPicking:!0};for(const M of l)M.useInPicking&&(g.preRenderStats[M.id]=M.preRender(g));const{decodePickingColor:b}=this.pickLayersPass.render(g),{x:w,y:R,width:A,height:C}=i,I=new(h?Float32Array:Uint8Array)(A*C*4);return this.device.readPixelsToArrayWebGL(d,{sourceX:w,sourceY:R,sourceWidth:A,sourceHeight:C,target:I}),{pickedColors:I,decodePickingColor:b}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:s,deviceHeight:i}){const a=Math.max(0,e-r),l=Math.max(0,n-r),u=Math.min(s,e+r+1)-a,h=Math.min(i,n+r+1)-l;return u<=0||h<=0?null:{x:a,y:l,width:u,height:h}}}const PY={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},DY="top-left",FA="__root";class jY{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!Xs(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const n={};for(const r of this.resolvedWidgets)n[r.id]=r;this.resolvedWidgets.length=0;for(const r of this.defaultWidgets)n[r.id]=null,this.resolvedWidgets.push(r);for(let r of e){const s=n[r.id];s?s.viewId!==r.viewId||s.placement!==r.placement?(this._remove(s),this._add(r)):r!==s&&(s.setProps(r.props),r=s):this._add(r),n[r.id]=null,this.resolvedWidgets.push(r)}for(const r in n){const s=n[r];s&&this._remove(s)}this.widgets=e}_add(e){const{viewId:n=null,placement:r=DY}=e,s=e.onAdd({deck:this.deck,viewId:n});s&&this._getContainer(n,r).append(s),e._element=s}_remove(e){var n;(n=e.onRemove)==null||n.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,n){var a;const r=e||FA;let s=this.containers[r];s||(s=document.createElement("div"),s.style.pointerEvents="none",s.style.position="absolute",s.style.overflow="hidden",(a=this.parentElement)==null||a.append(s),this.containers[r]=s);let i=s.querySelector(`.${n}`);return i||(i=document.createElement("div"),i.className=n,i.style.position="absolute",i.style.zIndex="2",Object.assign(i.style,PY[n]),s.append(i)),i}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const r in this.containers){const s=this.lastViewports[r]||null,i=r===FA||s,a=this.containers[r];i?(a.style.display="block",a.style.left=`${s?s.x:0}px`,a.style.top=`${s?s.y:0}px`,a.style.width=`${s?s.width:e}px`,a.style.height=`${s?s.height:n}px`):a.style.display="none"}}onRedraw({viewports:e,layers:n}){var s,i;const r=e.reduce((a,l)=>(a[l.id]=l,a),{});for(const a of this.getWidgets()){const{viewId:l}=a;if(l){const u=r[l];u&&(a.onViewportChange&&a.onViewportChange(u),(s=a.onRedraw)==null||s.call(a,{viewports:[u],layers:n}))}else{if(a.onViewportChange)for(const u of e)a.onViewportChange(u);(i=a.onRedraw)==null||i.call(a,{viewports:e,layers:n})}}this.lastViewports=r,this._updateContainers()}onHover(e,n){var r,s;for(const i of this.getWidgets()){const{viewId:a}=i;(!a||a===((r=e.viewport)==null?void 0:r.id))&&((s=i.onHover)==null||s.call(i,e,n))}}onEvent(e,n){var s,i;const r=l_[n.type];if(r)for(const a of this.getWidgets()){const{viewId:l}=a;(!l||l===((s=e.viewport)==null?void 0:s.id))&&((i=a[r])==null||i.call(a,e,n))}}}const FY={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class BY{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,FY),this.deck=e,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:n}=this,r=n&&n.props.getTooltip;if(!r)return;const s=r(e);this.lastViewport=e.viewport,this.setTooltip(s,e.x,e.y)}setTooltip(e,n,r){const s=this.element;if(s){if(typeof e=="string")s.innerText=e;else if(e)e.text&&(s.innerText=e.text),e.html&&(s.innerHTML=e.html),e.className&&(s.className=e.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform=`translate(${n}px, ${r}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(s.style,e.style)}}}var _c;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(_c||(_c={}));const Y0={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Wn=(t,e,n)=>e?t.enable(n):t.disable(n),BA=(t,e,n)=>t.hint(n,e),ss=(t,e,n)=>t.pixelStorei(n,e),LA=(t,e,n)=>{const r=n===36006?36009:36008;return t.bindFramebuffer(r,e)},_f=(t,e,n)=>{const s={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(s,e)};function kx(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const LY={3042:Wn,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Wn,2885:(t,e)=>t.cullFace(e),2929:Wn,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Wn,35723:BA,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:LA,36010:LA,34964:_f,36662:_f,36663:_f,35053:_f,35055:_f,2886:(t,e)=>t.frontFace(e),33170:BA,2849:(t,e)=>t.lineWidth(e),32823:Wn,32824:"polygonOffset",10752:"polygonOffset",35977:Wn,32926:Wn,32928:Wn,32938:"sampleCoverage",32939:"sampleCoverage",3089:Wn,3088:(t,e)=>t.scissor(...e),2960:Wn,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:Wn,10754:Wn,12288:Wn,12289:Wn,12290:Wn,12291:Wn,12292:Wn,12293:Wn,12294:Wn,12295:Wn,3333:ss,3317:ss,37440:ss,37441:ss,37443:ss,3330:ss,3332:ss,3331:ss,3314:ss,32878:ss,3316:ss,3315:ss,32877:ss,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=kx(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=kx(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,a,l]=e;t.stencilFuncSeparate(1028,n,r,s),t.stencilFuncSeparate(1029,i,a,l)},stencilOp:(t,e)=>{e=kx(e)&&e.length===3?[...e,...e]:e;const[n,r,s,i,a,l]=e;t.stencilOpSeparate(1028,n,r,s),t.stencilOpSeparate(1029,i,a,l)},viewport:(t,e)=>t.viewport(...e)};function Dn(t,e,n){return e[t]!==void 0?e[t]:n[t]}const UY={blendEquation:(t,e,n)=>t.blendEquationSeparate(Dn(32777,e,n),Dn(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Dn(32969,e,n),Dn(32968,e,n),Dn(32971,e,n),Dn(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Dn(32824,e,n),Dn(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Dn(32938,e,n),Dn(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Dn(2962,e,n),Dn(2967,e,n),Dn(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Dn(34816,e,n),Dn(36003,e,n),Dn(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Dn(2964,e,n),Dn(2965,e,n),Dn(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Dn(34817,e,n),Dn(34818,e,n),Dn(34819,e,n))},UA={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return r?t({[r]:n}):{valueChanged:!0}},blendColor:(t,e,n,r,s)=>t({32773:new Float32Array([e,n,r,s])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,s)=>t({32969:e,32968:n,32971:r,32970:s}),clearColor:(t,e,n,r,s)=>t({3106:new Float32Array([e,n,r,s])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,s)=>t({3107:[e,n,r,s]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,s)=>t({3088:new Int32Array([e,n,r,s])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,s)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:s}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,s)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:s}),viewport:(t,e,n,r,s)=>t({2978:[e,n,r,s]})},ai=(t,e)=>t.isEnabled(e),zA={3042:ai,2884:ai,2929:ai,3024:ai,32823:ai,32926:ai,32928:ai,3089:ai,2960:ai,35977:ai},zY=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function gu(t,e){if($Y(e))return;const n={};for(const s in e){const i=Number(s),a=LY[s];a&&(typeof a=="string"?n[a]=!0:a(t,e[s],i))}const r=t.state&&t.state.cache;if(r)for(const s in n){const i=UY[s];i(t,e,r)}}function XI(t,e=Y0){if(typeof e=="number"){const s=e,i=zA[s];return i?i(t,s):t.getParameter(s)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const s of n){const i=zA[s];r[s]=i?i(t,Number(s)):t.getParameter(Number(s))}return r}function VY(t){gu(t,Y0)}function $Y(t){for(const e in t)return!1;return!0}function HY(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}return!1}class Qa{constructor(e,n){z(this,"gl");z(this,"program",null);z(this,"stateStack",[]);z(this,"enable",!0);z(this,"cache",null);z(this,"log");z(this,"initialized",!1);this.gl=e,this.log=(n==null?void 0:n.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];gu(this.gl,e),this.stateStack.pop()}trackState(e,n){if(this.cache=n.copyState?XI(e):Object.assign({},Y0),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,qY(e);for(const r in UA){const s=UA[r];WY(e,r,s)}VA(e,"getParameter"),VA(e,"isEnabled")}_updateCache(e){let n=!1,r;const s=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const i in e){const a=e[i],l=this.cache[i];HY(a,l)||(n=!0,r=l,s&&!(i in s)&&(s[i]=l),this.cache[i]=a)}return{valueChanged:n,oldValue:r}}}function VA(t,e){const n=t[e].bind(t);t[e]=function(s){if(s===void 0||zY.has(s))return n(s);const i=Qa.get(t);return s in i.cache||(i.cache[s]=n(s)),i.enable?i.cache[s]:n(s)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function WY(t,e,n){if(!t[e])return;const r=t[e].bind(t);t[e]=function(...i){const a=Qa.get(t),{valueChanged:l,oldValue:u}=n(a._updateCache,...i);return l&&r(...i),u},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function qY(t){const e=t.useProgram.bind(t);t.useProgram=function(r){const s=Qa.get(t);s.program!==r&&(e(r),s.program=r)}}function XY(t,e,n){let r="";const s={preserveDrawingBuffer:!0,...n};let i=null;if(i||(i=t.getContext("webgl2",s)),s.failIfMajorPerformanceCaveat&&(r||(r="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!i&&!n.failIfMajorPerformanceCaveat&&(s.failIfMajorPerformanceCaveat=!1,i=t.getContext("webgl2",s),i.luma||(i.luma={}),i.luma.softwareRenderer=!0),i||(i=t.getContext("webgl",{}),i&&(i=null,r||(r="Your browser only supports WebGL1"))),!i)throw r||(r="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${r}`);const{onContextLost:a,onContextRestored:l}=e;return t.addEventListener("webglcontextlost",u=>a(u),!1),t.addEventListener("webglcontextrestored",u=>l(u),!1),i.luma||(i.luma={}),i}function su(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function YY(t,e){const n=t.getParameter(7936),r=t.getParameter(7937);su(t,"WEBGL_debug_renderer_info",e);const s=e.WEBGL_debug_renderer_info,i=t.getParameter(s?s.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(s?s.UNMASKED_RENDERER_WEBGL:7937),l=i||n,u=a||r,h=t.getParameter(7938),d=YI(l,u),g=KY(l,u),b=ZY(l,u);return{type:"webgl",gpu:d,gpuType:b,gpuBackend:g,vendor:l,renderer:u,version:h,shadingLanguage:"glsl",shadingLanguageVersion:300}}function YI(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function KY(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function ZY(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(YI(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function KI(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const Df="WEBGL_compressed_texture_s3tc",jf="WEBGL_compressed_texture_s3tc_srgb",wc="EXT_texture_compression_rgtc",Sc="EXT_texture_compression_bptc",QY="WEBGL_compressed_texture_etc",GY="WEBGL_compressed_texture_astc",JY="WEBGL_compressed_texture_etc1",eK="WEBGL_compressed_texture_pvrtc",tK="WEBGL_compressed_texture_atc",$A="EXT_texture_norm16",HA="EXT_render_snorm",nK="EXT_color_buffer_float",K0={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[HA],"norm16-renderable-webgl":[$A],"snorm16-renderable-webgl":[$A,HA],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Df,jf,wc,Sc],"texture-compression-bc5-webgl":[wc],"texture-compression-bc7-webgl":[Sc],"texture-compression-etc2":[QY],"texture-compression-astc":[GY],"texture-compression-etc1-webgl":[JY],"texture-compression-pvrtc-webgl":[eK],"texture-compression-atc-webgl":[tK]};function rK(t){return t in K0}function sK(t,e,n){return(K0[e]||[]).every(s=>su(t,s,n))}const Z0={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:nK,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Df},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:jf},"bc1-rgba-unorm":{gl:33777,x:Df},"bc1-rgba-unorm-srgb":{gl:35916,x:jf},"bc2-rgba-unorm":{gl:33778,x:Df},"bc2-rgba-unorm-srgb":{gl:35918,x:jf},"bc3-rgba-unorm":{gl:33779,x:Df},"bc3-rgba-unorm-srgb":{gl:35919,x:jf},"bc4-r-unorm":{gl:36283,x:wc},"bc4-r-snorm":{gl:36284,x:wc},"bc5-rg-unorm":{gl:36285,x:wc},"bc5-rg-snorm":{gl:36286,x:wc},"bc6h-rgb-ufloat":{gl:36495,x:Sc},"bc6h-rgb-float":{gl:36494,x:Sc},"bc7-rgba-unorm":{gl:36492,x:Sc},"bc7-rgba-unorm-srgb":{gl:36493,x:Sc},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function iK(t,e,n){let r=e.create;const s=Z0[e.format];return(s==null?void 0:s.gl)===void 0&&(r=!1),s!=null&&s.x&&(r=r&&!!su(t,s.x,n)),{format:e.format,create:r&&e.create,render:r&&e.render,filter:r&&e.filter,blend:r&&e.blend,store:r&&e.store}}function ZI(t){var s;const e=Z0[t],n=lK(t),r=O0(t);return{internalFormat:n,format:(e==null?void 0:e.dataFormat)||aK(r.channels,r.integer,r.normalized,n),type:r.dataType?KI(r.dataType):((s=e==null?void 0:e.types)==null?void 0:s[0])||5121,compressed:r.compressed||!1}}function oK(t){switch(O0(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function aK(t,e,n,r){if(r===6408||r===6407)return r;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function lK(t){const e=Z0[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}const WA={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class cK extends e7{constructor(n,r,s){super([],s);z(this,"gl");z(this,"extensions");z(this,"testedFeatures",new Set);this.gl=n,this.extensions=r,su(n,"EXT_color_buffer_float",r)}*[Symbol.iterator](){const n=this.getFeatures();for(const r of n)this.has(r)&&(yield r);return[]}has(n){var r;return(r=this.disabledFeatures)!=null&&r[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),rK(n)&&sK(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(r=>r!=="polygon-mode-webgl");for(const r of n)this.has(r)}getFeatures(){return[...Object.keys(WA),...Object.keys(K0)]}getWebGLFeature(n){const r=WA[n];return typeof r=="string"?!!su(this.gl,r,this.extensions):!!r}}class uK extends J9{constructor(n){super();z(this,"gl");z(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]||0}}class Vf extends ig{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"colorAttachments",[]);z(this,"depthStencilAttachment",null);const s=r.handle===null;this.device=n,this.gl=n.gl,this.handle=this.props.handle||s?this.props.handle:this.gl.createFramebuffer(),s||(n.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const n=this.gl.bindFramebuffer(36160,this.handle);for(let r=0;r<this.colorAttachments.length;++r){const s=this.colorAttachments[r];if(s){const i=36064+r;this._attachTextureView(i,s)}}if(this.depthStencilAttachment){const r=oK(this.depthStencilAttachment.props.format);this._attachTextureView(r,this.depthStencilAttachment)}if(this.device.props.debug){const r=this.gl.checkFramebufferStatus(36160);if(r!==36053)throw new Error(`Framebuffer ${hK(r)}`)}this.gl.bindFramebuffer(36160,n)}_attachTextureView(n,r){const{gl:s}=this.device,{texture:i}=r,a=r.props.baseMipLevel,l=r.props.baseArrayLayer;switch(s.bindTexture(i.glTarget,i.handle),i.glTarget){case 35866:case 32879:s.framebufferTextureLayer(36160,n,i.handle,a,l);break;case 34067:const u=fK(l);s.framebufferTexture2D(36160,n,u,i.handle,a);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,a);break;default:throw new Error("Illegal texture type")}s.bindTexture(i.glTarget,null)}}function fK(t){return t<34069?t+34069:t}function hK(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class dK extends qv{constructor(n,r){super(r);z(this,"device");z(this,"format","rgba8unorm");z(this,"depthStencilFormat","depth24plus");z(this,"presentationSize");z(this,"_framebuffer",null);this.device=n,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Vf(this.device,{handle:null}),this._framebuffer}update(){const n=this.getPixelSize();(n[0]!==this.presentationSize[0]||n[1]!==this.presentationSize[1])&&(this.presentationSize=n,this.resize())}resize(n){if(this.device.gl&&this.canvas){const r=this.getDevicePixelRatio(n==null?void 0:n.useDevicePixels);this.setDevicePixelRatio(r,n);return}}commit(){}}async function QI(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",t),new Promise((s,i)=>{r.onload=s,r.onerror=a=>i(new Error(`Unable to load script '${t}': ${a}`)),n.appendChild(r)})}const pK=1;let bn=null,qA=!1;const Q0={debugSpectorJS:Xe.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function gK(t){if(!globalThis.SPECTOR)try{await QI(t.debugSpectorJSUrl||Q0.debugSpectorJSUrl)}catch(e){Xe.warn(String(e))}}function mK(t){var e;if(t={...Q0,...t},!t.debugSpectorJS)return null;if(!bn&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){Xe.probe(pK,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:n}=globalThis.SPECTOR;bn=new n,globalThis.luma&&(globalThis.luma.spector=bn)}if(!bn)return null;if(qA||(qA=!0,bn.spyCanvases(),bn==null||bn.onCaptureStarted.add(n=>Xe.info("Spector capture started:",n)()),bn==null||bn.onCapture.add(n=>{Xe.info("Spector capture complete:",n)(),bn==null||bn.getResultUI(),bn==null||bn.resultView.display(),bn==null||bn.resultView.addCapture(n)})),t.gl){const n=t.gl,r=n.device;bn==null||bn.startCapture(t.gl,500),n.device=r,new Promise(s=>setTimeout(s,2e3)).then(s=>{Xe.info("Spector capture stopped after 2 seconds")(),bn==null||bn.stopCapture()})}return bn}const yK="https://unpkg.com/webgl-debug@2.0.1/index.js";function GI(t){return t.luma=t.luma||{},t.luma}async function bK(){gl()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await QI(yK))}function xK(t,e={}){return e.debugWebGL||e.traceWebGL?_K(t,e):vK(t)}function vK(t){const e=GI(t);return e.realContext?e.realContext:t}function _K(t,e){if(!globalThis.WebGLDebugUtils)return Xe.warn("webgl-debug not loaded")(),t;const n=GI(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({..._c,...t});const r=globalThis.WebGLDebugUtils.makeDebugContext(t,wK.bind(null,e),SK.bind(null,e));for(const a in _c)!(a in r)&&typeof _c[a]=="number"&&(r[a]=_c[a]);class s{}Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.setPrototypeOf(s,r);const i=Object.create(s);return n.realContext=t,n.debugContext=i,i.debug=!0,i}function XA(t,e){e=Array.from(e).map(r=>r===void 0?"undefined":r);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function wK(t,e,n,r){r=Array.from(r).map(l=>l===void 0?"undefined":l);const s=globalThis.WebGLDebugUtils.glEnumToString(e),i=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r),a=`${s} in gl.${n}(${i})`;Xe.error(a)();debugger}function SK(t,e,n){let r="";Xe.level>=1&&(r=XA(e,n),t.traceWebGL&&Xe.log(1,r)());for(const s of n)if(s===void 0){r=r||XA(e,n);debugger}}const Nx={};function TK(t="id"){Nx[t]=Nx[t]||1;const e=Nx[t]++;return`${t}-${e}`}class $f extends kn{constructor(n,r={}){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"glTarget");z(this,"glUsage");z(this,"glIndexType",5123);z(this,"byteLength");z(this,"bytesUsed");this.device=n,this.gl=this.device.gl;const s=typeof r=="object"?r.handle:void 0;this.handle=s||this.gl.createBuffer(),n.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=EK(this.props.usage),this.glUsage=AK(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,r.data?this._initWithData(r.data,r.byteOffset,r.byteLength):this._initWithByteLength(r.byteLength||0)}_initWithData(n,r=0,s=n.byteLength+r){const i=this.glTarget;this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,s,this.glUsage),this.gl.bufferSubData(i,r,n),this.gl.bindBuffer(i,null),this.bytesUsed=s,this.byteLength=s,this._setDebugData(n,r,s),this.trackAllocatedMemory(s)}_initWithByteLength(n){let r=n;n===0&&(r=new Float32Array(0));const s=this.glTarget;return this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.glUsage),this.gl.bindBuffer(s,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(n,r=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,r,n),this.gl.bindBuffer(36663,null),this._setDebugData(n,r,n.byteLength)}async readAsync(n=0,r){return this.readSyncWebGL(n,r)}readSyncWebGL(n=0,r){r=r??this.byteLength-n;const s=new Uint8Array(r),i=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,s,i,r),this.gl.bindBuffer(36662,null),this._setDebugData(s,n,r),s}}function EK(t){return t&kn.INDEX?34963:t&kn.VERTEX?34962:t&kn.UNIFORM?35345:34962}function AK(t){return t&kn.INDEX||t&kn.VERTEX?35044:t&kn.UNIFORM?35048:35044}function RK(t){const e=t.split(/\r?\n/),n=[];for(const r of e){if(r.length<=1)continue;const s=r.split(":");if(s.length===2){const[g,b]=s;n.push({message:b.trim(),type:YA(g),lineNum:0,linePos:0});continue}const[i,a,l,...u]=s;let h=parseInt(l,10);isNaN(h)&&(h=0);let d=parseInt(a,10);isNaN(d)&&(d=0),n.push({message:u.join(":").trim(),type:YA(i),lineNum:h,linePos:d})}return n}function YA(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class CK extends rg{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return n?RK(n):[]}getTranslatedSource(){const r=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(r==null?void 0:r.getTranslatedShaderSource(this.handle))||null}async _compile(n){n=n.startsWith("#version ")?n:`#version 300 es
${n}`;const{gl:r}=this.device;if(r.shaderSource(this.handle,n),r.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}Xe.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),Xe.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async i=>await new Promise(a=>setTimeout(a,i));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:s}=this.device;for(;;){if(s.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function kK(t,e,n,r){if(OK(e))return r(t);const s=t;s.pushState();try{return NK(t,e),gu(s.gl,n),r(t)}finally{s.popState()}}function NK(t,e){const n=t,{gl:r}=n;if(e.cullMode)switch(e.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029);break}if(e.frontFace&&r.frontFace(Ga("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&r.enable(34383),e.depthBias!==void 0&&(r.enable(32823),r.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const i=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=Ga("provokingVertex",e.provokingVertex,{first:36429,last:36430});i==null||i.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const i=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=Ga("polygonMode",e.polygonMode,{fill:6914,line:6913});i==null||i.polygonModeWEBGL(1028,a),i==null||i.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&r.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&r.enable(12288),e.clipDistance1&&r.enable(12289),e.clipDistance2&&r.enable(12290),e.clipDistance3&&r.enable(12291),e.clipDistance4&&r.enable(12292),e.clipDistance5&&r.enable(12293),e.clipDistance6&&r.enable(12294),e.clipDistance7&&r.enable(12295)),e.depthWriteEnabled!==void 0&&r.depthMask(IK("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?r.enable(2929):r.disable(2929),r.depthFunc(y_("depthCompare",e.depthCompare))),e.stencilWriteMask){const s=e.stencilWriteMask;r.stencilMaskSeparate(1028,s),r.stencilMaskSeparate(1029,s)}if(e.stencilReadMask&&Xe.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const s=e.stencilReadMask||4294967295,i=y_("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,i,0,s),r.stencilFuncSeparate(1029,i,0,s)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const s=Mx("stencilPassOperation",e.stencilPassOperation),i=Mx("stencilFailOperation",e.stencilFailOperation),a=Mx("stencilDepthFailOperation",e.stencilDepthFailOperation);r.stencilOpSeparate(1028,i,a,s),r.stencilOpSeparate(1029,i,a,s)}switch(e.blend){case!0:r.enable(3042);break;case!1:r.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const s=KA("blendColorOperation",e.blendColorOperation||"add"),i=KA("blendAlphaOperation",e.blendAlphaOperation||"add");r.blendEquationSeparate(s,i);const a=pp("blendColorSrcFactor",e.blendColorSrcFactor||"one"),l=pp("blendColorDstFactor",e.blendColorDstFactor||"zero"),u=pp("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),h=pp("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");r.blendFuncSeparate(a,l,u,h)}}function y_(t,e){return Ga(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Mx(t,e){return Ga(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function KA(t,e){return Ga(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function pp(t,e){return Ga(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function MK(t,e){return`Illegal parameter ${e} for ${t}`}function Ga(t,e,n){if(!(e in n))throw new Error(MK(t,e));return n[e]}function IK(t,e){return e}function OK(t){let e=!0;for(const n in t){e=!1;break}return e}function JI(t){const e={};return t.addressModeU&&(e[10242]=Ix(t.addressModeU)),t.addressModeV&&(e[10243]=Ix(t.addressModeV)),t.addressModeW&&(e[32882]=Ix(t.addressModeW)),t.magFilter&&(e[10240]=b_(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=PK(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=y_("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function Ix(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function b_(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function PK(t,e="none"){if(!e)return b_(t);switch(e){case"none":return b_(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class x_ extends sg{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"parameters");this.device=n,this.parameters=JI(r),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[r,s]of Object.entries(n)){const i=Number(r);switch(i){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,i,s);break;default:this.device.gl.samplerParameteri(this.handle,i,s);break}}}}class Tc extends ng{constructor(n,r){super(n,{...Fn.defaultProps,...r});z(this,"device");z(this,"gl");z(this,"handle");z(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=r.texture}}const DK="Failed to deduce GL constant from typed array";function jK(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(DK)}}function FK(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function eO(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function BK(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function vg(t,e,n){if(LK(e))return n(t);const{nocatch:r=!0}=e,s=Qa.get(t);s.push(),gu(t,e);let i;if(r)i=n(t),s.pop();else try{i=n(t)}finally{s.pop()}return i}function LK(t){for(const e in t)return!1;return!0}function UK(t,e,n){const{dimension:r,width:s,height:i,depth:a=0}=n,{glInternalFormat:l}=n,u=n.glTarget;switch(r){case"2d-array":case"3d":t.texStorage3D(u,e,l,s,i,a);break;default:t.texStorage2D(u,e,l,s,i)}}function ZA(t,e,n,r){const{width:s,height:i}=r,{dimension:a,depth:l=0,mipLevel:u=0}=r,{x:h=0,y:d=0,z:g=0}=r,{glFormat:b,glType:w}=r,R=tO(r.glTarget,a,l),A=r.flipY?{37440:!0}:{};vg(t,A,()=>{switch(a){case"2d-array":case"3d":t.bindTexture(R,e),t.texSubImage3D(R,u,h,d,g,s,i,l,b,w,n),t.bindTexture(R,null);break;case"2d":case"cube":t.bindTexture(R,e),t.texSubImage2D(R,u,h,d,s,i,b,w,n),t.bindTexture(R,null);break;default:throw new Error(a)}})}function QA(t,e,n){const{dimension:r,width:s,height:i,depth:a=0,mipLevel:l=0,byteOffset:u=0}=n,{x:h=0,y:d=0,z:g=0}=n,{glFormat:b,glType:w,compressed:R}=n,A=tO(n.glTarget,r,a);switch(r){case"2d-array":case"3d":R?t.compressedTexSubImage3D(A,l,h,d,g,s,i,a,b,e,u):t.texSubImage3D(A,l,h,d,g,s,i,a,b,w,e,u);break;case"2d":case"cube":R?t.compressedTexSubImage2D(A,l,h,d,s,i,b,e,u):t.texSubImage2D(A,l,h,d,s,i,b,w,e,u);break;default:throw new Error(r)}}function zK(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function tO(t,e,n){return e==="cube"?34069+n:t}function VK(t,e){var I;const{sourceX:n=0,sourceY:r=0,sourceAttachment:s=0}=e||{};let{target:i=null,sourceWidth:a,sourceHeight:l,sourceDepth:u,sourceFormat:h,sourceType:d}=e||{};const{framebuffer:g,deleteFramebuffer:b}=nO(t),{gl:w,handle:R}=g;a||(a=g.width),l||(l=g.height);const A=(I=g.colorAttachments[s])==null?void 0:I.texture;if(!A)throw new Error(`Invalid framebuffer attachment ${s}`);u=(A==null?void 0:A.depth)||1,h||(h=(A==null?void 0:A.glFormat)||6408),d||(d=(A==null?void 0:A.glType)||5121),i=WK(i,d,h,a,l),d=d||jK(i);const C=w.bindFramebuffer(36160,R);return w.readBuffer(36064+s),w.readPixels(n,r,a,l,h,d,i),w.readBuffer(36064),w.bindFramebuffer(36160,C||null),b&&g.destroy(),i}function $K(t,e){const{target:n,sourceX:r=0,sourceY:s=0,sourceFormat:i=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:l,sourceHeight:u,sourceType:h}=e||{};const{framebuffer:d,deleteFramebuffer:g}=nO(t);l=l||d.width,u=u||d.height;const b=d;h=h||5121;let w=n;if(!w){const A=eO(i),C=BK(h),I=a+l*u*A*C;w=b.device.createBuffer({byteLength:I})}const R=t.device.createCommandEncoder();return R.copyTextureToBuffer({sourceTexture:t,width:l,height:u,origin:[r,s],destinationBuffer:w,byteOffset:a}),R.destroy(),g&&d.destroy(),w}function nO(t){return t instanceof ig?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:HK(t),deleteFramebuffer:!0}}function HK(t,e){const{device:n,width:r,height:s,id:i}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${i}`,width:r,height:s,colorAttachments:[t]})}function WK(t,e,n,r,s,i){if(t)return t;e||(e=5121);const a=FK(e,{clamped:!1}),l=eO(n);return new a(r*s*l)}class Hf extends Fn{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"sampler");z(this,"view");z(this,"mipmaps");z(this,"compressed");z(this,"glTarget");z(this,"glFormat");z(this,"glType");z(this,"glInternalFormat");z(this,"textureUnit",0);const s={...this.props};s.data=r.data,this.device=n,this.gl=this.device.gl,this.glTarget=zK(this.props.dimension);const i=ZI(this.props.format);this.glInternalFormat=i.internalFormat,this.glFormat=i.format,this.glType=i.type,this.compressed=i.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(s),Object.seal(this)}_initialize(n){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:n.data});let{width:r,height:s}=n;if(!r||!s){const i=Fn.getTextureDataSize(n.data);r=(i==null?void 0:i.width)||1,s=(i==null?void 0:i.height)||1}if(this.width=r,this.height=s,this.depth=n.depth,this.setSampler(n.sampler),this.view=new Tc(this.device,{...this.props,texture:this}),this.bind(),UK(this.gl,this.mipLevels,this),n.data)switch(n.dimension){case"1d":this.setTexture1DData(n.data);break;case"2d":this.setTexture2DData(n.data);break;case"3d":this.setTexture3DData(n.data);break;case"cube":this.setTextureCubeData(n.data);break;case"2d-array":this.setTextureArrayData(n.data);break;case"cube-array":this.setTextureCubeArrayData(n.data);break;default:throw new Error(n.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(n){return new Tc(this.device,{...n,texture:this})}setSampler(n={}){let r;n instanceof x_?(this.sampler=n,r=n.props):(this.sampler=new x_(this.device,n),r=n);const s=JI(r);this._setSamplerParameters(s)}generateMipmap(n){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(Xe.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(n!=null&&n.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(s){Xe.warn(`Error generating mipmap for ${this}: ${s.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(n){const r=Fn.getExternalImageSize(n.image),s={...Fn.defaultCopyExternalImageOptions,...r,...n},{image:i,depth:a,mipLevel:l,x:u,y:h,z:d,flipY:g}=s;let{width:b,height:w}=s;const{dimension:R,glTarget:A,glFormat:C,glInternalFormat:I,glType:M}=this;if(b=Math.min(b,this.width-u),w=Math.min(w,this.height-h),n.sourceX||n.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return ZA(this.device.gl,this.handle,i,{dimension:R,mipLevel:l,x:u,y:h,z:d,width:b,height:w,depth:a,glFormat:C,glType:M,glTarget:A,flipY:g}),{width:s.width,height:s.height}}setTexture1DData(n){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(n,r=0){this.bind();const s=Fn.normalizeTextureData(n,this);s.length>1&&this.props.mipmaps!==!1&&Xe.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let i=0;i<s.length;i++){const a=s[i];this._setMipLevel(r,i,a)}this.unbind()}setTexture3DData(n){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(n)&&(this.bind(),QA(this.device.gl,n,this),this.unbind())}setTextureCubeData(n,r=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const s of Fn.CubeFaces)this.setTextureCubeFaceData(n[s],s)}setTextureArrayData(n){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(n){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(n,r,s=0){Array.isArray(n)&&n.length>1&&this.props.mipmaps!==!1&&Xe.warn(`${this.id} has mipmap and multiple LODs.`)();const i=Fn.CubeFaces.indexOf(r);this.setTexture2DData(n,i)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(n){const{face:r,width:s,height:i,pixels:a,data:l,format:u=6408,type:h=5121}=n,{gl:d}=this,g=a||l;this.bind(),g instanceof Promise?g.then(b=>this.setImageDataForFace(Object.assign({},n,{face:r,data:b,pixels:b}))):this.width||this.height?d.texImage2D(r,0,u,s,i,0,u,h,g):d.texImage2D(r,0,u,u,h,g)}_getImageDataMap(n){for(let r=0;r<Fn.CubeFaces.length;++r){const s=Fn.CubeFaces[r];n[s]&&(n[34069+r]=n[s],delete n[s])}return n}_setSamplerParameters(n){Xe.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(n))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[r,s]of Object.entries(n)){const i=Number(r),a=s;switch(i){case 33082:case 33083:this.gl.texParameterf(this.glTarget,i,a);break;case 10241:this.gl.texParameteri(this.glTarget,i,a);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,i,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,i,a);break;default:this.gl.texParameteri(this.glTarget,i,a);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(n,r,s,i=this.glTarget){if(Fn.isExternalImage(s)){ZA(this.device.gl,this.handle,s,{...this,depth:n,mipLevel:r,glTarget:i,flipY:this.props.flipY});return}if(Fn.isTextureLevelData(s)){QA(this.device.gl,s.data,{...this,depth:n,mipLevel:r,glTarget:i});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,this.handle),n}unbind(n){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.glTarget,null),n}}const qK=[1,2,4,8];class XK extends Xv{constructor(n,r){var a;super(n,r);z(this,"device");z(this,"glParameters");this.device=n;let s;if(!((a=r==null?void 0:r.parameters)!=null&&a.viewport))if(r!=null&&r.framebuffer){const{width:l,height:u}=r.framebuffer;s=[0,0,l,u]}else{const[l,u]=n.getCanvasContext().getDrawingBufferSize();s=[0,0,l,u]}this.device.pushState(),this.setParameters({viewport:s,...this.props.parameters});const i=this.props.framebuffer;if(i!=null&&i.handle)if(this.props.framebuffer){const l=this.props.framebuffer.colorAttachments.map((u,h)=>36064+h);this.device.gl.drawBuffers(l)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const r={...this.glParameters};r.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(r.depthMask=!this.props.depthReadOnly),r.stencilMask=this.props.stencilReadOnly?0:1,r[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(r.viewport=n.viewport.slice(0,4),r.depthRange=[n.viewport[4],n.viewport[5]]):r.viewport=n.viewport),n.scissorRect&&(r.scissorTest=!0,r.scissor=n.scissorRect),n.blendConstant&&(r.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),n[2967]=n.stencilReference),n.colorMask&&(r.colorMask=qK.map(s=>!!(s&n.colorMask))),this.glParameters=r,gu(this.device.gl,r)}beginOcclusionQuery(n){const r=this.props.occlusionQuerySet;r==null||r.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let r=0;this.props.clearColors&&this.props.clearColors.forEach((s,i)=>{s&&this.clearColorBuffer(i,s)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(r|=16384,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(r|=256,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(r|=1024,n.clearStencil=this.props.clearStencil),r!==0&&vg(this.device.gl,n,()=>{this.device.gl.clear(r)})}clearColorBuffer(n=0,r=[0,0,0,0]){vg(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(r.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,n,r);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,n,r);break;case Float32Array:this.device.gl.clearBufferfv(6144,n,r);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function YK(t){return KK.includes(t)}const KK=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],rO={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function sO(t){const e=rO[t];if(!e)throw new Error("uniform");const[n,r,,s]=e;return{format:s,components:r,glType:n}}function ZK(t){const e=rO[t];if(!e)throw new Error("attribute");const[,n,,r,s]=e;return{attributeType:r,vertexFormat:s,components:n}}function QK(t,e){const n={attributes:[],bindings:[]};n.attributes=GK(t,e);const r=tZ(t,e);for(const l of r){const u=l.uniforms.map(h=>({name:h.name,format:h.format,byteOffset:h.byteOffset,byteStride:h.byteStride,arrayLength:h.arrayLength}));n.bindings.push({type:"uniform",name:l.name,group:0,location:l.location,visibility:(l.vertex?1:0)&(l.fragment?2:0),minBindingSize:l.byteLength,uniforms:u})}const s=eZ(t,e);let i=0;for(const l of s)if(YK(l.type)){const{viewDimension:u,sampleType:h}=rZ(l.type);n.bindings.push({type:"texture",name:l.name,group:0,location:i,viewDimension:u,sampleType:h}),l.textureUnit=i,i+=1}s.length&&(n.uniforms=s);const a=JK(t,e);return a!=null&&a.length&&(n.varyings=a),n}function GK(t,e){const n=[],r=t.getProgramParameter(e,35721);for(let s=0;s<r;s++){const i=t.getActiveAttrib(e,s);if(!i)throw new Error("activeInfo");const{name:a,type:l}=i,u=t.getAttribLocation(e,a);if(u>=0){const{attributeType:h}=ZK(l),d=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:u,stepMode:d,type:h})}}return n.sort((s,i)=>s.location-i.location),n}function JK(t,e){const n=[],r=t.getProgramParameter(e,35971);for(let s=0;s<r;s++){const i=t.getTransformFeedbackVarying(e,s);if(!i)throw new Error("activeInfo");const{name:a,type:l,size:u}=i,{glType:h,components:d}=sO(l),g={location:s,name:a,type:h,size:u*d};n.push(g)}return n.sort((s,i)=>s.location-i.location),n}function eZ(t,e){const n=[],r=t.getProgramParameter(e,35718);for(let s=0;s<r;s++){const i=t.getActiveUniform(e,s);if(!i)throw new Error("activeInfo");const{name:a,size:l,type:u}=i,{name:h,isArray:d}=sZ(a);let g=t.getUniformLocation(e,h);const b={location:g,name:h,size:l,type:u,isArray:d};if(n.push(b),b.size>1)for(let w=0;w<b.size;w++){const R=`${h}[${w}]`;g=t.getUniformLocation(e,R);const A={...b,name:R,location:g};n.push(A)}}return n}function tZ(t,e){const n=(i,a)=>t.getActiveUniformBlockParameter(e,i,a),r=[],s=t.getProgramParameter(e,35382);for(let i=0;i<s;i++){const a={name:t.getActiveUniformBlockName(e,i)||"",location:n(i,35391),byteLength:n(i,35392),vertex:n(i,35396),fragment:n(i,35398),uniformCount:n(i,35394),uniforms:[]},l=n(i,35395)||[],u=t.getActiveUniforms(e,l,35383),h=t.getActiveUniforms(e,l,35384),d=t.getActiveUniforms(e,l,35387),g=t.getActiveUniforms(e,l,35388);for(let b=0;b<a.uniformCount;++b){const w=t.getActiveUniform(e,l[b]);if(!w)throw new Error("activeInfo");a.uniforms.push({name:w.name,format:sO(u[b]).format,type:u[b],arrayLength:h[b],byteOffset:d[b],byteStride:g[b]})}r.push(a)}return r.sort((i,a)=>i.location-a.location),r}const nZ={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function rZ(t){const e=nZ[t];if(!e)throw new Error("sampler");const[n,r]=e;return{viewDimension:n,sampleType:r}}function sZ(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function iZ(t,e,n,r){const s=t;let i=r;i===!0&&(i=1),i===!1&&(i=0);const a=typeof i=="number"?[i]:i;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof r!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,r);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return s.uniform1uiv(e,a,1);case 36294:return s.uniform2uiv(e,a,2);case 36295:return s.uniform3uiv(e,a,3);case 36296:return s.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return s.uniformMatrix2x3fv(e,!1,a);case 35686:return s.uniformMatrix2x4fv(e,!1,a);case 35687:return s.uniformMatrix3x2fv(e,!1,a);case 35688:return s.uniformMatrix3x4fv(e,!1,a);case 35689:return s.uniformMatrix4x2fv(e,!1,a);case 35690:return s.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function oZ(t){return FI(t)!==null||typeof t=="number"||typeof t=="boolean"}function aZ(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];oZ(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}function lZ(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function cZ(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const GA=4;class uZ extends Kc{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"vs");z(this,"fs");z(this,"introspectedLayout");z(this,"uniforms",{});z(this,"bindings",{});z(this,"varyings",null);z(this,"_uniformCount",0);z(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=r.vs,this.fs=r.fs;const{varyings:s,bufferMode:i=35981}=r;s&&s.length>0&&(this.varyings=s,this.device.gl.transformFeedbackVaryings(this.handle,s,i)),this._linkShaders(),Xe.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=QK(this.device.gl,this.handle),Xe.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=fZ(this.introspectedLayout,r.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(n,r){for(const[s,i]of Object.entries(n)){const a=this.shaderLayout.bindings.find(l=>l.name===s)||this.shaderLayout.bindings.find(l=>l.name===`${s}Uniforms`);if(!a){const l=this.shaderLayout.bindings.map(u=>`"${u.name}"`).join(", ");r!=null&&r.disableWarnings||Xe.warn(`No binding "${s}" in render pipeline "${this.id}", expected one of ${l}`,i)();continue}switch(i||Xe.warn(`Unsetting binding "${s}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(i instanceof $f)&&!(i.buffer instanceof $f))throw new Error("buffer value");break;case"texture":if(!(i instanceof Tc||i instanceof Hf||i instanceof Vf))throw new Error("texture value");break;case"sampler":Xe.warn(`Ignoring sampler ${s}`)();break;default:throw new Error(a.type)}this.bindings[s]=i}}draw(n){var C;const{renderPass:r,parameters:s=this.props.parameters,topology:i=this.props.topology,vertexArray:a,vertexCount:l,instanceCount:u,isInstanced:h=!1,firstVertex:d=0,transformFeedback:g}=n,b=lZ(i),w=!!a.indexBuffer,R=(C=a.indexBuffer)==null?void 0:C.glIndexType;if(this.linkStatus!=="success")return Xe.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return Xe.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(r),g&&g.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const A=r;return kK(this.device,s,A.glParameters,()=>{w&&h?this.device.gl.drawElementsInstanced(b,l||0,R,d,u||0):w?this.device.gl.drawElements(b,l||0,R,d):h?this.device.gl.drawArraysInstanced(b,d,l||0,u||0):this.device.gl.drawArrays(b,d,l||0),g&&g.end()}),a.unbindAfterRender(r),!0}setUniformsWebGL(n){const{bindings:r}=aZ(n);Object.keys(r).forEach(s=>{Xe.warn(`Unsupported value "${JSON.stringify(r[s])}" used in setUniforms() for key ${s}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,n)}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),Xe.time(GA,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),Xe.timeEnd(GA,`linkProgram for ${this.id}`)(),Xe.level,!this.device.features.has("compilation-status-async-webgl")){const s=this._getLinkStatus();this._reportLinkStatus(s);return}Xe.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),Xe.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const r=this._getLinkStatus();this._reportLinkStatus(r)}async _reportLinkStatus(n){var r;switch(n){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((r=this.fs)==null?void 0:r.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const s=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${n}: ${s}`)}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const n=async i=>await new Promise(a=>setTimeout(a,i));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:s}=this.device;for(;;){if(s.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const r of this.shaderLayout.bindings)!this.bindings[r.name]&&!this.bindings[r.name.replace(/Uniforms$/,"")]&&(Xe.warn(`Binding ${r.name} not found in ${this.id}`)(),n=!1);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let r=0,s=0;for(const i of this.shaderLayout.bindings){const a=this.bindings[i.name]||this.bindings[i.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${i.name} in ${this.id}`);switch(i.type){case"uniform":const{name:l}=i,u=n.getUniformBlockIndex(this.handle,l);if(u===4294967295)throw new Error(`Invalid uniform block name ${l}`);n.uniformBlockBinding(this.handle,s,u),a instanceof $f?n.bindBufferBase(35345,s,a.handle):n.bindBufferRange(35345,s,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),s+=1;break;case"texture":if(!(a instanceof Tc||a instanceof Hf||a instanceof Vf))throw new Error("texture");let h;if(a instanceof Tc)h=a.texture;else if(a instanceof Hf)h=a;else if(a instanceof Vf&&a.colorAttachments[0]instanceof Tc)Xe.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),h=a.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+r),n.bindTexture(h.glTarget,h.handle),r+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${i.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:r,location:s,type:i,textureUnit:a}=n,l=this.uniforms[r]??a;l!==void 0&&iZ(this.device.gl,s,i,l)}}}function fZ(t,e){const n={...t,attributes:t.attributes.map(r=>({...r}))};for(const r of(e==null?void 0:e.attributes)||[]){const s=n.attributes.find(i=>i.name===r.name);s?(s.type=r.type||s.type,s.stepMode=r.stepMode||s.stepMode):Xe.warn(`shader layout attribute ${r.name} not present in shader`)}return n}class hZ extends Kv{constructor(n){super(n,{});z(this,"device");z(this,"commands",[]);this.device=n}submitCommands(n=this.commands){for(const r of n)switch(r.name){case"copy-buffer-to-buffer":dZ(this.device,r.options);break;case"copy-buffer-to-texture":pZ(this.device,r.options);break;case"copy-texture-to-buffer":gZ(this.device,r.options);break;case"copy-texture-to-texture":mZ(this.device,r.options);break;default:throw new Error(r.name)}}}function dZ(t,e){const n=e.sourceBuffer,r=e.destinationBuffer;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,r.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function pZ(t,e){throw new Error("Not implemented")}function gZ(t,e){const{sourceTexture:n,mipLevel:r=0,aspect:s="all",width:i=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:l=0,origin:u=[0,0],destinationBuffer:h,byteOffset:d=0,bytesPerRow:g,rowsPerImage:b}=e;if(s!=="all")throw new Error("aspect not supported in WebGL");if(r!==0||l!==0||g||b)throw new Error("not implemented");const{framebuffer:w,destroyFramebuffer:R}=iO(n);let A;try{const C=h,I=i||w.width,M=a||w.height,k=ZI(w.colorAttachments[0].texture.props.format),P=k.format,L=k.type;t.gl.bindBuffer(35051,C.handle),A=t.gl.bindFramebuffer(36160,w.handle),t.gl.readPixels(u[0],u[1],I,M,P,L,d)}finally{t.gl.bindBuffer(35051,null),A!==void 0&&t.gl.bindFramebuffer(36160,A),R&&w.destroy()}}function mZ(t,e){const{sourceTexture:n,destinationMipLevel:r=0,origin:s=[0,0],destinationOrigin:i=[0,0],destinationTexture:a}=e;let{width:l=e.destinationTexture.width,height:u=e.destinationTexture.height}=e;const{framebuffer:h,destroyFramebuffer:d}=iO(n),[g,b]=s,[w,R,A]=i,C=t.gl.bindFramebuffer(36160,h.handle);let I=null,M;if(a instanceof Hf)I=a,l=Number.isFinite(l)?l:I.width,u=Number.isFinite(u)?u:I.height,I.bind(0),M=I.glTarget;else throw new Error("invalid destination");switch(M){case 3553:case 34067:t.gl.copyTexSubImage2D(M,r,w,R,g,b,l,u);break;case 35866:case 32879:t.gl.copyTexSubImage3D(M,r,w,R,A,g,b,l,u);break}I&&I.unbind(),t.gl.bindFramebuffer(36160,C),d&&h.destroy()}function iO(t){if(t instanceof Fn){const{width:e,height:n,id:r}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${r}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class yZ extends Yv{constructor(n,r){super(n,r);z(this,"device");z(this,"commandBuffer");this.device=n,this.commandBuffer=new hZ(n)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,r,s){}}function bZ(t){const{target:e,source:n,start:r=0,count:s=1}=t,i=n.length,a=s*i;let l=0;for(let u=r;l<i;l++)e[u++]=n[l];for(;l<a;)l<a-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+a-l),l=a);return t.target}class G0 extends Zv{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"buffer",null);z(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return $5()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const r=n;if(r&&r.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,r?r.handle:null),this.indexBuffer=r,this.device.gl.bindVertexArray(null)}setBuffer(n,r){const s=r;if(s.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:i,type:a,stride:l,offset:u,normalized:h,integer:d,divisor:g}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,s.handle),d?this.device.gl.vertexAttribIPointer(n,i,a,l,u):this.device.gl.vertexAttribPointer(n,i,a,h,l,u),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,g||0),this.attributes[n]=s,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,r){this._enable(n,!1),this.attributes[n]=r}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const r=this.attributes[n];ArrayBuffer.isView(r)&&this.device.setConstantAttributeWebGL(n,r)}}_getAccessor(n){const r=this.attributeInfos[n];if(!r)throw new Error(`Unknown attribute location ${n}`);const s=KI(r.bufferDataType);return{size:r.bufferComponents,type:s,stride:r.byteStride,offset:r.byteOffset,normalized:r.normalized,integer:r.integer,divisor:r.stepMode==="instance"?1:0}}_enable(n,r=!0){const i=G0.isConstantAttributeZeroSupported(this.device)||n!==0;(r||i)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),r?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,r){const s=xZ(r),i=s.byteLength*n,a=s.length*n;if(this.buffer&&i!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${i} !== ${this.buffer.byteLength}.`);let l=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:i}),l=l||!vZ(s,this.bufferValue),l){const u=k7(r.constructor,a);bZ({target:u,source:s,start:0,count:a}),this.buffer.write(u),this.bufferValue=r}return this.buffer}}function xZ(t){return Array.isArray(t)?new Float32Array(t):t}function vZ(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class _Z extends Qv{constructor(n,r){super(n,r);z(this,"device");z(this,"gl");z(this,"handle");z(this,"layout");z(this,"buffers",{});z(this,"unusedBuffers",{});z(this,"bindOnUse",!0);z(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,r.buffers&&this.setBuffers(r.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(cZ(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const r in n)this.setBuffer(r,n[r])})}setBuffer(n,r){const s=this._getVaryingIndex(n),{buffer:i,byteLength:a,byteOffset:l}=this._getBufferRange(r);if(s<0){this.unusedBuffers[n]=i,Xe.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[s]={buffer:i,byteLength:a,byteOffset:l},this.bindOnUse||this._bindBuffer(s,i,l,a)}getBuffer(n){if(JA(n))return this.buffers[n]||null;const r=this._getVaryingIndex(n);return r>=0?this.buffers[r]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let r;return this._bound?r=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,r=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),r}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof $f)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:r,byteOffset:s=0,byteLength:i=n.buffer.byteLength}=n;return{buffer:r,byteOffset:s,byteLength:i}}_getVaryingIndex(n){if(JA(n))return Number(n);for(const r of this.layout.varyings)if(n===r.name)return r.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:r,byteLength:s,byteOffset:i}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),r,i,s)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,r,s=0,i){const a=r&&r.handle;!a||i===void 0?this.gl.bindBufferBase(35982,n,a):this.gl.bindBufferRange(35982,n,a,s,i)}}function JA(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class wZ extends Gv{constructor(n,r){super(n,r);z(this,"device");z(this,"handle");z(this,"target",null);z(this,"_queryPending",!1);z(this,"_pollingPromise",null);if(this.device=n,r.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((s,i)=>{const a=()=>{this.isResultAvailable()?(s(this.getResult()),this._pollingPromise=null):r++>n?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}class Ec extends Go{constructor(n){var g,b;super({...n,id:n.id||TK("webgl-device")});z(this,"type","webgl");z(this,"handle");z(this,"features");z(this,"limits");z(this,"info");z(this,"canvasContext");z(this,"lost");z(this,"_resolveContextLost");z(this,"gl");z(this,"debug",!1);z(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});z(this,"_extensions",{});z(this,"_polyfilled",!1);z(this,"spectorJS");z(this,"renderPass",null);z(this,"_constants");const r=Go._getCanvasContextProps(n);if(!r)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let s=(b=(g=r.canvas)==null?void 0:g.gl)==null?void 0:b.device;if(s)throw new Error(`WebGL context already attached to device ${s.id}`);this.canvasContext=new dK(this,r),this.lost=new Promise(w=>{this._resolveContextLost=w});const i={...n.webgl};r.alphaMode==="premultiplied"&&(i.premultipliedAlpha=!0),n.powerPreference!==void 0&&(i.powerPreference=n.powerPreference);const l=this.props._handle||XY(this.canvasContext.canvas,{onContextLost:w=>{var R;return(R=this._resolveContextLost)==null?void 0:R.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:w=>console.log("WebGL context restored")},i);if(!l)throw new Error("WebGL context creation failed");if(s=l.device,s){if(n._reuseDevices)return Xe.log(1,`Not creating a new Device, instead returning a reference to Device ${s.id} already attached to WebGL context`,s)(),s._reused=!0,s;throw new Error(`WebGL context already attached to device ${s.id}`)}this.handle=l,this.gl=l,this.spectorJS=mK({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=YY(this.gl,this._extensions),this.limits=new uK(this.gl),this.features=new cK(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),r.autoResize!==!1&&this.canvasContext.resize(),new Qa(this.gl,{log:(...w)=>Xe.log(1,...w)()}).trackState(this.gl,{copyState:!1});const h=n.debugWebGL||n.debug,d=n.debugWebGL;h&&(this.gl=xK(this.gl,{debugWebGL:h,traceWebGL:d}),Xe.warn("WebGL debug mode activated. Performance reduced.")(),n.debugWebGL&&(Xe.level=Math.max(Xe.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const r=this._normalizeBufferProps(n);return new $f(this,r)}createTexture(n){return new Hf(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new x_(this,n)}createShader(n){return new CK(this,n)}createFramebuffer(n){return new Vf(this,n)}createVertexArray(n){return new G0(this,n)}createTransformFeedback(n){return new _Z(this,n)}createQuerySet(n){return new wZ(this,n)}createRenderPipeline(n){return new uZ(this,n)}beginRenderPass(n){return new XK(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(n={}){return new yZ(this,n)}submit(){var n;(n=this.renderPass)==null||n.end(),this.renderPass=null}readPixelsToArrayWebGL(n,r){return VK(n,r)}readPixelsToBufferWebGL(n,r){return $K(n,r)}setParametersWebGL(n){gu(this.gl,n)}getParametersWebGL(n){return XI(this.gl,n)}withParametersWebGL(n,r){return vg(this.gl,n,r)}resetWebGL(){Xe.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),VY(this.gl)}_getDeviceSpecificTextureFormatCapabilities(n){return iK(this.gl,n,this._extensions)}loseDevice(){var i;let n=!1;const s=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return s&&(n=!0,s.loseContext()),(i=this._resolveContextLost)==null||i.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){Qa.get(this.gl).push()}popState(){Qa.get(this.gl).pop()}setSpectorMetadata(n,r){n.__SPECTOR_Metadata=r}getGLKey(n,r){const s=Number(n);for(const i in this.gl)if(this.gl[i]===s)return`GL.${i}`;return r!=null&&r.emptyIfUnknown?"":String(n)}getGLKeys(n){const r={emptyIfUnknown:!0};return Object.entries(n).reduce((s,[i,a])=>(s[`${i}:${this.getGLKey(i,r)}`]=`${a}:${this.getGLKey(a,r)}`,s),{})}setConstantAttributeWebGL(n,r){const s=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(s).fill(null);const i=this._constants[n];switch(i&&AZ(i,r)&&Xe.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=r,r.constructor){case Float32Array:SZ(this,n,r);break;case Int32Array:TZ(this,n,r);break;case Uint32Array:EZ(this,n,r);break;default:throw new Error("constant")}}getExtension(n){return su(this.gl,n,this._extensions),this._extensions}}function SZ(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break}}function TZ(t,e,n){t.gl.vertexAttribI4iv(e,n)}function EZ(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function AZ(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const RZ={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},CZ=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),kZ=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),NZ=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function MZ(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(n,r){if(n==="webgl"||n==="experimental-webgl"){const s=this.originalGetContext("webgl2",r);return s instanceof HTMLElement&&IZ(s),s}return this.originalGetContext(n,r)}}function IZ(t){t.getExtension("EXT_color_buffer_float");const e={...RZ,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:CZ(t),OES_vertex_array_object:kZ(t),ANGLE_instanced_arrays:NZ(t)},n=t.getExtension;t.getExtension=function(s){const i=n.call(t,s);return i||(s in e?e[s]:null)};const r=t.getSupportedExtensions;t.getSupportedExtensions=function(){const s=r.apply(t)||[];return s==null?void 0:s.concat(Object.keys(e))}}const gp=1;class OZ extends i7{constructor(){super();z(this,"type","webgl");Go.defaultProps={...Go.defaultProps,...Q0},Ec.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(n){MZ(n)}async attach(n){if(n instanceof Ec)return n;if((n==null?void 0:n.device)instanceof Go)return n.device;if(!PZ(n))throw new Error("Invalid WebGL2RenderingContext");return new Ec({_handle:n,createCanvasContext:{canvas:n.canvas,autoResize:!1}})}async create(n={}){Xe.groupCollapsed(gp,"WebGLDevice created")();const r=[];(n.debugWebGL||n.debug)&&r.push(bK()),n.debugSpectorJS&&r.push(gK(n));const s=await Promise.allSettled(r);for(const l of s)l.status==="rejected"&&Xe.error(`Failed to initialize debug libraries ${l.reason}`)();const i=new Ec(n),a=`${i._reused?"Reusing":"Created"} device with WebGL2 ${i.debug?"debug ":""}context: ${i.info.vendor}, ${i.info.renderer} for canvas: ${i.canvasContext.id}`;return Xe.probe(gp,a)(),Xe.table(gp,i.info)(),Xe.groupEnd(gp)(),i}}function PZ(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const e3=new OZ;function Ro(){}const DZ=({isDragging:t})=>t?"grabbing":"grab",oO={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:Ro,onWebGLInitialized:Ro,onResize:Ro,onViewStateChange:Ro,onInteractionStateChange:Ro,onBeforeRender:Ro,onAfterRender:Ro,onLoad:Ro,onError:t=>Sn.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:DZ,getTooltip:null,debug:!1,drawPickingColors:!1};class J0{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new um({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=r=>{const{_pickRequest:s}=this;if(r.type==="pointerleave")s.x=-1,s.y=-1,s.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;s.x=i.x,s.y=i.y,s.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:s.x,y:s.y}),s.event=r},this._onEvent=r=>{const s=l_[r.type],i=r.offsetCenter;if(!s||!i||!this.layerManager)return;const a=this.layerManager.getLayers(),l=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:a,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:u}=l,h=u&&(u[s]||u.props[s]),d=this.props[s];let g=!1;h&&(g=h.call(u,l,r)),g||(d==null||d(l,r),this.widgetManager.onEvent(l,r))},this._onPointerDown=r=>{var a;if(((a=this.device)==null?void 0:a.type)==="webgpu")return;const s=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:s.x,y:s.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo},this.props={...oO,...e},e=this.props,e.viewState&&e.initialViewState&&Sn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let n=this.device;!n&&e.gl&&(e.gl instanceof WebGLRenderingContext&&Sn.error("WebGL1 context not supported.")(),n=e3.attach(e.gl)),n||(n=Wv.createDevice({type:"best-available",_reuseDevices:!0,adapters:[e3],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&ih.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,s,i,a,l,u,h,d;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(r=this.layerManager)==null||r.finalize(),this.layerManager=null,(s=this.viewManager)==null||s.finalize(),this.viewManager=null,(i=this.effectManager)==null||i.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(l=this.deckPicker)==null||l.finalize(),this.deckPicker=null,(u=this.eventManager)==null||u.destroy(),this.eventManager=null,(h=this.widgetManager)==null||h.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((d=this.canvas.parentElement)==null||d.removeChild(this.canvas),this.canvas=null)}setProps(e){var r;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Sn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Sn.removed("onLayerClick","onClick")(),e.initialViewState&&!Xs(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(r=this.animationLoop)==null||r.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return n=n||r||s||i||a,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Tr(this.viewManager),this.viewManager.views}getViewports(e){return Tr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,r){Tr(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(n).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return s.get(n).timeEnd(),i}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Tr(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var s;if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const i=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=i}if(r||r===0){const i=Number.isFinite(r)?`${r}px`:r;this.canvas.style.position=((s=e.style)==null?void 0:s.position)||"absolute",this.canvas.style.height=i}}_updateCanvasSize(){var s,i;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,r=e.clientHeight??e.height;(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,(s=this.viewManager)==null||s.setProps({width:n,height:r}),(i=this.layerManager)==null||i.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:r}))}_createAnimationLoop(e,n){const{gl:r,onError:s,useDevicePixels:i}=n;return new FX({device:e,useDevicePixels:i,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new HI({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,r,s,i;if(((n=this.device)==null?void 0:n.type)==="webgpu")return;const{_pickRequest:e}=this;if(e.event){const{result:a,emptyInfo:l}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=a.length>0;let u=l,h=!1;for(const d of a)u=d,h=((r=d.layer)==null?void 0:r.onHover(d,e.event))||h;h||((i=(s=this.props).onHover)==null||i.call(s,u,e.event),this.widgetManager.onHover(u,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var s,i;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(s=this.device.canvasContext)==null?void 0:s.canvas),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const n=new jI;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new dq(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(_A).map(a=>{var w;const[l,u,h,d]=_A[a],g=(w=this.props.eventRecognizerOptions)==null?void 0:w[a],b={...u,...g,event:a};return{recognizer:new l(b),recognizeWith:h,requestFailure:d}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in l_)this.eventManager.on(a,this._onEvent);this.viewManager=new lY({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new aY(this.device,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new TY({deck:this,device:this.device}),this.deckRenderer=new RY(this.device),this.deckPicker=new OY(this.device),this.widgetManager=new jY({deck:this,parentElement:(i=this.canvas)==null?void 0:i.parentElement}),this.widgetManager.addDefault(new BY),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var a;const{device:r,gl:s}=this.layerManager.context;this.props.onBeforeRender({device:r,gl:s});const i={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(a=this.deckRenderer)==null||a.renderLayers(i),i.pass==="screen"&&this.widgetManager.onRedraw({viewports:i.viewports,layers:i.layers}),this.props.onAfterRender({device:r,gl:s})}_onRenderFrame(){var e;this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Sn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),((e=this.device)==null?void 0:e.type)!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Wv.stats.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}J0.defaultProps=oO;J0.VERSION=u9;function jZ(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return UM(t)}}const FZ=LM;function mp(t,e,n){const r=n==="webgpu"&&e.type==="uint8"?"unorm8":e.type;return{attribute:t,format:e.size>1?`${r}x${e.size}`:e.type,byteOffset:e.offset||0}}function La(t){return t.stride||t.size*t.bytesPerElement}function BZ(t,e){return t.type===e.type&&t.size===e.size&&La(t)===La(e)&&(t.offset||0)===(e.offset||0)}function v_(t,e){e.offset&&Sn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=La(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,s=e.elementOffset||0,i=r*n+s*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}function LZ(t,e){const n=v_(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class UZ{constructor(e,n,r){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const s=n.logicalType||n.type,i=s==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let l;i?l="float32":!s&&n.isIndexed?l="uint32":l=s||"float32";let u=jZ(s||l);this.doublePrecision=i,i&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:a,logicalType:s,type:l,normalized:l.includes("norm"),size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*La(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ih.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const r={};if(this.state.constant){const s=this.value;if(n){const i=v_(this.getAccessor(),n),a=i.offset/s.BYTES_PER_ELEMENT,l=i.size||this.size;r[e]=s.subarray(a,a+l)}else r[e]=s}else r[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?r[`${e}64Low`]=r[e]:r[`${e}64Low`]=new Float32Array(this.size)),r}_getBufferLayout(e=this.id,n=null){const r=this.getAccessor(),s=[],i={name:this.id,byteStride:La(r),attributes:s};if(this.doublePrecision){const a=LZ(r,n||{});s.push(mp(e,{...r,...a.high},this.device.type),mp(`${e}64Low`,{...r,...a.low},this.device.type))}else if(n){const a=v_(r,n);s.push(mp(e,{...r,...a},this.device.type))}else s.push(mp(e,r,this.device.type));return i}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:s}=this,i=r*s;if(n&&i&&n.length>=i){const a=new Array(s).fill(1/0),l=new Array(s).fill(-1/0);for(let u=0;u<i;)for(let h=0;h<s;h++){const d=n[u++];d<a[h]&&(a[h]=d),d>l[h]&&(l[h]=d)}e=[a,l]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof kn?r={buffer:e}:r=e;const s={...this.settings,...r};if(ArrayBuffer.isView(r.value)){if(!r.type)if(this.doublePrecision&&r.value instanceof Float64Array)s.type="float32";else{const a=FZ(r.value);s.type=s.normalized?a.replace("int","norm"):a}s.bytesPerElement=r.value.BYTES_PER_ELEMENT,s.stride=La(s)}if(n.bounds=null,r.constant){let i=r.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this.normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(i)?i:new Float32Array(i)}else if(r.buffer){const i=r.buffer;n.externalBuffer=i,n.constant=!1,this.value=r.value||null}else if(r.value){this._checkExternalBuffer(r);let i=r.value;n.externalBuffer=null,n.constant=!1,this.value=i;let{buffer:a}=this;const l=La(s),u=(s.vertexOffset||0)*l;if(this.doublePrecision&&i instanceof Float64Array&&(i=Tx(i,s)),this.settings.isIndexed){const d=this.settings.defaultType;i.constructor!==d&&(i=new d(i))}const h=i.byteLength+u+l*2;(!a||a.byteLength<h)&&(a=this._createBuffer(h)),a.write(i,u)}return this.setAccessor(s),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:s}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?Tx(n,{size:this.size,startIndex:r,endIndex:s}):n.subarray(r,s),r*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:r}=this,s=r.allocatedValue,i=ih.allocate(s,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=i;const{byteOffset:a}=this;let{buffer:l}=this;return(!l||l.byteLength<i.byteLength+a)&&(l=this._createBuffer(i.byteLength+a),n&&s&&l.write(s instanceof Float64Array?Tx(s,this):s,a)),r.allocatedValue=i,r.constant=!1,r.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const r=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=n.BYTES_PER_ELEMENT<4),s)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&Sn.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:s,size:i}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let a=i;for(;--a>=0;)n[r+a]=s[a];return n}switch(i){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:s[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:s[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:s[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:s[0];break;default:let a=i;for(;--a>=0;)n[r+a]=Number.isFinite(e[a])?e[a]:s[a]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let s=0;s<r;s++)if(e[s]!==n[s])return!1;return!0}_createBuffer(e){var s;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:r}=this.settings;return this._buffer=this.device.createBuffer({...(s=this._buffer)==null?void 0:s.props,id:this.id,usage:(n?kn.INDEX:kn.VERTEX)|kn.COPY_DST,indexType:n?r:void 0,byteLength:e}),this._buffer}}const t3=[],n3=[];function zZ(t,e=0,n=1/0){let r=t3;const s={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(n3.length=t.length,r=n3):r=t3,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),s.index=e-1),{iterable:r,objectInfo:s}}function aO(t){return t&&t[Symbol.asyncIterator]}function VZ(t,e){const{size:n,stride:r,offset:s,startIndices:i,nested:a}=e,l=t.BYTES_PER_ELEMENT,u=r?r/l:n,h=s?s/l:0,d=Math.floor((t.length-h)/u);return(g,{index:b,target:w})=>{if(!i){const I=b*u+h;for(let M=0;M<n;M++)w[M]=t[I+M];return w}const R=i[b],A=i[b+1]||d;let C;if(a){C=new Array(A-R);for(let I=R;I<A;I++){const M=I*u+h;w=new Array(n);for(let k=0;k<n;k++)w[k]=t[M+k];C[I-R]=w}}else if(u===n)C=t.subarray(R*n+h,A*n+h);else{C=new t.constructor((A-R)*n);let I=0;for(let M=R;M<A;M++){const k=M*u+h;for(let P=0;P<n;P++)C[I++]=t[k+P]}}return C}}const $Z=[],Dp=[[0,1/0]];function HZ(t,e){if(t===Dp||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let s=0;for(let i=0;i<r;i++){const a=t[i];a[1]<e[0]?(n.push(a),s=i+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(s,0,e),n}const WZ={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function lO(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...WZ[n],...e,...t,type:n}}class cO extends UZ{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Dp}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!BZ(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,s=Array.isArray(n)?e[n.find(i=>e[i])]:e[n];return lO(s,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:s=1/0}=n;this.state.updateRanges=HZ(this.state.updateRanges,[r,s])}else this.state.updateRanges=Dp}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=$Z}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==Dp),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:a,noAlloc:l}}=this;let u=!0;if(a){for(const[h,d]of i)a.call(s,this,{data:n,startRow:h,endRow:d,props:r,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[h,d]of i){const g=Number.isFinite(h)?this.getVertexOffset(h):0,b=Number.isFinite(d)?this.getVertexOffset(d):l||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:g,endOffset:b})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return this.device.type==="webgpu"||e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:s}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),s.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;Tr(ArrayBuffer.isView(a.value),`invalid ${s.accessor}`);const l=!!a.size&&a.size!==this.size;return r.binaryAccessor=VZ(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:l}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const r in e)Object.assign(n,super.getValue(r,e[r]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,r=super._getBufferLayout(),{stepMode:s}=this.settings;if(s==="dynamic"?r.stepMode=e?e.isInstanced?"instance":"vertex":"instance":r.stepMode=s??"vertex",!n)return r;for(const i in n){const a=super._getBufferLayout(i,n[i]);r.attributes.push(...a.attributes)}return r}_autoUpdater(e,{data:n,startRow:r,endRow:s,props:i,numInstances:a}){if(e.constant&&this.context.device.type!=="webgpu")return;const{settings:l,state:u,value:h,size:d,startIndices:g}=e,{accessor:b,transform:w}=l;let R=u.binaryAccessor||(typeof b=="function"?b:i[b]);typeof R!="function"&&(R=()=>R),Tr(typeof R=="function",`accessor "${b}" is not a function`);let A=e.getVertexOffset(r);const{iterable:C,objectInfo:I}=zZ(n,r,s);for(const M of C){I.index++;let k=R(M,I);if(w&&(k=w.call(this,k)),g){const P=(I.index<g.length-1?g[I.index+1]:a)-g[I.index];if(k&&Array.isArray(k[0])){let L=A;for(const O of k)e._normalizeValue(O,h,L),L+=d}else k&&k.length>d?h.set(k,A):(e._normalizeValue(k,I.target,0),nY({target:h,source:I.target,start:A,count:P}));A+=P*d}else e._normalizeValue(k,h,A),A+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Ox(t){const{source:e,target:n,start:r=0,size:s,getData:i}=t,a=t.end||n.length,l=e.length,u=a-r;if(l>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!i)return;let h=l;for(;h<u;){const d=i(h,e);for(let g=0;g<s;g++)n[r+h]=d[g]||0,h++}}function qZ({source:t,target:e,size:n,getData:r,sourceStartIndices:s,targetStartIndices:i}){if(!s||!i)return Ox({source:t,target:e,size:n,getData:r}),e;let a=0,l=0;const u=r&&((d,g)=>r(d+l,g)),h=Math.min(s.length,i.length);for(let d=1;d<h;d++){const g=s[d]*n,b=i[d]*n;Ox({source:t.subarray(a,g),target:e,start:l,end:b,size:n,getData:u}),a=g,l=b}return l<e.length&&Ox({source:[],target:e,start:l,size:n,getData:u}),e}function XZ(t){const{device:e,settings:n,value:r}=t,s=new cO(e,n);return s.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),s}function uO(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function fO(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function hO(t){t.push(t.shift())}function YZ(t,e){const{doublePrecision:n,settings:r,value:s,size:i}=t,a=n&&s instanceof Float64Array?2:1;let l=0;const{shaderAttributes:u}=t.settings;if(u)for(const h of Object.values(u))l=Math.max(l,h.vertexOffset??0);return(r.noAlloc?s.length:(e+l)*i)*a}function dO({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function pO({device:t,buffer:e,attribute:n,fromLength:r,toLength:s,fromStartIndices:i,getData:a=l=>l}){const l=n.doublePrecision&&n.value instanceof Float64Array?2:1,u=n.size*l,h=n.byteOffset,d=n.settings.bytesPerElement<4?h/n.settings.bytesPerElement*4:h,g=n.startIndices,b=i&&g,w=n.isConstant;if(!b&&e&&r>=s)return e;const R=n.value instanceof Float64Array?Float32Array:n.value.constructor,A=w?n.value:new R(n.getBuffer().readSyncWebGL(h,s*R.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!w){const k=a;a=(P,L)=>n.normalizeConstant(k(P,L))}const C=w?(k,P)=>a(A,P):(k,P)=>a(A.subarray(k+h,k+h+u),P),I=e?new Float32Array(e.readSyncWebGL(d,r*4).buffer):new Float32Array(0),M=new Float32Array(s);return qZ({source:I,target:M,sourceStartIndices:i,targetStartIndices:g,size:u,getData:C}),(!e||e.byteLength<M.byteLength+d)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:M.byteLength+d,usage:35050})),e.write(M,d),e}class gO{constructor({device:e,attribute:n,timeline:r}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new gm(r),this.attribute=n,this.attributeInTransition=XZ(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,r=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=YZ(this.attribute,n),this.transition.start({...e,duration:r})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class KZ extends gO{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="interpolation",this.transform=JZ(e,n)}start(e,n){const r=this.currentLength,s=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:i,attribute:a}=this;hO(i),i[0]=pO({device:this.device,buffer:i[0],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:s,getData:e.enter}),i[1]=dO({device:this.device,source:i[0],target:i[1]}),this.setBuffer(i[1]);const{transform:l}=this,u=l.model;let h=Math.floor(this.currentLength/a.size);mO(a)&&(h/=2),u.setVertexCount(h),a.isConstant?(u.setAttributes({aFrom:i[0]}),u.setConstantAttributes({aTo:a.value})):u.setAttributes({aFrom:i[0],aTo:a.getBuffer()}),l.transformFeedback.setBuffers({vCurrent:i[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:r}=this.transition;let s=r/e;n&&(s=n(s));const{model:i}=this.transform,a={time:s};i.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const ZZ=`uniform interpolationUniforms {
  float time;
} interpolation;
`,r3={name:"interpolation",vs:ZZ,uniformTypes:{time:"f32"}},QZ=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,GZ=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function mO(t){return t.doublePrecision&&t.value instanceof Float64Array}function JZ(t,e){const n=e.size,r=uO(n),s=fO(n),i=e.getBufferLayout();return mO(e)?new oh(t,{vs:GZ,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:s,byteOffset:0},{attribute:"aFrom64Low",format:s,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:s,byteOffset:0},{attribute:"aTo64Low",format:s,byteOffset:4*n}]}],modules:[fW,r3],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new oh(t,{vs:QZ,bufferLayout:[{name:"aFrom",format:s},{name:"aTo",format:i.attributes[0].format}],modules:[r3],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}class eQ extends gO{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="spring",this.texture=oQ(e),this.framebuffer=aQ(e,this.texture),this.transform=iQ(e,n)}start(e,n){const r=this.currentLength,s=this.currentStartIndices;super.start(e,n);const{buffers:i,attribute:a}=this;for(let u=0;u<2;u++)i[u]=pO({device:this.device,buffer:i[u],attribute:a,fromLength:r,toLength:this.currentLength,fromStartIndices:s,getData:e.enter});i[2]=dO({device:this.device,source:i[0],target:i[2]}),this.setBuffer(i[1]);const{model:l}=this.transform;l.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?l.setConstantAttributes({aTo:a.value}):l.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:r,transition:s}=this,i=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:i.stiffness,damping:i.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:r,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),hO(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(r)[0]>0||s.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const tQ=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,nQ={name:"spring",vs:tQ,uniformTypes:{damping:"f32",stiffness:"f32"}},rQ=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,sQ=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function iQ(t,e){const n=uO(e.size),r=fO(e.size);return new oh(t,{vs:rQ,fs:sQ,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[nQ],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function oQ(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function aQ(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const lQ={interpolation:KZ,spring:eQ};class cQ{constructor(e,{id:n,timeline:r}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const s in e){const i=e[s],a=i.getTransitionSetting(n);a&&this._updateAttribute(s,i,a)}for(const s in this.transitions){const i=e[s];(!i||!i.getTransitionSetting(n))&&this._removeTransition(s)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,r){const s=this.transitions[e];let i=!s||s.type!==r.type;if(i){s&&this._removeTransition(e);const a=lQ[r.type];a?this.transitions[e]=new a({attribute:n,timeline:this.timeline,device:this.device}):(Sn.error(`unsupported transition type '${r.type}'`)(),i=!1)}(i||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const s3="attributeManager.invalidate",uQ="attributeManager.updateStart",fQ="attributeManager.updateEnd",hQ="attribute.updateStart",dQ="attribute.allocate",pQ="attribute.updateEnd";class gQ{constructor(e,{id:n="attribute-manager",stats:r,timeline:s}={}){this.mergeBoundsMemoized=Ah(TX),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new cQ(e,{id:`${n}-transitions`,timeline:s}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Dr(s3,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Dr(s3,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:s,props:i={},buffers:a={},context:l={}}){let u=!1;Dr(uQ,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const h in this.attributes){const d=this.attributes[h],g=d.settings.accessor;d.startIndices=r,d.numInstances=n,i[h]&&Sn.removed(`props.${h}`,`data.attributes.${h}`)(),d.setExternalBuffer(a[h])||d.setBinaryValue(typeof g=="string"?a[g]:void 0,e.startIndices)||typeof g=="string"&&!a[g]&&d.setConstantValue(i[g])||d.needsUpdate()&&(u=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:i,context:l})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}u&&Dr(fQ,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:s})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(r=>{var s;return(s=this.attributes[r])==null?void 0:s.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,s={...r.getAttributes()};for(const i in n){const a=n[i];a.needsRedraw(e)&&!r.hasAttribute(i)&&(s[i]=a)}return s}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const r in e){const s=e[r],i={...s,id:r,size:s.isIndexed&&1||s.size||1,...n};this.attributes[r]=new cO(this.device,i)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(s=>{e[s]||(e[s]=[]),e[s].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:s}=this,i=s[e];return i&&i.forEach(a=>{const l=r[a];l&&l.setNeedsUpdate(l.id,n)}),i}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Dr(hQ,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Dr(dQ,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Dr(pQ,n,r))}}class mQ extends gm{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:s,easing:i}}=this,a=i(e/s);this._value=dg(n,r,a)}}const i3=1e-5;function o3(t,e,n,r,s){const i=e-t,l=(n-e)*s,u=-i*r;return l+u+i+e}function yQ(t,e,n,r,s){if(Array.isArray(n)){const i=[];for(let a=0;a<n.length;a++)i[a]=o3(t[a],e[a],n[a],r,s);return i}return o3(t,e,n,r,s)}function a3(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const s=t[r]-e[r];n+=s*s}return Math.sqrt(n)}return Math.abs(t-e)}class bQ extends gm{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:s}=this.settings,{_prevValue:i=e,_currValue:a=e}=this;let l=yQ(i,a,n,r,s);const u=a3(l,n),h=a3(l,a);u<i3&&h<i3&&(l=n,this.end()),this._prevValue=a,this._currValue=l}}const xQ={interpolation:mQ,spring:bQ};class vQ{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,s){const{transitions:i}=this;if(i.has(e)){const u=i.get(e),{value:h=u.settings.fromValue}=u;n=h,this.remove(e)}if(s=lO(s),!s)return;const a=xQ[s.type];if(!a){Sn.error(`unsupported transition type '${s.type}'`)();return}const l=new a(this.timeline);l.start({...s,fromValue:n,toValue:r}),i.set(e,l)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function _Q(t){const e=t[Za];for(const n in e){const r=e[n],{validate:s}=r;if(s&&!s(t[n],r))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function wQ(t,e){const n=yO({newProps:t,oldProps:e,propTypes:t[Za],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=TQ(t,e);let s=!1;return r||(s=EQ(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:s,extensionsChanged:AQ(t,e),transitionsChanged:SQ(t,e)}}function SQ(t,e){if(!t.transitions)return!1;const n={},r=t[Za];let s=!1;for(const i in t.transitions){const a=r[i],l=a&&a.type;(l==="number"||l==="color"||l==="array")&&__(t[i],e[i],a)&&(n[i]=!0,s=!0)}return s?n:!1}function yO({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:s="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${s} changed shallowly`;if(typeof e!="object"||e===null)return`${s} changed shallowly`;for(const i of Object.keys(t))if(!(i in n)){if(!(i in e))return`${s}.${i} added`;const a=__(t[i],e[i],r[i]);if(a)return`${s}.${i} ${a}`}for(const i of Object.keys(e))if(!(i in n)){if(!(i in t))return`${s}.${i} dropped`;if(!Object.hasOwnProperty.call(t,i)){const a=__(t[i],e[i],r[i]);if(a)return`${s}.${i} ${a}`}}return!1}function __(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function TQ(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:s}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&s&&(n=s(t.data,e.data)||n),n}function EQ(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&l3(t,e,"all"))return{all:!0};const n={};let r=!1;for(const s in t.updateTriggers)s!=="all"&&l3(t,e,s)&&(n[s]=!0,r=!0);return r?n:!1}function AQ(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let s=0;s<r.length;s++)if(!r[s].equals(n[s]))return!0;return!1}function l3(t,e,n){let r=t.updateTriggers[n];r=r??{};let s=e.updateTriggers[n];return s=s??{},yO({oldProps:s,newProps:r,triggerName:n})}const RQ="count(): argument not an object",CQ="count(): argument not a container";function kQ(t){if(!MQ(t))throw new Error(RQ);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(NQ(t))return Object.keys(t).length;throw new Error(CQ)}function NQ(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function MQ(t){return t!==null&&typeof t=="object"}function c3(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(s=>s.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const s in e.inject)r[s]=(r[s]||"")+e.inject[s];n.inject=r}return n}const IQ={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},w_={};function OQ(t,e,n,r){if(n instanceof Fn)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let s=null;n.compressed&&(s={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const i=e.createTexture({...n,sampler:{...IQ,...s,...r},mipmaps:!0});return w_[i.id]=t,i}function PQ(t,e){!e||!(e instanceof Fn)||w_[e.id]===t&&(e.delete(),delete w_[e.id])}const DQ={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||S_(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Xs(t,e,1)}},accessor:{validate(t,e){const n=_g(t);return n==="function"||n===_g(e.value)},equal(t,e,n){return typeof e=="function"?!0:Xs(t,e,1)}},array:{validate(t,e){return e.optional&&!t||S_(t)},equal(t,e,n){const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Xs(t,e,s):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,s=Number.isInteger(r)?r:r?1:0;return r?Xs(t,e,s):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:r}=n.props;return r?r(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.device?null:OQ(n.id,r.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{PQ(n.id,t)}}};function jQ(t){const e={},n={},r={};for(const[s,i]of Object.entries(t)){const a=i==null?void 0:i.deprecatedFor;if(a)r[s]=Array.isArray(a)?a:[a];else{const l=FQ(s,i);e[s]=l,n[s]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function FQ(t,e){switch(_g(e)){case"object":return wf(t,e);case"array":return wf(t,{type:"array",value:e,compare:!1});case"boolean":return wf(t,{type:"boolean",value:e});case"number":return wf(t,{type:"number",value:e});case"function":return wf(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function wf(t,e){return"type"in e?{name:t,...DQ[e.type],...e}:"value"in e?{name:t,type:_g(e.value),...e}:{name:t,type:"object",value:e}}function S_(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function _g(t){return S_(t)?"array":t===null?"null":typeof t}function BQ(t,e){let n;for(let i=e.length-1;i>=0;i--){const a=e[i];"extensions"in a&&(n=a.extensions)}const r=T_(t.constructor,n),s=Object.create(r);s[xg]=t,s[dl]={},s[Zo]={};for(let i=0;i<e.length;++i){const a=e[i];for(const l in a)s[l]=a[l]}return Object.freeze(s),s}const LQ="_mergedDefaultProps";function T_(t,e){if(!(t instanceof mm.constructor))return{};let n=LQ;if(e)for(const s of e){const i=s.constructor;i&&(n+=`:${i.extensionName||i.name}`)}const r=bO(t,n);return r||(t[n]=UQ(t,e||[]))}function UQ(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),s=T_(r),i=bO(t,"defaultProps")||{},a=jQ(i),l=Object.assign(Object.create(null),s,a.defaultProps),u=Object.assign(Object.create(null),s==null?void 0:s[Za],a.propTypes),h=Object.assign(Object.create(null),s==null?void 0:s[Cx],a.deprecatedProps);for(const d of e){const g=T_(d.constructor);g&&(Object.assign(l,g),Object.assign(u,g[Za]),Object.assign(h,g[Cx]))}return zQ(l,t),$Q(l,u),VQ(l,h),l[Za]=u,l[Cx]=h,e.length===0&&!ew(t,"_propTypes")&&(t._propTypes=u),l}function zQ(t,e){const n=WQ(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function VQ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const s=`${this.id}: ${n}`;for(const i of e[n])ew(this,i)||(this[i]=r);Sn.deprecated(s,e[n].join("/"))()}})}function $Q(t,e){const n={},r={};for(const s in e){const i=e[s],{name:a,value:l}=i;i.async&&(n[a]=l,r[a]=HQ(a))}t[Mc]=n,t[dl]={},Object.defineProperties(t,r)}function HQ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||aO(e)?this[dl][t]=e:this[Zo][t]=e},get(){if(this[Zo]){if(t in this[Zo])return this[Zo][t]||this[Mc][t];if(t in this[dl]){const e=this[xg]&&this[xg].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Mc][t]}}return this[Mc][t]}}}function ew(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bO(t,e){return ew(t,e)&&t[e]}function WQ(t){const e=t.componentName;return e||Sn.warn(`${t.name}.componentName not specified`)(),e||t.name}let qQ=0;class mm{constructor(...e){this.props=BQ(this,e),this.id=this.props.id,this.count=qQ++}clone(e){const{props:n}=this,r={};for(const s in n[Mc])s in n[Zo]?r[s]=n[Zo][s]:s in n[dl]&&(r[s]=n[dl][s]);return new this.constructor({...n,...r,...e})}}mm.componentName="Component";mm.defaultProps={};const XQ=Object.freeze({});class YQ{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||XQ}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[xg]||this.component;const n=e[Zo]||{},r=e[dl]||e,s=e[Mc]||{};for(const i in n){const a=n[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,a),n[i]=this.getAsyncProp(i)}for(const i in r){const a=r[i];this._createAsyncPropData(i,s[i]),this._updateAsyncProp(i,a)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(aO(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const s=this.asyncProps[e];s&&r>=s.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=n,s.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const s=r.pendingLoadCount;n.then(i=>{this.component&&(i=this._postProcessValue(r,i),this._setAsyncPropValue(e,i,s),this._onResolve(e,i))}).catch(i=>{this._onError(e,i)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let i=[],a=0;for await(const l of n){if(!this.component)return;const{dataTransform:u}=this.component.props;u?i=u(l,i):i=i.concat(l),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:a,endRow:i.length}]}),a=i.length,this._setAsyncPropValue(e,i,s)}this._onResolve(e,i)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const s=this.component&&this.component.props[Za];this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class KQ extends YQ{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,s=r==null?void 0:r.props.fetch;return s?s(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const s=r.props.onDataLoad;e==="data"&&s&&s(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,`loading ${e} of ${this.layer}`)}}const ZQ="layer.changeFlag",QQ="layer.initialize",GQ="layer.update",JQ="layer.finalize",eG="layer.matched",u3=2**24-1,tG=Object.freeze([]),nG=Ah(({oldViewport:t,viewport:e})=>t.equals(e));let Ls=new Uint8ClampedArray(0);const rG={data:{type:"data",value:tG,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:s,signal:i})=>{const{resourceManager:a}=n.context;s=s||n.getLoadOptions(),r=r||n.props.loaders,i&&(s={...s,fetch:{...s==null?void 0:s.fetch,signal:i}});let l=a.contains(t);return!l&&!s&&(a.add({resourceId:t,data:Bv(t,r),persistent:!1}),l=!0),l?a.subscribe({resourceId:t,onChange:u=>{var h;return(h=n.internalState)==null?void 0:h.reloadAsyncProp(e,u)},consumerId:n.id,requestId:e}):Bv(t,r,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Jt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Ch extends mm{constructor(){super(...arguments),this.internalState=null,this.lifecycle=yc.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){Tr(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=DI(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,i,a]=NI(r,n.pixelProjectionMatrix);return e.length===2?[s,i]:[s,i,a]}unproject(e){return Tr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Tr(this.internalState);const r=this.internalState.viewport||this.context.viewport;return NX(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Jt.DEFAULT||e===Jt.LNGLAT||e===Jt.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Tr(e instanceof Uint8Array);const[n,r,s]=e;return n+r*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:kQ(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=c3(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=c3(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const s of r)n.invalidateAll(s);else n.invalidateAll();if(n){const{props:s}=e,i=this.internalState.hasPickingBuffer,a=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(l=>l.getNeedsPickingBuffer.call(this,l));if(i!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:l,instancePickingColors:u}=n.attributes,h=l||u;h&&(a&&h.constant&&(h.constant=!1,n.invalidate(h.id)),!h.value&&!a&&(h.constant=!0,h.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e.renderPass)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:s}=e;return s>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[s]),e}raiseError(e,n){var r,s,i,a;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(s=(r=this.props).onError)!=null&&s.call(r,e)||(a=(i=this.context)==null?void 0:i.onError)==null||a.call(i,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!nG({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const r in e)e[r].layoutChanged()&&(n=!0);for(const r of this.getModels())this._setModelAttributes(r,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),s=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:s,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const s in n)Object.defineProperty(r,s,{value:n[s]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Ls.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>u3&&Sn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ls=ih.allocate(Ls,n,{size:4,copy:!0,maxCount:Math.max(n,u3)});const s=Math.floor(Ls.length/4),i=[0,0,0];for(let a=r;a<s;a++)this.encodePickingColor(a,i),Ls[a*4+0]=i[0],Ls[a*4+1]=i[1],Ls[a*4+2]=i[2],Ls[a*4+3]=0}e.value=Ls.subarray(0,n*4)}_setModelAttributes(e,n,r=!1){var l;if(!Object.keys(n).length)return;if(r){const u=this.getAttributeManager();e.setBufferLayout(u.getBufferLayouts(e)),n=u.getAttributes()}const s=((l=e.userData)==null?void 0:l.excludeAttributes)||{},i={},a={};for(const u in n){if(s[u])continue;const h=n[u].getValue();for(const d in h){const g=h[d];g instanceof kn?n[u].settings.isIndexed?e.setIndexBuffer(g):i[d]=g:g&&(a[d]=g)}}e.setAttributes(i),e.setConstantAttributes(a)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:s}=this.getAttributeManager().attributes,i=r||s,a=i&&n.attributes&&n.attributes[i.id];if(a&&a.value){const l=a.value,u=this.encodePickingColor(e);for(let h=0;h<n.length;h++){const d=i.getVertexOffset(h);l[d]===u[0]&&l[d+1]===u[1]&&l[d+2]===u[2]&&this._disablePickingIndex(h)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,s=n||r;if(!s)return;const i=s.getVertexOffset(e),a=s.getVertexOffset(e+1);s.buffer.write(new Uint8Array(a-i),i)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Ls.buffer&&(r.value=Ls.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Tr(!this.internalState),Tr(Number.isFinite(this.props.coordinateSystem)),Dr(QQ,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new KQ({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Sn.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new vQ(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Dr(eG,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Dr(GQ,this,e),!e)return;const n=this.props,r=this.context,s=this.internalState,i=r.viewport,a=this._updateUniformTransition();s.propsInTransition=a,r.viewport=s.viewport||i,this.props=a;try{const l=this._getUpdateParams(),u=this.getModels();if(r.device)this.updateState(l);else try{this.updateState(l)}catch{}for(const d of this.props.extensions)d.updateState.call(this,l,d);this.setNeedsRedraw(),this._updateAttributes();const h=this.getModels()[0]!==u[0];this._postUpdate(l,h)}finally{r.viewport=i,this.props=n,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){Dr(JQ,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:n=null,uniforms:r={},parameters:s={}}){this._updateAttributeTransition();const i=this.props,a=this.context;this.props=this.internalState.propsInTransition||i;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:l}=this.props,u=l&&l(r)||[0,0];a.device instanceof Ec&&a.device.setParametersWebGL({polygonOffset:u});for(const h of this.getModels())h.device.type==="webgpu"?h.setParameters({...h.parameters,...s}):h.setParameters(s);if(a.device instanceof Ec)a.device.withParametersWebGL(s,()=>{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:s,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)});else{const h={renderPass:e,shaderModuleProps:n,uniforms:r,parameters:s,context:a};for(const d of this.props.extensions)d.draw.call(this,h,d);this.draw(h)}}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const s in e)if(e[s]){let i=!1;switch(s){case"dataChanged":const a=e[s],l=n[s];a&&Array.isArray(l)&&(n.dataChanged=Array.isArray(a)?l.concat(a):a,i=!0);default:n[s]||(n[s]=e[s],i=!0)}i&&Dr(ZQ,this,s,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var s;const r=wQ(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged)this.internalState.uniformTransitions.add(i,n[i],e[i],(s=e.transitions)==null?void 0:s[i]);return this.setChangeFlags(r)}validateProps(){_Q(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.highlightColor=r(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new gQ(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:s}=e,i=this.state.model;i!=null&&i.isInstanced&&i.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:l,highlightColor:u}=r;if(n||s.autoHighlight!==a||s.highlightedObjectIndex!==l||s.highlightColor!==u){const h={};Array.isArray(u)&&(h.highlightColor=u),(n||s.autoHighlight!==a||l!==s.highlightedObjectIndex)&&(h.highlightedObjectColor=Number.isFinite(l)&&l>=0?this.encodePickingColor(l):null),this.setShaderModuleProps({picking:h})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),s=r?r.getNeedsRedraw(e):!1;if(n=n||s,n)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Ch.defaultProps=rG;Ch.layerName="Layer";const sG=typeof window<"u"?N.useLayoutEffect:N.useEffect;function wg(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const iG={position:"absolute",zIndex:-1};function xO(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>xO(n,e));if(ym(t)){if(oG(t))return e.style=iG,N.cloneElement(t,e);if(aG(t))return N.cloneElement(t,e)}return t}function ym(t){return t&&typeof t=="object"&&"type"in t||!1}function oG(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function aG(t){const e=t.type;return e&&e.deckGLViewProps}function E_(t){if(typeof t=="function")return N.createElement(ru,{},t);if(Array.isArray(t))return t.map(E_);if(ym(t)){if(t.type===N.Fragment)return E_(t.props.children);if(wg(t.type,ru))return t}return t}function lG({children:t,layers:e=[],views:n=null}){const r=[],s=[],i={};return N.Children.forEach(E_(t),a=>{if(ym(a)){const l=a.type;if(wg(l,Ch)){const u=cG(l,a.props);s.push(u)}else r.push(a);if(wg(l,ru)&&l!==ru&&a.props.id){const u=new l(a.props);i[u.id]=u}}else a&&r.push(a)}),Object.keys(i).length>0&&(Array.isArray(n)?n.forEach(a=>{i[a.id]=a}):n&&(i[n.id]=n),n=Object.values(i)),e=s.length>0?[...s,...e]:e,{layers:e,children:r,views:n}}function cG(t,e){const n={},r=t.defaultProps||{};for(const s in e)r[s]!==e[s]&&(n[s]=e[s]);return new t(n)}const uG=N.createContext();function fG({children:t,deck:e,ContextProvider:n=uG.Provider}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const s={},i=r.views[0].id;for(const a of t){let l=i,u=a;ym(a)&&wg(a.type,ru)&&(l=a.props.id||i,u=a.props.children);const h=r.getViewport(l),d=r.getViewState(l);if(h){d.padding=h.padding;const{x:g,y:b,width:w,height:R}=h;u=xO(u,{x:g,y:b,width:w,height:R,viewport:h,viewState:d}),s[l]||(s[l]={viewport:h,children:[]}),s[l].children.push(u)}}return Object.keys(s).map(a=>{const{viewport:l,children:u}=s[a],{x:h,y:d,width:g,height:b}=l,w={position:"absolute",left:h,top:d,width:g,height:b},R=`view-${a}`,A=N.createElement("div",{key:R,id:R,style:w},...u),C={deck:e,viewport:l,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:M=>{M.viewId=a,e._onViewStateChange(M)},widgets:[]},I=`view-${a}-context`;return N.createElement(n,{key:I,value:C},A)})}const hG={mixBlendMode:null};function dG({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},s={left:0,top:0};if(n)for(const i in n)i in hG?s[i]=n[i]:r[i]=n[i];return{containerStyle:r,canvasStyle:s}}function pG(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function vO(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function gG(t,e,n){var s,i,a;const r=new e({...n,_customRender:((a=(i=(s=n.deviceProps)==null?void 0:s.adapters)==null?void 0:i[0])==null?void 0:a.type)==="webgpu"?void 0:l=>{t.redrawReason=l;const u=r.getViewports();t.lastRenderedViewports!==u?t.forceUpdate():vO(t)}});return r}function mG(t,e){const[n,r]=N.useState(0),i=N.useRef({control:null,version:n,forceUpdate:()=>r(L=>L+1)}).current,a=N.useRef(null),l=N.useRef(null),u=N.useMemo(()=>lG(t),[t.layers,t.views,t.children]);let h=!0;const d=L=>{var O;return h&&t.viewState?(i.viewStateUpdateRequested=L,null):(i.viewStateUpdateRequested=null,(O=t.onViewStateChange)==null?void 0:O.call(t,L))},g=L=>{var O;h?i.interactionStateUpdateRequested=L:(i.interactionStateUpdateRequested=null,(O=t.onInteractionStateChange)==null||O.call(t,L))},b=N.useMemo(()=>{const L={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:l.current,layers:u.layers,views:u.views,onViewStateChange:d,onInteractionStateChange:g};return delete L._customRender,i.deck&&i.deck.setProps(L),L},[t]);N.useEffect(()=>{const L=t.Deck||J0;return i.deck=gG(i,L,{...b,parent:a.current,canvas:l.current}),()=>{var O;return(O=i.deck)==null?void 0:O.finalize()}},[]),sG(()=>{vO(i);const{viewStateUpdateRequested:L,interactionStateUpdateRequested:O}=i;L&&d(L),O&&g(O)}),N.useImperativeHandle(e,()=>pG(i),[]);const w=i.deck&&i.deck.isInitialized?i.deck.getViewports():void 0,{ContextProvider:R,width:A="100%",height:C="100%",id:I,style:M}=t,{containerStyle:k,canvasStyle:P}=N.useMemo(()=>dG({width:A,height:C,style:M}),[A,C,M]);if(!i.viewStateUpdateRequested&&i.lastRenderedViewports===w||i.version!==n){i.lastRenderedViewports=w,i.version=n;const L=fG({children:u.children,deck:i.deck,ContextProvider:R}),O=N.createElement("canvas",{key:"canvas",id:I||"deckgl-overlay",ref:l,style:P});i.control=N.createElement("div",{id:`${I||"deckgl"}-wrapper`,ref:a,style:k},[O,L])}return h=!1,i.control}const f3=N.forwardRef(mG),h3=`uniform arcUniforms {
  bool greatCircle;
  bool useShortestPath;
  float numSegments;
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  highp int widthUnits;
} arc;
`,yG={name:"arc",vs:h3,fs:h3,uniformTypes:{greatCircle:"f32",useShortestPath:"f32",numSegments:"f32",widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",widthUnits:"i32"}},bG=`#version 300 es
#define SHADER_NAME arc-layer-vertex-shader
in vec4 instanceSourceColors;
in vec4 instanceTargetColors;
in vec3 instanceSourcePositions;
in vec3 instanceSourcePositions64Low;
in vec3 instanceTargetPositions;
in vec3 instanceTargetPositions64Low;
in vec3 instancePickingColors;
in float instanceWidths;
in float instanceHeights;
in float instanceTilts;
out vec4 vColor;
out vec2 uv;
out float isValid;
float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {
float deltaZ = targetZ - sourceZ;
float dh = distance * instanceHeights;
if (dh == 0.0) {
return sourceZ + deltaZ * ratio;
}
float unitZ = deltaZ / dh;
float p2 = unitZ * unitZ + 1.0;
float dir = step(deltaZ, 0.0);
float z0 = mix(sourceZ, targetZ, dir);
float r = mix(ratio, 1.0 - ratio, dir);
return sqrt(r * (p2 - r)) * dh + z0;
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
vec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);
dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
return dir_screenspace * offset_direction * width / 2.0;
}
float getSegmentRatio(float index) {
return smoothstep(0.0, 1.0, index / (arc.numSegments - 1.0));
}
vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
float distance = length(source.xy - target.xy);
float z = paraboloid(distance, source.z, target.z, segmentRatio);
float tiltAngle = radians(instanceTilts);
vec2 tiltDirection = normalize(target.xy - source.xy);
vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);
return vec3(
mix(source.xy, target.xy, segmentRatio) + tilt,
z * cos(tiltAngle)
);
}
float getAngularDist (vec2 source, vec2 target) {
vec2 sourceRadians = radians(source);
vec2 targetRadians = radians(target);
vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
vec2 shd_sq = sin_half_delta * sin_half_delta;
float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
return 2.0 * asin(sqrt(a));
}
vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
vec2 lngLat;
if(abs(angularDist - PI) < 0.001) {
lngLat = (1.0 - t) * source.xy + t * target.xy;
} else {
float a = sin((1.0 - t) * angularDist);
float b = sin(t * angularDist);
vec3 p = source3D.yxz * a + target3D.yxz * b;
lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
}
float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);
return vec3(lngLat, z);
}
void main(void) {
geometry.worldPosition = instanceSourcePositions;
geometry.worldPositionAlt = instanceTargetPositions;
float segmentIndex = float(gl_VertexID / 2);
float segmentSide = mod(float(gl_VertexID), 2.) == 0. ? -1. : 1.;
float segmentRatio = getSegmentRatio(segmentIndex);
float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
float nextSegmentRatio = getSegmentRatio(min(arc.numSegments - 1.0, segmentIndex + 1.0));
float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
isValid = 1.0;
uv = vec2(segmentRatio, segmentSide);
geometry.uv = uv;
geometry.pickingColor = instancePickingColors;
vec4 curr;
vec4 next;
vec3 source;
vec3 target;
if ((arc.greatCircle || project.projectionMode == PROJECTION_MODE_GLOBE) && project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);
vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);
if (abs(currPos.x - prevPos.x) > 180.0) {
indexDir = -1.0;
isValid = 0.0;
} else if (abs(currPos.x - nextPos.x) > 180.0) {
indexDir = 1.0;
isValid = 0.0;
}
nextPos = indexDir < 0.0 ? prevPos : nextPos;
nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
if (isValid == 0.0) {
nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
currPos = mix(currPos, nextPos, t);
segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
}
vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
} else {
vec3 source_world = instanceSourcePositions;
vec3 target_world = instanceTargetPositions;
if (arc.useShortestPath) {
source_world.x = mod(source_world.x + 180., 360.0) - 180.;
target_world.x = mod(target_world.x + 180., 360.0) - 180.;
float deltaLng = target_world.x - source_world.x;
if (deltaLng > 180.) target_world.x -= 360.;
if (deltaLng < -180.) source_world.x -= 360.;
}
source = project_position(source_world, instanceSourcePositions64Low);
target = project_position(target_world, instanceTargetPositions64Low);
float antiMeridianX = 0.0;
if (arc.useShortestPath) {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
antiMeridianX = -(project.coordinateOrigin.x + 180.) / 360. * TILE_SIZE;
}
float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);
if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
isValid = 0.0;
indexDir = sign(segmentRatio - thresholdRatio);
segmentRatio = thresholdRatio;
}
}
nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
vec3 currPos = interpolateFlat(source, target, segmentRatio);
vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);
if (arc.useShortestPath) {
if (nextPos.x < antiMeridianX) {
currPos.x += TILE_SIZE;
nextPos.x += TILE_SIZE;
}
}
curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
geometry.position = vec4(currPos, 1.0);
}
float widthPixels = clamp(
project_size_to_pixel(instanceWidths * arc.widthScale, arc.widthUnits),
arc.widthMinPixels, arc.widthMaxPixels
);
vec3 offset = vec3(
getExtrusionOffset((next.xy - curr.xy) * indexDir, segmentSide, widthPixels),
0.0);
DECKGL_FILTER_SIZE(offset, geometry);
DECKGL_FILTER_GL_POSITION(curr, geometry);
gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
vColor = vec4(color.rgb, color.a * layer.opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,xG=`#version 300 es
#define SHADER_NAME arc-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 uv;
in float isValid;
out vec4 fragColor;
void main(void) {
if (isValid == 0.0) {
discard;
}
fragColor = vColor;
geometry.uv = uv;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Sg=[0,0,0,255],vG={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:Sg},getTargetColor:{type:"accessor",value:Sg},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class tw extends Ch{getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:bG,fs:xG,modules:[AI,II,yG]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getSourceColor",defaultValue:Sg},instanceTargetColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getTargetColor",defaultValue:Sg},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:s,widthMaxPixels:i,greatCircle:a,wrapLongitude:l,numSegments:u}=this.props,h={numSegments:u,widthUnits:hl[n],widthScale:r,widthMinPixels:s,widthMaxPixels:i,greatCircle:a,useShortestPath:l},d=this.state.model;d.shaderInputs.setProps({arc:h}),d.setVertexCount(u*2),d.draw(this.context.renderPass)}_getModel(){return new nu(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-strip",isInstanced:!0})}}tw.layerName="ArcLayer";tw.defaultProps=vG;const d3=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,_G={name:"scatterplot",vs:d3,fs:d3,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},wG=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,SG=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,TG=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)

struct LayerUniforms {
  opacity: f32,
};

var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    // discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        // discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    // discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,p3=[0,0,0,255],EG={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:p3},getLineColor:{type:"accessor",value:p3},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Tg extends Ch{getShaders(){return super.getShaders({vs:wG,fs:SG,source:TG,modules:[AI,II,_G]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:s,radiusMaxPixels:i,stroked:a,filled:l,billboard:u,antialiasing:h,lineWidthUnits:d,lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:w}=this.props,R={stroked:a,filled:l,billboard:u,antialiasing:h,radiusUnits:hl[n],radiusScale:r,radiusMinPixels:s,radiusMaxPixels:i,lineWidthUnits:hl[d],lineWidthScale:g,lineWidthMinPixels:b,lineWidthMaxPixels:w},A=this.state.model;A.shaderInputs.setProps({scatterplot:R}),A.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new nu(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new GX({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}Tg.defaultProps=EG;Tg.layerName="ScatterplotLayer";var Mt={};const AG=Object.prototype.toString;function ah(t){const e=AG.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const RG=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:ah},Symbol.toStringTag,{value:"Module"})),CG=wR(RG);function kG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ah(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,s=e.toIndex,i=s===void 0?t.length:s;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],l=r+1;l<i;l++)t[l]>a&&(a=t[l]);return a}function NG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ah(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,s=e.toIndex,i=s===void 0?t.length:s;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],l=r+1;l<i;l++)t[l]<a&&(a=t[l]);return a}function MG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ah(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!ah(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=NG(t),s=kG(t);if(r===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=e.min,a=i===void 0?e.autoMinMax?r:0:i,l=e.max,u=l===void 0?e.autoMinMax?s:1:l;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-a)/(s-r),d=0;d<t.length;d++)n[d]=(t[d]-r)*h+a;return n}const IG=Object.freeze(Object.defineProperty({__proto__:null,default:MG},Symbol.toStringTag,{value:"Module"})),OG=wR(IG);var g3;function PG(){var Ps,A_,Zn;if(g3)return Mt;g3=1,Object.defineProperty(Mt,"__esModule",{value:!0});var t=CG,e=OG;const n=" ".repeat(2),r=" ".repeat(4);function s(){return i(this)}function i(B,S={}){const{maxRows:v=15,maxColumns:y=10,maxNumSize:_=8,padMinus:E="auto"}=S;return`${B.constructor.name} {
${n}[
${r}${a(B,v,y,_,E)}
${n}]
${n}rows: ${B.rows}
${n}columns: ${B.columns}
}`}function a(B,S,v,y,_){const{rows:E,columns:U}=B,$=Math.min(E,S),W=Math.min(U,v),X=[];if(_==="auto"){_=!1;e:for(let be=0;be<$;be++)for(let re=0;re<W;re++)if(B.get(be,re)<0){_=!0;break e}}for(let be=0;be<$;be++){let re=[];for(let Ie=0;Ie<W;Ie++)re.push(l(B.get(be,Ie),y,_));X.push(`${re.join(" ")}`)}return W!==U&&(X[X.length-1]+=` ... ${U-v} more columns`),$!==E&&X.push(`... ${E-S} more rows`),X.join(`
${r}`)}function l(B,S,v){return(B>=0&&v?` ${u(B,S-1)}`:u(B,S)).padEnd(S)}function u(B,S){let v=B.toString();if(v.length<=S)return v;let y=B.toFixed(S);if(y.length>S&&(y=B.toFixed(Math.max(0,S-(y.length-S)))),y.length<=S&&!y.startsWith("0.000")&&!y.startsWith("-0.000"))return y;let _=B.toExponential(S);return _.length>S&&(_=B.toExponential(Math.max(0,S-(_.length-S)))),_.slice(0)}function h(B,S){B.prototype.add=function(y){return typeof y=="number"?this.addS(y):this.addM(y)},B.prototype.addS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)+y);return this},B.prototype.addM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)+y.get(_,E));return this},B.add=function(y,_){return new S(y).add(_)},B.prototype.sub=function(y){return typeof y=="number"?this.subS(y):this.subM(y)},B.prototype.subS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)-y);return this},B.prototype.subM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)-y.get(_,E));return this},B.sub=function(y,_){return new S(y).sub(_)},B.prototype.subtract=B.prototype.sub,B.prototype.subtractS=B.prototype.subS,B.prototype.subtractM=B.prototype.subM,B.subtract=B.sub,B.prototype.mul=function(y){return typeof y=="number"?this.mulS(y):this.mulM(y)},B.prototype.mulS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)*y);return this},B.prototype.mulM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)*y.get(_,E));return this},B.mul=function(y,_){return new S(y).mul(_)},B.prototype.multiply=B.prototype.mul,B.prototype.multiplyS=B.prototype.mulS,B.prototype.multiplyM=B.prototype.mulM,B.multiply=B.mul,B.prototype.div=function(y){return typeof y=="number"?this.divS(y):this.divM(y)},B.prototype.divS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)/y);return this},B.prototype.divM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)/y.get(_,E));return this},B.div=function(y,_){return new S(y).div(_)},B.prototype.divide=B.prototype.div,B.prototype.divideS=B.prototype.divS,B.prototype.divideM=B.prototype.divM,B.divide=B.div,B.prototype.mod=function(y){return typeof y=="number"?this.modS(y):this.modM(y)},B.prototype.modS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)%y);return this},B.prototype.modM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)%y.get(_,E));return this},B.mod=function(y,_){return new S(y).mod(_)},B.prototype.modulus=B.prototype.mod,B.prototype.modulusS=B.prototype.modS,B.prototype.modulusM=B.prototype.modM,B.modulus=B.mod,B.prototype.and=function(y){return typeof y=="number"?this.andS(y):this.andM(y)},B.prototype.andS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)&y);return this},B.prototype.andM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)&y.get(_,E));return this},B.and=function(y,_){return new S(y).and(_)},B.prototype.or=function(y){return typeof y=="number"?this.orS(y):this.orM(y)},B.prototype.orS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)|y);return this},B.prototype.orM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)|y.get(_,E));return this},B.or=function(y,_){return new S(y).or(_)},B.prototype.xor=function(y){return typeof y=="number"?this.xorS(y):this.xorM(y)},B.prototype.xorS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)^y);return this},B.prototype.xorM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)^y.get(_,E));return this},B.xor=function(y,_){return new S(y).xor(_)},B.prototype.leftShift=function(y){return typeof y=="number"?this.leftShiftS(y):this.leftShiftM(y)},B.prototype.leftShiftS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)<<y);return this},B.prototype.leftShiftM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)<<y.get(_,E));return this},B.leftShift=function(y,_){return new S(y).leftShift(_)},B.prototype.signPropagatingRightShift=function(y){return typeof y=="number"?this.signPropagatingRightShiftS(y):this.signPropagatingRightShiftM(y)},B.prototype.signPropagatingRightShiftS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)>>y);return this},B.prototype.signPropagatingRightShiftM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)>>y.get(_,E));return this},B.signPropagatingRightShift=function(y,_){return new S(y).signPropagatingRightShift(_)},B.prototype.rightShift=function(y){return typeof y=="number"?this.rightShiftS(y):this.rightShiftM(y)},B.prototype.rightShiftS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)>>>y);return this},B.prototype.rightShiftM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)>>>y.get(_,E));return this},B.rightShift=function(y,_){return new S(y).rightShift(_)},B.prototype.zeroFillRightShift=B.prototype.rightShift,B.prototype.zeroFillRightShiftS=B.prototype.rightShiftS,B.prototype.zeroFillRightShiftM=B.prototype.rightShiftM,B.zeroFillRightShift=B.rightShift,B.prototype.not=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,~this.get(y,_));return this},B.not=function(y){return new S(y).not()},B.prototype.abs=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.abs(this.get(y,_)));return this},B.abs=function(y){return new S(y).abs()},B.prototype.acos=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.acos(this.get(y,_)));return this},B.acos=function(y){return new S(y).acos()},B.prototype.acosh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.acosh(this.get(y,_)));return this},B.acosh=function(y){return new S(y).acosh()},B.prototype.asin=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.asin(this.get(y,_)));return this},B.asin=function(y){return new S(y).asin()},B.prototype.asinh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.asinh(this.get(y,_)));return this},B.asinh=function(y){return new S(y).asinh()},B.prototype.atan=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.atan(this.get(y,_)));return this},B.atan=function(y){return new S(y).atan()},B.prototype.atanh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.atanh(this.get(y,_)));return this},B.atanh=function(y){return new S(y).atanh()},B.prototype.cbrt=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.cbrt(this.get(y,_)));return this},B.cbrt=function(y){return new S(y).cbrt()},B.prototype.ceil=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.ceil(this.get(y,_)));return this},B.ceil=function(y){return new S(y).ceil()},B.prototype.clz32=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.clz32(this.get(y,_)));return this},B.clz32=function(y){return new S(y).clz32()},B.prototype.cos=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.cos(this.get(y,_)));return this},B.cos=function(y){return new S(y).cos()},B.prototype.cosh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.cosh(this.get(y,_)));return this},B.cosh=function(y){return new S(y).cosh()},B.prototype.exp=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.exp(this.get(y,_)));return this},B.exp=function(y){return new S(y).exp()},B.prototype.expm1=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.expm1(this.get(y,_)));return this},B.expm1=function(y){return new S(y).expm1()},B.prototype.floor=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.floor(this.get(y,_)));return this},B.floor=function(y){return new S(y).floor()},B.prototype.fround=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.fround(this.get(y,_)));return this},B.fround=function(y){return new S(y).fround()},B.prototype.log=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.log(this.get(y,_)));return this},B.log=function(y){return new S(y).log()},B.prototype.log1p=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.log1p(this.get(y,_)));return this},B.log1p=function(y){return new S(y).log1p()},B.prototype.log10=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.log10(this.get(y,_)));return this},B.log10=function(y){return new S(y).log10()},B.prototype.log2=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.log2(this.get(y,_)));return this},B.log2=function(y){return new S(y).log2()},B.prototype.round=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.round(this.get(y,_)));return this},B.round=function(y){return new S(y).round()},B.prototype.sign=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.sign(this.get(y,_)));return this},B.sign=function(y){return new S(y).sign()},B.prototype.sin=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.sin(this.get(y,_)));return this},B.sin=function(y){return new S(y).sin()},B.prototype.sinh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.sinh(this.get(y,_)));return this},B.sinh=function(y){return new S(y).sinh()},B.prototype.sqrt=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.sqrt(this.get(y,_)));return this},B.sqrt=function(y){return new S(y).sqrt()},B.prototype.tan=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.tan(this.get(y,_)));return this},B.tan=function(y){return new S(y).tan()},B.prototype.tanh=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.tanh(this.get(y,_)));return this},B.tanh=function(y){return new S(y).tanh()},B.prototype.trunc=function(){for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.set(y,_,Math.trunc(this.get(y,_)));return this},B.trunc=function(y){return new S(y).trunc()},B.pow=function(y,_){return new S(y).pow(_)},B.prototype.pow=function(y){return typeof y=="number"?this.powS(y):this.powM(y)},B.prototype.powS=function(y){for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)**y);return this},B.prototype.powM=function(y){if(y=S.checkMatrix(y),this.rows!==y.rows||this.columns!==y.columns)throw new RangeError("Matrices dimensions must be equal");for(let _=0;_<this.rows;_++)for(let E=0;E<this.columns;E++)this.set(_,E,this.get(_,E)**y.get(_,E));return this}}function d(B,S,v){let y=v?B.rows:B.rows-1;if(S<0||S>y)throw new RangeError("Row index out of range")}function g(B,S,v){let y=v?B.columns:B.columns-1;if(S<0||S>y)throw new RangeError("Column index out of range")}function b(B,S){if(S.to1DArray&&(S=S.to1DArray()),S.length!==B.columns)throw new RangeError("vector size must be the same as the number of columns");return S}function w(B,S){if(S.to1DArray&&(S=S.to1DArray()),S.length!==B.rows)throw new RangeError("vector size must be the same as the number of rows");return S}function R(B,S){if(!t.isAnyArray(S))throw new TypeError("row indices must be an array");for(let v=0;v<S.length;v++)if(S[v]<0||S[v]>=B.rows)throw new RangeError("row indices are out of range")}function A(B,S){if(!t.isAnyArray(S))throw new TypeError("column indices must be an array");for(let v=0;v<S.length;v++)if(S[v]<0||S[v]>=B.columns)throw new RangeError("column indices are out of range")}function C(B,S,v,y,_){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(M("startRow",S),M("endRow",v),M("startColumn",y),M("endColumn",_),S>v||y>_||S<0||S>=B.rows||v<0||v>=B.rows||y<0||y>=B.columns||_<0||_>=B.columns)throw new RangeError("Submatrix indices are out of range")}function I(B,S=0){let v=[];for(let y=0;y<B;y++)v.push(S);return v}function M(B,S){if(typeof S!="number")throw new TypeError(`${B} must be a number`)}function k(B){if(B.isEmpty())throw new Error("Empty matrix has no elements to index")}function P(B){let S=I(B.rows);for(let v=0;v<B.rows;++v)for(let y=0;y<B.columns;++y)S[v]+=B.get(v,y);return S}function L(B){let S=I(B.columns);for(let v=0;v<B.rows;++v)for(let y=0;y<B.columns;++y)S[y]+=B.get(v,y);return S}function O(B){let S=0;for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)S+=B.get(v,y);return S}function H(B){let S=I(B.rows,1);for(let v=0;v<B.rows;++v)for(let y=0;y<B.columns;++y)S[v]*=B.get(v,y);return S}function Y(B){let S=I(B.columns,1);for(let v=0;v<B.rows;++v)for(let y=0;y<B.columns;++y)S[y]*=B.get(v,y);return S}function J(B){let S=1;for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)S*=B.get(v,y);return S}function K(B,S,v){const y=B.rows,_=B.columns,E=[];for(let U=0;U<y;U++){let $=0,W=0,X=0;for(let be=0;be<_;be++)X=B.get(U,be)-v[U],$+=X,W+=X*X;S?E.push((W-$*$/_)/(_-1)):E.push((W-$*$/_)/_)}return E}function Z(B,S,v){const y=B.rows,_=B.columns,E=[];for(let U=0;U<_;U++){let $=0,W=0,X=0;for(let be=0;be<y;be++)X=B.get(be,U)-v[U],$+=X,W+=X*X;S?E.push((W-$*$/y)/(y-1)):E.push((W-$*$/y)/y)}return E}function ae(B,S,v){const y=B.rows,_=B.columns,E=y*_;let U=0,$=0,W=0;for(let X=0;X<y;X++)for(let be=0;be<_;be++)W=B.get(X,be)-v,U+=W,$+=W*W;return S?($-U*U/E)/(E-1):($-U*U/E)/E}function _e(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)-S[v])}function oe(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)-S[y])}function Re(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)-S)}function ie(B){const S=[];for(let v=0;v<B.rows;v++){let y=0;for(let _=0;_<B.columns;_++)y+=B.get(v,_)**2/(B.columns-1);S.push(Math.sqrt(y))}return S}function Ae(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)/S[v])}function he(B){const S=[];for(let v=0;v<B.columns;v++){let y=0;for(let _=0;_<B.rows;_++)y+=B.get(_,v)**2/(B.rows-1);S.push(Math.sqrt(y))}return S}function $e(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)/S[y])}function D(B){const S=B.size-1;let v=0;for(let y=0;y<B.columns;y++)for(let _=0;_<B.rows;_++)v+=B.get(_,y)**2/S;return Math.sqrt(v)}function te(B,S){for(let v=0;v<B.rows;v++)for(let y=0;y<B.columns;y++)B.set(v,y,B.get(v,y)/S)}class G{static from1DArray(S,v,y){if(S*v!==y.length)throw new RangeError("data length does not match given dimensions");let E=new ee(S,v);for(let U=0;U<S;U++)for(let $=0;$<v;$++)E.set(U,$,y[U*v+$]);return E}static rowVector(S){let v=new ee(1,S.length);for(let y=0;y<S.length;y++)v.set(0,y,S[y]);return v}static columnVector(S){let v=new ee(S.length,1);for(let y=0;y<S.length;y++)v.set(y,0,S[y]);return v}static zeros(S,v){return new ee(S,v)}static ones(S,v){return new ee(S,v).fill(1)}static rand(S,v,y={}){if(typeof y!="object")throw new TypeError("options must be an object");const{random:_=Math.random}=y;let E=new ee(S,v);for(let U=0;U<S;U++)for(let $=0;$<v;$++)E.set(U,$,_());return E}static randInt(S,v,y={}){if(typeof y!="object")throw new TypeError("options must be an object");const{min:_=0,max:E=1e3,random:U=Math.random}=y;if(!Number.isInteger(_))throw new TypeError("min must be an integer");if(!Number.isInteger(E))throw new TypeError("max must be an integer");if(_>=E)throw new RangeError("min must be smaller than max");let $=E-_,W=new ee(S,v);for(let X=0;X<S;X++)for(let be=0;be<v;be++){let re=_+Math.round(U()*$);W.set(X,be,re)}return W}static eye(S,v,y){v===void 0&&(v=S),y===void 0&&(y=1);let _=Math.min(S,v),E=this.zeros(S,v);for(let U=0;U<_;U++)E.set(U,U,y);return E}static diag(S,v,y){let _=S.length;v===void 0&&(v=_),y===void 0&&(y=v);let E=Math.min(_,v,y),U=this.zeros(v,y);for(let $=0;$<E;$++)U.set($,$,S[$]);return U}static min(S,v){S=this.checkMatrix(S),v=this.checkMatrix(v);let y=S.rows,_=S.columns,E=new ee(y,_);for(let U=0;U<y;U++)for(let $=0;$<_;$++)E.set(U,$,Math.min(S.get(U,$),v.get(U,$)));return E}static max(S,v){S=this.checkMatrix(S),v=this.checkMatrix(v);let y=S.rows,_=S.columns,E=new this(y,_);for(let U=0;U<y;U++)for(let $=0;$<_;$++)E.set(U,$,Math.max(S.get(U,$),v.get(U,$)));return E}static checkMatrix(S){return G.isMatrix(S)?S:new ee(S)}static isMatrix(S){return S!=null&&S.klass==="Matrix"}get size(){return this.rows*this.columns}apply(S){if(typeof S!="function")throw new TypeError("callback must be a function");for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)S.call(this,v,y);return this}to1DArray(){let S=[];for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)S.push(this.get(v,y));return S}to2DArray(){let S=[];for(let v=0;v<this.rows;v++){S.push([]);for(let y=0;y<this.columns;y++)S[v].push(this.get(v,y))}return S}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let S=0;S<this.rows;S++)for(let v=0;v<=S;v++)if(this.get(S,v)!==this.get(v,S))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let S=0;S<this.rows;S++)if(this.get(S,S)!==0)return!1;return!0}isEchelonForm(){let S=0,v=0,y=-1,_=!0,E=!1;for(;S<this.rows&&_;){for(v=0,E=!1;v<this.columns&&E===!1;)this.get(S,v)===0?v++:this.get(S,v)===1&&v>y?(E=!0,y=v):(_=!1,E=!0);S++}return _}isReducedEchelonForm(){let S=0,v=0,y=-1,_=!0,E=!1;for(;S<this.rows&&_;){for(v=0,E=!1;v<this.columns&&E===!1;)this.get(S,v)===0?v++:this.get(S,v)===1&&v>y?(E=!0,y=v):(_=!1,E=!0);for(let U=v+1;U<this.rows;U++)this.get(S,U)!==0&&(_=!1);S++}return _}echelonForm(){let S=this.clone(),v=0,y=0;for(;v<S.rows&&y<S.columns;){let _=v;for(let E=v;E<S.rows;E++)S.get(E,y)>S.get(_,y)&&(_=E);if(S.get(_,y)===0)y++;else{S.swapRows(v,_);let E=S.get(v,y);for(let U=y;U<S.columns;U++)S.set(v,U,S.get(v,U)/E);for(let U=v+1;U<S.rows;U++){let $=S.get(U,y)/S.get(v,y);S.set(U,y,0);for(let W=y+1;W<S.columns;W++)S.set(U,W,S.get(U,W)-S.get(v,W)*$)}v++,y++}}return S}reducedEchelonForm(){let S=this.echelonForm(),v=S.columns,y=S.rows,_=y-1;for(;_>=0;)if(S.maxRow(_)===0)_--;else{let E=0,U=!1;for(;E<y&&U===!1;)S.get(_,E)===1?U=!0:E++;for(let $=0;$<_;$++){let W=S.get($,E);for(let X=E;X<v;X++){let be=S.get($,X)-W*S.get(_,X);S.set($,X,be)}}_--}return S}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{rows:v=1,columns:y=1}=S;if(!Number.isInteger(v)||v<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(y)||y<=0)throw new TypeError("columns must be a positive integer");let _=new ee(this.rows*v,this.columns*y);for(let E=0;E<v;E++)for(let U=0;U<y;U++)_.setSubMatrix(this,this.rows*E,this.columns*U);return _}fill(S){for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,S);return this}neg(){return this.mulS(-1)}getRow(S){d(this,S);let v=[];for(let y=0;y<this.columns;y++)v.push(this.get(S,y));return v}getRowVector(S){return ee.rowVector(this.getRow(S))}setRow(S,v){d(this,S),v=b(this,v);for(let y=0;y<this.columns;y++)this.set(S,y,v[y]);return this}swapRows(S,v){d(this,S),d(this,v);for(let y=0;y<this.columns;y++){let _=this.get(S,y);this.set(S,y,this.get(v,y)),this.set(v,y,_)}return this}getColumn(S){g(this,S);let v=[];for(let y=0;y<this.rows;y++)v.push(this.get(y,S));return v}getColumnVector(S){return ee.columnVector(this.getColumn(S))}setColumn(S,v){g(this,S),v=w(this,v);for(let y=0;y<this.rows;y++)this.set(y,S,v[y]);return this}swapColumns(S,v){g(this,S),g(this,v);for(let y=0;y<this.rows;y++){let _=this.get(y,S);this.set(y,S,this.get(y,v)),this.set(y,v,_)}return this}addRowVector(S){S=b(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)+S[y]);return this}subRowVector(S){S=b(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)-S[y]);return this}mulRowVector(S){S=b(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)*S[y]);return this}divRowVector(S){S=b(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)/S[y]);return this}addColumnVector(S){S=w(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)+S[v]);return this}subColumnVector(S){S=w(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)-S[v]);return this}mulColumnVector(S){S=w(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)*S[v]);return this}divColumnVector(S){S=w(this,S);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)this.set(v,y,this.get(v,y)/S[v]);return this}mulRow(S,v){d(this,S);for(let y=0;y<this.columns;y++)this.set(S,y,this.get(S,y)*v);return this}mulColumn(S,v){g(this,S);for(let y=0;y<this.rows;y++)this.set(y,S,this.get(y,S)*v);return this}max(S){if(this.isEmpty())return NaN;switch(S){case"row":{const v=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)>v[y]&&(v[y]=this.get(y,_));return v}case"column":{const v=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)>v[_]&&(v[_]=this.get(y,_));return v}case void 0:{let v=this.get(0,0);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)>v&&(v=this.get(y,_));return v}default:throw new Error(`invalid option: ${S}`)}}maxIndex(){k(this);let S=this.get(0,0),v=[0,0];for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)>S&&(S=this.get(y,_),v[0]=y,v[1]=_);return v}min(S){if(this.isEmpty())return NaN;switch(S){case"row":{const v=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)<v[y]&&(v[y]=this.get(y,_));return v}case"column":{const v=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)<v[_]&&(v[_]=this.get(y,_));return v}case void 0:{let v=this.get(0,0);for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)<v&&(v=this.get(y,_));return v}default:throw new Error(`invalid option: ${S}`)}}minIndex(){k(this);let S=this.get(0,0),v=[0,0];for(let y=0;y<this.rows;y++)for(let _=0;_<this.columns;_++)this.get(y,_)<S&&(S=this.get(y,_),v[0]=y,v[1]=_);return v}maxRow(S){if(d(this,S),this.isEmpty())return NaN;let v=this.get(S,0);for(let y=1;y<this.columns;y++)this.get(S,y)>v&&(v=this.get(S,y));return v}maxRowIndex(S){d(this,S),k(this);let v=this.get(S,0),y=[S,0];for(let _=1;_<this.columns;_++)this.get(S,_)>v&&(v=this.get(S,_),y[1]=_);return y}minRow(S){if(d(this,S),this.isEmpty())return NaN;let v=this.get(S,0);for(let y=1;y<this.columns;y++)this.get(S,y)<v&&(v=this.get(S,y));return v}minRowIndex(S){d(this,S),k(this);let v=this.get(S,0),y=[S,0];for(let _=1;_<this.columns;_++)this.get(S,_)<v&&(v=this.get(S,_),y[1]=_);return y}maxColumn(S){if(g(this,S),this.isEmpty())return NaN;let v=this.get(0,S);for(let y=1;y<this.rows;y++)this.get(y,S)>v&&(v=this.get(y,S));return v}maxColumnIndex(S){g(this,S),k(this);let v=this.get(0,S),y=[0,S];for(let _=1;_<this.rows;_++)this.get(_,S)>v&&(v=this.get(_,S),y[0]=_);return y}minColumn(S){if(g(this,S),this.isEmpty())return NaN;let v=this.get(0,S);for(let y=1;y<this.rows;y++)this.get(y,S)<v&&(v=this.get(y,S));return v}minColumnIndex(S){g(this,S),k(this);let v=this.get(0,S),y=[0,S];for(let _=1;_<this.rows;_++)this.get(_,S)<v&&(v=this.get(_,S),y[0]=_);return y}diag(){let S=Math.min(this.rows,this.columns),v=[];for(let y=0;y<S;y++)v.push(this.get(y,y));return v}norm(S="frobenius"){switch(S){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${S}`)}}cumulativeSum(){let S=0;for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)S+=this.get(v,y),this.set(v,y,S);return this}dot(S){G.isMatrix(S)&&(S=S.to1DArray());let v=this.to1DArray();if(v.length!==S.length)throw new RangeError("vectors do not have the same size");let y=0;for(let _=0;_<v.length;_++)y+=v[_]*S[_];return y}mmul(S){S=ee.checkMatrix(S);let v=this.rows,y=this.columns,_=S.columns,E=new ee(v,_),U=new Float64Array(y);for(let $=0;$<_;$++){for(let W=0;W<y;W++)U[W]=S.get(W,$);for(let W=0;W<v;W++){let X=0;for(let be=0;be<y;be++)X+=this.get(W,be)*U[be];E.set(W,$,X)}}return E}mpow(S){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(S)||S<0)throw new RangeError("Exponent must be a non-negative integer");let v=ee.eye(this.rows),y=this;for(let _=S;_>=1;_/=2)(_&1)!==0&&(v=v.mmul(y)),y=y.mmul(y);return v}strassen2x2(S){S=ee.checkMatrix(S);let v=new ee(2,2);const y=this.get(0,0),_=S.get(0,0),E=this.get(0,1),U=S.get(0,1),$=this.get(1,0),W=S.get(1,0),X=this.get(1,1),be=S.get(1,1),re=(y+X)*(_+be),Ie=($+X)*_,We=y*(U-be),ke=X*(W-_),Pe=(y+E)*be,Ge=($-y)*(_+U),se=(E-X)*(W+be),qe=re+ke-Pe+se,et=We+Pe,lt=Ie+ke,ht=re-Ie+We+Ge;return v.set(0,0,qe),v.set(0,1,et),v.set(1,0,lt),v.set(1,1,ht),v}strassen3x3(S){S=ee.checkMatrix(S);let v=new ee(3,3);const y=this.get(0,0),_=this.get(0,1),E=this.get(0,2),U=this.get(1,0),$=this.get(1,1),W=this.get(1,2),X=this.get(2,0),be=this.get(2,1),re=this.get(2,2),Ie=S.get(0,0),We=S.get(0,1),ke=S.get(0,2),Pe=S.get(1,0),Ge=S.get(1,1),se=S.get(1,2),qe=S.get(2,0),et=S.get(2,1),lt=S.get(2,2),ht=(y+_+E-U-$-be-re)*Ge,vn=(y-U)*(-We+Ge),it=$*(-Ie+We+Pe-Ge-se-qe+lt),ct=(-y+U+$)*(Ie-We+Ge),rn=(U+$)*(-Ie+We),de=y*Ie,Le=(-y+X+be)*(Ie-ke+se),Qe=(-y+X)*(ke-se),Ve=(X+be)*(-Ie+ke),mn=(y+_+E-$-W-X-be)*se,Lt=be*(-Ie+ke+Pe-Ge-se-qe+et),sn=(-E+be+re)*(Ge+qe-et),cn=(E-re)*(Ge-et),Qn=E*qe,Lr=(be+re)*(-qe+et),Xt=(-E+$+W)*(se+qe-lt),Zr=(E-W)*(se-lt),Ds=($+W)*(-qe+lt),At=_*Pe,Vn=W*et,sr=U*ke,kr=X*We,Yt=re*lt,vu=de+Qn+At,Ih=ht+ct+rn+de+sn+Qn+Lr,_u=de+Le+Ve+mn+Qn+Xt+Ds,Gi=vn+it+ct+de+Qn+Xt+Zr,Oh=vn+ct+rn+de+Vn,Ph=Qn+Xt+Zr+Ds+sr,Ji=de+Le+Qe+Lt+sn+cn+Qn,Sm=sn+cn+Qn+Lr+kr,Dh=de+Le+Qe+Ve+Yt;return v.set(0,0,vu),v.set(0,1,Ih),v.set(0,2,_u),v.set(1,0,Gi),v.set(1,1,Oh),v.set(1,2,Ph),v.set(2,0,Ji),v.set(2,1,Sm),v.set(2,2,Dh),v}mmulStrassen(S){S=ee.checkMatrix(S);let v=this.clone(),y=v.rows,_=v.columns,E=S.rows,U=S.columns;_!==E&&console.warn(`Multiplying ${y} x ${_} and ${E} x ${U} matrix: dimensions do not match.`);function $(re,Ie,We){let ke=re.rows,Pe=re.columns;if(ke===Ie&&Pe===We)return re;{let Ge=G.zeros(Ie,We);return Ge=Ge.setSubMatrix(re,0,0),Ge}}let W=Math.max(y,E),X=Math.max(_,U);v=$(v,W,X),S=$(S,W,X);function be(re,Ie,We,ke){if(We<=512||ke<=512)return re.mmul(Ie);We%2===1&&ke%2===1?(re=$(re,We+1,ke+1),Ie=$(Ie,We+1,ke+1)):We%2===1?(re=$(re,We+1,ke),Ie=$(Ie,We+1,ke)):ke%2===1&&(re=$(re,We,ke+1),Ie=$(Ie,We,ke+1));let Pe=parseInt(re.rows/2,10),Ge=parseInt(re.columns/2,10),se=re.subMatrix(0,Pe-1,0,Ge-1),qe=Ie.subMatrix(0,Pe-1,0,Ge-1),et=re.subMatrix(0,Pe-1,Ge,re.columns-1),lt=Ie.subMatrix(0,Pe-1,Ge,Ie.columns-1),ht=re.subMatrix(Pe,re.rows-1,0,Ge-1),vn=Ie.subMatrix(Pe,Ie.rows-1,0,Ge-1),it=re.subMatrix(Pe,re.rows-1,Ge,re.columns-1),ct=Ie.subMatrix(Pe,Ie.rows-1,Ge,Ie.columns-1),rn=be(G.add(se,it),G.add(qe,ct),Pe,Ge),de=be(G.add(ht,it),qe,Pe,Ge),Le=be(se,G.sub(lt,ct),Pe,Ge),Qe=be(it,G.sub(vn,qe),Pe,Ge),Ve=be(G.add(se,et),ct,Pe,Ge),mn=be(G.sub(ht,se),G.add(qe,lt),Pe,Ge),Lt=be(G.sub(et,it),G.add(vn,ct),Pe,Ge),sn=G.add(rn,Qe);sn.sub(Ve),sn.add(Lt);let cn=G.add(Le,Ve),Qn=G.add(de,Qe),Lr=G.sub(rn,de);Lr.add(Le),Lr.add(mn);let Xt=G.zeros(2*sn.rows,2*sn.columns);return Xt=Xt.setSubMatrix(sn,0,0),Xt=Xt.setSubMatrix(cn,sn.rows,0),Xt=Xt.setSubMatrix(Qn,0,sn.columns),Xt=Xt.setSubMatrix(Lr,sn.rows,sn.columns),Xt.subMatrix(0,We-1,0,ke-1)}return be(v,S,W,X)}scaleRows(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{min:v=0,max:y=1}=S;if(!Number.isFinite(v))throw new TypeError("min must be a number");if(!Number.isFinite(y))throw new TypeError("max must be a number");if(v>=y)throw new RangeError("min must be smaller than max");let _=new ee(this.rows,this.columns);for(let E=0;E<this.rows;E++){const U=this.getRow(E);U.length>0&&e(U,{min:v,max:y,output:U}),_.setRow(E,U)}return _}scaleColumns(S={}){if(typeof S!="object")throw new TypeError("options must be an object");const{min:v=0,max:y=1}=S;if(!Number.isFinite(v))throw new TypeError("min must be a number");if(!Number.isFinite(y))throw new TypeError("max must be a number");if(v>=y)throw new RangeError("min must be smaller than max");let _=new ee(this.rows,this.columns);for(let E=0;E<this.columns;E++){const U=this.getColumn(E);U.length&&e(U,{min:v,max:y,output:U}),_.setColumn(E,U)}return _}flipRows(){const S=Math.ceil(this.columns/2);for(let v=0;v<this.rows;v++)for(let y=0;y<S;y++){let _=this.get(v,y),E=this.get(v,this.columns-1-y);this.set(v,y,E),this.set(v,this.columns-1-y,_)}return this}flipColumns(){const S=Math.ceil(this.rows/2);for(let v=0;v<this.columns;v++)for(let y=0;y<S;y++){let _=this.get(y,v),E=this.get(this.rows-1-y,v);this.set(y,v,E),this.set(this.rows-1-y,v,_)}return this}kroneckerProduct(S){S=ee.checkMatrix(S);let v=this.rows,y=this.columns,_=S.rows,E=S.columns,U=new ee(v*_,y*E);for(let $=0;$<v;$++)for(let W=0;W<y;W++)for(let X=0;X<_;X++)for(let be=0;be<E;be++)U.set(_*$+X,E*W+be,this.get($,W)*S.get(X,be));return U}kroneckerSum(S){if(S=ee.checkMatrix(S),!this.isSquare()||!S.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let v=this.rows,y=S.rows,_=this.kroneckerProduct(ee.eye(y,y)),E=ee.eye(v,v).kroneckerProduct(S);return _.add(E)}transpose(){let S=new ee(this.columns,this.rows);for(let v=0;v<this.rows;v++)for(let y=0;y<this.columns;y++)S.set(y,v,this.get(v,y));return S}sortRows(S=F){for(let v=0;v<this.rows;v++)this.setRow(v,this.getRow(v).sort(S));return this}sortColumns(S=F){for(let v=0;v<this.columns;v++)this.setColumn(v,this.getColumn(v).sort(S));return this}subMatrix(S,v,y,_){C(this,S,v,y,_);let E=new ee(v-S+1,_-y+1);for(let U=S;U<=v;U++)for(let $=y;$<=_;$++)E.set(U-S,$-y,this.get(U,$));return E}subMatrixRow(S,v,y){if(v===void 0&&(v=0),y===void 0&&(y=this.columns-1),v>y||v<0||v>=this.columns||y<0||y>=this.columns)throw new RangeError("Argument out of range");let _=new ee(S.length,y-v+1);for(let E=0;E<S.length;E++)for(let U=v;U<=y;U++){if(S[E]<0||S[E]>=this.rows)throw new RangeError(`Row index out of range: ${S[E]}`);_.set(E,U-v,this.get(S[E],U))}return _}subMatrixColumn(S,v,y){if(v===void 0&&(v=0),y===void 0&&(y=this.rows-1),v>y||v<0||v>=this.rows||y<0||y>=this.rows)throw new RangeError("Argument out of range");let _=new ee(y-v+1,S.length);for(let E=0;E<S.length;E++)for(let U=v;U<=y;U++){if(S[E]<0||S[E]>=this.columns)throw new RangeError(`Column index out of range: ${S[E]}`);_.set(U-v,E,this.get(U,S[E]))}return _}setSubMatrix(S,v,y){if(S=ee.checkMatrix(S),S.isEmpty())return this;let _=v+S.rows-1,E=y+S.columns-1;C(this,v,_,y,E);for(let U=0;U<S.rows;U++)for(let $=0;$<S.columns;$++)this.set(v+U,y+$,S.get(U,$));return this}selection(S,v){R(this,S),A(this,v);let y=new ee(S.length,v.length);for(let _=0;_<S.length;_++){let E=S[_];for(let U=0;U<v.length;U++){let $=v[U];y.set(_,U,this.get(E,$))}}return y}trace(){let S=Math.min(this.rows,this.columns),v=0;for(let y=0;y<S;y++)v+=this.get(y,y);return v}clone(){return this.constructor.copy(this,new ee(this.rows,this.columns))}static copy(S,v){for(const[y,_,E]of S.entries())v.set(y,_,E);return v}sum(S){switch(S){case"row":return P(this);case"column":return L(this);case void 0:return O(this);default:throw new Error(`invalid option: ${S}`)}}product(S){switch(S){case"row":return H(this);case"column":return Y(this);case void 0:return J(this);default:throw new Error(`invalid option: ${S}`)}}mean(S){const v=this.sum(S);switch(S){case"row":{for(let y=0;y<this.rows;y++)v[y]/=this.columns;return v}case"column":{for(let y=0;y<this.columns;y++)v[y]/=this.rows;return v}case void 0:return v/this.size;default:throw new Error(`invalid option: ${S}`)}}variance(S,v={}){if(typeof S=="object"&&(v=S,S=void 0),typeof v!="object")throw new TypeError("options must be an object");const{unbiased:y=!0,mean:_=this.mean(S)}=v;if(typeof y!="boolean")throw new TypeError("unbiased must be a boolean");switch(S){case"row":{if(!t.isAnyArray(_))throw new TypeError("mean must be an array");return K(this,y,_)}case"column":{if(!t.isAnyArray(_))throw new TypeError("mean must be an array");return Z(this,y,_)}case void 0:{if(typeof _!="number")throw new TypeError("mean must be a number");return ae(this,y,_)}default:throw new Error(`invalid option: ${S}`)}}standardDeviation(S,v){typeof S=="object"&&(v=S,S=void 0);const y=this.variance(S,v);if(S===void 0)return Math.sqrt(y);for(let _=0;_<y.length;_++)y[_]=Math.sqrt(y[_]);return y}center(S,v={}){if(typeof S=="object"&&(v=S,S=void 0),typeof v!="object")throw new TypeError("options must be an object");const{center:y=this.mean(S)}=v;switch(S){case"row":{if(!t.isAnyArray(y))throw new TypeError("center must be an array");return _e(this,y),this}case"column":{if(!t.isAnyArray(y))throw new TypeError("center must be an array");return oe(this,y),this}case void 0:{if(typeof y!="number")throw new TypeError("center must be a number");return Re(this,y),this}default:throw new Error(`invalid option: ${S}`)}}scale(S,v={}){if(typeof S=="object"&&(v=S,S=void 0),typeof v!="object")throw new TypeError("options must be an object");let y=v.scale;switch(S){case"row":{if(y===void 0)y=ie(this);else if(!t.isAnyArray(y))throw new TypeError("scale must be an array");return Ae(this,y),this}case"column":{if(y===void 0)y=he(this);else if(!t.isAnyArray(y))throw new TypeError("scale must be an array");return $e(this,y),this}case void 0:{if(y===void 0)y=D(this);else if(typeof y!="number")throw new TypeError("scale must be a number");return te(this,y),this}default:throw new Error(`invalid option: ${S}`)}}toString(S){return i(this,S)}[Symbol.iterator](){return this.entries()}*entries(){for(let S=0;S<this.rows;S++)for(let v=0;v<this.columns;v++)yield[S,v,this.get(S,v)]}*values(){for(let S=0;S<this.rows;S++)for(let v=0;v<this.columns;v++)yield this.get(S,v)}}G.prototype.klass="Matrix",typeof Symbol<"u"&&(G.prototype[Symbol.for("nodejs.util.inspect.custom")]=s);function F(B,S){return B-S}function ge(B){return B.every(S=>typeof S=="number")}G.random=G.rand,G.randomInt=G.randInt,G.diagonal=G.diag,G.prototype.diagonal=G.prototype.diag,G.identity=G.eye,G.prototype.negate=G.prototype.neg,G.prototype.tensorProduct=G.prototype.kroneckerProduct;const ha=class ha extends G{constructor(v,y){super();ut(this,Ps);z(this,"data");if(ha.isMatrix(v))Tt(this,Ps,A_).call(this,v.rows,v.columns),ha.copy(v,this);else if(Number.isInteger(v)&&v>=0)Tt(this,Ps,A_).call(this,v,y);else if(t.isAnyArray(v)){const _=v;if(v=_.length,y=v?_[0].length:0,typeof y!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let E=0;E<v;E++){if(_[E].length!==y)throw new RangeError("Inconsistent array dimensions");if(!ge(_[E]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(_[E]))}this.rows=v,this.columns=y}else throw new TypeError("First argument must be a positive number or an array")}set(v,y,_){return this.data[v][y]=_,this}get(v,y){return this.data[v][y]}removeRow(v){return d(this,v),this.data.splice(v,1),this.rows-=1,this}addRow(v,y){return y===void 0&&(y=v,v=this.rows),d(this,v,!0),y=Float64Array.from(b(this,y)),this.data.splice(v,0,y),this.rows+=1,this}removeColumn(v){g(this,v);for(let y=0;y<this.rows;y++){const _=new Float64Array(this.columns-1);for(let E=0;E<v;E++)_[E]=this.data[y][E];for(let E=v+1;E<this.columns;E++)_[E-1]=this.data[y][E];this.data[y]=_}return this.columns-=1,this}addColumn(v,y){typeof y>"u"&&(y=v,v=this.columns),g(this,v,!0),y=w(this,y);for(let _=0;_<this.rows;_++){const E=new Float64Array(this.columns+1);let U=0;for(;U<v;U++)E[U]=this.data[_][U];for(E[U++]=y[_];U<this.columns+1;U++)E[U]=this.data[_][U-1];this.data[_]=E}return this.columns+=1,this}};Ps=new WeakSet,A_=function(v,y){if(this.data=[],Number.isInteger(y)&&y>=0)for(let _=0;_<v;_++)this.data.push(new Float64Array(y));else throw new TypeError("nColumns must be a positive integer");this.rows=v,this.columns=y};let ee=ha;h(G,ee);const Qi=class Qi extends G{constructor(v){super();ut(this,Zn);if(ee.isMatrix(v)){if(!v.isSymmetric())throw new TypeError("not symmetric data");tt(this,Zn,ee.copy(v,new ee(v.rows,v.rows)))}else if(Number.isInteger(v)&&v>=0)tt(this,Zn,new ee(v,v));else if(tt(this,Zn,new ee(v)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return le(this,Zn).size}get rows(){return le(this,Zn).rows}get columns(){return le(this,Zn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(v){return ee.isMatrix(v)&&v.klassType==="SymmetricMatrix"}static zeros(v){return new this(v)}static ones(v){return new this(v).fill(1)}clone(){const v=new Qi(this.diagonalSize);for(const[y,_,E]of this.upperRightEntries())v.set(y,_,E);return v}toMatrix(){return new ee(this)}get(v,y){return le(this,Zn).get(v,y)}set(v,y,_){return le(this,Zn).set(v,y,_),le(this,Zn).set(y,v,_),this}removeCross(v){return le(this,Zn).removeRow(v),le(this,Zn).removeColumn(v),this}addCross(v,y){y===void 0&&(y=v,v=this.diagonalSize);const _=y.slice();return _.splice(v,1),le(this,Zn).addRow(v,_),le(this,Zn).addColumn(v,y),this}applyMask(v){if(v.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const y=[];for(const[_,E]of v.entries())E||y.push(_);y.reverse();for(const _ of y)this.removeCross(_);return this}toCompact(){const{diagonalSize:v}=this,y=new Array(v*(v+1)/2);for(let _=0,E=0,U=0;U<y.length;U++)y[U]=this.get(E,_),++_>=v&&(_=++E);return y}static fromCompact(v){const y=v.length,_=(Math.sqrt(8*y+1)-1)/2;if(!Number.isInteger(_))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(v)}`);const E=new Qi(_);for(let U=0,$=0,W=0;W<y;W++)E.set(U,$,v[W]),++U>=_&&(U=++$);return E}*upperRightEntries(){for(let v=0,y=0;v<this.diagonalSize;void 0){const _=this.get(v,y);yield[v,y,_],++y>=this.diagonalSize&&(y=++v)}}*upperRightValues(){for(let v=0,y=0;v<this.diagonalSize;void 0)yield this.get(v,y),++y>=this.diagonalSize&&(y=++v)}};Zn=new WeakMap;let we=Qi;we.prototype.klassType="SymmetricMatrix";class ue extends we{static isDistanceMatrix(S){return we.isSymmetricMatrix(S)&&S.klassSubType==="DistanceMatrix"}constructor(S){if(super(S),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(S,v,y){return S===v&&(y=0),super.set(S,v,y)}addCross(S,v){return v===void 0&&(v=S,S=this.diagonalSize),v=v.slice(),v[S]=0,super.addCross(S,v)}toSymmetricMatrix(){return new we(this)}clone(){const S=new ue(this.diagonalSize);for(const[v,y,_]of this.upperRightEntries())v!==y&&S.set(v,y,_);return S}toCompact(){const{diagonalSize:S}=this,v=(S-1)*S/2,y=new Array(v);for(let _=1,E=0,U=0;U<y.length;U++)y[U]=this.get(E,_),++_>=S&&(_=++E+1);return y}static fromCompact(S){const v=S.length;if(v===0)return new this(0);const y=(Math.sqrt(8*v+1)+1)/2;if(!Number.isInteger(y))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(S)}`);const _=new this(y);for(let E=1,U=0,$=0;$<v;$++)_.set(E,U,S[$]),++E>=y&&(E=++U+1);return _}}ue.prototype.klassSubType="DistanceMatrix";class ce extends G{constructor(S,v,y){super(),this.matrix=S,this.rows=v,this.columns=y}}class Me extends ce{constructor(S,v){g(S,v),super(S,S.rows,1),this.column=v}set(S,v,y){return this.matrix.set(S,this.column,y),this}get(S){return this.matrix.get(S,this.column)}}class ze extends ce{constructor(S,v){A(S,v),super(S,S.rows,v.length),this.columnIndices=v}set(S,v,y){return this.matrix.set(S,this.columnIndices[v],y),this}get(S,v){return this.matrix.get(S,this.columnIndices[v])}}class Ue extends ce{constructor(S){super(S,S.rows,S.columns)}set(S,v,y){return this.matrix.set(S,this.columns-v-1,y),this}get(S,v){return this.matrix.get(S,this.columns-v-1)}}class Ke extends ce{constructor(S){super(S,S.rows,S.columns)}set(S,v,y){return this.matrix.set(this.rows-S-1,v,y),this}get(S,v){return this.matrix.get(this.rows-S-1,v)}}class Ze extends ce{constructor(S,v){d(S,v),super(S,1,S.columns),this.row=v}set(S,v,y){return this.matrix.set(this.row,v,y),this}get(S,v){return this.matrix.get(this.row,v)}}class ot extends ce{constructor(S,v){R(S,v),super(S,v.length,S.columns),this.rowIndices=v}set(S,v,y){return this.matrix.set(this.rowIndices[S],v,y),this}get(S,v){return this.matrix.get(this.rowIndices[S],v)}}class kt extends ce{constructor(S,v,y){R(S,v),A(S,y),super(S,v.length,y.length),this.rowIndices=v,this.columnIndices=y}set(S,v,y){return this.matrix.set(this.rowIndices[S],this.columnIndices[v],y),this}get(S,v){return this.matrix.get(this.rowIndices[S],this.columnIndices[v])}}class Et extends ce{constructor(S,v,y,_,E){C(S,v,y,_,E),super(S,y-v+1,E-_+1),this.startRow=v,this.startColumn=_}set(S,v,y){return this.matrix.set(this.startRow+S,this.startColumn+v,y),this}get(S,v){return this.matrix.get(this.startRow+S,this.startColumn+v)}}class Ot extends ce{constructor(S){super(S,S.columns,S.rows)}set(S,v,y){return this.matrix.set(v,S,y),this}get(S,v){return this.matrix.get(v,S)}}class Ht extends G{constructor(S,v={}){const{rows:y=1}=v;if(S.length%y!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=y,this.columns=S.length/y,this.data=S}set(S,v,y){let _=this._calculateIndex(S,v);return this.data[_]=y,this}get(S,v){let y=this._calculateIndex(S,v);return this.data[y]}_calculateIndex(S,v){return S*this.columns+v}}class en extends G{constructor(S){super(),this.data=S,this.rows=S.length,this.columns=S[0].length}set(S,v,y){return this.data[S][v]=y,this}get(S,v){return this.data[S][v]}}function Is(B,S){if(t.isAnyArray(B))return B[0]&&t.isAnyArray(B[0])?new en(B):new Ht(B,S);throw new Error("the argument is not an array")}class Kn{constructor(S){S=en.checkMatrix(S);let v=S.clone(),y=v.rows,_=v.columns,E=new Float64Array(y),U=1,$,W,X,be,re,Ie,We,ke,Pe;for($=0;$<y;$++)E[$]=$;for(ke=new Float64Array(y),W=0;W<_;W++){for($=0;$<y;$++)ke[$]=v.get($,W);for($=0;$<y;$++){for(Pe=Math.min($,W),re=0,X=0;X<Pe;X++)re+=v.get($,X)*ke[X];ke[$]-=re,v.set($,W,ke[$])}for(be=W,$=W+1;$<y;$++)Math.abs(ke[$])>Math.abs(ke[be])&&(be=$);if(be!==W){for(X=0;X<_;X++)Ie=v.get(be,X),v.set(be,X,v.get(W,X)),v.set(W,X,Ie);We=E[be],E[be]=E[W],E[W]=We,U=-U}if(W<y&&v.get(W,W)!==0)for($=W+1;$<y;$++)v.set($,W,v.get($,W)/v.get(W,W))}this.LU=v,this.pivotVector=E,this.pivotSign=U}isSingular(){let S=this.LU,v=S.columns;for(let y=0;y<v;y++)if(S.get(y,y)===0)return!0;return!1}solve(S){S=ee.checkMatrix(S);let v=this.LU;if(v.rows!==S.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let _=S.columns,E=S.subMatrixRow(this.pivotVector,0,_-1),U=v.columns,$,W,X;for(X=0;X<U;X++)for($=X+1;$<U;$++)for(W=0;W<_;W++)E.set($,W,E.get($,W)-E.get(X,W)*v.get($,X));for(X=U-1;X>=0;X--){for(W=0;W<_;W++)E.set(X,W,E.get(X,W)/v.get(X,X));for($=0;$<X;$++)for(W=0;W<_;W++)E.set($,W,E.get($,W)-E.get(X,W)*v.get($,X))}return E}get determinant(){let S=this.LU;if(!S.isSquare())throw new Error("Matrix must be square");let v=this.pivotSign,y=S.columns;for(let _=0;_<y;_++)v*=S.get(_,_);return v}get lowerTriangularMatrix(){let S=this.LU,v=S.rows,y=S.columns,_=new ee(v,y);for(let E=0;E<v;E++)for(let U=0;U<y;U++)E>U?_.set(E,U,S.get(E,U)):E===U?_.set(E,U,1):_.set(E,U,0);return _}get upperTriangularMatrix(){let S=this.LU,v=S.rows,y=S.columns,_=new ee(v,y);for(let E=0;E<v;E++)for(let U=0;U<y;U++)E<=U?_.set(E,U,S.get(E,U)):_.set(E,U,0);return _}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function mr(B,S){let v=0;return Math.abs(B)>Math.abs(S)?(v=S/B,Math.abs(B)*Math.sqrt(1+v*v)):S!==0?(v=B/S,Math.abs(S)*Math.sqrt(1+v*v)):0}class Js{constructor(S){S=en.checkMatrix(S);let v=S.clone(),y=S.rows,_=S.columns,E=new Float64Array(_),U,$,W,X;for(W=0;W<_;W++){let be=0;for(U=W;U<y;U++)be=mr(be,v.get(U,W));if(be!==0){for(v.get(W,W)<0&&(be=-be),U=W;U<y;U++)v.set(U,W,v.get(U,W)/be);for(v.set(W,W,v.get(W,W)+1),$=W+1;$<_;$++){for(X=0,U=W;U<y;U++)X+=v.get(U,W)*v.get(U,$);for(X=-X/v.get(W,W),U=W;U<y;U++)v.set(U,$,v.get(U,$)+X*v.get(U,W))}}E[W]=-be}this.QR=v,this.Rdiag=E}solve(S){S=ee.checkMatrix(S);let v=this.QR,y=v.rows;if(S.rows!==y)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let _=S.columns,E=S.clone(),U=v.columns,$,W,X,be;for(X=0;X<U;X++)for(W=0;W<_;W++){for(be=0,$=X;$<y;$++)be+=v.get($,X)*E.get($,W);for(be=-be/v.get(X,X),$=X;$<y;$++)E.set($,W,E.get($,W)+be*v.get($,X))}for(X=U-1;X>=0;X--){for(W=0;W<_;W++)E.set(X,W,E.get(X,W)/this.Rdiag[X]);for($=0;$<X;$++)for(W=0;W<_;W++)E.set($,W,E.get($,W)-E.get(X,W)*v.get($,X))}return E.subMatrix(0,U-1,0,_-1)}isFullRank(){let S=this.QR.columns;for(let v=0;v<S;v++)if(this.Rdiag[v]===0)return!1;return!0}get upperTriangularMatrix(){let S=this.QR,v=S.columns,y=new ee(v,v),_,E;for(_=0;_<v;_++)for(E=0;E<v;E++)_<E?y.set(_,E,S.get(_,E)):_===E?y.set(_,E,this.Rdiag[_]):y.set(_,E,0);return y}get orthogonalMatrix(){let S=this.QR,v=S.rows,y=S.columns,_=new ee(v,y),E,U,$,W;for($=y-1;$>=0;$--){for(E=0;E<v;E++)_.set(E,$,0);for(_.set($,$,1),U=$;U<y;U++)if(S.get($,$)!==0){for(W=0,E=$;E<v;E++)W+=S.get(E,$)*_.get(E,U);for(W=-W/S.get($,$),E=$;E<v;E++)_.set(E,U,_.get(E,U)+W*S.get(E,$))}}return _}}class ei{constructor(S,v={}){if(S=en.checkMatrix(S),S.isEmpty())throw new Error("Matrix must be non-empty");let y=S.rows,_=S.columns;const{computeLeftSingularVectors:E=!0,computeRightSingularVectors:U=!0,autoTranspose:$=!1}=v;let W=!!E,X=!!U,be=!1,re;if(y<_)if(!$)re=S.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{re=S.transpose(),y=re.rows,_=re.columns,be=!0;let de=W;W=X,X=de}else re=S.clone();let Ie=Math.min(y,_),We=Math.min(y+1,_),ke=new Float64Array(We),Pe=new ee(y,Ie),Ge=new ee(_,_),se=new Float64Array(_),qe=new Float64Array(y),et=new Float64Array(We);for(let de=0;de<We;de++)et[de]=de;let lt=Math.min(y-1,_),ht=Math.max(0,Math.min(_-2,y)),vn=Math.max(lt,ht);for(let de=0;de<vn;de++){if(de<lt){ke[de]=0;for(let Le=de;Le<y;Le++)ke[de]=mr(ke[de],re.get(Le,de));if(ke[de]!==0){re.get(de,de)<0&&(ke[de]=-ke[de]);for(let Le=de;Le<y;Le++)re.set(Le,de,re.get(Le,de)/ke[de]);re.set(de,de,re.get(de,de)+1)}ke[de]=-ke[de]}for(let Le=de+1;Le<_;Le++){if(de<lt&&ke[de]!==0){let Qe=0;for(let Ve=de;Ve<y;Ve++)Qe+=re.get(Ve,de)*re.get(Ve,Le);Qe=-Qe/re.get(de,de);for(let Ve=de;Ve<y;Ve++)re.set(Ve,Le,re.get(Ve,Le)+Qe*re.get(Ve,de))}se[Le]=re.get(de,Le)}if(W&&de<lt)for(let Le=de;Le<y;Le++)Pe.set(Le,de,re.get(Le,de));if(de<ht){se[de]=0;for(let Le=de+1;Le<_;Le++)se[de]=mr(se[de],se[Le]);if(se[de]!==0){se[de+1]<0&&(se[de]=0-se[de]);for(let Le=de+1;Le<_;Le++)se[Le]/=se[de];se[de+1]+=1}if(se[de]=-se[de],de+1<y&&se[de]!==0){for(let Le=de+1;Le<y;Le++)qe[Le]=0;for(let Le=de+1;Le<y;Le++)for(let Qe=de+1;Qe<_;Qe++)qe[Le]+=se[Qe]*re.get(Le,Qe);for(let Le=de+1;Le<_;Le++){let Qe=-se[Le]/se[de+1];for(let Ve=de+1;Ve<y;Ve++)re.set(Ve,Le,re.get(Ve,Le)+Qe*qe[Ve])}}if(X)for(let Le=de+1;Le<_;Le++)Ge.set(Le,de,se[Le])}}let it=Math.min(_,y+1);if(lt<_&&(ke[lt]=re.get(lt,lt)),y<it&&(ke[it-1]=0),ht+1<it&&(se[ht]=re.get(ht,it-1)),se[it-1]=0,W){for(let de=lt;de<Ie;de++){for(let Le=0;Le<y;Le++)Pe.set(Le,de,0);Pe.set(de,de,1)}for(let de=lt-1;de>=0;de--)if(ke[de]!==0){for(let Le=de+1;Le<Ie;Le++){let Qe=0;for(let Ve=de;Ve<y;Ve++)Qe+=Pe.get(Ve,de)*Pe.get(Ve,Le);Qe=-Qe/Pe.get(de,de);for(let Ve=de;Ve<y;Ve++)Pe.set(Ve,Le,Pe.get(Ve,Le)+Qe*Pe.get(Ve,de))}for(let Le=de;Le<y;Le++)Pe.set(Le,de,-Pe.get(Le,de));Pe.set(de,de,1+Pe.get(de,de));for(let Le=0;Le<de-1;Le++)Pe.set(Le,de,0)}else{for(let Le=0;Le<y;Le++)Pe.set(Le,de,0);Pe.set(de,de,1)}}if(X)for(let de=_-1;de>=0;de--){if(de<ht&&se[de]!==0)for(let Le=de+1;Le<_;Le++){let Qe=0;for(let Ve=de+1;Ve<_;Ve++)Qe+=Ge.get(Ve,de)*Ge.get(Ve,Le);Qe=-Qe/Ge.get(de+1,de);for(let Ve=de+1;Ve<_;Ve++)Ge.set(Ve,Le,Ge.get(Ve,Le)+Qe*Ge.get(Ve,de))}for(let Le=0;Le<_;Le++)Ge.set(Le,de,0);Ge.set(de,de,1)}let ct=it-1,rn=Number.EPSILON;for(;it>0;){let de,Le;for(de=it-2;de>=-1&&de!==-1;de--){const Qe=Number.MIN_VALUE+rn*Math.abs(ke[de]+Math.abs(ke[de+1]));if(Math.abs(se[de])<=Qe||Number.isNaN(se[de])){se[de]=0;break}}if(de===it-2)Le=4;else{let Qe;for(Qe=it-1;Qe>=de&&Qe!==de;Qe--){let Ve=(Qe!==it?Math.abs(se[Qe]):0)+(Qe!==de+1?Math.abs(se[Qe-1]):0);if(Math.abs(ke[Qe])<=rn*Ve){ke[Qe]=0;break}}Qe===de?Le=3:Qe===it-1?Le=1:(Le=2,de=Qe)}switch(de++,Le){case 1:{let Qe=se[it-2];se[it-2]=0;for(let Ve=it-2;Ve>=de;Ve--){let mn=mr(ke[Ve],Qe),Lt=ke[Ve]/mn,sn=Qe/mn;if(ke[Ve]=mn,Ve!==de&&(Qe=-sn*se[Ve-1],se[Ve-1]=Lt*se[Ve-1]),X)for(let cn=0;cn<_;cn++)mn=Lt*Ge.get(cn,Ve)+sn*Ge.get(cn,it-1),Ge.set(cn,it-1,-sn*Ge.get(cn,Ve)+Lt*Ge.get(cn,it-1)),Ge.set(cn,Ve,mn)}break}case 2:{let Qe=se[de-1];se[de-1]=0;for(let Ve=de;Ve<it;Ve++){let mn=mr(ke[Ve],Qe),Lt=ke[Ve]/mn,sn=Qe/mn;if(ke[Ve]=mn,Qe=-sn*se[Ve],se[Ve]=Lt*se[Ve],W)for(let cn=0;cn<y;cn++)mn=Lt*Pe.get(cn,Ve)+sn*Pe.get(cn,de-1),Pe.set(cn,de-1,-sn*Pe.get(cn,Ve)+Lt*Pe.get(cn,de-1)),Pe.set(cn,Ve,mn)}break}case 3:{const Qe=Math.max(Math.abs(ke[it-1]),Math.abs(ke[it-2]),Math.abs(se[it-2]),Math.abs(ke[de]),Math.abs(se[de])),Ve=ke[it-1]/Qe,mn=ke[it-2]/Qe,Lt=se[it-2]/Qe,sn=ke[de]/Qe,cn=se[de]/Qe,Qn=((mn+Ve)*(mn-Ve)+Lt*Lt)/2,Lr=Ve*Lt*(Ve*Lt);let Xt=0;(Qn!==0||Lr!==0)&&(Qn<0?Xt=0-Math.sqrt(Qn*Qn+Lr):Xt=Math.sqrt(Qn*Qn+Lr),Xt=Lr/(Qn+Xt));let Zr=(sn+Ve)*(sn-Ve)+Xt,Ds=sn*cn;for(let At=de;At<it-1;At++){let Vn=mr(Zr,Ds);Vn===0&&(Vn=Number.MIN_VALUE);let sr=Zr/Vn,kr=Ds/Vn;if(At!==de&&(se[At-1]=Vn),Zr=sr*ke[At]+kr*se[At],se[At]=sr*se[At]-kr*ke[At],Ds=kr*ke[At+1],ke[At+1]=sr*ke[At+1],X)for(let Yt=0;Yt<_;Yt++)Vn=sr*Ge.get(Yt,At)+kr*Ge.get(Yt,At+1),Ge.set(Yt,At+1,-kr*Ge.get(Yt,At)+sr*Ge.get(Yt,At+1)),Ge.set(Yt,At,Vn);if(Vn=mr(Zr,Ds),Vn===0&&(Vn=Number.MIN_VALUE),sr=Zr/Vn,kr=Ds/Vn,ke[At]=Vn,Zr=sr*se[At]+kr*ke[At+1],ke[At+1]=-kr*se[At]+sr*ke[At+1],Ds=kr*se[At+1],se[At+1]=sr*se[At+1],W&&At<y-1)for(let Yt=0;Yt<y;Yt++)Vn=sr*Pe.get(Yt,At)+kr*Pe.get(Yt,At+1),Pe.set(Yt,At+1,-kr*Pe.get(Yt,At)+sr*Pe.get(Yt,At+1)),Pe.set(Yt,At,Vn)}se[it-2]=Zr;break}case 4:{if(ke[de]<=0&&(ke[de]=ke[de]<0?-ke[de]:0,X))for(let Qe=0;Qe<=ct;Qe++)Ge.set(Qe,de,-Ge.get(Qe,de));for(;de<ct&&!(ke[de]>=ke[de+1]);){let Qe=ke[de];if(ke[de]=ke[de+1],ke[de+1]=Qe,X&&de<_-1)for(let Ve=0;Ve<_;Ve++)Qe=Ge.get(Ve,de+1),Ge.set(Ve,de+1,Ge.get(Ve,de)),Ge.set(Ve,de,Qe);if(W&&de<y-1)for(let Ve=0;Ve<y;Ve++)Qe=Pe.get(Ve,de+1),Pe.set(Ve,de+1,Pe.get(Ve,de)),Pe.set(Ve,de,Qe);de++}it--;break}}}if(be){let de=Ge;Ge=Pe,Pe=de}this.m=y,this.n=_,this.s=ke,this.U=Pe,this.V=Ge}solve(S){let v=S,y=this.threshold,_=this.s.length,E=ee.zeros(_,_);for(let Ie=0;Ie<_;Ie++)Math.abs(this.s[Ie])<=y?E.set(Ie,Ie,0):E.set(Ie,Ie,1/this.s[Ie]);let U=this.U,$=this.rightSingularVectors,W=$.mmul(E),X=$.rows,be=U.rows,re=ee.zeros(X,be);for(let Ie=0;Ie<X;Ie++)for(let We=0;We<be;We++){let ke=0;for(let Pe=0;Pe<_;Pe++)ke+=W.get(Ie,Pe)*U.get(We,Pe);re.set(Ie,We,ke)}return re.mmul(v)}solveForDiagonal(S){return this.solve(ee.diag(S))}inverse(){let S=this.V,v=this.threshold,y=S.rows,_=S.columns,E=new ee(y,this.s.length);for(let be=0;be<y;be++)for(let re=0;re<_;re++)Math.abs(this.s[re])>v&&E.set(be,re,S.get(be,re)/this.s[re]);let U=this.U,$=U.rows,W=U.columns,X=new ee(y,$);for(let be=0;be<y;be++)for(let re=0;re<$;re++){let Ie=0;for(let We=0;We<W;We++)Ie+=E.get(be,We)*U.get(re,We);X.set(be,re,Ie)}return X}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let S=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,v=0,y=this.s;for(let _=0,E=y.length;_<E;_++)y[_]>S&&v++;return v}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ee.diag(this.s)}}function bu(B,S=!1){return B=en.checkMatrix(B),S?new ei(B).inverse():Oe(B,ee.eye(B.rows))}function Oe(B,S,v=!1){return B=en.checkMatrix(B),S=en.checkMatrix(S),v?new ei(B).solve(S):B.isSquare()?new Kn(B).solve(S):new Js(B).solve(S)}function He(B){if(B=ee.checkMatrix(B),B.isSquare()){if(B.columns===0)return 1;let S,v,y,_;if(B.columns===2)return S=B.get(0,0),v=B.get(0,1),y=B.get(1,0),_=B.get(1,1),S*_-v*y;if(B.columns===3){let E,U,$;return E=new kt(B,[1,2],[1,2]),U=new kt(B,[1,2],[0,2]),$=new kt(B,[1,2],[0,1]),S=B.get(0,0),v=B.get(0,1),y=B.get(0,2),S*He(E)-v*He(U)+y*He($)}else return new Kn(B).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ft(B,S){let v=[];for(let y=0;y<B;y++)y!==S&&v.push(y);return v}function pt(B,S,v,y=1e-9,_=1e-9){if(B>_)return new Array(S.rows+1).fill(0);{let E=S.addRow(v,[0]);for(let U=0;U<E.rows;U++)Math.abs(E.get(U,0))<y&&E.set(U,0,0);return E.to1DArray()}}function Zt(B,S={}){const{thresholdValue:v=1e-9,thresholdError:y=1e-9}=S;B=ee.checkMatrix(B);let _=B.rows,E=new ee(_,_);for(let U=0;U<_;U++){let $=ee.columnVector(B.getRow(U)),W=B.subMatrixRow(ft(_,U)).transpose(),be=new ei(W).solve($),re=ee.sub($,W.mmul(be)).abs().max();E.setRow(U,pt(re,be,U,v,y))}return E}function Rr(B,S=Number.EPSILON){if(B=ee.checkMatrix(B),B.isEmpty())return B.transpose();let v=new ei(B,{autoTranspose:!0}),y=v.leftSingularVectors,_=v.rightSingularVectors,E=v.diagonal;for(let U=0;U<E.length;U++)Math.abs(E[U])>S?E[U]=1/E[U]:E[U]=0;return _.mmul(ee.diag(E).mmul(y.transpose()))}function Os(B,S=B,v={}){B=new ee(B);let y=!1;if(typeof S=="object"&&!ee.isMatrix(S)&&!t.isAnyArray(S)?(v=S,S=B,y=!0):S=new ee(S),B.rows!==S.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:_=!0}=v;_&&(B=B.center("column"),y||(S=S.center("column")));const E=B.transpose().mmul(S);for(let U=0;U<E.rows;U++)for(let $=0;$<E.columns;$++)E.set(U,$,E.get(U,$)*(1/(B.rows-1)));return E}function yr(B,S=B,v={}){B=new ee(B);let y=!1;if(typeof S=="object"&&!ee.isMatrix(S)&&!t.isAnyArray(S)?(v=S,S=B,y=!0):S=new ee(S),B.rows!==S.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:_=!0,scale:E=!0}=v;_&&(B.center("column"),y||S.center("column")),E&&(B.scale("column"),y||S.scale("column"));const U=B.standardDeviation("column",{unbiased:!0}),$=y?U:S.standardDeviation("column",{unbiased:!0}),W=B.transpose().mmul(S);for(let X=0;X<W.rows;X++)for(let be=0;be<W.columns;be++)W.set(X,be,W.get(X,be)*(1/(U[X]*$[be]))*(1/(B.rows-1)));return W}class Yr{constructor(S,v={}){const{assumeSymmetric:y=!1}=v;if(S=en.checkMatrix(S),!S.isSquare())throw new Error("Matrix is not a square matrix");if(S.isEmpty())throw new Error("Matrix must be non-empty");let _=S.columns,E=new ee(_,_),U=new Float64Array(_),$=new Float64Array(_),W=S,X,be,re=!1;if(y?re=!0:re=S.isSymmetric(),re){for(X=0;X<_;X++)for(be=0;be<_;be++)E.set(X,be,W.get(X,be));Cr(_,$,U,E),zn(_,$,U,E)}else{let Ie=new ee(_,_),We=new Float64Array(_);for(be=0;be<_;be++)for(X=0;X<_;X++)Ie.set(X,be,W.get(X,be));Br(_,Ie,We,E),Kr(_,$,U,E,Ie)}this.n=_,this.e=$,this.d=U,this.V=E}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let S=this.n,v=this.e,y=this.d,_=new ee(S,S),E,U;for(E=0;E<S;E++){for(U=0;U<S;U++)_.set(E,U,0);_.set(E,E,y[E]),v[E]>0?_.set(E,E+1,v[E]):v[E]<0&&_.set(E,E-1,v[E])}return _}}function Cr(B,S,v,y){let _,E,U,$,W,X,be,re;for(W=0;W<B;W++)v[W]=y.get(B-1,W);for($=B-1;$>0;$--){for(re=0,U=0,X=0;X<$;X++)re=re+Math.abs(v[X]);if(re===0)for(S[$]=v[$-1],W=0;W<$;W++)v[W]=y.get($-1,W),y.set($,W,0),y.set(W,$,0);else{for(X=0;X<$;X++)v[X]/=re,U+=v[X]*v[X];for(_=v[$-1],E=Math.sqrt(U),_>0&&(E=-E),S[$]=re*E,U=U-_*E,v[$-1]=_-E,W=0;W<$;W++)S[W]=0;for(W=0;W<$;W++){for(_=v[W],y.set(W,$,_),E=S[W]+y.get(W,W)*_,X=W+1;X<=$-1;X++)E+=y.get(X,W)*v[X],S[X]+=y.get(X,W)*_;S[W]=E}for(_=0,W=0;W<$;W++)S[W]/=U,_+=S[W]*v[W];for(be=_/(U+U),W=0;W<$;W++)S[W]-=be*v[W];for(W=0;W<$;W++){for(_=v[W],E=S[W],X=W;X<=$-1;X++)y.set(X,W,y.get(X,W)-(_*S[X]+E*v[X]));v[W]=y.get($-1,W),y.set($,W,0)}}v[$]=U}for($=0;$<B-1;$++){if(y.set(B-1,$,y.get($,$)),y.set($,$,1),U=v[$+1],U!==0){for(X=0;X<=$;X++)v[X]=y.get(X,$+1)/U;for(W=0;W<=$;W++){for(E=0,X=0;X<=$;X++)E+=y.get(X,$+1)*y.get(X,W);for(X=0;X<=$;X++)y.set(X,W,y.get(X,W)-E*v[X])}}for(X=0;X<=$;X++)y.set(X,$+1,0)}for(W=0;W<B;W++)v[W]=y.get(B-1,W),y.set(B-1,W,0);y.set(B-1,B-1,1),S[0]=0}function zn(B,S,v,y){let _,E,U,$,W,X,be,re,Ie,We,ke,Pe,Ge,se,qe,et;for(U=1;U<B;U++)S[U-1]=S[U];S[B-1]=0;let lt=0,ht=0,vn=Number.EPSILON;for(X=0;X<B;X++){for(ht=Math.max(ht,Math.abs(v[X])+Math.abs(S[X])),be=X;be<B&&!(Math.abs(S[be])<=vn*ht);)be++;if(be>X)do{for(_=v[X],re=(v[X+1]-_)/(2*S[X]),Ie=mr(re,1),re<0&&(Ie=-Ie),v[X]=S[X]/(re+Ie),v[X+1]=S[X]*(re+Ie),We=v[X+1],E=_-v[X],U=X+2;U<B;U++)v[U]-=E;for(lt=lt+E,re=v[be],ke=1,Pe=ke,Ge=ke,se=S[X+1],qe=0,et=0,U=be-1;U>=X;U--)for(Ge=Pe,Pe=ke,et=qe,_=ke*S[U],E=ke*re,Ie=mr(re,S[U]),S[U+1]=qe*Ie,qe=S[U]/Ie,ke=re/Ie,re=ke*v[U]-qe*_,v[U+1]=E+qe*(ke*_+qe*v[U]),W=0;W<B;W++)E=y.get(W,U+1),y.set(W,U+1,qe*y.get(W,U)+ke*E),y.set(W,U,ke*y.get(W,U)-qe*E);re=-qe*et*Ge*se*S[X]/We,S[X]=qe*re,v[X]=ke*re}while(Math.abs(S[X])>vn*ht);v[X]=v[X]+lt,S[X]=0}for(U=0;U<B-1;U++){for(W=U,re=v[U],$=U+1;$<B;$++)v[$]<re&&(W=$,re=v[$]);if(W!==U)for(v[W]=v[U],v[U]=re,$=0;$<B;$++)re=y.get($,U),y.set($,U,y.get($,W)),y.set($,W,re)}}function Br(B,S,v,y){let _=0,E=B-1,U,$,W,X,be,re,Ie;for(re=_+1;re<=E-1;re++){for(Ie=0,X=re;X<=E;X++)Ie=Ie+Math.abs(S.get(X,re-1));if(Ie!==0){for(W=0,X=E;X>=re;X--)v[X]=S.get(X,re-1)/Ie,W+=v[X]*v[X];for($=Math.sqrt(W),v[re]>0&&($=-$),W=W-v[re]*$,v[re]=v[re]-$,be=re;be<B;be++){for(U=0,X=E;X>=re;X--)U+=v[X]*S.get(X,be);for(U=U/W,X=re;X<=E;X++)S.set(X,be,S.get(X,be)-U*v[X])}for(X=0;X<=E;X++){for(U=0,be=E;be>=re;be--)U+=v[be]*S.get(X,be);for(U=U/W,be=re;be<=E;be++)S.set(X,be,S.get(X,be)-U*v[be])}v[re]=Ie*v[re],S.set(re,re-1,Ie*$)}}for(X=0;X<B;X++)for(be=0;be<B;be++)y.set(X,be,X===be?1:0);for(re=E-1;re>=_+1;re--)if(S.get(re,re-1)!==0){for(X=re+1;X<=E;X++)v[X]=S.get(X,re-1);for(be=re;be<=E;be++){for($=0,X=re;X<=E;X++)$+=v[X]*y.get(X,be);for($=$/v[re]/S.get(re,re-1),X=re;X<=E;X++)y.set(X,be,y.get(X,be)+$*v[X])}}}function Kr(B,S,v,y,_){let E=B-1,U=0,$=B-1,W=Number.EPSILON,X=0,be=0,re=0,Ie=0,We=0,ke=0,Pe=0,Ge=0,se,qe,et,lt,ht,vn,it,ct,rn,de,Le,Qe,Ve,mn,Lt;for(se=0;se<B;se++)for((se<U||se>$)&&(v[se]=_.get(se,se),S[se]=0),qe=Math.max(se-1,0);qe<B;qe++)be=be+Math.abs(_.get(se,qe));for(;E>=U;){for(lt=E;lt>U&&(ke=Math.abs(_.get(lt-1,lt-1))+Math.abs(_.get(lt,lt)),ke===0&&(ke=be),!(Math.abs(_.get(lt,lt-1))<W*ke));)lt--;if(lt===E)_.set(E,E,_.get(E,E)+X),v[E]=_.get(E,E),S[E]=0,E--,Ge=0;else if(lt===E-1){if(it=_.get(E,E-1)*_.get(E-1,E),re=(_.get(E-1,E-1)-_.get(E,E))/2,Ie=re*re+it,Pe=Math.sqrt(Math.abs(Ie)),_.set(E,E,_.get(E,E)+X),_.set(E-1,E-1,_.get(E-1,E-1)+X),ct=_.get(E,E),Ie>=0){for(Pe=re>=0?re+Pe:re-Pe,v[E-1]=ct+Pe,v[E]=v[E-1],Pe!==0&&(v[E]=ct-it/Pe),S[E-1]=0,S[E]=0,ct=_.get(E,E-1),ke=Math.abs(ct)+Math.abs(Pe),re=ct/ke,Ie=Pe/ke,We=Math.sqrt(re*re+Ie*Ie),re=re/We,Ie=Ie/We,qe=E-1;qe<B;qe++)Pe=_.get(E-1,qe),_.set(E-1,qe,Ie*Pe+re*_.get(E,qe)),_.set(E,qe,Ie*_.get(E,qe)-re*Pe);for(se=0;se<=E;se++)Pe=_.get(se,E-1),_.set(se,E-1,Ie*Pe+re*_.get(se,E)),_.set(se,E,Ie*_.get(se,E)-re*Pe);for(se=U;se<=$;se++)Pe=y.get(se,E-1),y.set(se,E-1,Ie*Pe+re*y.get(se,E)),y.set(se,E,Ie*y.get(se,E)-re*Pe)}else v[E-1]=ct+re,v[E]=ct+re,S[E-1]=Pe,S[E]=-Pe;E=E-2,Ge=0}else{if(ct=_.get(E,E),rn=0,it=0,lt<E&&(rn=_.get(E-1,E-1),it=_.get(E,E-1)*_.get(E-1,E)),Ge===10){for(X+=ct,se=U;se<=E;se++)_.set(se,se,_.get(se,se)-ct);ke=Math.abs(_.get(E,E-1))+Math.abs(_.get(E-1,E-2)),ct=rn=.75*ke,it=-.4375*ke*ke}if(Ge===30&&(ke=(rn-ct)/2,ke=ke*ke+it,ke>0)){for(ke=Math.sqrt(ke),rn<ct&&(ke=-ke),ke=ct-it/((rn-ct)/2+ke),se=U;se<=E;se++)_.set(se,se,_.get(se,se)-ke);X+=ke,ct=rn=it=.964}for(Ge=Ge+1,ht=E-2;ht>=lt&&(Pe=_.get(ht,ht),We=ct-Pe,ke=rn-Pe,re=(We*ke-it)/_.get(ht+1,ht)+_.get(ht,ht+1),Ie=_.get(ht+1,ht+1)-Pe-We-ke,We=_.get(ht+2,ht+1),ke=Math.abs(re)+Math.abs(Ie)+Math.abs(We),re=re/ke,Ie=Ie/ke,We=We/ke,!(ht===lt||Math.abs(_.get(ht,ht-1))*(Math.abs(Ie)+Math.abs(We))<W*(Math.abs(re)*(Math.abs(_.get(ht-1,ht-1))+Math.abs(Pe)+Math.abs(_.get(ht+1,ht+1))))));)ht--;for(se=ht+2;se<=E;se++)_.set(se,se-2,0),se>ht+2&&_.set(se,se-3,0);for(et=ht;et<=E-1&&(mn=et!==E-1,et!==ht&&(re=_.get(et,et-1),Ie=_.get(et+1,et-1),We=mn?_.get(et+2,et-1):0,ct=Math.abs(re)+Math.abs(Ie)+Math.abs(We),ct!==0&&(re=re/ct,Ie=Ie/ct,We=We/ct)),ct!==0);et++)if(ke=Math.sqrt(re*re+Ie*Ie+We*We),re<0&&(ke=-ke),ke!==0){for(et!==ht?_.set(et,et-1,-ke*ct):lt!==ht&&_.set(et,et-1,-_.get(et,et-1)),re=re+ke,ct=re/ke,rn=Ie/ke,Pe=We/ke,Ie=Ie/re,We=We/re,qe=et;qe<B;qe++)re=_.get(et,qe)+Ie*_.get(et+1,qe),mn&&(re=re+We*_.get(et+2,qe),_.set(et+2,qe,_.get(et+2,qe)-re*Pe)),_.set(et,qe,_.get(et,qe)-re*ct),_.set(et+1,qe,_.get(et+1,qe)-re*rn);for(se=0;se<=Math.min(E,et+3);se++)re=ct*_.get(se,et)+rn*_.get(se,et+1),mn&&(re=re+Pe*_.get(se,et+2),_.set(se,et+2,_.get(se,et+2)-re*We)),_.set(se,et,_.get(se,et)-re),_.set(se,et+1,_.get(se,et+1)-re*Ie);for(se=U;se<=$;se++)re=ct*y.get(se,et)+rn*y.get(se,et+1),mn&&(re=re+Pe*y.get(se,et+2),y.set(se,et+2,y.get(se,et+2)-re*We)),y.set(se,et,y.get(se,et)-re),y.set(se,et+1,y.get(se,et+1)-re*Ie)}}}if(be!==0){for(E=B-1;E>=0;E--)if(re=v[E],Ie=S[E],Ie===0)for(lt=E,_.set(E,E,1),se=E-1;se>=0;se--){for(it=_.get(se,se)-re,We=0,qe=lt;qe<=E;qe++)We=We+_.get(se,qe)*_.get(qe,E);if(S[se]<0)Pe=it,ke=We;else if(lt=se,S[se]===0?_.set(se,E,it!==0?-We/it:-We/(W*be)):(ct=_.get(se,se+1),rn=_.get(se+1,se),Ie=(v[se]-re)*(v[se]-re)+S[se]*S[se],vn=(ct*ke-Pe*We)/Ie,_.set(se,E,vn),_.set(se+1,E,Math.abs(ct)>Math.abs(Pe)?(-We-it*vn)/ct:(-ke-rn*vn)/Pe)),vn=Math.abs(_.get(se,E)),W*vn*vn>1)for(qe=se;qe<=E;qe++)_.set(qe,E,_.get(qe,E)/vn)}else if(Ie<0)for(lt=E-1,Math.abs(_.get(E,E-1))>Math.abs(_.get(E-1,E))?(_.set(E-1,E-1,Ie/_.get(E,E-1)),_.set(E-1,E,-(_.get(E,E)-re)/_.get(E,E-1))):(Lt=fa(0,-_.get(E-1,E),_.get(E-1,E-1)-re,Ie),_.set(E-1,E-1,Lt[0]),_.set(E-1,E,Lt[1])),_.set(E,E-1,0),_.set(E,E,1),se=E-2;se>=0;se--){for(de=0,Le=0,qe=lt;qe<=E;qe++)de=de+_.get(se,qe)*_.get(qe,E-1),Le=Le+_.get(se,qe)*_.get(qe,E);if(it=_.get(se,se)-re,S[se]<0)Pe=it,We=de,ke=Le;else if(lt=se,S[se]===0?(Lt=fa(-de,-Le,it,Ie),_.set(se,E-1,Lt[0]),_.set(se,E,Lt[1])):(ct=_.get(se,se+1),rn=_.get(se+1,se),Qe=(v[se]-re)*(v[se]-re)+S[se]*S[se]-Ie*Ie,Ve=(v[se]-re)*2*Ie,Qe===0&&Ve===0&&(Qe=W*be*(Math.abs(it)+Math.abs(Ie)+Math.abs(ct)+Math.abs(rn)+Math.abs(Pe))),Lt=fa(ct*We-Pe*de+Ie*Le,ct*ke-Pe*Le-Ie*de,Qe,Ve),_.set(se,E-1,Lt[0]),_.set(se,E,Lt[1]),Math.abs(ct)>Math.abs(Pe)+Math.abs(Ie)?(_.set(se+1,E-1,(-de-it*_.get(se,E-1)+Ie*_.get(se,E))/ct),_.set(se+1,E,(-Le-it*_.get(se,E)-Ie*_.get(se,E-1))/ct)):(Lt=fa(-We-rn*_.get(se,E-1),-ke-rn*_.get(se,E),Pe,Ie),_.set(se+1,E-1,Lt[0]),_.set(se+1,E,Lt[1]))),vn=Math.max(Math.abs(_.get(se,E-1)),Math.abs(_.get(se,E))),W*vn*vn>1)for(qe=se;qe<=E;qe++)_.set(qe,E-1,_.get(qe,E-1)/vn),_.set(qe,E,_.get(qe,E)/vn)}for(se=0;se<B;se++)if(se<U||se>$)for(qe=se;qe<B;qe++)y.set(se,qe,_.get(se,qe));for(qe=B-1;qe>=U;qe--)for(se=U;se<=$;se++){for(Pe=0,et=U;et<=Math.min(qe,$);et++)Pe=Pe+y.get(se,et)*_.get(et,qe);y.set(se,qe,Pe)}}}function fa(B,S,v,y){let _,E;return Math.abs(v)>Math.abs(y)?(_=y/v,E=v+_*y,[(B+_*S)/E,(S-_*B)/E]):(_=v/y,E=y+_*v,[(_*B+S)/E,(_*S-B)/E])}class xu{constructor(S){if(S=en.checkMatrix(S),!S.isSymmetric())throw new Error("Matrix is not symmetric");let v=S,y=v.rows,_=new ee(y,y),E=!0,U,$,W;for($=0;$<y;$++){let X=0;for(W=0;W<$;W++){let be=0;for(U=0;U<W;U++)be+=_.get(W,U)*_.get($,U);be=(v.get($,W)-be)/_.get(W,W),_.set($,W,be),X=X+be*be}for(X=v.get($,$)-X,E&&(E=X>0),_.set($,$,Math.sqrt(Math.max(X,0))),W=$+1;W<y;W++)_.set($,W,0)}this.L=_,this.positiveDefinite=E}isPositiveDefinite(){return this.positiveDefinite}solve(S){S=en.checkMatrix(S);let v=this.L,y=v.rows;if(S.rows!==y)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let _=S.columns,E=S.clone(),U,$,W;for(W=0;W<y;W++)for($=0;$<_;$++){for(U=0;U<W;U++)E.set(W,$,E.get(W,$)-E.get(U,$)*v.get(W,U));E.set(W,$,E.get(W,$)/v.get(W,W))}for(W=y-1;W>=0;W--)for($=0;$<_;$++){for(U=W+1;U<y;U++)E.set(W,$,E.get(W,$)-E.get(U,$)*v.get(U,W));E.set(W,$,E.get(W,$)/v.get(W,W))}return E}get lowerTriangularMatrix(){return this.L}}class xl{constructor(S,v={}){S=en.checkMatrix(S);let{Y:y}=v;const{scaleScores:_=!1,maxIterations:E=1e3,terminationCriteria:U=1e-10}=v;let $;if(y){if(t.isAnyArray(y)&&typeof y[0]=="number"?y=ee.columnVector(y):y=en.checkMatrix(y),y.rows!==S.rows)throw new Error("Y should have the same number of rows as X");$=y.getColumnVector(0)}else $=S.getColumnVector(0);let W=1,X,be,re,Ie;for(let We=0;We<E&&W>U;We++)re=S.transpose().mmul($).div($.transpose().mmul($).get(0,0)),re=re.div(re.norm()),X=S.mmul(re).div(re.transpose().mmul(re).get(0,0)),We>0&&(W=X.clone().sub(Ie).pow(2).sum()),Ie=X.clone(),y?(be=y.transpose().mmul(X).div(X.transpose().mmul(X).get(0,0)),be=be.div(be.norm()),$=y.mmul(be).div(be.transpose().mmul(be).get(0,0))):$=X;if(y){let We=S.transpose().mmul(X).div(X.transpose().mmul(X).get(0,0));We=We.div(We.norm());let ke=S.clone().sub(X.clone().mmul(We.transpose())),Pe=$.transpose().mmul(X).div(X.transpose().mmul(X).get(0,0)),Ge=y.clone().sub(X.clone().mulS(Pe.get(0,0)).mmul(be.transpose()));this.t=X,this.p=We.transpose(),this.w=re.transpose(),this.q=be,this.u=$,this.s=X.transpose().mmul(X),this.xResidual=ke,this.yResidual=Ge,this.betas=Pe}else this.w=re.transpose(),this.s=X.transpose().mmul(X).sqrt(),_?this.t=X.clone().div(this.s.get(0,0)):this.t=X,this.xResidual=S.sub(X.mmul(re.transpose()))}}return Mt.AbstractMatrix=G,Mt.CHO=xu,Mt.CholeskyDecomposition=xu,Mt.DistanceMatrix=ue,Mt.EVD=Yr,Mt.EigenvalueDecomposition=Yr,Mt.LU=Kn,Mt.LuDecomposition=Kn,Mt.Matrix=ee,Mt.MatrixColumnSelectionView=ze,Mt.MatrixColumnView=Me,Mt.MatrixFlipColumnView=Ue,Mt.MatrixFlipRowView=Ke,Mt.MatrixRowSelectionView=ot,Mt.MatrixRowView=Ze,Mt.MatrixSelectionView=kt,Mt.MatrixSubView=Et,Mt.MatrixTransposeView=Ot,Mt.NIPALS=xl,Mt.Nipals=xl,Mt.QR=Js,Mt.QrDecomposition=Js,Mt.SVD=ei,Mt.SingularValueDecomposition=ei,Mt.SymmetricMatrix=we,Mt.WrapperMatrix1D=Ht,Mt.WrapperMatrix2D=en,Mt.correlation=yr,Mt.covariance=Os,Mt.default=ee,Mt.determinant=He,Mt.inverse=bu,Mt.linearDependencies=Zt,Mt.pseudoInverse=Rr,Mt.solve=Oe,Mt.wrap=Is,Mt}var nw=PG();const m3=ou(nw),Px=nw.Matrix;m3.Matrix?m3.Matrix:nw.Matrix;const fc={ui_component:[59,130,246],page_component:[16,185,129],layout_component:[245,158,11],modal_component:[239,68,68],form_component:[168,85,247],hook:[236,72,153],context:[14,165,233],state_management:[34,197,94],api_integration:[251,146,60],data_model:[139,92,246],utility:[107,114,128],configuration:[75,85,99],styling:[244,63,94],testing:[16,185,129],documentation:[59,130,246],error_handling:[239,68,68],performance:[245,158,11],security:[220,38,127],monitoring:[99,102,241],type_definition:[147,51,234],business_logic:[37,99,235],algorithm:[29,78,216],unknown:[156,163,175]};function DG(){const[t,e]=N.useState(null),[n,r]=N.useState(!1),[s,i]=N.useState(!1),[a,l]=N.useState([]),[u,h]=N.useState([]),[d,g]=N.useState([]),[b,w]=N.useState(null),[R,A]=N.useState([]),[C,I]=N.useState([]),[M,k]=N.useState("overview"),[P,L]=N.useState(null),[O,H]=N.useState(null),[Y,J]=N.useState([]),[K,Z]=N.useState([]),ae=N.useRef(null),_e=N.useRef(null),oe=async(ue=!1)=>{var ce,Me,ze;r(!0);try{const Ue=ue?"http://localhost:3333/api/semantic-chunks?refresh=true":"http://localhost:3333/api/semantic-chunks",[Ke,Ze]=await Promise.all([fetch("http://localhost:3333/api/vector-db/status"),fetch(Ue)]);if(Ke.ok){const ot=await Ke.json();e(ot.stats)}if(Ze.ok){const ot=await Ze.json();if(console.log(" Received chunks data:",{hasChunks:!!ot.chunks,chunksLength:(ce=ot.chunks)==null?void 0:ce.length,sampleChunk:(Me=ot.chunks)!=null&&Me[0]?{name:ot.chunks[0].name,hasEmbedding:!!ot.chunks[0].embedding,hasMetadata:!!ot.chunks[0].metadata,semanticType:ot.chunks[0].semanticType}:null}),ot.chunks&&Array.isArray(ot.chunks)){const kt=ot.chunks.map(Et=>({id:Et.name||Et.id,embedding:Et.embedding,metadata:Et.metadata||{content:Et.code||"",semanticType:Et.semanticType||"unknown",businessDomain:Et.businessDomain||[],technicalPatterns:Et.technicalPatterns||[],purpose:Et.purpose||"",files:Et.files||[Et.filePath].filter(Boolean),size:Et.size||0,complexity:Et.complexity||0}}));console.log(" Processed vector chunks:",{count:kt.length,withEmbeddings:kt.filter(Et=>Et.embedding).length,sampleMetadata:(ze=kt[0])==null?void 0:ze.metadata}),h(kt),await Re(kt)}}}catch(Ue){console.error("Error fetching vector stats:",Ue)}finally{r(!1)}},Re=async ue=>{if(!ue.length){console.log(" No chunks to generate cluster data from");return}console.log(" Generating cluster data for",ue.length,"chunks");const ce=ue.filter(Ue=>Ue.embedding&&Ue.embedding.length>0);console.log(" Chunks with embeddings:",ce.length);const Me={business_logic:0,algorithm:0,data_processing:1,database:1,api_integration:2,middleware:2,routing:2,ui_component:3,page_component:3,layout_component:3,hook:3,utility:4,configuration:4,testing:5,documentation:5,monitoring:5,error_handling:6,performance:6,security:6,function:4,async_function:2,api_function:2,react_component:3,react_hook_component:3,react_functional_component:3,class:0,data_class:1,error_class:6,type_definition:4,component_types:4,config_types:4,constant:4,import_export:4,unknown:7};let ze=[];if(ce.length>1)try{const Ue=new Px(ce.map(Ht=>Ht.embedding));console.log(" Embedding matrix shape:",Ue.rows,"x",Ue.columns);const Ke=Ue.mean("column"),Ze=Ue.subRowVector(Ke),{V:ot}=Ze.svd(),kt=ot.getColumn(0),Et=ot.getColumn(1),Ot=Ze.mmul(Px.columnVector(kt).augment(Px.columnVector(Et)));console.log(" PCA projection completed"),ze=ce.map((Ht,en)=>{const Is=Me[Ht.metadata.semanticType]??5,Kn=typeof Ht.metadata.complexity=="object"?Ht.metadata.complexity.score:Ht.metadata.complexity||0;return{id:Ht.id,x:Ot.get(en,0),y:Ot.get(en,1),cluster:Is,chunk:Ht,semanticType:Ht.metadata.semanticType,complexity:Kn}})}catch(Ue){console.warn(" PCA failed, falling back to simple projection:",Ue),ze=ce.map(Ke=>{const Ze=Me[Ke.metadata.semanticType]??5,ot=typeof Ke.metadata.complexity=="object"?Ke.metadata.complexity.score:Ke.metadata.complexity||0;return{id:Ke.id,x:Ke.embedding[0]||0,y:Ke.embedding[1]||0,cluster:Ze,chunk:Ke,semanticType:Ke.metadata.semanticType,complexity:ot}})}else ze=ue.map(Ue=>{var ot,kt;const Ke=Me[Ue.metadata.semanticType]??5,Ze=typeof Ue.metadata.complexity=="object"?Ue.metadata.complexity.score:Ue.metadata.complexity||0;return{id:Ue.id,x:((ot=Ue.embedding)==null?void 0:ot[0])||Math.random(),y:((kt=Ue.embedding)==null?void 0:kt[1])||Math.random(),cluster:Ke,chunk:Ue,semanticType:Ue.metadata.semanticType,complexity:Ze}});if(console.log(" Generated cluster points:",ze.length),ze.length>0){const Ue=ze.map(Ot=>Ot.x),Ke=ze.map(Ot=>Ot.y),Ze={minX:Math.min(...Ue),maxX:Math.max(...Ue),minY:Math.min(...Ke),maxY:Math.max(...Ke),rangeX:Math.max(...Ue)-Math.min(...Ue),rangeY:Math.max(...Ke)-Math.min(...Ke)};console.log(" Data bounds:",Ze);const ot=200/Math.max(Ze.rangeX,Ze.rangeY),kt=(Ze.minX+Ze.maxX)/2,Et=(Ze.minY+Ze.maxY)/2;ze=ze.map(Ot=>({...Ot,x:(Ot.x-kt)*ot,y:(Ot.y-Et)*ot})),console.log(" Normalized points to [-100, 100] range with scale:",ot)}g(ze),ce.length>0&&ie(ue)},ie=async ue=>{if(ue.length===0)return;console.log(" Generating network data for",ue.length,"chunks");const ce=ue.slice(0,50).map((Ue,Ke)=>{const Ze=d.find(ot=>ot.chunk.id===Ue.id);return{id:Ue.id,chunk:Ue,x:(Ze==null?void 0:Ze.x)||(Math.random()-.5)*200,y:(Ze==null?void 0:Ze.y)||(Math.random()-.5)*200,color:fc[Ue.metadata.semanticType]||fc.unknown}});console.log(" Created",ce.length,"network nodes");const Me=[],ze=.3;for(let Ue=0;Ue<Math.min(ce.length,20);Ue++)try{const Ke=await fetch("http://localhost:3333/api/vector-db/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ce[Ue].chunk.metadata.content.slice(0,200),limit:10,minSimilarity:ze})});if(Ke.ok){const Ze=await Ke.json();(Array.isArray(Ze.results)?Ze.results:Array.isArray(Ze)?Ze:[]).forEach(kt=>{const Et=ce.findIndex(Ot=>Ot.id===kt.id);Et!==-1&&kt.id!==ce[Ue].id&&kt.similarity&&kt.similarity>=ze&&Me.push({source:[ce[Ue].x,ce[Ue].y],target:[ce[Et].x,ce[Et].y],similarity:kt.similarity})})}}catch(Ke){console.error("Error generating network data:",Ke)}A(ce),I(Me)},Ae=async ue=>{if(ue.metadata.content){w(ue);try{const ce=await fetch("http://localhost:3333/api/vector-db/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ue.metadata.content.slice(0,200),limit:20,minSimilarity:.3})});if(ce.ok){const Me=await ce.json(),ze=Array.isArray(Me.results)?Me.results:Array.isArray(Me)?Me:[];l(ze.filter(Ue=>Ue.id!==ue.id))}}catch(ce){console.error("Error finding similar chunks:",ce)}}},he=async()=>{i(!0);try{(await fetch("http://localhost:3333/api/vector-db/rebuild",{method:"POST"})).ok&&await oe()}catch(ue){console.error("Error rebuilding vector DB:",ue)}finally{i(!1)}},$e=()=>[...new Set(d.map(ce=>ce.semanticType))].map(ce=>{var Me;return{label:ce.replace(/_/g," "),value:ce,color:`rgb(${((Me=fc[ce])==null?void 0:Me.join(","))||"156,163,175"})`}}),D=()=>[...new Set(d.map(ce=>ce.chunk.metadata.purpose).filter(Boolean))].map(ce=>({label:ce,value:ce})),te=()=>d.filter(ue=>{const ce=Y.length===0||Y.includes(ue.semanticType),Me=K.length===0||K.some(ze=>ue.chunk.metadata.purpose.toLowerCase().includes(ze.toLowerCase()));return ce&&Me}),G=()=>{const ue=te();return new Tg({id:"cluster-layer",data:ue,getPosition:ce=>[ce.x,ce.y,0],getRadius:ce=>Math.max(5,Math.min(25,ce.complexity*1.5+5)),radiusUnits:"pixels",getFillColor:ce=>fc[ce.semanticType]||fc.unknown,pickable:!0,onHover:ce=>{ce.object?L({object:ce.object,x:ce.x,y:ce.y}):L(null)},onClick:ce=>{ce.object&&Ae(ce.object.chunk)}})},F=()=>{console.log(" Creating network layers with",R.length,"nodes and",C.length,"edges");const ue=new Tg({id:"network-nodes",data:R,getPosition:Me=>[Me.x,Me.y,0],getRadius:12,radiusUnits:"pixels",getFillColor:Me=>Me.color,pickable:!0,onHover:Me=>{Me.object?H({object:Me.object,x:Me.x,y:Me.y}):H(null)},onClick:Me=>{Me.object&&Ae(Me.object.chunk)}});return[new tw({id:"network-edges",data:C,getSourcePosition:Me=>[...Me.source,0],getTargetPosition:Me=>[...Me.target,0],getWidth:Me=>Math.max(2,Me.similarity*8),widthUnits:"pixels",getSourceColor:[120,120,120,180],getTargetColor:[120,120,120,180]}),ue]},ge=ue=>{if(!ae.current)return;const ce=ae.current.querySelector("canvas");if(ce){const Me=document.createElement("a");Me.download=`semantic-clusters-${Date.now()}.png`,Me.href=ce.toDataURL(),Me.click()}};N.useEffect(()=>{oe()},[]),N.useEffect(()=>{M!=="overview"&&u.length===0&&oe()},[M,u.length]),N.useEffect(()=>{t&&u.length===0&&(console.log(" Stats available but no chunks loaded, fetching chunks..."),oe())},[t,u.length]);const ee=()=>{var Me,ze;if(!P)return null;const ce=P.object.chunk;return m.jsxs("div",{className:"absolute z-50 bg-background border rounded-lg shadow-lg px-4 py-3 text-sm pointer-events-none",style:{left:P.x+12,top:P.y+12,minWidth:220,maxWidth:400},children:[m.jsx("div",{className:"font-thin",children:ce.id}),m.jsxs("div",{children:["Type: ",ce.metadata.semanticType]}),m.jsxs("div",{children:["Purpose: ",ce.metadata.purpose]}),m.jsxs("div",{children:["File: ",((ze=(Me=ce.metadata.files)==null?void 0:Me[0])==null?void 0:ze.split("/").slice(-2).join("/"))||"Unknown"]}),m.jsxs("div",{children:["Complexity: ",typeof ce.metadata.complexity=="object"?`${ce.metadata.complexity.score} (${ce.metadata.complexity.level})`:ce.metadata.complexity]}),m.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[ce.metadata.content.slice(0,100),"..."]})]})},we=()=>{var Me,ze;if(!O)return null;const ce=O.object.chunk;return m.jsxs("div",{className:"absolute z-50 bg-background border rounded-lg shadow-lg px-4 py-3 text-sm pointer-events-none",style:{left:O.x+12,top:O.y+12,minWidth:220,maxWidth:400},children:[m.jsx("div",{className:"font-thin",children:ce.id}),m.jsxs("div",{children:["Type: ",ce.metadata.semanticType]}),m.jsxs("div",{children:["Purpose: ",ce.metadata.purpose]}),m.jsxs("div",{children:["File: ",((ze=(Me=ce.metadata.files)==null?void 0:Me[0])==null?void 0:ze.split("/").slice(-2).join("/"))||"Unknown"]}),m.jsxs("div",{children:["Complexity: ",typeof ce.metadata.complexity=="object"?`${ce.metadata.complexity.score} (${ce.metadata.complexity.level})`:ce.metadata.complexity]}),m.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[ce.metadata.content.slice(0,100),"..."]})]})};return m.jsxs("div",{className:"w-full",children:[m.jsx(Ut,{className:"mb-6",children:m.jsxs(En,{children:[m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(w2,{className:"w-5 h-5"}),"Vector Database Explorer"]}),m.jsx(Kd,{children:"Explore your codebase through semantic similarity and visual analysis"})]})}),m.jsxs(ia,{value:M,onValueChange:k,className:"w-full",children:[m.jsxs(oa,{className:"grid w-full grid-cols-3",children:[m.jsxs(Rn,{value:"overview",className:"flex items-center gap-2",children:[m.jsx(G_,{className:"w-4 h-4"}),"Overview"]}),m.jsxs(Rn,{value:"clusters",className:"flex items-center gap-2",children:[m.jsx(Ac,{className:"w-4 h-4"}),"Clusters"]}),m.jsxs(Rn,{value:"network",className:"flex items-center gap-2",children:[m.jsx(Pb,{className:"w-4 h-4"}),"Network"]})]}),m.jsx(In,{value:"overview",className:"space-y-4",children:m.jsxs(Ut,{children:[m.jsxs(En,{children:[m.jsx(Cn,{children:"Database Status"}),m.jsx(Kd,{children:"Vector database status and management"})]}),m.jsxs(qt,{children:[m.jsxs("div",{className:"flex gap-4 mb-4",children:[m.jsxs(wt,{onClick:()=>oe(!0),disabled:n,variant:"outline",size:"sm",children:[m.jsx(fs,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]}),m.jsxs(wt,{onClick:he,disabled:s,variant:"outline",size:"sm",children:[m.jsx(bv,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Rebuild Vector DB"]}),t&&m.jsxs(pn,{variant:"secondary",children:[t.totalChunks," chunks indexed"]})]}),!t&&!n&&m.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[m.jsx(w2,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No vector DB data available"}),m.jsx("p",{className:"text-sm",children:"Run a rebuild to see stats"})]}),n&&m.jsxs("div",{className:"text-center py-8",children:[m.jsx(fs,{className:"w-8 h-8 mx-auto animate-spin mb-2"}),m.jsx("p",{children:"Loading vector DB status..."})]}),t&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[m.jsxs("div",{className:"p-4 border rounded-lg",children:[m.jsx("div",{className:"text-2xl font-thin",children:t.totalChunks}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Chunks"})]}),m.jsxs("div",{className:"p-4 border rounded-lg",children:[m.jsx("div",{className:"text-2xl font-thin",children:t.collectionName}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Collection"})]}),m.jsxs("div",{className:"p-4 border rounded-lg",children:[m.jsx("div",{className:"text-2xl font-thin",children:t.modelName}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Model"})]})]})]})]})}),m.jsx(In,{value:"clusters",className:"space-y-4",children:m.jsxs(Ut,{children:[m.jsxs(En,{children:[m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(Ac,{className:"w-5 h-5"}),"Semantic Code Clusters"]}),m.jsx(Kd,{children:"2D projection of code chunks by semantic similarity. Click points to explore."})]}),m.jsx(qt,{children:d.length>0?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>oe(!0),disabled:n,children:[m.jsx(fs,{className:`w-4 h-4 mr-1 ${n?"animate-spin":""}`}),"Refresh Data"]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>ge(),children:[m.jsx(xv,{className:"w-4 h-4 mr-1"}),"Export PNG"]}),m.jsxs(wt,{variant:"outline",size:"sm",onClick:he,disabled:s,children:[m.jsx(bv,{className:`w-4 h-4 mr-1 ${s?"animate-spin":""}`}),"Rebuild"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-xs font-thin",children:"Semantic Types"}),m.jsx(dE,{options:$e(),selected:Y,onSelectedChange:J,placeholder:"All types",className:"w-full"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-thin",children:"Purposes"}),m.jsx(dE,{options:D(),selected:K,onSelectedChange:Z,placeholder:"All purposes",className:"w-full"})]}),m.jsxs("div",{className:"text-xs text-muted-foreground",children:["Showing ",te().length," of ",d.length," points"]})]})]})}),m.jsxs("div",{ref:ae,className:"relative w-full h-[600px] border rounded-lg",children:[m.jsx(f3,{initialViewState:{longitude:0,latitude:0,zoom:4},controller:!0,layers:[G()],width:"100%",height:"100%"}),ee()]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[m.jsxs("div",{className:"text-sm font-thin mb-3 flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Visualization Features"]}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-1.5 flex-shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"PCA Dimensionality Reduction:"})," Mathematical projection from high-dimensional embeddings"]})]}),m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-1.5 flex-shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Interactive Controls:"})," Mouse wheel zoom, drag to pan"]})]}),m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-1.5 flex-shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Click to Explore:"})," Click points to find similar chunks"]})]})]})]})}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[m.jsxs("div",{className:"text-sm font-thin mb-3 flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-chart-1 rounded-full"}),"Color Legend"]}),m.jsx("div",{className:"grid grid-cols-2 gap-3 text-xs",children:(()=>{const ue=[...new Set(d.map(ce=>ce.semanticType))];return ue.length===0?m.jsx("div",{children:"No types found"}):ue.map(ce=>{var Me;return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full border border-border/50",style:{backgroundColor:`rgb(${((Me=fc[ce])==null?void 0:Me.join(","))||"156,163,175"})`}}),m.jsx("span",{className:"text-muted-foreground",children:ce.replace(/_/g," ")})]},ce)})})()}),m.jsx("div",{className:"mt-3 pt-3 border-t border-border/50",children:m.jsxs("div",{className:"text-xs text-muted-foreground",children:[m.jsx("strong",{children:"Point Size:"})," Represents code complexity"]})})]})})]})]}):m.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[m.jsx(Ac,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No clustering data available"}),m.jsx("p",{className:"text-sm",children:"Go to Overview tab and refresh to load chunk embeddings"})]})})]})}),m.jsx(In,{value:"network",className:"space-y-4",children:m.jsxs(Ut,{children:[m.jsxs(En,{children:[m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(Pb,{className:"w-5 h-5"}),"Semantic Network Graph"]}),m.jsx(Kd,{children:"Network graph showing connections between similar code chunks. Click nodes to explore."})]}),m.jsx(qt,{children:R.length>0?m.jsxs("div",{ref:_e,className:"relative w-full h-[600px] border rounded-lg",children:[m.jsx(f3,{initialViewState:{longitude:0,latitude:0,zoom:4},controller:!0,layers:F(),width:"100%",height:"100%"}),we(),m.jsxs("div",{className:"absolute bottom-4 left-4 text-sm text-muted-foreground bg-background/90 p-2 rounded",children:[m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Click"})," nodes to find similar chunks"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Line thickness"})," shows similarity strength"]})]})]}):m.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[m.jsx(Pb,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"Building network graph..."}),m.jsx("p",{className:"text-sm",children:"This may take a moment as we calculate similarities"})]})})]})})]})]})}var rw="Progress",sw=100,[jG,Yie]=Ki(rw),[FG,BG]=jG(rw),_O=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=LG,...a}=t;(s||s===0)&&!y3(s)&&console.error(UG(`${s}`,"Progress"));const l=y3(s)?s:sw;r!==null&&!b3(r,l)&&console.error(zG(`${r}`,"Progress"));const u=b3(r,l)?r:null,h=Eg(u)?i(u,l):void 0;return m.jsx(FG,{scope:n,value:u,max:l,children:m.jsx(mt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Eg(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":TO(u,l),"data-value":u??void 0,"data-max":l,...a,ref:e})})});_O.displayName=rw;var wO="ProgressIndicator",SO=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=BG(wO,n);return m.jsx(mt.div,{"data-state":TO(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});SO.displayName=wO;function LG(t,e){return`${Math.round(t/e*100)}%`}function TO(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Eg(t){return typeof t=="number"}function y3(t){return Eg(t)&&!isNaN(t)&&t>0}function b3(t,e){return Eg(t)&&!isNaN(t)&&t<=e&&t>=0}function UG(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${sw}\`.`}function zG(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${sw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var EO=_O,VG=SO;const R_=N.forwardRef(({className:t,value:e,...n},r)=>m.jsx(EO,{ref:r,className:Dt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:m.jsx(VG,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));R_.displayName=EO.displayName;function $G(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const HG=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WG=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qG={};function x3(t,e){return(qG.jsx?WG:HG).test(t)}const XG=/[ \t\n\f\r]/g;function YG(t){return typeof t=="object"?t.type==="text"?v3(t.value):!1:v3(t)}function v3(t){return t.replace(XG,"")===""}class kh{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}kh.prototype.normal={};kh.prototype.property={};kh.prototype.space=void 0;function AO(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new kh(n,r,e)}function C_(t){return t.toLowerCase()}class Xr{constructor(e,n){this.attribute=n,this.property=e}}Xr.prototype.attribute="";Xr.prototype.booleanish=!1;Xr.prototype.boolean=!1;Xr.prototype.commaOrSpaceSeparated=!1;Xr.prototype.commaSeparated=!1;Xr.prototype.defined=!1;Xr.prototype.mustUseProperty=!1;Xr.prototype.number=!1;Xr.prototype.overloadedBoolean=!1;Xr.prototype.property="";Xr.prototype.spaceSeparated=!1;Xr.prototype.space=void 0;let KG=0;const Ct=bl(),qn=bl(),k_=bl(),Ye=bl(),wn=bl(),Ic=bl(),is=bl();function bl(){return 2**++KG}const N_=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ct,booleanish:qn,commaOrSpaceSeparated:is,commaSeparated:Ic,number:Ye,overloadedBoolean:k_,spaceSeparated:wn},Symbol.toStringTag,{value:"Module"})),Dx=Object.keys(N_);class iw extends Xr{constructor(e,n,r,s){let i=-1;if(super(e,n),_3(this,"space",s),typeof r=="number")for(;++i<Dx.length;){const a=Dx[i];_3(this,Dx[i],(r&N_[a])===N_[a])}}}iw.prototype.defined=!0;function _3(t,e,n){n&&(t[e]=n)}function mu(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new iw(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[C_(r)]=r,n[C_(i.attribute)]=r}return new kh(e,n,t.space)}const RO=mu({properties:{ariaActiveDescendant:null,ariaAtomic:qn,ariaAutoComplete:null,ariaBusy:qn,ariaChecked:qn,ariaColCount:Ye,ariaColIndex:Ye,ariaColSpan:Ye,ariaControls:wn,ariaCurrent:null,ariaDescribedBy:wn,ariaDetails:null,ariaDisabled:qn,ariaDropEffect:wn,ariaErrorMessage:null,ariaExpanded:qn,ariaFlowTo:wn,ariaGrabbed:qn,ariaHasPopup:null,ariaHidden:qn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wn,ariaLevel:Ye,ariaLive:null,ariaModal:qn,ariaMultiLine:qn,ariaMultiSelectable:qn,ariaOrientation:null,ariaOwns:wn,ariaPlaceholder:null,ariaPosInSet:Ye,ariaPressed:qn,ariaReadOnly:qn,ariaRelevant:null,ariaRequired:qn,ariaRoleDescription:wn,ariaRowCount:Ye,ariaRowIndex:Ye,ariaRowSpan:Ye,ariaSelected:qn,ariaSetSize:Ye,ariaSort:null,ariaValueMax:Ye,ariaValueMin:Ye,ariaValueNow:Ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function CO(t,e){return e in t?t[e]:e}function kO(t,e){return CO(t,e.toLowerCase())}const ZG=mu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ic,acceptCharset:wn,accessKey:wn,action:null,allow:null,allowFullScreen:Ct,allowPaymentRequest:Ct,allowUserMedia:Ct,alt:null,as:null,async:Ct,autoCapitalize:null,autoComplete:wn,autoFocus:Ct,autoPlay:Ct,blocking:wn,capture:null,charSet:null,checked:Ct,cite:null,className:wn,cols:Ye,colSpan:null,content:null,contentEditable:qn,controls:Ct,controlsList:wn,coords:Ye|Ic,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ct,defer:Ct,dir:null,dirName:null,disabled:Ct,download:k_,draggable:qn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ct,formTarget:null,headers:wn,height:Ye,hidden:k_,high:Ye,href:null,hrefLang:null,htmlFor:wn,httpEquiv:wn,id:null,imageSizes:null,imageSrcSet:null,inert:Ct,inputMode:null,integrity:null,is:null,isMap:Ct,itemId:null,itemProp:wn,itemRef:wn,itemScope:Ct,itemType:wn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ct,low:Ye,manifest:null,max:null,maxLength:Ye,media:null,method:null,min:null,minLength:Ye,multiple:Ct,muted:Ct,name:null,nonce:null,noModule:Ct,noValidate:Ct,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ct,optimum:Ye,pattern:null,ping:wn,placeholder:null,playsInline:Ct,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ct,referrerPolicy:null,rel:wn,required:Ct,reversed:Ct,rows:Ye,rowSpan:Ye,sandbox:wn,scope:null,scoped:Ct,seamless:Ct,selected:Ct,shadowRootClonable:Ct,shadowRootDelegatesFocus:Ct,shadowRootMode:null,shape:null,size:Ye,sizes:null,slot:null,span:Ye,spellCheck:qn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ye,step:null,style:null,tabIndex:Ye,target:null,title:null,translate:null,type:null,typeMustMatch:Ct,useMap:null,value:qn,width:Ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wn,axis:null,background:null,bgColor:null,border:Ye,borderColor:null,bottomMargin:Ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ct,declare:Ct,event:null,face:null,frame:null,frameBorder:null,hSpace:Ye,leftMargin:Ye,link:null,longDesc:null,lowSrc:null,marginHeight:Ye,marginWidth:Ye,noResize:Ct,noHref:Ct,noShade:Ct,noWrap:Ct,object:null,profile:null,prompt:null,rev:null,rightMargin:Ye,rules:null,scheme:null,scrolling:qn,standby:null,summary:null,text:null,topMargin:Ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ct,disableRemotePlayback:Ct,prefix:null,property:null,results:Ye,security:null,unselectable:null},space:"html",transform:kO}),QG=mu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:is,accentHeight:Ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ye,amplitude:Ye,arabicForm:null,ascent:Ye,attributeName:null,attributeType:null,azimuth:Ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ye,by:null,calcMode:null,capHeight:Ye,className:wn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ye,diffuseConstant:Ye,direction:null,display:null,dur:null,divisor:Ye,dominantBaseline:null,download:Ct,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ye,enableBackground:null,end:null,event:null,exponent:Ye,externalResourcesRequired:null,fill:null,fillOpacity:Ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ic,g2:Ic,glyphName:Ic,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ye,horizOriginX:Ye,horizOriginY:Ye,id:null,ideographic:Ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ye,k:Ye,k1:Ye,k2:Ye,k3:Ye,k4:Ye,kernelMatrix:is,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ye,overlineThickness:Ye,paintOrder:null,panose1:null,path:null,pathLength:Ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ye,pointsAtY:Ye,pointsAtZ:Ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:is,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:is,rev:is,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:is,requiredFeatures:is,requiredFonts:is,requiredFormats:is,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ye,specularExponent:Ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ye,strikethroughThickness:Ye,string:null,stroke:null,strokeDashArray:is,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ye,strokeOpacity:Ye,strokeWidth:null,style:null,surfaceScale:Ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:is,tabIndex:Ye,tableValues:null,target:null,targetX:Ye,targetY:Ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:is,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ye,underlineThickness:Ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ye,values:null,vAlphabetic:Ye,vMathematical:Ye,vectorEffect:null,vHanging:Ye,vIdeographic:Ye,version:null,vertAdvY:Ye,vertOriginX:Ye,vertOriginY:Ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:CO}),NO=mu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),MO=mu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:kO}),IO=mu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),GG={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},JG=/[A-Z]/g,w3=/-[a-z]/g,eJ=/^data[-\w.:]+$/i;function tJ(t,e){const n=C_(e);let r=e,s=Xr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eJ.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(w3,rJ);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!w3.test(i)){let a=i.replace(JG,nJ);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=iw}return new s(r,e)}function nJ(t){return"-"+t.toLowerCase()}function rJ(t){return t.charAt(1).toUpperCase()}const sJ=AO([RO,ZG,NO,MO,IO],"html"),ow=AO([RO,QG,NO,MO,IO],"svg");function iJ(t){return t.join(" ").trim()}var hc={},jx,S3;function oJ(){if(S3)return jx;S3=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,h="/",d="*",g="",b="comment",w="declaration";jx=function(A,C){if(typeof A!="string")throw new TypeError("First argument must be a string");if(!A)return[];C=C||{};var I=1,M=1;function k(_e){var oe=_e.match(e);oe&&(I+=oe.length);var Re=_e.lastIndexOf(u);M=~Re?_e.length-Re:M+_e.length}function P(){var _e={line:I,column:M};return function(oe){return oe.position=new L(_e),Y(),oe}}function L(_e){this.start=_e,this.end={line:I,column:M},this.source=C.source}L.prototype.content=A;function O(_e){var oe=new Error(C.source+":"+I+":"+M+": "+_e);if(oe.reason=_e,oe.filename=C.source,oe.line=I,oe.column=M,oe.source=A,!C.silent)throw oe}function H(_e){var oe=_e.exec(A);if(oe){var Re=oe[0];return k(Re),A=A.slice(Re.length),oe}}function Y(){H(n)}function J(_e){var oe;for(_e=_e||[];oe=K();)oe!==!1&&_e.push(oe);return _e}function K(){var _e=P();if(!(h!=A.charAt(0)||d!=A.charAt(1))){for(var oe=2;g!=A.charAt(oe)&&(d!=A.charAt(oe)||h!=A.charAt(oe+1));)++oe;if(oe+=2,g===A.charAt(oe-1))return O("End of comment missing");var Re=A.slice(2,oe-2);return M+=2,k(Re),A=A.slice(oe),M+=2,_e({type:b,comment:Re})}}function Z(){var _e=P(),oe=H(r);if(oe){if(K(),!H(s))return O("property missing ':'");var Re=H(i),ie=_e({type:w,property:R(oe[0].replace(t,g)),value:Re?R(Re[0].replace(t,g)):g});return H(a),ie}}function ae(){var _e=[];J(_e);for(var oe;oe=Z();)oe!==!1&&(_e.push(oe),J(_e));return _e}return Y(),ae()};function R(A){return A?A.replace(l,g):g}return jx}var T3;function aJ(){if(T3)return hc;T3=1;var t=hc&&hc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hc,"__esModule",{value:!0}),hc.default=n;var e=t(oJ());function n(r,s){var i=null;if(!r||typeof r!="string")return i;var a=(0,e.default)(r),l=typeof s=="function";return a.forEach(function(u){if(u.type==="declaration"){var h=u.property,d=u.value;l?s(h,d,u):d&&(i=i||{},i[h]=d)}}),i}return hc}var Sf={},E3;function lJ(){if(E3)return Sf;E3=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,i=function(h){return!h||n.test(h)||t.test(h)},a=function(h,d){return d.toUpperCase()},l=function(h,d){return"".concat(d,"-")},u=function(h,d){return d===void 0&&(d={}),i(h)?h:(h=h.toLowerCase(),d.reactCompat?h=h.replace(s,l):h=h.replace(r,l),h.replace(e,a))};return Sf.camelCase=u,Sf}var Tf,A3;function cJ(){if(A3)return Tf;A3=1;var t=Tf&&Tf.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(aJ()),n=lJ();function r(s,i){var a={};return!s||typeof s!="string"||(0,e.default)(s,function(l,u){l&&u&&(a[(0,n.camelCase)(l,i)]=u)}),a}return r.default=r,Tf=r,Tf}var uJ=cJ();const fJ=ou(uJ),OO=PO("end"),aw=PO("start");function PO(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hJ(t){const e=aw(t),n=OO(t);if(e&&n)return{start:e,end:n}}function Wf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?R3(t.position):"start"in t||"end"in t?R3(t):"line"in t||"column"in t?M_(t):""}function M_(t){return C3(t&&t.line)+":"+C3(t&&t.column)}function R3(t){return M_(t&&t.start)+"-"+M_(t&&t.end)}function C3(t){return t&&typeof t=="number"?t:1}class Ar extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(a=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?i.ruleId=r:(i.source=r.slice(0,u),i.ruleId=r.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=Wf(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ar.prototype.file="";Ar.prototype.name="";Ar.prototype.reason="";Ar.prototype.message="";Ar.prototype.stack="";Ar.prototype.column=void 0;Ar.prototype.line=void 0;Ar.prototype.ancestors=void 0;Ar.prototype.cause=void 0;Ar.prototype.fatal=void 0;Ar.prototype.place=void 0;Ar.prototype.ruleId=void 0;Ar.prototype.source=void 0;const lw={}.hasOwnProperty,dJ=new Map,pJ=/[A-Z]/g,gJ=new Set(["table","tbody","thead","tfoot","tr"]),mJ=new Set(["td","th"]),DO="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function yJ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=EJ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=TJ(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ow:sJ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=jO(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function jO(t,e,n){if(e.type==="element")return bJ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return xJ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return _J(t,e,n);if(e.type==="mdxjsEsm")return vJ(t,e);if(e.type==="root")return wJ(t,e,n);if(e.type==="text")return SJ(t,e)}function bJ(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=ow,t.schema=s),t.ancestors.push(e);const i=BO(t,e.tagName,!1),a=AJ(t,e);let l=uw(t,e);return gJ.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!YG(u):!0})),FO(t,a,i,e),cw(a,l),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function xJ(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}lh(t,e.position)}function vJ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);lh(t,e.position)}function _J(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=ow,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:BO(t,e.name,!0),a=RJ(t,e),l=uw(t,e);return FO(t,a,i,e),cw(a,l),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function wJ(t,e,n){const r={};return cw(r,uw(t,e)),t.create(e,t.Fragment,r,n)}function SJ(t,e){return e.value}function FO(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function cw(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function TJ(t,e,n){return r;function r(s,i,a,l){const h=Array.isArray(a.children)?n:e;return l?h(i,a,l):h(i,a)}}function EJ(t,e){return n;function n(r,s,i,a){const l=Array.isArray(i.children),u=aw(r);return e(s,i,a,l,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function AJ(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&lw.call(e.properties,s)){const i=CJ(t,s,e.properties[s]);if(i){const[a,l]=i;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&mJ.has(e.tagName)?r=l:n[a]=l}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function RJ(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else lh(t,e.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,i=t.evaluater.evaluateExpression(l.expression)}else lh(t,e.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function uw(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:dJ;for(;++r<e.children.length;){const i=e.children[r];let a;if(t.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=s.get(u)||0;a=u+"-"+h,s.set(u,h+1)}}const l=jO(t,i,a);l!==void 0&&n.push(l)}return n}function CJ(t,e,n){const r=tJ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$G(n):iJ(n)),r.property==="style"){let s=typeof n=="object"?n:kJ(t,String(n));return t.stylePropertyNameCase==="css"&&(s=NJ(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?GG[r.property]||r.property:r.attribute,n]}}function kJ(t,e){try{return fJ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Ar("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=DO+"#cannot-parse-style-attribute",s}}function BO(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,a;for(;++i<s.length;){const l=x3(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}r=a}else r=x3(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return lw.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);lh(t)}function lh(t,e){const n=new Ar("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=DO+"#cannot-handle-mdx-estrees-without-createevaluater",n}function NJ(t){const e={};let n;for(n in t)lw.call(t,n)&&(e[MJ(n)]=t[n]);return e}function MJ(t){let e=t.replace(pJ,IJ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function IJ(t){return"-"+t.toLowerCase()}const Fx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OJ={};function fw(t,e){const n=OJ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return LO(t,r,s)}function LO(t,e,n){if(PJ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return k3(t.children,e,n)}return Array.isArray(t)?k3(t,e,n):""}function k3(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=LO(t[s],e,n);return r.join("")}function PJ(t){return!!(t&&typeof t=="object")}const N3=document.createElement("i");function hw(t){const e="&"+t+";";N3.innerHTML=e;const n=N3.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ds(t,e,n,r){const s=t.length;let i=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(e,0),t.splice(...a),i+=1e4,e+=1e4}function Ss(t,e){return t.length>0?(ds(t,t.length,0,e),t):e}const M3={}.hasOwnProperty;function UO(t){const e={};let n=-1;for(;++n<t.length;)DJ(e,t[n]);return e}function DJ(t,e){let n;for(n in e){const s=(M3.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let a;if(i)for(a in i){M3.call(s,a)||(s[a]=[]);const l=i[a];jJ(s[a],Array.isArray(l)?l:l?[l]:[])}}}function jJ(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ds(t,0,0,r)}function zO(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ys(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jr=ua(/[A-Za-z]/),Er=ua(/[\dA-Za-z]/),FJ=ua(/[#-'*+\--9=?A-Z^-~]/);function Ag(t){return t!==null&&(t<32||t===127)}const I_=ua(/\d/),BJ=ua(/[\dA-Fa-f]/),LJ=ua(/[!-/:-@[-`{-~]/);function dt(t){return t!==null&&t<-2}function xn(t){return t!==null&&(t<0||t===32)}function Bt(t){return t===-2||t===-1||t===32}const bm=ua(new RegExp("\\p{P}|\\p{S}","u")),pl=ua(/\s/);function ua(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function yu(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let a="";if(i===37&&Er(t.charCodeAt(n+1))&&Er(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=t.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),s=1):a=""}else a=String.fromCharCode(i);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function $t(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(u){return Bt(u)?(t.enter(n),l(u)):e(u)}function l(u){return Bt(u)&&i++<s?(t.consume(u),l):(t.exit(n),e(u))}}const UJ={tokenize:zJ};function zJ(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),$t(t,e,"linePrefix")}function s(l){return t.enter("paragraph"),i(l)}function i(l){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return dt(l)?(t.consume(l),t.exit("chunkText"),i):(t.consume(l),a)}}const VJ={tokenize:$J},I3={tokenize:HJ};function $J(t){const e=this,n=[];let r=0,s,i,a;return l;function l(k){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,u,h)(k)}return h(k)}function u(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&M();const P=e.events.length;let L=P,O;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){O=e.events[L][1].end;break}I(r);let H=P;for(;H<e.events.length;)e.events[H][1].end={...O},H++;return ds(e.events,L+1,0,e.events.slice(P)),e.events.length=H,h(k)}return l(k)}function h(k){if(r===n.length){if(!s)return b(k);if(s.currentConstruct&&s.currentConstruct.concrete)return R(k);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(I3,d,g)(k)}function d(k){return s&&M(),I(r),b(k)}function g(k){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,R(k)}function b(k){return e.containerState={},t.attempt(I3,w,R)(k)}function w(k){return r++,n.push([e.currentConstruct,e.containerState]),b(k)}function R(k){if(k===null){s&&M(),I(0),t.consume(k);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),A(k)}function A(k){if(k===null){C(t.exit("chunkFlow"),!0),I(0),t.consume(k);return}return dt(k)?(t.consume(k),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(k),A)}function C(k,P){const L=e.sliceStream(k);if(P&&L.push(null),k.previous=i,i&&(i.next=k),i=k,s.defineSkip(k.start),s.write(L),e.parser.lazy[k.start.line]){let O=s.events.length;for(;O--;)if(s.events[O][1].start.offset<a&&(!s.events[O][1].end||s.events[O][1].end.offset>a))return;const H=e.events.length;let Y=H,J,K;for(;Y--;)if(e.events[Y][0]==="exit"&&e.events[Y][1].type==="chunkFlow"){if(J){K=e.events[Y][1].end;break}J=!0}for(I(r),O=H;O<e.events.length;)e.events[O][1].end={...K},O++;ds(e.events,Y+1,0,e.events.slice(H)),e.events.length=O}}function I(k){let P=n.length;for(;P-- >k;){const L=n[P];e.containerState=L[1],L[0].exit.call(e,t)}n.length=k}function M(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function HJ(t,e,n){return $t(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function iu(t){if(t===null||xn(t)||pl(t))return 1;if(bm(t))return 2}function xm(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const O_={name:"attention",resolveAll:WJ,tokenize:qJ};function WJ(t,e){let n=-1,r,s,i,a,l,u,h,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const g={...t[r][1].end},b={...t[n][1].start};O3(g,-u),O3(b,u),a={type:u>1?"strongSequence":"emphasisSequence",start:g,end:{...t[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},i={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:u>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=Ss(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=Ss(h,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",i,e]]),h=Ss(h,xm(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=Ss(h,[["exit",i,e],["enter",l,e],["exit",l,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,h=Ss(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,ds(t,r-1,n-r+3,h),n=r+h.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function qJ(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=iu(r);let i;return a;function a(u){return i=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===i)return t.consume(u),l;const h=t.exit("attentionSequence"),d=iu(u),g=!d||d===2&&s||n.includes(u),b=!s||s===2&&d||n.includes(r);return h._open=!!(i===42?g:g&&(s||!b)),h._close=!!(i===42?b:b&&(d||!g)),e(u)}}function O3(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const XJ={name:"autolink",tokenize:YJ};function YJ(t,e,n){let r=0;return s;function s(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(w){return jr(w)?(t.consume(w),a):w===64?n(w):h(w)}function a(w){return w===43||w===45||w===46||Er(w)?(r=1,l(w)):h(w)}function l(w){return w===58?(t.consume(w),r=0,u):(w===43||w===45||w===46||Er(w))&&r++<32?(t.consume(w),l):(r=0,h(w))}function u(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):w===null||w===32||w===60||Ag(w)?n(w):(t.consume(w),u)}function h(w){return w===64?(t.consume(w),d):FJ(w)?(t.consume(w),h):n(w)}function d(w){return Er(w)?g(w):n(w)}function g(w){return w===46?(t.consume(w),r=0,d):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):b(w)}function b(w){if((w===45||Er(w))&&r++<63){const R=w===45?b:g;return t.consume(w),R}return n(w)}}const Nh={partial:!0,tokenize:KJ};function KJ(t,e,n){return r;function r(i){return Bt(i)?$t(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||dt(i)?e(i):n(i)}}const VO={continuation:{tokenize:QJ},exit:GJ,name:"blockQuote",tokenize:ZJ};function ZJ(t,e,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),i}return n(a)}function i(a){return Bt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function QJ(t,e,n){const r=this;return s;function s(a){return Bt(a)?$t(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return t.attempt(VO,e,n)(a)}}function GJ(t){t.exit("blockQuote")}const $O={name:"characterEscape",tokenize:JJ};function JJ(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return LJ(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const HO={name:"characterReference",tokenize:eee};function eee(t,e,n){const r=this;let s=0,i,a;return l;function l(g){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),u}function u(g){return g===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(g),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,a=Er,d(g))}function h(g){return g===88||g===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(g),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,a=BJ,d):(t.enter("characterReferenceValue"),i=7,a=I_,d(g))}function d(g){if(g===59&&s){const b=t.exit("characterReferenceValue");return a===Er&&!hw(r.sliceSerialize(b))?n(g):(t.enter("characterReferenceMarker"),t.consume(g),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(g)&&s++<i?(t.consume(g),d):n(g)}}const P3={partial:!0,tokenize:nee},D3={concrete:!0,name:"codeFenced",tokenize:tee};function tee(t,e,n){const r=this,s={partial:!0,tokenize:L};let i=0,a=0,l;return u;function u(O){return h(O)}function h(O){const H=r.events[r.events.length-1];return i=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,l=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(O)}function d(O){return O===l?(a++,t.consume(O),d):a<3?n(O):(t.exit("codeFencedFenceSequence"),Bt(O)?$t(t,g,"whitespace")(O):g(O))}function g(O){return O===null||dt(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(P3,A,P)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(O))}function b(O){return O===null||dt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),g(O)):Bt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),$t(t,w,"whitespace")(O)):O===96&&O===l?n(O):(t.consume(O),b)}function w(O){return O===null||dt(O)?g(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),R(O))}function R(O){return O===null||dt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),g(O)):O===96&&O===l?n(O):(t.consume(O),R)}function A(O){return t.attempt(s,P,C)(O)}function C(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),I}function I(O){return i>0&&Bt(O)?$t(t,M,"linePrefix",i+1)(O):M(O)}function M(O){return O===null||dt(O)?t.check(P3,A,P)(O):(t.enter("codeFlowValue"),k(O))}function k(O){return O===null||dt(O)?(t.exit("codeFlowValue"),M(O)):(t.consume(O),k)}function P(O){return t.exit("codeFenced"),e(O)}function L(O,H,Y){let J=0;return K;function K(Re){return O.enter("lineEnding"),O.consume(Re),O.exit("lineEnding"),Z}function Z(Re){return O.enter("codeFencedFence"),Bt(Re)?$t(O,ae,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Re):ae(Re)}function ae(Re){return Re===l?(O.enter("codeFencedFenceSequence"),_e(Re)):Y(Re)}function _e(Re){return Re===l?(J++,O.consume(Re),_e):J>=a?(O.exit("codeFencedFenceSequence"),Bt(Re)?$t(O,oe,"whitespace")(Re):oe(Re)):Y(Re)}function oe(Re){return Re===null||dt(Re)?(O.exit("codeFencedFence"),H(Re)):Y(Re)}}}function nee(t,e,n){const r=this;return s;function s(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Bx={name:"codeIndented",tokenize:see},ree={partial:!0,tokenize:iee};function see(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),$t(t,i,"linePrefix",5)(h)}function i(h){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(h):n(h)}function a(h){return h===null?u(h):dt(h)?t.attempt(ree,a,u)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||dt(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),l)}function u(h){return t.exit("codeIndented"),e(h)}}function iee(t,e,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):dt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):$t(t,i,"linePrefix",5)(a)}function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):dt(a)?s(a):n(a)}}const oee={name:"codeText",previous:lee,resolve:aee,tokenize:cee};function aee(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function lee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cee(t,e,n){let r=0,s,i;return a;function a(g){return t.enter("codeText"),t.enter("codeTextSequence"),l(g)}function l(g){return g===96?(t.consume(g),r++,l):(t.exit("codeTextSequence"),u(g))}function u(g){return g===null?n(g):g===32?(t.enter("space"),t.consume(g),t.exit("space"),u):g===96?(i=t.enter("codeTextSequence"),s=0,d(g)):dt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(g))}function h(g){return g===null||g===32||g===96||dt(g)?(t.exit("codeTextData"),u(g)):(t.consume(g),h)}function d(g){return g===96?(t.consume(g),s++,d):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(g)):(i.type="codeTextData",h(g))}}class uee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Ef(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ef(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ef(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ef(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ef(this.left,n.reverse())}}}function Ef(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function WO(t){const e={};let n=-1,r,s,i,a,l,u,h;const d=new uee(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,fee(d,n)),n=e[n],h=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=d.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return ds(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function fee(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,u=[],h={};let d,g,b=-1,w=n,R=0,A=0;const C=[A];for(;w;){for(;t.get(++s)[1]!==w;);i.push(s),w._tokenizer||(d=r.sliceStream(w),w.next||d.push(null),g&&a.defineSkip(w.start),w._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),w._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),g=w,w=w.next}for(w=n;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(A=b+1,C.push(A),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(a.events=[],w?(w._tokenizer=void 0,w.previous=void 0):C.pop(),b=C.length;b--;){const I=l.slice(C[b],C[b+1]),M=i.pop();u.push([M,M+I.length-1]),t.splice(M,2,I)}for(u.reverse(),b=-1;++b<u.length;)h[R+u[b][0]]=R+u[b][1],R+=u[b][1]-u[b][0]-1;return h}const hee={resolve:pee,tokenize:gee},dee={partial:!0,tokenize:mee};function pee(t){return WO(t),t}function gee(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?i(l):dt(l)?t.check(dee,a,i)(l):(t.consume(l),s)}function i(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function mee(t,e,n){const r=this;return s;function s(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),$t(t,i,"linePrefix")}function i(a){if(a===null||dt(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function qO(t,e,n,r,s,i,a,l,u){const h=u||Number.POSITIVE_INFINITY;let d=0;return g;function g(I){return I===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(I),t.exit(i),b):I===null||I===32||I===41||Ag(I)?n(I):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),A(I))}function b(I){return I===62?(t.enter(i),t.consume(I),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),w(I))}function w(I){return I===62?(t.exit("chunkString"),t.exit(l),b(I)):I===null||I===60||dt(I)?n(I):(t.consume(I),I===92?R:w)}function R(I){return I===60||I===62||I===92?(t.consume(I),w):w(I)}function A(I){return!d&&(I===null||I===41||xn(I))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(I)):d<h&&I===40?(t.consume(I),d++,A):I===41?(t.consume(I),d--,A):I===null||I===32||I===40||Ag(I)?n(I):(t.consume(I),I===92?C:A)}function C(I){return I===40||I===41||I===92?(t.consume(I),A):A(I)}}function XO(t,e,n,r,s,i){const a=this;let l=0,u;return h;function h(w){return t.enter(r),t.enter(s),t.consume(w),t.exit(s),t.enter(i),d}function d(w){return l>999||w===null||w===91||w===93&&!u||w===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(w):w===93?(t.exit(i),t.enter(s),t.consume(w),t.exit(s),t.exit(r),e):dt(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===null||w===91||w===93||dt(w)||l++>999?(t.exit("chunkString"),d(w)):(t.consume(w),u||(u=!Bt(w)),w===92?b:g)}function b(w){return w===91||w===92||w===93?(t.consume(w),l++,g):g(w)}}function YO(t,e,n,r,s,i){let a;return l;function l(b){return b===34||b===39||b===40?(t.enter(r),t.enter(s),t.consume(b),t.exit(s),a=b===40?41:b,u):n(b)}function u(b){return b===a?(t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):(t.enter(i),h(b))}function h(b){return b===a?(t.exit(i),u(a)):b===null?n(b):dt(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),$t(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(b))}function d(b){return b===a||b===null||dt(b)?(t.exit("chunkString"),h(b)):(t.consume(b),b===92?g:d)}function g(b){return b===a||b===92?(t.consume(b),d):d(b)}}function qf(t,e){let n;return r;function r(s){return dt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Bt(s)?$t(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const yee={name:"definition",tokenize:xee},bee={partial:!0,tokenize:vee};function xee(t,e,n){const r=this;let s;return i;function i(w){return t.enter("definition"),a(w)}function a(w){return XO.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function l(w){return s=Ys(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),u):n(w)}function u(w){return xn(w)?qf(t,h)(w):h(w)}function h(w){return qO(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function d(w){return t.attempt(bee,g,g)(w)}function g(w){return Bt(w)?$t(t,b,"whitespace")(w):b(w)}function b(w){return w===null||dt(w)?(t.exit("definition"),r.parser.defined.push(s),e(w)):n(w)}}function vee(t,e,n){return r;function r(l){return xn(l)?qf(t,s)(l):n(l)}function s(l){return YO(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return Bt(l)?$t(t,a,"whitespace")(l):a(l)}function a(l){return l===null||dt(l)?e(l):n(l)}}const _ee={name:"hardBreakEscape",tokenize:wee};function wee(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return dt(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const See={name:"headingAtx",resolve:Tee,tokenize:Eee};function Tee(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ds(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function Eee(t,e,n){let r=0;return s;function s(d){return t.enter("atxHeading"),i(d)}function i(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(t.consume(d),a):d===null||xn(d)?(t.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(t.enter("atxHeadingSequence"),u(d)):d===null||dt(d)?(t.exit("atxHeading"),e(d)):Bt(d)?$t(t,l,"whitespace")(d):(t.enter("atxHeadingText"),h(d))}function u(d){return d===35?(t.consume(d),u):(t.exit("atxHeadingSequence"),l(d))}function h(d){return d===null||d===35||xn(d)?(t.exit("atxHeadingText"),l(d)):(t.consume(d),h)}}const Aee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],j3=["pre","script","style","textarea"],Ree={concrete:!0,name:"htmlFlow",resolveTo:Nee,tokenize:Mee},Cee={partial:!0,tokenize:Oee},kee={partial:!0,tokenize:Iee};function Nee(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Mee(t,e,n){const r=this;let s,i,a,l,u;return h;function h(F){return d(F)}function d(F){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(F),g}function g(F){return F===33?(t.consume(F),b):F===47?(t.consume(F),i=!0,A):F===63?(t.consume(F),s=3,r.interrupt?e:D):jr(F)?(t.consume(F),a=String.fromCharCode(F),C):n(F)}function b(F){return F===45?(t.consume(F),s=2,w):F===91?(t.consume(F),s=5,l=0,R):jr(F)?(t.consume(F),s=4,r.interrupt?e:D):n(F)}function w(F){return F===45?(t.consume(F),r.interrupt?e:D):n(F)}function R(F){const ge="CDATA[";return F===ge.charCodeAt(l++)?(t.consume(F),l===ge.length?r.interrupt?e:ae:R):n(F)}function A(F){return jr(F)?(t.consume(F),a=String.fromCharCode(F),C):n(F)}function C(F){if(F===null||F===47||F===62||xn(F)){const ge=F===47,ee=a.toLowerCase();return!ge&&!i&&j3.includes(ee)?(s=1,r.interrupt?e(F):ae(F)):Aee.includes(a.toLowerCase())?(s=6,ge?(t.consume(F),I):r.interrupt?e(F):ae(F)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):i?M(F):k(F))}return F===45||Er(F)?(t.consume(F),a+=String.fromCharCode(F),C):n(F)}function I(F){return F===62?(t.consume(F),r.interrupt?e:ae):n(F)}function M(F){return Bt(F)?(t.consume(F),M):K(F)}function k(F){return F===47?(t.consume(F),K):F===58||F===95||jr(F)?(t.consume(F),P):Bt(F)?(t.consume(F),k):K(F)}function P(F){return F===45||F===46||F===58||F===95||Er(F)?(t.consume(F),P):L(F)}function L(F){return F===61?(t.consume(F),O):Bt(F)?(t.consume(F),L):k(F)}function O(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),u=F,H):Bt(F)?(t.consume(F),O):Y(F)}function H(F){return F===u?(t.consume(F),u=null,J):F===null||dt(F)?n(F):(t.consume(F),H)}function Y(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||xn(F)?L(F):(t.consume(F),Y)}function J(F){return F===47||F===62||Bt(F)?k(F):n(F)}function K(F){return F===62?(t.consume(F),Z):n(F)}function Z(F){return F===null||dt(F)?ae(F):Bt(F)?(t.consume(F),Z):n(F)}function ae(F){return F===45&&s===2?(t.consume(F),ie):F===60&&s===1?(t.consume(F),Ae):F===62&&s===4?(t.consume(F),te):F===63&&s===3?(t.consume(F),D):F===93&&s===5?(t.consume(F),$e):dt(F)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(Cee,G,_e)(F)):F===null||dt(F)?(t.exit("htmlFlowData"),_e(F)):(t.consume(F),ae)}function _e(F){return t.check(kee,oe,G)(F)}function oe(F){return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),Re}function Re(F){return F===null||dt(F)?_e(F):(t.enter("htmlFlowData"),ae(F))}function ie(F){return F===45?(t.consume(F),D):ae(F)}function Ae(F){return F===47?(t.consume(F),a="",he):ae(F)}function he(F){if(F===62){const ge=a.toLowerCase();return j3.includes(ge)?(t.consume(F),te):ae(F)}return jr(F)&&a.length<8?(t.consume(F),a+=String.fromCharCode(F),he):ae(F)}function $e(F){return F===93?(t.consume(F),D):ae(F)}function D(F){return F===62?(t.consume(F),te):F===45&&s===2?(t.consume(F),D):ae(F)}function te(F){return F===null||dt(F)?(t.exit("htmlFlowData"),G(F)):(t.consume(F),te)}function G(F){return t.exit("htmlFlow"),e(F)}}function Iee(t,e,n){const r=this;return s;function s(a){return dt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function Oee(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Nh,e,n)}}const Pee={name:"htmlText",tokenize:Dee};function Dee(t,e,n){const r=this;let s,i,a;return l;function l(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),u}function u(D){return D===33?(t.consume(D),h):D===47?(t.consume(D),L):D===63?(t.consume(D),k):jr(D)?(t.consume(D),Y):n(D)}function h(D){return D===45?(t.consume(D),d):D===91?(t.consume(D),i=0,R):jr(D)?(t.consume(D),M):n(D)}function d(D){return D===45?(t.consume(D),w):n(D)}function g(D){return D===null?n(D):D===45?(t.consume(D),b):dt(D)?(a=g,Ae(D)):(t.consume(D),g)}function b(D){return D===45?(t.consume(D),w):g(D)}function w(D){return D===62?ie(D):D===45?b(D):g(D)}function R(D){const te="CDATA[";return D===te.charCodeAt(i++)?(t.consume(D),i===te.length?A:R):n(D)}function A(D){return D===null?n(D):D===93?(t.consume(D),C):dt(D)?(a=A,Ae(D)):(t.consume(D),A)}function C(D){return D===93?(t.consume(D),I):A(D)}function I(D){return D===62?ie(D):D===93?(t.consume(D),I):A(D)}function M(D){return D===null||D===62?ie(D):dt(D)?(a=M,Ae(D)):(t.consume(D),M)}function k(D){return D===null?n(D):D===63?(t.consume(D),P):dt(D)?(a=k,Ae(D)):(t.consume(D),k)}function P(D){return D===62?ie(D):k(D)}function L(D){return jr(D)?(t.consume(D),O):n(D)}function O(D){return D===45||Er(D)?(t.consume(D),O):H(D)}function H(D){return dt(D)?(a=H,Ae(D)):Bt(D)?(t.consume(D),H):ie(D)}function Y(D){return D===45||Er(D)?(t.consume(D),Y):D===47||D===62||xn(D)?J(D):n(D)}function J(D){return D===47?(t.consume(D),ie):D===58||D===95||jr(D)?(t.consume(D),K):dt(D)?(a=J,Ae(D)):Bt(D)?(t.consume(D),J):ie(D)}function K(D){return D===45||D===46||D===58||D===95||Er(D)?(t.consume(D),K):Z(D)}function Z(D){return D===61?(t.consume(D),ae):dt(D)?(a=Z,Ae(D)):Bt(D)?(t.consume(D),Z):J(D)}function ae(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),s=D,_e):dt(D)?(a=ae,Ae(D)):Bt(D)?(t.consume(D),ae):(t.consume(D),oe)}function _e(D){return D===s?(t.consume(D),s=void 0,Re):D===null?n(D):dt(D)?(a=_e,Ae(D)):(t.consume(D),_e)}function oe(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||xn(D)?J(D):(t.consume(D),oe)}function Re(D){return D===47||D===62||xn(D)?J(D):n(D)}function ie(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function Ae(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),he}function he(D){return Bt(D)?$t(t,$e,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):$e(D)}function $e(D){return t.enter("htmlTextData"),a(D)}}const dw={name:"labelEnd",resolveAll:Lee,resolveTo:Uee,tokenize:zee},jee={tokenize:Vee},Fee={tokenize:$ee},Bee={tokenize:Hee};function Lee(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&ds(t,0,t.length,n),t}function Uee(t,e){let n=t.length,r=0,s,i,a,l;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const u={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",u,e],["enter",h,e]],l=Ss(l,t.slice(i+1,i+r+3)),l=Ss(l,[["enter",d,e]]),l=Ss(l,xm(e.parser.constructs.insideSpan.null,t.slice(i+r+4,a-3),e)),l=Ss(l,[["exit",d,e],t[a-2],t[a-1],["exit",h,e]]),l=Ss(l,t.slice(a+1)),l=Ss(l,[["exit",u,e]]),ds(t,i,t.length,l),t}function zee(t,e,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return l;function l(b){return i?i._inactive?g(b):(a=r.parser.defined.includes(Ys(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),u):n(b)}function u(b){return b===40?t.attempt(jee,d,a?d:g)(b):b===91?t.attempt(Fee,d,a?h:g)(b):a?d(b):g(b)}function h(b){return t.attempt(Bee,d,g)(b)}function d(b){return e(b)}function g(b){return i._balanced=!0,n(b)}}function Vee(t,e,n){return r;function r(g){return t.enter("resource"),t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),s}function s(g){return xn(g)?qf(t,i)(g):i(g)}function i(g){return g===41?d(g):qO(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function a(g){return xn(g)?qf(t,u)(g):d(g)}function l(g){return n(g)}function u(g){return g===34||g===39||g===40?YO(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):d(g)}function h(g){return xn(g)?qf(t,d)(g):d(g)}function d(g){return g===41?(t.enter("resourceMarker"),t.consume(g),t.exit("resourceMarker"),t.exit("resource"),e):n(g)}}function $ee(t,e,n){const r=this;return s;function s(l){return XO.call(r,t,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return r.parser.defined.includes(Ys(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function Hee(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const Wee={name:"labelStartImage",resolveAll:dw.resolveAll,tokenize:qee};function qee(t,e,n){const r=this;return s;function s(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),i}function i(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Xee={name:"labelStartLink",resolveAll:dw.resolveAll,tokenize:Yee};function Yee(t,e,n){const r=this;return s;function s(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Lx={name:"lineEnding",tokenize:Kee};function Kee(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),$t(t,e,"linePrefix")}}const jp={name:"thematicBreak",tokenize:Zee};function Zee(t,e,n){let r=0,s;return i;function i(h){return t.enter("thematicBreak"),a(h)}function a(h){return s=h,l(h)}function l(h){return h===s?(t.enter("thematicBreakSequence"),u(h)):r>=3&&(h===null||dt(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===s?(t.consume(h),r++,u):(t.exit("thematicBreakSequence"),Bt(h)?$t(t,l,"whitespace")(h):l(h))}}const Hr={continuation:{tokenize:ete},exit:nte,name:"list",tokenize:Jee},Qee={partial:!0,tokenize:rte},Gee={partial:!0,tokenize:tte};function Jee(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(w){const R=r.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(R==="listUnordered"?!r.containerState.marker||w===r.containerState.marker:I_(w)){if(r.containerState.type||(r.containerState.type=R,t.enter(R,{_container:!0})),R==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(jp,n,h)(w):h(w);if(!r.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(w)}return n(w)}function u(w){return I_(w)&&++a<10?(t.consume(w),u):(!r.interrupt||a<2)&&(r.containerState.marker?w===r.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),h(w)):n(w)}function h(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||w,t.check(Nh,r.interrupt?n:d,t.attempt(Qee,b,g))}function d(w){return r.containerState.initialBlankLine=!0,i++,b(w)}function g(w){return Bt(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),b):n(w)}function b(w){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(w)}}function ete(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Nh,s,i);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$t(t,e,"listItemIndent",r.containerState.size+1)(l)}function i(l){return r.containerState.furtherBlankLines||!Bt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Gee,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,$t(t,t.attempt(Hr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function tte(t,e,n){const r=this;return $t(t,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(i):n(i)}}function nte(t){t.exit(this.containerState.type)}function rte(t,e,n){const r=this;return $t(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!Bt(i)&&a&&a[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const F3={name:"setextUnderline",resolveTo:ste,tokenize:ite};function ste(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",a,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function ite(t,e,n){const r=this;let s;return i;function i(h){let d=r.events.length,g;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){g=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(t.enter("setextHeadingLine"),s=h,a(h)):n(h)}function a(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===s?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),Bt(h)?$t(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||dt(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const ote={tokenize:ate};function ate(t){const e=this,n=t.attempt(Nh,r,t.attempt(this.parser.constructs.flowInitial,s,$t(t,t.attempt(this.parser.constructs.flow,s,t.attempt(hee,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const lte={resolveAll:ZO()},cte=KO("string"),ute=KO("text");function KO(t){return{resolveAll:ZO(t==="text"?fte:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,a,l);return a;function a(d){return h(d)?i(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return h(d)?(n.exit("data"),i(d)):(n.consume(d),u)}function h(d){if(d===null)return!0;const g=s[d];let b=-1;if(g)for(;++b<g.length;){const w=g[b];if(!w.previous||w.previous.call(r,r.previous))return!0}return!1}}}function ZO(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function fte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,a=-1,l=0,u;for(;i--;){const h=s[i];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(h===-2)u=!0,l++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const hte={42:Hr,43:Hr,45:Hr,48:Hr,49:Hr,50:Hr,51:Hr,52:Hr,53:Hr,54:Hr,55:Hr,56:Hr,57:Hr,62:VO},dte={91:yee},pte={[-2]:Bx,[-1]:Bx,32:Bx},gte={35:See,42:jp,45:[F3,jp],60:Ree,61:F3,95:jp,96:D3,126:D3},mte={38:HO,92:$O},yte={[-5]:Lx,[-4]:Lx,[-3]:Lx,33:Wee,38:HO,42:O_,60:[XJ,Pee],91:Xee,92:[_ee,$O],93:dw,95:O_,96:oee},bte={null:[O_,lte]},xte={null:[42,95]},vte={null:[]},_te=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xte,contentInitial:dte,disable:vte,document:hte,flow:gte,flowInitial:pte,insideSpan:bte,string:mte,text:yte},Symbol.toStringTag,{value:"Module"}));function wte(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],l=[];const u={attempt:H(L),check:H(O),consume:M,enter:k,exit:P,interrupt:H(O,{interrupt:!0})},h={code:null,containerState:{},defineSkip:A,events:[],now:R,parser:t,previous:null,sliceSerialize:b,sliceStream:w,write:g};let d=e.tokenize.call(h,u);return e.resolveAll&&i.push(e),h;function g(Z){return a=Ss(a,Z),C(),a[a.length-1]!==null?[]:(Y(e,0),h.events=xm(i,h.events,h),h.events)}function b(Z,ae){return Tte(w(Z),ae)}function w(Z){return Ste(a,Z)}function R(){const{_bufferIndex:Z,_index:ae,line:_e,column:oe,offset:Re}=r;return{_bufferIndex:Z,_index:ae,line:_e,column:oe,offset:Re}}function A(Z){s[Z.line]=Z.column,K()}function C(){let Z;for(;r._index<a.length;){const ae=a[r._index];if(typeof ae=="string")for(Z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Z&&r._bufferIndex<ae.length;)I(ae.charCodeAt(r._bufferIndex));else I(ae)}}function I(Z){d=d(Z)}function M(Z){dt(Z)?(r.line++,r.column=1,r.offset+=Z===-3?2:1,K()):Z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=Z}function k(Z,ae){const _e=ae||{};return _e.type=Z,_e.start=R(),h.events.push(["enter",_e,h]),l.push(_e),_e}function P(Z){const ae=l.pop();return ae.end=R(),h.events.push(["exit",ae,h]),ae}function L(Z,ae){Y(Z,ae.from)}function O(Z,ae){ae.restore()}function H(Z,ae){return _e;function _e(oe,Re,ie){let Ae,he,$e,D;return Array.isArray(oe)?G(oe):"tokenize"in oe?G([oe]):te(oe);function te(we){return ue;function ue(ce){const Me=ce!==null&&we[ce],ze=ce!==null&&we.null,Ue=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return G(Ue)(ce)}}function G(we){return Ae=we,he=0,we.length===0?ie:F(we[he])}function F(we){return ue;function ue(ce){return D=J(),$e=we,we.partial||(h.currentConstruct=we),we.name&&h.parser.constructs.disable.null.includes(we.name)?ee():we.tokenize.call(ae?Object.assign(Object.create(h),ae):h,u,ge,ee)(ce)}}function ge(we){return Z($e,D),Re}function ee(we){return D.restore(),++he<Ae.length?F(Ae[he]):ie}}}function Y(Z,ae){Z.resolveAll&&!i.includes(Z)&&i.push(Z),Z.resolve&&ds(h.events,ae,h.events.length-ae,Z.resolve(h.events.slice(ae),h)),Z.resolveTo&&(h.events=Z.resolveTo(h.events,h))}function J(){const Z=R(),ae=h.previous,_e=h.currentConstruct,oe=h.events.length,Re=Array.from(l);return{from:oe,restore:ie};function ie(){r=Z,h.previous=ae,h.currentConstruct=_e,h.events.length=oe,l=Re,K()}}function K(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Ste(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let a;if(n===s)a=[t[n].slice(r,i)];else{if(a=t.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}i>0&&a.push(t[s].slice(0,i))}return a}function Tte(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function Ete(t){const r={constructs:UO([_te,...(t||{}).extensions||[]]),content:s(UJ),defined:[],document:s(VJ),flow:s(ote),lazy:{},string:s(cte),text:s(ute)};return r;function s(i){return a;function a(l){return wte(r,i,l)}}}function Ate(t){for(;!WO(t););return t}const B3=/[\0\t\n\r]/g;function Rte(){let t=1,e="",n=!0,r;return s;function s(i,a,l){const u=[];let h,d,g,b,w;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),g=0,e="",n&&(i.charCodeAt(0)===65279&&g++,n=void 0);g<i.length;){if(B3.lastIndex=g,h=B3.exec(i),b=h&&h.index!==void 0?h.index:i.length,w=i.charCodeAt(b),!h){e=i.slice(g);break}if(w===10&&g===b&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),g<b&&(u.push(i.slice(g,b)),t+=b-g),w){case 0:{u.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,u.push(-2);t++<d;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}g=b+1}return l&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const Cte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function kte(t){return t.replace(Cte,Nte)}function Nte(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return zO(n.slice(i?2:1),i?16:10)}return hw(n)||t}const QO={}.hasOwnProperty;function Mte(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Ite(n)(Ate(Ete(n).document().write(Rte()(t,e,!0))))}function Ite(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(en),autolinkProtocol:J,autolinkEmail:J,atxHeading:i(kt),blockQuote:i(ze),characterEscape:J,characterReference:J,codeFenced:i(Ue),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(Ue,a),codeText:i(Ke,a),codeTextData:J,data:J,codeFlowValue:J,definition:i(Ze),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(ot),hardBreakEscape:i(Et),hardBreakTrailing:i(Et),htmlFlow:i(Ot,a),htmlFlowData:J,htmlText:i(Ot,a),htmlTextData:J,image:i(Ht),label:a,link:i(en),listItem:i(Kn),listItemValue:b,listOrdered:i(Is,g),listUnordered:i(Is),paragraph:i(mr),reference:F,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(kt),strong:i(Js),thematicBreak:i(bu)},exit:{atxHeading:u(),atxHeadingSequence:L,autolink:u(),autolinkEmail:Me,autolinkProtocol:ce,blockQuote:u(),characterEscapeValue:K,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:we,characterReference:ue,codeFenced:u(C),codeFencedFence:A,codeFencedFenceInfo:w,codeFencedFenceMeta:R,codeFlowValue:K,codeIndented:u(I),codeText:u(Re),codeTextData:K,data:K,definition:u(),definitionDestinationString:P,definitionLabelString:M,definitionTitleString:k,emphasis:u(),hardBreakEscape:u(ae),hardBreakTrailing:u(ae),htmlFlow:u(_e),htmlFlowData:K,htmlText:u(oe),htmlTextData:K,image:u(Ae),label:$e,labelText:he,lineEnding:Z,link:u(ie),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ge,resourceDestinationString:D,resourceTitleString:te,resource:G,setextHeading:u(Y),setextHeadingLineSequence:H,setextHeadingText:O,strong:u(),thematicBreak:u()}};GO(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Oe){let He={type:"root",children:[]};const ft={stack:[He],tokenStack:[],config:e,enter:l,exit:h,buffer:a,resume:d,data:n},pt=[];let Zt=-1;for(;++Zt<Oe.length;)if(Oe[Zt][1].type==="listOrdered"||Oe[Zt][1].type==="listUnordered")if(Oe[Zt][0]==="enter")pt.push(Zt);else{const Rr=pt.pop();Zt=s(Oe,Rr,Zt)}for(Zt=-1;++Zt<Oe.length;){const Rr=e[Oe[Zt][0]];QO.call(Rr,Oe[Zt][1].type)&&Rr[Oe[Zt][1].type].call(Object.assign({sliceSerialize:Oe[Zt][2].sliceSerialize},ft),Oe[Zt][1])}if(ft.tokenStack.length>0){const Rr=ft.tokenStack[ft.tokenStack.length-1];(Rr[1]||L3).call(ft,void 0,Rr[0])}for(He.position={start:Co(Oe.length>0?Oe[0][1].start:{line:1,column:1,offset:0}),end:Co(Oe.length>0?Oe[Oe.length-2][1].end:{line:1,column:1,offset:0})},Zt=-1;++Zt<e.transforms.length;)He=e.transforms[Zt](He)||He;return He}function s(Oe,He,ft){let pt=He-1,Zt=-1,Rr=!1,Os,yr,Yr,Cr;for(;++pt<=ft;){const zn=Oe[pt];switch(zn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zn[0]==="enter"?Zt++:Zt--,Cr=void 0;break}case"lineEndingBlank":{zn[0]==="enter"&&(Os&&!Cr&&!Zt&&!Yr&&(Yr=pt),Cr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Cr=void 0}if(!Zt&&zn[0]==="enter"&&zn[1].type==="listItemPrefix"||Zt===-1&&zn[0]==="exit"&&(zn[1].type==="listUnordered"||zn[1].type==="listOrdered")){if(Os){let Br=pt;for(yr=void 0;Br--;){const Kr=Oe[Br];if(Kr[1].type==="lineEnding"||Kr[1].type==="lineEndingBlank"){if(Kr[0]==="exit")continue;yr&&(Oe[yr][1].type="lineEndingBlank",Rr=!0),Kr[1].type="lineEnding",yr=Br}else if(!(Kr[1].type==="linePrefix"||Kr[1].type==="blockQuotePrefix"||Kr[1].type==="blockQuotePrefixWhitespace"||Kr[1].type==="blockQuoteMarker"||Kr[1].type==="listItemIndent"))break}Yr&&(!yr||Yr<yr)&&(Os._spread=!0),Os.end=Object.assign({},yr?Oe[yr][1].start:zn[1].end),Oe.splice(yr||pt,0,["exit",Os,zn[2]]),pt++,ft++}if(zn[1].type==="listItemPrefix"){const Br={type:"listItem",_spread:!1,start:Object.assign({},zn[1].start),end:void 0};Os=Br,Oe.splice(pt,0,["enter",Br,zn[2]]),pt++,ft++,Yr=void 0,Cr=!0}}}return Oe[He][1]._spread=Rr,ft}function i(Oe,He){return ft;function ft(pt){l.call(this,Oe(pt),pt),He&&He.call(this,pt)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(Oe,He,ft){this.stack[this.stack.length-1].children.push(Oe),this.stack.push(Oe),this.tokenStack.push([He,ft||void 0]),Oe.position={start:Co(He.start),end:void 0}}function u(Oe){return He;function He(ft){Oe&&Oe.call(this,ft),h.call(this,ft)}}function h(Oe,He){const ft=this.stack.pop(),pt=this.tokenStack.pop();if(pt)pt[0].type!==Oe.type&&(He?He.call(this,Oe,pt[0]):(pt[1]||L3).call(this,Oe,pt[0]));else throw new Error("Cannot close `"+Oe.type+"` ("+Wf({start:Oe.start,end:Oe.end})+"): its not open");ft.position.end=Co(Oe.end)}function d(){return fw(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(Oe){if(this.data.expectingFirstListItemValue){const He=this.stack[this.stack.length-2];He.start=Number.parseInt(this.sliceSerialize(Oe),10),this.data.expectingFirstListItemValue=void 0}}function w(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.lang=Oe}function R(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.meta=Oe}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.value=Oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function I(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.value=Oe.replace(/(\r?\n|\r)$/g,"")}function M(Oe){const He=this.resume(),ft=this.stack[this.stack.length-1];ft.label=He,ft.identifier=Ys(this.sliceSerialize(Oe)).toLowerCase()}function k(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.title=Oe}function P(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.url=Oe}function L(Oe){const He=this.stack[this.stack.length-1];if(!He.depth){const ft=this.sliceSerialize(Oe).length;He.depth=ft}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function H(Oe){const He=this.stack[this.stack.length-1];He.depth=this.sliceSerialize(Oe).codePointAt(0)===61?1:2}function Y(){this.data.setextHeadingSlurpLineEnding=void 0}function J(Oe){const ft=this.stack[this.stack.length-1].children;let pt=ft[ft.length-1];(!pt||pt.type!=="text")&&(pt=ei(),pt.position={start:Co(Oe.start),end:void 0},ft.push(pt)),this.stack.push(pt)}function K(Oe){const He=this.stack.pop();He.value+=this.sliceSerialize(Oe),He.position.end=Co(Oe.end)}function Z(Oe){const He=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ft=He.children[He.children.length-1];ft.position.end=Co(Oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(He.type)&&(J.call(this,Oe),K.call(this,Oe))}function ae(){this.data.atHardBreak=!0}function _e(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.value=Oe}function oe(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.value=Oe}function Re(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.value=Oe}function ie(){const Oe=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Oe.type+="Reference",Oe.referenceType=He,delete Oe.url,delete Oe.title}else delete Oe.identifier,delete Oe.label;this.data.referenceType=void 0}function Ae(){const Oe=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Oe.type+="Reference",Oe.referenceType=He,delete Oe.url,delete Oe.title}else delete Oe.identifier,delete Oe.label;this.data.referenceType=void 0}function he(Oe){const He=this.sliceSerialize(Oe),ft=this.stack[this.stack.length-2];ft.label=kte(He),ft.identifier=Ys(He).toLowerCase()}function $e(){const Oe=this.stack[this.stack.length-1],He=this.resume(),ft=this.stack[this.stack.length-1];if(this.data.inReference=!0,ft.type==="link"){const pt=Oe.children;ft.children=pt}else ft.alt=He}function D(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.url=Oe}function te(){const Oe=this.resume(),He=this.stack[this.stack.length-1];He.title=Oe}function G(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function ge(Oe){const He=this.resume(),ft=this.stack[this.stack.length-1];ft.label=He,ft.identifier=Ys(this.sliceSerialize(Oe)).toLowerCase(),this.data.referenceType="full"}function ee(Oe){this.data.characterReferenceType=Oe.type}function we(Oe){const He=this.sliceSerialize(Oe),ft=this.data.characterReferenceType;let pt;ft?(pt=zO(He,ft==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):pt=hw(He);const Zt=this.stack[this.stack.length-1];Zt.value+=pt}function ue(Oe){const He=this.stack.pop();He.position.end=Co(Oe.end)}function ce(Oe){K.call(this,Oe);const He=this.stack[this.stack.length-1];He.url=this.sliceSerialize(Oe)}function Me(Oe){K.call(this,Oe);const He=this.stack[this.stack.length-1];He.url="mailto:"+this.sliceSerialize(Oe)}function ze(){return{type:"blockquote",children:[]}}function Ue(){return{type:"code",lang:null,meta:null,value:""}}function Ke(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function kt(){return{type:"heading",depth:0,children:[]}}function Et(){return{type:"break"}}function Ot(){return{type:"html",value:""}}function Ht(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function Is(Oe){return{type:"list",ordered:Oe.type==="listOrdered",start:null,spread:Oe._spread,children:[]}}function Kn(Oe){return{type:"listItem",spread:Oe._spread,checked:null,children:[]}}function mr(){return{type:"paragraph",children:[]}}function Js(){return{type:"strong",children:[]}}function ei(){return{type:"text",value:""}}function bu(){return{type:"thematicBreak"}}}function Co(t){return{line:t.line,column:t.column,offset:t.offset}}function GO(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?GO(t,r):Ote(t,r)}}function Ote(t,e){let n;for(n in e)if(QO.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function L3(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Wf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Wf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Wf({start:e.start,end:e.end})+") is still open")}function Pte(t){const e=this;e.parser=n;function n(r){return Mte(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Dte(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function jte(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Fte(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function Bte(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Lte(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ute(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=yu(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let a,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=i+1,l+=1,t.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function zte(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Vte(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function JO(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function $te(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return JO(t,e);const s={src:yu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function Hte(t,e){const n={src:yu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Wte(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function qte(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return JO(t,e);const s={href:yu(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Xte(t,e){const n={href:yu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Yte(t,e,n){const r=t.all(e),s=n?Kte(n):eP(e),i={},a=[];if(typeof e.checked=="boolean"){const d=r[0];let g;d&&d.type==="element"&&d.tagName==="p"?g=d:(g={type:"element",tagName:"p",properties:{},children:[]},r.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:a};return t.patch(e,h),t.applyData(e,h)}function Kte(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=eP(n[r])}return e}function eP(t){const e=t.spread;return e??t.children.length>1}function Zte(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function Qte(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Gte(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Jte(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ene(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=aw(e.children[1]),u=OO(e.children[e.children.length-1]);l&&u&&(a.position={start:l,end:u}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function tne(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let u=-1;const h=[];for(;++u<l;){const g=e.children[u],b={},w=a?a[u]:void 0;w&&(b.align=w);let R={type:"element",tagName:i,properties:b,children:[]};g&&(R.children=t.all(g),t.patch(g,R),R=t.applyData(g,R)),h.push(R)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,d),t.applyData(e,d)}function nne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const U3=9,z3=32;function rne(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(V3(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(V3(e.slice(s),s>0,!1)),i.join("")}function V3(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===U3||i===z3;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===U3||i===z3;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function sne(t,e){const n={type:"text",value:rne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function ine(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const one={blockquote:Dte,break:jte,code:Fte,delete:Bte,emphasis:Lte,footnoteReference:Ute,heading:zte,html:Vte,imageReference:$te,image:Hte,inlineCode:Wte,linkReference:qte,link:Xte,listItem:Yte,list:Zte,paragraph:Qte,root:Gte,strong:Jte,table:ene,tableCell:nne,tableRow:tne,text:sne,thematicBreak:ine,toml:yp,yaml:yp,definition:yp,footnoteDefinition:yp};function yp(){}const tP=-1,vm=0,Xf=1,Rg=2,pw=3,gw=4,mw=5,yw=6,nP=7,rP=8,$3=typeof self=="object"?self:globalThis,ane=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,a]=e[s];switch(i){case vm:case tP:return n(a,s);case Xf:{const l=n([],s);for(const u of a)l.push(r(u));return l}case Rg:{const l=n({},s);for(const[u,h]of a)l[r(u)]=r(h);return l}case pw:return n(new Date(a),s);case gw:{const{source:l,flags:u}=a;return n(new RegExp(l,u),s)}case mw:{const l=n(new Map,s);for(const[u,h]of a)l.set(r(u),r(h));return l}case yw:{const l=n(new Set,s);for(const u of a)l.add(r(u));return l}case nP:{const{name:l,message:u}=a;return n(new $3[l](u),s)}case rP:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new $3[i](a),s)};return r},H3=t=>ane(new Map,t)(0),dc="",{toString:lne}={},{keys:cne}=Object,Af=t=>{const e=typeof t;if(e!=="object"||!t)return[vm,e];const n=lne.call(t).slice(8,-1);switch(n){case"Array":return[Xf,dc];case"Object":return[Rg,dc];case"Date":return[pw,dc];case"RegExp":return[gw,dc];case"Map":return[mw,dc];case"Set":return[yw,dc];case"DataView":return[Xf,n]}return n.includes("Array")?[Xf,n]:n.includes("Error")?[nP,n]:[Rg,n]},bp=([t,e])=>t===vm&&(e==="function"||e==="symbol"),une=(t,e,n,r)=>{const s=(a,l)=>{const u=r.push(a)-1;return n.set(l,u),u},i=a=>{if(n.has(a))return n.get(a);let[l,u]=Af(a);switch(l){case vm:{let d=a;switch(u){case"bigint":l=rP,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return s([tP],a)}return s([l,d],a)}case Xf:{if(u){let b=a;return u==="DataView"?b=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(b=new Uint8Array(a)),s([u,[...b]],a)}const d=[],g=s([l,d],a);for(const b of a)d.push(i(b));return g}case Rg:{if(u)switch(u){case"BigInt":return s([u,a.toString()],a);case"Boolean":case"Number":case"String":return s([u,a.valueOf()],a)}if(e&&"toJSON"in a)return i(a.toJSON());const d=[],g=s([l,d],a);for(const b of cne(a))(t||!bp(Af(a[b])))&&d.push([i(b),i(a[b])]);return g}case pw:return s([l,a.toISOString()],a);case gw:{const{source:d,flags:g}=a;return s([l,{source:d,flags:g}],a)}case mw:{const d=[],g=s([l,d],a);for(const[b,w]of a)(t||!(bp(Af(b))||bp(Af(w))))&&d.push([i(b),i(w)]);return g}case yw:{const d=[],g=s([l,d],a);for(const b of a)(t||!bp(Af(b)))&&d.push(i(b));return g}}const{message:h}=a;return s([l,{name:u,message:h}],a)};return i},W3=(t,{json:e,lossy:n}={})=>{const r=[];return une(!(e||n),!!e,new Map,r)(t),r},Cg=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?H3(W3(t,e)):structuredClone(t):(t,e)=>H3(W3(t,e));function fne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function hne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function dne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||fne,r=t.options.footnoteBackLabel||hne,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const d=t.all(h),g=String(h.identifier).toUpperCase(),b=yu(g.toLowerCase());let w=0;const R=[],A=t.footnoteCounts.get(g);for(;A!==void 0&&++w<=A;){R.length>0&&R.push({type:"text",value:" "});let M=typeof n=="string"?n:n(u,w);typeof M=="string"&&(M={type:"text",value:M}),R.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,w),className:["data-footnote-backref"]},children:Array.isArray(M)?M:[M]})}const C=d[d.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const M=C.children[C.children.length-1];M&&M.type==="text"?M.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...R)}else d.push(...R);const I={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(d,!0)};t.patch(h,I),l.push(I)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Cg(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const _m=function(t){if(t==null)return yne;if(typeof t=="function")return wm(t);if(typeof t=="object")return Array.isArray(t)?pne(t):gne(t);if(typeof t=="string")return mne(t);throw new Error("Expected function, string, or object as test")};function pne(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_m(t[n]);return wm(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function gne(t){const e=t;return wm(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function mne(t){return wm(e);function e(n){return n&&n.type===t}}function wm(t){return e;function e(n,r,s){return!!(bne(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function yne(){return!0}function bne(t){return t!==null&&typeof t=="object"&&"type"in t}const sP=[],xne=!0,P_=!1,vne="skip";function iP(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=_m(s),a=r?-1:1;l(t,void 0,[])();function l(u,h,d){const g=u&&typeof u=="object"?u:{};if(typeof g.type=="string"){const w=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(u.type+(w?"<"+w+">":""))+")"})}return b;function b(){let w=sP,R,A,C;if((!e||i(u,h,d[d.length-1]||void 0))&&(w=_ne(n(u,d)),w[0]===P_))return w;if("children"in u&&u.children){const I=u;if(I.children&&w[0]!==vne)for(A=(r?I.children.length:-1)+a,C=d.concat(I);A>-1&&A<I.children.length;){const M=I.children[A];if(R=l(M,A,C)(),R[0]===P_)return R;A=typeof R[1]=="number"?R[1]:A+a}}return w}}}function _ne(t){return Array.isArray(t)?t:typeof t=="number"?[xne,t]:t==null?sP:[t]}function bw(t,e,n,r){let s,i,a;typeof e=="function"&&typeof n!="function"?(i=void 0,a=e,s=n):(i=e,a=n,s=r),iP(t,i,l,s);function l(u,h){const d=h[h.length-1],g=d?d.children.indexOf(u):void 0;return a(u,g,d)}}const D_={}.hasOwnProperty,wne={};function Sne(t,e){const n=e||wne,r=new Map,s=new Map,i=new Map,a={...one,...n.handlers},l={all:h,applyData:Ene,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:u,options:n,patch:Tne,wrap:Rne};return bw(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const g=d.type==="definition"?r:s,b=String(d.identifier).toUpperCase();g.has(b)||g.set(b,d)}}),l;function u(d,g){const b=d.type,w=l.handlers[b];if(D_.call(l.handlers,b)&&w)return w(l,d,g);if(l.options.passThrough&&l.options.passThrough.includes(b)){if("children"in d){const{children:A,...C}=d,I=Cg(C);return I.children=l.all(d),I}return Cg(d)}return(l.options.unknownHandler||Ane)(l,d,g)}function h(d){const g=[];if("children"in d){const b=d.children;let w=-1;for(;++w<b.length;){const R=l.one(b[w],d);if(R){if(w&&b[w-1].type==="break"&&(!Array.isArray(R)&&R.type==="text"&&(R.value=q3(R.value)),!Array.isArray(R)&&R.type==="element")){const A=R.children[0];A&&A.type==="text"&&(A.value=q3(A.value))}Array.isArray(R)?g.push(...R):g.push(R)}}}return g}}function Tne(t,e){t.position&&(e.position=hJ(t))}function Ene(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,Cg(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Ane(t,e){const n=e.data||{},r="value"in e&&!(D_.call(n,"hProperties")||D_.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Rne(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function q3(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function X3(t,e){const n=Sne(t,e),r=n.one(t,void 0),s=dne(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function Cne(t,e){return t&&"run"in t?async function(n,r){const s=X3(n,{file:r,...e});await t.run(s,r)}:function(n,r){return X3(n,{file:r,...t||e})}}function Y3(t){if(t)throw t}var Ux,K3;function kne(){if(K3)return Ux;K3=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},i=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var d=t.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!d&&!g)return!1;var b;for(b in h);return typeof b>"u"||t.call(h,b)},a=function(h,d){n&&d.name==="__proto__"?n(h,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):h[d.name]=d.newValue},l=function(h,d){if(d==="__proto__")if(t.call(h,d)){if(r)return r(h,d).value}else return;return h[d]};return Ux=function u(){var h,d,g,b,w,R,A=arguments[0],C=1,I=arguments.length,M=!1;for(typeof A=="boolean"&&(M=A,A=arguments[1]||{},C=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});C<I;++C)if(h=arguments[C],h!=null)for(d in h)g=l(A,d),b=l(h,d),A!==b&&(M&&b&&(i(b)||(w=s(b)))?(w?(w=!1,R=g&&s(g)?g:[]):R=g&&i(g)?g:{},a(A,{name:d,newValue:u(M,R,b)})):typeof b<"u"&&a(A,{name:d,newValue:b}));return A},Ux}var Nne=kne();const zx=ou(Nne);function j_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Mne(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(u,...h){const d=t[++i];let g=-1;if(u){a(u);return}for(;++g<s.length;)(h[g]===null||h[g]===void 0)&&(h[g]=s[g]);s=h,d?Ine(d,l)(...h):a(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function Ine(t,e){let n;return r;function r(...a){const l=t.length>a.length;let u;l&&a.push(s);try{u=t.apply(this,a)}catch(h){const d=h;if(l&&n)throw d;return s(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(i,s):u instanceof Error?s(u):i(u))}function s(a,...l){n||(n=!0,e(a,...l))}function i(a){s(null,a)}}const li={basename:One,dirname:Pne,extname:Dne,join:jne,sep:"/"};function One(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Mh(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,l=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),l>-1&&(t.codePointAt(s)===e.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function Pne(t){if(Mh(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Dne(t){Mh(t);let e=t.length,n=-1,r=0,s=-1,i=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function jne(...t){let e=-1,n;for(;++e<t.length;)Mh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Fne(n)}function Fne(t){Mh(t);const e=t.codePointAt(0)===47;let n=Bne(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Bne(t,e){let n="",r=0,s=-1,i=0,a=-1,l,u;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function Mh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Lne={cwd:Une};function Une(){return"/"}function F_(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function zne(t){if(typeof t=="string")t=new URL(t);else if(!F_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Vne(t)}function Vne(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Vx=["history","path","basename","stem","extname","dirname"];class oP{constructor(e){let n;e?F_(e)?n={path:e}:typeof e=="string"||$ne(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Lne.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vx.length;){const i=Vx[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Vx.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?li.basename(this.path):void 0}set basename(e){Hx(e,"basename"),$x(e,"basename"),this.path=li.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?li.dirname(this.path):void 0}set dirname(e){Z3(this.basename,"dirname"),this.path=li.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?li.extname(this.path):void 0}set extname(e){if($x(e,"extname"),Z3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=li.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){F_(e)&&(e=zne(e)),Hx(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?li.basename(this.path,this.extname):void 0}set stem(e){Hx(e,"stem"),$x(e,"stem"),this.path=li.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Ar(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function $x(t,e){if(t&&t.includes(li.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+li.sep+"`")}function Hx(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Z3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function $ne(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Hne=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},Wne={}.hasOwnProperty;class xw extends Hne{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Mne()}copy(){const e=new xw;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(zx(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Xx("data",this.frozen),this.namespace[e]=n,this):Wne.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Xx("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=xp(e),r=this.parser||this.Parser;return Wx("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Wx("process",this.parser||this.Parser),qx("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const l=xp(e),u=r.parse(l);r.run(u,l,function(d,g,b){if(d||!g||!b)return h(d);const w=g,R=r.stringify(w,b);Yne(R)?b.value=R:b.result=R,h(d,b)});function h(d,g){d||!g?a(d):i?i(g):n(void 0,g)}}}processSync(e){let n=!1,r;return this.freeze(),Wx("processSync",this.parser||this.Parser),qx("processSync",this.compiler||this.Compiler),this.process(e,s),G3("processSync","process",n),r;function s(i,a){n=!0,Y3(i),r=a}}run(e,n,r){Q3(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,l){const u=xp(n);s.run(e,u,h);function h(d,g,b){const w=g||e;d?l(d):a?a(w):r(void 0,w,b)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),G3("runSync","run",r),s;function i(a,l){Y3(a),s=l,r=!0}}stringify(e,n){this.freeze();const r=xp(n),s=this.compiler||this.Compiler;return qx("stringify",s),Q3(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Xx("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...g]=h;u(d,g)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(s.settings=zx(!0,s.settings,h.settings))}function l(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const g=h[d];i(g)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,d){let g=-1,b=-1;for(;++g<r.length;)if(r[g][0]===h){b=g;break}if(b===-1)r.push([h,...d]);else if(d.length>0){let[w,...R]=d;const A=r[b][1];j_(A)&&j_(w)&&(w=zx(!0,A,w)),r[b]=[h,w,...R]}}}}const qne=new xw().freeze();function Wx(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function qx(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Xx(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Q3(t){if(!j_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function G3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function xp(t){return Xne(t)?t:new oP(t)}function Xne(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Yne(t){return typeof t=="string"||Kne(t)}function Kne(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Zne="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",J3=[],eR={allowDangerousHtml:!0},Qne=/^(https?|ircs?|mailto|xmpp)$/i,Gne=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Jne(t){const e=ere(t),n=tre(t);return nre(e.runSync(e.parse(n),n),t)}function ere(t){const e=t.rehypePlugins||J3,n=t.remarkPlugins||J3,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...eR}:eR;return qne().use(Pte).use(n).use(Cne,r).use(e)}function tre(t){const e=t.children||"",n=new oP;return typeof e=="string"&&(n.value=e),n}function nre(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,i=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,u=e.urlTransform||rre;for(const d of Gne)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+Zne+d.id,void 0);return bw(t,h),yJ(t,{Fragment:m.Fragment,components:s,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function h(d,g,b){if(d.type==="raw"&&b&&typeof g=="number")return a?b.children.splice(g,1):b.children[g]={type:"text",value:d.value},g;if(d.type==="element"){let w;for(w in Fx)if(Object.hasOwn(Fx,w)&&Object.hasOwn(d.properties,w)){const R=d.properties[w],A=Fx[w];(A===null||A.includes(d.tagName))&&(d.properties[w]=u(String(R||""),w,d))}}if(d.type==="element"){let w=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!w&&r&&typeof g=="number"&&(w=!r(d,g,b)),w&&b&&typeof g=="number")return l&&d.children?b.children.splice(g,1,...d.children):b.children.splice(g,1),g}}}function rre(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||Qne.test(t.slice(0,e))?t:""}function tR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function sre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ire(t,e,n){const s=_m((n||{}).ignore||[]),i=ore(e);let a=-1;for(;++a<i.length;)iP(t,"text",l);function l(h,d){let g=-1,b;for(;++g<d.length;){const w=d[g],R=b?b.children:void 0;if(s(w,R?R.indexOf(w):void 0,b))return;b=w}if(b)return u(h,d)}function u(h,d){const g=d[d.length-1],b=i[a][0],w=i[a][1];let R=0;const C=g.children.indexOf(h);let I=!1,M=[];b.lastIndex=0;let k=b.exec(h.value);for(;k;){const P=k.index,L={index:k.index,input:k.input,stack:[...d,h]};let O=w(...k,L);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?b.lastIndex=P+1:(R!==P&&M.push({type:"text",value:h.value.slice(R,P)}),Array.isArray(O)?M.push(...O):O&&M.push(O),R=P+k[0].length,I=!0),!b.global)break;k=b.exec(h.value)}return I?(R<h.value.length&&M.push({type:"text",value:h.value.slice(R)}),g.children.splice(C,1,...M)):M=[h],C+M.length}}function ore(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([are(s[0]),lre(s[1])])}return e}function are(t){return typeof t=="string"?new RegExp(sre(t),"g"):t}function lre(t){return typeof t=="function"?t:function(){return t}}const Yx="phrasing",Kx=["autolink","link","image","label"];function cre(){return{transforms:[mre],enter:{literalAutolink:fre,literalAutolinkEmail:Zx,literalAutolinkHttp:Zx,literalAutolinkWww:Zx},exit:{literalAutolink:gre,literalAutolinkEmail:pre,literalAutolinkHttp:hre,literalAutolinkWww:dre}}}function ure(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Yx,notInConstruct:Kx},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Yx,notInConstruct:Kx},{character:":",before:"[ps]",after:"\\/",inConstruct:Yx,notInConstruct:Kx}]}}function fre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Zx(t){this.config.enter.autolinkProtocol.call(this,t)}function hre(t){this.config.exit.autolinkProtocol.call(this,t)}function dre(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function pre(t){this.config.exit.autolinkEmail.call(this,t)}function gre(t){this.exit(t)}function mre(t){ire(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,yre],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),bre]],{ignore:["link","linkReference"]})}function yre(t,e,n,r,s){let i="";if(!aP(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!xre(n)))return!1;const a=vre(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:i+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function bre(t,e,n,r){return!aP(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function xre(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function vre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=tR(t,"(");let i=tR(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function aP(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||pl(n)||bm(n))&&(!e||n!==47)}lP.peek=kre;function _re(){this.buffer()}function wre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Sre(){this.buffer()}function Tre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Ere(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ys(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Are(t){this.exit(t)}function Rre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ys(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Cre(t){this.exit(t)}function kre(){return"["}function lP(t,e,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return i+=s.move(n.safe(n.associationId(t),{after:"]",before:i})),l(),a(),i+=s.move("]"),i}function Nre(){return{enter:{gfmFootnoteCallString:_re,gfmFootnoteCall:wre,gfmFootnoteDefinitionLabelString:Sre,gfmFootnoteDefinition:Tre},exit:{gfmFootnoteCallString:Ere,gfmFootnoteCall:Are,gfmFootnoteDefinitionLabelString:Rre,gfmFootnoteDefinition:Cre}}}function Mre(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:lP},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,a){const l=i.createTracker(a);let u=l.move("[^");const h=i.enter("footnoteDefinition"),d=i.enter("label");return u+=l.move(i.safe(i.associationId(r),{before:u,after:"]"})),d(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((e?`
`:" ")+i.indentLines(i.containerFlow(r,l.current()),e?cP:Ire))),h(),u}}function Ire(t,e,n){return e===0?t:cP(t,e,n)}function cP(t,e,n){return(n?"":"    ")+t}const Ore=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uP.peek=Bre;function Pre(){return{canContainEols:["delete"],enter:{strikethrough:jre},exit:{strikethrough:Fre}}}function Dre(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Ore}],handlers:{delete:uP}}}function jre(t){this.enter({type:"delete",children:[]},t)}function Fre(t){this.exit(t)}function uP(t,e,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(t,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function Bre(){return"~"}function Lre(t){return t.length}function Ure(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||Lre,i=[],a=[],l=[],u=[];let h=0,d=-1;for(;++d<t.length;){const A=[],C=[];let I=-1;for(t[d].length>h&&(h=t[d].length);++I<t[d].length;){const M=zre(t[d][I]);if(n.alignDelimiters!==!1){const k=s(M);C[I]=k,(u[I]===void 0||k>u[I])&&(u[I]=k)}A.push(M)}a[d]=A,l[d]=C}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<h;)i[g]=nR(r[g]);else{const A=nR(r);for(;++g<h;)i[g]=A}g=-1;const b=[],w=[];for(;++g<h;){const A=i[g];let C="",I="";A===99?(C=":",I=":"):A===108?C=":":A===114&&(I=":");let M=n.alignDelimiters===!1?1:Math.max(1,u[g]-C.length-I.length);const k=C+"-".repeat(M)+I;n.alignDelimiters!==!1&&(M=C.length+M+I.length,M>u[g]&&(u[g]=M),w[g]=M),b[g]=k}a.splice(1,0,b),l.splice(1,0,w),d=-1;const R=[];for(;++d<a.length;){const A=a[d],C=l[d];g=-1;const I=[];for(;++g<h;){const M=A[g]||"";let k="",P="";if(n.alignDelimiters!==!1){const L=u[g]-(C[g]||0),O=i[g];O===114?k=" ".repeat(L):O===99?L%2?(k=" ".repeat(L/2+.5),P=" ".repeat(L/2-.5)):(k=" ".repeat(L/2),P=k):P=" ".repeat(L)}n.delimiterStart!==!1&&!g&&I.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&M==="")&&(n.delimiterStart!==!1||g)&&I.push(" "),n.alignDelimiters!==!1&&I.push(k),I.push(M),n.alignDelimiters!==!1&&I.push(P),n.padding!==!1&&I.push(" "),(n.delimiterEnd!==!1||g!==h-1)&&I.push("|")}R.push(n.delimiterEnd===!1?I.join("").replace(/ +$/,""):I.join(""))}return R.join(`
`)}function zre(t){return t==null?"":String(t)}function nR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Vre(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(t,i.current()),$re);return s(),a}function $re(t,e,n){return">"+(n?"":" ")+t}function Hre(t,e){return rR(t,e.inConstruct,!0)&&!rR(t,e.notInConstruct,!1)}function rR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function sR(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&Hre(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Wre(t,e){const n=String(t);let r=n.indexOf(e),s=r,i=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>a&&(a=i):i=1,s=r+e.length,r=n.indexOf(e,s);return a}function qre(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Xre(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Yre(t,e,n,r){const s=Xre(n),i=t.value||"",a=s==="`"?"GraveAccent":"Tilde";if(qre(t,n)){const g=n.enter("codeIndented"),b=n.indentLines(i,Kre);return g(),b}const l=n.createTracker(r),u=s.repeat(Math.max(Wre(i,s)+1,3)),h=n.enter("codeFenced");let d=l.move(u);if(t.lang){const g=n.enter(`codeFencedLang${a}`);d+=l.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...l.current()})),g()}if(t.lang&&t.meta){const g=n.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...l.current()})),g()}return d+=l.move(`
`),i&&(d+=l.move(i+`
`)),d+=l.move(u),h(),d}function Kre(t,e,n){return(n?"":"    ")+t}function vw(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Zre(t,e,n,r){const s=vw(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("[");return h+=u.move(n.safe(n.associationId(t),{before:h,after:"]",...u.current()})),h+=u.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+s),h+=u.move(n.safe(t.title,{before:h,after:s,...u.current()})),h+=u.move(s),l()),a(),h}function Qre(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ch(t){return"&#x"+t.toString(16).toUpperCase()+";"}function kg(t,e,n){const r=iu(t),s=iu(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}fP.peek=Gre;function fP(t,e,n,r){const s=Qre(n),i=n.enter("emphasis"),a=n.createTracker(r),l=a.move(s);let u=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const h=u.charCodeAt(0),d=kg(r.before.charCodeAt(r.before.length-1),h,s);d.inside&&(u=ch(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=kg(r.after.charCodeAt(0),g,s);b.inside&&(u=u.slice(0,-1)+ch(g));const w=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},l+u+w}function Gre(t,e,n){return n.options.emphasis||"*"}function Jre(t,e){let n=!1;return bw(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,P_}),!!((!t.depth||t.depth<3)&&fw(t)&&(e.options.setext||n))}function ese(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(Jre(t,n)){const d=n.enter("headingSetext"),g=n.enter("phrasing"),b=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return g(),d(),b+`
`+(s===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),u=n.enter("phrasing");i.move(a+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=ch(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,n.options.closeAtx&&(h+=" "+a),u(),l(),h}hP.peek=tse;function hP(t){return t.value||""}function tse(){return"<"}dP.peek=nse;function dP(t,e,n,r){const s=vw(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let h=u.move("![");return h+=u.move(n.safe(t.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":")",...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+s),h+=u.move(n.safe(t.title,{before:h,after:s,...u.current()})),h+=u.move(s),l()),h+=u.move(")"),a(),h}function nse(){return"!"}pP.peek=rse;function pP(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const h=n.safe(t.alt,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=d,i(),s==="full"||!h||h!==g?u+=l.move(g+"]"):s==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function rse(){return"!"}gP.peek=sse;function gP(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const a=n.unsafe[i],l=n.compilePattern(a);let u;if(a.atBreak)for(;u=l.exec(r);){let h=u.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(u.index+1)}}return s+r+s}function sse(){return"`"}function mP(t,e){const n=fw(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}yP.peek=ise;function yP(t,e,n,r){const s=vw(n),i=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,u;if(mP(t,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let g=a.move("<");return g+=a.move(n.containerPhrasing(t,{before:g,after:">",...a.current()})),g+=a.move(">"),l(),n.stack=d,g}l=n.enter("link"),u=n.enter("label");let h=a.move("[");return h+=a.move(n.containerPhrasing(t,{before:h,after:"](",...a.current()})),h+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(n.safe(t.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(u=n.enter("destinationRaw"),h+=a.move(n.safe(t.url,{before:h,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${i}`),h+=a.move(" "+s),h+=a.move(n.safe(t.title,{before:h,after:s,...a.current()})),h+=a.move(s),u()),h+=a.move(")"),l(),h}function ise(t,e,n){return mP(t,n)?"<":"["}bP.peek=ose;function bP(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const h=n.containerPhrasing(t,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const g=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=d,i(),s==="full"||!h||h!==g?u+=l.move(g+"]"):s==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function ose(){return"["}function _w(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function ase(t){const e=_w(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function lse(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function xP(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function cse(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=t.ordered?lse(n):_w(n);const l=t.ordered?a==="."?")":".":ase(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),xP(n)===a&&d){let g=-1;for(;++g<t.children.length;){const b=t.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=l),n.bulletCurrent=a;const h=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),h}function use(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function fse(t,e,n,r){const s=use(n);let i=n.bulletCurrent||_w(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let a=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(i+" ".repeat(a-i.length)),l.shift(a);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,l.current()),d);return u(),h;function d(g,b,w){return b?(w?"":" ".repeat(a))+g:(w?i:i+" ".repeat(a-i.length))+g}}function hse(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(t,r);return i(),s(),a}const dse=_m(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function pse(t,e,n,r){return(t.children.some(function(a){return dse(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function gse(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}vP.peek=mse;function vP(t,e,n,r){const s=gse(n),i=n.enter("strong"),a=n.createTracker(r),l=a.move(s+s);let u=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const h=u.charCodeAt(0),d=kg(r.before.charCodeAt(r.before.length-1),h,s);d.inside&&(u=ch(h)+u.slice(1));const g=u.charCodeAt(u.length-1),b=kg(r.after.charCodeAt(0),g,s);b.inside&&(u=u.slice(0,-1)+ch(g));const w=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:d.outside},l+u+w}function mse(t,e,n){return n.options.strong||"*"}function yse(t,e,n,r){return n.safe(t.value,r)}function bse(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function xse(t,e,n){const r=(xP(n)+(n.options.ruleSpaces?" ":"")).repeat(bse(n));return n.options.ruleSpaces?r.slice(0,-1):r}const _P={blockquote:Vre,break:sR,code:Yre,definition:Zre,emphasis:fP,hardBreak:sR,heading:ese,html:hP,image:dP,imageReference:pP,inlineCode:gP,link:yP,linkReference:bP,list:cse,listItem:fse,paragraph:hse,root:pse,strong:vP,text:yse,thematicBreak:xse};function vse(){return{enter:{table:_se,tableData:iR,tableHeader:iR,tableRow:Sse},exit:{codeText:Tse,table:wse,tableData:Qx,tableHeader:Qx,tableRow:Qx}}}function _se(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function wse(t){this.exit(t),this.data.inTable=void 0}function Sse(t){this.enter({type:"tableRow",children:[]},t)}function Qx(t){this.exit(t)}function iR(t){this.enter({type:"tableCell",children:[]},t)}function Tse(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Ese));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Ese(t,e){return e==="|"?e:t}function Ase(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:a,tableCell:u,tableRow:l}};function a(w,R,A,C){return h(d(w,A,C),w.align)}function l(w,R,A,C){const I=g(w,A,C),M=h([I]);return M.slice(0,M.indexOf(`
`))}function u(w,R,A,C){const I=A.enter("tableCell"),M=A.enter("phrasing"),k=A.containerPhrasing(w,{...C,before:i,after:i});return M(),I(),k}function h(w,R){return Ure(w,{align:R,alignDelimiters:r,padding:n,stringLength:s})}function d(w,R,A){const C=w.children;let I=-1;const M=[],k=R.enter("table");for(;++I<C.length;)M[I]=g(C[I],R,A);return k(),M}function g(w,R,A){const C=w.children;let I=-1;const M=[],k=R.enter("tableRow");for(;++I<C.length;)M[I]=u(C[I],w,R,A);return k(),M}function b(w,R,A){let C=_P.inlineCode(w,R,A);return A.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function Rse(){return{exit:{taskListCheckValueChecked:oR,taskListCheckValueUnchecked:oR,paragraph:kse}}}function Cse(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Nse}}}function oR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function kse(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,a;for(;++i<s.length;){const l=s[i];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Nse(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",l=n.createTracker(r);i&&l.move(a);let u=_P.listItem(t,e,n,{...r,...l.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(d){return d+a}}function Mse(){return[cre(),Nre(),Pre(),vse(),Rse()]}function Ise(t){return{extensions:[ure(),Mre(t),Dre(),Ase(t),Cse()]}}const Ose={tokenize:Lse,partial:!0},wP={tokenize:Use,partial:!0},SP={tokenize:zse,partial:!0},TP={tokenize:Vse,partial:!0},Pse={tokenize:$se,partial:!0},EP={name:"wwwAutolink",tokenize:Fse,previous:RP},AP={name:"protocolAutolink",tokenize:Bse,previous:CP},Zi={name:"emailAutolink",tokenize:jse,previous:kP},wi={};function Dse(){return{text:wi}}let Pa=48;for(;Pa<123;)wi[Pa]=Zi,Pa++,Pa===58?Pa=65:Pa===91&&(Pa=97);wi[43]=Zi;wi[45]=Zi;wi[46]=Zi;wi[95]=Zi;wi[72]=[Zi,AP];wi[104]=[Zi,AP];wi[87]=[Zi,EP];wi[119]=[Zi,EP];function jse(t,e,n){const r=this;let s,i;return a;function a(g){return!B_(g)||!kP.call(r,r.previous)||ww(r.events)?n(g):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(g))}function l(g){return B_(g)?(t.consume(g),l):g===64?(t.consume(g),u):n(g)}function u(g){return g===46?t.check(Pse,d,h)(g):g===45||g===95||Er(g)?(i=!0,t.consume(g),u):d(g)}function h(g){return t.consume(g),s=!0,u}function d(g){return i&&s&&jr(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(g)):n(g)}}function Fse(t,e,n){const r=this;return s;function s(a){return a!==87&&a!==119||!RP.call(r,r.previous)||ww(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Ose,t.attempt(wP,t.attempt(SP,i),n),n)(a))}function i(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function Bse(t,e,n){const r=this;let s="",i=!1;return a;function a(g){return(g===72||g===104)&&CP.call(r,r.previous)&&!ww(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(g),t.consume(g),l):n(g)}function l(g){if(jr(g)&&s.length<5)return s+=String.fromCodePoint(g),t.consume(g),l;if(g===58){const b=s.toLowerCase();if(b==="http"||b==="https")return t.consume(g),u}return n(g)}function u(g){return g===47?(t.consume(g),i?h:(i=!0,u)):n(g)}function h(g){return g===null||Ag(g)||xn(g)||pl(g)||bm(g)?n(g):t.attempt(wP,t.attempt(SP,d),n)(g)}function d(g){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(g)}}function Lse(t,e,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),s):a===46&&r===3?(t.consume(a),i):n(a)}function i(a){return a===null?n(a):e(a)}}function Use(t,e,n){let r,s,i;return a;function a(h){return h===46||h===95?t.check(TP,u,l)(h):h===null||xn(h)||pl(h)||h!==45&&bm(h)?u(h):(i=!0,t.consume(h),a)}function l(h){return h===95?r=!0:(s=r,r=void 0),t.consume(h),a}function u(h){return s||r||!i?n(h):e(h)}}function zse(t,e){let n=0,r=0;return s;function s(a){return a===40?(n++,t.consume(a),s):a===41&&r<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(TP,e,i)(a):a===null||xn(a)||pl(a)?e(a):(t.consume(a),s)}function i(a){return a===41&&r++,t.consume(a),s}}function Vse(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),i):l===93?(t.consume(l),s):l===60||l===null||xn(l)||pl(l)?e(l):n(l)}function s(l){return l===null||l===40||l===91||xn(l)||pl(l)?e(l):r(l)}function i(l){return jr(l)?a(l):n(l)}function a(l){return l===59?(t.consume(l),r):jr(l)?(t.consume(l),a):n(l)}}function $se(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return Er(i)?n(i):e(i)}}function RP(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||xn(t)}function CP(t){return!jr(t)}function kP(t){return!(t===47||B_(t))}function B_(t){return t===43||t===45||t===46||t===95||Er(t)}function ww(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Hse={tokenize:Gse,partial:!0};function Wse(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Kse,continuation:{tokenize:Zse},exit:Qse}},text:{91:{name:"gfmFootnoteCall",tokenize:Yse},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qse,resolveTo:Xse}}}}function qse(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const u=r.events[s][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!a||!a._balanced)return n(u);const h=Ys(r.sliceSerialize({start:a.end,end:r.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?n(u):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),e(u))}}function Xse(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function Yse(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,a;return l;function l(g){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),u}function u(g){return g!==94?n(g):(t.enter("gfmFootnoteCallMarker"),t.consume(g),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(g){if(i>999||g===93&&!a||g===null||g===91||xn(g))return n(g);if(g===93){t.exit("chunkString");const b=t.exit("gfmFootnoteCallString");return s.includes(Ys(r.sliceSerialize(b)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(g)}return xn(g)||(a=!0),i++,t.consume(g),g===92?d:h}function d(g){return g===91||g===92||g===93?(t.consume(g),i++,h):h(g)}}function Kse(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0,l;return u;function u(R){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(R){return R===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(R)}function d(R){if(a>999||R===93&&!l||R===null||R===91||xn(R))return n(R);if(R===93){t.exit("chunkString");const A=t.exit("gfmFootnoteDefinitionLabelString");return i=Ys(r.sliceSerialize(A)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(R),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),b}return xn(R)||(l=!0),a++,t.consume(R),R===92?g:d}function g(R){return R===91||R===92||R===93?(t.consume(R),a++,d):d(R)}function b(R){return R===58?(t.enter("definitionMarker"),t.consume(R),t.exit("definitionMarker"),s.includes(i)||s.push(i),$t(t,w,"gfmFootnoteDefinitionWhitespace")):n(R)}function w(R){return e(R)}}function Zse(t,e,n){return t.check(Nh,e,t.attempt(Hse,e,n))}function Qse(t){t.exit("gfmFootnoteDefinition")}function Gse(t,e,n){const r=this;return $t(t,s,"gfmFootnoteDefinitionIndent",5);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(i):n(i)}}function Jse(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,l){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let h=u;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[u][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[u][1].end)},g={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[u][1].start)},b=[["enter",d,l],["enter",a[h][1],l],["exit",a[h][1],l],["enter",g,l]],w=l.parser.constructs.insideSpan.null;w&&ds(b,b.length,0,xm(w,a.slice(h+1,u),l)),ds(b,b.length,0,[["exit",g,l],["enter",a[u][1],l],["exit",a[u][1],l],["exit",d,l]]),ds(a,h-1,u-h+3,b),u=h+b.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function i(a,l,u){const h=this.previous,d=this.events;let g=0;return b;function b(R){return h===126&&d[d.length-1][1].type!=="characterEscape"?u(R):(a.enter("strikethroughSequenceTemporary"),w(R))}function w(R){const A=iu(h);if(R===126)return g>1?u(R):(a.consume(R),g++,w);if(g<2&&!n)return u(R);const C=a.exit("strikethroughSequenceTemporary"),I=iu(R);return C._open=!I||I===2&&!!A,C._close=!A||A===2&&!!I,l(R)}}}class eie{constructor(){this.map=[]}add(e,n,r){tie(this,e,n,r)}consume(e){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const i of s)e.push(i);s=r.pop()}this.map.length=0}}function tie(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function nie(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function rie(){return{flow:{null:{name:"table",tokenize:sie,resolveAll:iie}}}}function sie(t,e,n){const r=this;let s=0,i=0,a;return l;function l(K){let Z=r.events.length-1;for(;Z>-1;){const oe=r.events[Z][1].type;if(oe==="lineEnding"||oe==="linePrefix")Z--;else break}const ae=Z>-1?r.events[Z][1].type:null,_e=ae==="tableHead"||ae==="tableRow"?O:u;return _e===O&&r.parser.lazy[r.now().line]?n(K):_e(K)}function u(K){return t.enter("tableHead"),t.enter("tableRow"),h(K)}function h(K){return K===124||(a=!0,i+=1),d(K)}function d(K){return K===null?n(K):dt(K)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),w):n(K):Bt(K)?$t(t,d,"whitespace")(K):(i+=1,a&&(a=!1,s+=1),K===124?(t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),a=!0,d):(t.enter("data"),g(K)))}function g(K){return K===null||K===124||xn(K)?(t.exit("data"),d(K)):(t.consume(K),K===92?b:g)}function b(K){return K===92||K===124?(t.consume(K),g):g(K)}function w(K){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(K):(t.enter("tableDelimiterRow"),a=!1,Bt(K)?$t(t,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):R(K))}function R(K){return K===45||K===58?C(K):K===124?(a=!0,t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),A):L(K)}function A(K){return Bt(K)?$t(t,C,"whitespace")(K):C(K)}function C(K){return K===58?(i+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(K),t.exit("tableDelimiterMarker"),I):K===45?(i+=1,I(K)):K===null||dt(K)?P(K):L(K)}function I(K){return K===45?(t.enter("tableDelimiterFiller"),M(K)):L(K)}function M(K){return K===45?(t.consume(K),M):K===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(K),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(K))}function k(K){return Bt(K)?$t(t,P,"whitespace")(K):P(K)}function P(K){return K===124?R(K):K===null||dt(K)?!a||s!==i?L(K):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(K)):L(K)}function L(K){return n(K)}function O(K){return t.enter("tableRow"),H(K)}function H(K){return K===124?(t.enter("tableCellDivider"),t.consume(K),t.exit("tableCellDivider"),H):K===null||dt(K)?(t.exit("tableRow"),e(K)):Bt(K)?$t(t,H,"whitespace")(K):(t.enter("data"),Y(K))}function Y(K){return K===null||K===124||xn(K)?(t.exit("data"),H(K)):(t.consume(K),K===92?J:Y)}function J(K){return K===92||K===124?(t.consume(K),Y):Y(K)}}function iie(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],a=[0,0,0,0],l=!1,u=0,h,d,g;const b=new eie;for(;++n<t.length;){const w=t[n],R=w[1];w[0]==="enter"?R.type==="tableHead"?(l=!1,u!==0&&(aR(b,e,u,h,d),d=void 0,u=0),h={type:"table",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",h,e]])):R.type==="tableRow"||R.type==="tableDelimiterRow"?(r=!0,g=void 0,i=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},R.start),end:Object.assign({},R.end)},b.add(n,0,[["enter",d,e]])),s=R.type==="tableDelimiterRow"?2:d?3:1):s&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],g=vp(b,e,i,s,void 0,g),i=[0,0,0,0]),a[2]=n)):R.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(a[0]=a[1],g=vp(b,e,i,s,void 0,g)),i=a,a=[i[1],n,0,0])):R.type==="tableHead"?(l=!0,u=n):R.type==="tableRow"||R.type==="tableDelimiterRow"?(u=n,i[1]!==0?(a[0]=a[1],g=vp(b,e,i,s,n,g)):a[1]!==0&&(g=vp(b,e,a,s,n,g)),s=0):s&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&aR(b,e,u,h,d),b.consume(e.events),n=-1;++n<e.events.length;){const w=e.events[n];w[0]==="enter"&&w[1].type==="table"&&(w[1]._align=nie(e.events,n))}return t}function vp(t,e,n,r,s,i){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},bc(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const u=bc(e.events,n[1]);if(i={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const h=bc(e.events,n[2]),d=bc(e.events,n[3]),g={type:l,start:Object.assign({},h),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",g,e]]),r!==2){const b=e.events[n[2]],w=e.events[n[3]];if(b[1].end=Object.assign({},w[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const R=n[2]+1,A=n[3]-n[2]-1;t.add(R,A,[])}}t.add(n[3]+1,0,[["exit",g,e]])}return s!==void 0&&(i.end=Object.assign({},bc(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function aR(t,e,n,r,s){const i=[],a=bc(e.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,e])),r.end=Object.assign({},a),i.push(["exit",r,e]),t.add(n+1,0,i)}function bc(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const oie={name:"tasklistCheck",tokenize:lie};function aie(){return{text:{91:oie}}}function lie(t,e,n){const r=this;return s;function s(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),i)}function i(u){return xn(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(u)}function l(u){return dt(u)?e(u):Bt(u)?t.check({tokenize:cie},e,n)(u):n(u)}}function cie(t,e,n){return $t(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function uie(t){return UO([Dse(),Wse(),Jse(t),rie(),aie()])}const fie={};function hie(t){const e=this,n=t||fie,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(uie(n)),i.push(Mse()),a.push(Ise(n))}const die=async()=>{const t=await fetch("http://localhost:3333/api/activities");if(!t.ok)throw new Error("Failed to fetch activities");return t.json()},_p=({content:t,fileName:e,activityId:n})=>{const[r,s]=N.useState("rendered"),i=async()=>{try{await navigator.clipboard.writeText(t),ln.success("Copied to clipboard",`${e} content copied successfully`)}catch(l){console.error("Failed to copy to clipboard:",l),ln.error("Copy failed","Unable to copy content to clipboard")}},a=async()=>{try{const l=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:`.cntx/activities/activities/${n}/${e}`})});if(!l.ok){const u=await l.json();throw new Error(u.error||"Failed to open file via API")}ln.success("Opening file in editor...")}catch(l){console.error("Failed to open in editor:",l),ln.error("Could not open file",l.message)}};return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between border-b border-border pb-2",children:[m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsxs(wt,{variant:r==="rendered"?"secondary":"ghost",size:"sm",onClick:()=>s("rendered"),className:"h-6 px-2 text-xs",children:[m.jsx(mC,{className:"w-3 h-3 mr-1"}),"Rendered"]}),m.jsxs(wt,{variant:r==="raw"?"secondary":"ghost",size:"sm",onClick:()=>s("raw"),className:"h-6 px-2 text-xs",children:[m.jsx(Z_,{className:"w-3 h-3 mr-1"}),"Raw"]})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx(wt,{variant:"ghost",size:"sm",onClick:i,className:"h-6 px-2 text-xs",title:"Copy to clipboard",children:m.jsx(Qf,{className:"w-3 h-3"})}),m.jsx(wt,{variant:"ghost",size:"sm",onClick:a,className:"h-6 px-2 text-xs",title:"Open in editor",children:m.jsx(Yg,{className:"w-3 h-3"})})]})]}),m.jsx("div",{className:"overflow-auto max-h-80",children:r==="rendered"?m.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:m.jsx(Jne,{remarkPlugins:[hie],components:{h1:({children:l})=>m.jsx("h1",{className:"text-lg font-semibold mb-3 mt-4 first:mt-0",children:l}),h2:({children:l})=>m.jsx("h2",{className:"text-base font-semibold mb-2 mt-3",children:l}),h3:({children:l})=>m.jsx("h3",{className:"text-sm font-semibold mb-2 mt-3",children:l}),p:({children:l})=>m.jsx("p",{className:"text-sm mb-2 leading-relaxed",children:l}),ul:({children:l})=>m.jsx("ul",{className:"text-sm space-y-1 mb-3 ml-4",children:l}),ol:({children:l})=>m.jsx("ol",{className:"text-sm space-y-1 mb-3 ml-4",children:l}),li:({children:l})=>m.jsx("li",{className:"text-sm",children:l}),code:({children:l})=>m.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs font-mono",children:l}),pre:({children:l})=>m.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs font-mono overflow-x-auto mb-3",children:l}),blockquote:({children:l})=>m.jsx("blockquote",{className:"border-l-2 border-muted-foreground/20 pl-3 italic text-muted-foreground text-sm mb-3",children:l}),table:({children:l})=>m.jsx("table",{className:"text-xs border-collapse border border-border mb-3 w-full",children:l}),th:({children:l})=>m.jsx("th",{className:"border border-border px-2 py-1 bg-muted font-semibold text-left",children:l}),td:({children:l})=>m.jsx("td",{className:"border border-border px-2 py-1",children:l}),input:({type:l,checked:u,...h})=>l==="checkbox"?m.jsx("input",{type:"checkbox",checked:u,disabled:!0,className:"mr-2 scale-75",...h}):m.jsx("input",{...h})},children:t})}):m.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono bg-muted/50 p-3 rounded border",children:t})})]})};function pie(){const[t,e]=N.useState(null),{data:n=[],isLoading:r,error:s,refetch:i}=Cs({queryKey:["activities"],queryFn:die,refetchInterval:3e4}),a=u=>{switch(u){case"completed":return m.jsx(Ba,{className:"h-3 w-3"});case"in_progress":return m.jsx(yv,{className:"h-3 w-3"});case"failed":return m.jsx(Xo,{className:"h-3 w-3"});default:return m.jsx(yv,{className:"h-3 w-3"})}},l=u=>m.jsx(pn,{variant:"outline",className:"text-xs py-0",children:u.replace("_"," ")});return r?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),m.jsx(fs,{className:"h-4 w-4 animate-spin"})]}),m.jsx("div",{className:"space-y-2",children:[1,2,3].map(u=>m.jsx(Ut,{className:"animate-pulse",children:m.jsxs(qt,{className:"p-3",children:[m.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})},u))})]}):s?m.jsxs("div",{className:"space-y-3",children:[m.jsx("h2",{className:"text-lg font-medium",children:"Activities"}),m.jsx(Ut,{children:m.jsx(qt,{className:"p-4",children:m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(Xo,{className:"h-6 w-6 mx-auto"}),m.jsx("p",{className:"text-sm font-medium",children:"Failed to load activities"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the cntx-ui server is running and activities are configured."}),m.jsxs(wt,{onClick:()=>i(),variant:"outline",size:"sm",children:[m.jsx(fs,{className:"h-3 w-3 mr-1"}),"Retry"]})]})})})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-lg font-medium flex items-center gap-2",children:[m.jsx(dC,{className:"h-4 w-4"}),"Activities (",n.length,")"]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Agent task definitions and progress"})]}),m.jsxs(wt,{onClick:()=>i(),variant:"ghost",size:"sm",children:[m.jsx(fs,{className:"h-3 w-3 mr-1"}),"Refresh"]})]}),n.length===0?m.jsx(Ut,{children:m.jsx(qt,{className:"p-6",children:m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(Gf,{className:"h-8 w-8 mx-auto text-muted-foreground"}),m.jsx("h3",{className:"text-sm font-medium",children:"No activities found"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Activities will appear here once they are defined in your .cntx/activities directory."})]})})}):m.jsx("div",{className:"space-y-2",children:n.map(u=>m.jsxs(Ut,{className:"overflow-hidden",children:[m.jsx(En,{className:"pb-2 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>e(t===u.id?null:u.id),children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[t===u.id?m.jsx(Xg,{className:"h-3 w-3"}):m.jsx(gC,{className:"h-3 w-3"}),a(u.status),m.jsx("div",{children:m.jsx(Cn,{className:"text-sm",children:u.name})})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[l(u.status),u.progress!==void 0&&u.progress>0&&m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(R_,{value:u.progress,className:"w-16 h-2"}),m.jsxs(pn,{variant:"secondary",className:"text-xs py-0",children:[u.progress,"%"]})]}),u.tags&&u.tags.map(h=>m.jsx(pn,{variant:"outline",className:"text-xs py-0",children:h},h))]})]})}),t===u.id&&m.jsx(qt,{className:"pt-0 pb-2",children:m.jsxs(ia,{defaultValue:"readme",className:"w-full",children:[m.jsxs(oa,{className:"grid w-full bg-card grid-cols-4 h-8 space-x-2",children:[m.jsx(Rn,{value:"readme",className:"text-xs border-accent-muted",children:"README"}),m.jsx(Rn,{value:"progress",className:"text-xs border-accent-muted",children:"Progress"}),m.jsx(Rn,{value:"tasks",className:"text-xs border-accent-muted",children:"Tasks"}),m.jsx(Rn,{value:"notes",className:"text-xs border-accent-muted",children:"Notes"})]}),m.jsx(In,{value:"readme",className:"mt-2 mb-0",children:m.jsx(_p,{content:u.files.readme,fileName:"README.md",activityId:u.id})}),m.jsxs(In,{value:"progress",className:"mt-2 mb-0",children:[u.progress>0&&m.jsxs("div",{className:"mb-4 p-3 bg-muted/50 rounded-md",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),m.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.progress,"%"]})]}),m.jsx(R_,{value:u.progress,className:"w-full h-3"})]}),m.jsx(_p,{content:u.files.progress,fileName:"progress.md",activityId:u.id})]}),m.jsx(In,{value:"tasks",className:"mt-2 mb-0",children:m.jsx(_p,{content:u.files.tasks,fileName:"tasks.md",activityId:u.id})}),m.jsx(In,{value:"notes",className:"mt-2 mb-0",children:m.jsx(_p,{content:u.files.notes,fileName:"notes.md",activityId:u.id})})]})})]},u.id))})]})}var gie="Label",NP=N.forwardRef((t,e)=>m.jsx(mt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));NP.displayName=gie;var mie=NP;function lR({className:t,...e}){return m.jsx(mie,{"data-slot":"label",className:Dt("flex items-center gap-2 text-sm leading-none font-thin select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const yie=async()=>{const t=await fetch("http://localhost:3333/api/config");if(!t.ok)throw new Error("Failed to fetch config");return t.json()},bie=async t=>{const e=await fetch("http://localhost:3333/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to save config");return e.json()};function xie(){const t=lu(),[e,n]=N.useState("code"),[r,s]=N.useState(""),{data:i,isLoading:a}=Cs({queryKey:["config"],queryFn:yie});N.useEffect(()=>{i!=null&&i.editor&&(["code","subl","system"].includes(i.editor)?n(i.editor):(n("custom"),s(i.editor)))},[i]);const l=Lp({mutationFn:bie,onSuccess:()=>{t.invalidateQueries({queryKey:["config"]}),ln.success("Editor preference saved")},onError:h=>{ln.error(`Failed to save: ${h.message}`)}}),u=()=>{const d={...i,editor:e==="custom"?r:e};l.mutate(d)};return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(G_,{className:"w-4 h-4"}),"Editor Preference"]})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(lR,{htmlFor:"editor-select",children:"Select your preferred editor"}),m.jsxs(Da,{value:e,onValueChange:n,children:[m.jsx(Do,{id:"editor-select",children:m.jsx(ja,{placeholder:"Select an editor"})}),m.jsxs(jo,{children:[m.jsx(pr,{value:"code",children:"Visual Studio Code"}),m.jsx(pr,{value:"subl",children:"Sublime Text"}),m.jsx(pr,{value:"system",children:"System Default"}),m.jsx(pr,{value:"custom",children:"Custom"})]})]})]}),e==="custom"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(lR,{htmlFor:"custom-editor-input",children:"Custom editor command"}),m.jsx(PN,{id:"custom-editor-input",value:r,onChange:h=>s(h.target.value),placeholder:"e.g., atom -w"})]}),m.jsx("div",{className:"flex justify-end",children:m.jsxs(wt,{onClick:u,disabled:l.isPending,size:"sm",className:"h-7 text-xs",children:[m.jsx(Up,{className:"w-3 h-3 mr-1"}),l.isPending?"Saving...":"Save"]})})]})]})}const vie=async t=>{const e=await fetch(`http://localhost:3333/api/${t}`);if(!e.ok)throw new Error(`Failed to fetch ${t} file`);return e.text()},_ie=async({endpoint:t,content:e})=>{const n=await fetch(`http://localhost:3333/api/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(!n.ok)throw new Error(`Failed to save ${t} file`);return n.json()};function cR({fileType:t,endpoint:e,filePath:n}){const r=lu(),[s,i]=N.useState(""),[a,l]=N.useState(!1),{data:u,isLoading:h}=Cs({queryKey:[t],queryFn:()=>vie(e)});N.useEffect(()=>{u!==void 0&&(i(u),l(!1))},[u]);const d=Lp({mutationFn:_ie,onSuccess:()=>{r.invalidateQueries({queryKey:[t]}),l(!1),ln.success(`${t} file saved`)},onError:C=>ln.error(`Failed to save: ${C.message}`)}),g=C=>{i(C),l(C!==u)},b=()=>{d.mutate({endpoint:e,content:s})},w=()=>{i(u||""),l(!1)},R=async()=>{try{await navigator.clipboard.writeText(s),ln.success("Copied to clipboard")}catch(C){console.error("Failed to copy to clipboard:",C),ln.error("Copy failed")}},A=async()=>{try{const C=await fetch("http://localhost:3333/api/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})});if(!C.ok){const I=await C.json();throw new Error(I.error||"Failed to open file")}ln.success(`Opening ${t} in editor...`)}catch(C){console.error("Failed to open in editor:",C),ln.error(`Could not open file: ${C.message}`)}};return m.jsxs(Ut,{children:[m.jsxs(En,{className:"flex flex-row items-center justify-between",children:[m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(Gf,{className:"w-4 h-4"}),t]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(wt,{variant:"ghost",size:"sm",onClick:R,className:"h-7 px-2",children:m.jsx(Qf,{className:"w-3 h-3"})}),m.jsx(wt,{variant:"ghost",size:"sm",onClick:A,className:"h-7 px-2",children:m.jsx(Yg,{className:"w-3 h-3"})}),a&&m.jsxs(wt,{variant:"outline",size:"sm",onClick:w,className:"h-7 text-xs",children:[m.jsx(g6,{className:"w-3 h-3 mr-1"}),"Reset"]}),m.jsxs(wt,{onClick:b,disabled:!a||d.isPending,size:"sm",className:"h-7 text-xs",children:[m.jsx(Up,{className:"w-3 h-3 mr-1"}),d.isPending?"Saving...":"Save"]})]})]}),m.jsx(qt,{className:"space-y-4",children:h?m.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["Loading ",t," file..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Yp,{value:s,onChange:C=>g(C.target.value),placeholder:`# Add ignore patterns for ${t}, one per line`,className:"min-h-[300px] font-mono text-xs"}),m.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.split(`
`).filter(C=>C.trim()&&!C.trim().startsWith("#")).length," active patterns"]})]})})]})}function wie(){return m.jsxs("div",{className:"space-y-6",children:[m.jsxs(ia,{defaultValue:"cntxignore",children:[m.jsxs(oa,{children:[m.jsx(Rn,{value:"cntxignore",children:".cntxignore"}),m.jsx(Rn,{value:"gitignore",children:".gitignore"})]}),m.jsx(In,{value:"cntxignore",children:m.jsx(cR,{fileType:".cntxignore",endpoint:"cntxignore",filePath:".cntxignore"})}),m.jsx(In,{value:"gitignore",children:m.jsx(cR,{fileType:".gitignore",endpoint:"gitignore",filePath:".gitignore"})})]}),m.jsx(Ut,{children:m.jsx(qt,{className:"pt-6",children:m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsx("div",{children:m.jsx("strong",{children:"Common patterns:"})}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"node_modules/**"})," - Ignore all node_modules"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"*.log"})," - Ignore log files"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"src/debug/**"})," - Ignore debug directory"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"**/*.test.*"})," - Ignore test files"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:".git/**"})," - Ignore git directory"]})]})})})]})}function Sie(){return m.jsxs(ia,{defaultValue:"ignore",children:[m.jsxs(oa,{children:[m.jsx(Rn,{value:"ignore",children:"File Ignore Patterns"}),m.jsx(Rn,{value:"editor",children:"Editor Preference"})]}),m.jsx(In,{value:"ignore",children:m.jsx(wie,{})}),m.jsx(In,{value:"editor",children:m.jsx(xie,{})})]})}function Tie(){return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(Z_,{className:"w-4 h-4"}),"Context Management for React Developers"]})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsxs(th,{className:"border-accent",children:[m.jsx(Kg,{className:"w-4 h-4"}),m.jsxs(nh,{children:[m.jsx("strong",{children:"Target Audience:"})," React developers who want AI context management as trivial to run as a linter."]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-thin mb-2",children:"What This Tool Does"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsx("div",{children:" Creates focused code bundles for AI consumption (not copy-paste chaos)"}),m.jsx("div",{children:" Provides function-level semantic chunking with surgical precision"}),m.jsx("div",{children:" Acts as MCP server so AI agents access your codebase through APIs"}),m.jsx("div",{children:" Automatically organizes code by bundle membership and complexity"})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-thin mb-2",children:"Quick Start"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsxs("div",{children:["1. ",m.jsx("strong",{children:"MCP Setup:"})," ",m.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"})]}),m.jsxs("div",{children:["2. ",m.jsx("strong",{children:"Create Bundles:"})," Use Bundle Config tab to organize your code"]}),m.jsxs("div",{children:["3. ",m.jsx("strong",{children:"AI Access:"})," Claude/Cursor connects via MCP automatically"]}),m.jsxs("div",{children:["4. ",m.jsx("strong",{children:"Semantic Analysis:"})," View function-level chunks in Semantic Chunks tab"]})]})]})]})]})]})}function Eie(){return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(yC,{className:"w-4 h-4"}),"Function-Level Semantic Chunking"]})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-thin mb-2",children:"Why Function-Level Chunks Matter"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Surgical precision:"})," AI gets exactly the function it needs, not entire files"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Context inclusion:"})," Each chunk includes necessary imports and types"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Bundle inheritance:"})," Functions automatically grouped by bundle membership"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Complexity analysis:"})," Identify refactoring candidates with complexity scoring"]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-thin mb-2",children:"Filtering & Organization"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[m.jsxs("div",{children:[" ",m.jsx("strong",{children:"By Bundle:"})," See all frontend vs server functions"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"By Type:"})," React components, hooks, arrow functions, methods"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"By Complexity:"})," Find high-complexity functions needing refactoring"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"By Purpose:"})," API handlers, validation, data processing"]})]})]}),m.jsx("div",{className:"p-3 rounded border border-accent",children:m.jsxs("div",{className:"text-xs",children:[m.jsx("strong",{children:" Pro Tip:"})," Large functions that don't fit in chunks signal refactoring opportunities. The tool nudges better code practices rather than working around bad ones."]})})]})]})}function Aie(){return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(e6,{className:"w-4 h-4"}),"MCP Server Integration"]})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Agents Access Your Code"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Gated access:"})," AI doesn't dump entire codebase, uses API navigation"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Bundle-first approach:"})," AI sees organized bundles before master bundle"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Real-time updates:"})," Changes immediately available to connected AI"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Function-level precision:"})," AI can request specific functions via semantic chunks"]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-thin mb-2",children:"Available MCP Tools"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[m.jsxs("div",{children:[" ",m.jsx("code",{children:"list_bundles"})," - Show available bundle organization"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"get_bundle"})," - Retrieve focused code bundles"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"get_semantic_chunks"})," - Access function-level chunks"]}),m.jsxs("div",{children:[" ",m.jsx("code",{children:"get_file_tree"})," - Navigate project structure"]})]})]}),m.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:m.jsxs("div",{className:"text-xs",children:[m.jsx("strong",{children:" Setup:"})," Run ",m.jsx("code",{className:"bg-muted px-1 rounded",children:"cntx-ui setup-mcp"}),"and your AI tools (Claude Desktop, Cursor) will automatically connect."]})})]})]})}function Rie(){return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(r6,{className:"w-4 h-4"}),"AI-Assisted Context Management"]})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-thin mb-2",children:"How AI Navigates Your Code"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Gated access:"})," AI doesn't see master bundle first - uses API navigation"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Function-level precision:"})," Requests specific functions via semantic chunks"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Bundle discovery:"})," Explores organized bundles before diving deep"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Context control:"})," You control what AI sees through bundle organization"]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-thin mb-2",children:"AI Bundle Creation (Coming Soon)"}),m.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[m.jsxs("div",{children:[" ",m.jsx("strong",{children:'"Find all API stuff":'})," AI analyzes semantic chunks and creates focused bundles"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:'"Group React hooks":'})," Intelligent pattern detection and organization"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:'"Optimize bundles":'})," AI suggests better organization based on code relationships"]}),m.jsxs("div",{children:[" ",m.jsx("strong",{children:"Smart maintenance:"})," AI updates bundles as your code evolves"]})]})]}),m.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:m.jsxs("div",{className:"text-xs",children:[m.jsx("strong",{children:" Philosophy:"})," Context management as trivial as running a linter. AI handles the heavy lifting, you focus on building features."]})})]})]})}function Cie(){return m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2 text-sm font-thin",children:[m.jsx(R6,{className:"w-4 h-4"}),"Essential CLI Commands"]})}),m.jsx(qt,{children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-thin mb-2",children:"Most Used Commands"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui setup-mcp"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Setup MCP for AI tools"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui watch"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Start server (use web interface)"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:"cntx-ui mcp"}),m.jsx("span",{className:"text-xs text-muted-foreground",children:"Start MCP server only"})]})]})]}),m.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:m.jsxs("div",{className:"text-xs text-muted-foreground",children:[m.jsx("strong",{children:"Recommendation:"})," Use the web interface for bundle management. CLI is mainly for automation and MCP server startup."]})})]})})]})}function kie(){return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Help & Documentation"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Usage guides and workflow instructions"})]}),m.jsxs(ia,{defaultValue:"usage-guidance",className:"w-full",children:[m.jsxs(oa,{className:"grid w-full grid-cols-5 h-8",children:[m.jsx(Rn,{value:"usage-guidance",className:"text-xs",children:"Usage Guidance"}),m.jsx(Rn,{value:"semantic-features",className:"text-xs",children:"Semantic Features"}),m.jsx(Rn,{value:"mcp-features",className:"text-xs",children:"MCP Features"}),m.jsx(Rn,{value:"ai-workflow",className:"text-xs",children:"AI Workflow"}),m.jsx(Rn,{value:"cli-reference",className:"text-xs",children:"CLI Reference"})]}),m.jsx(In,{value:"usage-guidance",className:"mt-2",children:m.jsx(Tie,{})}),m.jsx(In,{value:"semantic-features",className:"mt-2",children:m.jsx(Eie,{})}),m.jsx(In,{value:"mcp-features",className:"mt-2",children:m.jsx(Aie,{})}),m.jsx(In,{value:"ai-workflow",className:"mt-2",children:m.jsx(Rie,{})}),m.jsx(In,{value:"cli-reference",className:"mt-2",children:m.jsx(Cie,{})})]})]})}function Nie(){const[t,e]=N.useState("SELECT name, file_count, size, generated_at FROM bundles ORDER BY name;"),[n,r]=N.useState(null),[s,i]=N.useState(!1),[a,l]=N.useState(null),u=[{name:"All Bundles",sql:"SELECT name, file_count, size, generated_at FROM bundles ORDER BY name;"},{name:"Large Bundles",sql:"SELECT name, file_count, size FROM bundles WHERE file_count > 5 ORDER BY size DESC;"},{name:"Recent Activity",sql:"SELECT name, generated_at FROM bundles WHERE generated_at IS NOT NULL ORDER BY generated_at DESC LIMIT 10;"},{name:"Bundle Statistics",sql:"SELECT COUNT(*) as total_bundles, SUM(file_count) as total_files, SUM(size) as total_size FROM bundles;"}];N.useEffect(()=>{h()},[]);const h=async()=>{try{const w=await(await fetch("/api/database/info")).json();l(w)}catch(b){console.error("Failed to fetch database info:",b),l({error:"Failed to load database info"})}},d=async()=>{if(t.trim()){i(!0);try{const w=await(await fetch("/api/database/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.trim()})})).json();r(w)}catch{r({error:"Failed to execute query"})}finally{i(!1)}}},g=b=>{b.key==="Enter"&&(b.ctrlKey||b.metaKey)&&d()};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsxs(Cn,{className:"flex items-center gap-2",children:[m.jsx(Q_,{className:"h-5 w-5"}),"SQLite Database"]})}),m.jsx(qt,{children:a?m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Bundles:"})," ",a.bundleCount||0]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Size:"})," ",a.sizeFormatted||"Unknown"]}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("span",{className:"font-medium",children:"Path:"}),m.jsx("span",{className:"font-mono text-xs ml-2",children:a.path||"Unknown"})]})]}):m.jsx("div",{className:"text-muted-foreground",children:"Loading database info..."})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsx(Cn,{children:"SQL Query"})}),m.jsxs(qt,{className:"space-y-4",children:[m.jsx(Yp,{value:t,onChange:b=>e(b.target.value),onKeyDown:g,placeholder:"Enter your SQL query...",className:"font-mono text-sm min-h-[120px]"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"text-xs text-muted-foreground",children:"Press Ctrl/Cmd + Enter to execute"}),m.jsxs(wt,{onClick:d,disabled:s||!t.trim(),className:"flex items-center gap-2",children:[s?m.jsx(fs,{className:"h-4 w-4 animate-spin"}):m.jsx(bC,{className:"h-4 w-4"}),"Execute"]})]})]})]})}),m.jsx("div",{children:m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsx(Cn,{children:"Sample Queries"})}),m.jsx(qt,{className:"space-y-2",children:u.map((b,w)=>m.jsx(wt,{variant:"outline",size:"sm",className:"w-full justify-start text-left h-auto p-3",onClick:()=>e(b.sql),children:m.jsxs("div",{children:[m.jsx("div",{className:"font-medium",children:b.name}),m.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:[b.sql.substring(0,40),"..."]})]})},w))})]})})]}),n&&m.jsxs(Ut,{children:[m.jsx(En,{children:m.jsx(Cn,{children:"Results"})}),m.jsx(qt,{children:n.error?m.jsxs("div",{className:"text-red-500 font-mono text-sm bg-red-50 dark:bg-red-950/20 p-4 rounded",children:["Error: ",n.error]}):n.results?m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs(pn,{variant:"secondary",children:[n.results.length," rows"]})}),n.results.length>0?m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full border-collapse border border-border text-sm",children:[m.jsx("thead",{children:m.jsx("tr",{className:"bg-muted",children:Object.keys(n.results[0]).map(b=>m.jsx("th",{className:"border border-border p-2 text-left font-medium",children:b},b))})}),m.jsx("tbody",{children:n.results.map((b,w)=>m.jsx("tr",{className:"hover:bg-muted/50",children:Object.values(b).map((R,A)=>m.jsx("td",{className:"border border-border p-2 font-mono text-xs",children:R===null?m.jsx("span",{className:"text-muted-foreground italic",children:"null"}):typeof R=="string"&&R.length>50?m.jsxs("span",{title:R,children:[R.substring(0,47),"..."]}):String(R)},A))},w))})]})}):m.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Query executed successfully, but returned no results."})]}):null})]})]})}const Mie=new PR,Iie=[{id:"bundles",label:"Bundles & Files",icon:mv},{id:"semantic",label:"Semantic Chunks",icon:S6},{id:"vector-db",label:"Vector Database",icon:bv},{id:"database",label:"SQLite Database",icon:Q_},{id:"activities",label:"Activities",icon:dC},{id:"settings",label:"Settings",icon:G_},{id:"ai-rules",label:"AI Rules",icon:vv},{id:"system-status",label:"System Status",icon:Ba},{id:"help",label:"Help & Documentation",icon:PF}],MP="cntx-ui-preferences",Oie=()=>{try{const t=localStorage.getItem(MP);if(t)return{...uR,...JSON.parse(t)}}catch(t){console.warn("Failed to load preferences from localStorage:",t)}return uR},Pie=t=>{try{localStorage.setItem(MP,JSON.stringify(t))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}},uR={sidebarCollapsed:!1,activeSection:"bundles"};function Die(){const[t,e]=N.useState("connecting"),[n,r]=N.useState("unknown"),[s,i]=N.useState(Oie),{sidebarCollapsed:a,activeSection:l}=s,u=b=>{const w={...s,...b};i(w),Pie(w)},h=b=>{u({sidebarCollapsed:b})},d=b=>{u({activeSection:b})};N.useEffect(()=>{const b=new WebSocket("ws://localhost:3333");b.onopen=()=>e("connected"),b.onclose=()=>e("disconnected");const w=async()=>{try{const A=await fetch("/api/mcp-status");if(A.ok){const{running:C}=await A.json();r(C?"running":"stopped")}else r("stopped")}catch{r("stopped")}};w();const R=setInterval(w,1e4);return()=>{b.close(),clearInterval(R)}},[]);const g=()=>{switch(l){case"bundles":return m.jsx("div",{className:"flex-1 min-h-0 flex",children:m.jsx("main",{className:"flex-1 min-h-0 flex flex-col",children:m.jsx(Oz,{})})});case"semantic":return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Semantic Chunks"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"AI-powered code organization and intelligent bundles"})]}),m.jsx(Zz,{})]});case"vector-db":return m.jsx("div",{className:"space-y-6",children:m.jsx(DG,{})});case"database":return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"SQLite Database"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Query and inspect the bundle database"})]}),m.jsx(Nie,{})]});case"activities":return m.jsx(pie,{});case"settings":return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"Settings"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure file visibility and bundle patterns"})]}),m.jsx(Sie,{})]});case"ai-rules":return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"AI Rules"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Configure AI context and project guidelines"})]}),m.jsx(Lz,{})]});case"system-status":return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-thin tracking-tight",children:"System Status"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Overall health and configuration of cntx-ui"})]}),m.jsx($z,{})]});case"help":return m.jsx(kie,{});default:return null}};return m.jsx(FR,{client:Mie,children:m.jsxs("div",{className:"h-screen bg-background overflow-hidden flex flex-col",children:[a&&m.jsxs("div",{className:"h-16 border-b flex items-center px-4 flex-shrink-0",children:[m.jsx("div",{className:"flex items-center gap-4 flex-1",children:m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]})})}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),m.jsx(lE,{})]})]}),m.jsxs("div",{className:"flex flex-1",style:{height:a?"calc(100vh - 4rem)":"100%"},children:[m.jsxs("div",{className:`${a?"w-16":"w-64"} border-r flex flex-col h-full transition-all duration-200`,children:[!a&&m.jsx("div",{className:"p-4 border-b flex-shrink-0",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-sm font-thin",children:"cntx-ui"}),m.jsx("p",{className:"text-xs text-muted-foreground font-thin",children:"Context Manager"})]}),m.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"h-6 w-6 p-0 opacity-60 hover:opacity-100",children:m.jsx(ws,{className:"w-3 h-3"})})]})}),a&&m.jsx("div",{className:"p-3 border-b flex-shrink-0 flex justify-center",children:m.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"h-8 w-8 p-0",children:m.jsx(c6,{className:"w-4 h-4"})})}),m.jsx("nav",{className:`${a?"p-2":"p-4"} space-y-1 flex-1 overflow-y-auto`,children:Iie.map(b=>{const w=b.icon,R=l===b.id;return m.jsxs(wt,{variant:R?"secondary":"ghost",className:`${a?"w-12 h-12 p-0 justify-center":"w-full justify-start h-8 text-xs font-thin"} transition-all`,onClick:()=>d(b.id),title:a?b.label:void 0,children:[m.jsx(w,{className:`${a?"w-4 h-4":"w-3 h-3 mr-2"}`}),!a&&b.label]},b.id)})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto pb-12",children:m.jsx("main",{className:"p-6 max-w-6xl",children:g()})})]}),m.jsxs("div",{className:"fixed left-0 right-0 h-10 bg-card border-t border-border px-4 flex items-center justify-between z-40 bottom-0",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-2 h-2 rounded-full ${t==="connected"?"bg-[color:var(--color-success)]":t==="connecting"?"bg-[color:var(--color-warning)]":"bg-destructive"}`}),m.jsxs("span",{className:"text-xs font-thin",children:["UI: ",t==="connected"?"Live":t==="connecting"?"Connecting":"Offline"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-2 h-2 rounded-full ${n==="running"?"bg-[color:var(--color-success)]":n==="stopped"?"bg-destructive":"bg-muted-foreground"}`}),m.jsxs("span",{className:"text-xs font-thin",children:["MCP SERVER: ",n==="running"?"Running":n==="stopped"?"Stopped":"Unknown"]})]})]}),!a&&m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"text-xs text-muted-foreground",children:"cntx-ui v2.0.12"}),m.jsx(lE,{})]})]})]})})}const jie=new PR;qD.createRoot(document.getElementById("root")).render(m.jsx(N.StrictMode,{children:m.jsx(FR,{client:jie,children:m.jsxs(IB,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[m.jsx(Die,{}),m.jsx(_B,{})]})})}));
